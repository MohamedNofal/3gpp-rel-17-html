<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>38305-h80</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
  type="text/javascript"></script>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#contents" id="toc-contents"><br />
Contents</a></li>
<li><a href="#foreword" id="toc-foreword"><br />
Foreword</a></li>
<li><a href="#scope" id="toc-scope"><br />
1 Scope</a></li>
<li><a href="#references" id="toc-references">2 References</a></li>
<li><a href="#definitions-symbols-and-abbreviations"
id="toc-definitions-symbols-and-abbreviations">3 Definitions, symbols
and abbreviations</a>
<ul>
<li><a href="#definitions" id="toc-definitions">3.1 Definitions</a></li>
<li><a href="#abbreviations" id="toc-abbreviations">3.2
Abbreviations</a></li>
</ul></li>
<li><a href="#main-concepts-and-requirements"
id="toc-main-concepts-and-requirements">4 Main concepts and
requirements</a>
<ul>
<li><a href="#assumptions-and-generalities"
id="toc-assumptions-and-generalities">4.1 Assumptions and
Generalities</a></li>
<li><a href="#role-of-ue-positioning-methods"
id="toc-role-of-ue-positioning-methods">4.2 Role of UE Positioning
Methods</a></li>
<li><a href="#standard-ue-positioning-methods"
id="toc-standard-ue-positioning-methods">4.3 Standard UE Positioning
Methods</a>
<ul>
<li><a href="#introduction" id="toc-introduction">4.3.1
Introduction</a></li>
<li><a href="#network-assisted-gnss-methods"
id="toc-network-assisted-gnss-methods">4.3.2 Network-assisted GNSS
methods</a></li>
<li><a href="#otdoa-positioning" id="toc-otdoa-positioning">4.3.3 OTDOA
positioning</a></li>
<li><a href="#enhanced-cell-id-methods"
id="toc-enhanced-cell-id-methods">4.3.4 Enhanced Cell ID
methods</a></li>
<li><a href="#barometric-pressure-sensor-positioning"
id="toc-barometric-pressure-sensor-positioning">4.3.5 Barometric
pressure sensor positioning</a></li>
<li><a href="#wlan-positioning" id="toc-wlan-positioning">4.3.6 WLAN
positioning</a></li>
<li><a href="#bluetooth-positioning"
id="toc-bluetooth-positioning">4.3.7 Bluetooth positioning</a></li>
<li><a href="#tbs-positioning" id="toc-tbs-positioning">4.3.8 TBS
positioning</a></li>
<li><a href="#motion-sensor-positioning"
id="toc-motion-sensor-positioning">4.3.9 Motion sensor
positioning</a></li>
<li><a href="#nr-enhanced-cell-id-methods"
id="toc-nr-enhanced-cell-id-methods">4.3.10 NR Enhanced Cell ID
methods</a></li>
<li><a href="#multi-rtt-positioning"
id="toc-multi-rtt-positioning">4.3.11 Multi-RTT positioning</a></li>
<li><a href="#dl-aod-positioning" id="toc-dl-aod-positioning">4.3.12
DL-AoD positioning</a></li>
<li><a href="#dl-tdoa-positioning" id="toc-dl-tdoa-positioning">4.3.13
DL-TDOA positioning</a></li>
<li><a href="#ul-tdoa-positioning" id="toc-ul-tdoa-positioning">4.3.14
UL-TDOA positioning</a></li>
<li><a href="#ul-aoa" id="toc-ul-aoa">4.3.15 UL-AoA</a></li>
</ul></li>
</ul></li>
<li><a href="#ng-ran-ue-positioning-architecture"
id="toc-ng-ran-ue-positioning-architecture">5 NG-RAN UE Positioning
Architecture</a>
<ul>
<li><a href="#architecture" id="toc-architecture">5.1
Architecture</a></li>
<li><a href="#ue-positioning-operations"
id="toc-ue-positioning-operations">5.2 UE Positioning
Operations</a></li>
<li><a href="#ng-ran-positioning-operations"
id="toc-ng-ran-positioning-operations">5.3 NG-RAN Positioning
Operations</a>
<ul>
<li><a href="#general-ng-ran-positioning-operations"
id="toc-general-ng-ran-positioning-operations">5.3.1 General NG-RAN
Positioning Operations</a></li>
<li><a href="#otdoa-positioning-support"
id="toc-otdoa-positioning-support">5.3.2 OTDOA Positioning
Support</a></li>
<li><a href="#assistance-information-broadcast-support"
id="toc-assistance-information-broadcast-support">5.3.3 Assistance
Information Broadcast Support</a></li>
<li><a href="#nr-rat-dependent-positioning-support"
id="toc-nr-rat-dependent-positioning-support">5.3.4 NR RAT-Dependent
Positioning Support</a></li>
</ul></li>
<li><a
href="#functional-description-of-elements-related-to-ue-positioning-in-ng-ran"
id="toc-functional-description-of-elements-related-to-ue-positioning-in-ng-ran">5.4
Functional Description of Elements Related to UE Positioning in
NG-RAN</a>
<ul>
<li><a href="#user-equipment-ue" id="toc-user-equipment-ue">5.4.1 User
Equipment (UE)</a></li>
<li><a href="#gnb" id="toc-gnb">5.4.2 gNB</a></li>
<li><a href="#ng-enb" id="toc-ng-enb">5.4.3 ng-eNB</a></li>
<li><a href="#location-management-function-lmf"
id="toc-location-management-function-lmf">5.4.4 Location Management
Function (LMF)</a></li>
<li><a href="#positioning-reference-unit-pru"
id="toc-positioning-reference-unit-pru">5.4.5 Positioning Reference Unit
(PRU)</a></li>
</ul></li>
</ul></li>
<li><a href="#signalling-protocols-and-interfaces"
id="toc-signalling-protocols-and-interfaces">6 Signalling protocols and
interfaces</a>
<ul>
<li><a href="#network-interfaces-supporting-positioning-operations"
id="toc-network-interfaces-supporting-positioning-operations">6.1
Network interfaces supporting positioning operations</a>
<ul>
<li><a href="#general-lcs-control-plane-architecture"
id="toc-general-lcs-control-plane-architecture">6.1.1 General LCS
control plane architecture</a></li>
<li><a href="#nr-uu-interface" id="toc-nr-uu-interface">6.1.2 NR-Uu
interface</a></li>
<li><a href="#lte-uu-interface" id="toc-lte-uu-interface">6.1.3 LTE-Uu
interface</a></li>
<li><a href="#ng-c-interface" id="toc-ng-c-interface">6.1.4 NG-C
interface</a></li>
<li><a href="#nl1-interface" id="toc-nl1-interface">6.1.5 NL1
interface</a></li>
<li><a href="#f1-interface" id="toc-f1-interface">6.1.6 F1
interface</a></li>
</ul></li>
<li><a href="#ue-terminated-protocols"
id="toc-ue-terminated-protocols">6.2 UE-terminated protocols</a>
<ul>
<li><a href="#lte-positioning-protocol-lpp"
id="toc-lte-positioning-protocol-lpp">6.2.1 LTE Positioning Protocol
(LPP)</a></li>
<li><a href="#radio-resource-control-rrc-for-nr"
id="toc-radio-resource-control-rrc-for-nr">6.2.2 Radio Resource Control
(RRC) for NR</a></li>
<li><a href="#radio-resource-control-rrc-for-lte"
id="toc-radio-resource-control-rrc-for-lte">6.2.3 Radio Resource Control
(RRC) for LTE</a></li>
<li><a href="#medium-access-control-mac-for-nr"
id="toc-medium-access-control-mac-for-nr">6.2.4 Medium Access Control
(MAC) for NR</a></li>
</ul></li>
<li><a href="#ng-ran-node-terminated-protocols"
id="toc-ng-ran-node-terminated-protocols">6.3 NG-RAN Node terminated
protocols</a>
<ul>
<li><a href="#nr-positioning-protocol-a-nrppa"
id="toc-nr-positioning-protocol-a-nrppa">6.3.1 NR Positioning Protocol A
(NRPPa)</a></li>
<li><a href="#ng-application-protocol-ngap"
id="toc-ng-application-protocol-ngap">6.3.2 NG Application Protocol
(NGAP)</a></li>
</ul></li>
<li><a href="#signalling-between-an-lmf-and-ue"
id="toc-signalling-between-an-lmf-and-ue">6.4 Signalling between an LMF
and UE</a>
<ul>
<li><a href="#protocol-layering" id="toc-protocol-layering">6.4.1
Protocol Layering</a></li>
<li><a href="#lpp-pdu-transfer" id="toc-lpp-pdu-transfer">6.4.2 LPP PDU
Transfer</a></li>
</ul></li>
<li><a href="#signalling-between-an-lmf-and-ng-ran-node"
id="toc-signalling-between-an-lmf-and-ng-ran-node">6.5 Signalling
between an LMF and NG-RAN node</a>
<ul>
<li><a href="#protocol-layering-1" id="toc-protocol-layering-1">6.5.1
Protocol Layering</a></li>
<li><a href="#nrppa-pdu-transfer-for-ue-positioning"
id="toc-nrppa-pdu-transfer-for-ue-positioning">6.5.2 NRPPa PDU Transfer
for UE Positioning</a></li>
<li><a href="#nrppa-pdu-transfer-for-positioning-support"
id="toc-nrppa-pdu-transfer-for-positioning-support">6.5.3 NRPPa PDU
Transfer for Positioning Support</a></li>
<li><a href="#nrppa-pdu-transfer-for-assistance-information-broadcast"
id="toc-nrppa-pdu-transfer-for-assistance-information-broadcast">6.5.4
NRPPa PDU Transfer for Assistance Information Broadcast</a></li>
</ul></li>
<li><a href="#void" id="toc-void">6.6 Void</a></li>
</ul></li>
<li><a href="#general-ng-ran-ue-positioning-procedures"
id="toc-general-ng-ran-ue-positioning-procedures">7 General NG-RAN UE
Positioning procedures</a>
<ul>
<li><a href="#general-lpp-procedures-for-ue-positioning"
id="toc-general-lpp-procedures-for-ue-positioning">7.1 General LPP
procedures for UE Positioning</a>
<ul>
<li><a href="#lpp-procedures" id="toc-lpp-procedures">7.1.1 LPP
procedures</a></li>
<li><a href="#positioning-procedures"
id="toc-positioning-procedures">7.1.2 Positioning procedures</a>
<ul>
<li><a href="#capability-transfer" id="toc-capability-transfer">7.1.2.1
Capability transfer</a></li>
<li><a href="#assistance-data-transfer"
id="toc-assistance-data-transfer">7.1.2.2 Assistance data
transfer</a></li>
<li><a href="#location-information-transfer"
id="toc-location-information-transfer">7.1.2.3 Location information
transfer</a></li>
<li><a href="#multiple-transactions"
id="toc-multiple-transactions">7.1.2.4 Multiple transactions</a></li>
<li><a href="#sequence-of-procedures"
id="toc-sequence-of-procedures">7.1.2.5 Sequence of procedures</a></li>
<li><a href="#error-handling" id="toc-error-handling">7.1.2.6 Error
handling</a></li>
<li><a href="#abort" id="toc-abort">7.1.2.7 Abort</a></li>
</ul></li>
<li><a href="#ue-positioning-measurements-in-rrc_idle-state-for-nb-iot"
id="toc-ue-positioning-measurements-in-rrc_idle-state-for-nb-iot">7.1.3
UE positioning measurements in RRC_IDLE state for NB-IoT</a></li>
</ul></li>
<li><a href="#general-nrppa-procedures-for-ue-positioning"
id="toc-general-nrppa-procedures-for-ue-positioning">7.2 General NRPPa
Procedures for UE Positioning</a>
<ul>
<li><a href="#nrppa-procedures" id="toc-nrppa-procedures">7.2.1 NRPPa
procedures</a></li>
<li><a href="#nrppa-transaction-types"
id="toc-nrppa-transaction-types">7.2.2 NRPPa transaction types</a>
<ul>
<li><a href="#location-information-transfer-1"
id="toc-location-information-transfer-1">7.2.2.1 Location information
transfer</a></li>
</ul></li>
</ul></li>
<li><a
href="#service-layer-support-using-combined-lpp-and-nrppa-procedures"
id="toc-service-layer-support-using-combined-lpp-and-nrppa-procedures">7.3
Service Layer Support using combined LPP and NRPPa Procedures</a>
<ul>
<li><a href="#general" id="toc-general">7.3.1 General</a></li>
<li><a href="#ni-lr-and-mt-lr-service-support"
id="toc-ni-lr-and-mt-lr-service-support">7.3.2 NI-LR and MT-LR Service
Support</a></li>
<li><a href="#mo-lr-service-support"
id="toc-mo-lr-service-support">7.3.3 MO-LR Service Support</a></li>
<li><a href="#deferred-mt-lr-event-reporting-support"
id="toc-deferred-mt-lr-event-reporting-support">7.3.4 Deferred MT-LR
Event Reporting Support</a></li>
</ul></li>
<li><a href="#general-rrc-procedures-for-ue-positioning"
id="toc-general-rrc-procedures-for-ue-positioning">7.4 General RRC
procedures for UE Positioning</a>
<ul>
<li><a href="#nr-rrc-procedures" id="toc-nr-rrc-procedures">7.4.1 NR RRC
Procedures</a>
<ul>
<li><a href="#location-measurement-indication"
id="toc-location-measurement-indication">7.4.1.1 Location Measurement
Indication</a></li>
<li><a href="#ue-positioning-assistance-information"
id="toc-ue-positioning-assistance-information">7.4.1.2 UE Positioning
Assistance Information</a></li>
</ul></li>
<li><a href="#lte-rrc-procedures" id="toc-lte-rrc-procedures">7.4.2 LTE
RRC Procedures</a>
<ul>
<li><a href="#inter-frequency-rstd-measurement-indication"
id="toc-inter-frequency-rstd-measurement-indication">7.4.2.1
Inter-frequency RSTD measurement indication</a></li>
</ul></li>
</ul></li>
<li><a href="#procedures-for-broadcast-of-assistance-data"
id="toc-procedures-for-broadcast-of-assistance-data">7.5 Procedures for
Broadcast of Assistance Data</a>
<ul>
<li><a href="#general-1" id="toc-general-1">7.5.1 General</a></li>
<li><a href="#broadcast-procedures" id="toc-broadcast-procedures">7.5.2
Broadcast Procedures</a></li>
</ul></li>
<li><a href="#procedures-for-on-demand-prs-transmission"
id="toc-procedures-for-on-demand-prs-transmission">7.6 Procedures for
On-Demand PRS transmission</a>
<ul>
<li><a href="#general-2" id="toc-general-2">7.6.1 General</a></li>
<li><a href="#on-demand-prs-transmission-procedures"
id="toc-on-demand-prs-transmission-procedures">7.6.2 On-Demand PRS
transmission procedures</a></li>
</ul></li>
<li><a href="#procedures-for-pre-configured-measurement-gap"
id="toc-procedures-for-pre-configured-measurement-gap">7.7 Procedures
for Pre-configured Measurement Gap</a>
<ul>
<li><a href="#general-3" id="toc-general-3">7.7.1 General</a></li>
<li><a href="#pre-configured-measurement-gap-procedures"
id="toc-pre-configured-measurement-gap-procedures">7.7.2 Pre-configured
Measurement Gap procedures</a></li>
</ul></li>
<li><a href="#procedures-for-pre-configured-prs-processing-window"
id="toc-procedures-for-pre-configured-prs-processing-window">7.8
Procedures for Pre-configured PRS processing window</a>
<ul>
<li><a href="#general-4" id="toc-general-4">7.8.1 General</a></li>
<li><a href="#pre-configured-prs-processing-window-procedures"
id="toc-pre-configured-prs-processing-window-procedures">7.8.2
Pre-configured PRS processing window procedures</a></li>
</ul></li>
<li><a href="#positioning-in-rrc_inactive-state"
id="toc-positioning-in-rrc_inactive-state">7.9 Positioning in
RRC_INACTIVE state</a></li>
</ul></li>
<li><a href="#positioning-methods-and-supporting-procedures"
id="toc-positioning-methods-and-supporting-procedures">8 Positioning
methods and Supporting Procedures</a>
<ul>
<li><a href="#gnss-positioning-methods"
id="toc-gnss-positioning-methods">8.1 GNSS positioning methods</a>
<ul>
<li><a href="#general-5" id="toc-general-5">8.1.1 General</a></li>
<li><a href="#information-to-be-transferred-between-ng-ran5gc-elements"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements">8.1.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-ue"
id="toc-information-that-may-be-transferred-from-the-lmf-to-ue">8.1.2.1
Information that may be transferred from the LMF to UE</a>
<ul>
<li><a href="#reference-time" id="toc-reference-time">8.1.2.1.1
Reference Time</a></li>
<li><a href="#reference-location" id="toc-reference-location">8.1.2.1.2
Reference Location</a></li>
<li><a href="#ionospheric-models" id="toc-ionospheric-models">8.1.2.1.3
Ionospheric Models</a></li>
<li><a href="#earth-orientation-parameters"
id="toc-earth-orientation-parameters">8.1.2.1.4 Earth Orientation
Parameters</a></li>
<li><a href="#gnss-gnss-time-offsets"
id="toc-gnss-gnss-time-offsets">8.1.2.1.5 GNSS-GNSS Time
Offsets</a></li>
<li><a href="#differential-gnss-corrections"
id="toc-differential-gnss-corrections">8.1.2.1.6 Differential GNSS
Corrections</a></li>
<li><a href="#ephemeris-and-clock-models"
id="toc-ephemeris-and-clock-models">8.1.2.1.7 Ephemeris and Clock
Models</a></li>
<li><a href="#real-time-integrity"
id="toc-real-time-integrity">8.1.2.1.8 Real-Time Integrity</a></li>
<li><a href="#data-bit-assistance"
id="toc-data-bit-assistance">8.1.2.1.9 Data Bit Assistance</a></li>
<li><a href="#acquisition-assistance"
id="toc-acquisition-assistance">8.1.2.1.10 Acquisition
Assistance</a></li>
<li><a href="#almanac" id="toc-almanac">8.1.2.1.11 Almanac</a></li>
<li><a href="#utc-models" id="toc-utc-models">8.1.2.1.12 UTC
Models</a></li>
<li><a href="#rtk-reference-station-information"
id="toc-rtk-reference-station-information">8.1.2.1.13 RTK Reference
Station Information</a></li>
<li><a href="#rtk-auxiliary-station-data"
id="toc-rtk-auxiliary-station-data">8.1.2.1.14 RTK Auxiliary Station
Data</a></li>
<li><a href="#rtk-observations" id="toc-rtk-observations">8.1.2.1.15 RTK
Observations</a></li>
<li><a href="#rtk-common-observation-information"
id="toc-rtk-common-observation-information">8.1.2.1.16 RTK Common
Observation Information</a></li>
<li><a href="#glonass-rtk-bias-information"
id="toc-glonass-rtk-bias-information">8.1.2.1.17 GLONASS RTK Bias
Information</a></li>
<li><a href="#rtk-mac-correction-differences"
id="toc-rtk-mac-correction-differences">8.1.2.1.18 RTK MAC Correction
Differences</a></li>
<li><a href="#rtk-residuals" id="toc-rtk-residuals">8.1.2.1.19 RTK
Residuals</a></li>
<li><a href="#rtk-fkp-gradients" id="toc-rtk-fkp-gradients">8.1.2.1.20
RTK FKP Gradients</a></li>
<li><a href="#ssr-orbit-corrections"
id="toc-ssr-orbit-corrections">8.1.2.1.21 SSR Orbit Corrections</a></li>
<li><a href="#ssr-clock-corrections"
id="toc-ssr-clock-corrections">8.1.2.1.22 SSR Clock Corrections</a></li>
<li><a href="#ssr-code-bias" id="toc-ssr-code-bias">8.1.2.1.23 SSR Code
Bias</a></li>
<li><a href="#ssr-phase-bias" id="toc-ssr-phase-bias">8.1.2.1.24 SSR
Phase Bias</a></li>
<li><a href="#ssr-stec-corrections"
id="toc-ssr-stec-corrections">8.1.2.1.25 SSR STEC Corrections</a></li>
<li><a href="#ssr-gridded-correction"
id="toc-ssr-gridded-correction">8.1.2.1.26 SSR Gridded
Correction</a></li>
<li><a href="#ssr-ura" id="toc-ssr-ura">8.1.2.1.27 SSR URA</a></li>
<li><a href="#ssr-correction-points"
id="toc-ssr-correction-points">8.1.2.1.28 SSR Correction Points</a></li>
<li><a href="#integrity-service-parameters"
id="toc-integrity-service-parameters">8.1.2.1.29 Integrity Service
Parameters</a></li>
<li><a href="#integrity-alerts" id="toc-integrity-alerts">8.1.2.1.30
Integrity Alerts</a></li>
</ul></li>
<li><a
href="#a-recommendations-for-grouping-of-assistance-data-to-support-different-rtk-service-levels"
id="toc-a-recommendations-for-grouping-of-assistance-data-to-support-different-rtk-service-levels">8.1.2.1a
Recommendations for grouping of assistance data to support different RTK
service levels</a></li>
<li><a href="#b-mapping-of-integrity-parameters"
id="toc-b-mapping-of-integrity-parameters">8.1.2.1b Mapping of integrity
parameters</a></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf">8.1.2.2
Information that may be transferred from the UE to LMF</a>
<ul>
<li><a href="#gnss-measurement-information"
id="toc-gnss-measurement-information">8.1.2.2.1 GNSS Measurement
Information</a>
<ul>
<li><a href="#ue-based-mode" id="toc-ue-based-mode">8.1.2.2.1.1 UE-based
mode</a></li>
<li><a href="#ue-assisted-mode" id="toc-ue-assisted-mode">8.1.2.2.1.2
UE-assisted mode</a></li>
</ul></li>
<li><a href="#additional-non-gnss-related-information"
id="toc-additional-non-gnss-related-information">8.1.2.2.2 Additional
Non-GNSS Related Information</a></li>
</ul></li>
</ul></li>
<li><a href="#assisted-gnss-positioning-procedures"
id="toc-assisted-gnss-positioning-procedures">8.1.3 Assisted-GNSS
Positioning Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure"
id="toc-capability-transfer-procedure">8.1.3.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure"
id="toc-assistance-data-transfer-procedure">8.1.3.2 Assistance Data
Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-assistance-data-delivery"
id="toc-lmf-initiated-assistance-data-delivery">8.1.3.2.1 LMF initiated
Assistance Data Delivery</a></li>
<li><a href="#a-lmf-initiated-periodic-assistance-data-delivery"
id="toc-a-lmf-initiated-periodic-assistance-data-delivery">8.1.3.2.1a
LMF initiated Periodic Assistance Data Delivery</a></li>
<li><a href="#ue-initiated-assistance-data-transfer"
id="toc-ue-initiated-assistance-data-transfer">8.1.3.2.2 UE initiated
Assistance Data Transfer</a></li>
<li><a href="#a-ue-initiated-periodic-assistance-data-transfer"
id="toc-a-ue-initiated-periodic-assistance-data-transfer">8.1.3.2.2a UE
initiated Periodic Assistance Data Transfer</a></li>
</ul></li>
<li><a href="#location-information-transfer-procedure"
id="toc-location-information-transfer-procedure">8.1.3.3 Location
Information Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-location-information-transfer-procedure"
id="toc-lmf-initiated-location-information-transfer-procedure">8.1.3.3.1
LMF initiated Location Information Transfer Procedure</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure"
id="toc-ue-initiated-location-information-delivery-procedure">8.1.3.3.2
UE-initiated Location Information Delivery Procedure</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#otdoa-positioning-1" id="toc-otdoa-positioning-1">8.2
OTDOA positioning</a>
<ul>
<li><a href="#general-6" id="toc-general-6">8.2.1 General</a></li>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-1"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-1">8.2.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-ue-1"
id="toc-information-that-may-be-transferred-from-the-lmf-to-ue-1">8.2.2.1
Information that may be transferred from the LMF to UE</a></li>
<li><a
href="#information-that-may-be-transferred-from-the-ng-enb-to-lmf"
id="toc-information-that-may-be-transferred-from-the-ng-enb-to-lmf">8.2.2.2
Information that may be transferred from the ng-eNB to LMF</a></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf-1"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf-1">8.2.2.3
Information that may be transferred from the UE to LMF</a></li>
<li><a href="#information-that-may-be-transferred-from-the-gnb-to-lmf"
id="toc-information-that-may-be-transferred-from-the-gnb-to-lmf">8.2.2.4
Information that may be transferred from the gNB to LMF</a></li>
</ul></li>
<li><a href="#otdoa-positioning-procedures"
id="toc-otdoa-positioning-procedures">8.2.3 OTDOA Positioning
Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure-1"
id="toc-capability-transfer-procedure-1">8.2.3.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-1"
id="toc-assistance-data-transfer-procedure-1">8.2.3.2 Assistance Data
Transfer Procedure</a>
<ul>
<li><a href="#assistance-data-transfer-between-lmf-and-ue"
id="toc-assistance-data-transfer-between-lmf-and-ue">8.2.3.2.1
Assistance Data Transfer between LMF and UE</a>
<ul>
<li><a href="#lmf-initiated-assistance-data-delivery-1"
id="toc-lmf-initiated-assistance-data-delivery-1">8.2.3.2.1.1 LMF
initiated Assistance Data Delivery</a></li>
<li><a href="#ue-initiated-assistance-data-transfer-1"
id="toc-ue-initiated-assistance-data-transfer-1">8.2.3.2.1.2 UE
initiated Assistance Data Transfer</a></li>
</ul></li>
<li><a href="#assistance-data-delivery-between-lmf-and-ng-ran-node"
id="toc-assistance-data-delivery-between-lmf-and-ng-ran-node">8.2.3.2.2
Assistance Data Delivery between LMF and NG-RAN node</a>
<ul>
<li><a href="#lmf-initiated-assistance-data-delivery-to-the-lmf"
id="toc-lmf-initiated-assistance-data-delivery-to-the-lmf">8.2.3.2.2.1
LMF-initiated assistance data delivery to the LMF</a></li>
</ul></li>
</ul></li>
<li><a href="#location-information-transfer-procedure-1"
id="toc-location-information-transfer-procedure-1">8.2.3.3 Location
Information Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-location-information-transfer-procedure-1"
id="toc-lmf-initiated-location-information-transfer-procedure-1">8.2.3.3.1
LMF-initiated Location Information Transfer Procedure</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure-1"
id="toc-ue-initiated-location-information-delivery-procedure-1">8.2.3.3.2
UE-initiated Location Information Delivery procedure</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#enhanced-cell-id-positioning-methods"
id="toc-enhanced-cell-id-positioning-methods">8.3 Enhanced cell ID
positioning methods</a>
<ul>
<li><a href="#general-7" id="toc-general-7">8.3.1 General</a></li>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-2"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-2">8.3.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-ue-2"
id="toc-information-that-may-be-transferred-from-the-lmf-to-ue-2">8.3.2.1
Information that may be transferred from the LMF to UE</a></li>
<li><a
href="#information-that-may-be-transferred-from-the-ng-enb-to-lmf-1"
id="toc-information-that-may-be-transferred-from-the-ng-enb-to-lmf-1">8.3.2.2
Information that may be transferred from the ng-eNB to LMF</a></li>
<li><a href="#information-that-may-be-transferred-from-the-gnb-to-lmf-1"
id="toc-information-that-may-be-transferred-from-the-gnb-to-lmf-1">8.3.2.3
Information that may be transferred from the gNB to LMF</a></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf-2"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf-2">8.3.2.4
Information that may be transferred from the UE to LMF</a></li>
</ul></li>
<li><a href="#downlink-e-cid-positioning-procedures"
id="toc-downlink-e-cid-positioning-procedures">8.3.3 Downlink E-CID
Positioning Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure-2"
id="toc-capability-transfer-procedure-2">8.3.3.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-2"
id="toc-assistance-data-transfer-procedure-2">8.3.3.2 Assistance Data
Transfer Procedure</a></li>
<li><a href="#location-information-transfer-procedure-2"
id="toc-location-information-transfer-procedure-2">8.3.3.3 Location
Information Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-location-information-transfer"
id="toc-lmf-initiated-location-information-transfer">8.3.3.3.1
LMF-initiated Location Information Transfer</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure-2"
id="toc-ue-initiated-location-information-delivery-procedure-2">8.3.3.3.2
UE-initiated Location Information Delivery procedure</a></li>
</ul></li>
</ul></li>
<li><a href="#uplink-e-cid-positioning-procedures"
id="toc-uplink-e-cid-positioning-procedures">8.3.4 Uplink E-CID
Positioning Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure-3"
id="toc-capability-transfer-procedure-3">8.3.4.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-3"
id="toc-assistance-data-transfer-procedure-3">8.3.4.2 Assistance Data
Transfer Procedure</a></li>
<li><a href="#position-measurement-procedure"
id="toc-position-measurement-procedure">8.3.4.3 Position Measurement
Procedure</a>
<ul>
<li><a href="#lmf-initiated-position-measurement"
id="toc-lmf-initiated-position-measurement">8.3.4.3.1 LMF-initiated
Position Measurement</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#barometric-pressure-sensor-positioning-1"
id="toc-barometric-pressure-sensor-positioning-1">8.4 Barometric
pressure sensor positioning</a>
<ul>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-3"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-3">8.4.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-ue-3"
id="toc-information-that-may-be-transferred-from-the-lmf-to-ue-3">8.4.2.1
Information that may be transferred from the LMF to UE</a>
<ul>
<li><a href="#barometric-pressure-sensor-assistance-data"
id="toc-barometric-pressure-sensor-assistance-data">8.4.2.1.1 Barometric
pressure sensor assistance data</a></li>
</ul></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf-3"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf-3">8.4.2.2
Information that may be transferred from the UE to LMF</a>
<ul>
<li><a href="#standalone-mode" id="toc-standalone-mode">8.4.2.2.1
Standalone mode</a></li>
<li><a href="#ue-assisted-mode-1" id="toc-ue-assisted-mode-1">8.4.2.2.2
UE-assisted mode</a></li>
<li><a href="#ue-based-mode-1" id="toc-ue-based-mode-1">8.4.2.2.3
UE-based mode</a></li>
</ul></li>
</ul></li>
<li><a href="#barometric-pressure-sensor-positioning-procedures"
id="toc-barometric-pressure-sensor-positioning-procedures">8.4.3
Barometric Pressure Sensor Positioning Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure-4"
id="toc-capability-transfer-procedure-4">8.4.3.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-4"
id="toc-assistance-data-transfer-procedure-4">8.4.3.2 Assistance Data
Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-assistance-data-delivery-2"
id="toc-lmf-initiated-assistance-data-delivery-2">8.4.3.2.1 LMF
initiated Assistance Data Delivery</a></li>
<li><a href="#ue-initiated-assistance-data-transfer-2"
id="toc-ue-initiated-assistance-data-transfer-2">8.4.3.2.2 UE initiated
Assistance Data Transfer</a></li>
</ul></li>
<li><a href="#location-information-transfer-procedure-3"
id="toc-location-information-transfer-procedure-3">8.4.3.3 Location
Information Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-location-information-transfer-procedure-2"
id="toc-lmf-initiated-location-information-transfer-procedure-2">8.4.3.3.1
LMF initiated Location Information Transfer Procedure</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure-3"
id="toc-ue-initiated-location-information-delivery-procedure-3">8.4.3.3.2
UE-initiated Location Information Delivery Procedure</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#wlan-positioning-1" id="toc-wlan-positioning-1">8.5 WLAN
positioning</a>
<ul>
<li><a href="#general-8" id="toc-general-8">8.5.1 General</a></li>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-4"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-4">8.5.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-ue-4"
id="toc-information-that-may-be-transferred-from-the-lmf-to-ue-4">8.5.2.1
Information that may be transferred from the LMF to UE</a>
<ul>
<li><a href="#wlan-ap-bssid" id="toc-wlan-ap-bssid">8.5.2.1.1 WLAN AP
BSSID</a></li>
<li><a href="#wlan-ap-ssid" id="toc-wlan-ap-ssid">8.5.2.1.2 WLAN AP
SSID</a></li>
<li><a href="#wlan-ap-type-data" id="toc-wlan-ap-type-data">8.5.2.1.3
WLAN AP Type Data</a></li>
<li><a href="#wlan-ap-location" id="toc-wlan-ap-location">8.5.2.1.4 WLAN
AP Location</a></li>
</ul></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf-4"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf-4">8.5.2.2
Information that may be transferred from the UE to LMF</a>
<ul>
<li><a href="#standalone-mode-1" id="toc-standalone-mode-1">8.5.2.2.1
Standalone mode</a></li>
<li><a href="#ue-assisted-mode-2" id="toc-ue-assisted-mode-2">8.5.2.2.2
UE-assisted mode</a></li>
<li><a href="#ue-based-mode-2" id="toc-ue-based-mode-2">8.5.2.2.3
UE-based mode</a></li>
</ul></li>
</ul></li>
<li><a href="#wlan-positioning-procedures"
id="toc-wlan-positioning-procedures">8.5.3 WLAN Positioning
Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure-5"
id="toc-capability-transfer-procedure-5">8.5.3.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-5"
id="toc-assistance-data-transfer-procedure-5">8.5.3.2 Assistance Data
Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-assistance-data-delivery-3"
id="toc-lmf-initiated-assistance-data-delivery-3">8.5.3.2.1 LMF
initiated Assistance Data Delivery</a></li>
<li><a href="#ue-initiated-assistance-data-transfer-3"
id="toc-ue-initiated-assistance-data-transfer-3">8.5.3.2.2 UE initiated
Assistance Data Transfer</a></li>
</ul></li>
<li><a href="#location-information-transfer-procedure-4"
id="toc-location-information-transfer-procedure-4">8.5.3.3 Location
Information Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-location-information-transfer-procedure-3"
id="toc-lmf-initiated-location-information-transfer-procedure-3">8.5.3.3.1
LMF initiated Location Information Transfer Procedure</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure-4"
id="toc-ue-initiated-location-information-delivery-procedure-4">8.5.3.3.2
UE-initiated Location Information Delivery Procedure</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#bluetooth-positioning-1"
id="toc-bluetooth-positioning-1">8.6 Bluetooth positioning</a>
<ul>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-5"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-5">8.6.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-ue-5"
id="toc-information-that-may-be-transferred-from-the-lmf-to-ue-5">8.6.2.1
Information that may be transferred from the LMF to UE</a></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf-5"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf-5">8.6.2.2
Information that may be transferred from the UE to LMF</a>
<ul>
<li><a href="#standalone-mode-2" id="toc-standalone-mode-2">8.6.2.2.1
Standalone mode</a></li>
<li><a href="#ue-assisted-mode-3" id="toc-ue-assisted-mode-3">8.6.2.2.2
UE-assisted mode</a></li>
</ul></li>
</ul></li>
<li><a href="#bluetooth-positioning-procedures"
id="toc-bluetooth-positioning-procedures">8.6.3 Bluetooth Positioning
Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure-6"
id="toc-capability-transfer-procedure-6">8.6.3.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-6"
id="toc-assistance-data-transfer-procedure-6">8.6.3.2 Assistance Data
Transfer Procedure</a></li>
<li><a href="#location-information-transfer-procedure-5"
id="toc-location-information-transfer-procedure-5">8.6.3.3 Location
Information Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-location-information-transfer-procedure-4"
id="toc-lmf-initiated-location-information-transfer-procedure-4">8.6.3.3.1
LMF initiated Location Information Transfer Procedure</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure-5"
id="toc-ue-initiated-location-information-delivery-procedure-5">8.6.3.3.2
UE-initiated Location Information Delivery Procedure</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#tbs-positioning-1" id="toc-tbs-positioning-1">8.7 TBS
positioning</a>
<ul>
<li><a href="#general-9" id="toc-general-9">8.7.1 General</a></li>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-6"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-6">8.7.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-ue-6"
id="toc-information-that-may-be-transferred-from-the-lmf-to-ue-6">8.7.2.1
Information that may be transferred from the LMF to UE</a>
<ul>
<li><a href="#acquisition-assistance-1"
id="toc-acquisition-assistance-1">8.7.2.1.1 Acquisition
Assistance</a></li>
<li><a href="#almanac-1" id="toc-almanac-1">8.7.2.1.2 Almanac</a></li>
</ul></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf-6"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf-6">8.7.2.2
Information that may be transferred from the UE to LMF</a>
<ul>
<li><a href="#standalone-mode-3" id="toc-standalone-mode-3">8.7.2.2.1
Standalone mode</a></li>
<li><a href="#ue-assisted-mode-4" id="toc-ue-assisted-mode-4">8.7.2.2.2
UE-assisted mode</a></li>
<li><a href="#ue-based-mode-3" id="toc-ue-based-mode-3">8.7.2.2.3
UE-based mode</a></li>
</ul></li>
</ul></li>
<li><a href="#tbs-positioning-procedures"
id="toc-tbs-positioning-procedures">8.7.3 TBS Positioning Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure-7"
id="toc-capability-transfer-procedure-7">8.7.3.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-7"
id="toc-assistance-data-transfer-procedure-7">8.7.3.2 Assistance Data
Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-assistance-data-delivery-4"
id="toc-lmf-initiated-assistance-data-delivery-4">8.7.3.2.1 LMF
initiated Assistance Data Delivery</a></li>
<li><a href="#ue-initiated-assistance-data-transfer-4"
id="toc-ue-initiated-assistance-data-transfer-4">8.7.3.2.2 UE initiated
Assistance Data Transfer</a></li>
</ul></li>
<li><a href="#location-information-transfer-procedure-6"
id="toc-location-information-transfer-procedure-6">8.7.3.3 Location
Information Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-location-information-transfer-procedure-5"
id="toc-lmf-initiated-location-information-transfer-procedure-5">8.7.3.3.1
LMF initiated Location Information Transfer Procedure</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure-6"
id="toc-ue-initiated-location-information-delivery-procedure-6">8.7.3.3.2
UE-initiated Location Information Delivery Procedure</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#motion-sensor-positioning-method"
id="toc-motion-sensor-positioning-method">8.8 Motion sensor positioning
method</a>
<ul>
<li><a href="#general-10" id="toc-general-10">8.8.1 General</a></li>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-7"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-7">8.8.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#general-11" id="toc-general-11">8.8.2.1 General</a></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf-7"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf-7">8.8.2.2
Information that may be transferred from the UE to LMF</a>
<ul>
<li><a href="#ue-assisted-ue-based-standalone-mode"
id="toc-ue-assisted-ue-based-standalone-mode">8.8.2.2.1 UE-assisted,
UE-based, Standalone mode</a></li>
<li><a href="#ue-displacement-and-movement-information"
id="toc-ue-displacement-and-movement-information">8.8.2.2.2 UE
Displacement and Movement Information</a></li>
</ul></li>
<li><a
href="#information-that-may-be-transferred-from-the-lmf-to-the-ue"
id="toc-information-that-may-be-transferred-from-the-lmf-to-the-ue">8.8.2.3
Information that may be transferred from the LMF to the UE</a></li>
</ul></li>
<li><a href="#motion-sensors-location-information-transfer-procedure"
id="toc-motion-sensors-location-information-transfer-procedure">8.8.3
Motion Sensors Location Information Transfer Procedure</a>
<ul>
<li><a href="#general-12" id="toc-general-12">8.8.3.1 General</a></li>
<li><a href="#lmf-initiated-location-information-transfer-procedure-6"
id="toc-lmf-initiated-location-information-transfer-procedure-6">8.8.3.2
LMF initiated Location Information Transfer Procedure</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure-7"
id="toc-ue-initiated-location-information-delivery-procedure-7">8.8.3.3
UE-initiated Location Information Delivery Procedure</a></li>
</ul></li>
</ul></li>
<li><a href="#nr-enhanced-cell-id-positioning-methods"
id="toc-nr-enhanced-cell-id-positioning-methods">8.9 NR Enhanced cell ID
positioning methods</a>
<ul>
<li><a href="#general-13" id="toc-general-13">8.9.1 General</a></li>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-8"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-8">8.9.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-ue-7"
id="toc-information-that-may-be-transferred-from-the-lmf-to-ue-7">8.9.2.1
Information that may be transferred from the LMF to UE</a></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf-8"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf-8">8.9.2.2
Information that may be transferred from the UE to LMF</a></li>
<li><a href="#information-that-may-be-transferred-from-the-gnb-to-lmf-2"
id="toc-information-that-may-be-transferred-from-the-gnb-to-lmf-2">8.9.2.3
Information that may be transferred from the gNB to LMF</a></li>
</ul></li>
<li><a href="#downlink-nr-e-cid-positioning-procedures"
id="toc-downlink-nr-e-cid-positioning-procedures">8.9.3 Downlink NR
E-CID Positioning Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure-8"
id="toc-capability-transfer-procedure-8">8.9.3.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-8"
id="toc-assistance-data-transfer-procedure-8">8.9.3.2 Assistance Data
Transfer Procedure</a></li>
<li><a href="#location-information-transfer-procedure-7"
id="toc-location-information-transfer-procedure-7">8.9.3.3 Location
Information Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-location-information-transfer-from-ue"
id="toc-lmf-initiated-location-information-transfer-from-ue">8.9.3.3.1
LMF-initiated Location Information Transfer from UE</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure-8"
id="toc-ue-initiated-location-information-delivery-procedure-8">8.9.3.3.2
UE-initiated Location Information Delivery procedure</a></li>
</ul></li>
</ul></li>
<li><a href="#uplink-nr-e-cid-positioning-procedures"
id="toc-uplink-nr-e-cid-positioning-procedures">8.9.4 Uplink NR E-CID
Positioning Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure-9"
id="toc-capability-transfer-procedure-9">8.9.4.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-9"
id="toc-assistance-data-transfer-procedure-9">8.9.4.2 Assistance Data
Transfer Procedure</a></li>
<li><a href="#location-information-transfer-procedure-8"
id="toc-location-information-transfer-procedure-8">8.9.4.3 Location
Information Transfer Procedure</a></li>
</ul></li>
</ul></li>
<li><a href="#multi-rtt-positioning-1"
id="toc-multi-rtt-positioning-1">8.10 Multi-RTT positioning</a>
<ul>
<li><a href="#general-14" id="toc-general-14">8.10.1 General</a></li>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-9"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-9">8.10.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-ue-8"
id="toc-information-that-may-be-transferred-from-the-lmf-to-ue-8">8.10.2.1
Information that may be transferred from the LMF to UE</a></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf-9"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf-9">8.10.2.2
Information that may be transferred from the UE to LMF</a></li>
<li><a href="#information-that-may-be-transferred-from-the-gnb-to-lmf-3"
id="toc-information-that-may-be-transferred-from-the-gnb-to-lmf-3">8.10.2.3
Information that may be transferred from the gNB to LMF</a></li>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-gnbs"
id="toc-information-that-may-be-transferred-from-the-lmf-to-gnbs">8.10.2.4
Information that may be transferred from the LMF to gNBs</a></li>
</ul></li>
<li><a href="#multi-rtt-positioning-procedures"
id="toc-multi-rtt-positioning-procedures">8.10.3 Multi-RTT Positioning
Procedures</a>
<ul>
<li><a href="#procedures-between-lmf-and-ue"
id="toc-procedures-between-lmf-and-ue">8.10.3.1 Procedures between LMF
and UE</a>
<ul>
<li><a href="#capability-transfer-procedure-10"
id="toc-capability-transfer-procedure-10">8.10.3.1.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-10"
id="toc-assistance-data-transfer-procedure-10">8.10.3.1.2 Assistance
Data Transfer Procedure</a>
<ul>
<li><a href="#assistance-data-transfer-between-lmf-and-ue-1"
id="toc-assistance-data-transfer-between-lmf-and-ue-1">8.10.3.1.2.1
Assistance Data Transfer between LMF and UE</a></li>
</ul></li>
<li><a href="#location-information-transfer-procedure-9"
id="toc-location-information-transfer-procedure-9">8.10.3.1.3 Location
Information Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-location-information-transfer-procedure-7"
id="toc-lmf-initiated-location-information-transfer-procedure-7">8.10.3.1.3.1
LMF-initiated Location Information Transfer Procedure</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure-9"
id="toc-ue-initiated-location-information-delivery-procedure-9">8.10.3.1.3.2
UE-initiated Location Information Delivery procedure</a></li>
</ul></li>
</ul></li>
<li><a href="#procedures-between-lmf-and-gnb"
id="toc-procedures-between-lmf-and-gnb">8.10.3.2 Procedures between LMF
and gNB</a>
<ul>
<li><a href="#assistance-data-delivery-between-lmf-and-gnb"
id="toc-assistance-data-delivery-between-lmf-and-gnb">8.10.3.2.1
Assistance Data Delivery between LMF and gNB</a></li>
<li><a
href="#location-information-transferassistance-data-transfer-procedure"
id="toc-location-information-transferassistance-data-transfer-procedure">8.10.3.2.2
Location Information Transfer/Assistance Data Transfer
Procedure</a></li>
<li><a href="#positioning-activationdeactivation-procedure"
id="toc-positioning-activationdeactivation-procedure">8.10.3.2.3
Positioning Activation/Deactivation Procedure</a></li>
</ul></li>
</ul></li>
<li><a href="#sequence-of-procedure-for-multi-rtt-positioning"
id="toc-sequence-of-procedure-for-multi-rtt-positioning">8.10.4 Sequence
of Procedure for Multi-RTT positioning</a></li>
</ul></li>
<li><a href="#dl-aod-positioning-1" id="toc-dl-aod-positioning-1">8.11
DL-AoD positioning</a>
<ul>
<li><a href="#general-15" id="toc-general-15">8.11.1 General</a></li>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-10"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-10">8.11.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-ue-9"
id="toc-information-that-may-be-transferred-from-the-lmf-to-ue-9">8.11.2.1
Information that may be transferred from the LMF to UE</a></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf-10"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf-10">8.11.2.2
Information that may be transferred from the UE to LMF</a></li>
<li><a href="#information-that-may-be-transferred-from-the-gnb-to-lmf-4"
id="toc-information-that-may-be-transferred-from-the-gnb-to-lmf-4">8.11.2.3
Information that may be transferred from the gNB to LMF</a></li>
</ul></li>
<li><a href="#dl-aod-positioning-procedures"
id="toc-dl-aod-positioning-procedures">8.11.3 DL-AoD Positioning
Procedures</a>
<ul>
<li><a href="#procedures-between-lmf-and-ue-1"
id="toc-procedures-between-lmf-and-ue-1">8.11.3.1 Procedures between LMF
and UE</a>
<ul>
<li><a href="#capability-transfer-procedure-11"
id="toc-capability-transfer-procedure-11">8.11.3.1.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-11"
id="toc-assistance-data-transfer-procedure-11">8.11.3.1.2 Assistance
Data Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-assistance-data-delivery-6"
id="toc-lmf-initiated-assistance-data-delivery-6">8.11.3.1.2.1 LMF
initiated Assistance Data Delivery</a></li>
<li><a href="#ue-initiated-assistance-data-transfer-6"
id="toc-ue-initiated-assistance-data-transfer-6">8.11.3.1.2.2 UE
initiated Assistance Data Transfer</a></li>
</ul></li>
<li><a href="#location-information-transfer-procedure-10"
id="toc-location-information-transfer-procedure-10">8.11.3.1.3 Location
Information Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-location-information-transfer-procedure-8"
id="toc-lmf-initiated-location-information-transfer-procedure-8">8.11.3.1.3.1
LMF-initiated Location Information Transfer Procedure</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure-10"
id="toc-ue-initiated-location-information-delivery-procedure-10">8.11.3.1.3.2
UE-initiated Location Information Delivery procedure</a></li>
</ul></li>
</ul></li>
<li><a href="#procedures-between-lmf-and-gnb-1"
id="toc-procedures-between-lmf-and-gnb-1">8.11.3.2 Procedures between
LMF and gNB</a>
<ul>
<li><a href="#assistance-data-delivery-procedure"
id="toc-assistance-data-delivery-procedure">8.11.3.2.1 Assistance Data
Delivery procedure</a>
<ul>
<li><a href="#lmf-initiated-assistance-data-delivery-to-the-lmf-1"
id="toc-lmf-initiated-assistance-data-delivery-to-the-lmf-1">8.11.3.2.1.1
LMF-initiated assistance data delivery to the LMF</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#dl-tdoa-positioning-1" id="toc-dl-tdoa-positioning-1">8.12
DL-TDOA positioning</a>
<ul>
<li><a href="#general-16" id="toc-general-16">8.12.1 General</a></li>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-11"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-11">8.12.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-ue-10"
id="toc-information-that-may-be-transferred-from-the-lmf-to-ue-10">8.12.2.1
Information that may be transferred from the LMF to UE</a></li>
<li><a href="#information-that-may-be-transferred-from-the-ue-to-lmf-11"
id="toc-information-that-may-be-transferred-from-the-ue-to-lmf-11">8.12.2.2
Information that may be transferred from the UE to LMF</a></li>
<li><a href="#information-that-may-be-transferred-from-the-gnb-to-lmf-5"
id="toc-information-that-may-be-transferred-from-the-gnb-to-lmf-5">8.12.2.3
Information that may be transferred from the gNB to LMF</a></li>
</ul></li>
<li><a href="#dl-tdoa-positioning-procedures"
id="toc-dl-tdoa-positioning-procedures">8.12.3 DL-TDOA Positioning
Procedures</a>
<ul>
<li><a href="#procedures-between-lmf-and-ue-2"
id="toc-procedures-between-lmf-and-ue-2">8.12.3.1 Procedures between LMF
and UE</a>
<ul>
<li><a href="#capability-transfer-procedure-12"
id="toc-capability-transfer-procedure-12">8.12.3.1.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-12"
id="toc-assistance-data-transfer-procedure-12">8.12.3.1.2 Assistance
Data Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-assistance-data-delivery-7"
id="toc-lmf-initiated-assistance-data-delivery-7">8.12.3.1.2.1 LMF
initiated Assistance Data Delivery</a></li>
<li><a href="#ue-initiated-assistance-data-transfer-7"
id="toc-ue-initiated-assistance-data-transfer-7">8.12.3.1.2.2 UE
initiated Assistance Data Transfer</a></li>
</ul></li>
<li><a href="#location-information-transfer-procedure-11"
id="toc-location-information-transfer-procedure-11">8.12.3.1.3 Location
Information Transfer Procedure</a>
<ul>
<li><a href="#lmf-initiated-location-information-transfer-procedure-9"
id="toc-lmf-initiated-location-information-transfer-procedure-9">8.12.3.1.3.1
LMF-initiated Location Information Transfer Procedure</a></li>
<li><a href="#ue-initiated-location-information-delivery-procedure-11"
id="toc-ue-initiated-location-information-delivery-procedure-11">8.12.3.1.3.2
UE-initiated Location Information Delivery procedure</a></li>
</ul></li>
</ul></li>
<li><a href="#procedures-between-lmf-and-gnb-2"
id="toc-procedures-between-lmf-and-gnb-2">8.12.3.2 Procedures between
LMF and gNB</a>
<ul>
<li><a href="#assistance-data-delivery-procedure-1"
id="toc-assistance-data-delivery-procedure-1">8.12.3.2.1 Assistance Data
Delivery procedure</a>
<ul>
<li><a href="#lmf-initiated-assistance-data-delivery-to-the-lmf-2"
id="toc-lmf-initiated-assistance-data-delivery-to-the-lmf-2">8.12.3.2.1.1
LMF-initiated assistance data delivery to the LMF</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#ul-tdoa-positioning-1" id="toc-ul-tdoa-positioning-1">8.13
UL-TDOA positioning</a>
<ul>
<li><a href="#general-17" id="toc-general-17">8.13.1 General</a></li>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-12"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-12">8.13.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a
href="#assistance-data-that-may-be-transferred-from-the-gnb-to-the-lmf"
id="toc-assistance-data-that-may-be-transferred-from-the-gnb-to-the-lmf">8.13.2.0
Assistance Data that may be transferred from the gNB to the LMF</a></li>
<li><a
href="#configuration-data-that-may-be-transferred-from-the-gnb-to-the-lmf"
id="toc-configuration-data-that-may-be-transferred-from-the-gnb-to-the-lmf">8.13.2.1
Configuration Data that may be transferred from the gNB to the
LMF</a></li>
<li><a
href="#location-information-that-may-be-transferred-from-the-gnbs-to-lmf"
id="toc-location-information-that-may-be-transferred-from-the-gnbs-to-lmf">8.13.2.2
Location Information that may be transferred from the gNBs to
LMF</a></li>
<li><a
href="#information-that-may-be-transferred-from-the-lmf-to-gnbs-1"
id="toc-information-that-may-be-transferred-from-the-lmf-to-gnbs-1">8.13.2.3
Information that may be transferred from the LMF to gNBs</a></li>
</ul></li>
<li><a href="#ul-tdoa-positioning-procedures"
id="toc-ul-tdoa-positioning-procedures">8.13.3 UL-TDOA Positioning
Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure-13"
id="toc-capability-transfer-procedure-13">8.13.3.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-13"
id="toc-assistance-data-transfer-procedure-13">8.13.3.2 Assistance Data
Transfer Procedure</a>
<ul>
<li><a href="#assistance-data-delivery-between-lmf-and-gnb-1"
id="toc-assistance-data-delivery-between-lmf-and-gnb-1">8.13.3.2.1
Assistance Data Delivery between LMF and gNB</a></li>
</ul></li>
<li><a
href="#location-information-transferassistance-data-transfer-procedure-1"
id="toc-location-information-transferassistance-data-transfer-procedure-1">8.13.3.3
Location Information Transfer/Assistance Data Transfer
Procedure</a></li>
<li><a href="#a-positioning-activationdeactivation-procedure"
id="toc-a-positioning-activationdeactivation-procedure">8.13.3.3a
Positioning Activation/Deactivation Procedure</a></li>
<li><a href="#sequence-of-procedure-for-ul-tdoa-positioning"
id="toc-sequence-of-procedure-for-ul-tdoa-positioning">8.13.3.4 Sequence
of Procedure for UL-TDOA positioning</a></li>
</ul></li>
</ul></li>
<li><a href="#ul-aoa-positioning" id="toc-ul-aoa-positioning">8.14
UL-AoA positioning</a>
<ul>
<li><a href="#general-18" id="toc-general-18">8.14.1 General</a></li>
<li><a
href="#information-to-be-transferred-between-ng-ran5gc-elements-13"
id="toc-information-to-be-transferred-between-ng-ran5gc-elements-13">8.14.2
Information to be transferred between NG-RAN/5GC Elements</a>
<ul>
<li><a
href="#assistance-data-that-may-be-transferred-from-the-gnb-to-the-lmf-1"
id="toc-assistance-data-that-may-be-transferred-from-the-gnb-to-the-lmf-1">8.14.2.0
Assistance Data that may be transferred from the gNB to the LMF</a></li>
<li><a
href="#configuration-data-that-may-be-transferred-from-the-gnb-to-the-lmf-1"
id="toc-configuration-data-that-may-be-transferred-from-the-gnb-to-the-lmf-1">8.14.2.1
Configuration Data that may be transferred from the gNB to the
LMF</a></li>
<li><a
href="#location-information-that-may-be-transferred-from-the-gnbs-to-lmf-1"
id="toc-location-information-that-may-be-transferred-from-the-gnbs-to-lmf-1">8.14.2.2
Location Information that may be transferred from the gNBs to
LMF</a></li>
<li><a href="#information-that-may-be-transferred-from-the-lmf-to-gnb"
id="toc-information-that-may-be-transferred-from-the-lmf-to-gnb">8.14.2.3
Information that may be transferred from the LMF to gNB</a></li>
</ul></li>
<li><a href="#ul-aoa-positioning-procedures"
id="toc-ul-aoa-positioning-procedures">8.14.3 UL-AoA Positioning
Procedures</a>
<ul>
<li><a href="#capability-transfer-procedure-14"
id="toc-capability-transfer-procedure-14">8.14.3.1 Capability Transfer
Procedure</a></li>
<li><a href="#assistance-data-transfer-procedure-14"
id="toc-assistance-data-transfer-procedure-14">8.14.3.2 Assistance Data
Transfer Procedure</a>
<ul>
<li><a href="#assistance-data-delivery-between-lmf-and-gnb-2"
id="toc-assistance-data-delivery-between-lmf-and-gnb-2">8.14.3.2.1
Assistance Data Delivery between LMF and gNB</a></li>
</ul></li>
<li><a
href="#location-information-transferassistance-data-transfer-procedure-2"
id="toc-location-information-transferassistance-data-transfer-procedure-2">8.14.3.3
Location Information Transfer/Assistance Data Transfer
Procedure</a></li>
<li><a href="#a-positioning-activationdeactivation-procedure-1"
id="toc-a-positioning-activationdeactivation-procedure-1">8.14.3.3a
Positioning Activation/Deactivation Procedure</a></li>
<li><a href="#sequence-of-procedure-for-ul-aoa-positioning"
id="toc-sequence-of-procedure-for-ul-aoa-positioning">8.14.3.4 Sequence
of Procedure for UL-AoA positioning</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a
href="#a.1-supl-2.0-positioning-methods-and-positioning-protocols"
id="toc-a.1-supl-2.0-positioning-methods-and-positioning-protocols">A.1
SUPL 2.0 Positioning Methods and Positioning Protocols</a></li>
<li><a href="#a.2-supl-2.0-and-nr-architecture"
id="toc-a.2-supl-2.0-and-nr-architecture">A.2 SUPL 2.0 and NR
Architecture</a></li>
<li><a href="#a.3-lpp-session-procedures-using-supl"
id="toc-a.3-lpp-session-procedures-using-supl">A.3 LPP session
procedures using SUPL</a></li>
<li><a href="#a.4-procedures-combining-c-plane-and-u-plane-operations"
id="toc-a.4-procedures-combining-c-plane-and-u-plane-operations">A.4
Procedures combining C-plane and U-plane operations</a></li>
</ul>
</nav>
<p>3GPP TS 38.305 V17.8.0 (2025-03)</p>
<p>Technical Specification</p>
<p>3rd Generation Partnership Project;</p>
<p>Technical Specification Group Radio Access Network;</p>
<p>NG Radio Access Network (NG-RAN);</p>
<p>Stage 2 functional specification of</p>
<p>User Equipment (UE) positioning in NG-RAN</p>
<p>(Release 17)</p>
<p><img src="media/image1.svg" /> <img src="media/image2.svg" /></p>
<p>The present document has been developed within the 3rd Generation
Partnership Project (3GPP <sup>TM</sup>) and may be further elaborated
for the purposes of 3GPP..<br />
The present document has not been subject to any approval process by the
3GPP Organizational Partners and shall not be implemented.<br />
This Specification is provided for future development work within 3GPP
only. The Organizational Partners accept no liability for any use of
this Specification.<br />
Specifications and Reports for implementation of the 3GPP <sup>TM</sup>
system should be obtained via the 3GPP Organizational Partners'
Publications Offices.</p>
<blockquote>
<p><em><strong>3GPP</strong></em></p>
<p>Postal address</p>
<p>3GPP support office address</p>
<p>650 Route des Lucioles - Sophia Antipolis</p>
<p>Valbonne - FRANCE</p>
<p>Tel.: +33 4 92 94 42 00 Fax: +33 4 93 65 47 16</p>
<p>Internet</p>
<p>http://www.3gpp.org</p>
</blockquote>
<p><em><strong>Copyright Notification</strong></em></p>
<p>No part may be reproduced except as authorized by written
permission.<br />
The copyright and the foregoing restriction extend to reproduction in
all media.</p>
<p> 2025, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).</p>
<p>All rights reserved.</p>
<p>UMTS is a Trade Mark of ETSI registered for the benefit of its
members</p>
<p>3GPP is a Trade Mark of ETSI registered for the benefit of its
Members and of the 3GPP Organizational Partners<br />
LTE is a Trade Mark of ETSI registered for the benefit of its Members
and of the 3GPP Organizational Partners</p>
<p>GSM and the GSM logo are registered and owned by the GSM
Association</p>
<p>Bluetooth is a Trade Mark of the Bluetooth SIG registered for the
benefit of its members</p>
<h1 class="TT" id="contents"><br />
Contents</h1>
<p>Foreword <a href="#foreword">10</a></p>
<p>1 Scope <a href="#scope">11</a></p>
<p>2 References <a href="#references">11</a></p>
<p>3 Definitions, symbols and abbreviations <a
href="#definitions-symbols-and-abbreviations">13</a></p>
<p>3.1 Definitions <a href="#definitions">13</a></p>
<p>3.2 Abbreviations <a href="#abbreviations">14</a></p>
<p>4 Main concepts and requirements <a
href="#main-concepts-and-requirements">16</a></p>
<p>4.1 Assumptions and Generalities <a
href="#assumptions-and-generalities">16</a></p>
<p>4.2 Role of UE Positioning Methods <a
href="#role-of-ue-positioning-methods">17</a></p>
<p>4.3 Standard UE Positioning Methods <a
href="#standard-ue-positioning-methods">17</a></p>
<p>4.3.1 Introduction <a href="#introduction">17</a></p>
<p>4.3.2 Network-assisted GNSS methods <a
href="#network-assisted-gnss-methods">19</a></p>
<p>4.3.3 OTDOA positioning <a href="#otdoa-positioning">19</a></p>
<p>4.3.4 Enhanced Cell ID methods <a
href="#enhanced-cell-id-methods">19</a></p>
<p>4.3.5 Barometric pressure sensor positioning <a
href="#barometric-pressure-sensor-positioning">19</a></p>
<p>4.3.6 WLAN positioning <a href="#wlan-positioning">19</a></p>
<p>4.3.7 Bluetooth positioning <a
href="#bluetooth-positioning">20</a></p>
<p>4.3.8 TBS positioning <a href="#tbs-positioning">20</a></p>
<p>4.3.9 Motion sensor positioning <a
href="#motion-sensor-positioning">20</a></p>
<p>4.3.10 NR Enhanced Cell ID methods <a
href="#nr-enhanced-cell-id-methods">20</a></p>
<p>4.3.11 Multi-RTT positioning <a
href="#multi-rtt-positioning">20</a></p>
<p>4.3.12 DL-AoD positioning <a href="#dl-aod-positioning">21</a></p>
<p>4.3.13 DL-TDOA positioning <a href="#dl-tdoa-positioning">21</a></p>
<p>4.3.14 UL-TDOA positioning <a href="#ul-tdoa-positioning">21</a></p>
<p>4.3.15 UL-AoA <a href="#ul-aoa">21</a></p>
<p>5 NG-RAN UE Positioning Architecture <a
href="#ng-ran-ue-positioning-architecture">21</a></p>
<p>5.1 Architecture <a href="#architecture">21</a></p>
<p>5.2 UE Positioning Operations <a
href="#ue-positioning-operations">22</a></p>
<p>5.3 NG-RAN Positioning Operations <a
href="#ng-ran-positioning-operations">24</a></p>
<p>5.3.1 General NG-RAN Positioning Operations <a
href="#general-ng-ran-positioning-operations">24</a></p>
<p>5.3.2 OTDOA Positioning Support <a
href="#otdoa-positioning-support">24</a></p>
<p>5.3.3 Assistance Information Broadcast Support <a
href="#assistance-information-broadcast-support">24</a></p>
<p>5.3.4 NR RAT-Dependent Positioning Support <a
href="#nr-rat-dependent-positioning-support">24</a></p>
<p>5.4 Functional Description of Elements Related to UE Positioning in
NG-RAN <a
href="#functional-description-of-elements-related-to-ue-positioning-in-ng-ran">24</a></p>
<p>5.4.1 User Equipment (UE) <a href="#user-equipment-ue">24</a></p>
<p>5.4.2 gNB <a href="#gnb">25</a></p>
<p>5.4.3 ng-eNB <a href="#ng-enb">25</a></p>
<p>5.4.4 Location Management Function (LMF) <a
href="#location-management-function-lmf">25</a></p>
<p>5.4.5 Positioning Reference Unit (PRU) <a
href="#positioning-reference-unit-pru">26</a></p>
<p>6 Signalling protocols and interfaces <a
href="#signalling-protocols-and-interfaces">26</a></p>
<p>6.1 Network interfaces supporting positioning operations <a
href="#network-interfaces-supporting-positioning-operations">26</a></p>
<p>6.1.1 General LCS control plane architecture <a
href="#general-lcs-control-plane-architecture">26</a></p>
<p>6.1.2 NR-Uu interface <a href="#nr-uu-interface">26</a></p>
<p>6.1.3 LTE-Uu interface <a href="#lte-uu-interface">26</a></p>
<p>6.1.4 NG-C interface <a href="#ng-c-interface">26</a></p>
<p>6.1.5 NL1 interface <a href="#nl1-interface">26</a></p>
<p>6.1.6 F1 interface <a href="#f1-interface">27</a></p>
<p>6.2 UE-terminated protocols <a
href="#ue-terminated-protocols">27</a></p>
<p>6.2.1 LTE Positioning Protocol (LPP) <a
href="#lte-positioning-protocol-lpp">27</a></p>
<p>6.2.2 Radio Resource Control (RRC) for NR <a
href="#radio-resource-control-rrc-for-nr">27</a></p>
<p>6.2.3 Radio Resource Control (RRC) for LTE <a
href="#radio-resource-control-rrc-for-lte">27</a></p>
<p>6.2.4 Medium Access Control (MAC) for NR <a
href="#medium-access-control-mac-for-nr">28</a></p>
<p>6.3 NG-RAN Node terminated protocols <a
href="#ng-ran-node-terminated-protocols">28</a></p>
<p>6.3.1 NR Positioning Protocol A (NRPPa) <a
href="#nr-positioning-protocol-a-nrppa">28</a></p>
<p>6.3.2 NG Application Protocol (NGAP) <a
href="#ng-application-protocol-ngap">28</a></p>
<p>6.4 Signalling between an LMF and UE <a
href="#signalling-between-an-lmf-and-ue">28</a></p>
<p>6.4.1 Protocol Layering <a href="#protocol-layering">28</a></p>
<p>6.4.2 LPP PDU Transfer <a href="#lpp-pdu-transfer">29</a></p>
<p>6.5 Signalling between an LMF and NG-RAN node <a
href="#signalling-between-an-lmf-and-ng-ran-node">31</a></p>
<p>6.5.1 Protocol Layering <a href="#protocol-layering-1">31</a></p>
<p>6.5.2 NRPPa PDU Transfer for UE Positioning <a
href="#nrppa-pdu-transfer-for-ue-positioning">31</a></p>
<p>6.5.3 NRPPa PDU Transfer for Positioning Support <a
href="#nrppa-pdu-transfer-for-positioning-support">32</a></p>
<p>6.5.4 NRPPa PDU Transfer for Assistance Information Broadcast <a
href="#nrppa-pdu-transfer-for-assistance-information-broadcast">33</a></p>
<p>6.6 Void <a href="#void">35</a></p>
<p>7 General NG-RAN UE Positioning procedures <a
href="#general-ng-ran-ue-positioning-procedures">35</a></p>
<p>7.1 General LPP procedures for UE Positioning <a
href="#general-lpp-procedures-for-ue-positioning">35</a></p>
<p>7.1.1 LPP procedures <a href="#lpp-procedures">35</a></p>
<p>7.1.2 Positioning procedures <a
href="#positioning-procedures">35</a></p>
<p>7.1.2.1 Capability transfer <a href="#capability-transfer">35</a></p>
<p>7.1.2.2 Assistance data transfer <a
href="#assistance-data-transfer">35</a></p>
<p>7.1.2.3 Location information transfer <a
href="#location-information-transfer">35</a></p>
<p>7.1.2.4 Multiple transactions <a
href="#multiple-transactions">35</a></p>
<p>7.1.2.5 Sequence of procedures <a
href="#sequence-of-procedures">35</a></p>
<p>7.1.2.6 Error handling <a href="#error-handling">36</a></p>
<p>7.1.2.7 Abort <a href="#abort">36</a></p>
<p>7.1.3 UE positioning measurements in RRC_IDLE state for NB-IoT <a
href="#ue-positioning-measurements-in-rrc_idle-state-for-nb-iot">36</a></p>
<p>7.2 General NRPPa Procedures for UE Positioning <a
href="#general-nrppa-procedures-for-ue-positioning">37</a></p>
<p>7.2.1 NRPPa procedures <a href="#nrppa-procedures">37</a></p>
<p>7.2.2 NRPPa transaction types <a
href="#nrppa-transaction-types">38</a></p>
<p>7.2.2.1 Location information transfer <a
href="#location-information-transfer-1">38</a></p>
<p>7.3 Service Layer Support using combined LPP and NRPPa Procedures <a
href="#service-layer-support-using-combined-lpp-and-nrppa-procedures">38</a></p>
<p>7.3.1 General <a href="#general">38</a></p>
<p>7.3.2 NI-LR and MT-LR Service Support <a
href="#ni-lr-and-mt-lr-service-support">38</a></p>
<p>7.3.3 MO-LR Service Support <a
href="#mo-lr-service-support">39</a></p>
<p>7.3.4 Deferred MT-LR Event Reporting Support <a
href="#deferred-mt-lr-event-reporting-support">40</a></p>
<p>7.4 General RRC procedures for UE Positioning <a
href="#general-rrc-procedures-for-ue-positioning">41</a></p>
<p>7.4.1 NR RRC Procedures <a href="#nr-rrc-procedures">41</a></p>
<p>7.4.1.1 Location Measurement Indication <a
href="#location-measurement-indication">41</a></p>
<p>7.4.1.2 UE Positioning Assistance Information <a
href="#ue-positioning-assistance-information">42</a></p>
<p>7.4.2 LTE RRC Procedures <a href="#lte-rrc-procedures">43</a></p>
<p>7.4.2.1 Inter-frequency RSTD measurement indication <a
href="#inter-frequency-rstd-measurement-indication">43</a></p>
<p>7.5 Procedures for Broadcast of Assistance Data <a
href="#procedures-for-broadcast-of-assistance-data">43</a></p>
<p>7.5.1 General <a href="#general-1">43</a></p>
<p>7.5.2 Broadcast Procedures <a href="#broadcast-procedures">44</a></p>
<p>7.6 Procedures for On-Demand PRS transmission <a
href="#procedures-for-on-demand-prs-transmission">45</a></p>
<p>7.6.1 General <a href="#general-2">45</a></p>
<p>7.6.2 On-Demand PRS transmission procedures <a
href="#on-demand-prs-transmission-procedures">45</a></p>
<p>7.7 Procedures for Pre-configured Measurement Gap <a
href="#procedures-for-pre-configured-measurement-gap">47</a></p>
<p>7.7.1 General <a href="#general-3">47</a></p>
<p>7.7.2 Pre-configured Measurement Gap procedures <a
href="#pre-configured-measurement-gap-procedures">47</a></p>
<p>7.8 Procedures for Pre-configured PRS processing window <a
href="#procedures-for-pre-configured-prs-processing-window">49</a></p>
<p>7.8.1 General <a href="#general-4">49</a></p>
<p>7.8.2 Pre-configured PRS processing window procedures <a
href="#pre-configured-prs-processing-window-procedures">49</a></p>
<p>7.9 Positioning in RRC_INACTIVE state <a
href="#positioning-in-rrc_inactive-state">50</a></p>
<p>8 Positioning methods and Supporting Procedures <a
href="#positioning-methods-and-supporting-procedures">50</a></p>
<p>8.1 GNSS positioning methods <a
href="#gnss-positioning-methods">50</a></p>
<p>8.1.1 General <a href="#general-5">50</a></p>
<p>8.1.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements">53</a></p>
<p>8.1.2.1 Information that may be transferred from the LMF to UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-ue">53</a></p>
<p>8.1.2.1.1 Reference Time <a href="#reference-time">54</a></p>
<p>8.1.2.1.2 Reference Location <a href="#reference-location">54</a></p>
<p>8.1.2.1.3 Ionospheric Models <a href="#ionospheric-models">54</a></p>
<p>8.1.2.1.4 Earth Orientation Parameters <a
href="#earth-orientation-parameters">54</a></p>
<p>8.1.2.1.5 GNSS-GNSS Time Offsets <a
href="#gnss-gnss-time-offsets">54</a></p>
<p>8.1.2.1.6 Differential GNSS Corrections <a
href="#differential-gnss-corrections">54</a></p>
<p>8.1.2.1.7 Ephemeris and Clock Models <a
href="#ephemeris-and-clock-models">54</a></p>
<p>8.1.2.1.8 Real-Time Integrity <a
href="#real-time-integrity">54</a></p>
<p>8.1.2.1.9 Data Bit Assistance <a
href="#data-bit-assistance">55</a></p>
<p>8.1.2.1.10 Acquisition Assistance <a
href="#acquisition-assistance">55</a></p>
<p>8.1.2.1.11 Almanac <a href="#almanac">55</a></p>
<p>8.1.2.1.12 UTC Models <a href="#utc-models">55</a></p>
<p>8.1.2.1.13 RTK Reference Station Information <a
href="#rtk-reference-station-information">55</a></p>
<p>8.1.2.1.14 RTK Auxiliary Station Data <a
href="#rtk-auxiliary-station-data">55</a></p>
<p>8.1.2.1.15 RTK Observations <a href="#rtk-observations">55</a></p>
<p>8.1.2.1.16 RTK Common Observation Information <a
href="#rtk-common-observation-information">56</a></p>
<p>8.1.2.1.17 GLONASS RTK Bias Information <a
href="#glonass-rtk-bias-information">56</a></p>
<p>8.1.2.1.18 RTK MAC Correction Differences <a
href="#rtk-mac-correction-differences">56</a></p>
<p>8.1.2.1.19 RTK Residuals <a href="#rtk-residuals">56</a></p>
<p>8.1.2.1.20 RTK FKP Gradients <a href="#rtk-fkp-gradients">56</a></p>
<p>8.1.2.1.21 SSR Orbit Corrections <a
href="#ssr-orbit-corrections">56</a></p>
<p>8.1.2.1.22 SSR Clock Corrections <a
href="#ssr-clock-corrections">57</a></p>
<p>8.1.2.1.23 SSR Code Bias <a href="#ssr-code-bias">57</a></p>
<p>8.1.2.1.24 SSR Phase Bias <a href="#ssr-phase-bias">57</a></p>
<p>8.1.2.1.25 SSR STEC Corrections <a
href="#ssr-stec-corrections">57</a></p>
<p>8.1.2.1.26 SSR Gridded Correction <a
href="#ssr-gridded-correction">58</a></p>
<p>8.1.2.1.27 SSR URA <a href="#ssr-ura">58</a></p>
<p>8.1.2.1.28 SSR Correction Points <a
href="#ssr-correction-points">58</a></p>
<p>8.1.2.1.29 Integrity Service Parameters <a
href="#integrity-service-parameters">58</a></p>
<p>8.1.2.1.30 Integrity Alerts <a href="#integrity-alerts">58</a></p>
<p>8.1.2.1a Recommendations for grouping of assistance data to support
different RTK service levels <a
href="#a-recommendations-for-grouping-of-assistance-data-to-support-different-rtk-service-levels">58</a></p>
<p>8.1.2.1b Mapping of integrity parameters <a
href="#b-mapping-of-integrity-parameters">60</a></p>
<p>8.1.2.2 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf">61</a></p>
<p>8.1.2.2.1 GNSS Measurement Information <a
href="#gnss-measurement-information">62</a></p>
<p>8.1.2.2.1.1 UE-based mode <a href="#ue-based-mode">62</a></p>
<p>8.1.2.2.1.2 UE-assisted mode <a href="#ue-assisted-mode">62</a></p>
<p>8.1.2.2.2 Additional Non-GNSS Related Information <a
href="#additional-non-gnss-related-information">62</a></p>
<p>8.1.3 Assisted-GNSS Positioning Procedures <a
href="#assisted-gnss-positioning-procedures">63</a></p>
<p>8.1.3.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure">63</a></p>
<p>8.1.3.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure">63</a></p>
<p>8.1.3.2.1 LMF initiated Assistance Data Delivery <a
href="#lmf-initiated-assistance-data-delivery">63</a></p>
<p>8.1.3.2.1a LMF initiated Periodic Assistance Data Delivery <a
href="#a-lmf-initiated-periodic-assistance-data-delivery">63</a></p>
<p>8.1.3.2.2 UE initiated Assistance Data Transfer <a
href="#ue-initiated-assistance-data-transfer">64</a></p>
<p>8.1.3.2.2a UE initiated Periodic Assistance Data Transfer <a
href="#a-ue-initiated-periodic-assistance-data-transfer">65</a></p>
<p>8.1.3.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure">66</a></p>
<p>8.1.3.3.1 LMF initiated Location Information Transfer Procedure <a
href="#lmf-initiated-location-information-transfer-procedure">66</a></p>
<p>8.1.3.3.2 UE-initiated Location Information Delivery Procedure <a
href="#ue-initiated-location-information-delivery-procedure">66</a></p>
<p>8.2 OTDOA positioning <a href="#otdoa-positioning-1">67</a></p>
<p>8.2.1 General <a href="#general-6">67</a></p>
<p>8.2.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-1">67</a></p>
<p>8.2.2.1 Information that may be transferred from the LMF to UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-ue-1">67</a></p>
<p>8.2.2.2 Information that may be transferred from the ng-eNB to LMF <a
href="#information-that-may-be-transferred-from-the-ng-enb-to-lmf">67</a></p>
<p>8.2.2.3 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf-1">68</a></p>
<p>8.2.2.4 Information that may be transferred from the gNB to LMF <a
href="#information-that-may-be-transferred-from-the-gnb-to-lmf">68</a></p>
<p>8.2.3 OTDOA Positioning Procedures <a
href="#otdoa-positioning-procedures">68</a></p>
<p>8.2.3.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-1">68</a></p>
<p>8.2.3.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-1">68</a></p>
<p>8.2.3.2.1 Assistance Data Transfer between LMF and UE <a
href="#assistance-data-transfer-between-lmf-and-ue">68</a></p>
<p>8.2.3.2.1.1 LMF initiated Assistance Data Delivery <a
href="#lmf-initiated-assistance-data-delivery-1">68</a></p>
<p>8.2.3.2.1.2 UE initiated Assistance Data Transfer <a
href="#ue-initiated-assistance-data-transfer-1">69</a></p>
<p>8.2.3.2.2 Assistance Data Delivery between LMF and NG-RAN node <a
href="#assistance-data-delivery-between-lmf-and-ng-ran-node">69</a></p>
<p>8.2.3.2.2.1 LMF-initiated assistance data delivery to the LMF <a
href="#lmf-initiated-assistance-data-delivery-to-the-lmf">70</a></p>
<p>8.2.3.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure-1">70</a></p>
<p>8.2.3.3.1 LMF-initiated Location Information Transfer Procedure <a
href="#lmf-initiated-location-information-transfer-procedure-1">70</a></p>
<p>8.2.3.3.2 UE-initiated Location Information Delivery procedure <a
href="#ue-initiated-location-information-delivery-procedure-1">71</a></p>
<p>8.3 Enhanced cell ID positioning methods <a
href="#enhanced-cell-id-positioning-methods">71</a></p>
<p>8.3.1 General <a href="#general-7">71</a></p>
<p>8.3.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-2">72</a></p>
<p>8.3.2.1 Information that may be transferred from the LMF to UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-ue-2">72</a></p>
<p>8.3.2.2 Information that may be transferred from the ng-eNB to LMF <a
href="#information-that-may-be-transferred-from-the-ng-enb-to-lmf-1">72</a></p>
<p>8.3.2.3 Information that may be transferred from the gNB to LMF <a
href="#information-that-may-be-transferred-from-the-gnb-to-lmf-1">73</a></p>
<p>8.3.2.4 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf-2">73</a></p>
<p>8.3.3 Downlink E-CID Positioning Procedures <a
href="#downlink-e-cid-positioning-procedures">73</a></p>
<p>8.3.3.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-2">73</a></p>
<p>8.3.3.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-2">73</a></p>
<p>8.3.3.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure-2">73</a></p>
<p>8.3.3.3.1 LMF-initiated Location Information Transfer <a
href="#lmf-initiated-location-information-transfer">73</a></p>
<p>8.3.3.3.2 UE-initiated Location Information Delivery procedure <a
href="#ue-initiated-location-information-delivery-procedure-2">74</a></p>
<p>8.3.4 Uplink E-CID Positioning Procedures <a
href="#uplink-e-cid-positioning-procedures">74</a></p>
<p>8.3.4.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-3">74</a></p>
<p>8.3.4.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-3">75</a></p>
<p>8.3.4.3 Position Measurement Procedure <a
href="#position-measurement-procedure">75</a></p>
<p>8.3.4.3.1 LMF-initiated Position Measurement <a
href="#lmf-initiated-position-measurement">75</a></p>
<p>8.4 Barometric pressure sensor positioning <a
href="#barometric-pressure-sensor-positioning-1">75</a></p>
<p>8.4.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-3">76</a></p>
<p>8.4.2.1 Information that may be transferred from the LMF to UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-ue-3">76</a></p>
<p>8.4.2.1.1 Barometric pressure sensor assistance data <a
href="#barometric-pressure-sensor-assistance-data">76</a></p>
<p>8.4.2.2 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf-3">76</a></p>
<p>8.4.2.2.1 Standalone mode <a href="#standalone-mode">76</a></p>
<p>8.4.2.2.2 UE-assisted mode <a href="#ue-assisted-mode-1">77</a></p>
<p>8.4.2.2.3 UE-based mode <a href="#ue-based-mode-1">77</a></p>
<p>8.4.3 Barometric Pressure Sensor Positioning Procedures <a
href="#barometric-pressure-sensor-positioning-procedures">77</a></p>
<p>8.4.3.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-4">77</a></p>
<p>8.4.3.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-4">77</a></p>
<p>8.4.3.2.1 LMF initiated Assistance Data Delivery <a
href="#lmf-initiated-assistance-data-delivery-2">77</a></p>
<p>8.4.3.2.2 UE initiated Assistance Data Transfer <a
href="#ue-initiated-assistance-data-transfer-2">77</a></p>
<p>8.4.3.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure-3">78</a></p>
<p>8.4.3.3.1 LMF initiated Location Information Transfer Procedure <a
href="#lmf-initiated-location-information-transfer-procedure-2">78</a></p>
<p>8.4.3.3.2 UE-initiated Location Information Delivery Procedure <a
href="#ue-initiated-location-information-delivery-procedure-3">79</a></p>
<p>8.5 WLAN positioning <a href="#wlan-positioning-1">79</a></p>
<p>8.5.1 General <a href="#general-8">79</a></p>
<p>8.5.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-4">79</a></p>
<p>8.5.2.1 Information that may be transferred from the LMF to UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-ue-4">80</a></p>
<p>8.5.2.1.1 WLAN AP BSSID <a href="#wlan-ap-bssid">80</a></p>
<p>8.5.2.1.2 WLAN AP SSID <a href="#wlan-ap-ssid">80</a></p>
<p>8.5.2.1.3 WLAN AP Type Data <a href="#wlan-ap-type-data">80</a></p>
<p>8.5.2.1.4 WLAN AP Location <a href="#wlan-ap-location">80</a></p>
<p>8.5.2.2 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf-4">80</a></p>
<p>8.5.2.2.1 Standalone mode <a href="#standalone-mode-1">81</a></p>
<p>8.5.2.2.2 UE-assisted mode <a href="#ue-assisted-mode-2">81</a></p>
<p>8.5.2.2.3 UE-based mode <a href="#ue-based-mode-2">81</a></p>
<p>8.5.3 WLAN Positioning Procedures <a
href="#wlan-positioning-procedures">81</a></p>
<p>8.5.3.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-5">81</a></p>
<p>8.5.3.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-5">81</a></p>
<p>8.5.3.2.1 LMF initiated Assistance Data Delivery <a
href="#lmf-initiated-assistance-data-delivery-3">81</a></p>
<p>8.5.3.2.2 UE initiated Assistance Data Transfer <a
href="#ue-initiated-assistance-data-transfer-3">81</a></p>
<p>8.5.3.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure-4">82</a></p>
<p>8.5.3.3.1 LMF initiated Location Information Transfer Procedure <a
href="#lmf-initiated-location-information-transfer-procedure-3">82</a></p>
<p>8.5.3.3.2 UE-initiated Location Information Delivery Procedure <a
href="#ue-initiated-location-information-delivery-procedure-4">83</a></p>
<p>8.6 Bluetooth positioning <a
href="#bluetooth-positioning-1">83</a></p>
<p>8.6.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-5">83</a></p>
<p>8.6.2.1 Information that may be transferred from the LMF to UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-ue-5">83</a></p>
<p>8.6.2.2 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf-5">83</a></p>
<p>8.6.2.2.1 Standalone mode <a href="#standalone-mode-2">84</a></p>
<p>8.6.2.2.2 UE-assisted mode <a href="#ue-assisted-mode-3">84</a></p>
<p>8.6.3 Bluetooth Positioning Procedures <a
href="#bluetooth-positioning-procedures">84</a></p>
<p>8.6.3.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-6">84</a></p>
<p>8.6.3.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-6">84</a></p>
<p>8.6.3.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure-5">84</a></p>
<p>8.6.3.3.1 LMF initiated Location Information Transfer Procedure <a
href="#lmf-initiated-location-information-transfer-procedure-4">84</a></p>
<p>8.6.3.3.2 UE-initiated Location Information Delivery Procedure <a
href="#ue-initiated-location-information-delivery-procedure-5">85</a></p>
<p>8.7 TBS positioning <a href="#tbs-positioning-1">85</a></p>
<p>8.7.1 General <a href="#general-9">85</a></p>
<p>8.7.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-6">86</a></p>
<p>8.7.2.1 Information that may be transferred from the LMF to UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-ue-6">86</a></p>
<p>8.7.2.1.1 Acquisition Assistance <a
href="#acquisition-assistance-1">86</a></p>
<p>8.7.2.1.2 Almanac <a href="#almanac-1">86</a></p>
<p>8.7.2.2 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf-6">86</a></p>
<p>8.7.2.2.1 Standalone mode <a href="#standalone-mode-3">86</a></p>
<p>8.7.2.2.2 UE-assisted mode <a href="#ue-assisted-mode-4">87</a></p>
<p>8.7.2.2.3 UE-based mode <a href="#ue-based-mode-3">87</a></p>
<p>8.7.3 TBS Positioning Procedures <a
href="#tbs-positioning-procedures">87</a></p>
<p>8.7.3.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-7">87</a></p>
<p>8.7.3.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-7">87</a></p>
<p>8.7.3.2.1 LMF initiated Assistance Data Delivery <a
href="#lmf-initiated-assistance-data-delivery-4">87</a></p>
<p>8.7.3.2.2 UE initiated Assistance Data Transfer <a
href="#ue-initiated-assistance-data-transfer-4">87</a></p>
<p>8.7.3.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure-6">88</a></p>
<p>8.7.3.3.1 LMF initiated Location Information Transfer Procedure <a
href="#lmf-initiated-location-information-transfer-procedure-5">88</a></p>
<p>8.7.3.3.2 UE-initiated Location Information Delivery Procedure <a
href="#ue-initiated-location-information-delivery-procedure-6">89</a></p>
<p>8.8 Motion sensor positioning method <a
href="#motion-sensor-positioning-method">89</a></p>
<p>8.8.1 General <a href="#general-10">89</a></p>
<p>8.8.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-7">89</a></p>
<p>8.8.2.1 General <a href="#general-11">89</a></p>
<p>8.8.2.2 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf-7">89</a></p>
<p>8.8.2.2.1 UE-assisted, UE-based, Standalone mode <a
href="#ue-assisted-ue-based-standalone-mode">89</a></p>
<p>8.8.2.2.2 UE Displacement and Movement Information <a
href="#ue-displacement-and-movement-information">90</a></p>
<p>8.8.2.3 Information that may be transferred from the LMF to the UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-the-ue">90</a></p>
<p>8.8.3 Motion Sensors Location Information Transfer Procedure <a
href="#motion-sensors-location-information-transfer-procedure">90</a></p>
<p>8.8.3.1 General <a href="#general-12">90</a></p>
<p>8.8.3.2 LMF initiated Location Information Transfer Procedure <a
href="#lmf-initiated-location-information-transfer-procedure-6">90</a></p>
<p>8.8.3.3 UE-initiated Location Information Delivery Procedure <a
href="#ue-initiated-location-information-delivery-procedure-7">90</a></p>
<p>8.9 NR Enhanced cell ID positioning methods <a
href="#nr-enhanced-cell-id-positioning-methods">91</a></p>
<p>8.9.1 General <a href="#general-13">91</a></p>
<p>8.9.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-8">91</a></p>
<p>8.9.2.1 Information that may be transferred from the LMF to UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-ue-7">91</a></p>
<p>8.9.2.2 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf-8">91</a></p>
<p>8.9.2.3 Information that may be transferred from the gNB to LMF <a
href="#information-that-may-be-transferred-from-the-gnb-to-lmf-2">92</a></p>
<p>8.9.3 Downlink NR E-CID Positioning Procedures <a
href="#downlink-nr-e-cid-positioning-procedures">92</a></p>
<p>8.9.3.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-8">92</a></p>
<p>8.9.3.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-8">92</a></p>
<p>8.9.3.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure-7">92</a></p>
<p>8.9.3.3.1 LMF-initiated Location Information Transfer from UE <a
href="#lmf-initiated-location-information-transfer-from-ue">92</a></p>
<p>8.9.3.3.2 UE-initiated Location Information Delivery procedure <a
href="#ue-initiated-location-information-delivery-procedure-8">93</a></p>
<p>8.9.4 Uplink NR E-CID Positioning Procedures <a
href="#uplink-nr-e-cid-positioning-procedures">93</a></p>
<p>8.9.4.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-9">93</a></p>
<p>8.9.4.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-9">93</a></p>
<p>8.9.4.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure-8">94</a></p>
<p>8.10 Multi-RTT positioning <a
href="#multi-rtt-positioning-1">95</a></p>
<p>8.10.1 General <a href="#general-14">95</a></p>
<p>8.10.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-9">95</a></p>
<p>8.10.2.1 Information that may be transferred from the LMF to UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-ue-8">95</a></p>
<p>8.10.2.2 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf-9">95</a></p>
<p>8.10.2.3 Information that may be transferred from the gNB to LMF <a
href="#information-that-may-be-transferred-from-the-gnb-to-lmf-3">95</a></p>
<p>8.10.2.4 Information that may be transferred from the LMF to gNBs <a
href="#information-that-may-be-transferred-from-the-lmf-to-gnbs">96</a></p>
<p>8.10.3 Multi-RTT Positioning Procedures <a
href="#multi-rtt-positioning-procedures">98</a></p>
<p>8.10.3.1 Procedures between LMF and UE <a
href="#procedures-between-lmf-and-ue">98</a></p>
<p>8.10.3.1.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-10">98</a></p>
<p>8.10.3.1.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-10">98</a></p>
<p>8.10.3.1.2.1 Assistance Data Transfer between LMF and UE <a
href="#assistance-data-transfer-between-lmf-and-ue-1">98</a></p>
<p>8.10.3.1.2.1.1 LMF initiated Assistance Data Delivery <a
href="#lmf-initiated-assistance-data-delivery-5">98</a></p>
<p>8.10.3.1.2.1.2 UE initiated Assistance Data Transfer <a
href="#ue-initiated-assistance-data-transfer-5">98</a></p>
<p>8.10.3.1.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure-9">99</a></p>
<p>8.10.3.1.3.1 LMF-initiated Location Information Transfer Procedure <a
href="#lmf-initiated-location-information-transfer-procedure-7">99</a></p>
<p>8.10.3.1.3.2 UE-initiated Location Information Delivery procedure <a
href="#ue-initiated-location-information-delivery-procedure-9">100</a></p>
<p>8.10.3.2 Procedures between LMF and gNB <a
href="#procedures-between-lmf-and-gnb">100</a></p>
<p>8.10.3.2.1 Assistance Data Delivery between LMF and gNB <a
href="#assistance-data-delivery-between-lmf-and-gnb">100</a></p>
<p>8.10.3.2.2 Location Information Transfer/Assistance Data Transfer
Procedure <a
href="#location-information-transferassistance-data-transfer-procedure">101</a></p>
<p>8.10.3.2.3 Positioning Activation/Deactivation Procedure <a
href="#positioning-activationdeactivation-procedure">102</a></p>
<p>8.10.4 Sequence of Procedure for Multi-RTT positioning <a
href="#sequence-of-procedure-for-multi-rtt-positioning">103</a></p>
<p>8.11 DL-AoD positioning <a href="#dl-aod-positioning-1">105</a></p>
<p>8.11.1 General <a href="#general-15">105</a></p>
<p>8.11.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-10">105</a></p>
<p>8.11.2.1 Information that may be transferred from the LMF to UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-ue-9">105</a></p>
<p>8.11.2.2 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf-10">106</a></p>
<p>8.11.2.3 Information that may be transferred from the gNB to LMF <a
href="#information-that-may-be-transferred-from-the-gnb-to-lmf-4">106</a></p>
<p>8.11.3 DL-AoD Positioning Procedures <a
href="#dl-aod-positioning-procedures">107</a></p>
<p>8.11.3.1 Procedures between LMF and UE <a
href="#procedures-between-lmf-and-ue-1">107</a></p>
<p>8.11.3.1.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-11">107</a></p>
<p>8.11.3.1.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-11">107</a></p>
<p>8.11.3.1.2.1 LMF initiated Assistance Data Delivery <a
href="#lmf-initiated-assistance-data-delivery-6">107</a></p>
<p>8.11.3.1.2.2 UE initiated Assistance Data Transfer <a
href="#ue-initiated-assistance-data-transfer-6">107</a></p>
<p>8.11.3.1.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure-10">108</a></p>
<p>8.11.3.1.3.1 LMF-initiated Location Information Transfer Procedure <a
href="#lmf-initiated-location-information-transfer-procedure-8">108</a></p>
<p>8.11.3.1.3.2 UE-initiated Location Information Delivery procedure <a
href="#ue-initiated-location-information-delivery-procedure-10">109</a></p>
<p>8.11.3.2 Procedures between LMF and gNB <a
href="#procedures-between-lmf-and-gnb-1">109</a></p>
<p>8.11.3.2.1 Assistance Data Delivery procedure <a
href="#assistance-data-delivery-procedure">109</a></p>
<p>8.11.3.2.1.1 LMF-initiated assistance data delivery to the LMF <a
href="#lmf-initiated-assistance-data-delivery-to-the-lmf-1">109</a></p>
<p>8.12 DL-TDOA positioning <a href="#dl-tdoa-positioning-1">110</a></p>
<p>8.12.1 General <a href="#general-16">110</a></p>
<p>8.12.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-11">110</a></p>
<p>8.12.2.1 Information that may be transferred from the LMF to UE <a
href="#information-that-may-be-transferred-from-the-lmf-to-ue-10">110</a></p>
<p>8.12.2.2 Information that may be transferred from the UE to LMF <a
href="#information-that-may-be-transferred-from-the-ue-to-lmf-11">110</a></p>
<p>8.12.2.3 Information that may be transferred from the gNB to LMF <a
href="#information-that-may-be-transferred-from-the-gnb-to-lmf-5">111</a></p>
<p>8.12.3 DL-TDOA Positioning Procedures <a
href="#dl-tdoa-positioning-procedures">111</a></p>
<p>8.12.3.1 Procedures between LMF and UE <a
href="#procedures-between-lmf-and-ue-2">111</a></p>
<p>8.12.3.1.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-12">111</a></p>
<p>8.12.3.1.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-12">111</a></p>
<p>8.12.3.1.2.1 LMF initiated Assistance Data Delivery <a
href="#lmf-initiated-assistance-data-delivery-7">112</a></p>
<p>8.12.3.1.2.2 UE initiated Assistance Data Transfer <a
href="#ue-initiated-assistance-data-transfer-7">112</a></p>
<p>8.12.3.1.3 Location Information Transfer Procedure <a
href="#location-information-transfer-procedure-11">112</a></p>
<p>8.12.3.1.3.1 LMF-initiated Location Information Transfer Procedure <a
href="#lmf-initiated-location-information-transfer-procedure-9">113</a></p>
<p>8.12.3.1.3.2 UE-initiated Location Information Delivery procedure <a
href="#ue-initiated-location-information-delivery-procedure-11">113</a></p>
<p>8.12.3.2 Procedures between LMF and gNB <a
href="#procedures-between-lmf-and-gnb-2">113</a></p>
<p>8.12.3.2.1 Assistance Data Delivery procedure <a
href="#assistance-data-delivery-procedure-1">113</a></p>
<p>8.12.3.2.1.1 LMF-initiated assistance data delivery to the LMF <a
href="#lmf-initiated-assistance-data-delivery-to-the-lmf-2">114</a></p>
<p>8.13 UL-TDOA positioning <a href="#ul-tdoa-positioning-1">114</a></p>
<p>8.13.1 General <a href="#general-17">114</a></p>
<p>8.13.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-12">114</a></p>
<p>8.13.2.0 Assistance Data that may be transferred from the gNB to the
LMF <a
href="#assistance-data-that-may-be-transferred-from-the-gnb-to-the-lmf">114</a></p>
<p>8.13.2.1 Configuration Data that may be transferred from the gNB to
the LMF <a
href="#configuration-data-that-may-be-transferred-from-the-gnb-to-the-lmf">115</a></p>
<p>8.13.2.2 Location Information that may be transferred from the gNBs
to LMF <a
href="#location-information-that-may-be-transferred-from-the-gnbs-to-lmf">115</a></p>
<p>8.13.2.3 Information that may be transferred from the LMF to gNBs <a
href="#information-that-may-be-transferred-from-the-lmf-to-gnbs-1">115</a></p>
<p>8.13.3 UL-TDOA Positioning Procedures <a
href="#ul-tdoa-positioning-procedures">116</a></p>
<p>8.13.3.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-13">117</a></p>
<p>8.13.3.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-13">117</a></p>
<p>8.13.3.2.1 Assistance Data Delivery between LMF and gNB <a
href="#assistance-data-delivery-between-lmf-and-gnb-1">117</a></p>
<p>8.13.3.3 Location Information Transfer/Assistance Data Transfer
Procedure <a
href="#location-information-transferassistance-data-transfer-procedure-1">118</a></p>
<p>8.13.3.3a Positioning Activation/Deactivation Procedure <a
href="#a-positioning-activationdeactivation-procedure">119</a></p>
<p>8.13.3.4 Sequence of Procedure for UL-TDOA positioning <a
href="#sequence-of-procedure-for-ul-tdoa-positioning">120</a></p>
<p>8.14 UL-AoA positioning <a href="#ul-aoa-positioning">121</a></p>
<p>8.14.1 General <a href="#general-18">121</a></p>
<p>8.14.2 Information to be transferred between NG-RAN/5GC Elements <a
href="#information-to-be-transferred-between-ng-ran5gc-elements-13">121</a></p>
<p>8.14.2.0 Assistance Data that may be transferred from the gNB to the
LMF <a
href="#assistance-data-that-may-be-transferred-from-the-gnb-to-the-lmf-1">121</a></p>
<p>8.14.2.1 Configuration Data that may be transferred from the gNB to
the LMF <a
href="#configuration-data-that-may-be-transferred-from-the-gnb-to-the-lmf-1">122</a></p>
<p>8.14.2.2 Location Information that may be transferred from the gNBs
to LMF <a
href="#location-information-that-may-be-transferred-from-the-gnbs-to-lmf-1">122</a></p>
<p>8.14.2.3 Information that may be transferred from the LMF to gNB <a
href="#information-that-may-be-transferred-from-the-lmf-to-gnb">122</a></p>
<p>8.14.3 UL-AoA Positioning Procedures <a
href="#ul-aoa-positioning-procedures">123</a></p>
<p>8.14.3.1 Capability Transfer Procedure <a
href="#capability-transfer-procedure-14">123</a></p>
<p>8.14.3.2 Assistance Data Transfer Procedure <a
href="#assistance-data-transfer-procedure-14">123</a></p>
<p>8.14.3.2.1 Assistance Data Delivery between LMF and gNB <a
href="#assistance-data-delivery-between-lmf-and-gnb-2">123</a></p>
<p>8.14.3.3 Location Information Transfer/Assistance Data Transfer
Procedure <a
href="#location-information-transferassistance-data-transfer-procedure-2">125</a></p>
<p>8.14.3.3a Positioning Activation/Deactivation Procedure <a
href="#a-positioning-activationdeactivation-procedure-1">126</a></p>
<p>8.14.3.4 Sequence of Procedure for UL-AoA positioning <a
href="#sequence-of-procedure-for-ul-aoa-positioning">126</a></p>
<p>Annex A (informative): Use of LPP with SUPL <a
href="#annex-a-informative-use-of-lpp-with-supl">129</a></p>
<p>A.1 SUPL 2.0 Positioning Methods and Positioning Protocols <a
href="#a.1-supl-2.0-positioning-methods-and-positioning-protocols">129</a></p>
<p>A.2 SUPL 2.0 and NR Architecture <a
href="#a.2-supl-2.0-and-nr-architecture">131</a></p>
<p>A.3 LPP session procedures using SUPL <a
href="#a.3-lpp-session-procedures-using-supl">131</a></p>
<p>A.4 Procedures combining C-plane and U-plane operations <a
href="#a.4-procedures-combining-c-plane-and-u-plane-operations">132</a></p>
<p>Annex B (informative): Change history <a
href="#annex-b-informative-change-history">134</a></p>
<h1 id="foreword"><br />
Foreword</h1>
<p>This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).</p>
<p>The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:</p>
<p>Version x.y.z</p>
<p>where:</p>
<p>x the first digit:</p>
<p>1 presented to TSG for information;</p>
<p>2 presented to TSG for approval;</p>
<p>3 or greater indicates TSG approved document under change
control.</p>
<p>y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.</p>
<p>z the third digit is incremented when editorial only changes have
been incorporated in the document.</p>
<h1 id="scope"><br />
1 Scope</h1>
<p>The present document specifies the stage 2 of the UE Positioning
function of NG-RAN which provides the mechanisms to support or assist
the calculation of the geographical position of a UE. UE position
knowledge can be used, for example, in support of Radio Resource
Management functions, as well as location-based services for operators,
subscribers, and third-party service providers. The purpose of this
stage 2 specification is to define the NG-RAN UE Positioning
architecture, functional entities and operations to support positioning
methods. This description is confined to the NG-RAN Access Stratum. It
does not define or describe how the results of the UE position
calculation can be utilised in the Core Network (e.g., LCS) or in NG-RAN
(e.g., RRM).</p>
<p>UE Positioning may be considered as a network-provided enabling
technology consisting of standardised service capabilities that enable
the provision of location applications. The application(s) may be
service provider specific. The description of the numerous and varied
possible location applications which are enabled by this technology is
outside the scope of the present document. However, clarifying examples
of how the functionality being described may be used to provide specific
location services may be included.</p>
<p>This stage 2 specification covers the NG-RAN positioning methods,
state descriptions, and message flows to support UE Positioning.</p>
<h1 id="references">2 References</h1>
<p>The following documents contain provisions which, through reference
in this text, constitute provisions of the present document.</p>
<p>- References are either specific (identified by date of publication,
edition number, version number, etc.) or nonspecific.</p>
<p>- For a specific reference, subsequent revisions do not apply.</p>
<p>- For a non-specific reference, the latest version applies. In the
case of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document <em>in the same Release as the present document</em>.</p>
<p>[1] 3GPPTR 21.905: "Vocabulary for 3GPP Specifications".</p>
<p>[2] 3GPP TS 23.501 "System Architecture for the 5G System; Stage
2".</p>
<p>[3] 3GPP TS 22.071: "Location Services (LCS); Service description,
Stage 1".</p>
<p>[4] 3GPP TS 23.032: "Universal Geographical Area Description
(GAD)".</p>
<p>[5] IS-GPS-200, Revision D, Navstar GPS Space Segment/Navigation User
Interfaces, March 7<sup>th</sup>, 2006.</p>
<p>[6] IS-GPS-705, Navstar GPS Space Segment/User Segment L5 Interfaces,
September 22, 2005.</p>
<p>[7] IS-GPS-800, Navstar GPS Space Segment/User Segment L1C
Interfaces, September 4, 2008.</p>
<p>[8] Galileo OS Signal in Space ICD (OS SIS ICD), Draft 0, Galileo
Joint Undertaking, May 23<sup>rd</sup>, 2006.</p>
<p>[9] Global Navigation Satellite System GLONASS Interface Control
Document, Version 5, 2002.</p>
<p>[10] IS-QZSS, Quasi Zenith Satellite System Navigation Service
Interface Specifications for QZSS, Ver.1.0, June 17, 2008.</p>
<p>[11] Specification for the Wide Area Augmentation System (WAAS), US
Department of Transportation, Federal Aviation Administration,
DTFA01-96-C-00025, 2001.</p>
<p>[12] RTCM 10402.3, RTCM Recommended Standards for Differential GNSS
Service (v.2.3), August 20, 2001.</p>
<p>[13] 3GPP TS 36.331: "Evolved Universal Terrestrial Radio Access
(E-UTRA); Radio Resource Control (RRC); Protocol specification".</p>
<p>[14] 3GPP TS 38.331: "NR Radio Resource Control (RRC) protocol
specification".</p>
<p>[15] OMA-AD-SUPL-V2_0: "Secure User Plane Location Architecture
Approved Version 2.0".</p>
<p>[16] OMA-TS-ULP-V2_0_6: "UserPlane Location Protocol Approved Version
2.0.6".</p>
<p>[17] 3GPP TS 36.214: "Evolved Universal Terrestrial Radio Access
(E-UTRA); Physical layer  Measurements".</p>
<p>[18] 3GPP TS 36.302: "Evolved Universal Terrestrial Radio Access
(E-UTRA); Services provided by the physical layer".</p>
<p>[19] 3GPP TS 36.355: "Evolved Universal Terrestrial Radio Access
(E-UTRA); LTE Positioning Protocol (LPP)".</p>
<p>[20] BDS-SIS-ICD-B1I-3.0: "BeiDou Navigation Satellite System Signal
In Space Interface Control Document Open Service Signal B1I (Version
3.0)", February, 2019.</p>
<p>[21] IEEE 802.11: "Wireless LAN Medium Access Control (MAC) and
Physical Layer (PHY) Specifications"</p>
<p>[22] Bluetooth Special Interest Group: "Bluetooth Core Specification
v4.2", December 2014.</p>
<p>[23] ATIS-0500027: "Recommendations for Establishing Wide Scale
Indoor Location Performance", May 2015.</p>
<p>[24] 3GPP TS 36.211: "Evolved Universal Terrestrial Radio Access
(E-UTRA); Physical channels and modulation".</p>
<p>[25] 3GPP TS 36.305: "Stage 2 functional specification of User
Equipment (UE) positioning in EUTRA".</p>
<p>[26] 3GPP TS 23.502: "Procedures for the 5G System; Stage 2".</p>
<p>[27] 3GPP TS 38.455: "NG-RAN; NR Positioning Protocol A (NRPPa)".</p>
<p>[28] 3GPP TS 29.518: "5G System; Access and Mobility Management
Services; Stage 3".</p>
<p>[29] 3GPP TS 24.501: "Non-Access-Stratum (NAS) protocol for 5G System
(5GS); Stage 3".</p>
<p>[30] 3GPP TS 38.413: "NG-RAN; NG Application Protocol (NGAP)".</p>
<p>[31] RTCM 10403.3, "RTCM Recommended Standards for Differential GNSS
Services (v.3.3)", October 7, 2016.</p>
<p>[32] 3GPP TS 38.133: "NR; Requirements for support of radio resource
management".</p>
<p>[33] 3GPP TS 29.572: "Location Management Services; Stage 3".</p>
<p>[34] BDS-SIS-ICD-B1C-1.0: "BeiDou Navigation Satellite System Signal
In Space Interface Control Document Open Service Signal B1C (Version
1.0)", December, 2017</p>
<p>[35] 3GPP TS 23.273: "5G System (5GS) Location Services (LCS); Stage
2".</p>
<p>[36] IS-QZSS-L6-001, Quasi-Zenith Satellite System Interface
Specification  Centimetre Level Augmentation Service, Cabinet Office,
November 5, 2018.</p>
<p>[37] 3GPP TS 38.215: "NR; Physical layer  Measurements".</p>
<p>[38] 3GPP TS 38.401: "3rd Generation Partnership Project; Technical
Specification Group Radio Access Network; NG-RAN; Architecture
description".</p>
<p>[39] 3GPP TS 38.321: "NR; Medium Access Control (MAC) protocol
specification".</p>
<p>[40] 3GPP TS 38.212: "NR; Multiplexing and channel coding".</p>
<p>[41] 3GPP TS 24.571: "Control plane Location Services (LCS)
procedures".</p>
<p>[42] 3GPP TS 37.355: "Technical Specification Group Radio Access
Network; LTE Positioning Protocol (LPP)".</p>
<p>[43] IRNSS Signal-In-Space (SPS) Interface Control Document (ICD) for
standard positioning service version 1.1, August 2017.</p>
<p>[44] BDS-SIS-ICD-B2a-1.0: "BeiDou Navigation Satellite System Signal
In Space Interface Control Document Open Service Signal B2a (Version
1.0)", December, 2017.</p>
<p>[45] BDS-SIS-ICD-B3I-1.0: "BeiDou Navigation Satellite System Signal
In Space Interface Control Document Open Service Signal B3I (Version
1.0)", February, 2018.</p>
<h1 id="definitions-symbols-and-abbreviations">3 Definitions, symbols
and abbreviations</h1>
<h2 id="definitions">3.1 Definitions</h2>
<p>For the purposes of the present document, the terms and definitions
given in TR 21.905 [1] and the following apply. A term defined in the
present document takes precedence over the definition of the same term,
if any, in TR 21.905 [1].</p>
<p>As used in this document, the suffixes "-based" and "-assisted" refer
respectively to the node that is responsible for making the positioning
calculation (and which may also provide measurements) and a node that
provides measurements (but which does not make the positioning
calculation). Thus, an operation in which measurements are provided by
the UE to the LMF to be used in the computation of a position estimate
is described as "UE-assisted" (and could also be called "LMF-based"),
while one in which the UE computes its own position is described as
"UE-based".</p>
<p><strong>Alert Limit (AL)</strong>: The maximum allowable positioning
error for the purpose of integrity. If the positioning error is beyond
this limit, the integrity results of the calculated location may not
meet the integrity requirement.</p>
<p><strong>Positioning integrity</strong>: A measure of the trust in the
accuracy of the position-related data and the ability to provide
associated alerts.</p>
<p><strong>Pre-configured assistance data</strong>: Refers to the DL-PRS
assistance data (with associated validity criteria) that can be provided
to the UE (before or during an ongoing LPP positioning session), to be
then utilized for potential positioning measurements at a future time
(e.g. for deferred MT-LR). Pre-configured DL-PRS assistance data may
consist of multiple instances, where each instance is applicable to a
different area within the network.</p>
<p><strong>Protection Level (PL):</strong> A statistical upper-bound of
the Positioning Error (PE) that ensures that, the probability per unit
of time of the true error being greater than the AL and the PL being
less than or equal to the AL, for longer than the TTA, is less than the
TIR, i.e., the PL satisfies the following inequality:<br />
<em>Prob per unit of time</em> [((<em>PE&gt;AL</em>) &amp;
(<em>PL&lt;=AL</em>)) <em>for longer than TTA</em>] <em>&lt;
TIR</em><br />
When the PL bounds the positioning error in the horizontal plane or on
the vertical axis then it is called Horizontal Protection Level (HPL) or
Vertical Protection Level (VPL) respectively.<br />
A specific equation for the PL is not specified as this is
implementation-defined. For the PL to be considered valid, it must
simply satisfy the inequality above.</p>
<p>NOTE 1: the PL inequality is valid for all values of the AL.</p>
<p>NOTE 2: the TIR may correspond to the achievable TIR in the case that
the requested TIR cannot be satisfied.</p>
<p><strong>PRS-only TP</strong>: A TP which only transmits PRS, DL-PRS
signals and is not associated with a cell.</p>
<p><strong>PRS Processing Window (PPW):</strong> The PRS Processing
Window is configured by the network to a UE for NR DL-PRS measurements
without measurement gap.</p>
<p><strong>Reception Point (RP)</strong>: A set of geographically
co-located receive antennas (e.g. antenna array (with one or more
antenna elements)) for one cell, part of one cell or one UL-SRS-only RP.
Reception Points can include base station (ng-eNB or gNB) antennas,
remote radio heads, a remote antenna of a base station, an antenna of a
UL-SRS-only RP, etc. One cell can include one or multiple reception
points. For a homogeneous deployment, each reception point may
correspond to one cell.</p>
<p><strong>Rx Time Delay:</strong> From a signal reception perspective,
there will be a time delay from the time when the RF signal arrives at
the Rx antenna to the time when the signal is digitized and time-stamped
at the baseband.</p>
<p><strong>Rx Timing Error:</strong> Result of Rx time delay involved in
the reception of a signal before reporting measurements that are
obtained from the signal. It is the uncalibrated Rx time delay, or the
remaining delay after the UE/TRP internal calibration/compensation of
the Rx time delay, involved in the reception of the DL-PRS/UL SRS
signals. The calibration/compensation may also include the
calibration/compensation of the relative time delay between different RF
chains in the same UE/TRP and may also possibly consider the offset of
the Rx antenna phase centre to the physical antenna centre.</p>
<p><strong>SRS-only RP</strong>: An RP which only receives UL-SRS
signals and is not associated with a cell.</p>
<p><strong>Transmission Point (TP)</strong>: A set of geographically
co-located transmit antennas (e.g. antenna array (with one or more
antenna elements)) for one cell, part of one cell or one DL-PRS-only TP.
Transmission Points can include base station (ng-eNB or gNB) antennas,
remote radio heads, a remote antenna of a base station, an antenna of a
DL-PRS-only TP, etc. One cell can include one or multiple transmission
points. For a homogeneous deployment, each transmission point may
correspond to one cell.</p>
<p><strong>Transmission-Reception Point (TRP)</strong>: A set of
geographically co-located antennas (e.g. antenna array (with one or more
antenna elements)) supporting TP and/or RP functionality.</p>
<p><strong>TRP Rx 'Timing Error Group' (TRP Rx TEG):</strong> Rx timing
errors, associated with TRP reporting of one or more UL measurements,
that are within a certain margin.</p>
<p><strong>TRP RxTx 'Timing Error Group' (TRP RxTx TEG):</strong> Rx
timing errors and Tx timing errors, associated with TRP reporting of one
or more gNB Rx-Tx time difference measurements, which have the 'Rx
timing errors+Tx timing errors' differences within a certain margin.</p>
<p><strong>TRP Tx 'Timing Error Troup' (TRP Tx TEG):</strong> Tx timing
errors, associated with TRP transmissions on one or more DL-PRS
resources, that are within a certain margin.</p>
<p><strong>Tx Time Delay:</strong> From a signal transmission
perspective, the time delay from the time when the digital signal is
generated at baseband to the time when the RF signal is transmitted from
the Tx antenna.</p>
<p><strong>Tx Timing Error:</strong> Result of Tx time delay involved in
the transmission of a signal. It is the uncalibrated Tx time delay, or
the remaining delay after the TRP/UE internal calibration/compensation
of the Tx time delay, involved in the transmission of the DL-PRS/UL SRS
signals. The calibration/compensation may also include the
calibration/compensation of the relative time delay between different RF
chains in the same TRP/UE and may also possibly consider the offset of
the Tx antenna phase centre to the physical antenna centre.</p>
<p><strong>UE Rx 'Timing Error Group' (UE Rx TEG):</strong> Rx timing
errors, associated with UE reporting of one or more DL measurements
(RSTD), that are within a certain margin.</p>
<p><strong>UE RxTx 'Timing Error Group' (UE RxTx TEG):</strong> Rx
timing errors and Tx timing errors, associated with UE reporting of one
or more UE Rx-Tx time difference measurements, which have the 'Rx timing
errors+Tx timing errors' differences within a certain margin.</p>
<p><strong>UE Tx 'Timing Error Group' (UE Tx TEG):</strong> Tx timing
errors, associated with UE transmissions on one or more UL SRS resources
for positioning purpose, that are within a certain margin.</p>
<h2 id="abbreviations">3.2 Abbreviations</h2>
<p>For the purposes of the present document, the abbreviations given in
TR 21.905 [1] and the following apply. An abbreviation defined in the
present document takes precedence over the definition of the same
abbreviation, if any, in TR 21.905[1].</p>
<p>5GC 5G Core Network</p>
<p>5GS 5G System</p>
<p>A-AoA Azimuth-Angle of Arrival</p>
<p>ADR Accumulated Delta Range</p>
<p>AL Alert Limit</p>
<p>AoA Angle of Arrival</p>
<p>AP Access Point</p>
<p>ARP Antenna Reference Point</p>
<p>BDS BeiDou Navigation Satellite System</p>
<p>BSSID Basic Service Set Identifier</p>
<p>CID Cell-ID (positioning method)</p>
<p>CLAS Centimetre Level Augmentation Service</p>
<p>DL-AoD Downlink Angle-of-Departure</p>
<p>DL-PRS Downlink Positioning Reference Signal</p>
<p>DL-TDOA Downlink Time Difference Of Arrival</p>
<p>DNU Do Not Use</p>
<p>E-SMLC Enhanced Serving Mobile Location Centre</p>
<p>E-CID Enhanced Cell-ID (positioning method)</p>
<p>ECEF Earth-Centered, Earth-Fixed</p>
<p>ECI Earth-Centered-Inertial</p>
<p>EGNOS European Geostationary Navigation Overlay Service</p>
<p>E-UTRAN Evolved Universal Terrestrial Radio Access Network</p>
<p>FDMA Frequency Division Multiple Access</p>
<p>FKP Flchenkorrekturparameter (Engl: Area Correction Parameters)</p>
<p>GAGAN GPS Aided Geo Augmented Navigation</p>
<p>GLONASS GLObal'naya NAvigatsionnaya Sputnikovaya Sistema (Engl.:
Global Navigation Satellite System)</p>
<p>GMLC Gateway Mobile Location Centre</p>
<p>GNSS Global Navigation Satellite System</p>
<p>GPS Global Positioning System</p>
<p>GRS80 Geodetic Reference System 1980</p>
<p>HESSID Homogeneous Extended Service Set Identifier</p>
<p>LCS LoCation Services</p>
<p>LMF Location Management Function</p>
<p>LPP LTE Positioning Protocol</p>
<p>MAC Master Auxiliary Concept</p>
<p>MBS Metropolitan Beacon System</p>
<p>MO-LR Mobile Originated Location Request</p>
<p>MT-LR Mobile Terminated Location Request</p>
<p>Multi-RTT Multi-Round Trip Time</p>
<p>NavIC NAVigation with Indian Constellation</p>
<p>NG-C NG Control plane</p>
<p>NG-AP NG Application Protocol</p>
<p>NI-LR Network Induced Location Request</p>
<p>N-RTK Network  Real-Time Kinematic</p>
<p>NRPPa NR Positioning Protocol A</p>
<p>OTDOA Observed Time Difference Of Arrival</p>
<p>PDU Protocol Data Unit</p>
<p>posSI Positioning System Information</p>
<p>posSIB Positioning SIB</p>
<p>PPP Precise Point Positioning</p>
<p>PPP-RTK Precise Point Positioning  Real-Time Kinematic</p>
<p>PRS Positioning Reference Signal (for E-UTRA)</p>
<p>PRU Positioning Reference Unit</p>
<p>QZSS Quasi-Zenith Satellite System</p>
<p>RP Reception Point</p>
<p>RRM Radio Resource Management</p>
<p>RSRP Reference Signal Received Power</p>
<p>RSRPP Reference Signal Received Path Power</p>
<p>RSRQ Reference Signal Received Quality</p>
<p>RSSI Received Signal Strength Indicator</p>
<p>RSTD Reference Signal Time Difference</p>
<p>RTK Real-Time Kinematic</p>
<p>SBAS Space Based Augmentation System</p>
<p>SDT Small Data Transmission</p>
<p>SET SUPL Enabled Terminal</p>
<p>SIB System Information Block</p>
<p>SLP SUPL Location Platform</p>
<p>SP Semi-Persistent</p>
<p>SRS Sounding Reference Signal</p>
<p>SSB Synchronization Signal Block</p>
<p>SSID Service Set Identifier</p>
<p>SSR State Space Representation</p>
<p>STEC Slant TEC</p>
<p>SUPL Secure User Plane Location</p>
<p>T<sub>ADV</sub> Timing Advance</p>
<p>TBS Terrestrial Beacon System</p>
<p>TEC Total Electron Content</p>
<p>TEG Timing Error Group</p>
<p>TP Transmission Point</p>
<p>TRP Transmission-Reception Point</p>
<p>TTA Time To Alert</p>
<p>TxTEG Tx Timing Error Group</p>
<p>UE User Equipment</p>
<p>UL-AoA Uplink Angle of Arrival</p>
<p>UL-RTOA Uplink Relative Time of Arrival</p>
<p>UL-SRS Uplink Sounding Reference Signal</p>
<p>UL-TDOA Uplink Time Difference of Arrival</p>
<p>URA User Range Accuracy</p>
<p>WAAS Wide Area Augmentation System</p>
<p>WGS-84 World Geodetic System 1984</p>
<p>WLAN Wireless Local Area Network</p>
<p>Z-AoA Zenith Angles of Arrival</p>
<h1 id="main-concepts-and-requirements">4 Main concepts and
requirements</h1>
<h2 id="assumptions-and-generalities">4.1 Assumptions and
Generalities</h2>
<p>The stage 1 description of LCS at the service level is provided in TS
22.071 [3]; the stage 2 LCS functional description, including the LCS
system architecture and message flows, is provided in TS 23.501 [2], TS
23.502 [26] and TS 23.273 [35].</p>
<p>Positioning functionality provides a means to determine the
geographic position and/or velocity of the UE based on measuring radio
signals. The position information may be requested by and reported to a
client (e.g., an application) associated with the UE, or by a client
within or attached to the core network. The position information shall
be reported in standard formats, such as those for cell-based or
geographical co-ordinates, together with the estimated errors
(uncertainty) of the position and velocity of the UE and, if available,
the positioning method (or the list of the methods) used to obtain the
position estimate.</p>
<p>Restrictions on the geographic shape encoded within the 'position
information' parameter may exist for certain LCS client types. The 5GS,
including NG-RAN, shall comply with any shape restrictions defined in
5GS and, in a particular country, with any shape restrictions defined
for a specific LCS client type in relevant national standards. For
example, in the US, national standard J-STD-036-C-2 restricts the
geographic shape for an emergency services LCS client to minimally
either an "ellipsoid point" or an "ellipsoid point with uncertainty
circle" as defined in TS 23.032 [4].</p>
<p>It shall be possible for the majority of the UEs within a network to
use the LCS feature without compromising the radio transmission or
signalling capabilities of the NG-RAN.</p>
<p>The uncertainty of the position measurement shall be
network-implementation-dependent, at the choice of the network operator.
The uncertainty may vary between networks as well as from one area
within a network to another. The uncertainty may be hundreds of metres
in some areas and only a few metres in others. In the event that a
particular position measurement is provided through a UE-assisted
process, the uncertainty may also depend on the capabilities of the UE.
In some jurisdictions, there is a regulatory requirement for location
service accuracy that is part of an emergency service. Further details
of the accuracy requirements can be found in TS 22.071 [3].</p>
<p>The uncertainty of the position information is dependent on the
method used, the position of the UE within the coverage area and the
activity of the UE. Several design options of the NG-RAN system (e.g.,
size of cell, adaptive antenna technique, pathloss estimation, timing
accuracy, ng-eNB and gNB surveys) shall allow the network operator to
choose a suitable and cost-effective UE positioning method for their
market.</p>
<p>There are many different possible uses for the positioning
information. The positioning functions may be used internally by the
5GS, by value-added network services, by the UE itself or through the
network, and by "third party" services. The feature may also be used by
an emergency service (which may be mandated or "value-added"), but the
location service is not exclusively for emergencies.</p>
<p>Design of the NG-RAN positioning capability as documented in this
specification includes position methods, protocols and procedures that
are either adapted from capabilities already supported for E-UTRAN,
UTRAN and GERAN, or created separately from first principles. In
contrast to GERAN and UTRAN but similarly to E-UTRAN, the NG-RAN
positioning capabilities are intended to be forward compatible to other
access types and other position methods, in an effort to reduce the
amount of additional positioning support needed in the future. This goal
also extends to user plane location solutions such as OMA SUPL ([15],
[16]), for which NG-RAN positioning capabilities are intended to be
compatible where appropriate.</p>
<p>As a basis for the operation of UE Positioning in NG-RAN, the
following assumptions apply:</p>
<p>- both TDD and FDD will be supported;</p>
<p>- the provision of the UE Positioning function in NG-RAN and 5GC is
optional through support of the specified method(s) in the ng-eNB, gNB
and the LMF;</p>
<p>- UE Positioning is applicable to any target UE, whether or not the
UE supports LCS, but with restrictions on the use of certain positioning
methods depending on UE capability (e.g. as defined within the LPP
protocol);</p>
<p>- the positioning information may be used for internal system
operations to improve system performance;</p>
<p>- the UE Positioning architecture and functions shall include the
option to accommodate several techniques of measurement and processing
to ensure evolution to follow changing service requirements and to take
advantage of advancing technology.</p>
<h2 id="role-of-ue-positioning-methods">4.2 Role of UE Positioning
Methods</h2>
<p>The NG-RAN may utilise one or more positioning methods in order to
determine the position of an UE.</p>
<p>Positioning the UE involves two main steps:</p>
<p>- signal measurements; and</p>
<p>- position estimate and optional velocity computation based on the
measurements.</p>
<p>The signal measurements may be made by the UE or by the serving
ng-eNB or gNB. The basic signals measured for terrestrial position
methods are typically the LTE or NR radio transmissions; however, other
methods may make use of other transmissions such as general radio
navigation signals including those from Global Navigation Satellites
Systems (GNSSs).</p>
<p>The positioning function should not be limited to a single method or
measurement. That is, it should be capable of utilising other standard
methods and measurements, as such methods and measurements are available
and appropriate, to meet the required service needs of the location
service client. This additional information could consist of readily
available E-UTRAN or NG-RAN measurements.</p>
<p>The position estimate computation may be made by the UE or by the
LMF.</p>
<h2 id="standard-ue-positioning-methods">4.3 Standard UE Positioning
Methods</h2>
<h3 id="introduction">4.3.1 Introduction</h3>
<p>The standard positioning methods supported for NG-RAN access are:</p>
<p>- network-assisted GNSS methods;</p>
<p>- observed time difference of arrival (OTDOA) positioning based on
LTE signals;</p>
<p>- enhanced cell ID methods based on LTE signals;</p>
<p>- WLAN positioning;</p>
<p>- Bluetooth positioning;</p>
<p>- terrestrial beacon system (TBS) positioning;</p>
<p>- sensor based methods:</p>
<p>- barometric Pressure Sensor;</p>
<p>- motion sensor.</p>
<p>- NR enhanced cell ID methods (NR E-CID) based on NR signals;</p>
<p>- Multi-Round Trip Time Positioning (Multi-RTT based on NR
signals);</p>
<p>- Downlink Angle-of-Departure (DL-AoD) based on NR signals;</p>
<p>- Downlink Time Difference of Arrival (DL-TDOA) based on NR
signals;</p>
<p>- Uplink Time Difference of Arrival (UL-TDOA) based on NR
signals;</p>
<p>- Uplink Angle-of-Arrival (UL-AoA), including A-AoA and Z-AoA based
on NR signals.</p>
<p>Hybrid positioning using multiple methods from the list of
positioning methods above is also supported.</p>
<p>Standalone mode (e.g. autonomous, without network assistance) using
one or more methods from the list of positioning methods above is also
supported.</p>
<p>These positioning methods may be supported in UE-based,
UE-assisted/LMF-based, and NG-RAN node assisted versions. Table 4.3.1-1
indicates which of these versions are supported in this version of the
specification for the standardised positioning methods.</p>
<p>Table 4.3.1-1: Supported versions of UE positioning methods</p>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 12%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th>Method</th>
<th style="text-align: center;">UE-based</th>
<th style="text-align: center;">UE-assisted, LMF-based</th>
<th style="text-align: center;">NG-RAN node assisted</th>
<th>SUPL <sup>Note 8</sup></th>
</tr>
</thead>
<tbody>
<tr>
<td>A-GNSS</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td>Yes</td>
</tr>
<tr>
<td>OTDOA <sup>Note1, Note 2</sup></td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td>Yes</td>
</tr>
<tr>
<td>E-CID <sup>Note 4, Note 7</sup></td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Yes</td>
<td>Yes for E-UTRA</td>
</tr>
<tr>
<td>Sensor</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td>No</td>
</tr>
<tr>
<td>WLAN</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td>Yes</td>
</tr>
<tr>
<td>Bluetooth</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td>No</td>
</tr>
<tr>
<td>TBS <sup>Note 5</sup></td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td>Yes (MBS)</td>
</tr>
<tr>
<td>DL-TDOA</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td>Yes</td>
</tr>
<tr>
<td>DL-AoD</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td>Yes</td>
</tr>
<tr>
<td>Multi-RTT</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>NR E-CID</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Yes</td>
<td>Yes (DL NR E-CID)</td>
</tr>
<tr>
<td>UL-TDOA</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>UL-AoA</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td>Yes</td>
</tr>
<tr>
<td colspan="5"><p>NOTE 1: This includes TBS positioning based on PRS
signals.</p>
<p>NOTE 2: In this version of the specification only OTDOA based on LTE
signals is supported.</p>
<p>NOTE 3: Void</p>
<p>NOTE 4: This includes Cell-ID for NR method when UE is served by
gNB.</p>
<p>NOTE 5: In this version of the specification only for TBS positioning
based on MBS signals.</p>
<p>NOTE 6: Void</p>
<p>NOTE 7: Enhanced Cell ID based on LTE signals.</p>
<p>NOTE 8: This shows whether the positioning method is supported by
SUPL ULP [16].</p></td>
</tr>
</tbody>
</table>
<p>Sensor, WLAN, Bluetooth, and TBS positioning methods based on MBS
signals are also supported in standalone mode, as described in the
corresponding clauses.</p>
<h3 id="network-assisted-gnss-methods">4.3.2 Network-assisted GNSS
methods</h3>
<p>These methods make use of UEs that are equipped with radio receivers
capable of receiving GNSS signals. In 3GPP specifications the term GNSS
encompasses both global and regional/augmentation navigation satellite
systems.</p>
<p>Examples of global navigation satellite systems include GPS,
Modernized GPS, Galileo, GLONASS, and BeiDou Navigation Satellite System
(BDS). Regional navigation satellite systems include Quasi Zenith
Satellite System (QZSS), and NAVigation with Indian Constellation
(NavIC), while the many augmentation systems, listed in 8.1.1, are
classified under the generic term of Space Based Augmentation Systems
(SBAS) and provide regional augmentation services.</p>
<p>In this concept, different GNSSs (e.g. GPS, Galileo, etc.) can be
used separately or in combination to determine the location of a UE.</p>
<p>The operation of the network-assisted GNSS methods is described in
clause 8.1.</p>
<h3 id="otdoa-positioning">4.3.3 OTDOA positioning</h3>
<p>The OTDOA positioning method makes use of the measured timing of
downlink signals received from multiple TPs, comprising eNBs, ng-eNBs
and PRS-only TPs, at the UE. The UE measures the timing of the received
signals using assistance data received from the positioning server, and
the resulting measurements are used to locate the UE in relation to the
neighbouring TPs.</p>
<p>The operation of the OTDOA method is described in clause 8.2.</p>
<h3 id="enhanced-cell-id-methods">4.3.4 Enhanced Cell ID methods</h3>
<p>In the Cell ID (CID) positioning method, the position of an UE is
estimated with the knowledge of its serving ng-eNB, gNB and cell. The
information about the serving ng-eNB, gNB and cell may be obtained by
paging, registration, or other methods.</p>
<p>Enhanced Cell ID (ECID) based on LTE signals positioning refers to
techniques which use additional UE measurements and/or NG-RAN radio
resource and other measurements to improve the UE location estimate. In
the case of a serving ng-eNB, uplink E-CID may be supported based on NR,
GERAN, UTRA or WLAN signals.</p>
<p>Although E-CID based on LTE signals positioning may utilise some of
the same measurements as the measurement control system in the RRC
protocol, the UE generally is not expected to make additional
measurements for the sole purpose of positioning; i.e., the positioning
procedures do not supply a measurement configuration or measurement
control message, and the UE reports the measurements that it has
available rather than being required to take additional measurement
actions.</p>
<p>In cases with a requirement for close time coupling between UE and
ng-eNB measurements (e.g., T<sub>ADV</sub> type 1 and UE E-UTRA Rx-Tx
time difference), the ng-eNB configures the appropriate RRC measurements
and is responsible for maintaining the required coupling between the
measurements.</p>
<p>The operation of the Enhanced Cell ID based on LTE signals method is
described in clause 8.3.</p>
<h3 id="barometric-pressure-sensor-positioning">4.3.5 Barometric
pressure sensor positioning</h3>
<p>The barometric pressure sensor method makes use of barometric sensors
to determine the vertical component of the position of the UE. The UE
measures barometric pressure, optionally aided by assistance data, to
calculate the vertical component of its location or to send measurements
to the positioning server for position calculation.</p>
<p>This method should be combined with other positioning methods to
determine the 3D position of the UE.</p>
<p>The operation of the Barometric pressure sensor positioning method is
described in clause 8.4.</p>
<h3 id="wlan-positioning">4.3.6 WLAN positioning</h3>
<p>The WLAN positioning method makes use of the WLAN measurements (AP
identifiers and optionally other measurements) and databases to
determine the location of the UE. The UE measures received signals from
WLAN [21] access points, optionally aided by assistance data, to send
measurements to the positioning server for position calculation. Using
the measurement results and a references database, the location of the
UE is calculated.</p>
<p>Alternatively, the UE makes use of WLAN measurements and optionally
WLAN AP assistance data provided by the positioning server, to determine
its location.</p>
<p>The operation of the WLAN positioning method is described in clause
8.5.</p>
<h3 id="bluetooth-positioning">4.3.7 Bluetooth positioning</h3>
<p>The Bluetooth positioning method makes use of Bluetooth measurements
(beacon identifiers and optionally other measurements) to determine the
location of the UE. The UE measures received signals from Bluetooth [22]
beacons. Using the measurement results and a references database, the
location of the UE is calculated. The Bluetooth methods may be combined
with other positioning methods (e.g. WLAN) to improve positioning
accuracy of the UE.</p>
<p>The operation of the Bluetooth positioning method is described in
clause 8.6.</p>
<h3 id="tbs-positioning">4.3.8 TBS positioning</h3>
<p>A Terrestrial Beacon System (TBS) consists of a network of
ground-based transmitters, broadcasting signals only for positioning
purposes. The current type of TBS positioning signals are the MBS
(Metropolitan Beacon System) signals [23] and Positioning Reference
Signals (PRS) (TS 36.211 [24]). The UE measures received TBS signals,
optionally aided by assistance data, to calculate its location or to
send measurements to the positioning server for position
calculation.</p>
<p>The operation of the TBS positioning method based on MBS signals is
described in clause 8.7.</p>
<p>TBS positioning based on PRS signals is part of OTDOA positioning and
described in clause 8.2.</p>
<h3 id="motion-sensor-positioning">4.3.9 Motion sensor positioning</h3>
<p>The motion sensor method makes use of different sensors such as
accelerometers, gyros, magnetometers, to calculate the displacement of
UE. The UE estimates a relative displacement based upon a reference
position and/or reference time. UE sends a report comprising the
determined relative displacement which can be used to determine the
absolute position.</p>
<p>This method should be used with other positioning methods for hybrid
positioning.</p>
<p>The operation of the sensor positioning method is described in clause
8.8.</p>
<h3 id="nr-enhanced-cell-id-methods">4.3.10 NR Enhanced Cell ID
methods</h3>
<p>NR Enhanced Cell ID (NR ECID) positioning refers to techniques which
use additional UE measurements and/or gNB measurements to improve the UE
location estimate.</p>
<p>Although NR E-CID positioning may utilise some of the same
measurements as the measurement control system in the RRC protocol, the
UE generally is not expected to make additional measurements for the
sole purpose of positioning; i.e., the positioning procedures do not
supply a measurement configuration or measurement control message, and
the UE reports the measurements that it has available rather than being
required to take additional measurement actions.</p>
<p>The operation of the NR Enhanced Cell ID method is described in
clause 8.9.</p>
<h3 id="multi-rtt-positioning">4.3.11 Multi-RTT positioning</h3>
<p>The Multi-RTT positioning method makes use of the UE Rx-Tx time
difference measurements (and optionally DL-PRS-RSRP and/or DL-PRS-RSRPP)
of downlink signals received from multiple TRPs, measured by the UE and
the measured gNB Rx-Tx time difference measurements (and optionally
UL-SRS-RSRP and/or UL-SRS-RSRPP) at multiple TRPs of uplink signals
transmitted from UE.</p>
<p>The UE measures the UE Rx-Tx time difference measurements (and
optionally DL-PRS-RSRP and/or DL-PRS-RSRPP of the received signals)
using assistance data received from the positioning server, and the TRPs
measure the gNB Rx-Tx time difference measurements (and optionally
UL-SRS-RSRP and/or UL-SRS-RSRPP of the received signals) using
assistance data received from the positioning server. The measurements
are used to determine the RTT at the positioning server which are used
to estimate the location of the UE.</p>
<p>The operation of the Multi-RTT positioning method is described in
clause 8.10.</p>
<h3 id="dl-aod-positioning">4.3.12 DL-AoD positioning</h3>
<p>The DL-AoD positioning method makes use of the measured DL-PRS-RSRP
(and optionally DL-PRS-RSRPP) of downlink signals received from multiple
TPs, at the UE. The UE measures the DL-PRS-RSRP (and optionally
DL-PRS-RSRPP) of the received signals using assistance data received
from the positioning server, and the resulting measurements are used
along with other configuration information to locate the UE in relation
to the neighbouring TPs.</p>
<p>The operation of the DL-AoD positioning method is described in clause
8.11.</p>
<h3 id="dl-tdoa-positioning">4.3.13 DL-TDOA positioning</h3>
<p>The DL-TDOA positioning method makes use of the DL RSTD (and
optionally DL-PRS-RSRP and/or DL-PRS-RSRPP) of downlink signals received
from multiple TPs, at the UE. The UE measures the DL RSTD (and
optionally DL-PRS-RSRP and/or DL-PRS-RSRPP) of the received signals
using assistance data received from the positioning server, and the
resulting measurements are used along with other configuration
information to locate the UE in relation to the neighbouring TPs.</p>
<p>The operation of the DL-TDOA positioning method is described in
clause 8.12.</p>
<h3 id="ul-tdoa-positioning">4.3.14 UL-TDOA positioning</h3>
<p>The UL-TDOA positioning method makes use of the UL-RTOA (and
optionally UL-SRS-RSRP and/or UL-SRS-RSRPP) at multiple RPs of uplink
signals transmitted from UE. The RPs measure the UL-RTOA (and optionally
UL-SRS-RSRP and/or UL-SRS-RSRPP) of the received signals using
assistance data received from the positioning server, and the resulting
measurements are used along with other configuration information to
estimate the location of the UE.</p>
<p>The operation of the UL-TDOA positioning method is described in
clause 8.13.</p>
<h3 id="ul-aoa">4.3.15 UL-AoA</h3>
<p>The UL-AoA positioning method makes use of the measured azimuth angle
of arrival (A-AoA) and/or zenith angle of arrival (Z-AoA) at multiple
RPs of uplink signals transmitted from the UE. The RPs measure A-AoA and
Z-AoA (and optionally UL-SRS-RSRP and/or UL-SRS-RSRPP) of the received
signals using assistance data received from the positioning server, and
the resulting measurements are used along with other configuration
information to estimate the location of the UE.</p>
<p>The operation of the UL-AoA positioning method is described in clause
8.14.</p>
<h1 id="ng-ran-ue-positioning-architecture">5 NG-RAN UE Positioning
Architecture</h1>
<h2 id="architecture">5.1 Architecture</h2>
<p>Figure 5.1-1 shows the architecture in 5GS applicable to positioning
of a UE with NR or E-UTRA access.</p>
<p>The AMF receives a request for some location service associated with
a particular target UE from another entity (e.g., GMLC or UE) or the AMF
itself decides to initiate some location service on behalf of a
particular target UE (e.g., for an IMS emergency call from the UE) as
described in TS 23.502 [26] and TS 23.273 [35]. The AMF then sends a
location services request to an LMF. The LMF processes the location
services request which may include transferring assistance data to the
target UE to assist with UE-based and/or UE-assisted positioning and/or
may include positioning of the target UE. The LMF then returns the
result of the location service back to the AMF (e.g., a position
estimate for the UE. In the case of a location service requested by an
entity other than the AMF (e.g., a GMLC or UE), the AMF returns the
location service result to this entity.</p>
<p>An NG-RAN node may control several TRPs/TPs, such as remote radio
heads, or DL-PRS-only TPs for support of PRS-based TBS.</p>
<p>An LMF may have a proprietary signalling connection to an E-SMLC
which may enable an LMF to access information from EUTRAN (e.g. to
support the OTDOA for E-UTRA positioning method using downlink
measurements obtained by a target UE of signals from eNBs and/or
PRS-only TPs in E-UTRAN). Details of the signalling interaction between
an LMF and E-SMLC are outside the scope of this specification.</p>
<p>An LMF may have a proprietary signalling connection to an SLP. The
SLP is the SUPL entity responsible for positioning over the user plane.
Further details of user-plane positioning are provided in [15][16].
Details of the signalling interaction between an LMF and SLP are outside
the scope of this specification.</p>
<p><img src="media/image3.svg" /></p>
<p>Figure 5.1-1: UE Positioning Overall Architecture applicable to
NG-RAN</p>
<p>NOTE 1: Void</p>
<p>NOTE 2: Void</p>
<p>NOTE 3: Void</p>
<p>In case of split gNB architecture, a gNB-DU may include TRP
functionality where the TRP functionality may support functions for a
TP, RP or both TP and RP. A gNB-DU which includes TRP functionality does
not need to offer cell services.</p>
<h2 id="ue-positioning-operations">5.2 UE Positioning Operations</h2>
<p>To support positioning of a target UE and delivery of location
assistance data to a UE with NG-RAN access in 5GS, location related
functions are distributed as shown in the architecture in Figure 5.1-1
and as clarified in greater detail in TS 23.501 [2] and TS 23.273 [35].
The overall sequence of events applicable to the UE, NG-RAN and LMF for
any location service is shown in Figure 5.2-1.</p>
<p>Note that when the AMF receives a Location Service Request in case of
the UE is in CM-IDLE state, the AMF performs a network triggered service
request as defined in TS 23.502 [26] and TS 23.273 [35] in order to
establish a signalling connection with the UE and assign a specific
serving gNB or ng-eNB. The UE is assumed to be in connected mode before
the beginning of the flow shown in the Figure 5.2-1; that is, any
signalling that might be required to bring the UE to connected mode
prior to step 1a is not shown. The signalling connection may, however,
be later released (e.g. by the NG-RAN node as a result of signalling and
data inactivity) while positioning is still ongoing.</p>
<p><img src="media/image4.svg" /></p>
<p>Figure 5.2-1: Location Service Support by NG-RAN</p>
<p>1a. Either: some entity in the 5GC (e.g. GMLC) requests some location
service (e.g. positioning) for a target UE to the serving AMF.</p>
<p>1b. Or: the serving AMF for a target UE determines the need for some
location service (e.g. to locate the UE for an emergency call).</p>
<p>1c. Or: the UE requests some location service (e.g. positioning or
delivery of assistance data) to the serving AMF at the NAS level.</p>
<p>2. The AMF transfers the location service request to an LMF.</p>
<p>3a. The LMF instigates location procedures with the serving and
possibly neighbouring ng-eNB or gNB in the NG-RAN  e.g. to obtain
positioning measurements or assistance data.</p>
<p>3b. In addition to step 3a or instead of step 3a, the LMF instigates
location procedures with the UE  e.g. to obtain a location estimate or
positioning measurements or to transfer location assistance data to the
UE.</p>
<p>4. The LMF provides a location service response to the AMF and
includes any needed results  e.g. success or failure indication and, if
requested and obtained, a location estimate for the UE.</p>
<p>5a. If step 1a was performed, the AMF returns a location service
response to the 5GC entity in step 1a and includes any needed results 
e.g. a location estimate for the UE.</p>
<p>5b. If step 1b occurred, the AMF uses the location service response
received in step 4 to assist the service that triggered this in step 1b
(e.g. may provide a location estimate associated with an emergency call
to a GMLC).</p>
<p>5c. If step 1c was performed, the AMF returns a location service
response to the UE and includes any needed results  e.g. a location
estimate for the UE.</p>
<p>Location procedures applicable to NG-RAN occur in steps 3a and 3b in
Figure 5.2-1 and are defined in greater detail in this specification.
Other steps in Figure 5.2-1 are applicable only to the 5GC and are
described in greater detail and in TS 23.502 [26] and TS 23.273
[35].</p>
<p>Steps 3a and 3b can involve the use of different position methods to
obtain location related measurements for a target UE and from these
compute a location estimate and possibly additional information like
velocity. Positioning methods supported in this release are summarized
in clause 4.3 and described in detail in clause 8.</p>
<p>The case that the NG-RAN node functions as an LCS client is not
supported in this version of the specification.</p>
<h2 id="ng-ran-positioning-operations">5.3 NG-RAN Positioning
Operations</h2>
<h3 id="general-ng-ran-positioning-operations">5.3.1 General NG-RAN
Positioning Operations</h3>
<p>Separately from location service support for particular UEs, an LMF
may interact with elements in the NG-RAN in order to obtain measurement
information to help assist one or more position methods for all UEs. An
LMF may also interact with NG-RAN node to provide assistance data
information for broadcasting.</p>
<h3 id="otdoa-positioning-support">5.3.2 OTDOA Positioning Support</h3>
<p>An LMF can interact with any ng-eNB reachable from any of the AMFs
with signalling access to the LMF in order to obtain location related
information to support the OTDOA for E-UTRA positioning method,
including PRS-based TBS for E-UTRA. The information can include timing
information for the TP in relation to either absolute GNSS time or
timing of other TPs and information about the supported cells and TPs
including PRS schedule.</p>
<p>Signalling access between the LMF and ng-eNB may be via any AMF with
signalling access to both the LMF and ngeNB.</p>
<p>An LMF can also interact with any gNB reachable from any of the AMFs
with signalling access to the LMF in order to obtain NR cell timing
information to support the OTDOA for E-UTRA positioning method, in case
the UE is served by a NR cell.</p>
<h3 id="assistance-information-broadcast-support">5.3.3 Assistance
Information Broadcast Support</h3>
<p>An LMF can interact with any NG-RAN node reachable from any of the
AMFs with signalling access to the LMF in order to provide assistance
data information for broadcasting. The information can include
positioning System Information Blocks (posSIBs) together with assistance
information meta data, broadcast cells and broadcast periodicity.</p>
<p>Signalling access between the LMF and NG-RAN node is via any AMF with
signalling access to both the LMF and NG-RAN node.</p>
<h3 id="nr-rat-dependent-positioning-support">5.3.4 NR RAT-Dependent
Positioning Support</h3>
<p>An LMF can interact with any gNB reachable from any of the AMFs with
signalling access to the LMF in order to obtain location related
information to support the NR RAT-Dependent positioning methods. The
information can include timing information for the TRP in relation to
either absolute GNSS time or timing of other TRPs and information about
the supported cells and TRPs including PRS schedule.</p>
<p>When an LMF determines a positioning method for a UE, which requires
gNB measurements, the LMF can interact with the gNB to support the
positioning method. The LMF can request the gNB for SRS configuration
for the UE and the gNB can respond with the SRS configuration to the
LMF. The gNB can provide an updated SRS configuration to the LMF when
the SRS configuration changes. If semi-persistent or aperiodic SRS is
configured to the UE, the LMF may activate/deactivate the SRS. When the
SRS is transmitted by the UE, the LMF can request multiple TRPs to
perform uplink measurements and report the results.</p>
<p>Signalling access between the LMF and gNB for non-UE associated NRPPa
procedure in Clause 7.2.1 may be via any AMF with signalling access to
both the LMF and gNB. Signalling access between the LMF and gNB for UE
associated NRPPa procedure in Clause 7.2.1 is via the serving AMF, as in
TS 23.273 [35].</p>
<h2
id="functional-description-of-elements-related-to-ue-positioning-in-ng-ran">5.4
Functional Description of Elements Related to UE Positioning in
NG-RAN</h2>
<h3 id="user-equipment-ue">5.4.1 User Equipment (UE)</h3>
<p>The UE may make measurements of downlink signals from NG-RAN and
other sources such as E-UTRAN, different GNSS and TBS systems, WLAN
access points, Bluetooth beacons, UE barometric pressure and motion
sensors. The measurements to be made will be determined by the chosen
positioning method.</p>
<p>The UE may also contain LCS applications, or access an LCS
application either through communication with a network accessed by the
UE or through another application residing in the UE. This LCS
application may include the needed measurement and calculation functions
to determine the UE's position with or without network assistance. This
is outside of the scope of this specification.</p>
<p>The UE may also, for example, contain an independent positioning
function (e.g., GPS) and thus be able to report its position,
independent of the NG-RAN transmissions. The UE with an independent
positioning function may also make use of assistance information
obtained from the network.</p>
<h3 id="gnb">5.4.2 gNB</h3>
<p>The gNB is a network element of NG-RAN that may provide measurement
information for a target UE and communicates this information to an
LMF.</p>
<p>To support NR RAT-Dependent positioning, the gNB may make
measurements of radio signals for a target UE, and provide measurement
results for position estimation. A gNB may serve several TRPs, including
for example remote radio heads, and UL-SRS only RPs and DL-PRS-only
TPs.</p>
<p>A gNB may broadcast assistance data information, received from an
LMF, in positioning System Information messages.</p>
<h3 id="ng-enb">5.4.3 ng-eNB</h3>
<p>The ng-eNB is a network element of NG-RAN that may provide
measurement results for position estimation and makes measurements of
radio signals for a target UE and communicates these measurements to an
LMF.</p>
<p>The ng-eNB makes its measurements in response to requests from the
LMF (on demand or periodically).</p>
<p>An ng-eNB may serve several TPs, including for example remote radio
heads and PRS-only TPs for PRS-based TBS positioning for E-UTRA.</p>
<p>An ng-eNB may broadcast assistance data information, received from an
LMF, in positioning System Information messages.</p>
<h3 id="location-management-function-lmf">5.4.4 Location Management
Function (LMF)</h3>
<p>The LMF manages the support of different location services for target
UEs, including positioning of UEs and delivery of assistance data to
UEs. The LMF may interact with the serving gNB or serving ng-eNB for a
target UE in order to obtain position measurements for the UE, including
uplink measurements made by an NG-RAN and downlink measurements made by
the UE that were provided to an NG-RAN as part of other functions such
as for support of handover.</p>
<p>The LMF may interact with a target UE in order to deliver assistance
data if requested for a particular location service, or to obtain a
location estimate if that was requested.</p>
<p>The LMF may interact with multiple NG-RAN nodes to provide assistance
data information for broadcasting. The assistance data information for
broadcast may optionally be segmented and/or ciphered by the LMF. The
LMF may also interact with AMFs to provide ciphering key data
information to the AMF as described in greater detail in TS 23.273
[35].</p>
<p>For positioning of a target UE, the LMF decides on the position
methods to be used, based on factors that may include the LCS Client
type, the required QoS, UE positioning capabilities, gNB positioning
capabilities and ng-eNB positioning capabilities. The LMF then invokes
these positioning methods in the UE, serving gNB and/or serving ngeNB.
The positioning methods may yield a location estimate for UE-based
position methods and/or positioning measurements for UE-assisted and
network-based position methods. The LMF may combine all the received
results and determine a single location estimate for the target UE
(hybrid positioning). Additional information like accuracy of the
location estimate and velocity may also be determined.</p>
<p>The LMF may interact with the AMF to provide (updated) UE Positioning
Capability to AMF and to receive stored UE Positioning Capability from
AMF as described in TS 23.273 [35].</p>
<h3 id="positioning-reference-unit-pru">5.4.5 Positioning Reference Unit
(PRU)</h3>
<p>A Positioning Reference Unit (PRU) at a known location can perform
positioning measurements (e.g., RSTD, RSRP, UE Rx-Tx Time Difference
measurements, etc.) and report these measurements to a location server.
In addition, the PRU can transmit SRS to enable TRPs to measure and
report UL positioning measurements (e.g., RTOA, UL-AoA, gNB Rx-Tx Time
Difference, etc.) from PRU at a known location. The PRU measurements can
be compared by a location server with the measurements expected at the
known PRU location to determine correction terms for other nearby target
devices. The DL- and/or UL location measurements for other target
devices can then be corrected based on the previously determined
correction terms.</p>
<p>From a location server perspective, the PRU functionality is realized
by a UE with known location.</p>
<h1 id="signalling-protocols-and-interfaces">6 Signalling protocols and
interfaces</h1>
<h2 id="network-interfaces-supporting-positioning-operations">6.1
Network interfaces supporting positioning operations</h2>
<h3 id="general-lcs-control-plane-architecture">6.1.1 General LCS
control plane architecture</h3>
<p>The general LCS control plane architecture in the 5GS applicable to a
target UE with NG-RAN access is defined in TS 23.501 [2] and TS 23.273
[35].</p>
<h3 id="nr-uu-interface">6.1.2 NR-Uu interface</h3>
<p>The NR-Uu interface, connecting the UE to the gNB over the air, is
used as one of several transport links for the NR positioning
protocol(s) for a target UE with NR access to NG-RAN.</p>
<h3 id="lte-uu-interface">6.1.3 LTE-Uu interface</h3>
<p>The LTE-Uu interface, connecting the UE to the ng-eNB over the air,
is used as one of several transport links for the LTE positioning
protocol(s) for a target UE with LTE access to NG-RAN.</p>
<h3 id="ng-c-interface">6.1.4 NG-C interface</h3>
<p>The NG-C interface between the gNB and the AMF and between the ng-eNB
and the AMF is transparent to all UE-positioning-related procedures. It
is involved in these procedures only as a transport link for the NR
positioning protocol(s).</p>
<p>For gNB related positioning procedures, the NG-C interface
transparently transports both positioning requests from the LMF to the
gNB and positioning results from the gNB to the LMF.</p>
<p>For ng-eNB related positioning procedures, the NG-C interface
transparently transports both positioning requests from the LMF to the
ng-eNB and positioning results from the ng-eNB to the LMF.</p>
<p>For delivery of broadcast assistance data information, the NG-C
interface transparently transports both the assistance data information
from the LMF to the NG-RAN node for broadcasting and the feedback
information on assistance information broadcasting from the NG-RAN node
to the LMF. The NG-C interface is also used by an AMF to transparently
transport ciphering keys via NG-RAN node to UEs using a NAS message. The
ciphering keys are used to decipher broadcast assistance data
information, if the broadcast assistance data information is
ciphered.</p>
<h3 id="nl1-interface">6.1.5 NL1 interface</h3>
<p>The NL1 interface, between the LMF and the AMF, is transparent to all
UE related, gNB related and ng-eNB related positioning procedures. It is
used only as a transport link for the LTE Positioning Protocols LPP and
NR Positioning Protocol A NRPPa.</p>
<h3 id="f1-interface">6.1.6 F1 interface</h3>
<p>In case of split gNB architecture, the F1 interface is used to
support the exchange of positioning information between the gNB-DU and
the gNB-CU; it is also used transparently as a transport link for the
LPP.</p>
<h2 id="ue-terminated-protocols">6.2 UE-terminated protocols</h2>
<h3 id="lte-positioning-protocol-lpp">6.2.1 LTE Positioning Protocol
(LPP)</h3>
<p>The LTE Positioning Protocol (LPP) is terminated between a target
device (the UE in the control-plane case or SET in the user-plane case)
and a positioning server (the LMF in the control-plane case or SLP in
the user-plane case). It may use either the control- or user-plane
protocols as underlying transport. In this specification, only control
plane use of LPP is defined. User plane support of LPP is defined in
[15] and [16].</p>
<p>LPP messages are carried as transparent PDUs across intermediate
network interfaces using the appropriate protocols (e.g., NGAP over the
NG-C interface, NAS/RRC over the LTE-Uu and NR-Uu interfaces). The LPP
protocol is intended to enable positioning for NR and LTE using a
multiplicity of different position methods, while isolating the details
of any particular positioning method and the specifics of the underlying
transport from one another.</p>
<p>The protocol operates on a transaction basis between a target device
and a server, with each transaction taking place as an independent
procedure. More than one such procedure may be in progress at any given
moment. An LPP procedure may involve a request/response pairing of
messages or one or more "unsolicited" messages. Each procedure has a
single objective (e.g., transfer of assistance data, exchange of LPP
related capabilities, or positioning of a target device according to
some QoS and use of one or more positioning methods). Multiple
procedures, in series and/or in parallel, can be used to achieve more
complex objectives (e.g., positioning of a target device in association
with transfer of assistance data and exchange of LPP related
capabilities). Multiple procedures also enable more than one positioning
attempt to be ongoing at the same time (e.g., to obtain a coarse
location estimate with low delay while a more accurate location estimate
is being obtained with higher delay).</p>
<p>An LPP session is defined between a positioning server and the target
device, the details of its relation with transactions are described in
clause 4.1.2 of TS 36.355 [19].</p>
<p>For the 3GPP 5GS Control Plane solution defined in TS 23.501 [2], TS
23.502 [26] and TS 23.273 [35], the UE is the target device and the LMF
is the server. For SUPL 2.0 support, the SUPL Enabled Terminal (SET) is
the target device and the SUPL Location Platform (SLP) is the server.
The operations controlled through LPP are described further in clause
7.1.</p>
<p>LPP defined data structures for assistance data information are
reused for supporting RRC broadcast of assistance data information which
are embedded in positioning SIBs. This enables broadcast assistance data
using the same data structures which are used for point to point
location.</p>
<h3 id="radio-resource-control-rrc-for-nr">6.2.2 Radio Resource Control
(RRC) for NR</h3>
<p>The RRC protocol for NR is terminated between the gNB and the UE. It
provides transport for LPP messages over the NR-Uu interface.</p>
<p>In addition to providing transport for LPP messages over the NR-Uu
interface, it supports transfer of measurements that may be used for
positioning purposes through the existing measurement systems specified
in TS 38.331 [14].</p>
<p>The RRC protocol for NR also supports broadcasting of assistance data
via positioning System Information messages.</p>
<p>The RRC protocol for NR is also used to configure UEs with a sounding
reference signal (SRS) for SRS transmission in RRC_CONNECTED and
RRC_INACTIVE to support NG-RAN measurements for NR positioning, provide
pre-configured measurement gap configuration(s) and pre-configured PRS
processing window for DL-PRS measurement and report the UE TxTEG (Tx
Timing Error Group) for UL-TDOA.</p>
<h3 id="radio-resource-control-rrc-for-lte">6.2.3 Radio Resource Control
(RRC) for LTE</h3>
<p>The RRC protocol for LTE is terminated between the ng-eNB and the UE.
In addition to providing transport for LPP messages over the LTE-Uu
interface, it supports transfer of measurements that may be used for
positioning purposes through the existing measurement systems specified
in TS 36.331 [13].</p>
<p>The RRC protocol for LTE also supports broadcasting of assistance
data via positioning System Information messages.</p>
<h3 id="medium-access-control-mac-for-nr">6.2.4 Medium Access Control
(MAC) for NR</h3>
<p>The MAC protocol for NR supports activation and deactivation of
configured semi-persistent SRS resource sets as specified in TS 38.321
[39] to support NG-RAN measurements for NR positioning.</p>
<p>The MAC protocol for NR also supports request of positioning
measurement gap activation and deactivation from a UE, and activation
and deactivation of pre-configured measurement gap from the NG-RAN as
specified in TS 38.321 [39].</p>
<p>The MAC protocol for NR can also be used to activate and deactivate
of PRS Processing Window as specified in TS 38.321 [39].</p>
<h2 id="ng-ran-node-terminated-protocols">6.3 NG-RAN Node terminated
protocols</h2>
<h3 id="nr-positioning-protocol-a-nrppa">6.3.1 NR Positioning Protocol A
(NRPPa)</h3>
<p>The NR Positioning Protocol A (NRPPa) carries information between the
NG-RAN Node and the LMF. It is used to support the following positioning
functions:</p>
<p>- E-CID for E-UTRA where measurements are transferred from the ng-eNB
to the LMF.</p>
<p>- Data collection from ng-eNB's and gNB's for support of OTDOA
positioning for E-UTRA.</p>
<p>- Cell-ID and Cell Portion ID retrieval from gNB's for support of NR
Cell ID positioning method.</p>
<p>- Exchange of information between LMF and NG-RAN node for the purpose
of assistance data broadcasting.</p>
<p>- NR E-CID where measurements are transferred from the gNB to the
LMF.</p>
<p>- NR Multi-RTT where measurements are transferred from the gNB to the
LMF.</p>
<p>- NR UL-AoA where measurements are transferred from the gNB to the
LMF.</p>
<p>- NR UL-TDOA where measurements are transferred from the gNB to the
LMF.</p>
<p>- Data collection from gNBs for support of DL-TDOA, DL-AoD,
Multi-RTT, UL-TDOA, UL-AoA.</p>
<p>- Measurement Preconfiguration Information Transfer which allows the
LMF to request the NG-RAN node to pre-configure and activate/deactivate
measurement gap and/or PRS processing window.</p>
<p>The NRPPa protocol is transparent to the AMF. The AMF routes the
NRPPa PDUs transparently based on a Routing ID corresponding to the
involved LMF over NG-C interface without knowledge of the involved NRPPa
transaction. It carries the NRPPa PDUs over NG-C interface either in UE
associated mode or non-UE associated mode.</p>
<p>In case of a split gNB architecture, the NRPPa protocol is terminated
at the gNB-CU.</p>
<h3 id="ng-application-protocol-ngap">6.3.2 NG Application Protocol
(NGAP)</h3>
<p>The NGAP protocol, terminated between the AMF and the NG-RAN Node, is
used as transport for LPP and NRPPa messages over the NG-C interface.
The NGAP protocol is also used to instigate and terminate NG-RAN Node
related positioning procedures.</p>
<h2 id="signalling-between-an-lmf-and-ue">6.4 Signalling between an LMF
and UE</h2>
<h3 id="protocol-layering">6.4.1 Protocol Layering</h3>
<p>Figure 6.4.1-1 shows the protocol layering used to support transfer
of LPP messages between an LMF and UE. The LPP PDU is carried in NAS PDU
between the AMF and the UE.</p>
<p><img src="media/image5.svg" /></p>
<p>Figure 6.4.1-1: Protocol Layering for LMF to UE Signalling</p>
<h3 id="lpp-pdu-transfer">6.4.2 LPP PDU Transfer</h3>
<p>Figure 6.4.2-1 shows the transfer of an LPP PDU between an LMF and
UE, in the network- and UE-triggered cases. These two cases may occur
separately or as parts of a single more complex operation.</p>
<p><img src="media/image6.svg" /><img src="media/image7.svg" /></p>
<p>Figure 6.4.2-1: LPP PDU transfer between LMF and UE (network- and
UE-triggered cases)</p>
<p>1. Steps 1 to 4 may occur before, after, or at the same time as steps
5 to 8. Steps 1 to 4 and steps 5 to 8 may also be repeated. Steps 1 to 4
are triggered when the LMF needs to send an LPP message to the UE as
part of some LPP positioning activity. The LMF then invokes the
Namf_Communication _N1N2MessageTransfer service operation towards the
AMF to request the transfer of a LPP PDU to the UE. The service
operation includes the LPP PDU together with the LCS Correlation ID in
the N1 Message Container as defined in TS 29.518 [28].</p>
<p>2. If the UE is in CM-IDLE state (e.g. if the NG connection was
previously released due to data and signalling inactivity), the AMF
initiates a network triggered service request as defined in TS 23.502
[26] in order to establish a signalling connection with the UE and
assign a serving NG-RAN node.</p>
<p>3. The AMF includes the LPP PDU in the payload container of a DL NAS
Transport message, and a Routing Identifier identifying the LMF in the
Additional Information of the DL NAS Transport message defined in TS
24.501 [29]. The AMF then sends the DL NAS Transport message to the
serving NG-RAN Node in an NGAP Downlink NAS Transport message defined in
TS 38.413 [30]. The AMF need not retain state information for this
transfer; it can treat any response in step 7 as a separate
non-associated transfer.</p>
<p>4. The NG-RAN Node forwards the DL NAS Transport message to the UE in
an RRC DL Information Transfer message.</p>
<p>5. Steps 5 to 8 are triggered when the UE needs to send an LPP PDU to
the LMF as part of some LPP positioning activity. If the UE is in
CM-IDLE state, the UE instigates a UE triggered service request as
defined in TS 23.502 [26] in order to establish a signalling connection
with the AMF and assign a serving NG-RAN node.</p>
<p>6. The UE includes the LPP PDU in the payload container of an UL NAS
Transport message, and the Routing Identifier, which has been received
in step 4, in the Additional Information of the UL NAS Transport message
defined in TS 24.501 [29]. The UE then sends the UL NAS Transport
message to the serving NG-RAN node in an RRC UL Information Transfer
message.</p>
<p>7. The NG-RAN node forwards the UL NAS Transport Message to the AMF
in an NGAP Uplink NAS Transport message.</p>
<p>8. The AMF invokes the Namf_Communication_N1MessageNotify service
operation towards the LMF indicated by the Routing Identifier received
in step 7. The service operation includes the LPP PDU received in step 7
together with the LCS Correlation ID in the N1 Message Container as
defined in TS 29.518 [28].</p>
<h2 id="signalling-between-an-lmf-and-ng-ran-node">6.5 Signalling
between an LMF and NG-RAN node</h2>
<h3 id="protocol-layering-1">6.5.1 Protocol Layering</h3>
<p>Figure 6.5.1-1 shows the protocol layering used to support transfer
of NRPPa PDUs between an LMF and NG-RAN Node.</p>
<p>The NRPPa protocol is transparent to the AMF. The AMF routes the
NRPPa PDUs transparently based on a Routing ID which corresponds to the
involved LMF node over the NG interface without knowledge of the
involved NRPPa transaction. It carries the NRPPa PDUs over NG interface
either in UE associated mode or non-UE associated mode.</p>
<p><img src="media/image8.svg" /></p>
<p>Figure 6.5.1-1: Protocol Layering for LMF to NG-RAN Signalling</p>
<h3 id="nrppa-pdu-transfer-for-ue-positioning">6.5.2 NRPPa PDU Transfer
for UE Positioning</h3>
<p>Figure 6.5.2-1 shows NRPPa PDU transfer between an LMF and NG-RAN
Node to support positioning of a particular UE.</p>
<p><img src="media/image9.svg" /></p>
<p>Figure 6.5.2-1: NRPPa PDU Transfer between an LMF and NG-RAN node for
UE Positioning</p>
<p>1. Steps 1 to 3 are triggered when the LMF needs to send an NRPPa
message to the serving NG-RAN Node for a target UE as part of a NRPPa
positioning activity. The LMF then invokes the
Namf_Communication_N1N2MessageTransfer service operation towards the AMF
to request the transfer of a NRPPa PDU to the serving NG-RAN Node for
the UE. The service operation includes the NRPPa PDU together with the
LCS Correlation ID in the N2 Message Container as defined in TS 29.518
[28].</p>
<p>2. If the UE is in CM-IDLE state (e.g. if the NG connection was
previously released due to data and signalling inactivity), the AMF
performs a network triggered service request as defined in TS 23.502
[26] in order to establish a signalling connection with the UE and
assign a serving NG-RAN Node.</p>
<p>3. The AMF forwards the NRPPa PDU to the serving NG-RAN Node in an
NGAP Downlink UE Associated NRPPa Transport message over the NG
signalling connection corresponding to the UE and includes the Routing
ID related to the LMF. The AMF need not retain state information for
this transfer  e.g. can treat any response in step 4 as a separate
non-associated transfer.</p>
<p>4. Steps 4 and 5 are triggered when a serving NG-RAN Node needs to
send an NRPPa message to the LMF for a target UE as part of an NRPPa
positioning activity. The NG-RAN Node then sends an NRPPa PDU to the AMF
in an NGAP Uplink UE Associated NRPPa Transport message and includes the
Routing ID received in step 3.</p>
<p>5. The AMF invokes the Namf_Communication_N2InfoNotify service
operation towards the LMF indicated by the Routing ID received in step
4. The service operation includes the NRPPa PDU received in step 4
together with the LCS Correlation ID in the N2 Info Container as defined
in TS 29.518 [28]. Steps 1 to 5 may be repeated.</p>
<h3 id="nrppa-pdu-transfer-for-positioning-support">6.5.3 NRPPa PDU
Transfer for Positioning Support</h3>
<p>Figure 6.5.3-1 shows NRPPa PDU transfer between an LMF and NG-RAN
Node when related to gathering data from the NG-RAN Node for positioning
support for all UEs.</p>
<p><img src="media/image10.svg" /></p>
<p>Figure 6.5.3-1: NRPPa PDU Transfer between an LMF and NG-RAN for
obtaining NG-RAN Data</p>
<p>0. An ng-eNB in the NG-RAN may communicate with several TPs
(including PRS-only TPs in case of PRS-based TBS is supported) to
configure TPs, obtain TP configuration information, etc.</p>
<blockquote>
<p>A gNB in the NG-RAN may communicate with several TRPs (including
PRS-only TPs) to configure TRPs, obtain TRP configuration information,
etc.</p>
</blockquote>
<p>NOTE: NG-RANTP/TPR signalling and configuration is outside the scope
of this specification.</p>
<p>1. Steps 1 and 2 are triggered when the LMF needs to send an NRPPa
message to an NG-RAN Node to obtain data related to the NG-RAN Node, and
possibly associated TPs. The LMF invokes the
Namf_Communication_NonUeN2MessageTransfer service operation towards the
AMF to request the transfer of a NRPPa PDU to a NG-RAN node (gNB or
ng-eNB) in the NG-RAN. The service operation includes the target NG-RAN
node identity and the NRPPa PDU in the N2 Information Container as
defined in TS 29.518 [28].</p>
<p>2. The AMF forwards the NRPPa PDU to the identified NG-RAN Node in an
NGAP Downlink Non UE Associated NRPPa Transport message and includes a
Routing ID identifying the LMF. The AMF need not retain state
information for this transfer  e.g. can treat any response in step 3 as
a separate non-associated transfer.</p>
<p>3. Steps 3 and 4 are triggered when an NG-RAN Node needs to send an
NRPPa PDU to an LMF containing data applicable to the NG-RAN Node, and
possibly associated TPs. The NG-RAN Node then sends an NRPPa PDU to the
AMF in an NGAP Uplink Non UE Associated NRPPa Transport message and
includes the Routing ID received in step 2.</p>
<p>4. The AMF invokes the Namf_Communication_NonUeN2InfoNotify service
operation towards the LMF indicated by the Routing Identifier received
in step 3. The service operation includes the NRPPa PDU received in step
3 in the N2 Info Container as defined in TS 29.518 [28]. Steps 1 to 4
may be repeated.</p>
<h3 id="nrppa-pdu-transfer-for-assistance-information-broadcast">6.5.4
NRPPa PDU Transfer for Assistance Information Broadcast</h3>
<p>Figure 6.5.4-1 shows NRPPa PDU transfer between an LMF and NG-RAN
node to support broadcast of assistance data.</p>
<p><img src="media/image11.svg" /></p>
<p>Figure 6.5.4-1: NRPPa PDU Transfer between an LMF and NG-RAN Node for
providing assistance information for broadcasting.</p>
<p>1. Step 1 is triggered when the LMF needs to send new or updated
assistance information to an NG-RAN node for broadcasting in positioning
system information messages. The LMF invokes the
Namf_Communication_NonUeN2MessageTransfer service operation towards the
AMF to request the transfer of a NRPPa PDU to a NG-RAN node (gNB or
ng-eNB) in the NG-RAN. The service operation includes the target NG-RAN
node identity and the NRPPa PDU in the N2 Information Container as
defined in TS 29.518 [28].</p>
<p>2. The AMF forwards the NRPPa PDU to the identified NG-RAN node in an
NGAP Downlink Non UE Associated NRPPa Transport message and includes the
Routing ID identifying the LMF. The AMF need not retain state
information for this transfer.</p>
<p>Figure 6.5.4-2 shows NRPPa PDU transfer between an NG-RAN node and
LMF for providing feedback to the LMF on assistance data
broadcasting.</p>
<p><img src="media/image12.svg" /></p>
<p>Figure 6.5.4-2: NRPPa PDU Transfer between an NG-RAN node and LMF for
providing feedback on assistance data broadcasting.</p>
<p>1. Step 1 is triggered when an NG-RAN node needs to send an NRPPa PDU
to an LMF for providing feedback on assistance data broadcasting. Step 1
may only be triggered if the procedure in Figure 6.5.4-1 has already
been performed. The NG-RAN node sends an NRPPa PDU to the AMF in an NGAP
Uplink Non UE Associated NRPPa Transport message. The NG-RAN node
includes the previously received Routing ID related to the LMF (Figure
6.5.4-1).</p>
<p>2. The AMF invokes the Namf_Communication_NonUeN2InfoNotify service
operation towards the LMF indicated by the Routing identifier received
at step 1. The service operation includes the NRPPa PDU received in step
1 in the N2 Info Container as defined in TS 29.518 [28].</p>
<h2 id="void">6.6 Void</h2>
<h1 id="general-ng-ran-ue-positioning-procedures">7 General NG-RAN UE
Positioning procedures</h1>
<h2 id="general-lpp-procedures-for-ue-positioning">7.1 General LPP
procedures for UE Positioning</h2>
<h3 id="lpp-procedures">7.1.1 LPP procedures</h3>
<p>Positioning procedures in the NG-RAN are modelled as transactions of
the LPP protocol using the procedures defined in this specification. A
procedure consists of a single operation of one of the following
types:</p>
<p>- Exchange of positioning capabilities;</p>
<p>- Transfer of assistance data;</p>
<p>- Transfer of location information (positioning measurements and/or
position estimate);</p>
<p>- Error handling;</p>
<p>- Abort.</p>
<p>Parallel transactions are permitted (i.e. a new LPP transaction may
be initiated, while another one is outstanding).</p>
<p>As described in clause 6.2.1, the protocol operates between a
"target" and a "server". In the control-plane context, these entities
are the UE and LMF respectively; in the SUPL context they are the SET
and the SLP. A procedure may be initiated by either the target or the
server.</p>
<h3 id="positioning-procedures">7.1.2 Positioning procedures</h3>
<h4 id="capability-transfer">7.1.2.1 Capability transfer</h4>
<p>The capability transfer procedure between a "target" and a "server"
is specified in clause 7.1.2.1 of TS 36.305 [25].</p>
<h4 id="assistance-data-transfer">7.1.2.2 Assistance data transfer</h4>
<p>The assistance data transfer procedure between a "target" and a
"server" is specified in clause 7.1.2.2 of TS 36.305 [25].</p>
<h4 id="location-information-transfer">7.1.2.3 Location information
transfer</h4>
<p>The location information transfer procedure between a "target" and a
"server" is specified in clause 7.1.2.3 of TS 36.305 [25].</p>
<h4 id="multiple-transactions">7.1.2.4 Multiple transactions</h4>
<p>Multiple LPP transactions may be in progress simultaneously as
specified in clause 7.1.2.4 of TS 36.305 [25].</p>
<h4 id="sequence-of-procedures">7.1.2.5 Sequence of procedures</h4>
<p>LPP procedures are not required to occur in any fixed order, in order
to provide greater flexibility in positioning. Thus, a UE may request
assistance data at any time in order to comply with a previous request
for location measurements from the LMF; an LMF may instigate more than
one request for location information (e.g., measurements or a location
estimate) in case location results from a previous request were not
adequate for the requested QoS; and the target device may transfer
capability information to the server at any time if not already
performed.</p>
<p>Despite the flexibility allowed by LPP, it is expected that
procedures will normally occur in the following order:</p>
<p>1. Capability Transfer;</p>
<p>2. Assistance Data Transfer;</p>
<p>3. Location Information Transfer (measurements and/or location
estimate).</p>
<p>Specific examples for each positioning method are shown in clause
8.</p>
<h4 id="error-handling">7.1.2.6 Error handling</h4>
<p>The error handling procedure is specified in clause 7.1.2.6 of TS
36.305 [25].</p>
<h4 id="abort">7.1.2.7 Abort</h4>
<p>The abort procedure is specified in clause 7.1.2.7 of TS 36.305
[25].</p>
<h3 id="ue-positioning-measurements-in-rrc_idle-state-for-nb-iot">7.1.3
UE positioning measurements in RRC_IDLE state for NB-IoT</h3>
<p>NB-IoT UEs may perform measurements for some positioning methods only
when in RRC_IDLE state.</p>
<p>Figure 7.1.3-1 shows the general positioning procedure where the UE
performs positioning measurements in RRC_IDLE state.</p>
<p><img src="media/image13.svg" /></p>
<p>Figure 7.1.3-1: UE positioning measurements in RRC_IDLE state.</p>
<p>1. The LMF is aware of the UE access type and/or coverage level if
applicable from the Location Service Request message received from the
AMF. The LMF may send a LPP Request Capabilities message to the UE to
obtain the UE positioning method capabilities from the UE, as described
in clause 7.1.2.1.</p>
<p>2. The UE sends its positioning method capabilities to the LMF in a
LPP Provide Capabilities message, including an indication of position
methods for which the UE needs to make measurements in RRC_IDLE
state.</p>
<p>3. The LMF may determine the assistance data required for the
selected position method or methods, and sends them in one or more LPP
Provide Assistance data messages to the UE, as described in clause
7.1.2.2. If an LPP acknowledgement was requested, the UE sends an LPP
acknowledgment for each received LPP Provide Assistance data message to
the LMF.</p>
<p>4. If the UE capabilities from step 2 indicate that RRC_IDLE state is
required for positioning measurements, the LMF may allow additional
response time to the UE to obtain the location measurements, and sends
one or more LPP Request Location Information messages to the UE
requesting positioning measurements or a location estimate, and
including the required response time, as described in clause 7.1.2.3.
For E-CID positioning method, when NRSRP/NRSRQ measurements are
requested the UE is requested to provide NRSRP/NRSRQ measurements for
intra-frequency neighbour cells and for inter-frequency neighbour cells.
The UE may use inter-frequency information in system information of the
serving cell specified in TS 36.331 [13] to decide on which
inter-frequency cells to measure.</p>
<p>5. The UE sends an LPP acknowledgement for each received LPP Request
Location Information message to the LMF, if an LPP acknowledgement was
requested at step 4 but does not perform the requested measurements.</p>
<p>6. The UE may finish any other activities in progress (e.g., SMS or
data transfer), and waits until the network releases or suspends the
connection (after a certain period of inactivity). The UE will then
receive an RRC connection release or suspend from the ng-eNB due to the
expiration of the inactivity timer.</p>
<p>7. When the UE has entered RRC_IDLE state, the UE performs the
measurements requested in step 4.</p>
<p>8. Before the location measurements are to be sent to the LMF, the UE
instigates a UE-triggered service request or, when User Plane CIoT 5GC
optimization applies, the Connection Resume procedure as defined in TS
23.501 [2], if the UE is not using Control Plane CIoT 5GC Optimisation,
in order to establish a signalling connection with the AMF. If the UE is
using Control Plane CIoT 5GC Optimisation, procedures for Mobile
Originated Data Transport in Control Plane CIoT 5GC optimisation as
defined in TS 23.501 [2] are performed by the UE to establish a
signalling connection with the AMF.</p>
<p>9. When the LPP response time received in step 4 expires (or when
location measurements are available before expiry), the UE sends one or
more LPP Provide Location Information messages containing the requested
location measurements or location estimate obtained in step 7 to the
LMF.</p>
<h2 id="general-nrppa-procedures-for-ue-positioning">7.2 General NRPPa
Procedures for UE Positioning</h2>
<h3 id="nrppa-procedures">7.2.1 NRPPa procedures</h3>
<p>Positioning and data acquisition transactions between a LMF and
NG-RAN node are modelled by using procedures of the NRPPa protocol.
There are two types of NRPPa procedures:</p>
<p>- UE associated procedure, i.e. transfer of information for a
particular UE, including the procedures supporting the Positioning
Information Transfer, E-CID Location Information Transfer and
Measurement Preconfiguration Information Transfer functions;</p>
<p>- Non UE associated procedure, i.e. transfer of information
applicable to the NG-RAN node and associated TRP, including the
procedures supporting the OTDOA Information Transfer, Assistance
Information Transfer, TRP Information Transfer, Measurement Information
Transfer and PRS Information Transfer functions.</p>
<p>Parallel transactions between the same LMF and NG-RAN node are
supported; i.e. a pair of LMF and NG-RAN node may have more than one
instance of an NRPPa procedure in execution at the same time.</p>
<p>For possible extensibility, the protocol is considered to operate
between a generic "access node" (e.g. gNB, ng-eNB) and a "server" (e.g.
LMF). An NRPPa transaction is only initiated by the server.</p>
<p><img src="media/image14.svg" /></p>
<p>Figure 7.2.1-1: A single NRPPa transaction</p>
<p>Figure 7.2.1-1 shows a single NRPPa transaction. The transaction is
terminated in step 2 in procedures including OTDOA Information Exchange,
TRP Information Exchange, PRS Configuration Exchange and Measurement
Preconfiguration. For procedures such as Positioning Information
Exchange, Measurement and E-CID Measurement Initiation, additional
responses may be allowed (e.g. sending of updated information
periodically and/or whenever there is some significant change). In this
case, the transaction may be ended after some additional responses. In
the NRPPa protocol, the described transaction may be realized by the
execution of one procedure defined as a request and a response, followed
by one or several procedures initiated by the NG-RAN node (each
procedure defined as a single message) to realize the additional
responses. The Correlation ID, as specified in TS 29.572 [33], included
by the LMF when it invokes the Namf_Communication_N1N2MessageTransfer
AMF service operation to transfer the NRPPa PDU may be used by the LMF
to identify the target UE positioning session.</p>
<h3 id="nrppa-transaction-types">7.2.2 NRPPa transaction types</h3>
<h4 id="location-information-transfer-1">7.2.2.1 Location information
transfer</h4>
<p>The term "location information" in this clause refers to the
information used in, or used for assisting in, computing position (e.g.,
cell information, SRS configurations, radio measurements or positioning
measurements). It is delivered in response to a request.</p>
<p><img src="media/image15.svg" /></p>
<p>Figure 7.2.21: Location information transfer</p>
<p>1. The server sends a request for location related information to the
NG-RAN node, and indicates the type of location information needed. The
request may refer to a particular UE.</p>
<p>2. In response to step 1, the NG-RAN Node transfers location related
information to the server. The location related information transferred
should match the location related information requested in step 1.</p>
<p>3. If requested in step 1, the NG-RAN node may transfer additional
location related information to the server in one or more additional
NRPPa messages.</p>
<h2
id="service-layer-support-using-combined-lpp-and-nrppa-procedures">7.3
Service Layer Support using combined LPP and NRPPa Procedures</h2>
<h3 id="general">7.3.1 General</h3>
<p>As described in TS 23.502 [26] and TS 23.273 [35],
UE-positioning-related services can be instigated from the 5GC for an
NI-LR or MTLR location service, or from the UE in case of an MO-LR
location service. The complete sequence of operations in the 5GC is
defined in TS 23.502 [26] and TS 23.273 [35]. This clause defines the
overall sequences of operations that occur in the LMF, NG-RAN and UE as
a result of the 5GC operations.</p>
<h3 id="ni-lr-and-mt-lr-service-support">7.3.2 NI-LR and MT-LR Service
Support</h3>
<p>Figure 7.3.2-1 shows the sequence of operations for an NI-LR or MT-LR
location service, starting at the point where the AMF initiates the
service in the LMF.</p>
<p><img src="media/image16.svg" /></p>
<p>Figure 7.3.2-1: UE Positioning Operations to support an MT-LR or
NI-LR</p>
<p>1. The AMF sends a location request to the LMF for a target UE and
may include associated QoS, the scheduled location time and the UE LPP
positioning capabilities when available, as described in TS 23.273
[35].</p>
<p>2. The LMF may obtain location related information from the UE and/or
from the serving NG-RAN Node. In the former case, the LMF instigates one
or more LPP procedures to transfer UE positioning capabilities, provide
assistance data to the UE and/or obtain location information from the
UE. The UE may also instigate one or more LPP procedures after the first
LPP message is received from the LMF (e.g., to request assistance data
from the LMF). If a scheduled location time is provided in step 1, the
LMF may schedule location measurements by the UE to occur at or near to
the scheduled location time. The LPP procedures to transfer UE LPP
positioning capabilities may be skipped if the LMF already obtained the
UE positioning capabilities from the AMF in step 1.</p>
<p>3. If the LMF needs location related information for the UE from the
NG-RAN, the LMF instigates one or more NRPPa procedures. Step 3 is not
necessarily serialised with step 2; if the LMF and NG-RAN Node have the
information to determine what procedures need to take place for the
location service, step 3 could precede or overlap with step 2. If a
scheduled location time is provided in step 1, the LMF may schedule
location measurements by the NG-RAN to occur at or near to the scheduled
location time.</p>
<p>4. The LMF returns a location response to the AMF with any location
estimate obtained as a result of steps 2 and 3. The LMF may also return
the LPP UE capabilities as described in TS 23.273 [35].</p>
<p>NOTE: The LMF may send a location request to the UE at step 2
containing the scheduled location time sometime before the scheduled
location time to allow the UE to enter CM Connected state shortly before
the scheduled location time.</p>
<h3 id="mo-lr-service-support">7.3.3 MO-LR Service Support</h3>
<p>Figure 7.3.3-1 shows the sequence of operations for an MO-LR service,
starting at the point where an LCS Client in the UE or the user has
requested some location service (e.g., retrieval of the UE's location or
transfer of the UE's location to a third party).</p>
<p><img src="media/image17.svg" /></p>
<p>Figure 7.3.3-1: UE Positioning Operations to support an MO-LR</p>
<p>1. The UE sends an MO-LR location service request message included in
a UL NAS TRANSPORT message as specified in TS 24.501 [29] to the AMF.
The MO-LR location service request message may carry an LPP PDU to
instigate one or more LPP procedures to transfer capabilities, request
assistance data, and/or transfer location information and the scheduled
location time, as described in TS 23.273 [35].</p>
<p>2. The AMF invokes the Nlmf Determine Location Request service
operation towards the LMF as specified in TS 29.572 [33] and includes
any LPP PDU, the scheduled location time received in step 1 and the UE
LPP positioning capabilities when available.</p>
<p>3. The LMF may obtain location related information from the UE and/or
from the serving NG-RAN node. In the former case or if an immediate
response is needed to any LPP procedure instigated by the UE in step 1
(e.g., a request for assistance data), the LMF instigates one or more
LPP procedures to transfer UE positioning capabilities, provide
assistance data to the UE and/or obtain location information from the
UE. The UE may also instigate further LPP procedures after the first LPP
message is received from the LMF (e.g., to request assistance data or to
request further assistance data). If a scheduled location time is
provided in step 2, the LMF may schedule location measurements by the UE
to occur at or near to the scheduled location time. The LPP procedures
to transfer UE positioning capabilities may be skipped if the LMF
already obtained the UE positioning capabilities from the AMF in step
2.</p>
<p>4. If the LMF needs location related information for the UE from the
NG-RAN, the LMF instigates one or more NRPPa procedures. Step 4 may also
precede step 3 or occur in parallel with it. If a scheduled location
time is provided in step 1, the LMF may schedule location measurements
by the NG-RAN to occur at or near to the scheduled location time.</p>
<p>5. The LMF invokes the Nlmf Determine Location Response service
operation towards the AMF as specified in TS 29.572 [33] which includes
any location estimate obtained as a result of steps 3 and 4. The LMF may
also return the LPP UE capabilities as described in TS 23.273 [35].</p>
<p>6. If the UE requested location transfer to a third party the AMF
transfers the location received from the LMF in step 5 to the third
party as defined in TS 23.273 [35].</p>
<p>7. The AMF sends an MO-LR location service response message included
in a DL NAS TRANSPORT message as specified in TS 24.501 [29].</p>
<h3 id="deferred-mt-lr-event-reporting-support">7.3.4 Deferred MT-LR
Event Reporting Support</h3>
<p>Figure 7.3.4-1 shows the sequence of operations for a Deferred MT-LR
Event Reporting starting at the point where the UE reports an event to
the LMF.</p>
<p><img src="media/image18.svg" /></p>
<p>Figure 7.3.4-1: UE Positioning Operations to support a Deferred
MT-LR</p>
<p>1. The UE sends a supplementary services event report message to the
LMF as described in TS 24.571 [41] which is transferred via the serving
AMF and is delivered to the LMF using an
Namf_Communication_N1MessageNotify service operation. The event report
may indicate the type of event being reported and may include an
embedded positioning message which includes any location measurements or
location estimate, protection level and achievable target integrity
risk.</p>
<p>2. If LMF determines no positioning procedure is needed, steps 3 and
4 are skipped.</p>
<p>3. The LMF may utilize any location information received in step 1.
The LMF may also retrieve location related information from the UE
and/or from the serving NG-RAN Node. In the former case, the LMF
instigates one or more LPP procedures to provide assistance data to the
UE and/or obtain location information from the UE. The UE may also
instigate one or more LPP procedures after the first LPP message is
received from the LMF (e.g., to request assistance data from the
LMF).</p>
<p>4. If the LMF needs location related information for the UE from the
NG-RAN, the LMF instigates one or more NRPPa procedures. Step 4 is not
necessarily serialised with step 3; if the LMF and NG-RAN Node have the
information to determine what procedures need to take place for the
location service, step 4 could precede or overlap with step 3.</p>
<p>5. The LMF invokes an Nlmf_Location_EventNotify service operation
towards the GMLC with an indication of the type of event being reported
and any location estimate obtained as a result of steps 3 and 4.</p>
<h2 id="general-rrc-procedures-for-ue-positioning">7.4 General RRC
procedures for UE Positioning</h2>
<h3 id="nr-rrc-procedures">7.4.1 NR RRC Procedures</h3>
<p>NR RRC supports the following positioning related procedures:</p>
<p>- Location Measurement Indication;</p>
<p>- UE Positioning Assistance Information.</p>
<h4 id="location-measurement-indication">7.4.1.1 Location Measurement
Indication</h4>
<p>The location measurement indication procedure is used by the UE to
request measurement gaps for OTDOA RSTD measurements, for subframe and
slot timing detection for inter-RAT E-UTRA RSTD measurements, or for NR
DL-PRS measurements.</p>
<p><img src="media/image19.svg" /></p>
<p>Figure 7.4.1.1-1: Location measurement indication procedure</p>
<blockquote>
<p><strong>Precondition:</strong> The UE served by a gNB has received a
LPP message from an LMF requesting inter-RAT RSTD measurements for OTDOA
positioning or NR DL-PRS measurements.</p>
</blockquote>
<p>1. If the UE requires measurement gaps for performing the requested
location measurements while measurement gaps are either not configured
or not sufficient, or if the UE needs gaps to acquire the subframe and
slot timing of the target E-UTRA system before requesting measurement
gaps for the inter-RAT RSTD measurements (see TS 38.133 [32], the UE
sends an RRC Location Measurement Indication message to the serving gNB.
The message indicates that the UE is going to start location
measurements, or that the UE is going to acquire subframe and slot
timing of the target E-UTRA system, and includes information required
for the gNB to configure the appropriate measurement gaps. When the gNB
has configured the required measurement gaps the UE performs the
location measurements or timing acquisition procedures.</p>
<p>2. When the UE has completed the location procedures which required
measurement gaps, the UE sends another RRC Location Measurement
Indication message to the serving gNB. The message indicates that the UE
has completed the location measurements or timing acquisition
procedures.</p>
<h4 id="ue-positioning-assistance-information">7.4.1.2 UE Positioning
Assistance Information</h4>
<p>The UE Positioning Assistance Information procedure is used by UE to
report the UE Positioning Assistance Information for UL-TDOA. The UE
reports the association between UL-SRS resources for positioning and the
UE Tx TEG ID, and the margin value for UE Tx TEGs.</p>
<p><img src="media/image20.svg" /></p>
<p>Figure 7.4.1.2-1: RRC procedure for UE TxTEG</p>
<blockquote>
<p><strong>Precondition:</strong> The serving gNB of a UE has received a
NRPPa message from an LMF requesting the TxTEG of the UE for NR UL-TDOA
positioning.</p>
</blockquote>
<p>1. The serving gNB may send a RRC Reconfiguration message to the UE,
requesting the UE to provide the association information of UL SRS
resources for positioning with Tx TEGs to the serving gNB if the UE
supports UE Tx TEG reporting. Based on the request from the LMF, the RRC
Reconfiguration message from the serving gNB to the UE indicates the UE
should provide either a single report or a periodic report of UE TxTEG
association to the serving gNB.</p>
<p>2. When the UE receives the request via RRC Reconfiguration message,
the UE sends a UE Positioning Assistance Info message to the serving gNB
to report the UE TxTEG information, including all the changes of the UE
TxTEG during the report period if the UE is required to report UE Tx TEG
periodically. The UE will report all the UE TxTEG at the time when the
RRC Reconfiguration message is received if the UE is only required to
report the one-shot UE TxTEG information. For each UE Positioning
Assistance Info message, only a single margin value can be reported.</p>
<h3 id="lte-rrc-procedures">7.4.2 LTE RRC Procedures</h3>
<p>LTE RRC supports the following positioning related procedures:</p>
<p>- Inter-frequency RSTD measurement indication.</p>
<h4 id="inter-frequency-rstd-measurement-indication">7.4.2.1
Inter-frequency RSTD measurement indication</h4>
<p>The Inter-frequency RSTD measurement indication procedure is used by
the UE to request measurement gaps for OTDOA RSTD measurements.</p>
<p><img src="media/image21.svg" /></p>
<p>Figure 7.4.2.1-1: Inter-frequency RSTD measurement indication
procedure</p>
<blockquote>
<p><strong>Precondition:</strong> The UE served by an ng-eNB has
received a LPP message from an LMF requesting interfrequency RSTD
measurements for OTDOA positioning.</p>
</blockquote>
<p>1. If the UE requires measurement gaps for performing the requested
interfrequency RSTD measurements for OTDOA positioning while
measurement gaps are either not configured or not sufficient, the UE
sends an RRC Inter-frequency RSTD Measurement Indication message to the
serving ng-eNB. The message indicates that the UE is going to start
inter-frequency RSTD measurements and includes information required for
the ng-eNB to configure the appropriate measurement gaps. When the
ng-eNB has configured the required measurement gaps the UE performs the
inter-frequency RSTD measurements.</p>
<p>2. When the UE has completed the inter-frequency RSTD measurements
which required measurement gaps, the UE sends another RRC
Inter-frequency RSTD Measurement Indication message to the serving
ng-eNB. The message indicates that the UE has completed the
inter-frequency RSTD measurements.</p>
<h2 id="procedures-for-broadcast-of-assistance-data">7.5 Procedures for
Broadcast of Assistance Data</h2>
<h3 id="general-1">7.5.1 General</h3>
<p>Positioning assistance data can be included in positioning System
Information Blocks (posSIBs) as described in TS 36.331 [13], TS 38.331
[14] and TS 36.355 [19]. The posSIBs are carried in RRC System
Information (SI) messages. The mapping of posSIBs (assistance data) to
SI messages is flexibly configurable and provided to the UE in SIB1 for
NG-RAN node TS 36.331 [13], TS 38.331 [14].</p>
<p>The UE may request posSI by means of on-demand SI request in
RRC_IDLE/RRC_INACTIVE and also request posSIBs by means of on-demand SI
request in RRC_CONNECTED as described in TS 38.331 [14].</p>
<p>For each assistance data element, a separate posSIB-type is defined
in TS 36.355 [19]. Each posSIB may be ciphered by the LMF using the
128-bit Advanced Encryption Standard (AES) algorithm (with counter mode)
as described in TS 36.355 [19], either with the same or different
ciphering key. The posSIBs which exceed the maximum size limit defined
in TS 36.331 [13], TS 38.331 [14] shall be segmented by the LMF.</p>
<h3 id="broadcast-procedures">7.5.2 Broadcast Procedures</h3>
<p>The general procedures for broadcast of positioning assistance data
and delivery of ciphering keys to UEs is described in TS 23.273 [35].
This clause defines the overall sequences of operations that occur in
the LMF, NG-RAN node and UE.</p>
<p><img src="media/image22.svg" /></p>
<p>Figure 7.5.2-1: Procedures to support broadcast of assistance
data.</p>
<p>1. The LMF sends an NRPPa Assistance Information Control message to
the NG-RAN node with an indication to start broadcasting assistance
information. The message includes one or more System Information groups,
where each group contains the broadcast periodicity and one or more
posSIB types together with meta data to be scheduled in the same SI
message. Each posSIB type may be ciphered and/or segmented at the LMF.
The meta data may include an indication whether the posSIB type in the
System Information group is ciphered or not, as well as an indication of
an applicable GNSS type.</p>
<p>2. The NG-RAN node includes the received System Information groups in
RRC System Information Messages and corresponding scheduling information
in SIB1 as described in TS 36.331 [13], TS 38.331 [14]. The UE applies
the system information acquisition procedure according to TS 36.331
[13], TS 38.331 [14] for acquiring the assistance data information that
is broadcasted.</p>
<p>3. If the posSIB types were ciphered by the LMF, the LMF invokes the
Nlmf_Broadcast_CipheringKeyData Notify service operation towards the AMF
carrying one or more ciphering keys. For each ciphering key, the LMF
includes a ciphering key value, a ciphering key identifier, a validity
period, a set of applicable tracking areas, and a set of applicable
posSIB types. The AMF may then distribute successfully stored ciphering
keys and their validity times and validity areas to suitably subscribed
UEs using a mobility management message as described in TS 23.273 [35].
The LMF repeats this procedure whenever a ciphering key changes.</p>
<p>4. At any time after Step 1, the NG-RAN node may send a NRPPa
Assistance Information Feedback message to the LMF providing feedback on
assistance information broadcasting. The message may include an
assistance information failure list indicating that certain posSIB types
could not be configured for broadcasting by the NG-RAN node.</p>
<p>5. If the assistance information in a System Information group
changes, the LMF provides updated information in a NRPPa Assistance
Information Control message.</p>
<p>6. The NG-RAN node replaces the previously stored System Information
groups with the new information received at Step 5 and includes the new
System Information groups in RRC System Information Messages.</p>
<p>7. If the LMF wants to abort the broadcast of a System Information
Group, it sends a NRPPa Assistance Information Control message to the
NG-RAN node including an indication to stop broadcasting the assistance
information.</p>
<h2 id="procedures-for-on-demand-prs-transmission">7.6 Procedures for
On-Demand PRS transmission</h2>
<h3 id="general-2">7.6.1 General</h3>
<p>On-Demand PRS transmission procedure allows the LMF to control and
decide whether PRS is transmitted or not and to change the
characteristics of an ongoing PRS transmission. The on-demand PRS
transmission procedure can be initiated either by the UE or LMF. The
actual PRS changes are requested by the LMF irrespective of whether the
procedure is UE- or LMF-initiated.</p>
<h3 id="on-demand-prs-transmission-procedures">7.6.2 On-Demand PRS
transmission procedures</h3>
<p>Figure 7.6.2-1 shows the general positioning procedure for On-Demand
PRS transmission.</p>
<p><img src="media/image23.svg" /></p>
<p>Figure 7.6.2-1: On-Demand PRS transmission procedure</p>
<p>0. The LMF may receive information on the possible On-Demand PRS
configurations that the gNB can support during the TRP Information
Exchange procedure.</p>
<p>1. In case of UE-initiated On-Demand PRS, the LMF may configure the
UE with pre-defined PRS configurations via LPP Provide Assistance Data
message or via posSI.</p>
<p>2a. In case of UE-initiated On-Demand PRS, the UE sends an On-Demand
PRS request to the LMF via LPP Request Assistance Data message. The
On-Demand PRS request can be a request for a pre-defined PRS
configuration indicated with pre-defined PRS configuration ID or
explicit parameter for PRS configuration and may be a request for PRS
transmission or change to the PRS transmission characteristics for
positioning measurements.</p>
<p>NOTE 1: The LPP Request Assistance Data message for On-Demand PRS may
also be sent in an MO-LR location service request message.</p>
<p>NOTE 2: If the NW has provided the pre-defined On-Demand PRS
configurations to the UE, the UE is allowed to request On-Demand PRS
parameters based on pre-defined PRS configuration ID (index-based
request) or explicit parameter requests that is within the scope of the
received pre-defined On-Demand PRS configurations. Otherwise, the UE may
blindly request On-Demand PRS parameters via an explicit request within
the scope of the allowed parameter list, as specified in TS37.355
[42].</p>
<p>2b. In case of LMF-initiated On-Demand PRS, the LMF and the UE may
exchange LPP messages e.g., to obtain UE measurements or the DL-PRS
positioning capabilities of the UE, etc.</p>
<p>3. The LMF determines the need for PRS transmission or change to the
transmission characteristics of an ongoing PRS transmission.</p>
<p>4. The LMF requests the serving and non-serving gNBs/TRPs for new PRS
transmission or PRS transmission with changes to the PRS configuration
via NRPPa PRS CONFIGURATION REQUEST message.</p>
<p>5. The gNBs/TRPs provide the successfully configured or updated PRS
transmission in the NRPPa PRS CONFIGURATION RESPONSE message
accordingly.</p>
<p>6. LMF may provide the PRS configuration used for PRS transmission or
error cause via LPP Provide Assistance Data message to the UE.</p>
<p>NOTE 3: If the LPP Request Assistance Data for On-Demand DL-PRS at
Step 2a was sent in an MO-LR location service request message, the LMF
provides a MO-LR response as described in clause 7.3.3.</p>
<p>NOTE 4: It is up to Network (LMF) implementation on the steps to
follow (accept/reject/ignore) on receiving UE-initiated On-Demand PRS
request.</p>
<p>NOTE 5: It is up to Network (TRP) implementation on the steps to
follow (accept/reject/ignore) on receiving LMF-initiated On-Demand PRS
requests.</p>
<h2 id="procedures-for-pre-configured-measurement-gap">7.7 Procedures
for Pre-configured Measurement Gap</h2>
<h3 id="general-3">7.7.1 General</h3>
<p>The pre-configured measurement gap procedure is used by the network
to provide measurement gap for NR DL-PRS measurements. The serving gNB
may activate/deactivate the pre-configured measurement gap upon
receiving the request from a UE or LMF.</p>
<h3 id="pre-configured-measurement-gap-procedures">7.7.2 Pre-configured
Measurement Gap procedures</h3>
<p>Figure 7.7.2-1 shows the procedure for the successful
pre-configuration and activation of measurement gap.</p>
<p><img src="media/image24.svg" /></p>
<p>Figure 7.7.2-1: Pre-configured measurement gap configuration and
activation procedure</p>
<p>0. LMF obtains the TRP information required for positioning services
from the gNBs.</p>
<p>1. The LMF provides the PRS information of the neighbour TRPs to the
serving gNB and requests the serving gNB to configure the UE with
measurement pre-configurations via NRPPa MEASUREMENT PRECONFIGURATION
REQUIRED message.</p>
<p>2. Based on the assistance information from the LMF and the UE
capability, the serving gNB decides to pre-configure the UE with
measurement gap and provides pre-configured measurement gap
configuration(s) with associated ID(s) to the UE by sending RRC
Reconfiguration message specified in TS 38.331 [14].</p>
<p>3. The UE sends RRC Reconfiguration complete message to the serving
gNB to confirm the reception of pre-configured measurement gap
configuration(s).</p>
<p>4. The serving gNB sends the confirmation message to the LMF to
indicate the success of the pre-configuration via NRPPa MEASUREMENT
PRECONFIGURATION CONFIRM message.</p>
<p>5a. If the UE requires measurement gaps for performing the requested
location measurements, and the triggering condition for UL MAC CE as
specified in TS 38.331 [14] is met, the UE sends UL MAC CE Positioning
Measurement Gap Activation/Deactivation Request to the serving gNB and
indicates the requested measurement gap configuration based on the ID
configured in step 2.</p>
<p>5b. LMF may send the NRPPa MEASUREMENT ACTIVATION message to request
the serving gNB to activate pre-configured measurement gap.</p>
<blockquote>
<p>6. Based on the request from the UE in step 5a or the request from
the LMF in step 5b, the serving gNB may send DL MAC CE Positioning
Measurement Gap Activation/Deactivation Command containing an ID to
activate the associated measurement gap.</p>
</blockquote>
<p>Figure 7.7.2-2 shows the procedure for the successful deactivation of
measurement gap.</p>
<p><img src="media/image25.svg" /></p>
<p>Figure 7.7.2-2: Pre-configured measurement gap deactivation
procedure</p>
<p>0. A measurement gap has been activated as shown in Figure
7.7.2-1.</p>
<p>1a. If the UE requires to stop performing the requested location
measurements, and the triggering condition for UL MAC CE as specified in
TS 38.331 [14] is met, the UE sends UL MAC CE Positioning Measurement
Gap Activation/Deactivation Request to the serving gNB to deactivate the
activated measurement gap containing the ID associated with the
measurement gap for positioning.</p>
<p>1b. LMF may send the NRPPa MEASUREMENT ACTIVATION message to request
the serving gNB to deactivate pre-configured measurement gap.</p>
<p>2. Based on the request from the UE in step 1a or the request from
the LMF in step 1b, the serving gNB may send DL MAC CE Positioning
Measurement Gap Activation/Deactivation Command containing an ID to
deactivate the associated measurement gap.</p>
<h2 id="procedures-for-pre-configured-prs-processing-window">7.8
Procedures for Pre-configured PRS processing window</h2>
<h3 id="general-4">7.8.1 General</h3>
<p>The pre-configured PRS processing window procedure is used by the
network to provide PRS processing window for NR DL-PRS measurements to
the UE without measurement gap. The serving gNB may activate/deactivate
the pre-configured PRS processing window upon receiving the request from
LMF.</p>
<h3 id="pre-configured-prs-processing-window-procedures">7.8.2
Pre-configured PRS processing window procedures</h3>
<p>Figure 7.8.2-1 shows the procedure for the successful
pre-configuration and activation of PRS processing window.</p>
<p><img src="media/image26.svg" /></p>
<p>Figure 7.8.2-1: Pre-configured PRS processing window configuration
and activation procedure</p>
<p>0. LMF obtains the TRP information required for positioning services
from the gNBs.</p>
<p>1. The LMF provides the PRS information of the neighbour TRPs to the
serving gNB and requests the serving gNB to configure the UE with
measurement pre-configurations via NRPPa MEASUREMENT PRECONFIGURATION
REQUIRED message.</p>
<p>2. Based on the assistance information from the LMF and the UE
capability, the serving gNB decides to pre-configure the UE with PRS
processing window and provides pre-configured PRS processing window
configuration(s) with associated ID(s) to the UE by sending RRC
Reconfiguration message specified in TS 38.331 [14].</p>
<p>3. The UE sends RRC Reconfiguration complete message to the serving
gNB to confirm the reception of pre-configured PRS processing window
configuration(s).</p>
<p>4. The serving gNB sends the confirmation message to the LMF to
indicate the success of the pre-configuration via NRPPa MEASUREMENT
PRECONFIGURATION CONFIRM message.</p>
<p>5. The LMF sends the NRPPa MEASUREMENT ACTIVATION message to request
the serving gNB to activate the pre-configured PRS processing
window.</p>
<p>6. Based on the request from the LMF in step 5, the serving gNB sends
DL MAC CE PPW Activation/Deactivation Command containing ID(s) to
activate the associated PRS processing window configuration(s).</p>
<p>Figure 7.8.2-2 shows the procedure for the successful deactivation of
PRS processing window.</p>
<p><img src="media/image27.svg" /></p>
<p>Figure 7.8.2-2: Pre-configured PRS processing window deactivation
procedure</p>
<p>0. The PRS processing window has been activated as shown in Figure
7.8.2-1.</p>
<p>1. The LMF sends the NRPPa MEASUREMENT ACTIVATION message to request
the serving gNB to deactivate the pre-configured PRS processing
window.</p>
<p>2. Based on the request from the LMF in step 1, the serving gNB sends
DL MAC CE PPW Activation/Deactivation Command containing ID(s) to
deactivate the associated PRS processing window configuration(s).</p>
<h2 id="positioning-in-rrc_inactive-state">7.9 Positioning in
RRC_INACTIVE state</h2>
<p>Positioning may be performed when a UE is in RRC_INACTIVE state. Any
uplink LCS or LPP message can be transported in RRC_INACTIVE state. If
the UE initiated data transmission using UL SDT, the network can send DL
LCS, LPP, RRC Release message (e.g. to configure SRS for UL positioning,
if it is supported) and SP Positioning SRS Activation/Deactivation MAC
CE to the UE without the need of state transition.</p>
<p>Periodic and Semi-persistent UL-SRS transmission for positioning can
be supported in RRC_INACTIVE.</p>
<p>NOTE: Aperiodic UL-SRS transmission for positioning is not supported
in RRC_INACTIVE.</p>
<h1 id="positioning-methods-and-supporting-procedures">8 Positioning
methods and Supporting Procedures</h1>
<h2 id="gnss-positioning-methods">8.1 GNSS positioning methods</h2>
<h3 id="general-5">8.1.1 General</h3>
<p>A navigation satellite system provides autonomous geo-spatial
positioning with either global or regional coverage. Augmentation
systems, such as SBAS, are navigation satellite systems that provide
regional coverage to augment the navigation systems with global
coverage.</p>
<p>By definition, GNSS refers to satellite constellations that achieve
global coverage, however, in 3GPP specifications the term GNSS is used
to encompass global, regional, and augmentation satellite systems. The
following GNSSs are supported in this version of the specification:</p>
<p>- GPS and its modernization [5], [6], [7]; (global coverage)</p>
<p>- Galileo [8]; (global coverage)</p>
<p>- GLONASS [9]; (global coverage)</p>
<p>- Satellite Based Augmentation Systems (SBAS), including WAAS, EGNOS,
MSAS, and GAGAN [11]; (regional coverage)</p>
<p>- Quasi-Zenith Satellite System (QZSS) [10]; (regional coverage)</p>
<p>- BeiDou Navigation Satellite System (BDS) [20] [34] [44] [45].
(global coverage)</p>
<blockquote>
<p>- NAVigation with Indian Constellation (NavIC) [43]. (regional
coverage)</p>
</blockquote>
<p>Each global GNSS can be used individually or in combination with
others, including regional navigation systems and augmentation systems.
When used in combination, the effective number of navigation satellite
signals would be increased:</p>
<p>- extra satellites can improve availability (of satellites at a
particular location) and results in an improved ability to work in areas
where satellite signals can be obscured, such as in urban canyons;</p>
<p>- extra satellites and signals can improve reliability, i.e., with
extra measurements the data redundancy is increased, which helps
identify any measurement outlier problems;</p>
<p>- extra satellites and signals can improve accuracy due to improved
measurement geometry and improved ranging signals from modernized
satellites.</p>
<p>When GNSS is designed to inter-work with the NG-RAN, the network
assists the UE GNSS receiver to improve the performance in several
respects. These performance improvements will:</p>
<p>- reduce the UE GNSS start-up and acquisition times; the search
window can be limited and the measurements speed up significantly;</p>
<p>- increase the UE GNSS sensitivity; positioning assistance messages
are obtained via NG-RAN so the UE GNSS receiver can operate also in low
SNR situations when it is unable to demodulate GNSS satellite
signals;</p>
<p>- allow the UE to consume less handset power than with stand-alone
GNSS; this is due to rapid start-up times as the GNSS receiver can be in
idle mode when it is not needed;</p>
<p>- allow the UE to compute its position with a better accuracy; RTK
corrections (for N-RTK) and GNSS physical models (for SSR/PPP) are
obtained via NG-RAN so the UE can use these assistance data, together
with its own measurements, i.e., code and carrier phase measurements, to
enable computation of a position with a high accuracy;</p>
<blockquote>
<p>- allow the UE to determine and report the integrity results of the
calculated location; the UE can use the integrity requirements and
assistance data obtained via NG-RAN, together with its own measurements,
to determine the integrity results of the calculated location.</p>
</blockquote>
<p>The network-assisted GNSS methods rely on signalling between UE GNSS
receivers (possibly with reduced complexity) and a continuously
operating GNSS reference receiver network, which has clear sky
visibility of the same GNSS constellation as the assisted UEs. Two
assisted modes are supported:</p>
<p><em>- UE-Assisted</em>: The UE performs GNSS measurements
(pseudo-ranges, pseudo Doppler, carrier phase ranges, etc.) and sends
these measurements to the LMF where the position calculation takes
place, possibly using additional measurements from other (non GNSS)
sources;</p>
<p><em>- UE-Based</em>: The UE performs GNSS measurements and calculates
its own location, possibly using additional measurements from other (non
GNSS) sources and assistance data from the LMF.</p>
<p>The assistance data content may vary depending on whether the UE
operates in UE-Assisted or UE-Based mode.</p>
<p>The assistance data signalled to the UE can be broadly classified
into:</p>
<p>- <em>data assisting the measurements</em>: e.g. reference time,
visible satellite list, satellite signal Doppler, code phase, Doppler
and code phase search windows;</p>
<p>- <em>data providing means for position calculation</em>: e.g.
reference time, reference position, satellite ephemeris, clock
corrections, code and carrier phase measurements from a GNSS reference
receiver or network of receivers;</p>
<p>- <em>data increasing the position accuracy</em>: e.g. satellite code
biases, satellite orbit corrections, satellite clock corrections,
atmospheric models, RTK residuals, gradients;</p>
<blockquote>
<p>- <em>data facilitating the integrity results determination of the
calculated location</em>.</p>
</blockquote>
<p>A UE with GNSS measurement capability may also operate in an
autonomous (standalone) mode. In autonomous mode the UE determines its
position based on signals received from GNSS without assistance from the
network.</p>
<p>8.1.1a Integrity Principle of Operation</p>
<p>For integrity operation, the network will ensure that:</p>
<p><em>P(Error &gt; Bound for longer than TTA | NOT DNU) &lt;= Residual
Risk + IRallocation</em> (Equation 8.1.1a-1)</p>
<p>for all values of IRallocation in the range irMinimum &lt;=
<em>IRallocation</em> &lt;= irMaximum</p>
<blockquote>
<p>for all the errors in Table 8.1.2.1b-1, which have corresponding
integrity assistance data available and where the corresponding DNU
flag(s) are set to false.</p>
</blockquote>
<p>The integrity risk probability is decomposed into a constant Residual
Risk component provided in the assistance data as well as a variable
IRallocation component that corresponds to the contribution from the
Bound according to the Bound formula in Equation 8.1.1a-2. IRallocation
may be chosen freely by the client based on the desired Bound, therefore
the network should ensure that Equation 8.1.1a-1 holds for all possible
choices of IRallocation. The Residual Risk and IRallocation components
may be mapped to fault and fault-free cases respectively, but the
implementation is free to choose any other decomposition of the
integrity risk probability into these two components.</p>
<p>The validity time of the integrity bounds is set as equal to twice
the SSR Update Interval for the given SSR Assistance Data message, i.e.
the time period between the SSR Epoch Time and the SSR Epoch Time plus
twice the SSR Update Interval in the GPS time scale.</p>
<p>Equation 8.1.1a-1 holds for all assistance data that has been issued
that is still within its validity period. If this condition cannot be
met then the corresponding DNU flag must be set.</p>
<p>Equation 8.1.1a-1 holds at any epochs for which Assistance Data is
provided. Providing Assistance Data without the Integrity Service Alert
IE or Real Time Integrity IEs is interpreted as a DNU=FALSE condition.
For any bound that is still valid (within its validity time), the
network ensures that the Integrity Service Alert and/or Real Time
Integrity IEs are also included in the provided Assistance Data if
needed to satisfy the condition in Equation 8.1.1a-1. It is up to the
implementation how to handle epochs for which integrity results are
desired but there are no DNU flag(s) available, e.g. the Time To Alert
(TTA) may be set such that there is a "grace period" to receive the next
set of DNU flags.</p>
<p>Only those satellites for which the GNSS integrity assistance data
are provided are monitored by the network and can be used for integrity
related applications.</p>
<p>Where:</p>
<blockquote>
<p><strong>Error:</strong> Error is the difference between the true
value of a GNSS parameter (e.g. ionosphere, troposphere etc.), and its
value as estimated and provided in the corresponding assistance data as
per Table 8.1.2.1b-1</p>
<p><strong>Bound:</strong> Integrity Bounds provide the statistical
distribution of the residual errors associated with the GNSS positioning
corrections (e.g. RTK, SSR etc). Integrity bounds are used to
statistically bound the residual errors after the positioning
corrections have been applied. The bound is computed according to the
Bound formula defined in Equation 8.1.1a-2. The bound formula describes
a bounding model including a mean and standard deviation (e.g. paired
over-bounding Gaussian). The bound may be scaled by multiplying the
standard deviation by a K factor corresponding to an IRallocation, for
any desired IRallocation within the permitted range.</p>
<p>Bound for a particular error is computed according to the following
formula:</p>
<p><em>Bound = mean + K * stdDev</em> (Equation 8.1.1a-2)</p>
<p><em>K = normInv(IR<sub>allocation</sub> / 2)</em></p>
<p><em>irMinimum &lt;= IR<sub>allocation</sub> &lt;= irMaximum</em></p>
</blockquote>
<p>where: <em>mean</em>: mean value for this specific error, as per
Table 8.1.2.1b-1</p>
<p><em>stdDev</em>: standard deviation for this specific error, as per
Table 8.1.2.1b-1</p>
<blockquote>
<p><strong>Time-to-Alert (TTA):</strong> The maximum allowable elapsed
time from when the Error exceeds the Bound until a DNU flag must be
issued.</p>
<p><strong>Target Integrity Risk (TIR):</strong> The probability per
unit of time that the Error exceeds the Bound without issuing a DNU flag
within the TTA.</p>
<p><strong>DNU:</strong> The DNU flag(s) corresponding to a particular
error as per Table 8.1.2.1b-1. Where multiple DNU flags are specified,
the DNU condition in Equation 8.1.1a-1 is present when any of the flags
are true (logical OR of the flags).</p>
<p><strong>Residual Risk:</strong> The residual risk is the component of
the integrity risk provided in the assistance data as per Table
8.1.2.1b-1. This may correspond to the fault case risk but the
implementation is permitted to allocate this component in any way that
satisfies Equation 8.1.1a-1.</p>
<p>The Residual Risk is the Probability of Onset which is defined per
unit of time and represents the probability that the feared event
begins. Each Residual Risk is accompanied by a Mean Duration which
represents the expected mean duration of the corresponding feared event
and is used to convert the Probability of Onset to a probability that
the feared event is present at any given time, i.e.</p>
<p><em>P(Feared Event is Present) = Mean Duration * Probability of Onset
of Feared Event</em> (Equation 8.1.1a-3)</p>
<p><strong>irMinimum, irMaximum:</strong> Minimum and maximum allowable
values of IRallocation that may be chosen by the client. Provided as
service parameters from the Network according to Integrity Service
Parameters.</p>
<p><strong>Correlation Times:</strong> The minimum time interval beyond
which two sets of GNSS assistance data parameters for a given error can
be considered to be independent from one another.</p>
</blockquote>
<h3 id="information-to-be-transferred-between-ng-ran5gc-elements">8.1.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and UE.</p>
<h4 id="information-that-may-be-transferred-from-the-lmf-to-ue">8.1.2.1
Information that may be transferred from the LMF to UE</h4>
<p>Table 8.1.2.1-1 lists assistance data for both UE-assisted and
UE-based modes that may be sent from the LMF to the UE.</p>
<p>NOTE: The provision of these assistance data elements and the usage
of these elements by the UE depend on the NG-RAN/5GC and UE
capabilities, respectively.</p>
<p>Table 8.1.2.1-1: Information that may be transferred from the LMF to
UE</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Assistance Data</td>
</tr>
<tr>
<td>Reference Time</td>
</tr>
<tr>
<td>Reference Location</td>
</tr>
<tr>
<td>Ionospheric Models</td>
</tr>
<tr>
<td>Earth Orientation Parameters</td>
</tr>
<tr>
<td>GNSS-GNSS Time Offsets</td>
</tr>
<tr>
<td>Differential GNSS Corrections</td>
</tr>
<tr>
<td>Ephemeris and Clock Models</td>
</tr>
<tr>
<td>Real-Time Integrity</td>
</tr>
<tr>
<td>Data Bit Assistance</td>
</tr>
<tr>
<td>Acquisition Assistance</td>
</tr>
<tr>
<td>Almanac</td>
</tr>
<tr>
<td>UTC Models</td>
</tr>
<tr>
<td>RTK Reference Station Information</td>
</tr>
<tr>
<td>RTK Auxiliary Station Data</td>
</tr>
<tr>
<td>RTK Observations</td>
</tr>
<tr>
<td>RTK Common Observation Information</td>
</tr>
<tr>
<td>GLONASS RTK Bias Information</td>
</tr>
<tr>
<td>RTK MAC Correction Differences</td>
</tr>
<tr>
<td>RTK Residuals</td>
</tr>
<tr>
<td>RTK FKP Gradients</td>
</tr>
<tr>
<td>SSR Orbit Corrections</td>
</tr>
<tr>
<td>SSR Clock Corrections</td>
</tr>
<tr>
<td>SSR Code Bias</td>
</tr>
<tr>
<td>SSR Phase Bias</td>
</tr>
<tr>
<td>SSR STEC Corrections</td>
</tr>
<tr>
<td>SSR Gridded Correction</td>
</tr>
<tr>
<td>SSR URA</td>
</tr>
<tr>
<td>SSR Correction Points</td>
</tr>
<tr>
<td>Integrity Service Parameters</td>
</tr>
<tr>
<td>Integrity Alerts</td>
</tr>
</tbody>
</table>
<h5 id="reference-time">8.1.2.1.1 Reference Time</h5>
<p>Reference Time assistance provides the GNSS receiver with coarse or
fine GNSS time information. The specific GNSS system times (e.g., GPS,
Galileo, GLONASS, BDS, NavIC system time) shall be indicated with a GNSS
ID.</p>
<p>In case of coarse time assistance only, the Reference Time provides
an estimate of the current GNSS system time (where the specific GNSS is
indicated by a GNSS ID). The LMF should achieve an accuracy of 3
seconds for this time including allowing for the transmission delay
between LMF and UE.</p>
<p>In case of fine time assistance, the Reference Time provides the
relation between GNSS system time (where the specific GNSS is indicated
by a GNSS ID) and NG-RAN air-interface timing.</p>
<h5 id="reference-location">8.1.2.1.2 Reference Location</h5>
<p>Reference Location assistance provides the GNSS receiver with an a
priori estimate of its location (e.g., obtained via Cell-ID, OTDOA
positioning, etc.) together with its uncertainty.</p>
<p>The geodetic reference frame shall be WGS-84, as specified in TS
23.032 [4].</p>
<h5 id="ionospheric-models">8.1.2.1.3 Ionospheric Models</h5>
<p>Ionospheric Model assistance provides the GNSS receiver with
parameters to model the propagation delay of the GNSS signals through
the ionosphere. Ionospheric Model parameters as specified by GPS [5],
Galileo [8], QZSS [10], BDS [20] [34] [44] [45], and NavIC [43] may be
provided.</p>
<h5 id="earth-orientation-parameters">8.1.2.1.4 Earth Orientation
Parameters</h5>
<p>Earth Orientation Parameters (EOP) assistance provides the GNSS
receiver with parameters needed to construct the ECEF-to-ECI coordinate
transformation as specified by GPS [5].</p>
<h5 id="gnss-gnss-time-offsets">8.1.2.1.5 GNSS-GNSS Time Offsets</h5>
<p>GNSS-GNSS Time Offsets assistance provides the GNSS receiver with
parameters to correlate GNSS time (where the specific GNSS is indicated
by a GNSS-1 ID) of one GNSS with other GNSS time (where the specific
GNSS is indicated by a GNSS-2 ID). GNSS-GNSS Time Offsets parameters as
specified by GPS [5], Galileo [8], GLONASS [9], QZSS [10], BDS [20] [34]
[44] [45], and NavIC [43] may be provided.</p>
<h5 id="differential-gnss-corrections">8.1.2.1.6 Differential GNSS
Corrections</h5>
<p>Differential GNSS Corrections assistance provides the GNSS receiver
with pseudo-range and pseudo-range-rate corrections to reduce biases in
GNSS receiver measurements as specified in [12]. The specific GNSS for
which the corrections are valid is indicated by a GNSS-ID.</p>
<h5 id="ephemeris-and-clock-models">8.1.2.1.7 Ephemeris and Clock
Models</h5>
<p>Ephemeris and Clock Models assistance provides the GNSS receiver with
parameters to calculate the GNSS satellite position and clock offsets.
The various GNSSs use different model parameters and formats, and all
parameter formats as defined by the individual GNSSs are supported by
the signalling.</p>
<h5 id="real-time-integrity">8.1.2.1.8 Real-Time Integrity</h5>
<p>Real-Time Integrity assistance provides the GNSS receiver with
information about the health status of a GNSS constellation (where the
specific GNSS is indicated by a GNSS ID).</p>
<p>For integrity purposes (as per Clause 8.1.1a), a GNSS satellite and
signal combination should be considered as being marked "Do Not Use"
(DNU) if the satellite ID and signal are present in the list of
unhealthy (bad) signals.</p>
<p>NOTE: The absence of the Real Time Integrity assistance from any
Provide Assistance Data message is interpreted as DNU=FALSE for all
satellites and signals that are monitored for integrity.</p>
<h5 id="data-bit-assistance">8.1.2.1.9 Data Bit Assistance</h5>
<p>Data Bit Assistance provides the GNSS receiver with information about
data bits or symbols transmitted by a GNSS satellite at a certain time
(where the specific GNSS is indicated by a GNSS ID). This information
may be used by the UE for sensitivity assistance (data wipe-off) and
time recovery.</p>
<h5 id="acquisition-assistance">8.1.2.1.10 Acquisition Assistance</h5>
<p>Acquisition Assistance provides the GNSS receiver with information
about visible satellites, reference time, expected code-phase, expected
Doppler, search windows (i.e., code and Doppler uncertainty) and other
information of the GNSS signals (where the specific GNSS is indicated by
a GNSS ID) to enable a fast acquisition of the GNSS signals.</p>
<h5 id="almanac">8.1.2.1.11 Almanac</h5>
<p>Almanac assistance provides the GNSS receiver with parameters to
calculate the coarse (long-term) GNSS satellite position and clock
offsets. The various GNSSs use different model parameters and formats,
and all parameter formats as defined by the individual GNSSs are
supported by the signalling.</p>
<h5 id="utc-models">8.1.2.1.12 UTC Models</h5>
<p>UTC Models assistance provides the GNSS receiver with parameters
needed to relate GNSS system time (where the specific GNSS is indicated
by a GNSS ID) to Universal Coordinated Time. The various GNSSs use
different model parameters and formats, and all parameter formats as
defined by the individual GNSSs are supported by the signalling.</p>
<h5 id="rtk-reference-station-information">8.1.2.1.13 RTK Reference
Station Information</h5>
<p>RTK Reference Station Information provides the GNSS receiver with the
Earth-Centered, Earth-Fixed (ECEF) coordinates of the Reference
Station's installed antenna's ARP, and the height of the ARP above the
survey monument. Additionally, this assistance data provides information
about the antenna type installed at the reference site.</p>
<p>NOTE: With the MAC N-RTK technique this assistance data is used to
provide information regarding the Master Reference Station (see clause
8.1.2.1a).</p>
<h5 id="rtk-auxiliary-station-data">8.1.2.1.14 RTK Auxiliary Station
Data</h5>
<p>RTK Auxiliary Station Data provides the GNSS receiver with the
location for all Auxiliary Reference Stations (see clause 8.1.2.1a)
within the assistance data. These values are expressed as relative
geodetic coordinates (latitude, longitude, and height) with respect to a
Master Reference Station (see clause 8.1.2.1a) and based on the GRS80
ellipsoid. This type of assistance data is relevant only with the MAC
N-RTK technique [31].</p>
<h5 id="rtk-observations">8.1.2.1.15 RTK Observations</h5>
<p>RTK Observations provides the GNSS receiver with all primary
observables (pseudo-range, phase-range, phase-range rate (Doppler), and
carrier-to-noise ratio) generated at the Reference Station for each GNSS
signal. The signal generation from the reference station is in
compliance with [31]: as an example, the phase measurements of different
signals in the same band must be phased aligned. More examples can be
found in [31].</p>
<p>The pseudo-range is the distance between the satellite and GNSS
receiver antennas, expressed in metres, equivalent to the difference of
the time of reception (expressed in the time frame of the GNSS receiver)
and the time of transmission (expressed in the time frame of the
satellite) of a distinct satellite signal.</p>
<p>The phase-range measurement is a measurement of the range between a
satellite and receiver expressed in units of cycles of the carrier
frequency. This measurement is more precise than the pseudo-range (of
the order of millimetres), but it is ambiguous by an unknown integer
number of wavelengths.</p>
<p>The phase-range rate is the rate at which the phase-range between a
satellite and a GNSS receiver changes over a particular period of
time.</p>
<p>The carrier-to-noise ratio is the ratio of the received modulated
carrier signal power to the noise power after the GNSS receiver
filters.</p>
<p>NOTE: With the MAC N-RTK technique this assistance data is used to
provide raw observables recorded at the Master Reference Station (see
clause 8.1.2.1a).</p>
<h5 id="rtk-common-observation-information">8.1.2.1.16 RTK Common
Observation Information</h5>
<p>RTK Common Observation Information provides the GNSS receiver with
common information applicable to any GNSS, e.g. clock steering
indicator. This assistance data is always used together GNSS RTK
Observations (see clause 8.1.2.1.15).</p>
<h5 id="glonass-rtk-bias-information">8.1.2.1.17 GLONASS RTK Bias
Information</h5>
<p>RTK Bias Information provides the GNSS receiver with information
which is intended to compensate for the first-order inter-frequency
phase-range biases introduced by the reference receiver code-phase
biases. This information is applicable only for GLONASS FDMA signals. In
the case that the MAC Network RTK method is used, GLONASS RTK Bias
Information defines the code-phase biases related to the Master
Reference Station [31].</p>
<h5 id="rtk-mac-correction-differences">8.1.2.1.18 RTK MAC Correction
Differences</h5>
<p>RTK MAC Correction Differences provides the GNSS receiver with
information about ionospheric (dispersive) and geometric
(non-dispersive) corrections generated between a Master Reference
Station and its Auxiliary Reference Stations [31].</p>
<h5 id="rtk-residuals">8.1.2.1.19 RTK Residuals</h5>
<p>RTK Residuals provides the GNSS receiver with network error models
generated for the interpolated corrections disseminated in Network RTK
techniques. With sufficient redundancy in the RTK network, the location
server process can provide an estimate for residual interpolation
errors. Such quality estimates may be used by the target UE to optimize
the performance of RTK solutions. The values may be considered by the
target UE as a priori estimates only, with sufficient tracking data
available the target UE might be able to judge residual geometric and
ionospheric errors itself. According to [31], RTK Residual error
information should be transmitted every 10-60 seconds.</p>
<h5 id="rtk-fkp-gradients">8.1.2.1.20 RTK FKP Gradients</h5>
<p>RTK FKP Gradients provides the GNSS receiver with horizontal
gradients for the geometric (troposphere and satellite orbits) and
ionospheric signal components in the observation space. According to
[31], RTK FKP gradient information should be typically transmitted every
10-60 seconds.</p>
<h5 id="ssr-orbit-corrections">8.1.2.1.21 SSR Orbit Corrections</h5>
<p>SSR Orbit Corrections provides the GNSS receiver with parameters for
orbit corrections in radial, along-track and cross-track components.
These orbit corrections are used to compute a satellite position
correction, to be combined with satellite position <sup></sup>calculated
from broadcast ephemeris (see clause 8.1.2.1.7).</p>
<p>NOTE 1: The orbit corrections define an offset between the broadcast
ephemeris orbit and a satellite antenna reference point (ARP) to which
the other corrections refer. The exact definition of the reference point
along the satellite antenna is implementation-defined by the Network and
use of all corrections together shall yield a consistent solution.</p>
<p>NOTE 2: The UE should not apply any additional corrections for the
Satellite Antenna Phase Center (APC) such as Phase Center Offset (PCO)
or Phase Center Variation (PCV) corrections. The Network may form the
SSR corrections to minimise the impact of Satellite APC effects on the
UE.</p>
<p>For integrity purposes, SSR Orbit Corrections also provides the
correlation time for orbit error and orbit error rate, and the mean and
standard deviation that bounds the residual Orbit Error and its
associated error rate. The SSR Orbit Corrections also includes the
satellite and constellation residual risks. These residual risks are the
aggregate residual risk for the satellite or constellation Signal in
Space including Orbit, Clock, Bias and all other satellite or
constellation feared events, but excluding atmospheric effects.</p>
<p>When applying the integrity bounds as per 8.1.1a, the mean and stdDev
must be calculated by projecting the Orbit error mean and variance along
the line-of-sight vector between the satellite and the user, according
to the following formula:</p>
<blockquote>
<p><em>stdDev<sub>orbit</sub> =</em><span class="math inline">\(\sqrt{R\
v \bullet I}\)</span> (Equation 8.1.2.1.21-1)</p>
<p><em>mean<sub>orbit</sub> =</em> <span class="math inline">\(\left|
\left\lbrack R^{T}I \right\rbrack_{AT} \right|.\mu_{AT} + \ \left|
\left\lbrack R^{T}I \right\rbrack_{CT} \right|.\mu_{CT} + \ \left|
\left\lbrack R^{T}I \right\rbrack_{RA} \right|.\mu_{RA}\)</span></p>
</blockquote>
<p>where: <em>I</em>: 3-D line of sight vector from the user to the
satellite in the WGS-84 ECEF coordinate frame.</p>
<blockquote>
<p>R: the rotation matrix from satellite along-track (AT), cross-track
(CT) and radial (RA) coordinates into the WGS-84 ECEF coordinate frame.
R<sup>T</sup> denotes the transposed matrix.</p>
<p><em>v</em>: the 3-D Orbit error variance vector expressed in
satellite along-track, cross-track and radial coordinates.</p>
<p><em></em>: the Mean Orbit Error vector expressed in satellite
along-track, cross-track and radial coordinates.</p>
</blockquote>
<p>The vector v is expressed in the SSR Orbit Corrections as the three
elements in the Variance Orbit Residual Error Vector.</p>
<h5 id="ssr-clock-corrections">8.1.2.1.22 SSR Clock Corrections</h5>
<p>SSR Clock Corrections provides the GNSS receiver with parameters to
compute the GNSS satellite clock correction applied to the broadcast
satellite clock (see clause 8.1.2.1.7). A polynomial of order 2
describes the clock differences for a certain time period: clock offset,
drift, and drift rate.</p>
<p>For integrity purposes, SSR Clock Corrections also provides the
correlation time for clock error and clock error rate, and the mean and
standard deviation that bounds the residual Clock Error and its
associated error rate.</p>
<h5 id="ssr-code-bias">8.1.2.1.23 SSR Code Bias</h5>
<p>SSR Code Bias provides the GNSS receiver with the Code Biases that
must be added to the pseudo range measurements of the corresponding code
signal to get corrected pseudo ranges. SSR Code Bias contains absolute
values, but also enables the alternative use of Differential Code Biases
by setting one of the biases to zero. A UE can consistently use signals
for which a code bias is transmitted. It is not reliable for a UE to use
a signal without retrieving a corresponding code bias from the
assistance data message.</p>
<p>For integrity purposes, SSR Code Bias also provides the mean and
standard deviation that bounds the residual Code Bias Error and its
associated error rate.</p>
<h5 id="ssr-phase-bias">8.1.2.1.24 SSR Phase Bias</h5>
<p>SSR Phase Bias provides the GNSS receiver with the GNSS signal phase
bias that are added to the carrier phase measurements of the
corresponding signal to get corrected phase ranges. An indicator used to
count events when phase bias is discontinuous is provided. An optional
indicator is also provided to indicate whether fixed, widelane fixed or
float PPP-RTK positioning modes are supported on a per signal basis.</p>
<p>NOTE 1: On the UE side, phase bias corrections of appropriate type
are needed to restore the integer nature of the phase ambiguities in
PPP-RTK. Their absence will affect the quality of the positioning
solution and prevent a fast convergence time.</p>
<p>NOTE 2: PPP-RTK Fixed position mode corresponds to the UE fixing the
carrier phase ambiguity to an integer value. The PPP-RTK Widelane Fixed
positioning mode corresponds to forming the widelane combination of
carrier phase measurements and fixing the resulting ambiguity as an
integer value. In PPP-RTK Float positioning mode the carrier phase
ambiguity is not treated as an integer value.</p>
<p>NOTE 3: The SSR Phase Bias values must be consistent with a satellite
yaw angle of zero as per [36].</p>
<p>For integrity purposes, SSR Phase Bias also provides the mean and
standard deviation that bounds the residual Phase Bias Error and its
associated error rate.</p>
<h5 id="ssr-stec-corrections">8.1.2.1.25 SSR STEC Corrections</h5>
<p>SSR STEC Corrections provides the GNSS receiver with the parameters
to compute the ionosphere slant delay correction based on a variable
order polynomial on a per satellite basis and applied to the code and
phase measurements.</p>
<p>For integrity purposes, SSR STEC Corrections also provides the
ionosphere residual risk parameters, correlation time for ionosposphere
range error and range error rate, and the mean and standard deviation
that bounds the residual Ionospheric Error and its associated error
rate.</p>
<h5 id="ssr-gridded-correction">8.1.2.1.26 SSR Gridded Correction</h5>
<p>SSR Gridded Corrections provides the GNSS receiver with STEC
residuals and Troposphere delays at a series of correction points and
expressed as hydrostatic and wet vertical delays.</p>
<p>NOTE: The final ionosphere slant delay (STEC) consists of the
polynomial part provided in SSR STEC Correction and the residual part
provided in SSR Gridded Corrections.</p>
<p>For integrity purposes, SSR Gridded Corrections also provides the
troposphere residual risk parameters, correlation time for troposphere
range error and range error rate, and the mean and standard deviation
that bounds the residual Tropospheric Error and associated its error
rate in the Vertical Hydro Static Delay and Vertical Wet Delay
components.</p>
<h5 id="ssr-ura">8.1.2.1.27 SSR URA</h5>
<p>SSR URA provides the receiver with information about the estimated
accuracy of the corrections for each satellite.</p>
<h5 id="ssr-correction-points">8.1.2.1.28 SSR Correction Points</h5>
<p>The SSR Correction Points provides a list of correction point
coordinates or an array of correction points ("grid") for which the SSR
Gridded Corrections are valid.</p>
<h5 id="integrity-service-parameters">8.1.2.1.29 Integrity Service
Parameters</h5>
<p>Integrity Service Parameters provide the range of Integrity Risk (IR)
for which the associated GNSS integrity assistance data is considered to
be valid.</p>
<h5 id="integrity-alerts">8.1.2.1.30 Integrity Alerts</h5>
<p>Integrity Service Alerts provide information on whether the service
can be used for integrity. A Do Not Use (DNU) flag indicates that the
corresponding assistance data is not suitable for the purpose of
computing integrity. If an Integrity Service Alert is issued and the DNU
flag is false, then the corresponding assistance data may be used for
the purpose of computing integrity. The DNU flags are defined to be
applicable to the specified epoch time only.</p>
<h4
id="a-recommendations-for-grouping-of-assistance-data-to-support-different-rtk-service-levels">8.1.2.1a
Recommendations for grouping of assistance data to support different RTK
service levels</h4>
<p>This clause provides recommendations for the different high-accuracy
GNSS service levels: RTK, N-RTK, PPP and PPP-RTK.</p>
<p>The high-accuracy GNSS methods can be classified as:</p>
<p>- <em>Single base RTK service</em>: RTK is a technique that uses
carrier-based ranging measurements i.e., phase-range to improve the
positioning accuracy in a differential approach. The basic concept is to
reduce and remove errors common to a Reference Station, with known
position, and UE pair. When only pseudo ranges (code-based measurements)
are used to compute the UE location, this method is known as DGNSS
(Differential GNSS).</p>
<p>Table 8.1.2.1a-1: Single base RTK service: Specific information that
may be transferred from the LMF to the UE</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Assistance Data</td>
</tr>
<tr>
<td>RTK Reference Station Information</td>
</tr>
<tr>
<td>RTK Observations</td>
</tr>
<tr>
<td>RTK Common Observation Information</td>
</tr>
<tr>
<td>GLONASS RTK Bias Information (if GLONASS data is transmitted)</td>
</tr>
<tr>
<td>Ephemeris and Clock (if UE did not acquire the navigation
message)</td>
</tr>
</tbody>
</table>
<p>- <em>Non-Physical Reference Station Network RTK service</em>: In
this approach the target UE receives synthetic observations from a
fictitious Reference Station. The Network RTK software at the location
server is performing the error estimation and creates a virtual
Reference Station close to the initial location of the target device
(provided a priori to the location server). The target UE interprets and
uses the data just as if it had come from a single, real Reference
Station. Additionally, the target UE can also receive network
information such as RTK Network Residuals (see clause 8.1.2.1.19) or
even FKP gradients (see clause 8.1.2.1.20).</p>
<p>Table 8.1.2.1a-2: Non-Physical Reference Station Network RTK service:
Specific information that may be transferred from the LMF to the UE</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Assistance Data</td>
</tr>
<tr>
<td>RTK Reference Station Information</td>
</tr>
<tr>
<td>RTK Observations</td>
</tr>
<tr>
<td>RTK Common Observation Information</td>
</tr>
<tr>
<td>GLONASS RTK Bias Information (if GLONASS data is transmitted)</td>
</tr>
<tr>
<td>RTK Residuals</td>
</tr>
<tr>
<td>RTK FKP Gradients</td>
</tr>
<tr>
<td>Ephemeris and Clock (if UE did not acquire the navigation
message)</td>
</tr>
</tbody>
</table>
<p>- <em>MAC Network RTK service</em>: In MAC network RTK, a group of
Reference Stations are used and one of them is chosen as a Master
station. The other stations are then called Auxiliary stations. In this
service, the location server sends full raw observations and coordinate
information for a single Reference Station, the Master Station. For all
auxiliary stations in the network (or a suitable subset of stations) the
information is provided to the UE in a highly compact form: their
reduced ambiguity-levelled observations, coordinate differences (to the
Master Station observations and coordinates), and network residuals. Two
Reference Stations are said to be on a common ambiguity level if the
integer ambiguities for each phase range (satellite-receiver pair) have
been removed (or adjusted) so that the integer ambiguities cancel when
double-differences (involving two receivers and two satellites) are
formed during processing. The maintenance of a common ambiguity level at
a specific set of stations rather than across the whole GNSS network
will lead to a grouping in network clusters or subnetworks of all
ambiguity-levelled Reference Stations. If one network has only one
subnetwork, this indicates that an ambiguity level throughout the whole
network is established. When subnetworks are predefined, the assistance
data can be broadcast to all UEs located in the assigned sub-network.
More details on the usage of subnetworks can be found in [31].</p>
<p>Table 8.1.2.1a-3: MAC Network RTK service: Specific Information that
may be transferred from the LMF to the UE</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Assistance Data</td>
</tr>
<tr>
<td>RTK Reference Station Information</td>
</tr>
<tr>
<td>RTK Auxiliary Station Data</td>
</tr>
<tr>
<td>RTK Observations</td>
</tr>
<tr>
<td>RTK Common Observation Information</td>
</tr>
<tr>
<td>GLONASS RTK Bias Information (if GLONASS data is transmitted)</td>
</tr>
<tr>
<td>RTK MAC Correction Differences</td>
</tr>
<tr>
<td>RTK Residuals</td>
</tr>
<tr>
<td>Ephemeris and Clock (if UE did not acquire the navigation
message)</td>
</tr>
</tbody>
</table>
<p>- <em>FKP Network RTK service</em>: With the concept of FKP,
horizontal gradients of distance-dependent errors like ionosphere,
troposphere and orbits are derived from a network of GNSS Reference
Stations and transmitted to a target device together with raw or
correction data of a corresponding Reference Station (physical or non
physical). The target UE may use the gradients to compute the effect of
the distance-dependent errors for its own position.</p>
<p>Table 8.1.2.1a-4: FKP Network RTK service: Information that may be
transferred from the LMF to the UE</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Assistance Data</td>
</tr>
<tr>
<td>RTK Reference Station Information</td>
</tr>
<tr>
<td>RTK Observations</td>
</tr>
<tr>
<td>RTK Common Observation Information</td>
</tr>
<tr>
<td>GLONASS RTK Bias Information (if GLONASS data is transmitted)</td>
</tr>
<tr>
<td>RTK Residuals</td>
</tr>
<tr>
<td>RTK FKP Gradients</td>
</tr>
<tr>
<td>Ephemeris and Clock (if UE did not acquire the navigation
message)</td>
</tr>
</tbody>
</table>
<p>- <em>PPP service</em>: This concept uses precise satellite orbit and
clock parameters derived from global networks of Reference Stations as
well as atmospheric models to perform single station positioning [31].
Compared to RTK and Network RTK, PPP is not a differential technique as
there is no baseline limitation. When the orbits and clocks assistance
data elements are provided in real-time, with no latency, the method is
called Real-Time PPP.</p>
<p>Table 8.1.2.1a-5: SSR PPP service: Information that may be
transferred from the LMF to the UE</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Assistance Data</td>
</tr>
<tr>
<td>SSR Orbit Corrections</td>
</tr>
<tr>
<td>SSR Clock corrections</td>
</tr>
<tr>
<td>SSR Code Bias</td>
</tr>
<tr>
<td>Ephemeris and Clock (if UE did not acquire the navigation
message)</td>
</tr>
</tbody>
</table>
<p>- <em>PPP-RTK service</em>: This concept uses precise satellite
orbits and clock parameters, the satellite signal biases derived from
global networks of Reference Stations as well as ionosphere and
troposphere corrections to perform single station positioning
IS-QZSS-L6-001 [36]. Therefore, PPP-RTK services compensate the global
and local corrections for a more accurate location information. Compared
to PPP, PPP-RTK requires the UE to be located within the region covered
by the ionosphere and troposphere corrections.</p>
<p>Table 8.1.2.1a-6: SSR PPP-RTK service: Information that may be
transferred from the LMF to the UE</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Assistance Data</td>
</tr>
<tr>
<td>SSR Orbit Corrections</td>
</tr>
<tr>
<td>SSR Clock corrections</td>
</tr>
<tr>
<td>SSR Code Bias</td>
</tr>
<tr>
<td>Ephemeris and Clock (if UE did not acquire the navigation
message)</td>
</tr>
<tr>
<td>SSR Phase Bias</td>
</tr>
<tr>
<td>SSR STEC Corrections</td>
</tr>
<tr>
<td>SSR Gridded Correction</td>
</tr>
<tr>
<td>SSR URA</td>
</tr>
<tr>
<td>SSR Correction Points</td>
</tr>
</tbody>
</table>
<h4 id="b-mapping-of-integrity-parameters">8.1.2.1b Mapping of integrity
parameters</h4>
<p>Table 8.1.2.1b-1 shows the mapping between the integrity fields and
the SSR assistance data according to the Integrity Principle of
Operation (Clause 8.1.1a). The corresponding field descriptions for each
of the field names listed in Table 8.1.2.1b-1 are specified under Clause
6.5.2.2 of TS 37.355 [42].</p>
<p>Table 8.1.2.1b-1: Mapping of Integrity Parameters</p>
<table style="width:100%;">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 13%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr>
<th rowspan="2">Error</th>
<th rowspan="2">GNSS Assistance Data</th>
<th colspan="5">Integrity Fields</th>
</tr>
<tr>
<th>Integrity Alerts</th>
<th>Integrity Bounds (Mean)</th>
<th>Integrity Bounds (StdDev)</th>
<th>Residual Risks</th>
<th>Integrity Correlation Times</th>
</tr>
</thead>
<tbody>
<tr>
<td>Orbit</td>
<td>SSR Orbit Corrections</td>
<td rowspan="4"><p>Real-Time Integrity</p>
<p>(see Clause 8.1.2.1.8)</p></td>
<td><p>Mean Orbit Error</p>
<p>Mean Orbit Rate Error</p>
<p>(Calculated according to Equation 8.1.2.1.21-1)</p></td>
<td><p>Standard Deviation Orbit Error</p>
<p>Standard Deviation Orbit Rate Error</p>
<p>(Calculated according to Equation 8.1.2.1.21-1)</p></td>
<td rowspan="4"><p>Probability of Onset of Constellation Fault</p>
<p>Probability of Onset of Satellite Fault</p>
<p>Mean Constellation Fault Duration</p>
<p>Mean Satellite Fault Duration</p></td>
<td><p>Orbit Range Error Correlation Time</p>
<p>Orbit Range Rate Error Correlation Time</p></td>
</tr>
<tr>
<td>Clock</td>
<td>SSR Clock Corrections</td>
<td><p>Mean Clock Error</p>
<p>Mean Clock Rate Error</p></td>
<td><p>Standard Deviation Clock Error</p>
<p>Standard Deviation Clock Rate Error</p></td>
<td><p>Clock Range Error Correlation Time</p>
<p>Clock Range Rate Error Correlation Time</p></td>
</tr>
<tr>
<td>Code Bias</td>
<td>SSR Code Bias</td>
<td><p>Mean Code Bias Error</p>
<p>Mean Code Bias Rate Error</p></td>
<td><p>Standard Deviation Code Bias Error</p>
<p>Standard Deviation Code Bias Rate Error</p></td>
<td rowspan="2"></td>
</tr>
<tr>
<td>Phase Bias</td>
<td>SSR Phase Bias</td>
<td><p>Mean Phase Bias Error</p>
<p>Mean Phase Bias Rate Error</p></td>
<td><p>Standard Deviation Phase Bias Error</p>
<p>Standard Deviation Phase Bias Rate Error</p></td>
</tr>
<tr>
<td>Ionosphere</td>
<td>SSR STEC Correction</td>
<td>Ionosphere DNU</td>
<td><p>Mean Ionospherre Error</p>
<p>Mean Ionospherre Rate Error</p></td>
<td><p>Standard Deviation Ionosphere Error</p>
<p>Standard Deviation Ionosphere Rate Error</p></td>
<td><p>Probability of Onset of Ionosphere Fault</p>
<p>Mean Ionosphere Fault Duration</p></td>
<td><p>Ionosphere Range Error Correlation Time</p>
<p>Ionosphere Range Rate Error Correlation Time</p></td>
</tr>
<tr>
<td>Troposphere Vertical Hydro Static Delay</td>
<td rowspan="2">SSR Gridded Corrections</td>
<td rowspan="2">Troposphere DNU</td>
<td><p>Mean Troposphere Vertical Hydro Static Delay Error</p>
<p>Mean Troposphere Vertical Hydro Static Delay Rate Error</p></td>
<td><p>Standard Deviation Troposphere Vertical Hydro Static Delay
Error</p>
<p>Standard Deviation Troposphere Vertical Hydro Static Delay Rate
Error</p></td>
<td rowspan="2"><p>Probability of Onset of Troposphere Fault</p>
<p>Mean Troposphere Fault Duration</p></td>
<td rowspan="2"><p>Troposphere Range Error Correlation Time</p>
<p>Troposphere Range Rate Error Correlation Time</p></td>
</tr>
<tr>
<td>TroposphereVertical WetDelay</td>
<td><p>Mean Troposphere Vertical Wet Delay Error</p>
<p>Mean Troposphere Vertical Wet Delay Rate Error</p></td>
<td><p>Standard Deviation Troposphere Vertical Wet Delay Error</p>
<p>Standard Deviation Troposphere Vertical Wet Delay Rate Error</p></td>
</tr>
</tbody>
</table>
<h4 id="information-that-may-be-transferred-from-the-ue-to-lmf">8.1.2.2
Information that may be transferred from the UE to LMF</h4>
<p>The information that may be signalled from UE to the LMF is listed in
table 8.1.2.2-1.</p>
<p>Table 8.1.2.2-1: Information that may be transferred from UE to the
LMF</p>
<table>
<colgroup>
<col style="width: 66%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>UEassisted</td>
<td>UEbased/standalone</td>
</tr>
<tr>
<td>Latitude/Longitude/Altitude, together with uncertainty shape</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Velocity, together with uncertainty shape</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Reference Time, possibly together with GNSS to NG-RAN time
association and uncertainty</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Indication of used positioning methods in the fix</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Code phase measurements, also called pseudorange</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Doppler measurements</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Carrier phase measurements, also called Accumulated Delta Range
(ADR)</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Carrier-to-noise ratio of the received signal</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Measurement quality parameters for each measurement</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Additional, non-GNSS related measurement information</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Protection Level, optionally together with achievable Target
Integrity Risk</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h5 id="gnss-measurement-information">8.1.2.2.1 GNSS Measurement
Information</h5>
<p>The GNSS measurement information reported from the UE to the LMF
depends on the GNSS mode (i.e., UE-based, autonomous (standalone), or
UE-assisted).</p>
<h6 id="ue-based-mode">8.1.2.2.1.1 UE-based mode</h6>
<p>In UE-based or standalone mode, the GNSS receiver reports the
latitude, longitude and possibly altitude, together with an estimate of
the location uncertainty, if available.</p>
<p>If requested by the LMF and supported by the UE, the GNSS receiver
may report its velocity, possibly together with an estimate of the
uncertainty, if available.</p>
<p>If requested by the LMF and supported by the UE, the GNSS receiver
may report the relation between GNSS system time (where the specific
GNSS is indicated by a GNSS ID; the specific GNSS system time may be
selected by the UE) and NG-RAN air-interface timing. This information
may be used by the LMF to assist other UEs in the network.</p>
<p>The UE should also report an indication of which GNSSs and possibly
other location methods have been used to calculate a fix.</p>
<h6 id="ue-assisted-mode">8.1.2.2.1.2 UE-assisted mode</h6>
<p>In UE-assisted mode, the GNSS receiver reports the Code Phase and
Doppler measurements together with associated quality estimates. These
measurements enable the LMF to calculate the location of the UE,
possibly using other measurements and data.</p>
<p>If requested by the LMF and supported by the UE, the GNSS receiver
may report Carrier Phase measurements (also called Accumulated Delta
Range), together with associated quality measurements, if available.</p>
<p>If requested by the LMF and supported by the UE, the GNSS receiver
may report the relation between GNSS system time (where the specific
GNSS is indicated by a GNSS ID; the specific GNSS system time may be
selected by the UE) and NG-RAN air-interface timing. This information
may be used by the LMF to assist other UEs in the network.</p>
<h5 id="additional-non-gnss-related-information">8.1.2.2.2 Additional
Non-GNSS Related Information</h5>
<p>Additional non-GNSS measurements performed by NG-RAN or UE may be
used by the LMF or UE to calculate or verify a location estimate. This
information may include OTDOA positioning measurements, pathloss and
signal strength related measurements, etc.</p>
<h3 id="assisted-gnss-positioning-procedures">8.1.3 Assisted-GNSS
Positioning Procedures</h3>
<h4 id="capability-transfer-procedure">8.1.3.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure for Assisted-GNSS positioning is
described in clause 7.1.2.1.</p>
<h4 id="assistance-data-transfer-procedure">8.1.3.2 Assistance Data
Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to provide
assistance data to the UE (e.g., as part of a positioning procedure) and
the UE to request assistance data from the LMF (e.g., as part of a
positioning procedure). In the case of high-accuracy GNSS positioning
techniques (e.g., RTK), the LMF can provide unsolicited periodic
assistance data to the UE and the UE can request periodic assistance
data from the LMF.</p>
<h5 id="lmf-initiated-assistance-data-delivery">8.1.3.2.1 LMF initiated
Assistance Data Delivery</h5>
<p>Figure 8.1.3.2.1-1 shows the Assistance Data Delivery operations for
the network-assisted GNSS method when the procedure is initiated by the
LMF.</p>
<p><img src="media/image28.svg" /></p>
<p>Figure 8.1.3.2.1-1: LMF-initiated Assistance Data Delivery
Procedure</p>
<blockquote>
<p>(1) The LMF determines that assistance data needs to be provided to
the UE (e.g., as part of a positioning procedure) and sends an LPP
Provide Assistance Data message to the UE. This message may include any
of the GNSS assistance data defined in clause 8.1.2.1.</p>
</blockquote>
<h5 id="a-lmf-initiated-periodic-assistance-data-delivery">8.1.3.2.1a
LMF initiated Periodic Assistance Data Delivery</h5>
<p>The Periodic Assistance Data Delivery procedure allows the server to
provide unsolicited periodic assistance data to the target and is shown
in Figure 8.1.3.2.1a-1.</p>
<p>NOTE: In this version of the specification, periodic assistance data
delivery is supported for HA GNSS (e.g., RTK) positioning only.</p>
<p><img src="media/image29.svg" /></p>
<p>Figure 8.1.3.2.1a-1: LPP Periodic Assistance data delivery
procedure</p>
<p>(1) The LMF determines that assistance data needs to be provided to
the UE and sends an LPP Provide Assistance Data message to the UE. This
message includes information to identify the type of periodic assistance
data and a duration for ending the assistance data delivery. The message
indicates the end of the control transaction.</p>
<p>(2) When the first periodic message is available, the LMF sends an
unsolicited LPP Provide Assistance Data message to the UE containing the
periodic assistance data announced in step (1).</p>
<p>(3) The LMF may continue to send further LPP Provide Assistance Data
messages to the target containing the periodic assistance data announced
in step (1) when each additional periodicity condition occurs. When the
duration for ending the periodic assistance data transfer occurs, the
last LPP Provide Assistance Data message transferred indicates the end
of transaction. Additionally, the session can be ended on request by the
UE or by the LMF with the help of an Abort message.</p>
<h5 id="ue-initiated-assistance-data-transfer">8.1.3.2.2 UE initiated
Assistance Data Transfer</h5>
<p>Figure 8.1.3.2.2-1 shows the Assistance Data Transfer operations for
the network-assisted GNSS method when the procedure is initiated by the
UE.</p>
<p><img src="media/image30.svg" /></p>
<p>Figure 8.1.3.2.2-1: UE-initiated Assistance Data Transfer
Procedure</p>
<p>(1) The UE determines that certain A-GNSS assistance data are desired
(e.g., as part of a positioning procedure when the LMF provided
assistance data are not sufficient for the UE to fulfil the request) and
sends a LPP Request Assistance Data message to the LMF. This request
includes an indication of which specific A-GNSS assistance data are
requested for each GNSS, possibly together with additional information
(e.g., for which GNSS signal types, or satellites, or times the
assistance is requested, etc.). Additional information concerning the
UE's approximate location and serving and neighbour cells may also be
provided in the Request Assistance Data message and/or in an
accompanying Provide Location Information message to help the LMF
provide appropriate assistance data. This additional data may include
the UE's last known location if available, the cell IDs of the UE
serving NG-RAN node and possibly neighbour NG-RAN nodes, as well as
E-UTRA E-CID measurements.</p>
<p>(2) The LMF provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the LMF. The entire set of
assistance data may be delivered in one or several LPP messages, e.g.,
one message per GNSS. In this case, this step may be repeated by the LMF
several times. If any of the UE requested assistance data in step (1)
are not provided in step 2, the UE shall assume that the requested
assistance data are not supported, or currently not available at the
LMF. If none of the UE requested assistance data in step (1) can be
provided by the LMF, return any information that can be provided in an
LPP message of type Provide Assistance Data which includes a cause
indication for the not provided assistance data.</p>
<h5 id="a-ue-initiated-periodic-assistance-data-transfer">8.1.3.2.2a UE
initiated Periodic Assistance Data Transfer</h5>
<p>Figure 8.1.3.2.2a-1 shows the Periodic Assistance Data Transfer
operations for the high-accuracy GNSS methods (e.g., RTK) when the
procedure is initiated by the UE.</p>
<p>NOTE: In this version of the specification, periodic assistance data
transfer is supported for HA GNSS (e.g., RTK) positioning only.</p>
<p><img src="media/image31.svg" /></p>
<p>Figure 8.1.3.2.2a-1: UE-initiated Periodic Assistance Data Transfer
Procedure</p>
<p>(1) The UE determines that periodic assistance data are desired and
sends a LPP Request Assistance Data message to the LMF. This request
includes an indication of which specific assistance data are requested
together with additional information such as desired periodicity for
sending the assistance data and a duration for ending the periodic
assistance data delivery session.</p>
<p>(2) The LMF responds with a LPP Provide Assistance Data message to
the UE. If the UE request can be supported, the message contains
information which may confirm or redefine the type of assistance data or
periodicity parameters requested at step (1). This response indicates
the end of the control transaction.</p>
<p>(3) When available, the LMF provides the requested assistance data in
a LPP Provide Assistance Data message to the UE. If any of the requested
assistance data in step (1) or redefined in step (2) are not provided
the UE assumes that the requested assistance data are not supported, or
currently not available at the LMF.</p>
<p>(4) The LMF may transmit one or more additional LPP Provide
Assistance Data messages to the UE containing further periodic
assistance data confirmed or redefined in step (2). When the duration
for ending the periodic assistance data transfer occur, the last LPP
Provide Assistance Data message transferred indicates the end of the
transaction. Additionally, the periodic assistance data delivery session
can be ended on request by the UE or by the LMF with the help of an
Abort message.</p>
<h4 id="location-information-transfer-procedure">8.1.3.3 Location
Information Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
position measurements or location estimate from the UE, or to enable the
UE to provide location measurements to the LMF for position
calculation.</p>
<h5 id="lmf-initiated-location-information-transfer-procedure">8.1.3.3.1
LMF initiated Location Information Transfer Procedure</h5>
<p>Figure 8.1.3.3.1-1 shows the Location Information Transfer operations
for the network-assisted GNSS method when the procedure is initiated by
the LMF.</p>
<p><img src="media/image32.svg" /></p>
<p>Figure 8.1.3.3.1-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends a LPP Request Location Information message to the
UE for invocation of A-GNSS positioning. This request includes
positioning instructions such as the GNSS mode (UE-assisted, UE-based,
UE-based preferred but UE-assisted allowed, UE-assisted preferred, but
UE-based allowed, standalone), positioning methods (GPS, Galileo,
GLONASS, BDS, NavIC, etc. and possibly non-GNSS methods, such as OTDOA
positioning or E-CID positioning), specific UE measurements requested if
any, such as fine time assistance measurements, velocity, carrier phase,
multi-frequency measurements, quality of service parameters (accuracy,
response time), and possibly integrity requirements.</p>
<p>(2) The UE performs the requested measurements and possibly
calculates its own location. The UE may also determine the integrity
results of the calculated location. The UE sends an LPP Provide Location
Information message to the LMF before the Response Time provided in step
(1) elapsed. If the UE is unable to perform the requested measurements,
or if the Response Time provided in step 1 elapsed before any of the
requested measurements have been obtained, the UE returns any
information that can be provided in an LPP message of type Provide
Location Information which includes a cause indication for the not
provided location information.</p>
<h5 id="ue-initiated-location-information-delivery-procedure">8.1.3.3.2
UE-initiated Location Information Delivery Procedure</h5>
<p>Figure 8.1.3.3.2-1 shows the Location Information delivery operations
for the UE-assisted GNSS method when the procedure is initiated by the
UE.</p>
<p><img src="media/image33.svg" /></p>
<p>Figure 8.1.3.3.2-1: UE-initiated Location Information Delivery
Procedure</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include any UE
measurements (GNSS pseudo-ranges, carrier phase-ranges, and other
measurements) already available at the UE.</p>
<h2 id="otdoa-positioning-1">8.2 OTDOA positioning</h2>
<h3 id="general-6">8.2.1 General</h3>
<p>In this version of the specification, only OTDOA based on LTE signals
is supported.</p>
<p>In the OTDOA positioning method, the UE position is estimated based
on measurements taken at the UE of downlink radio signals from multiple
E-UTRA TPs (possibly including PRS-only E-UTRA TPs from a PRS-based
TBS), along with knowledge of the geographical coordinates of the
measured TPs and their relative downlink timing.</p>
<p>The UE while connected to a gNB may require measurement gaps to
perform the OTDOA measurements from E-UTRA TPs. The UE may request
measurement gaps from a gNB using the procedure described in clause
7.4.1.1. If the UE is not aware of the SFN of at least one E-UTRA TP in
the OTDOA assistance data, the UE may use autonomous gaps to acquire SFN
of the E-UTRA OTDOA reference cell prior to requesting measurement gaps
for performing the requested E-UTRA RSTD measurements.</p>
<p>The UE while connected to a ng-eNB may require measurement gaps to
perform inter-frequency RSTD measurements for OTDOA from E-UTRA TPs (see
TS 38.133 [32]). The UE may request measurement gaps from a ng-eNB using
the procedure described in clause 7.4.2.1.</p>
<p>The specific positioning techniques used to estimate the UE's
location from this information are beyond the scope of this
specification.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-1">8.2.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and UE/ng-eNB.</p>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-ue-1">8.2.2.1
Information that may be transferred from the LMF to UE</h4>
<p>The following assistance data may be transferred from the LMF to the
UE:</p>
<p>- Physical cell IDs (PCIs), global cell IDs (GCIs), and TP IDs of
candidate E-UTRA TPs for measurement;</p>
<p>- Timing relative to the reference E-UTRA TP of candidate E-UTRA
TPs;</p>
<p>- PRS configuration of candidate E-UTRA TPs;</p>
<p>- If known, the SFN timing offset between the serving NR cell and the
E-UTRA assistance data reference cell.</p>
<p>NOTE: The LMF can provide the UE with a list of E-UTRA TP candidates
for measurement, even if the LMF does not know the SFN or frame timing
of the E-UTRA TPs.</p>
<h4
id="information-that-may-be-transferred-from-the-ng-enb-to-lmf">8.2.2.2
Information that may be transferred from the ng-eNB to LMF</h4>
<p>The following assistance data may be transferred from the ng-eNB to
the LMF:</p>
<p>- PCI, GCI, and TP IDs of the TPs served by the ng-eNB;</p>
<p>- Timing information of TPs served by the ng-eNB;</p>
<p>- PRS configuration of the TPs served by the ng-eNB;</p>
<p>- Geographical coordinates of the TPs served by the ng-eNB.</p>
<p>An ng-eNB may provide assistance data relating only to itself and
served TPs via NRPPa signalling, although assistance data from several
ng-eNBs and served TPs may be acquired through other mechanisms, see
NOTE below.</p>
<p>NOTE: The assistance data described in this clause are not
necessarily transferred only from the ng-eNB, and in some deployment
options may not be delivered from the ng-eNB at all; they may also be
delivered to the LMF through OAM or other mechanisms external to the
NG-RAN. In addition, in cases where assistance data are delivered from
the ng-eNB, how the ng-eNB acquires the data is outside the scope of
this specification.</p>
<h4
id="information-that-may-be-transferred-from-the-ue-to-lmf-1">8.2.2.3
Information that may be transferred from the UE to LMF</h4>
<p>The information that may be signalled from UE to the LMF is listed in
Table 8.2.2.3-1. The individual UE measurements are defined in TS 36.214
[17].</p>
<p>Table 8.2.2.3-1: Information that may be transferred from UE to the
LMF</p>
<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 52%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>Measurements</td>
</tr>
<tr>
<td rowspan="4">Downlink Measurement Results List for EUTRA TPs</td>
<td>Physical cell IDs</td>
</tr>
<tr>
<td>Global cell IDs</td>
</tr>
<tr>
<td>TP IDs</td>
</tr>
<tr>
<td>Downlink timing measurements</td>
</tr>
<tr>
<td>Information used to compute a reference time corresponding to the
downlink timing measurements to allow correlation of downlink timing
measurements with motion information independently obtained from motion
sensors</td>
<td>Delta SFN for each E-UTRA neighbour cell</td>
</tr>
</tbody>
</table>
<h4 id="information-that-may-be-transferred-from-the-gnb-to-lmf">8.2.2.4
Information that may be transferred from the gNB to LMF</h4>
<p>The following assistance data may be transferred from the gNB to the
LMF:</p>
<p>- NR CGI and timing information of the cells served by the gNB;</p>
<p>- Geographical coordinates of the access points associated with each
cell served by the gNB.</p>
<h3 id="otdoa-positioning-procedures">8.2.3 OTDOA Positioning
Procedures</h3>
<p>The procedures described in this clause support OTDOA positioning
measurements obtained by the UE and provided to the LMF using LPP.</p>
<p>In this version of the specification only the UE-assisted OTDOA
positioning is supported.</p>
<h4 id="capability-transfer-procedure-1">8.2.3.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure for OTDOA positioning is described
in clause 7.1.2.1.</p>
<h4 id="assistance-data-transfer-procedure-1">8.2.3.2 Assistance Data
Transfer Procedure</h4>
<h5 id="assistance-data-transfer-between-lmf-and-ue">8.2.3.2.1
Assistance Data Transfer between LMF and UE</h5>
<p>The purpose of this procedure is to enable the LMF to provide
assistance data to the UE (e.g., as part of a positioning procedure) and
the UE to request assistance data from the LMF (e.g., as part of a
positioning procedure).</p>
<h6 id="lmf-initiated-assistance-data-delivery-1">8.2.3.2.1.1 LMF
initiated Assistance Data Delivery</h6>
<p>Figure 8.2.3.2.1.1-1 shows the Assistance Data Delivery operations
for the OTDOA positioning method when the procedure is initiated by the
LMF.</p>
<p><img src="media/image34.svg" /></p>
<p>Figure 8.2.3.2.1.1-1: LMF-initiated Assistance Data Delivery
Procedure</p>
<p>(1) The LMF determines that assistance data needs to be provided to
the UE (e.g., as part of a positioning procedure) and sends an LPP
Provide Assistance Data message to the UE. This message may include any
of the OTDOA positioning assistance data defined in clause 8.2.2.1.</p>
<h6 id="ue-initiated-assistance-data-transfer-1">8.2.3.2.1.2 UE
initiated Assistance Data Transfer</h6>
<p>Figure 8.2.3.2.1.2-1 shows the Assistance Data Transfer operations
for the OTDOA positioning method when the procedure is initiated by the
UE.</p>
<p><img src="media/image35.svg" /></p>
<p>Figure 8.2.3.2.1.2-1: UE-initiated Assistance Data Transfer
Procedure</p>
<p>(1) The UE determines that certain OTDOA positioning assistance data
are desired (e.g., as part of a positioning procedure when the LMF
provided assistance data are not sufficient for the UE to fulfil the
request) and sends an LPP Request Assistance Data message to the LMF.
This request includes an indication of which specific OTDOA assistance
data are requested. Additional information concerning the UE's
approximate location and serving and neighbour cells may also be
provided in the Request Assistance Data message and/or in an
accompanying Provide Location Information message to help the LMF
provide appropriate assistance data. This additional data may include
the UE's last known location if available, the cell IDs of the UE
serving NG-RAN node and possibly neighbour NG-RAN nodes, as well as
E-UTRA E-CID measurements.</p>
<p>(2) The LMF provides the requested assistance in an LPP Provide
Assistance Data message, if available at the LMF. If any of the UE
requested assistance data in step (1) are not provided in step 2, the UE
shall assume that the requested assistance data are not supported, or
currently not available at the LMF. If none of the UE requested
assistance data in step (1) can be provided by the LMF, return any
information that can be provided in an LPP message of type Provide
Assistance Data which includes a cause indication for the not provided
assistance data.</p>
<h5 id="assistance-data-delivery-between-lmf-and-ng-ran-node">8.2.3.2.2
Assistance Data Delivery between LMF and NG-RAN node</h5>
<p>The purpose of this procedure is to enable the NG-RAN node to provide
assistance data to the LMF, for subsequent delivery to the UE using the
procedures of clause 8.2.3.2.1 or for use in the calculation of
positioning estimates at the LMF.</p>
<h6 id="lmf-initiated-assistance-data-delivery-to-the-lmf">8.2.3.2.2.1
LMF-initiated assistance data delivery to the LMF</h6>
<p>Figure 8.2.3.2.2.1-1 shows the Assistance Data Delivery operation
from the NG-RAN node to the LMF for the OTDOA positioning method, in the
case that the procedure is initiated by the LMF.</p>
<p><img src="media/image36.svg" /></p>
<p>Figure 8.2.3.2.2.1-1: LMF-initiated Assistance Data Delivery
Procedure</p>
<p>(1) The LMF determines that certain OTDOA positioning assistance data
are desired (e.g., as part of a periodic update or as triggered by OAM)
and sends an NRPPa OTDOA INFORMATION REQUEST message to the NG-RAN node.
This request includes an indication of which specific OTDOA assistance
data are requested.</p>
<p>(2) The NG-RAN node provides the requested assistance in an NRPPa
OTDOA INFORMATION RESPONSE message, if available at the NG-RAN node. If
the NG-RAN node is not able to provide any information, it returns an
OTDOA INFORMATION FAILURE message indicating the cause of the
failure.</p>
<h4 id="location-information-transfer-procedure-1">8.2.3.3 Location
Information Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
position measurements from the UE, or to enable the UE to provide
location measurements to the LMF for position calculation.</p>
<h5
id="lmf-initiated-location-information-transfer-procedure-1">8.2.3.3.1
LMF-initiated Location Information Transfer Procedure</h5>
<p>Figure 8.2.3.3.1-1 shows the Location Information Transfer operations
for the OTDOA positioning method when the procedure is initiated by the
LMF.</p>
<p><img src="media/image32.svg" /></p>
<p>Figure 8.2.3.3.1-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends an LPP Request Location Information message to the
UE. This request includes indication of OTDOA measurements requested,
including any needed measurement configuration information, and required
response time.</p>
<p>(2) The UE obtains OTDOA measurements as requested in step 1. The UE
then sends an LPP Provide Location Information message to the LMF,
before the Response Time provided in step (1) elapsed, and includes the
obtained OTDOA measurements. If the UE is unable to perform the
requested measurements, or the Response Time elapsed before any of the
requested measurements were obtained, the UE returns any information
that can be provided in an LPP message of type Provide Location
Information which includes a cause indication for the not provided
location information.</p>
<h5
id="ue-initiated-location-information-delivery-procedure-1">8.2.3.3.2
UE-initiated Location Information Delivery procedure</h5>
<p>Figure 8.2.3.3.2-1 shows the Location Information Delivery procedure
operations for the OTDOA positioning method when the procedure is
initiated by the UE.</p>
<p><img src="media/image33.svg" /></p>
<p>Figure 8.2.3.3.2-1: UE-initiated Location Information Delivery
Procedure.</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include any UE OTDOA
measurements already available at the UE.</p>
<h2 id="enhanced-cell-id-positioning-methods">8.3 Enhanced cell ID
positioning methods</h2>
<h3 id="general-7">8.3.1 General</h3>
<p>In the Cell ID (CID) positioning method, the UE position is estimated
with the knowledge of the geographical coordinates of its serving ng-eNB
or gNB.</p>
<p>Enhanced Cell ID (E-CID) based on LTE signals positioning refers to
techniques which use UE and/or NG-RAN radio resource related
measurements to improve the UE location estimate. In the case of a
serving ng-eNB, uplink E-CID may use inter-RAT NR, GERAN, UTRA or WLAN
measurements reported by UE.</p>
<p>NOTE 1: For E-CID positioning methods the UE reports only the
measurements that it has available rather than being required to take
additional measurement actions. Therefore, the measurement gap request
procedure described in clause 7.4.1.1 is not applicable for E-CID
positioning methods.</p>
<p>E-CID measurements for E-UTRA may include [17, 18]:</p>
<p>UE measurements (TS 36.214 [17], TS 36.302 [18]):</p>
<p>- E-UTRA Reference signal received power (RSRP);</p>
<p>- E-UTRA Reference Signal Received Quality (RSRQ);</p>
<p>- UE E-UTRA Rx  Tx time difference;</p>
<p>E-CID UE measurements for other RAT may include:</p>
<p>- GERAN RSSI;</p>
<p>- UTRAN CPICH RSCP;</p>
<p>- UTRAN CPICH Ec/Io;</p>
<p>- WLAN RSSI.</p>
<p>- SS Reference signal received power (SS-RSRP);</p>
<p>- SS Reference Signal Received Quality (SS-RSRQ);</p>
<p>NOTE 2: The above GERAN, UTRAN, WLAN and NR measurements by UE are
only used for Uplink E-CID positioning.</p>
<p>ng-eNB measurements (TS 36.214 [17], TS 36.302 [18]):</p>
<p>- ng-eNB Rx  Tx time difference;</p>
<p>- Timing Advance (T<sub>ADV</sub>):</p>
<p>- Type1: T<sub>ADV</sub> = (ng-eNB Rx  Tx time difference) + (UE
E-UTRA Rx  Tx time difference);</p>
<p>- Type2: T<sub>ADV</sub> = ng-eNB Rx  Tx time difference;</p>
<p>- Angle of Arrival (AoA).</p>
<p>Various techniques exist to use these measurements to estimate the
location of the UE. The specific techniques are beyond the scope of this
specification.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-2">8.3.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and UE/NG-RAN node.</p>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-ue-2">8.3.2.1
Information that may be transferred from the LMF to UE</h4>
<p>UE-assisted Enhanced Cell-ID location does not require any assistance
data to be transferred from the LMF to the UE.</p>
<p>UE-Based Enhanced Cell-ID location is not supported in this version
of the specification.</p>
<h4
id="information-that-may-be-transferred-from-the-ng-enb-to-lmf-1">8.3.2.2
Information that may be transferred from the ng-eNB to LMF</h4>
<p>The information that may be signalled from ng-eNB to the LMF is
listed in table 8.3.2.2-1.</p>
<p>Table 8.3.2.2-1: Information that may be transferred from ng-eNB to
the LMF</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr>
<td colspan="2">Information</td>
</tr>
<tr>
<td colspan="2">Timing Advance (T<sub>ADV</sub>)</td>
</tr>
<tr>
<td colspan="2">Angle of Arrival (AoA)</td>
</tr>
<tr>
<td colspan="2">E-UTRA Measurement Results List:</td>
</tr>
<tr>
<td></td>
<td>- Evolved Cell Global Identifier (ECGI)/Physical Cell ID</td>
</tr>
<tr>
<td></td>
<td>- E-UTRA Reference signal received power (RSRP)</td>
</tr>
<tr>
<td></td>
<td>- E-UTRA Reference Signal Received Quality (RSRQ)</td>
</tr>
<tr>
<td colspan="2">GERAN Measurement Results List:</td>
</tr>
<tr>
<td></td>
<td>- Base Station Identity Code (BSIC)</td>
</tr>
<tr>
<td></td>
<td>- ARFCN of Base Station Control Channel (BCCH)</td>
</tr>
<tr>
<td></td>
<td>- Received Signal Strength Indicator (RSSI)</td>
</tr>
<tr>
<td colspan="2">UTRA Measurement Results List:</td>
</tr>
<tr>
<td></td>
<td>- UTRAN Physical ID</td>
</tr>
<tr>
<td></td>
<td>- Common Pilot Channel Received Signal Code Power (RSCP)</td>
</tr>
<tr>
<td></td>
<td>- Common Pilot Channel Ec/Io</td>
</tr>
<tr>
<td colspan="2">WLAN Measurement Results List:</td>
</tr>
<tr>
<td></td>
<td>- WLAN Received Signal Strength Indicator (RSSI)</td>
</tr>
<tr>
<td></td>
<td>- SSID</td>
</tr>
<tr>
<td></td>
<td>- BSSID</td>
</tr>
<tr>
<td></td>
<td>- HESSID</td>
</tr>
<tr>
<td></td>
<td>- Operating Class</td>
</tr>
<tr>
<td></td>
<td>- Country Code</td>
</tr>
<tr>
<td></td>
<td>- WLAN Channel(s)</td>
</tr>
<tr>
<td></td>
<td>- WLAN Band</td>
</tr>
<tr>
<td colspan="2">NR Measurement Results List:</td>
</tr>
<tr>
<td></td>
<td>- SS Reference Signal Received Power (SS-RSRP)</td>
</tr>
<tr>
<td></td>
<td>- SS Reference Signal Received Quality (SS-RSRQ)</td>
</tr>
<tr>
<td></td>
<td>- NR Physical Cell ID</td>
</tr>
</tbody>
</table>
<p>Both cell-level and beam-level measurements for SS-RSRP and SS-RSRQ
are supported.</p>
<h4
id="information-that-may-be-transferred-from-the-gnb-to-lmf-1">8.3.2.3
Information that may be transferred from the gNB to LMF</h4>
<p>The information that may be signalled from gNB to the LMF is listed
in table 8.3.2.3-1.</p>
<p>Table 8.3.2.3-1: Information that may be transferred from gNB to the
LMF</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr>
<td colspan="2">Information</td>
</tr>
<tr>
<td colspan="2">NR Measurement Results List:</td>
</tr>
<tr>
<td></td>
<td>- Cell Global Identifier /Physical Cell ID</td>
</tr>
<tr>
<td></td>
<td>- Cell Portion ID</td>
</tr>
</tbody>
</table>
<h4
id="information-that-may-be-transferred-from-the-ue-to-lmf-2">8.3.2.4
Information that may be transferred from the UE to LMF</h4>
<p>The information that may be signalled from UE to the LMF is listed in
table 8.3.2.4-1.</p>
<p>Table 8.3.2.4-1: Information that may be transferred from UE to the
LMF</p>
<table>
<colgroup>
<col style="width: 80%" />
<col style="width: 19%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>UEassisted</td>
</tr>
<tr>
<td>Evolved Cell Global Identifier (ECGI)/Physical Cell ID</td>
<td>Yes</td>
</tr>
<tr>
<td>E-UTRA Reference signal received power (RSRP)</td>
<td>Yes</td>
</tr>
<tr>
<td>E-UTRA Reference Signal Received Quality (RSRQ)</td>
<td>Yes</td>
</tr>
<tr>
<td>UE E-UTRA Rx  Tx time difference</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h3 id="downlink-e-cid-positioning-procedures">8.3.3 Downlink E-CID
Positioning Procedures</h3>
<p>The procedures described in this clause support E-CID related
measurements obtained by the UE and provided to the LMF using LPP. The
term "downlink" is intended to indicate that from the LMF perspective
the involved measurements are provided by the UE; this set of procedures
might also be considered as "UE-assisted, LMF-based E-CID".</p>
<h4 id="capability-transfer-procedure-2">8.3.3.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure for E-CID positioning is described
in clause 7.1.2.1.</p>
<h4 id="assistance-data-transfer-procedure-2">8.3.3.2 Assistance Data
Transfer Procedure</h4>
<p>Assistance data transfer is not required for E-CID positioning.</p>
<h4 id="location-information-transfer-procedure-2">8.3.3.3 Location
Information Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
position measurements from the UE, or to enable the UE to provide
location measurements to the LMF for position calculation.</p>
<h5 id="lmf-initiated-location-information-transfer">8.3.3.3.1
LMF-initiated Location Information Transfer</h5>
<p>Figure 8.3.3.3-1 shows the Location Information Transfer operations
for the E-CID method when the procedure is initiated by the LMF.</p>
<p><img src="media/image32.svg" /></p>
<p>Figure 8.3.3.3-1: LMF-initiated Location Information Transfer
Procedure.</p>
<p>(1) The LMF sends a LPP Request Location Information message to the
UE for invocation of E-CID positioning. This request includes the E-CID
measurements requested by the LMF and supported by the UE as listed in
Table 8.3.2.4-1 together with a required response time.</p>
<p>(2) The UE sends an LPP Provide Location Information message to the
LMF and reports the requested measurements that are available in the UE
before the Response Time provided in step (1) elapsed. If the requested
measurements are not available, or if the Response Time provided in step
1 elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of
type Provide Location Information which includes a cause indication for
the not provided location information.</p>
<h5
id="ue-initiated-location-information-delivery-procedure-2">8.3.3.3.2
UE-initiated Location Information Delivery procedure</h5>
<p>Figure 8.3.3.3.2-1 shows the Location Information Delivery procedure
operations for the E-CID method when the procedure is initiated by the
UE.</p>
<p><img src="media/image33.svg" /></p>
<p>Figure 8.3.3.3.2-1: UE-initiated Location Information Delivery
Procedure.</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include any UE
measurements already available at the UE.</p>
<h3 id="uplink-e-cid-positioning-procedures">8.3.4 Uplink E-CID
Positioning Procedures</h3>
<p>The procedures described in this clause support E-CID related
measurements obtained by the NG-RAN node and provided to the LMF using
NRPPa. The term "uplink" is intended to indicate that from the LMF point
of view, the involved measurements are provided by the NG-RAN node; this
set of procedures might also be considered as "NG-RAN node-assisted
E-CID". An example of this uplink E-CID positioning method for E-UTRA is
AoA+T<sub>ADV</sub>.</p>
<h4 id="capability-transfer-procedure-3">8.3.4.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure is not applicable to uplink E-CID
positioning not using E-UTRA T<sub>ADV</sub> type 1. For uplink E-CID
positioning using E-UTRA T<sub>ADV</sub> type 1, the Capability Transfer
procedure for E-CID positioning is described in clause 7.1.2.1.</p>
<h4 id="assistance-data-transfer-procedure-3">8.3.4.2 Assistance Data
Transfer Procedure</h4>
<p>The assistance data transfer procedure is not applicable to uplink
E-CID positioning.</p>
<h4 id="position-measurement-procedure">8.3.4.3 Position Measurement
Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
position measurements from the NG-RAN node.</p>
<h5 id="lmf-initiated-position-measurement">8.3.4.3.1 LMF-initiated
Position Measurement</h5>
<p>Figure 8.3.4.3.1-1 shows the position measurement operations for the
uplink E-CID method when the procedure is initiated by the LMF.</p>
<p><img src="media/image37.svg" /></p>
<p>Figure 8.3.4.3.1-1: LMF-initiated Position Measurement Procedure</p>
<p>(1) The LMF sends a NRPPa E-CID MEASUREMENT INITIATION REQUEST
message to the NG-RAN node. This request includes indication of E-CID
measurements requested and whether the result is expected only once or
periodically.</p>
<p>(2) If the LMF in step (1) requested UE measurements (e.g., E-UTRA
RSRP, E-UTRA RSRQ measurements, etc.), the NG-RAN node may configure the
UE to report the measurement information requested as specified in TS
36.331 [13], TS 38.331 [14].</p>
<p>(3) If the result is expected only once and the NG-RAN node initiates
at least one of the E-CID measurements as requested, the NG-RAN node
sends an NRPPa E-CID MEASUREMENT INITIATION RESPONSE to the LMF, which
includes the obtained E-CID measurements. If the result is expected
periodically and the NG-RAN node is able to initiate at least one of the
E-CID measurements as requested, the NG-RAN node sends an NRPPa E-CID
MEASUREMENT INITIATION RESPONSE to the LMF, which does not include any
result. The NG-RAN node reports then the obtained measurements by
initiating the E-CID Measurement Report procedure, with the requested
periodicity. If the NG-RAN node is unable to initiate any of the
requested measurements as requested from the LMF, or is unable to
instigate any of the required RRC procedures to obtain the requested
measurements from the UE, the NG-RAN node sends an NRPPa E-CID
MEASUREMENT INITIATION FAILURE message providing the error reason. If
the failure occurs during a periodic reporting, the NG-RAN node sends an
NRPPa E-CID MEASUREMENT FAILURE INDICATION message.</p>
<h2 id="barometric-pressure-sensor-positioning-1">8.4 Barometric
pressure sensor positioning</h2>
<p>8.4.1 General</p>
<p>In the barometric pressure sensor positioning method, the UE vertical
component of the position is estimated by combining the measured
atmospheric pressure and a reference atmospheric pressure. This is
accomplished through barometric sensors measuring atmospheric pressure
at the UE, and applying a height determination algorithm using the
reference atmospheric pressure.</p>
<p>Three positioning modes are supported:</p>
<p>- <em>UE-Assisted</em>: The UE performs barometric pressure sensor
measurements with or without assistance from the network and sends these
measurements to the LMF where the vertical component of the position
calculation may take place, possibly using additional measurements from
other sources;</p>
<p>- <em>UE-Based</em>: The UE performs barometric pressure sensor
measurements and calculates its own vertical component of the position,
possibly using additional measurements from other sources.</p>
<p>- <em>Standalone</em>: The UE performs barometric pressure sensor
measurements and calculates its own vertical component of the position,
possibly using additional measurements from other sources, without
network assistance.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-3">8.4.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and UE.</p>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-ue-3">8.4.2.1
Information that may be transferred from the LMF to UE</h4>
<p>Table 8.4.2.1-1 lists assistance data for both UE-assisted and
UE-based modes that may be sent from the LMF to the UE.</p>
<p>NOTE: The provision of these assistance data elements and the usage
of these elements by the UE depend on the NG-RAN/5GC and UE
capabilities, respectively.</p>
<p>Table 8.4.2.1-1: Information that may be transferred from the LMF to
UE</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Assistance Data</td>
</tr>
<tr>
<td>Reference pressure</td>
</tr>
<tr>
<td>Additional reference data</td>
</tr>
</tbody>
</table>
<h5 id="barometric-pressure-sensor-assistance-data">8.4.2.1.1 Barometric
pressure sensor assistance data</h5>
<p>The barometric pressure sensor assistance data may include reference
pressure, along with other reference data, such as the reference point
where the reference barometric pressure is valid and reference
temperature at the reference point.</p>
<h4
id="information-that-may-be-transferred-from-the-ue-to-lmf-3">8.4.2.2
Information that may be transferred from the UE to LMF</h4>
<p>The information that may be signalled from the UE to the LMF is
summarized in Table 8.4.2.2-1.</p>
<p>Table 8.4.2.2-1: Information that may be transferred from UE to the
LMF</p>
<table style="width:100%;">
<colgroup>
<col style="width: 66%" />
<col style="width: 17%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>UEassisted</td>
<td><p>UE-based/</p>
<p>Standalone</p></td>
</tr>
<tr>
<td>UE position estimate with uncertainty shape</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Indication of used positioning methods in the fix</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Timestamp</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Barometric pressure sensor measurements</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody>
</table>
<h5 id="standalone-mode">8.4.2.2.1 Standalone mode</h5>
<p>In Standalone mode, the UE reports the vertical component of the
position, together with an estimate of the location uncertainty, if
available.</p>
<p>The UE should also report an indication of which positioning
method(s) have been used to calculate a fix.</p>
<h5 id="ue-assisted-mode-1">8.4.2.2.2 UE-assisted mode</h5>
<p>In UE-assisted mode, the UE reports the barometric pressure sensor
measurements together with associated quality estimates. These
measurements enable the LMF to calculate the vertical component of the
location of the UE, possibly using other measurements and data.</p>
<p>If requested by the LMF and supported by the UE, the UE may report
barometric pressure sensor measurements together with associated quality
measurements, if available.</p>
<h5 id="ue-based-mode-1">8.4.2.2.3 UE-based mode</h5>
<p>In UE-based mode, the UE reports the vertical component of the
position, together with an estimate of the location uncertainty, if
available.</p>
<p>The UE should also report an indication of which positioning
method(s) have been used to calculate a fix.</p>
<h3 id="barometric-pressure-sensor-positioning-procedures">8.4.3
Barometric Pressure Sensor Positioning Procedures</h3>
<h4 id="capability-transfer-procedure-4">8.4.3.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure for Barometric Pressure Sensor
positioning is described in clause 7.1.2.1.</p>
<h4 id="assistance-data-transfer-procedure-4">8.4.3.2 Assistance Data
Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to provide
assistance data to the UE (e.g., as part of a positioning procedure) and
the UE to request assistance data from the LMF (e.g., as part of a
positioning procedure).</p>
<h5 id="lmf-initiated-assistance-data-delivery-2">8.4.3.2.1 LMF
initiated Assistance Data Delivery</h5>
<p>Figure 8.4.3.2.1-1 shows the Assistance Data Delivery operations for
the network-assisted barometric pressure sensor method when the
procedure is initiated by the LMF.</p>
<p><img src="media/image28.svg" /></p>
<p>Figure 8.4.3.2.1-1: LMF-initiated Assistance Data Delivery
Procedure</p>
<p>(1) The LMF determines that assistance data needs to be provided to
the UE (e.g., as part of a positioning procedure) and sends an LPP
Provide Assistance Data message to the UE. This message may include any
of the barometric pressure sensor assistance data defined in clause
8.4.2.1.</p>
<h5 id="ue-initiated-assistance-data-transfer-2">8.4.3.2.2 UE initiated
Assistance Data Transfer</h5>
<p>Figure 8.4.3.2.2-1 shows the Assistance Data Transfer operations for
the network-assisted Barometric pressure sensor method when the
procedure is initiated by the UE.</p>
<p><img src="media/image30.svg" /></p>
<p>Figure 8.4.3.2.2-1: UE-initiated Assistance Data Transfer
Procedure</p>
<p>(1) The UE determines that certain barometric pressure sensor
assistance data is desired (e.g., as part of a positioning procedure
when the LMF provided assistance data are not sufficient for the UE to
fulfil the request) and sends a LPP Request Assistance Data message to
the LMF. This request includes an indication of which specific
barometric pressure sensor assistance data is requested.</p>
<p>(2) The LMF provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the LMF. The entire set of
assistance data may be delivered in one or several LPP messages. In this
case, this step may be repeated by the LMF several times. If any of the
UE requested assistance data in step (1) are not provided in step 2, the
UE shall assume that the requested assistance data are not supported, or
currently not available at the LMF. If none of the UE requested
assistance data in step (1) can be provided by the LMF, return any
information that can be provided in an LPP message of type Provide
Assistance Data which includes a cause indication for the not provided
assistance data.</p>
<h4 id="location-information-transfer-procedure-3">8.4.3.3 Location
Information Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
barometric pressure sensor measurements or position estimate from the
UE, or to enable the UE to provide barometric pressure sensor
measurements to the LMF for position calculation.</p>
<h5
id="lmf-initiated-location-information-transfer-procedure-2">8.4.3.3.1
LMF initiated Location Information Transfer Procedure</h5>
<p>Figure 8.4.3.3.1-1 shows the Location Information Transfer operations
when the procedure is initiated by the LMF.</p>
<p><img src="media/image32.svg" /></p>
<p>Figure 8.4.3.3.1-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends a LPP Request Location Information message to the
UE for invocation of barometric pressure sensor positioning. This
request includes positioning instructions such as the positioning mode
(UE-assisted, UE-based, standalone), specific requested UE measurements
if any, and quality of service parameters (accuracy, response time).</p>
<p>(2) The UE performs the requested measurements and possibly
calculates its own position. The UE sends an LPP Provide Location
Information message to the LMF before the Response Time provided in step
(1) elapsed. If the UE is unable to perform the requested measurements,
or if the Response Time provided in step 1 elapsed before any of the
requested measurements have been obtained, the UE returns any
information that can be provided in an LPP message of type Provide
Location Information which includes a cause indication for the not
provided location information.</p>
<h5
id="ue-initiated-location-information-delivery-procedure-3">8.4.3.3.2
UE-initiated Location Information Delivery Procedure</h5>
<p>Figure 8.4.3.3.2-1 shows the Location Information delivery operations
for the barometric pressure sensor method when the procedure is
initiated by the UE.</p>
<p><img src="media/image33.svg" /></p>
<p>Figure 8.4.3.3.2-1: UE-initiated Location Information Delivery
Procedure</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include UE barometric
pressure sensor measurements or location estimate already available at
the UE.</p>
<h2 id="wlan-positioning-1">8.5 WLAN positioning</h2>
<h3 id="general-8">8.5.1 General</h3>
<p>In the WLAN positioning method, the UE position is estimated with the
knowledge of geographical coordinate of reference WLAN access points.
This is accomplished by collecting a certain amount of measurements from
UE's WLAN receivers, and applying a location determination algorithm
using databases of the estimated position's references points.</p>
<p>The UE WLAN measurements may include:</p>
<p>- WLAN Received Signal Strength (RSSI);</p>
<p>- Round Trip Time (RTT) between WLAN Access Point and the UE.</p>
<p>Three positioning modes are supported:</p>
<p>- <em>Standalone</em>:<br />
The UE performs WLAN position measurements and location computation,
without network assistance.</p>
<p>- <em>UE-assisted</em>:<br />
The UE provides WLAN position measurements with or without assistance
from the network to the LMF for computation of a location estimate by
the network.</p>
<p>- <em>UE-based</em>:<br />
The UE performs WLAN position measurements and computation of a location
estimate with network assistance.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-4">8.5.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and UE.</p>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-ue-4">8.5.2.1
Information that may be transferred from the LMF to UE</h4>
<p>Table 8.5.2.1-1 lists assistance data for both UE-assisted and
UE-based modes that may be sent from the LMF to the UE.</p>
<p>NOTE: The provision of these assistance data elements and the usage
of these elements by the UE depend on the NG-RAN/5GC and UE
capabilities, respectively.</p>
<p>Table 8.5.2.1-1: Information that may be transferred from the LMF to
UE</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Assistance Data</td>
</tr>
<tr>
<td><strong>WLAN AP List</strong></td>
</tr>
<tr>
<td>BSSID</td>
</tr>
<tr>
<td>SSID</td>
</tr>
<tr>
<td>AP Type Data<sup>(1)</sup></td>
</tr>
<tr>
<td>AP Location</td>
</tr>
<tr>
<td>NOTE 1: WLAN AP Type Data may include WLAN Type (e.g.,
802.11a/b/g/n/ac/ad, etc.), transmit power, antenna gain, coverage area,
etc.</td>
</tr>
</tbody>
</table>
<h5 id="wlan-ap-bssid">8.5.2.1.1 WLAN AP BSSID</h5>
<p>This assistance data provides the BSSID of the WLAN access point
[21].</p>
<h5 id="wlan-ap-ssid">8.5.2.1.2 WLAN AP SSID</h5>
<p>This assistance data provides the SSID of the WLAN access point
[21].</p>
<h5 id="wlan-ap-type-data">8.5.2.1.3 WLAN AP Type Data</h5>
<p>This assistance data provides additional information about the access
point and may include WLAN Type (e.g., 802.11a/b/g/n/ac/ad, etc.),
transmit power, antenna gain, coverage area, etc. [21]</p>
<h5 id="wlan-ap-location">8.5.2.1.4 WLAN AP Location</h5>
<p>This assistance data provides the location (possibly including
altitude information) of the access point [21].</p>
<h4
id="information-that-may-be-transferred-from-the-ue-to-lmf-4">8.5.2.2
Information that may be transferred from the UE to LMF</h4>
<p>The information that may be signalled from the UE to the LMF is
summarized in Table 8.5.2.2-1.</p>
<p>Table 8.5.2.2-1: Information that may be transferred from the UE to
the LMF</p>
<table style="width:100%;">
<colgroup>
<col style="width: 61%" />
<col style="width: 17%" />
<col style="width: 21%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>UEAssisted</td>
<td><p>UE-based/</p>
<p>Standalone</p></td>
</tr>
<tr>
<td><strong>WLAN Location Information</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><blockquote>
<p>BSSID</p>
</blockquote></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><blockquote>
<p>SSID</p>
</blockquote></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><blockquote>
<p>Received Signal Strength (RSSI)</p>
</blockquote></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><blockquote>
<p>Round Trip Time (RTT)</p>
</blockquote></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><blockquote>
<p>Time Stamp</p>
</blockquote></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><blockquote>
<p>Measurement characteristics</p>
</blockquote></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><strong>UE Location Information</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><blockquote>
<p>UE position estimate with uncertainty shape</p>
</blockquote></td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td><blockquote>
<p>Position Time Stamp</p>
</blockquote></td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td><blockquote>
<p>Location Source (method(s) used to compute location)</p>
</blockquote></td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h5 id="standalone-mode-1">8.5.2.2.1 Standalone mode</h5>
<p>In Standalone mode, the UE reports the latitude, longitude and
possibly altitude, together with an estimate of the location
uncertainty, if available.</p>
<p>The UE should also report an indication of WLAN method and possibly
other positioning methods used to calculate a fix.</p>
<h5 id="ue-assisted-mode-2">8.5.2.2.2 UE-assisted mode</h5>
<p>In UE-assisted mode, the UE should report:</p>
<p>- The BSSID/SSID of the measured WLAN access points, and associated
RSSI or RTT.</p>
<h5 id="ue-based-mode-2">8.5.2.2.3 UE-based mode</h5>
<p>In UE-based mode, the UE reports the latitude, longitude, and
possibly altitude, together with an estimate of the location
uncertainty, if available.</p>
<p>The UE should also report an indication that WLAN method is used and
possibly other positioning methods used to calculate the fix.</p>
<h3 id="wlan-positioning-procedures">8.5.3 WLAN Positioning
Procedures</h3>
<h4 id="capability-transfer-procedure-5">8.5.3.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure for WLAN positioning is described
in clause 7.1.2.1.</p>
<h4 id="assistance-data-transfer-procedure-5">8.5.3.2 Assistance Data
Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the UE to request
assistance data from the LMF (e.g., as part of a positioning procedure)
and the LMF to provide assistance data to the UE (e.g., as part of a
positioning procedure).</p>
<h5 id="lmf-initiated-assistance-data-delivery-3">8.5.3.2.1 LMF
initiated Assistance Data Delivery</h5>
<p>Figure 8.5.3.2.1-1 shows the Assistance Data Delivery operations for
the network-assisted WLAN method when the procedure is initiated by the
LMF.</p>
<p><img src="media/image28.svg" /></p>
<p>Figure 8.5.3.2.1: LMF-initiated Assistance Data Delivery
Procedure</p>
<p>(1) The LMF determines that assistance data needs to be provided to
the UE (e.g., as part of a positioning procedure) and sends an LPP
Provide Assistance Data message to the UE. This message may include any
of the WLAN assistance data defined in clause 8.5.2.1.</p>
<h5 id="ue-initiated-assistance-data-transfer-3">8.5.3.2.2 UE initiated
Assistance Data Transfer</h5>
<p>Figure 8.5.3.2.2-1 shows the Assistance Data Transfer operations for
the network-assisted WLAN method when the procedure is initiated by the
UE.</p>
<p><img src="media/image30.svg" /></p>
<p>Figure 8.5.3.2.2-1: UE-initiated Assistance Data Transfer
Procedure</p>
<blockquote>
<p>(1) The UE determines that certain WLAN assistance data is desired
(e.g., as part of a positioning procedure when the LMF provided
assistance data are not sufficient for the UE to fulfil the request) and
sends a LPP Request Assistance Data message to the LMF. This request
includes an indication of which specific WLAN assistance data is
requested.</p>
<p>(2) The LMF provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the LMF. The entire set of
assistance data may be delivered in one or several LPP messages. In this
case, this step may be repeated by the LMF several times. If any of the
UE requested assistance data in step (1) are not provided in step 2, the
UE shall assume that the requested assistance data are not supported, or
currently not available at the LMF. If none of the UE requested
assistance data in step (1) can be provided by the LMF, return any
information that can be provided in an LPP message of type Provide
Assistance Data which includes a cause indication for the not provided
assistance data.</p>
</blockquote>
<h4 id="location-information-transfer-procedure-4">8.5.3.3 Location
Information Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
position measurements or location estimate from the UE, or to enable the
UE to provide location measurements to the LMF for position
calculation.</p>
<h5
id="lmf-initiated-location-information-transfer-procedure-3">8.5.3.3.1
LMF initiated Location Information Transfer Procedure</h5>
<p>Figure 8.5.3.3.1-1 shows the Location Information Transfer operations
for the WLAN method when the procedure is initiated by the LMF.</p>
<p><img src="media/image32.svg" /></p>
<p>Figure 8.5.3.3.1-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends a LPP Request Location Information message to the
UE for invocation of WLAN positioning. This request includes positioning
instructions such as the positioning mode (UE-assisted, UE-based,
Standalone), specific requested UE measurements if any, and quality of
service parameters (accuracy, response time).</p>
<p>(2) The UE performs the requested measurements and possibly
calculates its own location. The UE sends an LPP Provide Location
Information message to the LMF before the Response Time provided in step
(1) elapsed. If the UE is unable to perform the requested measurements,
or if the Response Time provided in step 1 elapsed before any of the
requested measurements have been obtained, the UE returns any
information that can be provided in an LPP message of type Provide
Location Information which includes a cause indication for the not
provided location information.</p>
<h5
id="ue-initiated-location-information-delivery-procedure-4">8.5.3.3.2
UE-initiated Location Information Delivery Procedure</h5>
<p>Figure 8.5.3.3.2-1 shows the Location Information delivery operations
for the WLAN method when the procedure is initiated by the UE.</p>
<p><img src="media/image33.svg" /></p>
<p>Figure 8.5.3.3.2-1: UE-initiated Location Information Delivery
Procedure</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include UE WLAN
information or location estimate already available at the UE.</p>
<h2 id="bluetooth-positioning-1">8.6 Bluetooth positioning</h2>
<p>8.6.1 General</p>
<p>In the Bluetooth positioning method, the UE position is estimated
with the knowledge of geographical coordinate of reference Bluetooth
beacons. This is accomplished by collecting a certain amount of
measurements from UE's Bluetooth receiver, and applying a location
determination algorithm using databases of the estimated position's
references points.</p>
<p>The UE Bluetooth measurements may include:</p>
<p>- Bluetooth beacon's Received Signal Strength (RSSI).</p>
<p>Two positioning modes are supported:</p>
<p>- <em>Standalone</em>:<br />
The UE performs Bluetooth position measurements and location
computation.</p>
<p>- <em>UE-assisted</em>:<br />
The UE provides Bluetooth position measurements without assistance from
the network to the LMF for computation of a location estimate by the
network.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-5">8.6.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and UE.</p>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-ue-5">8.6.2.1
Information that may be transferred from the LMF to UE</h4>
<p>Bluetooth positioning does not require any assistance data to be
transferred from the LMF to the UE.</p>
<h4
id="information-that-may-be-transferred-from-the-ue-to-lmf-5">8.6.2.2
Information that may be transferred from the UE to LMF</h4>
<p>The information that may be signalled from the UE to the LMF is
summarized in Table 8.6.2.2-1.</p>
<p>Table 8.6.2.2-1: Information that may be transferred from the UE to
the LMF</p>
<table style="width:100%;">
<colgroup>
<col style="width: 61%" />
<col style="width: 17%" />
<col style="width: 21%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>UEAssisted</td>
<td>Standalone</td>
</tr>
<tr>
<td><strong>Bluetooth Location Information</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><blockquote>
<p>MAC Address</p>
</blockquote></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><blockquote>
<p>Received Signal Strength (RSSI)</p>
</blockquote></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><blockquote>
<p>Time Stamp</p>
</blockquote></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><blockquote>
<p>Measurement characteristics</p>
</blockquote></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><strong>UE Location Information</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><blockquote>
<p>UE position estimate with uncertainty shape</p>
</blockquote></td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td><blockquote>
<p>Position Time Stamp</p>
</blockquote></td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td><blockquote>
<p>Location Source (method(s) used to compute location)</p>
</blockquote></td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h5 id="standalone-mode-2">8.6.2.2.1 Standalone mode</h5>
<p>In Standalone mode, the UE reports the latitude, longitude and
possibly altitude, together with an estimate of the location
uncertainty, if available.</p>
<p>The UE should also report an indication of Bluetooth method and
possibly other location methods have been used to calculate a fix.</p>
<h5 id="ue-assisted-mode-3">8.6.2.2.2 UE-assisted mode</h5>
<p>In UE-assisted mode, the UE should report:</p>
<p>- The MAC addresses of the measured Bluetooth beacons and associated
RSSI.</p>
<h3 id="bluetooth-positioning-procedures">8.6.3 Bluetooth Positioning
Procedures</h3>
<h4 id="capability-transfer-procedure-6">8.6.3.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure for Bluetooth positioning is
described in clause 7.1.2.1.</p>
<h4 id="assistance-data-transfer-procedure-6">8.6.3.2 Assistance Data
Transfer Procedure</h4>
<p>Assistance data transfer is not required for Bluetooth
positioning.</p>
<h4 id="location-information-transfer-procedure-5">8.6.3.3 Location
Information Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
position measurements or location estimate from the UE, or to enable the
UE to provide location measurements to the LMF for position
calculation.</p>
<h5
id="lmf-initiated-location-information-transfer-procedure-4">8.6.3.3.1
LMF initiated Location Information Transfer Procedure</h5>
<p>Figure 8.6.3.3.1-1 shows the Location Information Transfer operations
for the Bluetooth method when the procedure is initiated by the LMF.</p>
<p><img src="media/image32.svg" /></p>
<p>Figure 8.6.3.3.1-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends a LPP Request Location Information message to the
UE for invocation of Bluetooth positioning. This request includes
positioning instructions such as the positioning mode (UE-assisted,
Standalone), specific requested UE measurements if any, and quality of
service parameters (accuracy, response time).</p>
<p>(2) The UE performs the requested measurements and possibly
calculates its own location. The UE sends an LPP Provide Location
Information message to the LMF before the Response Time provided in step
(1) elapsed. If the UE is unable to perform the requested measurements,
or if the Response Time provided in step 1 elapsed before any of the
requested measurements have been obtained, the UE returns any
information that can be provided in an LPP message of type Provide
Location Information which includes a cause indication for the not
provided location information.</p>
<h5
id="ue-initiated-location-information-delivery-procedure-5">8.6.3.3.2
UE-initiated Location Information Delivery Procedure</h5>
<p>Figure 8.6.3.3.2-1 shows the Location Information delivery operations
for the Bluetooth method when the procedure is initiated by the UE.</p>
<p><img src="media/image33.svg" /></p>
<p>Figure 8.6.3.3.2-1: UE-initiated Location Information Delivery
Procedure</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include UE Bluetooth
information or location estimate already available at the UE.</p>
<h2 id="tbs-positioning-1">8.7 TBS positioning</h2>
<h3 id="general-9">8.7.1 General</h3>
<p>Terrestrial Beacon Systems (TBS) is the standard generic term for a
network of ground-based transmitters broadcasting signals for
geo-spatial positioning with wide-area or regional coverage. The
following TBSs are supported in this version of the specification:</p>
<p>- Metropolitan Beacon Systems (MBS).</p>
<p>NOTE: PRS-based TBS is part of downlink OTDOA positioning and
described in clause 8.2.</p>
<p>Three positioning modes are supported:</p>
<p>- <em>UE-Assisted</em>: The UE performs TBS measurements with or
without assistance from the network, and sends these measurements to the
LMF where the position calculation takes place, possibly using
additional measurements from other (non-TBS) sources;</p>
<p>- <em>UE-Based</em>: The UE performs TBS measurements and calculates
its own location, possibly using additional measurements from other
(non-TBS) sources.</p>
<p>- <em>Standalone</em>: The UE performs TBS measurements and
calculates its own location, possibly using additional measurements from
other (non-TBS) sources, without network assistance.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-6">8.7.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and UE.</p>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-ue-6">8.7.2.1
Information that may be transferred from the LMF to UE</h4>
<p>Table 8.7.2.1-1 lists assistance data for both UE-assisted and
UE-based modes that may be sent from the LMF to the UE.</p>
<p>NOTE: The provision of these assistance data elements and the usage
of these elements by the UE depend on the NG-RAN/5GC and UE
capabilities, respectively.</p>
<p>Table 8.7.2.1-1: Information that may be transferred from the LMF to
UE</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Assistance Data</td>
</tr>
<tr>
<td>Acquisition assistance</td>
</tr>
<tr>
<td>Almanac</td>
</tr>
</tbody>
</table>
<h5 id="acquisition-assistance-1">8.7.2.1.1 Acquisition Assistance</h5>
<p>Acquisition assistance provides the MBS receiver with information
about visible beacons, PN Codes, and other information of the MBS
signals to enable a fast acquisition of the MBS signals.</p>
<h5 id="almanac-1">8.7.2.1.2 Almanac</h5>
<p>Almanac assistance provides the MBS receiver with MBS beacon
parameters that can be used to determine the UE position.</p>
<h4
id="information-that-may-be-transferred-from-the-ue-to-lmf-6">8.7.2.2
Information that may be transferred from the UE to LMF</h4>
<p>The information that may be signalled from the UE to the LMF is
summarized in Table 8.7.2.2-1.</p>
<p>Table 8.7.2.2-1: Information that may be transferred from UE to the
LMF</p>
<table style="width:100%;">
<colgroup>
<col style="width: 66%" />
<col style="width: 17%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>UEassisted</td>
<td><p>UE-based/</p>
<p>Standalone</p></td>
</tr>
<tr>
<td>UE position estimate with uncertainty shape</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Timestamp</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Indication of used positioning methods in the fix</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>TBS measurements (code phase (MBS))</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Measurement quality parameters for each measurement</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody>
</table>
<h5 id="standalone-mode-3">8.7.2.2.1 Standalone mode</h5>
<p>In Standalone mode, the UE reports the latitude, longitude and
possibly altitude, together with an estimate of the location
uncertainty, if available.</p>
<p>The UE should also report an indication that TBS method is used and
possibly other positioning methods used to calculate the fix.</p>
<h5 id="ue-assisted-mode-4">8.7.2.2.2 UE-assisted mode</h5>
<p>In UE-assisted mode, the UE reports the TBS associated measurements,
together with associated quality estimates. These measurements enable
the LMF to calculate the location of the UE, possibly using other
measurements and data.</p>
<h5 id="ue-based-mode-3">8.7.2.2.3 UE-based mode</h5>
<p>In UE-based mode, the UE reports the latitude and longitude, together
with an estimate of the location uncertainty, if available.</p>
<p>The UE should also report an indication that TBS method is used and
possibly other positioning methods used to calculate the fix.</p>
<h3 id="tbs-positioning-procedures">8.7.3 TBS Positioning
Procedures</h3>
<h4 id="capability-transfer-procedure-7">8.7.3.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure for TBS positioning is described in
clause 7.1.2.1.</p>
<h4 id="assistance-data-transfer-procedure-7">8.7.3.2 Assistance Data
Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to provide
assistance data to the UE (e.g., as part of a positioning procedure) and
the UE to request assistance data from the LMF (e.g., as part of a
positioning procedure).</p>
<h5 id="lmf-initiated-assistance-data-delivery-4">8.7.3.2.1 LMF
initiated Assistance Data Delivery</h5>
<p>Figure 8.7.3.2.1-1 shows the Assistance Data Delivery operations for
the network-assisted TBS method when the procedure is initiated by the
LMF.</p>
<p><img src="media/image28.svg" /></p>
<p>Figure 8.7.3.2.1-1: LMF-initiated Assistance Data Delivery
Procedure</p>
<p>(1) The LMF determines that assistance data needs to be provided to
the UE (e.g., as part of a positioning procedure) and sends an LPP
Provide Assistance Data message to the UE. This message may include any
of the TBS assistance data defined in clause 8.7.2.1.</p>
<h5 id="ue-initiated-assistance-data-transfer-4">8.7.3.2.2 UE initiated
Assistance Data Transfer</h5>
<p>Figure 8.7.3.2.2-1 shows the Assistance Data Transfer operations for
the network-assisted TBS method when the procedure is initiated by the
UE.</p>
<p><img src="media/image30.svg" /></p>
<p>Figure 8.7.3.2.2-1: UE-initiated Assistance Data Transfer
Procedure</p>
<p>(1) The UE determines that certain TBS assistance data is desired
(e.g., when the LMF provided assistance data are not sufficient for the
UE to fulfil the request) and sends a LPP Request Assistance Data
message to the LMF. This request includes an indication of which
specific TBS assistance data is requested.</p>
<p>(2) The LMF provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the LMF. The entire set of
assistance data may be delivered in one or several LPP messages. In this
case, this step may be repeated by the LMF several times. If any of the
UE requested assistance data in step (1) are not provided in step 2, the
UE shall assume that the requested assistance data are not supported, or
currently not available at the LMF. If none of the UE requested
assistance data in step (1) can be provided by the LMF, return any
information that can be provided in an LPP message of type Provide
Assistance Data which includes a cause indication for the not provided
assistance data.</p>
<h4 id="location-information-transfer-procedure-6">8.7.3.3 Location
Information Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
position measurements or location estimate from the UE, or to enable the
UE to provide location measurements to the LMF for position
calculation.</p>
<h5
id="lmf-initiated-location-information-transfer-procedure-5">8.7.3.3.1
LMF initiated Location Information Transfer Procedure</h5>
<p>Figure 8.7.3.3.1-1 shows the Location Information Transfer operations
for the TBS method when the procedure is initiated by the LMF.</p>
<p><img src="media/image32.svg" /></p>
<p>Figure 8.7.3.3.1-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends a LPP Request Location Information message to the
UE for invocation of TBS positioning. This request includes positioning
instructions such as the positioning mode (UE-assisted, UE-based,
Standalone), specific requested UE measurements if any, and quality of
service parameters (accuracy, response time).</p>
<p>(2) The UE performs the requested measurements and possibly
calculates its own location. The UE sends an LPP Provide Location
Information message to the LMF before the Response Time provided in step
(1) elapsed. If the UE is unable to perform the requested measurements,
or if the Response Time provided in step 1 elapsed before any of the
requested measurements have been obtained, the UE returns any
information that can be provided in an LPP message of type Provide
Location Information which includes a cause indication for the not
provided location information.</p>
<h5
id="ue-initiated-location-information-delivery-procedure-6">8.7.3.3.2
UE-initiated Location Information Delivery Procedure</h5>
<p>Figure 8.7.3.3.2-1 shows the Location Information delivery operations
for the TBS method when the procedure is initiated by the UE.</p>
<p><img src="media/image33.svg" /></p>
<p>Figure 8.7.3.3.2-1: UE-initiated Location Information Delivery
Procedure</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include UE TBS
measurements or location estimate already available at the UE.</p>
<h2 id="motion-sensor-positioning-method">8.8 Motion sensor positioning
method</h2>
<h3 id="general-10">8.8.1 General</h3>
<p>Motion sensors can be used to estimate the location of the UE. With
the combination of other positioning methods (hybrid) a more accurate
position of the UE can be computed. UE using one or more motion sensors
provides the movement information. The movement information comprises
displacement results estimated as an ordered series of points.</p>
<p>The positioning modes supported are UE-Assisted, UE-Based, and
Standalone<em>.</em></p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-7">8.8.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<h4 id="general-11">8.8.2.1 General</h4>
<p>This clause defines the information (e.g., assistance data, position
and/or measurement data) that may be transferred between NG-RAN/5GC
elements.</p>
<h4
id="information-that-may-be-transferred-from-the-ue-to-lmf-7">8.8.2.2
Information that may be transferred from the UE to LMF</h4>
<p>The information transferred from the UE to the LMF consists of
capability information and location measurements or UE position. The
supported information elements are given in Table 8.8.2.2-1.</p>
<p>Table 8.8.2.2-1: Sensor Measurement Information that may be
transferred from UE to the LMF</p>
<table>
<colgroup>
<col style="width: 65%" />
<col style="width: 17%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr>
<th>Information</th>
<th>UEassisted</th>
<th><p>UE-based/</p>
<p>Standalone</p></th>
</tr>
</thead>
<tbody>
<tr>
<td>Displacement Timestamp</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Displacement Information</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Reference Position</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Reference Time</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h5 id="ue-assisted-ue-based-standalone-mode">8.8.2.2.1 UE-assisted,
UE-based, Standalone mode</h5>
<p>In the UE-assisted, UE-Based, and Standalone mode, the UE reports,
displacement information, displacement timestamp, reference position and
reference time.</p>
<h5 id="ue-displacement-and-movement-information">8.8.2.2.2 UE
Displacement and Movement Information</h5>
<p>The UE may report movement and displacement information which
comprises an ordered series of direction, distance travelled by the
target device and the time intervals when these measurements are
taken.</p>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-the-ue">8.8.2.3
Information that may be transferred from the LMF to the UE</h4>
<p>In this release, no information, e.g. assistance data is transferred
to the UE.</p>
<h3 id="motion-sensors-location-information-transfer-procedure">8.8.3
Motion Sensors Location Information Transfer Procedure</h3>
<h4 id="general-12">8.8.3.1 General</h4>
<p>The purpose of this procedure is to enable the LMF to request
additional sensor measurements or to enable the UE to provide sensor
measurements to the LMF for position calculation.</p>
<h4 id="lmf-initiated-location-information-transfer-procedure-6">8.8.3.2
LMF initiated Location Information Transfer Procedure</h4>
<p>Figure 8.8.3.2-1 shows the Location Information Transfer operations
when the procedure is initiated by the LMF.</p>
<p><img src="media/image38.svg" /></p>
<p>Figure 8.8.3.2-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends a LPP Request Location Information message to the
UE for invocation of motion sensor positioning. This request includes
positioning instructions such as the positioning mode, specific
requested UE measurements if any, and quality of service parameters
(accuracy, response time).</p>
<p>(2) The UE performs the requested measurements. The UE sends an LPP
Provide Location Information message to the LMF before the Response Time
provided in step (1) elapsed. If the UE is unable to perform the
requested measurements, or if the Response Time provided in step 1
elapsed before any of the requested measurements have been obtained, the
UE returns any information that can be provided in an LPP message of
type Provide Location Information which includes a cause indication for
the not provided location information.</p>
<h4 id="ue-initiated-location-information-delivery-procedure-7">8.8.3.3
UE-initiated Location Information Delivery Procedure</h4>
<p>Figure 8.8.3.3-1 shows the Location Information delivery operations
for motion sensor method when the procedure is initiated by the UE.</p>
<p><img src="media/image39.svg" /></p>
<p>Figure 8.8.3.3-1: UE-initiated Location Information Delivery
Procedure</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include UE sensor
measurements or location estimate already available at the UE.</p>
<h2 id="nr-enhanced-cell-id-positioning-methods">8.9 NR Enhanced cell ID
positioning methods</h2>
<h3 id="general-13">8.9.1 General</h3>
<p>NR Enhanced Cell ID (NR E-CID) positioning refers to techniques which
use UE and/or NR radio resource related measurements to improve the UE
location estimate. In the case of uplink NR E-CID inter-RAT E-UTRA
measurements reported by UE may also be used.</p>
<p>NOTE 1: For NR E-CID positioning methods the UE reports only the
measurements that it has available rather than being required to take
additional measurement actions. Therefore, the measurement gap request
procedure described in clause 7.4.1.1 is not applicable for NR E-CID
positioning methods.</p>
<p>NR E-CID measurements may include:</p>
<p>UE measurements (TS 38.215 [37]):</p>
<p>- SS Reference signal received power (SS-RSRP);</p>
<p>- SS Reference Signal Received Quality (SS-RSRQ);</p>
<p>- CSI Reference signal received power (CSI-RSRP);</p>
<p>- CSI Reference Signal Received Quality (CSI-RSRQ).</p>
<p>The UE measurements above may be aggregated at cell level or measured
per SSB or CSI-RS resource.</p>
<p>NR E-CID UE measurements for other RAT may include:</p>
<p>- E-UTRA Reference signal received power (RSRP);</p>
<p>- E-UTRA Reference Signal Received Quality (RSRQ);</p>
<p>NOTE 2: The above E-UTRA measurements by UE are only used for Uplink
NR E-CID positioning.</p>
<p>gNB measurements (TS 38.215 [37]):</p>
<p>- UL Angle of Arrival (azimuth and elevation);</p>
<p>- Timing advance (T<sub>ADV</sub>).</p>
<p>Various techniques exist to use these measurements to estimate the
location of the UE. The specific techniques are beyond the scope of this
specification.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-8">8.9.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and UE and from gNB to LMF.</p>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-ue-7">8.9.2.1
Information that may be transferred from the LMF to UE</h4>
<p>UE-assisted NR Enhanced Cell-ID location does not require any
assistance data to be transferred from the LMF to the UE.</p>
<p>UE-Based NR Enhanced Cell-ID location is not supported in this
version of the specification.</p>
<h4
id="information-that-may-be-transferred-from-the-ue-to-lmf-8">8.9.2.2
Information that may be transferred from the UE to LMF</h4>
<p>The information that may be signalled from UE to the LMF is listed in
table 8.9.2.2-1.</p>
<p>Table 8.9.2.2-1: Information that may be transferred from UE to the
LMF</p>
<table>
<colgroup>
<col style="width: 80%" />
<col style="width: 19%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>UEassisted</td>
</tr>
<tr>
<td>SS Reference signal received power (SS-RSRP)</td>
<td>Yes</td>
</tr>
<tr>
<td>SS Reference Signal Received Quality (SS-RSRQ)</td>
<td>Yes</td>
</tr>
<tr>
<td>CSI Reference signal received power (CSI-RSRP)</td>
<td>Yes</td>
</tr>
<tr>
<td>CSI Reference Signal Received Quality (CSI-RSRQ)</td>
<td>Yes</td>
</tr>
<tr>
<td>NR Cell Global Identifier, Physical Cell ID</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h4
id="information-that-may-be-transferred-from-the-gnb-to-lmf-2">8.9.2.3
Information that may be transferred from the gNB to LMF</h4>
<p>The information that may be transferred from gNB to the LMF is listed
in table 8.9.2.3-1.</p>
<p>Table 8.9.2.3-1: Information that may be transferred from gNB to the
LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>UL Angle of Arrival (azimuth and elevation)</td>
</tr>
<tr>
<td>Cell Portion ID</td>
</tr>
<tr>
<td>NR Measurement Results List:</td>
</tr>
<tr>
<td><blockquote>
<p>- SS Reference signal received power (SS-RSRP)</p>
</blockquote></td>
</tr>
<tr>
<td><blockquote>
<p>- SS Reference Signal Received Quality (SS-RSRQ)</p>
</blockquote></td>
</tr>
<tr>
<td><blockquote>
<p>- CSI Reference signal received power (CSI-RSRP)</p>
</blockquote></td>
</tr>
<tr>
<td><blockquote>
<p>- CSI Reference Signal Received Quality (CSI-RSRQ)</p>
</blockquote></td>
</tr>
<tr>
<td><blockquote>
<p>- NR Cell Global Identifier /Physical Cell ID</p>
</blockquote></td>
</tr>
<tr>
<td><blockquote>
<p>- Timing Advance (T<sub>ADV</sub>)</p>
</blockquote></td>
</tr>
<tr>
<td>E-UTRA Measurement Results List:</td>
</tr>
<tr>
<td><blockquote>
<p>- E-UTRA Physical Cell ID</p>
</blockquote></td>
</tr>
<tr>
<td><blockquote>
<p>- E-UTRA Reference Signal Received Power (RSRP)</p>
</blockquote></td>
</tr>
<tr>
<td><blockquote>
<p>- E-UTRA Reference Signal Received Quality (RSRQ)</p>
</blockquote></td>
</tr>
</tbody>
</table>
<p>Both cell-level and beam-level measurements for SS-RSRP, SS-RSRQ,
CSI-RSRP and CSI-RSRQ are supported.</p>
<h3 id="downlink-nr-e-cid-positioning-procedures">8.9.3 Downlink NR
E-CID Positioning Procedures</h3>
<p>The procedures described in this clause support NR E-CID related
measurements obtained by the UE and provided to the LMF using LPP. The
term "downlink" is intended to indicate that from the LMF perspective
the involved measurements are provided by the UE; this set of procedures
might also be considered as "UE-assisted, LMF-based NR E-CID".</p>
<h4 id="capability-transfer-procedure-8">8.9.3.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure for NR E-CID positioning is
described in clause 7.1.2.1.</p>
<h4 id="assistance-data-transfer-procedure-8">8.9.3.2 Assistance Data
Transfer Procedure</h4>
<p>Assistance data transfer is not required for NR E-CID
positioning.</p>
<h4 id="location-information-transfer-procedure-7">8.9.3.3 Location
Information Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
position measurements from the UE, or to enable the UE to provide
location measurements to the LMF for position calculation.</p>
<h5 id="lmf-initiated-location-information-transfer-from-ue">8.9.3.3.1
LMF-initiated Location Information Transfer from UE</h5>
<p>Figure 8.9.3.3.1-1 shows the Location Information Transfer operations
for the NR E-CID method from UE when the procedure is initiated by the
LMF.</p>
<p><img src="media/image40.svg" /></p>
<p>Figure 8.9.3.3.1-1: LMF-initiated Location Information Transfer
Procedure.</p>
<p>(1) The LMF sends a LPP Request Location Information message to the
UE for invocation of NR E-CID positioning. This request includes the NR
E-CID measurements requested by the LMF and supported by the UE as
listed in Table 8.9.2.2-1 together with a required response time.</p>
<p>(2) The UE sends an LPP Provide Location Information message to the
LMF and reports the requested measurements that are available in the UE
before the Response Time provided in step (1) elapsed. If the requested
measurements are not available, or if the Response Time provided in step
(1) elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of
type Provide Location Information which includes a cause indication for
the not provided location information.</p>
<h5
id="ue-initiated-location-information-delivery-procedure-8">8.9.3.3.2
UE-initiated Location Information Delivery procedure</h5>
<p>Figure 8.9.3.3.2-1 shows the Location Information Delivery procedure
operations for the NR E-CID method when the procedure is initiated by
the UE.</p>
<p><img src="media/image41.svg" /></p>
<p>Figure 8.9.3.3.2-1: UE-initiated Location Information Delivery
Procedure.</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include any UE
measurements already available at the UE.</p>
<h3 id="uplink-nr-e-cid-positioning-procedures">8.9.4 Uplink NR E-CID
Positioning Procedures</h3>
<p>The procedures described in this clause support NR E-CID related
measurements obtained by the serving gNB and provided to the LMF using
NRPPa. The term "uplink" is intended to indicate that from the LMF
perspective the involved measurements are provided by the serving gNB;
this set of procedures might also be considered as "NG-RAN node assisted
NR E-CID".</p>
<h4 id="capability-transfer-procedure-9">8.9.4.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure is not applicable to UL NR E-CID
positioning.</p>
<h4 id="assistance-data-transfer-procedure-9">8.9.4.2 Assistance Data
Transfer Procedure</h4>
<p>Assistance data transfer is not required for UL NR E-CID
positioning.</p>
<h4 id="location-information-transfer-procedure-8">8.9.4.3 Location
Information Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
position measurements from the gNB.</p>
<p>Figure 8.9.4.3-1 shows the messaging between the LMF and the gNB to
perform this procedure.</p>
<p><img src="media/image42.svg" /></p>
<p>Figure 8.9.4.3-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends an E-CID Measurement Initiation Request message to
the serving gNB to request NR E-CID measurement information. The message
includes indication of NR E-CID measurements requested and whether the
result is expected only once or periodically.</p>
<p>(2) If the report characteristics in step 1 is set to "on demand",
the gNB obtains the requested NR E-CID measurements and returns them in
an E-CID Measurement Initiation Response message to the LMF. The E-CID
Measurement Initiation Response message includes the obtained NR E-CID
measurements as defined in the clause 8.9.2.3.</p>
<p>If the report characteristics in step 1 is set to "periodic", the gNB
replies with an E-CID Measurement Initiation Response message without
including any measurements in the message. The gNB then periodically
initiates the E-CID Measurement Report procedure in step 3 for the NR
E-CID measurements, with the requested reporting periodicity.<br />
<br />
If the gNB is not able to accept the E-CID Measurement Initiation
Request message in step 1, the gNB returns a failure message indicating
the cause of the failure.</p>
<p>(3) The gNB periodically provides the NR E-CID measurements as
defined in the clause 8.9.2.3 to the LMF if that was requested at step
1.</p>
<p>(4) If the previously requested NR E-CID measurements can no longer
be reported, the gNB notifies the LMF by sending an E-CID Measurement
Failure Indication message.</p>
<p>(5) When the LMF wants to terminate an ongoing NR E-CID measurement
it sends an E-CID Measurement Termination Command message to the
gNB.</p>
<h2 id="multi-rtt-positioning-1">8.10 Multi-RTT positioning</h2>
<h3 id="general-14">8.10.1 General</h3>
<p>In the Multi-RTT positioning method, the UE position is estimated
based on measurements performed at both, UE and TRPs. The measurements
performed at the UE and TRPs are UE/gNB Rx-Tx time difference
measurements (and optionally DL-PRS-RSRP, DL-PRS-RSRPP, UL-SRS-RSRP,
and/or UL-SRS-RSRPP) of DL-PRS and UL-SRS, which are used by an LMF to
determine the RTTs.</p>
<p>The UE may require measurement gaps to perform the Multi-RTT
measurements from NR TRPs. The UE may request measurement gaps from a
gNB using the procedure described in clause 7.4.1.1. The UE may also
request to activate pre-configured measurement gaps as described in
clause 7.7.2.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-9">8.10.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and UE/gNB.</p>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-ue-8">8.10.2.1
Information that may be transferred from the LMF to UE</h4>
<p>The information that may be transferred from the LMF to the UE are
listed in Table 8.10.2.1-1.</p>
<p>Table 8.10.2.1-1: Assistance data that may be transferred from LMF to
the UE</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>Physical cell IDs (PCIs), global cell IDs (GCIs), and PRS IDs,
ARFCNs of candidate NR TRPs for measurement</td>
</tr>
<tr>
<td>Timing relative to the serving (reference) TRP of candidate NR
TRPs</td>
</tr>
<tr>
<td>DL-PRS configuration of candidate NR TRPs</td>
</tr>
<tr>
<td>SSB information of the TRPs (the time/frequency occupancy of
SSBs)</td>
</tr>
<tr>
<td>PRS-only TP indication</td>
</tr>
<tr>
<td>On-Demand DL-PRS-Configurations</td>
</tr>
<tr>
<td>Validity Area of the Assistance Data</td>
</tr>
</tbody>
</table>
<h4
id="information-that-may-be-transferred-from-the-ue-to-lmf-9">8.10.2.2
Information that may be transferred from the UE to LMF</h4>
<p>The information that may be signalled from UE to the LMF is listed in
Table 8.10.2.2-1. The individual UE measurements are defined in TS
38.215 [37].</p>
<p>Table 8.10.2.2-1: Measurement results that may be transferred from UE
to the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>PCI, GCI, and PRS ID, ARFCN, PRS resource ID, PRS resource set ID
for each measurement</td>
</tr>
<tr>
<td>DL-PRS-RSRP measurement</td>
</tr>
<tr>
<td>UE Rx-Tx time difference measurement</td>
</tr>
<tr>
<td>Time stamp of the measurement</td>
</tr>
<tr>
<td>Quality for each measurement</td>
</tr>
<tr>
<td>TA offset used by UE</td>
</tr>
<tr>
<td>UE Rx TEG IDs, UE Tx TEG IDs, and UE RxTx TEG IDs associated with UE
Rx-Tx time difference measurements</td>
</tr>
<tr>
<td>LOS/NLOS information for UE measurements</td>
</tr>
<tr>
<td>DL-PRS-RSRPP measurement</td>
</tr>
<tr>
<td>The association of UE Tx TEG ID and SRS</td>
</tr>
</tbody>
</table>
<h4
id="information-that-may-be-transferred-from-the-gnb-to-lmf-3">8.10.2.3
Information that may be transferred from the gNB to LMF</h4>
<p>The assistance data that may be transferred from gNB to the LMF is
listed in Table 8.10.2.3-1.</p>
<p>Table 8.10.2.3-1: Assistance data that may be transferred from gNB to
the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>PCI, GCI, ARFCN and TRP IDs of the TRPs served by the gNB</td>
</tr>
<tr>
<td>Timing information of TRPs served by the gNB</td>
</tr>
<tr>
<td>DL-PRS configuration of the TRPs served by the gNB</td>
</tr>
<tr>
<td>SSB information of the TRPs (the time/frequency occupancy of
SSBs)</td>
</tr>
<tr>
<td>Spatial direction information of the DL-PRS Resources of the TRPs
served by the gNB</td>
</tr>
<tr>
<td>Geographical coordinates information of the DL-PRS Resources of the
TRPs served by the gNB</td>
</tr>
<tr>
<td>TRP type</td>
</tr>
<tr>
<td>On-demand DL-PRS information</td>
</tr>
<tr>
<td>TRP Tx TEG association information</td>
</tr>
</tbody>
</table>
<p>The configuration data for a target UE that may be transferred from
the serving gNB to the LMF is listed in Table 8.10.2.3-2.</p>
<p>Table 8.10.2.3-2: UL information/UE configuration data that may be
transferred from serving gNB to the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>UE configuration data</td>
</tr>
<tr>
<td>UE SRS configuration</td>
</tr>
<tr>
<td>SFN initialization time for the SRS configuration</td>
</tr>
<tr>
<td>SRS Transmission Status</td>
</tr>
</tbody>
</table>
<p>The measurement results that may be signalled from gNBs to the LMF is
listed in Table 8.10.2.3-3.</p>
<p>Table 8.10.2.3-3: Measurement results that may be transferred from
gNBs to the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Measurement results</td>
</tr>
<tr>
<td>NCGI and TRP ID of the measurement</td>
</tr>
<tr>
<td>gNB Rx-Tx time difference measurement</td>
</tr>
<tr>
<td>UL-SRS-RSRP</td>
</tr>
<tr>
<td>UL-SRS-RSRPP</td>
</tr>
<tr>
<td>UL Angle of Arrival (azimuth and/or elevation) <sup>NOTE
1</sup></td>
</tr>
<tr>
<td>Multiple UL Angle of Arrival (azimuth and/or elevation) <sup>NOTE
1</sup></td>
</tr>
<tr>
<td>SRS Resource Type</td>
</tr>
<tr>
<td>Time stamp of the measurement</td>
</tr>
<tr>
<td>Quality for each measurement</td>
</tr>
<tr>
<td>Beam Information of the measurement</td>
</tr>
<tr>
<td>LoS/NLoS information for each measurement</td>
</tr>
<tr>
<td>ARP ID of the measurement</td>
</tr>
<tr>
<td>NOTE 1: When used with UL-AoA for hybrid positioning.</td>
</tr>
</tbody>
</table>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-gnbs">8.10.2.4
Information that may be transferred from the LMF to gNBs</h4>
<p>The requested UL-SRS transmission characteristics information that
may be signalled from the LMF to the gNB is listed in Table
8.10.2.4-1.</p>
<p>Table 8.10.2.4-1: Requested UL-SRS transmission characteristics
information that may be transferred from LMF to gNB.</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>Number Of Transmissions/duration for which the UL-SRS is
requested</td>
</tr>
<tr>
<td>Bandwidth</td>
</tr>
<tr>
<td>Resource type (periodic, semi-persistent, aperiodic)</td>
</tr>
<tr>
<td>Number of requested SRS resource sets and SRS resources per set</td>
</tr>
<tr>
<td><p>Pathloss reference:</p>
<p>- PCI, SSB Index</p>
<p>- DL-PRS ID, DL-PRS Resource Set ID, DL-PRS Resource ID</p></td>
</tr>
<tr>
<td><p>Spatial relation info</p>
<p>- PCI, SSB Index</p>
<p>- DL-PRS ID, DL-PRS Resource Set ID, DL-PRS Resource ID</p>
<p>- NZP CSI-RS Resource ID</p>
<p>- SRS Resource ID</p>
<p>- Positioning SRS Resource ID</p></td>
</tr>
<tr>
<td>Periodicity of the SRS for each SRS resource set</td>
</tr>
<tr>
<td>SSB Information</td>
</tr>
<tr>
<td>Carrier frequency of SRS transmission bandwidth</td>
</tr>
</tbody>
</table>
<p>The TRP measurement request information that may be signalled from
the LMF to the gNBs is listed in Table 8.10.2.4-2.</p>
<p>Table 8.10.2.4-2: TRP Measurement request information that may be
transferred from LMF to gNBs.</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>TRP ID, and NCGI of the TRP to receive UL-SRS</td>
</tr>
<tr>
<td>UE-SRS configuration</td>
</tr>
<tr>
<td>UL timing information together with timing uncertainty, for
reception of SRS by candidate TRPs</td>
</tr>
<tr>
<td>Report characteristics for the measurements</td>
</tr>
<tr>
<td>Measurement Quantities</td>
</tr>
<tr>
<td>Measurement periodicity</td>
</tr>
<tr>
<td>Measurement beam information request</td>
</tr>
<tr>
<td>Search window information</td>
</tr>
<tr>
<td>Expected UL AoA/ZoA and uncertainty range</td>
</tr>
<tr>
<td>Number of TRP Rx TEGs</td>
</tr>
<tr>
<td>Number of TRP RxTx TEGs</td>
</tr>
<tr>
<td>Response time</td>
</tr>
<tr>
<td>Measurement characteristics request indicator</td>
</tr>
<tr>
<td>Measurement time occasions for a measurement instance</td>
</tr>
</tbody>
</table>
<p>The Positioning Activation/Deactivation request information that may
be signalled from the LMF to the gNB is listed in Table 8.10.2.4-3.</p>
<p>Table 8.10.2.4-3: Requested positioning activation/deactivation
information that may be transferred from LMF to gNB.</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td><p>SP UL-SRS:</p>
<p>- Activation or Deactivation request</p>
<p>- Positioning SRS Resource Set ID which is to be
activated/deactivated</p>
<p>- Spatial relation for Resource ID<sub>i</sub></p>
<p>- Activation Time</p></td>
</tr>
<tr>
<td><p>Aperiodic UL-SRS</p>
<p>- Aperiodic SRS Resource Trigger List</p>
<p>- Activation Time</p></td>
</tr>
<tr>
<td><p>UL-SRS:</p>
<p>- Release all</p></td>
</tr>
</tbody>
</table>
<h3 id="multi-rtt-positioning-procedures">8.10.3 Multi-RTT Positioning
Procedures</h3>
<p>The procedures described in this clause support Multi-RTT positioning
measurements obtained by the UE and TRPs/gNB.</p>
<h4 id="procedures-between-lmf-and-ue">8.10.3.1 Procedures between LMF
and UE</h4>
<h5 id="capability-transfer-procedure-10">8.10.3.1.1 Capability Transfer
Procedure</h5>
<p>The Capability Transfer procedure for Multi-RTT positioning is
described in clause 7.1.2.1.</p>
<h5 id="assistance-data-transfer-procedure-10">8.10.3.1.2 Assistance
Data Transfer Procedure</h5>
<h6 id="assistance-data-transfer-between-lmf-and-ue-1">8.10.3.1.2.1
Assistance Data Transfer between LMF and UE</h6>
<p>The purpose of this procedure is to enable the LMF to provide
assistance data to the UE (e.g., as part of a positioning procedure) and
the UE to request assistance data from the LMF (e.g., as part of a
positioning procedure). The LMF may provide the pre-configured DL-PRS
assistance data (with associated validity criteria) to the UE (before or
during an ongoing LPP positioning session), to be utilized for potential
positioning measurements at a future time. Pre-configured DL-PRS
assistance data may consist of multiple instances, where each instance
is applicable to a different area within the network. One or more
assistance data instances may be provided. Each instance is provided in
one LPP Assistance Data messages.</p>
<p>If a UE receives assistance data for a TRP for which it has already
stored assistance data, it overwrites the stored assistance data,
whereas if a UE receives assistance data for a TRP for which it has not
stored assistance data, it stores the assistance data for the TRP and
maintains the already stored assistance data for other TRPs. The TRPs
are uniquely identified using a combination of PRS-ID and Cell-ID. The
number TRPs for which the UE can store Assistance Data is a UE
capability and is indicated by the number of areas a UE can support.</p>
<p class="heading"
id="lmf-initiated-assistance-data-delivery-5">8.10.3.1.2.1.1 LMF
initiated Assistance Data Delivery</p>
<p>Figure 8.10.3.1.2.1.1-1 shows the Assistance Data Delivery operations
for the Multi-RTT positioning method when the procedure is initiated by
the LMF.</p>
<p><img src="media/image43.svg" /></p>
<p>Figure 8.10.3.1.2.1.1-1: LMF-initiated Assistance Data Delivery
Procedure</p>
<p>(1) The LMF determines that assistance data needs to be provided to
the UE (e.g., as part of a positioning procedure) and sends an LPP
Provide Assistance Data message to the UE. This message may include any
of the Multi-RTT positioning assistance data defined in Table
8.10.2.1-1.</p>
<p class="heading"
id="ue-initiated-assistance-data-transfer-5">8.10.3.1.2.1.2 UE initiated
Assistance Data Transfer</p>
<p>Figure 8.10.3.1.2.1.2-1 shows the Assistance Data Transfer operations
for the Multi-RTT positioning method when the procedure is initiated by
the UE.</p>
<p><img src="media/image44.svg" /></p>
<p>Figure 8.10.3.1.2.1.2-1: UE-initiated Assistance Data Transfer
Procedure</p>
<p>(1) The UE determines that certain Multi-RTT positioning assistance
data are desired (e.g., as part of a positioning procedure when the LMF
provided assistance data are not sufficient for the UE to fulfil the
request) and sends an LPP Request Assistance Data message to the LMF.
This request includes an indication of which specific Multi-RTT
assistance data are requested. Additional information concerning the
UE's approximate location and serving and neighbour cells may also be
provided in the Request Assistance Data message and/or in an
accompanying Provide Location Information message to help the LMF
provide appropriate assistance data. This additional data may include
the UE's last known location if available, the cell IDs of the UE
serving NG-RAN node and possibly neighbour NG-RAN nodes, as well as NR
E-CID measurements.</p>
<p>(2) The LMF provides the requested assistance in an LPP Provide
Assistance Data message, if available at the LMF. If any of the UE
requested assistance data in step (1) are not provided in step 2, the UE
shall assume that the requested assistance data are not supported, or
currently not available at the LMF. If none of the UE requested
assistance data in step (1) can be provided by the LMF, return any
information that can be provided in an LPP message of type Provide
Assistance Data which includes a cause indication for the not provided
assistance data.</p>
<h5 id="location-information-transfer-procedure-9">8.10.3.1.3 Location
Information Transfer Procedure</h5>
<p>The purpose of this procedure is to enable the LMF to request
position measurements from the UE, or to enable the UE to provide
location measurements to the LMF for position calculation.</p>
<h6
id="lmf-initiated-location-information-transfer-procedure-7">8.10.3.1.3.1
LMF-initiated Location Information Transfer Procedure</h6>
<p>Figure 8.10.3.1.3.1-1 shows the Location Information Transfer
operations for the Multi-RTT positioning method when the procedure is
initiated by the LMF.</p>
<p><img src="media/image45.svg" /></p>
<p>Figure 8.10.3.1.3.1-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends an LPP Request Location Information message to the
UE. This request includes indication of Multi-RTT measurements
requested, including any needed measurement configuration information,
and required response time.</p>
<p>(2) The UE obtains Multi-RTT measurements as requested in step 1. The
UE then sends an LPP Provide Location Information message to the LMF,
before the Response Time provided in step (1) elapsed, and includes the
obtained Multi-RTT measurements. If the UE is unable to perform the
requested measurements, or the Response Time elapsed before any of the
requested measurements were obtained, the UE returns any information
that can be provided in an LPP message of type Provide Location
Information which includes a cause indication for the not provided
location information.</p>
<h6
id="ue-initiated-location-information-delivery-procedure-9">8.10.3.1.3.2
UE-initiated Location Information Delivery procedure</h6>
<p>Figure 8.10.3.1.3.2-1 shows the Location Information Delivery
procedure operations for the Multi-RTT positioning method when the
procedure is initiated by the UE.</p>
<p><img src="media/image46.svg" /></p>
<p>Figure 8.10.3.1.3.2-1: UE-initiated Location Information Delivery
Procedure.</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include any UE
Multi-RTT measurements already available at the UE.</p>
<h4 id="procedures-between-lmf-and-gnb">8.10.3.2 Procedures between LMF
and gNB</h4>
<h5 id="assistance-data-delivery-between-lmf-and-gnb">8.10.3.2.1
Assistance Data Delivery between LMF and gNB</h5>
<p>The purpose of these procedures is to enable the gNB to provide
assistance data described in Table 8.10.2.3-1 to the LMF, for subsequent
delivery to the UE using the procedures of clause 8.10.3.1.2.1 or for
use in the calculation of positioning estimates at the LMF or enable the
LMF to request UL-SRS configuration information from the serving gNB of
a target UE.</p>
<p>Figure 8.10.3.2.1-1 shows the TRP Information Exchange operation from
the gNB to the LMF for the Multi-RTT positioning method.</p>
<p><img src="media/image47.svg" /></p>
<p>Figure 8.10.3.2.1-1: LMF-initiated TRP Information Exchange
Procedure</p>
<p>(1) The LMF determines that certain TRP configuration information is
desired (e.g., as part of a periodic update or as triggered by OAM) and
sends an NRPPa TRP INFORMATION REQUEST message to the gNB. This request
includes an indication of which specific TRP configuration information
is requested.</p>
<p>(2) The gNB provides the requested TRP information in an NRPPa TRP
INFORMATION RESPONSE message, if available at the gNB. If the gNB is not
able to provide any information, it returns an TRP INFORMATION FAILURE
message indicating the cause of the failure.</p>
<p>Figure 8.10.3.2.1-2 shows the UL information Delivery operation from
the serving gNB to the LMF.</p>
<p><img src="media/image48.svg" /></p>
<p>Figure 8.10.3.2.1-2: LMF-initiated UL Information Request
Procedure</p>
<p>(1) The LMF sends a NRPPa message POSITIONING INFORMATION REQUEST to
the serving gNB of the target UE to request UE SRS configuration
information. If the message includes the Requested UL-SRS Transmission
Characteristics as listed in Table 8.10.2.4-1, the gNB should take this
information into account when configuring UL-SRS transmissions for the
UE.</p>
<p>(2) The serving gNB determines the UE SRS configuration to be
allocated for the UE and sends NRPPa message POSITIONING INFORMATION
RESPONSE to the LMF that includes the UE SRS configuration defined in
Table 8.10.2.3-2. If the serving gNB is not able to provide the
requested information, it returns a failure message indicating the cause
of the failure.</p>
<p>(3) If a change has occurred in the UE SRS configuration during the
UE SRS time duration requested at step 1, the gNB sends a POSITIONING
INFORMATION UPDATE message to the LMF. This message contains, in the
case of a change in UE SRS configuration parameters, the UE SRS
configuration information for all cells with UE SRS configured, or an
update in SRS transmission status.</p>
<h5
id="location-information-transferassistance-data-transfer-procedure">8.10.3.2.2
Location Information Transfer/Assistance Data Transfer Procedure</h5>
<p>The purpose of this procedure is to enable the LMF to request
position measurements from a gNB for position calculation of the UE and
also provide necessary assistance data to the gNB.</p>
<p>Figure 8.10.3.2.2-1 shows the messaging between the LMF and the gNB
to perform this procedure.</p>
<p><img src="media/image49.svg" /></p>
<p>Figure 8.10.3.2.2-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends a NRPPa message to the selected gNB to request
Multi-RTT measurement information. The message includes any information
required for the gNB to perform the measurements as defined in Table
8.10.2.4-2.</p>
<p>(2) If the report characteristics in step 1 is set to "on demand",
the gNB obtains the requested Multi-RTT measurements and returns them in
a Measurement Response message to the LMF. The Measurement Response
message includes the obtained Multi-RTT measurements as defined in Table
8.10.2.3-3.</p>
<p>If the report characteristics in step 1 is set to "periodic", the gNB
replies with a Measurement Response message without including any
measurements in the message. The gNB then periodically initiates the
Measurement Report procedure in step 3 for the Multi-RTT measurements,
with the requested reporting periodicity.<br />
<br />
If the gNB is not able to accept the Measurement Request message in step
1, the gNB returns a failure message indicating the cause of the
failure.</p>
<p>(3) The gNB periodically provides the Multi-RTT measurements as
defined in Table 8.10.2.3-3. to the LMF if that was requested at step
1.</p>
<p>(4) At any time after step 2, the LMF may send a Measurement Update
message to the gNB providing updated information required for the gNB to
perform the Multi-RTT measurements as defined in Table 8.10.2.4-2. Upon
receiving the message, the gNB overwrites the previously received
measurement configuration information.</p>
<p>(5) If the previously requested Multi-RTT measurements can no longer
be reported, the gNB notifies the LMF by sending a Measurement Failure
Indication message.</p>
<p>(6) When the LMF wants to abort an ongoing Multi-RTT measurement it
sends a Measurement Abort message to the gNB.</p>
<h5 id="positioning-activationdeactivation-procedure">8.10.3.2.3
Positioning Activation/Deactivation Procedure</h5>
<p>The purpose of this procedure is to enable the LMF to request
activation and deactivation of UL-SRS transmission of the target UE.</p>
<p>Figure 8.10.3.2.3-1 shows the messaging between the LMF and the gNB
to perform this procedure.</p>
<p><img src="media/image50.svg" /></p>
<p>Figure 8.10.3.2.3-1: Positioning Activation/Deactivation
Procedure.</p>
<p>(1) The LMF sends the NRPPa Positioning Activation Request message to
the serving gNB of the target UE to request UL-SRS activation for the
target UE. For a semi-persistent UL-SRS, the message includes an
indication of an UL-SRS resource set to be activated and may include
information that indicates the spatial relation for the semi-persistent
UL-SRS resource to be activated, as listed in Table 8.10.2.4-3. For an
aperiodic UL-SRS, the message may include aperiodic SRS Resource trigger
list to indicate the UL-SRS resource to be activated.</p>
<p>(2) For semi-persistent UL-SRS, the serving gNB may then activate the
configured semi-persistent UL-SRS resource sets by sending the SP
Positioning SRS Activation/Deactivation MAC CE command as specified in
TS 38.321 [39]. For aperiodic UL-SRS, the serving gNB may then activate
the configured aperiodic UL-SRS resource sets by sending the DCI as
specified in TS 38.212 [40].<br />
If the UL-SRS has been successfully activated as requested in step 1,
the gNB sends the NRPPa Positioning Activation Response message to the
LMF. The serving gNB may include a system frame number and a slot number
in the NRPPa Positioning Activation Response message to the LMF. If the
serving gNB is not able to fulfil the request from step 1, it returns
the Positioning Activation Failure message indicating the cause of the
failure.</p>
<p>(3) If a previously activated UL-SRS should be deactivated, or the
UL-SRS transmission should be released, the LMF sends the NRPPa
Positioning Deactivation message to the serving gNB of the target device
to request deactivation of UL-SRS resource sets, or release all the
UL-SRS resources. This message includes an indication of the UL-SRS
resource set to be deactivated, or an indication of releasing all UL-SRS
resources.</p>
<h3 id="sequence-of-procedure-for-multi-rtt-positioning">8.10.4 Sequence
of Procedure for Multi-RTT positioning</h3>
<p>Figure 8.10.4-1 shows the messaging between the LMF, the gNBs and the
UE to perform LMF-initiated Location Information Transfer Procedure for
Multi-RTT.</p>
<p><img src="media/image51.svg" /></p>
<p>Figure 8.10.4-1: Multi-RTT positioning procedure</p>
<p>0. The LMF may use the procedure in Figure 8.10.3.2.1-1 to obtain the
TRP information required for Multi-RTT positioning.</p>
<p>1. The LMF may request the positioning capabilities of the target
device using the LPP Capability Transfer procedure described in clause
8.10.3.1.1.</p>
<p>2. The LMF sends a NRPPa POSITIONING INFORMATION REQUEST message to
the serving gNB to request UL information for the target device as
described in Figure 8.10.3.2.1-2.</p>
<p>3. The serving gNB determines the resources available for UL-SRS and
configures the target device with the UL-SRS resource sets at step
3a.</p>
<p>4. The serving gNB provides the UL-SRS configuration information to
the LMF in a NRPPa POSITIONING INFORMATION RESPONSE message.</p>
<p>NOTE: It is up to implementation on whether SRS configuration is
provided earlier than DL-PRS configuration.</p>
<p>5a. In the case of semi-persistent or aperiodic SRS, the LMF may
request activation of UE SRS transmission by sending a NRPPa Positioning
Activation Request message to the serving gNB of the target device as
described in clause 8.10.3.2.3.</p>
<p>5b. The gNB then activates the UE SRS transmission. The target device
begins the UL-SRS transmission according to the time domain behavior of
UL-SRS resource configuration.</p>
<p>5c. The gNB sends a NRPPa Positioning Activation Response
message.</p>
<p>6. The LMF provides the UL information to the selected gNBs in a
NRPPa MEASUREMENT REQUEST message as described in clause 8.10.3.2.2. The
message includes all information required to enable the gNBs/TRPs to
perform the UL measurements.</p>
<p>7. The LMF sends a LPP Provide Assistance Data message to the target
device as described in clause 8.10.3.1.2.1. The message includes any
required assistance data for the target device to perform the necessary
DL-PRS measurements.</p>
<p>8. The LMF sends a LPP Request Location Information message to
request Multi-RTT measurements.</p>
<p>9a: The target device performs the DL-PRS measurements from all gNBs
provided in the assistance data at step 7.</p>
<p>9b: Each gNB configured at step 6 measures the UE SRS transmissions
from the target device.</p>
<p>10. The target device reports the DL-PRS measurements for Multi-RTT
to the LMF in a LPP Provide Location Information message.</p>
<p>11. Each gNB reports the UE SRS measurements to the LMF in a NRPPa
Measurement Response message as described in clause 8.10.3.2.2.</p>
<p>12. The LMF sends a NRPPa POSITIONING DEACTIVATION message to the
serving gNB as described in clause 8.10.3.2.3.</p>
<p>13. The LMF determines the RTTs from the UE and gNB Rx-Tx time
difference measurements for each gNB for which corresponding UL and DL
measurements were provided at steps 10 and 11 and calculates the
position of the target device.</p>
<h2 id="dl-aod-positioning-1">8.11 DL-AoD positioning</h2>
<h3 id="general-15">8.11.1 General</h3>
<p>In the DL-AoD positioning method, the UE position is estimated based
on DL-PRS-RSRP and/or DL-PRS-RSRPP measurements taken at the UE of
downlink radio signals from multiple NR TRPs, along with knowledge of
the spatial information of the downlink radio signals and geographical
coordinates of the TRPs.</p>
<p>The UE while connected to a gNB may require measurement gaps to
perform the DL-AoD measurements from NR TRPs. The UE may request
measurement gaps from a gNB using the procedure described in clause
7.4.1.1. The UE may also request to activate pre-configured measurement
gaps as described in clause 7.7.2.</p>
<p>The specific positioning techniques used to estimate the UE's
location from this information are beyond the scope of this
specification.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-10">8.11.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and UE/gNB.</p>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-ue-9">8.11.2.1
Information that may be transferred from the LMF to UE</h4>
<p>The information that may be transferred from the LMF to the UE are
listed in table 8.11.2.1-1.</p>
<p>Table 8.11.2.1-1: Assistance data that may be transferred from LMF to
the UE</p>
<table>
<colgroup>
<col style="width: 70%" />
<col style="width: 15%" />
<col style="width: 13%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>UE-assisted</td>
<td>UE-based</td>
</tr>
<tr>
<td>Physical cell IDs (PCIs), global cell IDs (GCIs), ARFCN, and PRS IDs
of candidate NR TRPs for measurement</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Timing relative to the serving (reference) TRP of candidate NR
TRPs</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>DL-PRS configuration of candidate NR TRPs</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>SSB information of the TRPs (the time/frequency occupancy of
SSBs)</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Spatial direction information (e.g. azimuth, elevation etc.) of the
DL-PRS Resources of the TRPs served by the gNB</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Geographical coordinates of the TRPs served by the gNB (include a
transmission reference location for each DL-PRS Resource ID, reference
location for the transmitting antenna of the reference TRP, relative
locations for transmitting antennas of other TRPs)</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>PRS-only TP indication</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>TRP beam/antenna information (including azimuth angle, zenith angle
and relative power between PRS resources per angle per TRP)</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>LOS/NLOS indicators</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>On-Demand DL-PRS-Configurations</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Expected Angle Assistance information</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>PRS priority list for measurement reporting</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Validity Area of the Assistance Data</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h4
id="information-that-may-be-transferred-from-the-ue-to-lmf-10">8.11.2.2
Information that may be transferred from the UE to LMF</h4>
<p>The information that may be signalled from UE to the LMF is listed in
Table 8.11.2.2-1. The individual UE measurements are defined in TS
38.215 [37].</p>
<p>Table 8.11.2.2-1: Measurement results that may be transferred from UE
to the LMF</p>
<table>
<colgroup>
<col style="width: 66%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>UEassisted</td>
<td>UEbased</td>
</tr>
<tr>
<td>Latitude/Longitude/Altitude, together with uncertainty shape</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>PCI, GCI, ARFCN, PRS resource ID, PRS resource set ID and PRS ID for
each measurement</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>DL-PRS-RSRP measurement</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Time stamp of the measurements</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Time stamp of location estimate</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>DL-PRS receive beam index</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>DL-PRS-RSRPP measurements</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>LOS/NLOS information for UE measurements</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody>
</table>
<h4
id="information-that-may-be-transferred-from-the-gnb-to-lmf-4">8.11.2.3
Information that may be transferred from the gNB to LMF</h4>
<p>The assistance data that may be transferred from gNB to the LMF is
listed in Table 8.11.2.3-1.</p>
<p>Table 8.11.2.3-1: Assistance data that may be transferred from gNB to
the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>PCI, GCI, ARFCN, and TRP IDs of the TRPs served by the gNB</td>
</tr>
<tr>
<td>Timing information of TRPs served by the gNB</td>
</tr>
<tr>
<td>DL-PRS configuration of the TRPs served by the gNB</td>
</tr>
<tr>
<td>SSB information of the TRPs (the time/frequency occupancy of
SSBs)</td>
</tr>
<tr>
<td>Spatial direction information of the DL-PRS Resources of the TRPs
served by the gNB</td>
</tr>
<tr>
<td>Geographical coordinates information of the DL-PRS Resources of the
TRPs served by the gNB</td>
</tr>
<tr>
<td>TRP type</td>
</tr>
<tr>
<td>On-demand DL-PRS information</td>
</tr>
<tr>
<td>TRP beam antenna information</td>
</tr>
</tbody>
</table>
<h3 id="dl-aod-positioning-procedures">8.11.3 DL-AoD Positioning
Procedures</h3>
<p>The procedures described in this clause support UE-assisted and
UE-based DL-AOD.</p>
<h4 id="procedures-between-lmf-and-ue-1">8.11.3.1 Procedures between LMF
and UE</h4>
<h5 id="capability-transfer-procedure-11">8.11.3.1.1 Capability Transfer
Procedure</h5>
<p>The Capability Transfer procedure for DL-AoD positioning is described
in clause 7.1.2.1.</p>
<h5 id="assistance-data-transfer-procedure-11">8.11.3.1.2 Assistance
Data Transfer Procedure</h5>
<p>The purpose of this procedure is to enable the LMF to provide
assistance data to the UE (e.g., as part of a positioning procedure) and
the UE to request assistance data from the LMF (e.g., as part of a
positioning procedure). The LMF may provide the pre-configured DL-PRS
assistance data (with associated validity criteria) to the UE (before or
during an ongoing LPP positioning session), to be utilized for potential
positioning measurements at a future time. Pre-configured DL-PRS
assistance data may consist of multiple instances, where each instance
is applicable to a different area within the network. One or more
assistance data instances may be provided. Each instance is provided in
one LPP Assistance Data messages.</p>
<p>If a UE receives assistance data for a TRP for which it has already
stored assistance data, it overwrites the stored assistance data,
whereas if a UE receives assistance data for a TRP for which it has not
stored assistance data, it stores the assistance data for the TRP and
maintains the already stored assistance data for other TRPs. The TRPs
are uniquely identified using a combination of PRS-ID and Cell-ID. The
number TRPs for which the UE can store Assistance Data is a UE
capability and is indicated by the number of areas a UE can support.</p>
<h6 id="lmf-initiated-assistance-data-delivery-6">8.11.3.1.2.1 LMF
initiated Assistance Data Delivery</h6>
<p>Figure 8.11.3.1.2.1-1 shows the Assistance Data Delivery operations
for the DL-AoD positioning method when the procedure is initiated by the
LMF.</p>
<p><img src="media/image52.svg" /></p>
<p>Figure 8.11.3.1.2.1-1: LMF-initiated Assistance Data Delivery
Procedure</p>
<p>(1) The LMF determines that assistance data needs to be provided to
the UE (e.g., as part of a positioning procedure) and sends an LPP
Provide Assistance Data message to the UE. This message may include any
of the DL-AoD positioning assistance data defined in Table
8.11.2.1-1.</p>
<h6 id="ue-initiated-assistance-data-transfer-6">8.11.3.1.2.2 UE
initiated Assistance Data Transfer</h6>
<p>Figure 8.11.3.1.2.2-1 shows the Assistance Data Transfer operations
for the DL-AoD positioning method when the procedure is initiated by the
UE.</p>
<p><img src="media/image53.svg" /></p>
<p>Figure 8.11.3.1.2.2-1: UE-initiated Assistance Data Transfer
Procedure</p>
<p>(1) The UE determines that certain DL-AoD positioning assistance data
are desired (e.g., as part of a positioning procedure when the LMF
provided assistance data are not sufficient for the UE to fulfil the
request) and sends an LPP Request Assistance Data message to the LMF.
This request includes an indication of which specific DL-AoD assistance
data are requested. Additional information concerning the UE's
approximate location and serving and neighbour cells may also be
provided in the Request Assistance Data message and/or in an
accompanying Provide Location Information message to help the LMF
provide appropriate assistance data. This additional data may include
the UE's last known location if available, the cell IDs of the UE
serving NG-RAN node and possibly neighbour NG-RAN nodes, as well as NR
E-CID measurements.</p>
<p>(2) The LMF provides the requested assistance in an LPP Provide
Assistance Data message, if available at the LMF. If any of the UE
requested assistance data in step (1) are not provided in step 2, the UE
shall assume that the requested assistance data are not supported, or
currently not available at the LMF. If none of the UE requested
assistance data in step (1) can be provided by the LMF, return any
information that can be provided in an LPP message of type Provide
Assistance Data which includes a cause indication for the not provided
assistance data.</p>
<h5 id="location-information-transfer-procedure-10">8.11.3.1.3 Location
Information Transfer Procedure</h5>
<p>The purpose of this procedure is to enable the LMF to request
location estimate from the UE, or to enable the UE to provide location
measurements to the LMF for position calculation.</p>
<h6
id="lmf-initiated-location-information-transfer-procedure-8">8.11.3.1.3.1
LMF-initiated Location Information Transfer Procedure</h6>
<p>Figure 8.11.3.1.3.1-1 shows the Location Information Transfer
operations for the DL-AoD positioning method when the procedure is
initiated by the LMF.</p>
<p><img src="media/image54.svg" /></p>
<p>Figure 8.11.3.1.3.1-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends an LPP Request Location Information message to the
UE. This request includes indication of DL-AoD measurements requested,
including any needed measurement configuration information, and required
response time.</p>
<p>(2) The UE obtains DL-AoD measurements as requested in step 1. The UE
then sends an LPP Provide Location Information message to the LMF,
before the Response Time provided in step (1) elapsed, and includes the
obtained DL-AoD measurements. If the UE is unable to perform the
requested measurements, or the Response Time elapsed before any of the
requested measurements were obtained, the UE returns any information
that can be provided in an LPP message of type Provide Location
Information which includes a cause indication for the not provided
location information.</p>
<h6
id="ue-initiated-location-information-delivery-procedure-10">8.11.3.1.3.2
UE-initiated Location Information Delivery procedure</h6>
<p>Figure 8.11.3.1.3.2-1 shows the Location Information Delivery
procedure operations for the DL-AoD positioning method when the
procedure is initiated by the UE.</p>
<p><img src="media/image55.svg" /></p>
<p>Figure 8.11.3.1.3.2-1: UE-initiated Location Information Delivery
Procedure.</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include any UE DL-AoD
measurements already available at the UE.</p>
<h4 id="procedures-between-lmf-and-gnb-1">8.11.3.2 Procedures between
LMF and gNB</h4>
<h5 id="assistance-data-delivery-procedure">8.11.3.2.1 Assistance Data
Delivery procedure</h5>
<p>The purpose of this procedure is to enable the gNB to provide
assistance data described in Table 8.11.2.3-1 to the LMF, for subsequent
delivery to the UE using the procedures of clause 8.11.3.1.2 or for use
in the calculation of positioning estimates at the LMF.</p>
<h6
id="lmf-initiated-assistance-data-delivery-to-the-lmf-1">8.11.3.2.1.1
LMF-initiated assistance data delivery to the LMF</h6>
<p>Figure 8.11.3.2.1.1-1 shows the TRP Information Exchange operation
from the gNB to the LMF for the DL-AoD positioning method.</p>
<p><img src="media/image47.svg" /></p>
<p>Figure 8.11.3.2.1.1-1: LMF-initiated TRP Information Exchange
Procedure</p>
<p>(1) The LMF determines that certain TRP configuration information is
desired (e.g., as part of a periodic update or as triggered by OAM) and
sends an NRPPa TRP INFORMATION REQUEST message to the gNB. This request
includes an indication of which specific TRP configuration information
is requested.</p>
<p>(2) The gNB provides the requested TRP information in an NRPPa TRP
INFORMATION RESPONSE message, if available at the gNB. If the gNB is not
able to provide any information, it returns an TRP INFORMATION FAILURE
message indicating the cause of the failure.</p>
<h2 id="dl-tdoa-positioning-1">8.12 DL-TDOA positioning</h2>
<h3 id="general-16">8.12.1 General</h3>
<p>In the DL-TDOA positioning method, the UE position is estimated based
on DL RSTD (and optionally DL-PRS-RSRP and/or DL-PRS-RSRPP) measurements
taken at the UE of downlink radio signals from multiple NR TRPs, along
with knowledge of the geographical coordinates of the TRPs and their
relative downlink timing.</p>
<p>The UE while connected to a gNB may require measurement gaps to
perform the DL-TDOA measurements from NR TRPs. The UE may request
measurement gaps from a gNB using the procedure described in clause
7.4.1.1. The UE may also request to activate pre-configured measurement
gaps as described in clause 7.7.2.</p>
<p>The specific positioning techniques used to estimate the UE's
location from this information are beyond the scope of this
specification.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-11">8.12.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and UE/gNB.</p>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-ue-10">8.12.2.1
Information that may be transferred from the LMF to UE</h4>
<p>The information that may be transferred from the LMF to the UE are
listed in table 8.12.2.1-1.</p>
<p>Table 8.12.2.1-1: Assistance data that may be transferred from LMF to
the UE</p>
<table>
<colgroup>
<col style="width: 71%" />
<col style="width: 14%" />
<col style="width: 13%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>UEassisted</td>
<td>UEbased</td>
</tr>
<tr>
<td>Physical cell IDs (PCIs), global cell IDs (GCIs), ARFCN, and PRS IDs
of candidate NR TRPs for measurement</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Timing relative to the serving (reference) TRP of candidate NR
TRPs</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>DL-PRS configuration of candidate NR TRPs</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>SSB information of the TRPs (the time/frequency occupancy of
SSBs)</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Spatial direction information (e.g. azimuth, elevation etc.) of the
DL-PRS Resources of the TRPs served by the gNB</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Geographical coordinates of the TRPs served by the gNB (include a
transmission reference location for each DL-PRS Resource ID, reference
location for the transmitting antenna of the reference TRP, relative
locations for transmitting antennas of other TRPs)</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Fine Timing relative to the serving (reference) TRP of candidate NR
TRPs</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>PRS-only TP indication</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>The association information of DL-PRS resources with TRP Tx TEG
ID</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>LOS/NLOS indicators</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>On-Demand DL-PRS-Configurations</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Validity Area of the Assistance Data</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h4
id="information-that-may-be-transferred-from-the-ue-to-lmf-11">8.12.2.2
Information that may be transferred from the UE to LMF</h4>
<p>The information that may be signalled from UE to the LMF is listed in
Table 8.12.2.2-1. The individual UE measurements are defined in TS
38.215 [37].</p>
<p>Table 8.12.2.2-1: Measurement results that may be transferred from UE
to the LMF</p>
<table>
<colgroup>
<col style="width: 66%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
<td>UEassisted</td>
<td>UEbased</td>
</tr>
<tr>
<td>Latitude/Longitude/Altitude, together with uncertainty shape</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>PCI, GCI, ARFCN, PRS resource ID, PRS resource set ID and PRS ID for
each measurement</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>DL RSTD measurement</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>DL-PRS-RSRP measurement</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Time stamp of the measurements</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Time stamp of location estimate</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Quality for each measurement</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>UE Rx TEG IDs for DL RSTD measurements</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>DL-PRS-RSRPP measurement</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>LOS/NLOS information for UE measurements</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody>
</table>
<h4
id="information-that-may-be-transferred-from-the-gnb-to-lmf-5">8.12.2.3
Information that may be transferred from the gNB to LMF</h4>
<p>The assistance data that may be transferred from gNB to the LMF is
listed in Table 8.12.2.3-1.</p>
<p>Table 8.12.2.3-1: Assistance data that may be transferred from gNB to
the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>PCI, GCI, ARFCN, and TRP IDs of the TRPs served by the gNB</td>
</tr>
<tr>
<td>Timing information of TRPs served by the gNB</td>
</tr>
<tr>
<td>DL-PRS configuration of the TRPs served by the gNB</td>
</tr>
<tr>
<td>SSB information of the TRPs (the time/frequency occupancy of
SSBs)</td>
</tr>
<tr>
<td>Spatial direction information of the DL-PRS Resources of the TRPs
served by the gNB</td>
</tr>
<tr>
<td>Geographical coordinates information of the DL-PRS Resources of the
TRPs served by the gNB</td>
</tr>
<tr>
<td>TRP type</td>
</tr>
<tr>
<td>On-demand DL-PRS information</td>
</tr>
<tr>
<td>TRP Tx TEG association information</td>
</tr>
</tbody>
</table>
<h3 id="dl-tdoa-positioning-procedures">8.12.3 DL-TDOA Positioning
Procedures</h3>
<p>The procedures described in this clause support UE-assisted and
UE-based DL-TDOA.</p>
<h4 id="procedures-between-lmf-and-ue-2">8.12.3.1 Procedures between LMF
and UE</h4>
<h5 id="capability-transfer-procedure-12">8.12.3.1.1 Capability Transfer
Procedure</h5>
<p>The Capability Transfer procedure for DL-TDOA positioning is
described in clause 7.1.2.1.</p>
<h5 id="assistance-data-transfer-procedure-12">8.12.3.1.2 Assistance
Data Transfer Procedure</h5>
<p>The purpose of this procedure is to enable the LMF to provide
assistance data to the UE (e.g., as part of a positioning procedure) and
the UE to request assistance data from the LMF (e.g., as part of a
positioning procedure). The LMF may provide the pre-configured DL-PRS
assistance data (with associated validity criteria) to the UE (before or
during an ongoing LPP positioning session), to be utilized for potential
positioning measurements at a future time. Pre-configured DL-PRS
assistance data may consist of multiple instances, where each instance
is applicable to a different area within the network. One or more
assistance data instances may be provided. Each instance is provided in
one LPP Assistance Data messages.</p>
<p>If a UE receives assistance data for a TRP for which it has already
stored assistance data, it overwrites the stored assistance data,
whereas if a UE receives assistance data for a TRP for which it has not
stored assistance data, it stores the assistance data for the TRP and
maintains the already stored assistance data for other TRPs. The TRPs
are uniquely identified using a combination of PRS-ID and Cell-ID. The
number TRPs for which the UE can store Assistance Data is a UE
capability and is indicated by the number of areas a UE can support.</p>
<h6 id="lmf-initiated-assistance-data-delivery-7">8.12.3.1.2.1 LMF
initiated Assistance Data Delivery</h6>
<p>Figure 8.12.3.1.2.1-1 shows the Assistance Data Delivery operations
for the DL-TDOA positioning method when the procedure is initiated by
the LMF.</p>
<p><img src="media/image56.svg" /></p>
<p>Figure 8.12.3.1.2.1-1: LMF-initiated Assistance Data Delivery
Procedure</p>
<p>(1) The LMF determines that assistance data needs to be provided to
the UE (e.g., as part of a positioning procedure) and sends an LPP
Provide Assistance Data message to the UE. This message may include any
of the DL-TDOA positioning assistance data defined in Table
8.12.2.1-1.</p>
<h6 id="ue-initiated-assistance-data-transfer-7">8.12.3.1.2.2 UE
initiated Assistance Data Transfer</h6>
<p>Figure 8.12.3.1.2.2-1 shows the Assistance Data Transfer operations
for the DL-TDOA positioning method when the procedure is initiated by
the UE.</p>
<p><img src="media/image57.svg" /></p>
<p>Figure 8.12.3.1.2.2-1: UE-initiated Assistance Data Transfer
Procedure</p>
<p>(1) The UE determines that certain DL-TDOA positioning assistance
data are desired (e.g., as part of a positioning procedure when the LMF
provided assistance data are not sufficient for the UE to fulfil the
request) and sends an LPP Request Assistance Data message to the LMF.
This request includes an indication of which specific DL-TDOA assistance
data are requested. Additional information concerning the UE's
approximate location and serving and neighbour cells may also be
provided in the Request Assistance Data message and/or in an
accompanying Provide Location Information message to help the LMF
provide appropriate assistance data. This additional data may include
the UE's last known location if available, the cell IDs of the UE
serving NG-RAN node and possibly neighbour NG-RAN nodes, as well as NR
E-CID measurements.</p>
<p>(2) The LMF provides the requested assistance in an LPP Provide
Assistance Data message, if available at the LMF. If any of the UE
requested assistance data in step (1) are not provided in step 2, the UE
shall assume that the requested assistance data are not supported, or
currently not available at the LMF. If none of the UE requested
assistance data in step (1) can be provided by the LMF, return any
information that can be provided in an LPP message of type Provide
Assistance Data which includes a cause indication for the not provided
assistance data.</p>
<h5 id="location-information-transfer-procedure-11">8.12.3.1.3 Location
Information Transfer Procedure</h5>
<p>The purpose of this procedure is to enable the LMF to request
location estimate from the UE, or to enable the UE to provide location
measurements to the LMF for position calculation.</p>
<h6
id="lmf-initiated-location-information-transfer-procedure-9">8.12.3.1.3.1
LMF-initiated Location Information Transfer Procedure</h6>
<p>Figure 8.12.3.1.3.1-1 shows the Location Information Transfer
operations for the DL-TDOA positioning method when the procedure is
initiated by the LMF.</p>
<p><img src="media/image58.svg" /></p>
<p>Figure 8.12.3.1.3.1-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends an LPP Request Location Information message to the
UE. This request includes indication of DL-TDOA measurements requested,
including any needed measurement configuration information, and required
response time.</p>
<p>(2) The UE obtains DL-TDOA measurements as requested in step 1. The
UE then sends an LPP Provide Location Information message to the LMF,
before the Response Time provided in step (1) elapsed, and includes the
obtained DL-TDOA measurements. If the UE is unable to perform the
requested measurements, or the Response Time elapsed before any of the
requested measurements were obtained, the UE returns any information
that can be provided in an LPP message of type Provide Location
Information which includes a cause indication for the not provided
location information.</p>
<h6
id="ue-initiated-location-information-delivery-procedure-11">8.12.3.1.3.2
UE-initiated Location Information Delivery procedure</h6>
<p>Figure 8.12.3.1.3.2-1 shows the Location Information Delivery
procedure operations for the DL-TDOA positioning method when the
procedure is initiated by the UE.</p>
<p><img src="media/image59.svg" /></p>
<p>Figure 8.12.3.1.3.2-1: UE-initiated Location Information Delivery
Procedure.</p>
<p>(1) The UE sends an LPP Provide Location Information message to the
LMF. The Provide Location Information message may include any UE DL-TDOA
measurements and, optionally, the DL-PRS-RSRP measurements already
available at the UE.</p>
<h4 id="procedures-between-lmf-and-gnb-2">8.12.3.2 Procedures between
LMF and gNB</h4>
<h5 id="assistance-data-delivery-procedure-1">8.12.3.2.1 Assistance Data
Delivery procedure</h5>
<p>The purpose of this procedure is to enable the gNB to provide
assistance data to the LMF, for subsequent delivery to the UE using the
procedures of clause 8.12.3.1.2 or for use in the calculation of
positioning estimates at the LMF.</p>
<h6
id="lmf-initiated-assistance-data-delivery-to-the-lmf-2">8.12.3.2.1.1
LMF-initiated assistance data delivery to the LMF</h6>
<p>Figure 8.12.3.2.1.1-1 shows the TRP Information Exchange operation
from the gNB to the LMF for the DL-TDOA positioning method.</p>
<p><img src="media/image47.svg" /></p>
<p>Figure 8.12.3.2.1.1-1: LMF-initiated TRP Information Exchange
Procedure</p>
<p>(1) The LMF determines that certain TRP configuration information is
desired (e.g., as part of a periodic update or as triggered by OAM) and
sends an NRPPa TRP INFORMATION REQUEST message to the gNB. This request
includes an indication of which specific TRP configuration information
is requested.</p>
<p>(2) The gNB provides the requested TRP information in an NRPPa TRP
INFORMATION RESPONSE message, if available at the gNB. If the gNB is not
able to provide any information, it returns an TRP INFORMATION FAILURE
message indicating the cause of the failure.</p>
<h2 id="ul-tdoa-positioning-1">8.13 UL-TDOA positioning</h2>
<h3 id="general-17">8.13.1 General</h3>
<p>In the UL-TDOA positioning method, the UE position is estimated based
on UL-RTOA (and optionally UL-SRS-RSRP and/or UL-SRS-RSRPP) measurements
taken at different TRPs of uplink radio signals from UE, along with
other configuration information.</p>
<p>The specifics of any UL-TDOA positioning methods or techniques used
to estimate the UE's location from these measurements are beyond the
scope of this specification.</p>
<p>In order to obtain uplink measurements, the TRPs need to know the
characteristics of the SRS signal transmitted by the UE for the time
period required to perform uplink measurement. These characteristics
should be static over the periodic transmission of SRS during the uplink
measurements. Hence, the LMF will indicate to the serving gNB the need
to direct the UE to transmit SRS signals for uplink positioning. It is
up to the serving gNB to make the final decision on resources to be
assigned and to communicate this SRS configuration information back to
the LMF so that LMF can forward the SRS configuration to the TRPs. The
gNB may decide (e.g., in case no resources are available) to configure
no resources for the UE and report the empty resource configuration to
the LMF.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-12">8.13.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and gNB/TRPs.</p>
<h4
id="assistance-data-that-may-be-transferred-from-the-gnb-to-the-lmf">8.13.2.0
Assistance Data that may be transferred from the gNB to the LMF</h4>
<p>The assistance data that may be transferred from the gNB to the LMF
is listed in Table 8.13.2.0-1.</p>
<p>Table 8.13.2.0-1: Assistance data that may be transferred from gNB to
the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>PCI, GCI, and TRP IDs of the TRPs served by the gNB</td>
</tr>
<tr>
<td>SSB information of the TRPs (the time/frequency occupancy of
SSBs)</td>
</tr>
<tr>
<td>Geographical coordinates information of the DL-PRS Resources of the
TRPs served by the gNB</td>
</tr>
<tr>
<td>TRP type</td>
</tr>
</tbody>
</table>
<h4
id="configuration-data-that-may-be-transferred-from-the-gnb-to-the-lmf">8.13.2.1
Configuration Data that may be transferred from the gNB to the LMF</h4>
<p>The configuration data for a target UE that may be transferred from
the serving gNB to the LMF is listed in Table 8.13.2.1-1.</p>
<p>Table 8.13.2.1-1: UE configuration data that may be transferred from
serving gNB to the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>UE configuration data</td>
</tr>
<tr>
<td>UE SRS configuration</td>
</tr>
<tr>
<td>Timing information of the TRP, which configured the UE SRS
transmission</td>
</tr>
<tr>
<td>The association information of SRS resources with UE Tx TEG ID</td>
</tr>
<tr>
<td>SRS Transmission Status</td>
</tr>
</tbody>
</table>
<h4
id="location-information-that-may-be-transferred-from-the-gnbs-to-lmf">8.13.2.2
Location Information that may be transferred from the gNBs to LMF</h4>
<p>The information that may be transferred from gNBs to the LMF include
measurement results listed in Table 8.13.2.2-1. The individual
measurements are defined in TS 38.215 [37].</p>
<p>Table 8.13.2.2-1: Measurement results that may be transferred from
gNBs to the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Measurement results</td>
</tr>
<tr>
<td>NCGI and TRP ID of the measurement</td>
</tr>
<tr>
<td>UL-RTOA</td>
</tr>
<tr>
<td>UL-SRS-RSRP</td>
</tr>
<tr>
<td>UL-SRS-RSRPP</td>
</tr>
<tr>
<td>UL Angle of Arrival (azimuth and/or elevation) <sup>NOTE
1</sup></td>
</tr>
<tr>
<td>Multiple UL Angle of Arrival (azimuth and/or elevation) <sup>NOTE
1</sup></td>
</tr>
<tr>
<td>SRS Resource Type</td>
</tr>
<tr>
<td>Time stamp of the measurement</td>
</tr>
<tr>
<td>Quality for each measurement</td>
</tr>
<tr>
<td>Beam Information for each measurement</td>
</tr>
<tr>
<td>LoS/NLoS information for each measurement</td>
</tr>
<tr>
<td>ARP ID of the measurement</td>
</tr>
<tr>
<td>NOTE 1: When used with UL-AoA for hybrid positioning.</td>
</tr>
</tbody>
</table>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-gnbs-1">8.13.2.3
Information that may be transferred from the LMF to gNBs</h4>
<p>The requested UL-SRS transmission characteristics information that
may be signalled from the LMF to the gNB is listed in Table
8.13.2.3-1.</p>
<p>Table 8.13.2.3-1: Requested UL-SRS transmission characteristics
information that may be transferred from LMF to gNB.</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>Number Of Transmissions/duration for which the UL-SRS is
requested</td>
</tr>
<tr>
<td>Bandwidth</td>
</tr>
<tr>
<td>Resource type (periodic, semi-persistent, aperiodic)</td>
</tr>
<tr>
<td><p>Pathloss reference:</p>
<p>- PCI, SSB Index, SSB configuration (time/frequency occupancy of
SSBs)</p>
<p>- DL-PRS ID, DL-PRS Resource Set ID, DL-PRS Resource ID</p></td>
</tr>
<tr>
<td><p>Spatial relation info</p>
<p>- PCI, SSB Index, SSB configuration (time/frequency occupancy of
SSBs)</p>
<p>- DL-PRS ID, DL-PRS Resource Set ID, DL-PRS Resource ID</p>
<p>- NZP CSI-RS Resource ID</p>
<p>- SRS Resource ID</p>
<p>- Positioning SRS Resource ID</p></td>
</tr>
<tr>
<td>SSB Information</td>
</tr>
<tr>
<td>Periodicity of the SRS for each SRS resource set</td>
</tr>
<tr>
<td>Carrier frequency of SRS transmission bandwidth</td>
</tr>
</tbody>
</table>
<p>The TRP measurement request information that may be signalled from
the LMF to the gNB is listed in table 8.13.2.3-2.</p>
<p>Table 8.13.2.3-2: TRP Measurement request information that may be
transferred from LMF to gNB.</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>TRP ID, cell ID of the TRP to receive UL-SRS</td>
</tr>
<tr>
<td>UE-SRS configuration</td>
</tr>
<tr>
<td>UL timing information together with timing uncertainty, for
reception of SRS by candidate TRPs</td>
</tr>
<tr>
<td>Report characteristics for the measurements</td>
</tr>
<tr>
<td>Measurement Quantities</td>
</tr>
<tr>
<td>Measurement periodicity</td>
</tr>
<tr>
<td>Measurement beam information request</td>
</tr>
<tr>
<td>Search window information</td>
</tr>
<tr>
<td>Expected UL AoA/ZoA and uncertainty range</td>
</tr>
<tr>
<td>Number of TRP Rx TEGs</td>
</tr>
<tr>
<td>Response time</td>
</tr>
<tr>
<td>Measurement characteristics request indicator</td>
</tr>
<tr>
<td>Measurement time occasions for a measurement instance</td>
</tr>
</tbody>
</table>
<p>The Positioning Activation/Deactivation request information that may
be signalled from the LMF to the gNB is listed in Table 8.13.2.3-3.</p>
<p>Table 8.13.2.3-3: Requested positioning activation/deactivation
information that may be transferred from LMF to gNB.</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td><p>SP UL-SRS:</p>
<p>- Activation or Deactivation request</p>
<p>- Positioning SRS Resource Set ID which is to be
activated/deactivated</p>
<p>- Spatial relation for Resource ID<sub>i</sub></p>
<p>- Activation Time</p></td>
</tr>
<tr>
<td><p>Aperiodic UL-SRS:</p>
<p>- Aperiodic SRS Resource Trigger List</p>
<p>- Activation time</p></td>
</tr>
<tr>
<td><p>UL-SRS:</p>
<p>- Release all</p></td>
</tr>
</tbody>
</table>
<h3 id="ul-tdoa-positioning-procedures">8.13.3 UL-TDOA Positioning
Procedures</h3>
<p>The procedures described in this clause support UL-TDOA positioning
measurements obtained by the gNB and provided to the LMF using
NRPPa.</p>
<h4 id="capability-transfer-procedure-13">8.13.3.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure for UL-TDOA positioning is
described in clause 7.1.2.1.</p>
<h4 id="assistance-data-transfer-procedure-13">8.13.3.2 Assistance Data
Transfer Procedure</h4>
<h5 id="assistance-data-delivery-between-lmf-and-gnb-1">8.13.3.2.1
Assistance Data Delivery between LMF and gNB</h5>
<p>The purpose of these procedures is to enable the gNB to provide
assistance data described in Table 8.13.2.0-1 to the LMF, for subsequent
delivery to the gNB using the procedures of clause 8.13.3.3 or for use
in the calculation of positioning estimates at the LMF or enable the LMF
to request UL-SRS configuration information from the serving gNB of a
target UE.</p>
<p>Figure 8.13.3.2.1-1 shows the UL information Delivery operation from
the serving gNB to the LMF.</p>
<p><img src="media/image48.svg" /></p>
<p>Figure 8.13.3.2.1-1: LMF-initiated UL Information Request
Procedure</p>
<p>(1) The LMF sends a NRPPa message POSITIONING INFORMATION REQUEST to
the serving gNB of the target UE to request UE SRS configuration
information. If the message includes the Requested UL-SRS Transmission
Characteristics as listed in Table 8.13.2.3-1, the gNB should take this
information into account when configuring UL-SRS transmissions for the
UE.</p>
<p>(2) The serving gNB determines the UE SRS configuration to be
allocated for the UE and sends NRPPa message POSITIONING INFORMATION
RESPONSE to the LMF that includes the UE SRS configuration defined in
Table 8.13.2.1-1. If the serving gNB is not able to provide the
requested information, it returns a failure message indicating the cause
of the failure.</p>
<p>(3) If a change has occurred in the UE SRS configuration during the
UE SRS time duration requested at step 1, the gNB sends a POSITIONING
INFORMATION UPDATE message to the LMF. This message contains, in the
case of a change in UE SRS configuration parameters, the UE SRS
configuration information for all cells with UE SRS configured, or an
update in SRS transmission status.</p>
<p>Figure 8.13.3.2.1-2 shows the TRP Information Exchange operation from
the gNB to the LMF for the UL-TDOA positioning method.</p>
<p><img src="media/image47.svg" /></p>
<p>Figure 8.13.3.2.1-2: LMF-initiated TRP Information Exchange
Procedure</p>
<p>(1) The LMF determines that certain TRP configuration information is
desired (e.g., as part of a periodic update or as triggered by OAM) and
sends an NRPPa TRP INFORMATION REQUEST message to the gNB. This request
includes an indication of which specific TRP configuration information
is requested.</p>
<p>(2) The gNB provides the requested TRP information in an NRPPa TRP
INFORMATION RESPONSE message, if available at the gNB. If the gNB is not
able to provide any information, it returns an TRP INFORMATION FAILURE
message indicating the cause of the failure.</p>
<h4
id="location-information-transferassistance-data-transfer-procedure-1">8.13.3.3
Location Information Transfer/Assistance Data Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
position measurements from a gNB for position calculation of the UE and
also provide necessary assistance data to the gNB.</p>
<p>Figure 8.13.3.3-1 shows the messaging between the LMF and the gNB to
perform this procedure.</p>
<p><img src="media/image49.svg" /></p>
<p>Figure 8.13.3.3-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends a NRPPa message to the selected gNB to request
UL-TDOA measurement information. The message includes any information
required for the gNB to perform the measurements as defined in Table
8.13.2.3-2.</p>
<p>(2) If the report characteristics in step 1 is set to "on demand",
the gNB obtains the requested UL-TDOA measurements and returns them in a
Measurement Response message to the LMF. The Measurement Response
message includes the obtained UL-TDOA measurements as defined in Table
8.13.2.2-1.</p>
<p>If the report characteristics in step 1 is set to "periodic", the gNB
replies with a Measurement Response message without including any
measurements in the message. The gNB then periodically initiates the
Measurement Report procedure in step 3 for the UL-TDOA measurements,
with the requested reporting periodicity.<br />
<br />
If the gNB is not able to accept the Measurement Request message in step
1, the gNB returns a failure message indicating the cause of the
failure.</p>
<p>(3) The gNB periodically provides the UL-TDOA measurements as defined
in Table 8.13.2.2-1 to the LMF if that was requested at step 1.</p>
<p>(4) At any time after step 2, the LMF may send a Measurement Update
message to the gNB providing updated information required for the gNB to
perform the UL-TDOA measurements as defined in Table 8.13.2.3-2. Upon
receiving the message, the gNB overwrites the previously received
measurement configuration information.</p>
<p>(5) If the previously requested UL-TDOA measurements can no longer be
reported, the gNB notifies the LMF by sending a Measurement Failure
Indication message.</p>
<p>(6) When the LMF wants to abort an ongoing UL-TDOA measurement it
sends a Measurement Abort message to the gNB.</p>
<h4 id="a-positioning-activationdeactivation-procedure">8.13.3.3a
Positioning Activation/Deactivation Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
activation and deactivation of UL-SRS transmission of the target UE.</p>
<p>Figure 8.13.3.3a-1 shows the messaging between the LMF and the gNB to
perform this procedure.</p>
<p><img src="media/image50.svg" /></p>
<p>Figure 8.13.3.3a-1: Positioning Activation/Deactivation
Procedure.</p>
<p>(1) The LMF sends the NRPPa Positioning Activation Request message to
the serving gNB of the target UE to request UL-SRS activation for the
target UE. For a semi-persistent UL-SRS, the message includes an
indication of an UL-SRS resource set to be activated and may include
information that indicates the spatial relation for the semi-persistent
UL-SRS resource to be activated, as listed in Table 8.13.2.3-3. For an
aperiodic UL-SRS, the message may include aperiodic SRS Resource trigger
list to indicate the UL-SRS resource to be activated.</p>
<p>(2) For semi-persistent UL-SRS, the serving gNB may then activate the
configured semi-persistent UL-SRS resource sets by sending the SP
Positioning SRS Activation/Deactivation MAC CE command as specified in
TS 38.321 [39]. For aperiodic UL-SRS, the serving gNB may then activate
the configured aperiodic UL-SRS resource sets by sending the DCI as
specified in TS 38.212 [40].<br />
If the UL-SRS has been successfully activated as requested in step 1,
the gNB sends the NRPPa Positioning Activation Response message to the
LMF. If the serving gNB is not able to fulfil the request from step 1,
it returns the Positioning Activation Failure message indicating the
cause of the failure. The serving gNB may include a system frame number
and a slot number in the NRPPa Positioning Activation Response message
to the LMF.</p>
<p>(3) If a previously activated UL-SRS should be deactivated, or the
UL-SRS transmission should be released, the LMF sends the NRPPa
Positioning Deactivation message to the serving gNB of the target device
to request deactivation of UL-SRS resource sets, or release all the
UL-SRS resources. This message includes an indication of the UL-SRS
resource set to be deactivated, or an indication of releasing all UL-SRS
resources.</p>
<h4 id="sequence-of-procedure-for-ul-tdoa-positioning">8.13.3.4 Sequence
of Procedure for UL-TDOA positioning</h4>
<p>Figure 8.13.3.4-1 shows the messaging between the LMF, the gNBs and
the UE to perform UL-TDOA procedure.</p>
<p><img src="media/image60.svg" /></p>
<p>Figure 8.13.3.4-1: UL-TDOA positioning procedure</p>
<p>0. The LMF may use the procedure in Figure 8.13.3.2.1-2 to obtain the
TRP information required for UL-TDOA positioning.</p>
<p>1. The LMF may request the positioning capabilities of the target
device using the LPP Capability Transfer procedure as described in
clause 8.13.3.1.</p>
<p>2. The LMF sends a NRPPa POSITIONING INFORMATION REQUEST message to
the serving gNB to request UL-SRS configuration information for the
target device as described in Figure 8.13.3.2.1-1.</p>
<p>3. The serving gNB determines the resources available for UL-SRS and
configures the target device with the UL-SRS resource sets at step
3a.</p>
<p>4. The serving gNB provides the UL information to the LMF in a NRPPa
POSITIONING INFORMATION RESPONSE message.</p>
<p>5. In the case of semi-persistent or aperiodic SRS, the LMF may
request activation of UE SRS transmission by sending the NRPPa
Positioning Activation Request message to the serving gNB of the target
device as described in clause 8.13.3.3a. The gNB then activates the
UL-SRS transmission and sends the NRPPa Positioning Activation Response
message. The target device begins the UL-SRS transmission according to
the time domain behavior of UL-SRS resource configuration.</p>
<p>6. The LMF provides the UL-SRS configuration to the selected gNBs in
a NRPPa MEASUREMENT REQUEST message as described in clause 8.13.3.3. The
message includes all information required to enable the gNBs/TRPs to
perform the UL measurements.</p>
<p>7. Each gNB configured at step 6 measures the UL-SRS transmissions
from the target device.</p>
<p>8. Each gNB reports the UL-SRS measurements to the LMF in a NRPPa
Measurement Response message as described in clause 8.13.3.3.</p>
<p>9. The LMF sends a NRPPa POSITIONING DEACTIVATION message to the
serving gNB as described in clause 8.13.3.3a.</p>
<h2 id="ul-aoa-positioning">8.14 UL-AoA positioning</h2>
<h3 id="general-18">8.14.1 General</h3>
<p>In the UL-AoA positioning method, the UE position is estimated based
on UL-AoA (and optionally UL-SRS-RSRP and/or UL-SRS-RSRPP) of uplink
radio signals taken at different TRPs, along with other configuration
information.</p>
<p>The specific of any UL-AoA positioning methods or techniques used to
estimate the UE's location from these measurements are beyond the scope
of this specification.</p>
<p>In order to obtain uplink measurements, the TRPs need to know the
characteristics of the SRS signal transmitted by the UE for the time
period required to calculate uplink measurement. These characteristics
should be static over the periodic transmission of SRS during the uplink
measurements. Hence, the LMF will indicate to the serving gNB the need
to direct the UE to transmit SRS signals for uplink positioning. It is
up to the gNB to make the final decision on resources to be assigned and
to communicate this configuration information back to the LMF so that
LMF can configure the TRPs. The gNB may decide (e.g., in case no
resources are available) to configure no resources for the UE and fail
the corresponding NRPPa procedure.</p>
<h3
id="information-to-be-transferred-between-ng-ran5gc-elements-13">8.14.2
Information to be transferred between NG-RAN/5GC Elements</h3>
<p>This clause defines the information that may be transferred between
LMF and gNB/TRPs.</p>
<h4
id="assistance-data-that-may-be-transferred-from-the-gnb-to-the-lmf-1">8.14.2.0
Assistance Data that may be transferred from the gNB to the LMF</h4>
<p>The assistance data that may be transferred from the gNB to the LMF
is listed in Table 8.14.2.0-1.</p>
<p>Table 8.14.2.0-1: Assistance data that may be transferred from gNB to
the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>PCI, GCI, and TRP IDs of the TRPs served by the gNB</td>
</tr>
<tr>
<td>SSB information of the TRPs (the time/frequency occupancy of
SSBs)</td>
</tr>
<tr>
<td>Geographical coordinates information of the DL-PRS Resources of the
TRPs served by the gNB</td>
</tr>
<tr>
<td>TRP type</td>
</tr>
</tbody>
</table>
<h4
id="configuration-data-that-may-be-transferred-from-the-gnb-to-the-lmf-1">8.14.2.1
Configuration Data that may be transferred from the gNB to the LMF</h4>
<p>The configuration data for a target UE that may be transferred from
the serving gNB to the LMF is listed in Table 8.14.2.1-1.</p>
<p>Table 8.14.2.1-1: UE configuration data that may be transferred from
serving gNB to the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>UE configuration data</td>
</tr>
<tr>
<td>UE SRS configuration</td>
</tr>
<tr>
<td>Timing information of the TRP, which configured the UE SRS
transmission</td>
</tr>
<tr>
<td>SRS Transmission Status</td>
</tr>
</tbody>
</table>
<h4
id="location-information-that-may-be-transferred-from-the-gnbs-to-lmf-1">8.14.2.2
Location Information that may be transferred from the gNBs to LMF</h4>
<p>The information that may be transferred from gNBs to the LMF include
measurement results are listed in Table 8.14.2.2-1. The individual
measurements are defined in TS 38.215 [37].</p>
<p>Table 8.14.2.2-1: Measurement results that may be transferred from
gNBs to the LMF</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Measurement results</td>
</tr>
<tr>
<td>NCGI and TRP ID of the measurement</td>
</tr>
<tr>
<td>UL Angle of Arrival (azimuth and/or elevation)</td>
</tr>
<tr>
<td>Multiple UL Angle of Arrival (azimuth and/or elevation)</td>
</tr>
<tr>
<td>SRS Resource Type</td>
</tr>
<tr>
<td>UL-SRS-RSRP</td>
</tr>
<tr>
<td>UL-SRS-RSRPP</td>
</tr>
<tr>
<td>Time stamp of the measurement</td>
</tr>
<tr>
<td>Quality for each measurement</td>
</tr>
<tr>
<td>Beam information for each measurement</td>
</tr>
<tr>
<td>LoS/NLoS information for each measurement</td>
</tr>
<tr>
<td>ARP ID of the measurement</td>
</tr>
</tbody>
</table>
<h4
id="information-that-may-be-transferred-from-the-lmf-to-gnb">8.14.2.3
Information that may be transferred from the LMF to gNB</h4>
<p>The requested UL-SRS transmission characteristics information that
may be signalled from the LMF to the gNB is listed in Table
8.14.2.3-1.</p>
<p>Table 8.14.2.3-1: Requested UL-SRS transmission characteristics
information that may be transferred from LMF to gNB.</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>Number Of Transmissions/duration for which the UL-SRS is
requested</td>
</tr>
<tr>
<td>Bandwidth</td>
</tr>
<tr>
<td>Resource type (periodic, semi-persistent, aperiodic)</td>
</tr>
<tr>
<td>Number of requested SRS resource sets and SRS resources per set</td>
</tr>
<tr>
<td><p>Pathloss reference:</p>
<p>- PCI, SSB Index, SSB configuration (time/frequency occupancy of
SSBs)</p>
<p>- DL-PRS ID, DL-PRS Resource Set ID, DL-PRS Resource ID</p></td>
</tr>
<tr>
<td><p>Spatial relation info</p>
<p>- PCI, SSB Index, SSB configuration (time/frequency occupancy of
SSBs)</p>
<p>- DL-PRS ID, DL-PRS Resource Set ID, DL-PRS Resource ID</p>
<p>- NZP CSI-RS Resource ID</p>
<p>- SRS Resource ID</p>
<p>- Positioning SRS Resource ID</p></td>
</tr>
<tr>
<td>SSB Information</td>
</tr>
<tr>
<td>Periodicity of the SRS for each SRS resource set</td>
</tr>
<tr>
<td>Carrier frequency of SRS transmission bandwidth</td>
</tr>
</tbody>
</table>
<p>The TRP measurement request information that may be signalled from
the LMF to the gNB is listed in table 8.14.2.3-2.</p>
<p>Table 8.14.2.3-2: TRP Measurement request information that may be
transferred from LMF to gNB.</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td>TRP ID, cell ID of the TRP to receive UL-SRS</td>
</tr>
<tr>
<td>UE-SRS configuration</td>
</tr>
<tr>
<td>UL timing information together with timing uncertainty, for
reception of SRS by candidate TRPs</td>
</tr>
<tr>
<td>Report characteristics for the measurements</td>
</tr>
<tr>
<td>Measurement Quantities</td>
</tr>
<tr>
<td>Measurement periodicity</td>
</tr>
<tr>
<td>Measurement beam information request</td>
</tr>
<tr>
<td>Expected UL AoA/ZoA and uncertainty range</td>
</tr>
<tr>
<td>Response time</td>
</tr>
<tr>
<td>Measurement characteristics request indicator</td>
</tr>
<tr>
<td>Measurement time occasions for a measurement instance</td>
</tr>
</tbody>
</table>
<p>The Positioning Activation/Deactivation request information that may
be signalled from the LMF to the gNB is listed in Table 8.14.2.3-3.</p>
<p>Table 8.14.2.3-3: Requested positioning activation/deactivation
information that may be transferred from LMF to gNB.</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td>Information</td>
</tr>
<tr>
<td><p>SP UL-SRS:</p>
<p>- Activation or Deactivation request</p>
<p>- Positioning SRS Resource Set ID which is to be
activated/deactivated</p>
<p>- Spatial relation for Resource ID<sub>i</sub></p>
<p>- Activation Time</p></td>
</tr>
<tr>
<td><p>Aperiodic UL-SRS:</p>
<p>- Aperiodic SRS Resource Trigger list</p>
<p>- Activation time</p></td>
</tr>
<tr>
<td><p>UL-SRS:</p>
<p>- Release all</p></td>
</tr>
</tbody>
</table>
<h3 id="ul-aoa-positioning-procedures">8.14.3 UL-AoA Positioning
Procedures</h3>
<p>The procedures described in this clause support UL-AoA positioning
measurements obtained by the gNB and provided to the LMF using
NRPPa.</p>
<h4 id="capability-transfer-procedure-14">8.14.3.1 Capability Transfer
Procedure</h4>
<p>The Capability Transfer procedure for UL-AoA positioning is described
in clause 7.1.2.1.</p>
<h4 id="assistance-data-transfer-procedure-14">8.14.3.2 Assistance Data
Transfer Procedure</h4>
<h5 id="assistance-data-delivery-between-lmf-and-gnb-2">8.14.3.2.1
Assistance Data Delivery between LMF and gNB</h5>
<p>The purpose of these procedures is to enable the gNB to provide
assistance data described in Table 8.14.2.0-1 to the LMF, for subsequent
delivery to the gNB using the procedures of clause 8.14.3.3 or for use
in the calculation of positioning estimates at the LMF or enable the LMF
to request UL-SRS configuration information from the serving gNB of a
target UE.</p>
<p>Figure 8.14.3.2.1-1 shows the UL information Delivery operation from
the serving gNB to the LMF.</p>
<p><img src="media/image48.svg" /></p>
<p>Figure 8.14.3.2.1-1: LMF-initiated UL Information Request
Procedure</p>
<p>(1) The LMF sends a NRPPa message POSITIONING INFORMATION REQUEST to
the serving gNB of the target UE to request UE SRS configuration
information. If the message includes the Requested UL-SRS Transmission
Characteristics as listed in Table 8.14.2.3-1, the gNB should take this
information into account when configuring UL-SRS transmissions for the
UE.</p>
<p>(2) The serving gNB determines the UE SRS configuration to be
allocated for the UE and sends NRPPa message POSITIONING INFORMATION
RESPONSE to the LMF that includes the UE SRS configuration defined in
Table 8.14.2.1-1. If the serving gNB is not able to provide the
requested information, it returns a failure message indicating the cause
of the failure.</p>
<p>(3) If a change has occurred in the UE SRS configuration during the
UE SRS time duration requested at step 1, the gNB sends a POSITIONING
INFORMATION UPDATE message to the LMF. This message contains, in the
case of a change in UE SRS configuration parameters, the UE SRS
configuration information for all cells with UE SRS configured, or an
update in SRS transmission status.</p>
<p>Figure 8.14.3.2.1-2 shows the TRP Information Exchange operation from
the gNB to the LMF for the UL-AoA positioning method.</p>
<p><img src="media/image47.svg" /></p>
<p>Figure 8.14.3.2.1-2: LMF-initiated TRP Information Exchange
Procedure</p>
<p>(1) The LMF determines that certain TRP configuration information is
desired (e.g., as part of a periodic update or as triggered by OAM) and
sends an NRPPa TRP INFORMATION REQUEST message to the gNB. This request
includes an indication of which specific TRP configuration information
is requested.</p>
<p>(2) The gNB provides the requested TRP information in an NRPPa TRP
INFORMATION RESPONSE message, if available at the gNB. If the gNB is not
able to provide any information, it returns an TRP INFORMATION FAILURE
message indicating the cause of the failure.</p>
<h4
id="location-information-transferassistance-data-transfer-procedure-2">8.14.3.3
Location Information Transfer/Assistance Data Transfer Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
position measurements from a gNB for position calculation of the UE and
also provide necessary assistance data to the gNB.</p>
<p>Figure 8.14.3.3-1 shows the messaging between the LMF and the gNB to
perform this procedure.</p>
<p><img src="media/image49.svg" /></p>
<p>Figure 8.14.3.3-1: LMF-initiated Location Information Transfer
Procedure</p>
<p>(1) The LMF sends a NRPPa message to the selected gNB to request
UL-AoA measurement information. The message includes any information
required for the gNB to perform the measurements as defined in Table
8.14.2.3-2.</p>
<p>(2) If the report characteristics in step 1 is set to "on demand",
the gNB obtains the requested UL-AoA measurements and returns them in a
Measurement Response message to the LMF. The Measurement Response
message includes the obtained UL-AoA measurements as defined in Table
8.14.2.2-1.</p>
<p>If the report characteristics in step 1 is set to "periodic", the gNB
replies with a Measurement Response message without including any
measurements in the message. The gNB then periodically initiates the
Measurement Report procedure in step 3 for the UL-AoA measurements, with
the requested reporting periodicity.<br />
<br />
If the gNB is not able to accept the Measurement Request message in step
1, the gNB returns a failure message indicating the cause of the
failure.</p>
<p>(3) The gNB periodically provides the UL-AoA measurements as defined
in Table 8.14.2.2-1 to the LMF if that was requested at step 1.</p>
<p>(4) At any time after step 2, the LMF may send a Measurement Update
message to the gNB providing updated information required for the gNB to
perform the UL-AoA measurements as defined in Table 8.14.2.3-2. Upon
receiving the message, the gNB overwrites the previously received
measurement configuration information.</p>
<p>(5) If the previously requested UL-AoA measurements can no longer be
reported, the gNB notifies the LMF by sending a Measurement Failure
Indication message.</p>
<p>(6) When the LMF wants to abort an ongoing UL-AoA measurement it
sends a Measurement Abort message to the gNB.</p>
<h4 id="a-positioning-activationdeactivation-procedure-1">8.14.3.3a
Positioning Activation/Deactivation Procedure</h4>
<p>The purpose of this procedure is to enable the LMF to request
activation and deactivation of UL-SRS transmission of the target UE.</p>
<p>Figure 8.14.3.3a-1 shows the messaging between the LMF and the gNB to
perform this procedure.</p>
<p><img src="media/image50.svg" /></p>
<p>Figure 8.14.3.3a-1: Positioning Activation/Deactivation
Procedure.</p>
<p>(1) The LMF sends the NRPPa Positioning Activation Request message to
the serving gNB of the target UE to request UL-SRS activation for the
target UE. For a semi-persistent UL-SRS, the message includes an
indication of an UL-SRS resource set to be activated and may include
information that indicates the spatial relation for the semi-persistent
UL-SRS resource to be activated, as listed in Table 8.14.2.3-3. For an
aperiodic UL-SRS, the message may include aperiodic SRS Resource trigger
list to indicate the UL-SRS resource to be activated.</p>
<p>(2) For semi-persistent UL-SRS, the serving gNB may then activate the
configured semi-persistent UL-SRS resource sets by sending the SP
Positioning SRS Activation/Deactivation MAC CE command as specified in
TS 38.321 [39]. For aperiodic UL-SRS, the serving gNB may then activate
the configured aperiodic UL-SRS resource sets by sending the DCI as
specified in TS 38.212 [40].<br />
If the UL-SRS has been successfully activated as requested in step 1,
the gNB sends the NRPPa Positioning Activation Response message to the
LMF. If the serving gNB is not able to fulfil the request from step 1,
it returns the Positioning Activation Failure message indicating the
cause of the failure. The serving gNB includes a system frame number and
a slot number in the NRPPa Positioning Activation Response message to
the LMF.</p>
<p>(3) If a previously activated UL-SRS should be deactivated, or the
UL-SRS transmission should be released, the LMF sends the NRPPa
Positioning Deactivation message to the serving gNB of the target device
to request deactivation of UL-SRS resource sets, or release all the
UL-SRS resources. This message includes an indication of the UL-SRS
resource set to be deactivated, or an indication of releasing all UL-SRS
resources.</p>
<h4 id="sequence-of-procedure-for-ul-aoa-positioning">8.14.3.4 Sequence
of Procedure for UL-AoA positioning</h4>
<p>Figure 8.14.3.4-1 shows the messaging between the LMF, the gNBs and
the UE to perform UL-AoA procedure.</p>
<p><img src="media/image61.svg" /></p>
<p>Figure 8.14.3.4-1: UL-AoA positioning procedure</p>
<p>0. The LMF may use the procedure in Figure 8.14.3.2.1-2 to obtain the
TRP information required for UL-AoA positioning.</p>
<p>1. The LMF may request the positioning capabilities of the target
device using the LPP Capability Transfer procedure as described in
clause 8.14.3.1.</p>
<p>2. The LMF sends a NRPPa POSITIONING INFORMATION REQUEST message to
the serving gNB to request UL-SRS configuration information for the
target device as described in Figure 8.14.3.2.1-1.</p>
<p>3. The serving gNB determines the resources available for UL-SRS and
configures the target device with the UL-SRS resource sets at step
3a.</p>
<p>4. The serving gNB provides the UL-SRS configuration information to
the LMF in a NRPPa POSITIONING INFORMATION RESPONSE message.</p>
<p>5. In the case of semi-persistent or aperiodic SRS, the LMF may
request activation of UE SRS transmission by sending the NRPPa
Positioning Activation Request message to the serving gNB of the target
device as described in clause 8.14.3.3a. The gNB then activates the
UL-SRS transmission and sends the NRPPa Positioning Activation Response
message. The target device begins the UL-SRS transmission according to
the time domain behavior of UL-SRS resource configuration.</p>
<p>6. The LMF provides the UL-SRS configuration to the selected gNBs in
a NRPPa MEASUREMENT REQUEST message as described in clause 8.14.3.3. The
message includes all information required to enable the gNBs/TRPs to
perform the UL measurements.</p>
<p>7. Each gNB configured at step 6 measures the UL-SRS transmissions
from the target device.</p>
<p>8. Each gNB reports the UL-SRS measurements to the LMF in a NRPPa
Measurement Response message as described in clause 8.14.3.3.</p>
<p>9. The LMF sends a NRPPa POSITIONING DEACTIVATION message to the
serving gNB as described in clause 8.14.3.3a.</p>
<p class="heading" id="annex-a-informative-use-of-lpp-with-supl">Annex A
(informative): Use of LPP with SUPL</p>
<p>The design goal of LPP is to enable it to be used in user plane
location solutions such as OMA SUPL ([15], [16]) and this informative
annex shows how LPP can be used in SUPL 2.0.</p>
<h1 id="a.1-supl-2.0-positioning-methods-and-positioning-protocols">A.1
SUPL 2.0 Positioning Methods and Positioning Protocols</h1>
<p>The following table shows how the 3GPP positioning protocols are
supported in SUPL 2.0.</p>
<p>Table A.1-1: SUPL support of positioning methods</p>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 32%" />
<col style="width: 18%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Positioning Protocol:</th>
<th rowspan="2"><p>RRLP</p>
<p>(GSM/GPRS/WCDMA/<br />
LTE/WLAN/WiMAX)</p></th>
<th rowspan="2"><p>RRC</p>
<p>(WCDMA)</p></th>
<th rowspan="2"><p>LPP</p>
<p>(NR/LTE)</p></th>
</tr>
<tr>
<th>Positioning Method:</th>
</tr>
</thead>
<tbody>
<tr>
<td>A-GPS (A-GANSS) SET Assisted</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>A-GPS (A-GANSS) SET Based</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Autonomous GPS/GANSS</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Enhanced Cell ID <sup>NOTE 1</sup></td>
<td></td>
<td></td>
<td> <sup>NOTE 2</sup></td>
</tr>
<tr>
<td>Enhanced Observed Time Difference (E-OTD)</td>
<td> (GSM only)</td>
<td>NA</td>
<td>NA</td>
</tr>
<tr>
<td>Observed Time Difference of Arrival (OTDOA) <sup>NOTE 1, NOTE
3</sup></td>
<td>NA</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Sensors</td>
<td>NA</td>
<td> <sup>NOTE 5</sup></td>
<td></td>
</tr>
<tr>
<td>WLAN</td>
<td>NA</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Bluetooth</td>
<td>NA</td>
<td></td>
<td></td>
</tr>
<tr>
<td>TBS <sup>NOTE 4</sup></td>
<td>NA</td>
<td></td>
<td></td>
</tr>
<tr>
<td>NR DL-TDOA</td>
<td>NA</td>
<td>NA</td>
<td></td>
</tr>
<tr>
<td>NR DL-AoD</td>
<td>NA</td>
<td>NA</td>
<td></td>
</tr>
<tr>
<td>NR E-CID (downlink)</td>
<td>NA</td>
<td>NA</td>
<td></td>
</tr>
<tr>
<td>NR Multi-RTT</td>
<td>NA</td>
<td>NA</td>
<td></td>
</tr>
<tr>
<td>NR UL-TDOA</td>
<td>NA</td>
<td>NA</td>
<td></td>
</tr>
<tr>
<td>NR UL-AoA</td>
<td>NA</td>
<td>NA</td>
<td></td>
</tr>
<tr>
<td colspan="4"><p>NOTE 1: Excludes methods based on NR signals.</p>
<p>NOTE 2: For LPP, NR CID is supported.</p>
<p>NOTE 3: This includes TBS positioning based on PRS signals, which is
only supported in LPP (LTE).</p>
<p>NOTE 4: TBS positioning based on MBS signals.</p>
<p>NOTE 5: Only barometric pressure sensor is supported.</p></td>
</tr>
</tbody>
</table>
<p>NOTE: What is referred to in the SUPL specifications as "Enhanced
Cell ID", is a UE-Assisted positioning mode, where the neighbouring cell
measurements are carried at the SUPL layer (in the SUPL_POS_INIT for
example). The ASN.1 container for this mode is defined as follows:</p>
<p>LteCellInformation ::= SEQUENCE {</p>
<p>cellGlobalIdEUTRA CellGlobalIdEUTRA,</p>
<p>physCellId PhysCellId,</p>
<p>trackingAreaCode TrackingAreaCode,</p>
<p>rsrpResult RSRP-Range OPTIONAL,</p>
<p>rsrqResult RSRQ-Range OPTIONAL,</p>
<p>ta INTEGER(0..1282) OPTIONAL, -- Currently used Timing Advance value
(N_TA/16 as per [3GPP 36.213])</p>
<p>measResultListEUTRA MeasResultListEUTRA OPTIONAL, --Neighbour
measurements</p>
<p>...,</p>
<p>earfcn INTEGER(0..65535) OPTIONAL, -- see Table 37</p>
<p>earfcn-ext INTEGER (65536..262143) OPTIONAL, -- see Table 37</p>
<p>rsrpResult-ext RSRP-Range-Ext OPTIONAL,</p>
<p>rsrqResult-ext RSRQ-Range-Ext OPTIONAL,</p>
<p>rs-sinrResult RS-SINR-Range OPTIONAL,</p>
<p>servingInformation5G ServingInformation5G OPTIONAL</p>
<p>}</p>
<p>MeasResultListEUTRA ::= SEQUENCE (SIZE (1..maxCellReport)) OF
MeasResultEUTRA</p>
<p>MeasResultEUTRA ::= SEQUENCE {</p>
<p>physCellId PhysCellId,</p>
<p>cgi-Info SEQUENCE {</p>
<p>cellGlobalId CellGlobalIdEUTRA,</p>
<p>trackingAreaCode TrackingAreaCode</p>
<p>} OPTIONAL,</p>
<p>measResult SEQUENCE {</p>
<p>rsrpResult RSRP-Range OPTIONAL, -- Mapping to measured values</p>
<p>rsrqResult RSRQ-Range OPTIONAL, -- in 3GPP TS 36.133</p>
<p>...,</p>
<p>earfcn INTEGER(0..65535) OPTIONAL, -- see Table 37</p>
<p>earfcn-ext INTEGER (65536..262143) OPTIONAL, -- see Table 37</p>
<p>rsrpResult-ext RSRP-Range-Ext OPTIONAL,</p>
<p>rsrqResult-ext RSRQ-Range-Ext OPTIONAL,</p>
<p>rs-sinrResult RS-SINR-Range OPTIONAL,</p>
<p>neighbourInformation5G NeighbourInformation5G OPTIONAL</p>
<p>}</p>
<p>}</p>
<p>NRCellInformation ::= SEQUENCE {</p>
<p>servingCellInformation ServingCellInformationNR, --Serving cell
information</p>
<p>measuredResultsListNR MeasResultListNR OPTIONAL, --Neighbour
measurements</p>
<p>...</p>
<p>}</p>
<p>-- Information for serving cells per 3GPP TS 38.331</p>
<p>ServingCellInformationNR ::= SEQUENCE (SIZE (1..maxNRServingCell)) OF
ServCellNR</p>
<p>-- The first listed serving cell shall be the primary cell</p>
<p>ServCellNR ::= SEQUENCE {</p>
<p>physCellId PhysCellIdNR,</p>
<p>arfcn-NR ARFCN-NR,</p>
<p>cellGlobalId CellGlobalIdNR,</p>
<p>trackingAreaCode TrackingAreaCodeNR,</p>
<p>ssb-Measurements NR-Measurements OPTIONAL,</p>
<p>csi-rs-Measurements NR-Measurements OPTIONAL,</p>
<p>ta INTEGER(0..3846) OPTIONAL, --Timing Advance value</p>
<p>...,</p>
<p>arfcn-type ENUMERATED {ssb, csi-rs} OPTIONAL,</p>
<p>systemFrameNumber BIT STRING (SIZE (10)) OPTIONAL,</p>
<p>ssb-IndexList-Measurements SSB-IndexList-Measurements OPTIONAL,</p>
<p>csi-rs-IndexList-Measurements CSI-RS-IndexList-Measurements
OPTIONAL</p>
<p>}</p>
<p>MeasResultListNR ::= SEQUENCE (SIZE (1..maxCellReportNR)) OF
MeasResultNR</p>
<p>MeasResultNR ::= SEQUENCE {</p>
<p>physCellId PhysCellIdNR,</p>
<p>arfcn-NR ARFCN-NR,</p>
<p>cellGlobalId CellGlobalIdNR OPTIONAL,</p>
<p>trackingAreaCode TrackingAreaCodeNR OPTIONAL,</p>
<p>ssb-Measurements NR-Measurements OPTIONAL,</p>
<p>csi-rs-Measurements NR-Measurements OPTIONAL,</p>
<p>...,</p>
<p>arfcn-type ENUMERATED {ssb, csi-rs} OPTIONAL,</p>
<p>systemFrameNumber BIT STRING (SIZE (10)) OPTIONAL,</p>
<p>ssb-IndexList-Measurements SSB-IndexList-Measurements OPTIONAL,</p>
<p>csi-rs-IndexList-Measurements CSI-RS-IndexList-Measurements
OPTIONAL</p>
<p>}</p>
<p>It should be noted that in addition to the container provided by SUPL
itself, E-CID/NR E-CID positioning methods defined within LPP proper can
be supported in SUPL, via tunnelling LPP as shown in this annex (in the
same manner that A-GNSS, OTDOA, Barometric Pressure Sensors, WLAN,
Bluetooth and TBS are supported).</p>
<h1 id="a.2-supl-2.0-and-nr-architecture">A.2 SUPL 2.0 and NR
Architecture</h1>
<p>This clause describes interworking between the control-plane LCS
architecture, as defined in the main body of this specification, and
SUPL 2.0. Similarly, to the E-SMLC in the LTE architecture (TS 36.305
[25]), the LMF either includes or has an interface to an SPC function,
as defined in OMA SUPL V2.0 ([15], [16]). It can thus provide a
consistent set of positioning methods for deployments utilizing both
control-plane and user-plane.</p>
<p>The interworking does not enable use of user-plane signalling for
part of a control-plane positioning session. The user plane in the
interworking here is not intended as an alternative path for
control-plane signalling that would be needed between UE and NG-RAN for
mechanisms such as A-GPS in a standalone control-plane solution.</p>
<p>This interworking does enable the SPC to retrieve measurements (e.g.,
GNSS-to-RAN time relations) from the NG-RAN.</p>
<p>The underlying architecture is shown in Figure A.2-1 (TS 23.501 [2]).
Note that, for interworking between user-plane and control-plane
positioning, no new interfaces need to be defined as compared to those
in the figure, assuming the SPC is either integrated in the LMF or
attached to it with a proprietary interface.</p>
<p><img src="media/image62.svg" /></p>
<p>Figure A.2-1: System reference architecture reference for Location
Services in reference point representation</p>
<p>The Lup and Llp interfaces shown in this architecture are part of the
user-plane solution only and are not required for control-plane
positioning.</p>
<h1 id="a.3-lpp-session-procedures-using-supl">A.3 LPP session
procedures using SUPL</h1>
<p>This clause indicates how an LPP session relates to the SUPL message
set. Figure A.3-1 shows how SUPL and LPP can be combined within a SUPL
positioning session. Step 4 here is repeated to exchange multiple LPP
messages between the SLP and SET.</p>
<p><img src="media/image63.svg" /></p>
<p>Figure A.3-1: LPP session over SUPL</p>
<p>For positioning operations which take place entirely within an LPP
session (step 4 in Figure A.3-1), the flow of LPP messages can be the
same as in the control-plane version of LPP; the role of the (LPP)
target is taken by the target SET, and that of the (LPP) server by the
SLP. An example LPP flow, including exchange of capabilities, request
and delivery of assistance data, and request and delivery of positioning
information, is shown in Figure A.3-2.</p>
<p><img src="media/image64.svg" /></p>
<p>Figure A.3-2: LPP session over SUPL</p>
<h1 id="a.4-procedures-combining-c-plane-and-u-plane-operations">A.4
Procedures combining C-plane and U-plane operations</h1>
<p>Since SUPL by definition is carried over the user plane, it is not
applicable to operations terminating at the NG-RAN. SUPL operations must
take place in combination with control-plane procedures over NRPPa.</p>
<p>This situation could arise in the case of UE-assisted OTDOA, for
example, in which the SLP needs to provide the UE (in a SUPL session)
with assistance data supplied by the NG-RAN. This clause uses a
UE-assisted OTDOA positioning operation as an example.</p>
<p>Although the positioning server in this operation is the SLP, the
existence of an interface to the LMF means that the SLP can communicate
with the LMF via the SPC. In particular, this means that assistance data
that was delivered to the LMF via NRPPa can be transferred over to the
SLP for delivery to the UE via LPP over SUPL.</p>
<p>There are several ways to realise this general behaviour. In the
simplest case, the LMF could be supplied with the necessary assistance
data in advance, so that it can be supplied to the SLP without any
actual NRPPa procedures taking place in real time (and possibly even
before the positioning transaction begins).</p>
<p><img src="media/image65.svg" /></p>
<p>Figure A.4-1: Transfer of OTDOA assistance data to UE via SUPL</p>
<p>In the event that the LMF does not have the required assistance data
available, it would need to retrieve them from the NG-RAN once it was
made aware that they were needed.</p>
<p><img src="media/image66.svg" /></p>
<p>Figure A.4-2: Transfer to the UE via SUPL of OTDOA assistance data
not already available at the LMF</p>
<p>In both cases, it should be noted that the retrieval of the
assistance data is transparent to the UE and to the actual SUPL session.
This model is parallel to the approach used with A-GNSS, in which
assistance data such as satellite ephemerides are retrieved from sources
entirely external to the cellular network. For purposes of LPP over
SUPL, the delivery of assistance data to the SLP can be viewed as an
independent external process.</p>
<p>The delivery of assistance data to the UE, however, takes place
through the same mechanisms as control-plane LPP, transported through
SUPL.</p>
<p class="heading" id="annex-b-informative-change-history"><br />
Annex B (informative):<br />
Change history</p>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 7%" />
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 53%" />
<col style="width: 7%" />
</colgroup>
<tbody>
<tr>
<td colspan="8" style="text-align: center;"><strong>Change
history</strong></td>
</tr>
<tr>
<td style="text-align: center;"><strong>Date</strong></td>
<td style="text-align: center;"><strong>Meeting</strong></td>
<td style="text-align: center;"><strong>TDoc</strong></td>
<td style="text-align: center;"><strong>CR</strong></td>
<td style="text-align: center;"><strong>Rev</strong></td>
<td style="text-align: center;"><strong>Cat</strong></td>
<td style="text-align: center;"><strong>Subject/Comment</strong></td>
<td style="text-align: center;"><strong>New version</strong></td>
</tr>
<tr>
<td style="text-align: center;">08/2017</td>
<td style="text-align: left;">RAN2#99</td>
<td style="text-align: left;">R2-1709477</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Skeleton for TS 38.305</td>
<td style="text-align: left;">0.0.1</td>
</tr>
<tr>
<td style="text-align: center;">03/2018</td>
<td style="text-align: left;">RAN2#101</td>
<td style="text-align: left;">R2-1803804</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">0.1.0</td>
</tr>
<tr>
<td style="text-align: center;">03/2018</td>
<td style="text-align: left;">RAN#79</td>
<td style="text-align: left;">RP-180171</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Submitted for Information in RAN#79</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr>
<td style="text-align: center;">05/2018</td>
<td style="text-align: left;">RAN2#102</td>
<td style="text-align: left;">R2-1808695</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">1.1.0</td>
</tr>
<tr>
<td style="text-align: center;">05/2018</td>
<td style="text-align: left;">RAN2#102</td>
<td style="text-align: left;">R2-1809137</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">1.2.0</td>
</tr>
<tr>
<td style="text-align: center;">06/2018</td>
<td style="text-align: left;">RP-80</td>
<td style="text-align: left;">RP-180689</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Submitted for Approval in RAN#80</td>
<td style="text-align: left;">2.0.0</td>
</tr>
<tr>
<td style="text-align: center;">06/2018</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Upgraded to Rel-15 after plenary
approval</td>
<td style="text-align: left;">15.0.0</td>
</tr>
<tr>
<td style="text-align: center;">09/2018</td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181939</td>
<td style="text-align: center;">0001</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Signalling between an LMF and NG-RAN
node/UE</td>
<td style="text-align: left;">15.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181942</td>
<td style="text-align: center;">0002</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Gaps for positioning measurements</td>
<td style="text-align: left;">15.1.0</td>
</tr>
<tr>
<td style="text-align: center;">12/2018</td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182655</td>
<td style="text-align: center;">0006</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Addition of RTK Assistance Data</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182656</td>
<td style="text-align: center;">0007</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Capture use of motion information from
motion sensors</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;">03/2019</td>
<td style="text-align: left;">RP-83</td>
<td style="text-align: left;">RP-190544</td>
<td style="text-align: center;">0008</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR to 38.305 on use of positioning
measurement gaps for subframe and slot timing detection towards
E-UTRA</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;">06/2019</td>
<td style="text-align: left;">RP-84</td>
<td style="text-align: left;">RP-191374</td>
<td style="text-align: center;">0009</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Minor restructuring of sensor references
and addition of sensor methods (IMU)</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-84</td>
<td style="text-align: left;">RP-191374</td>
<td style="text-align: center;">0010</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Adding missing reference for autonomous
and measuremnts gaps for Inter-RAT RSTD measurements</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-84</td>
<td style="text-align: left;">RP-191376</td>
<td style="text-align: center;">0011</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Update of OMA SUPL information</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-84</td>
<td style="text-align: left;">RP-191378</td>
<td style="text-align: center;">0012</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">UE Identifier for routing message
between Core Network Nodes and RAN</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;">12/2019</td>
<td style="text-align: left;">RP-86</td>
<td style="text-align: left;">RP-192938</td>
<td style="text-align: center;">0014</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the EUTRAN
terminology</td>
<td style="text-align: left;">15.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-86</td>
<td style="text-align: left;">RP-192935</td>
<td style="text-align: center;">0015</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections for Positioning
Architecture</td>
<td style="text-align: left;">15.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-86</td>
<td style="text-align: left;">RP-192935</td>
<td style="text-align: center;">0016</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections of terminology for stage
2</td>
<td style="text-align: left;">15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">03/2020</td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200357</td>
<td style="text-align: center;">0013</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of B1C signal in BDS system
in A-GNSS</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200345</td>
<td style="text-align: center;">0017</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of NR positioning</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">07/2020</td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201161</td>
<td style="text-align: center;">0019</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Clarification on UE Positioning
Architecture</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201175</td>
<td style="text-align: center;">0021</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">CR to clarify the meaning of GNSS term
in 38.305 Rel-16</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201190</td>
<td style="text-align: center;">0024</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Update B1I signal ICD file to v3.0 in
BDS system in A-GNSS</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201175</td>
<td style="text-align: center;">0025</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to NR Positioning</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">09/2020</td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201989</td>
<td style="text-align: center;">0028</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to SUPL support for NR
positioning methods</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201989</td>
<td style="text-align: center;">0029</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on Stage-2 for gNB and LMF
information transfer</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201989</td>
<td style="text-align: center;">0032</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous correction to stage2
spec</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201989</td>
<td style="text-align: center;">0033</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Signalling sequence correction for UL
SRS Configuration</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201989</td>
<td style="text-align: center;">0034</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of NR positioning</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">12/2020</td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202775</td>
<td style="text-align: center;">0037</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Remove the NOTE in architecture figure
in TS 38.305</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202775</td>
<td style="text-align: center;">0048</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Correction to OTDOA positoning support
descriptions in R16</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202775</td>
<td style="text-align: center;">0053</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">NR positioning Stage 2 corrections</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">03/2021</td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210703</td>
<td style="text-align: center;">0062</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Support OTDOA assistance data for case
of NR serving cell</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210693</td>
<td style="text-align: center;">0065</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the description for gNB
measurements</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">06/2021</td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211480</td>
<td style="text-align: center;">0069</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to 5G support for NB-IoT
positioning</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211474</td>
<td style="text-align: center;">0072</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to NR stage2 spec for
MO-LR</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211474</td>
<td style="text-align: center;">0074</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Addition of missing parameters for the
SRS spatial information</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211474</td>
<td style="text-align: center;">0075</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on NRPPa transaction
types</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">09/2021</td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212443</td>
<td style="text-align: center;">0064</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to UL E-CID-R16</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212443</td>
<td style="text-align: center;">0077</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to 38.305 on NG-RAN
positioning operations</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212443</td>
<td style="text-align: center;">0078</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on user-plane positioning
support by SUPL</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">12/2021</td>
<td style="text-align: left;">RP-94</td>
<td style="text-align: left;">RP-213344</td>
<td style="text-align: center;">0081</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Alignment between stage 2 and Stage 3
specifications</td>
<td style="text-align: left;">16.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-94</td>
<td style="text-align: left;">RP-213344</td>
<td style="text-align: center;">0083</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on defintions and scope of
information transfer</td>
<td style="text-align: left;">16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">03/2022</td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220510</td>
<td style="text-align: center;">0082</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Addition of Timing Advance measurement
reporting in NR E-CID [NRTADV]</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220479</td>
<td style="text-align: center;">0086</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of R17 Positioning
Enhancements</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">06/2022</td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221725</td>
<td style="text-align: center;">0099</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">38.305 CR for Positioning WI</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221725</td>
<td style="text-align: center;">0100</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Stage 2 corrections for NR Positioning
Enhancements</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">09/2022</td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222521</td>
<td style="text-align: center;">0102</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Correction on the description of
deferred MT-LR</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222524</td>
<td style="text-align: center;">0105</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Mscellaneous corrections for
TS38.305</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">12/2022</td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223411</td>
<td style="text-align: center;">0117</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on NRPPa functions and
procedures</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">03/2023</td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230688</td>
<td style="text-align: center;">0118</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to stage 2 descriptions for
NR positioning</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230688</td>
<td style="text-align: center;">0119</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections for
Positioning Stage2</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">06/2023</td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231412</td>
<td style="text-align: center;">0123</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections on 38.305</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231412</td>
<td style="text-align: center;">0124</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to
UEPositioningAssistanceInformation</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231412</td>
<td style="text-align: center;">0125</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Update of information transfer from gNB
to LMF</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231412</td>
<td style="text-align: center;">0126</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Measurements and Assistance Data
Transfer</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231412</td>
<td style="text-align: center;">0127</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Protection Level and Target Integrity
Risk</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231409</td>
<td style="text-align: center;">0131</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">APC clarification for SSR
positioning</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231411</td>
<td style="text-align: center;">0133</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Zero Yaw clarification for SSR
positioning</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231412</td>
<td style="text-align: center;">0135</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Stage 2 procedure for deactivation of MG
gap and PPW</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231412</td>
<td style="text-align: center;">0136</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Alert Limit</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">09/2023</td>
<td style="text-align: left;">RP-101</td>
<td style="text-align: left;">RP-232667</td>
<td style="text-align: center;">0141</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Positioning Information Transfer</td>
<td style="text-align: left;">17.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-101</td>
<td style="text-align: left;">RP-232667</td>
<td style="text-align: center;">0142</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to missing NRPPa
procedures</td>
<td style="text-align: left;">17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">12/2023</td>
<td style="text-align: left;">RP-102</td>
<td style="text-align: left;">RP-233886</td>
<td style="text-align: center;">0149</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Sequence of Procedure for Multi-RTT
positioning correction</td>
<td style="text-align: left;">17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">03/2025</td>
<td style="text-align: left;">RP-107</td>
<td style="text-align: left;">RP-250659</td>
<td style="text-align: center;">0182</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to PRS priority subset for
DL-AoD</td>
<td style="text-align: left;">17.8.0</td>
</tr>
</tbody>
</table>
</body>
</html>
