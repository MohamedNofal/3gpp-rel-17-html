<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>38509-h50</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#contents" id="toc-contents"><br />
Contents</a></li>
<li><a href="#foreword" id="toc-foreword"><br />
Foreword</a></li>
<li><a href="#scope" id="toc-scope"><br />
1 Scope</a></li>
<li><a href="#references" id="toc-references">2 References</a></li>
<li><a href="#definitions-symbols-and-abbreviations"
id="toc-definitions-symbols-and-abbreviations">3 Definitions, symbols
and abbreviations</a>
<ul>
<li><a href="#definitions" id="toc-definitions">3.1 Definitions</a></li>
<li><a href="#symbols" id="toc-symbols">3.2 Symbols</a></li>
<li><a href="#abbreviations" id="toc-abbreviations">3.3
Abbreviations</a></li>
</ul></li>
<li><a href="#ue-special-conformance-test-functions-overview"
id="toc-ue-special-conformance-test-functions-overview">4 UE special
conformance test functions overview</a>
<ul>
<li><a href="#requirements-for-ue-support-of-test-functions"
id="toc-requirements-for-ue-support-of-test-functions">4.1 Requirements
for UE support of test functions</a></li>
<li><a href="#ue-special-conformance-test-functions-concept"
id="toc-ue-special-conformance-test-functions-concept">4.2 UE special
conformance test functions concept</a></li>
</ul></li>
<li><a href="#ue-special-conformance-test-functions-operation"
id="toc-ue-special-conformance-test-functions-operation">5 UE special
conformance test functions operation</a>
<ul>
<li><a href="#general" id="toc-general">5.1 General</a></li>
<li><a
href="#activation-and-deactivation-of-5gs-test-mode-bearers-ue-test-mode-procedures"
id="toc-activation-and-deactivation-of-5gs-test-mode-bearers-ue-test-mode-procedures">5.2
Activation and deactivation of 5GS test mode bearers (UE test mode
procedures)</a>
<ul>
<li><a href="#general-1" id="toc-general-1">5.2.1 General</a></li>
<li><a href="#activate-ue-test-mode"
id="toc-activate-ue-test-mode">5.2.2 Activate UE test mode</a></li>
<li><a href="#deactivate-ue-test-mode"
id="toc-deactivate-ue-test-mode">5.2.3 Deactivate UE test mode</a></li>
</ul></li>
<li><a href="#test-loop-functions" id="toc-test-loop-functions">5.3 Test
loop functions</a>
<ul>
<li><a href="#general-2" id="toc-general-2">5.3.1 General</a></li>
<li><a href="#close-ue-test-loop" id="toc-close-ue-test-loop">5.3.2
Close UE test loop</a>
<ul>
<li><a href="#general-3" id="toc-general-3">5.3.2.0 General</a></li>
<li><a href="#reception-of-close-ue-test-loop-message-by-the-ue"
id="toc-reception-of-close-ue-test-loop-message-by-the-ue">5.3.2.1
Reception of CLOSE UE TEST LOOP message by the UE</a></li>
<li><a href="#reception-of-at-command-ccutle-by-the-ue"
id="toc-reception-of-at-command-ccutle-by-the-ue">5.3.2.2 Reception of
AT Command +CCUTLE by the UE</a></li>
</ul></li>
<li><a href="#open-ue-test-loop" id="toc-open-ue-test-loop">5.3.3 Open
UE test loop</a></li>
<li><a href="#ue-functionality-when-test-loop-is-closed"
id="toc-ue-functionality-when-test-loop-is-closed">5.3.4 UE
functionality when test loop is closed</a>
<ul>
<li><a href="#ue-test-loop-mode-a-operation"
id="toc-ue-test-loop-mode-a-operation">5.3.4.1 UE test loop mode A
operation</a></li>
<li><a href="#ue-test-loop-mode-b-operation"
id="toc-ue-test-loop-mode-b-operation">5.3.4.2 UE test loop mode B
operation</a>
<ul>
<li><a href="#general-4" id="toc-general-4">5.3.4.2.1 General</a></li>
<li><a href="#ue-test-loop-mode-b-operation-for-en-dc-and-ngen-dc"
id="toc-ue-test-loop-mode-b-operation-for-en-dc-and-ngen-dc">5.3.4.2.2
UE test loop mode B operation for EN-DC and NGEN-DC</a></li>
<li><a href="#ue-test-loop-mode-b-operation-for-standalone-nr"
id="toc-ue-test-loop-mode-b-operation-for-standalone-nr">5.3.4.2.3 UE
test loop mode B operation for Standalone NR</a></li>
<li><a href="#ue-test-loop-mode-b-operation-for-ne-dc"
id="toc-ue-test-loop-mode-b-operation-for-ne-dc">5.3.4.2.4 UE test loop
mode B operation for NE-DC</a></li>
</ul></li>
<li><a href="#a-ue-test-loop-mode-c-operation"
id="toc-a-ue-test-loop-mode-c-operation">5.3.4.2A UE test loop mode C
operation</a>
<ul>
<li><a href="#a.1-general" id="toc-a.1-general">5.3.4.2A.1
General</a></li>
<li><a href="#a.2-reception-of-mbs-packets"
id="toc-a.2-reception-of-mbs-packets">5.3.4.2A.2 Reception of MBS
packets</a></li>
<li><a href="#a.3-release-of-rrc-connection"
id="toc-a.3-release-of-rrc-connection">5.3.4.2A.3 Release of RRC
connection</a></li>
</ul></li>
<li><a href="#ue-test-loop-mode-e-operation"
id="toc-ue-test-loop-mode-e-operation">5.3.4.3 UE test loop mode E
operation</a>
<ul>
<li><a href="#general-5" id="toc-general-5">5.3.4.3.0 General</a></li>
<li><a href="#receive-or-transmit-nr-sidelink-communication"
id="toc-receive-or-transmit-nr-sidelink-communication">5.3.4.3.1 Receive
or Transmit NR sidelink Communication</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#ue-beamlock-test-function-ubf"
id="toc-ue-beamlock-test-function-ubf">5.4 UE Beamlock test Function
(UBF)</a>
<ul>
<li><a href="#general-6" id="toc-general-6">5.4.1 General</a></li>
<li><a href="#activate-beamlock-procedure"
id="toc-activate-beamlock-procedure">5.4.2 Activate Beamlock
procedure</a>
<ul>
<li><a href="#initiation" id="toc-initiation">5.4.2.1
Initiation</a></li>
<li><a href="#reception-of-activate-beamlock-message-by-ue"
id="toc-reception-of-activate-beamlock-message-by-ue">5.4.2.2 Reception
of ACTIVATE BEAMLOCK message by UE</a></li>
</ul></li>
<li><a href="#deactivate-beamlock-procedure"
id="toc-deactivate-beamlock-procedure">5.4.3 Deactivate Beamlock
procedure</a>
<ul>
<li><a href="#initiation-1" id="toc-initiation-1">5.4.3.1
Initiation</a></li>
<li><a href="#reception-of-deactivate-beamlock-message-by-ue"
id="toc-reception-of-deactivate-beamlock-message-by-ue">5.4.3.2
Reception of DEACTIVATE BEAMLOCK message by UE</a></li>
<li><a href="#release-of-antenna-beamlock-by-ue"
id="toc-release-of-antenna-beamlock-by-ue">5.4.3.3 Release of antenna
beamlock by UE</a></li>
</ul></li>
</ul></li>
<li><a href="#ue-ss-rsrpb-per-receiver-branch-reporting"
id="toc-ue-ss-rsrpb-per-receiver-branch-reporting">5.5 UE SS-RSRPB per
receiver branch reporting</a>
<ul>
<li><a href="#general-7" id="toc-general-7">5.5.1 General</a></li>
<li><a href="#initiation-2" id="toc-initiation-2">5.5.2
Initiation</a></li>
<li><a href="#reception-of-ss-rsrpb-report-request-message-by-ue"
id="toc-reception-of-ss-rsrpb-report-request-message-by-ue">5.5.3
Reception of SS-RSRPB REPORT REQUEST message by UE</a></li>
</ul></li>
<li><a href="#ue-positioning-test-mode-procedures"
id="toc-ue-positioning-test-mode-procedures">5.6 UE Positioning test
mode procedures</a>
<ul>
<li><a href="#reset-ue-positioning-stored-information"
id="toc-reset-ue-positioning-stored-information">5.6.1 Reset UE
Positioning Stored Information</a>
<ul>
<li><a href="#general-8" id="toc-general-8">5.6.1.1 General</a></li>
<li><a href="#initiation-3" id="toc-initiation-3">5.6.1.2
Initiation</a></li>
<li><a
href="#reception-of-reset-ue-positioning-stored-information-message-by-ue"
id="toc-reception-of-reset-ue-positioning-stored-information-message-by-ue">5.6.1.3
Reception of RESET UE POSITIONING STORED INFORMATION message by
UE</a></li>
</ul></li>
<li><a href="#update-ue-location-information"
id="toc-update-ue-location-information">5.6.2 Update UE Location
Information</a>
<ul>
<li><a href="#general-9" id="toc-general-9">5.6.2.1 General</a></li>
<li><a href="#initiation-4" id="toc-initiation-4">5.6.2.2
Initiation</a></li>
<li><a href="#reception-of-update-ue-location-information-message-by-ue"
id="toc-reception-of-update-ue-location-information-message-by-ue">5.6.2.3
Reception of UPDATE UE LOCATION INFORMATION message by UE</a></li>
</ul></li>
<li><a href="#utc-time-reset" id="toc-utc-time-reset">5.6.3 UTC time
reset</a></li>
</ul></li>
<li><a href="#nssai-delete-test-function"
id="toc-nssai-delete-test-function">5.7 NSSAI delete test function</a>
<ul>
<li><a href="#general-10" id="toc-general-10">5.7.1 General</a></li>
</ul></li>
<li><a href="#set-uai-test-function" id="toc-set-uai-test-function">5.8
Set UAI test function</a>
<ul>
<li><a href="#general-11" id="toc-general-11">5.8.1 General</a></li>
<li><a href="#initiation-5" id="toc-initiation-5">5.8.2
Initiation</a></li>
</ul></li>
<li><a href="#nr-sidelink-packet-counter-reporting-procedure"
id="toc-nr-sidelink-packet-counter-reporting-procedure">5.9 NR Sidelink
Packet Counter reporting procedure</a>
<ul>
<li><a href="#request-nr-sidelink-packet-counter-value"
id="toc-request-nr-sidelink-packet-counter-value">5.9.1 Request NR
Sidelink Packet Counter value</a>
<ul>
<li><a href="#general-12" id="toc-general-12">5.9.1.1 General</a></li>
<li><a href="#initiation-6" id="toc-initiation-6">5.9.1.2
Initiation</a></li>
<li><a
href="#reception-of-ue-test-loop-nr-sidelink-counter-request-by-the-ue"
id="toc-reception-of-ue-test-loop-nr-sidelink-counter-request-by-the-ue">5.9.1.3
Reception of UE TEST LOOP NR SIDELINK COUNTER REQUEST by the UE</a></li>
<li><a href="#reception-of-at-command-cuspcreq-by-the-ue"
id="toc-reception-of-at-command-cuspcreq-by-the-ue">5.9.1.4 Reception of
AT Command +CUSPCREQ by the UE</a></li>
</ul></li>
</ul></li>
<li><a href="#set-ul-message-test-function"
id="toc-set-ul-message-test-function">5.10 Set UL Message test
function</a>
<ul>
<li><a href="#general-13" id="toc-general-13">5.10.1 General</a></li>
</ul></li>
<li><a href="#ue-power-limit-function-uplf"
id="toc-ue-power-limit-function-uplf">5.11 UE Power Limit Function
(UPLF)</a>
<ul>
<li><a href="#general-14" id="toc-general-14">5.11.1 General</a></li>
<li><a href="#activate-power-limit-procedure"
id="toc-activate-power-limit-procedure">5.11.2 Activate Power Limit
Procedure</a>
<ul>
<li><a href="#initiation-7" id="toc-initiation-7">5.11.2.1
Initiation</a></li>
<li><a href="#reception-of-activate-power-limit-request-by-ue"
id="toc-reception-of-activate-power-limit-request-by-ue">5.11.2.2
Reception of ACTIVATE POWER LIMIT REQUEST by UE</a></li>
</ul></li>
<li><a href="#deactivate-power-limit-procedure"
id="toc-deactivate-power-limit-procedure">5.11.3 Deactivate Power Limit
Procedure</a>
<ul>
<li><a href="#initiation-8" id="toc-initiation-8">5.11.3.1
Initiation</a></li>
<li><a href="#reception-of-deactivate-power-limit-request-message-by-ue"
id="toc-reception-of-deactivate-power-limit-request-message-by-ue">5.11.3.2
Reception of DEACTIVATE POWER LIMIT REQUEST message by UE</a></li>
<li><a href="#removal-of-power-limits-by-ue"
id="toc-removal-of-power-limits-by-ue">5.11.3.3 Removal of power limits
by UE</a></li>
</ul></li>
</ul></li>
<li><a href="#mbms-packet-counter-reporting-procedure"
id="toc-mbms-packet-counter-reporting-procedure">5.12 MBMS Packet
Counter reporting procedure</a>
<ul>
<li><a href="#request-mbms-packet-counter-value"
id="toc-request-mbms-packet-counter-value">5.12.1 Request MBMS Packet
Counter value</a></li>
</ul></li>
<li><a href="#set-musim-uai-test-function"
id="toc-set-musim-uai-test-function">5.13 Set MUSIM UAI test
function</a>
<ul>
<li><a href="#general-15" id="toc-general-15">5.13.1 General</a></li>
<li><a href="#initiation-9" id="toc-initiation-9">5.13.2
Initiation</a></li>
</ul></li>
</ul></li>
<li><a href="#test-mode-control-message-definitions"
id="toc-test-mode-control-message-definitions">6 Test Mode Control
message definitions</a>
<ul>
<li><a href="#general-16" id="toc-general-16">6.1 General</a></li>
<li><a href="#test-mode-messages" id="toc-test-mode-messages">6.2 Test
mode messages</a>
<ul>
<li><a href="#activate-test-mode" id="toc-activate-test-mode">6.2.1
ACTIVATE TEST MODE</a></li>
<li><a href="#activate-test-mode-complete"
id="toc-activate-test-mode-complete">6.2.2 ACTIVATE TEST MODE
COMPLETE</a></li>
<li><a href="#deactivate-test-mode" id="toc-deactivate-test-mode">6.2.3
DEACTIVATE TEST MODE</a></li>
<li><a href="#deactivate-test-mode-complete"
id="toc-deactivate-test-mode-complete">6.2.4 DEACTIVATE TEST MODE
COMPLETE</a></li>
</ul></li>
<li><a href="#test-loop-messages" id="toc-test-loop-messages">6.3 Test
loop messages</a>
<ul>
<li><a href="#close-ue-test-loop-1" id="toc-close-ue-test-loop-1">6.3.1
CLOSE UE TEST LOOP</a></li>
<li><a href="#close-ue-test-loop-complete"
id="toc-close-ue-test-loop-complete">6.3.2 CLOSE UE TEST LOOP
COMPLETE</a></li>
<li><a href="#open-ue-test-loop-1" id="toc-open-ue-test-loop-1">6.3.3
OPEN UE TEST LOOP</a></li>
<li><a href="#open-ue-test-loop-complete"
id="toc-open-ue-test-loop-complete">6.3.4 OPEN UE TEST LOOP
COMPLETE</a></li>
<li><a href="#void" id="toc-void">6.3.5 Void</a></li>
<li><a href="#void-1" id="toc-void-1">6.3.6 Void</a></li>
</ul></li>
<li><a href="#beamlock-messages" id="toc-beamlock-messages">6.4 Beamlock
messages</a>
<ul>
<li><a href="#activate-beamlock" id="toc-activate-beamlock">6.4.1
ACTIVATE BEAMLOCK</a></li>
<li><a href="#activate-beamlock-complete"
id="toc-activate-beamlock-complete">6.4.2 ACTIVATE BEAMLOCK
COMPLETE</a></li>
<li><a href="#deactivate-beamlock" id="toc-deactivate-beamlock">6.4.3
DEACTIVATE BEAMLOCK</a></li>
<li><a href="#deactivate-beamlock-complete"
id="toc-deactivate-beamlock-complete">6.4.4 DEACTIVATE BEAMLOCK
COMPLETE</a></li>
</ul></li>
<li><a href="#ue-ss-rsrp-per-receiver-branch-reporting-messages"
id="toc-ue-ss-rsrp-per-receiver-branch-reporting-messages">6.5 UE
SS-RSRP per receiver branch reporting messages</a>
<ul>
<li><a href="#ss-rsrpb-report-request"
id="toc-ss-rsrpb-report-request">6.5.1 SS-RSRPB REPORT REQUEST</a></li>
<li><a href="#ss-rsrpb-report-response"
id="toc-ss-rsrpb-report-response">6.5.2 SS-RSRPB REPORT
RESPONSE</a></li>
</ul></li>
<li><a href="#ue-positioning-messages"
id="toc-ue-positioning-messages">6.6 UE Positioning messages</a>
<ul>
<li><a href="#reset-ue-positioning-stored-information-1"
id="toc-reset-ue-positioning-stored-information-1">6.6.1 RESET UE
POSITIONING STORED INFORMATION</a></li>
<li><a href="#update-ue-location-information-1"
id="toc-update-ue-location-information-1">6.6.2 UPDATE UE LOCATION
INFORMATION</a></li>
</ul></li>
<li><a href="#nssai-delete-messages" id="toc-nssai-delete-messages">6.7
NSSAI delete messages</a>
<ul>
<li><a href="#nssai-delete-request" id="toc-nssai-delete-request">6.7.1
NSSAI DELETE REQUEST</a></li>
<li><a href="#nssai-delete-response"
id="toc-nssai-delete-response">6.7.2 NSSAI DELETE RESPONSE</a></li>
</ul></li>
<li><a href="#set-uai-request" id="toc-set-uai-request">6.8 SET UAI
REQUEST</a>
<ul>
<li><a href="#set-uai-request-1" id="toc-set-uai-request-1">6.8.1 SET
UAI REQUEST</a></li>
<li><a href="#set-uai-response" id="toc-set-uai-response">6.8.2 SET UAI
RESPONSE</a></li>
</ul></li>
<li><a href="#nr-sidelink-packet-counter-reporting-messages"
id="toc-nr-sidelink-packet-counter-reporting-messages">6.9 NR SIDELINK
PACKET COUNTER reporting messages</a>
<ul>
<li><a href="#ue-test-loop-nr-sidelink-packet-counter-request"
id="toc-ue-test-loop-nr-sidelink-packet-counter-request">6.9.1 UE TEST
LOOP NR SIDELINK PACKET COUNTER REQUEST</a></li>
<li><a href="#ue-test-loop-nr-sidelink-packet-counter-response"
id="toc-ue-test-loop-nr-sidelink-packet-counter-response">6.9.2 UE TEST
LOOP NR SIDELINK PACKET COUNTER RESPONSE</a></li>
</ul></li>
<li><a href="#set-ul-message" id="toc-set-ul-message">6.10 SET UL
MESSAGE</a>
<ul>
<li><a href="#set-ul-message-request"
id="toc-set-ul-message-request">6.10.1 SET UL MESSAGE REQUEST </a></li>
<li><a href="#set-ul-message-response"
id="toc-set-ul-message-response">6.10.2 SET UL MESSAGE RESPONSE</a></li>
</ul></li>
<li><a href="#power-limit-messages" id="toc-power-limit-messages">6.11
Power Limit messages</a>
<ul>
<li><a href="#activate-power-limit-request"
id="toc-activate-power-limit-request">6.11.1 ACTIVATE POWER LIMIT
REQUEST</a></li>
<li><a href="#activate-power-limit-response"
id="toc-activate-power-limit-response">6.11.2 ACTIVATE POWER LIMIT
RESPONSE</a></li>
<li><a href="#deactivate-power-limit-request"
id="toc-deactivate-power-limit-request">6.11.3 DEACTIVATE POWER LIMIT
REQUEST</a></li>
<li><a href="#deactivate-power-limit-response"
id="toc-deactivate-power-limit-response">6.11.4 DEACTIVATE POWER LIMIT
RESPONSE</a></li>
</ul></li>
<li><a
href="#ue-test-loop-mode-c-mbms-packet-counter-reporting-messages"
id="toc-ue-test-loop-mode-c-mbms-packet-counter-reporting-messages">6.12
UE TEST LOOP MODE C MBMS PACKET COUNTER reporting messages</a>
<ul>
<li><a href="#ue-test-loop-mode-c-mbms-packet-counter-request"
id="toc-ue-test-loop-mode-c-mbms-packet-counter-request">6.12.1 UE TEST
LOOP MODE C MBMS PACKET COUNTER REQUEST</a></li>
<li><a href="#ue-test-loop-mode-c-mbms-packet-counter-response"
id="toc-ue-test-loop-mode-c-mbms-packet-counter-response">6.12.2 UE TEST
LOOP MODE C MBMS PACKET COUNTER RESPONSE</a></li>
</ul></li>
<li><a href="#set-musim-uai-request" id="toc-set-musim-uai-request">6.13
SET MUSIM UAI REQUEST</a>
<ul>
<li><a href="#set-musim-uai-request-1"
id="toc-set-musim-uai-request-1">6.13.1 SET MUSIM UAI REQUEST</a></li>
<li><a href="#set-musim-uai-response"
id="toc-set-musim-uai-response">6.13.2 SET MUSIM UAI RESPONSE</a></li>
</ul></li>
</ul></li>
<li><a href="#variables-constants-and-timers"
id="toc-variables-constants-and-timers">7 Variables, constants and
timers</a>
<ul>
<li><a href="#state-variables" id="toc-state-variables">7.1 State
variables</a></li>
<li><a href="#constants" id="toc-constants">7.2 Constants</a></li>
<li><a href="#timers" id="toc-timers">7.3 Timers</a></li>
<li><a href="#configurable-parameters"
id="toc-configurable-parameters">7.4 Configurable parameters</a></li>
</ul></li>
<li><a href="#electrical-man-machine-interface-emmi"
id="toc-electrical-man-machine-interface-emmi">8 Electrical Man Machine
Interface (EMMI)</a></li>
</ul>
</nav>
<p>3GPP TS 38.509 V17.5.0 (2024-03)</p>
<p>Technical Specification</p>
<p>3rd Generation Partnership Project;</p>
<p>Technical Specification Group Radio Access Network;</p>
<p>5GS;</p>
<p>Special conformance testing functions for User Equipment (UE)</p>
<p>(Release 17)</p>
<p><img src="media/image1.jpeg" /> <img src="media/image2.png" /></p>
<p>The present document has been developed within the 3rd Generation
Partnership Project (3GPP <sup>TM</sup>) and may be further elaborated
for the purposes of 3GPP..<br />
The present document has not been subject to any approval process by the
3GPP Organizational Partners and shall not be implemented.<br />
This Specification is provided for future development work within 3GPP
only. The Organizational Partners accept no liability for any use of
this Specification.<br />
Specifications and Reports for implementation of the 3GPP <sup>TM</sup>
system should be obtained via the 3GPP Organizational Partners'
Publications Offices.</p>
<blockquote>
<p>Keywords</p>
<p>5GS, UE, terminal, testing</p>
<p><em><strong>3GPP</strong></em></p>
<p>Postal address</p>
<p>3GPP support office address</p>
<p>650 Route des Lucioles - Sophia Antipolis</p>
<p>Valbonne - FRANCE</p>
<p>Tel.: +33 4 92 94 42 00 Fax: +33 4 93 65 47 16</p>
<p>Internet</p>
<p>http://www.3gpp.org</p>
</blockquote>
<p><em><strong>Copyright Notification</strong></em></p>
<p>No part may be reproduced except as authorized by written
permission.<br />
The copyright and the foregoing restriction extend to reproduction in
all media.</p>
<p>© 2024, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).</p>
<p>All rights reserved.</p>
<p>UMTS™ is a Trade Mark of ETSI registered for the benefit of its
members</p>
<p>3GPP™ is a Trade Mark of ETSI registered for the benefit of its
Members and of the 3GPP Organizational Partners<br />
LTE™ is a Trade Mark of ETSI registered for the benefit of its Members
and of the 3GPP Organizational Partners</p>
<p>GSM® and the GSM logo are registered and owned by the GSM
Association</p>
<h1 class="TT" id="contents"><br />
Contents</h1>
<p>Foreword <a href="#foreword">6</a></p>
<p>1 Scope <a href="#scope">7</a></p>
<p>2 References <a href="#references">7</a></p>
<p>3 Definitions, symbols and abbreviations <a
href="#definitions-symbols-and-abbreviations">8</a></p>
<p>3.1 Definitions <a href="#definitions">8</a></p>
<p>3.2 Symbols <a href="#symbols">9</a></p>
<p>3.3 Abbreviations <a href="#abbreviations">9</a></p>
<p>4 UE special conformance test functions overview <a
href="#ue-special-conformance-test-functions-overview">9</a></p>
<p>4.1 Requirements for UE support of test functions <a
href="#requirements-for-ue-support-of-test-functions">9</a></p>
<p>4.2 UE special conformance test functions concept <a
href="#ue-special-conformance-test-functions-concept">9</a></p>
<p>5 UE special conformance test functions operation <a
href="#ue-special-conformance-test-functions-operation">10</a></p>
<p>5.1 General <a href="#general">10</a></p>
<p>5.2 Activation and deactivation of 5GS test mode bearers (UE test
mode procedures) <a
href="#activation-and-deactivation-of-5gs-test-mode-bearers-ue-test-mode-procedures">11</a></p>
<p>5.2.1 General <a href="#general-1">11</a></p>
<p>5.2.2 Activate UE test mode <a
href="#activate-ue-test-mode">11</a></p>
<p>5.2.3 Deactivate UE test mode <a
href="#deactivate-ue-test-mode">11</a></p>
<p>5.3 Test loop functions <a href="#test-loop-functions">12</a></p>
<p>5.3.1 General <a href="#general-2">12</a></p>
<p>5.3.2 Close UE test loop <a href="#close-ue-test-loop">12</a></p>
<p>5.3.2.0 General <a href="#general-3">12</a></p>
<p>5.3.2.1 Reception of CLOSE UE TEST LOOP message by the UE <a
href="#reception-of-close-ue-test-loop-message-by-the-ue">13</a></p>
<p>5.3.2.2 Reception of AT Command +CCUTLE by the UE <a
href="#reception-of-at-command-ccutle-by-the-ue">14</a></p>
<p>5.3.3 Open UE test loop <a href="#open-ue-test-loop">15</a></p>
<p>5.3.4 UE functionality when test loop is closed <a
href="#ue-functionality-when-test-loop-is-closed">15</a></p>
<p>5.3.4.1 UE test loop mode A operation <a
href="#ue-test-loop-mode-a-operation">15</a></p>
<p>5.3.4.2 UE test loop mode B operation <a
href="#ue-test-loop-mode-b-operation">20</a></p>
<p>5.3.4.2.1 General <a href="#general-4">20</a></p>
<p>5.3.4.2.2 UE test loop mode B operation for EN-DC and NGEN-DC <a
href="#ue-test-loop-mode-b-operation-for-en-dc-and-ngen-dc">21</a></p>
<p>5.3.4.2.3 UE test loop mode B operation for Standalone NR <a
href="#ue-test-loop-mode-b-operation-for-standalone-nr">23</a></p>
<p>5.3.4.2.4 UE test loop mode B operation for NE-DC <a
href="#ue-test-loop-mode-b-operation-for-ne-dc">25</a></p>
<p>5.3.4.2A UE test loop mode C operation <a
href="#a-ue-test-loop-mode-c-operation">27</a></p>
<p>5.3.4.2A.1 General <a href="#a.1-general">27</a></p>
<p>5.3.4.2A.2 Reception of MBS packets <a
href="#a.2-reception-of-mbs-packets">30</a></p>
<p>5.3.4.2A.3 Release of RRC connection <a
href="#a.3-release-of-rrc-connection">31</a></p>
<p>5.3.4.3 UE test loop mode E operation <a
href="#ue-test-loop-mode-e-operation">31</a></p>
<p>5.3.4.3.0 General <a href="#general-5">31</a></p>
<p>5.3.4.3.1 Receive or Transmit NR sidelink Communication <a
href="#receive-or-transmit-nr-sidelink-communication">35</a></p>
<p>5.4 UE Beamlock test Function (UBF) <a
href="#ue-beamlock-test-function-ubf">37</a></p>
<p>5.4.1 General <a href="#general-6">37</a></p>
<p>5.4.2 Activate Beamlock procedure <a
href="#activate-beamlock-procedure">38</a></p>
<p>5.4.2.1 Initiation <a href="#initiation">38</a></p>
<p>5.4.2.2 Reception of ACTIVATE BEAMLOCK message by UE <a
href="#reception-of-activate-beamlock-message-by-ue">38</a></p>
<p>5.4.3 Deactivate Beamlock procedure <a
href="#deactivate-beamlock-procedure">39</a></p>
<p>5.4.3.1 Initiation <a href="#initiation-1">39</a></p>
<p>5.4.3.2 Reception of DEACTIVATE BEAMLOCK message by UE <a
href="#reception-of-deactivate-beamlock-message-by-ue">39</a></p>
<p>5.4.3.3 Release of antenna beamlock by UE <a
href="#release-of-antenna-beamlock-by-ue">39</a></p>
<p>5.5 UE SS-RSRPB per receiver branch reporting <a
href="#ue-ss-rsrpb-per-receiver-branch-reporting">39</a></p>
<p>5.5.1 General <a href="#general-7">39</a></p>
<p>5.5.2 Initiation <a href="#initiation-2">40</a></p>
<p>5.5.3 Reception of SS-RSRPB REPORT REQUEST message by UE <a
href="#reception-of-ss-rsrpb-report-request-message-by-ue">40</a></p>
<p>5.6 UE Positioning test mode procedures <a
href="#ue-positioning-test-mode-procedures">41</a></p>
<p>5.6.1 Reset UE Positioning Stored Information <a
href="#reset-ue-positioning-stored-information">41</a></p>
<p>5.6.1.1 General <a href="#general-8">41</a></p>
<p>5.6.1.2 Initiation <a href="#initiation-3">41</a></p>
<p>5.6.1.3 Reception of RESET UE POSITIONING STORED INFORMATION message
by UE <a
href="#reception-of-reset-ue-positioning-stored-information-message-by-ue">41</a></p>
<p>5.6.2 Update UE Location Information <a
href="#update-ue-location-information">42</a></p>
<p>5.6.2.1 General <a href="#general-9">42</a></p>
<p>5.6.2.2 Initiation <a href="#initiation-4">43</a></p>
<p>5.6.2.3 Reception of UPDATE UE LOCATION INFORMATION message by UE <a
href="#reception-of-update-ue-location-information-message-by-ue">43</a></p>
<p>5.6.3 UTC time reset <a href="#utc-time-reset">43</a></p>
<p>5.7 NSSAI delete test function <a
href="#nssai-delete-test-function">43</a></p>
<p>5.7.1 General <a href="#general-10">43</a></p>
<p>5.8 Set UAI test function <a href="#set-uai-test-function">44</a></p>
<p>5.8.1 General <a href="#general-11">44</a></p>
<p>5.8.2 Initiation <a href="#initiation-5">45</a></p>
<p>5.9 NR Sidelink Packet Counter reporting procedure <a
href="#nr-sidelink-packet-counter-reporting-procedure">45</a></p>
<p>5.9.1 Request NR Sidelink Packet Counter value <a
href="#request-nr-sidelink-packet-counter-value">45</a></p>
<p>5.9.1.1 General <a href="#general-12">46</a></p>
<p>5.9.1.2 Initiation <a href="#initiation-6">46</a></p>
<p>5.9.1.3 Reception of UE TEST LOOP NR SIDELINK COUNTER REQUEST by the
UE <a
href="#reception-of-ue-test-loop-nr-sidelink-counter-request-by-the-ue">46</a></p>
<p>5.9.1.4 Reception of AT Command +CUSPCREQ by the UE <a
href="#reception-of-at-command-cuspcreq-by-the-ue">46</a></p>
<p>5.10 Set UL Message test function <a
href="#set-ul-message-test-function">47</a></p>
<p>5.10.1 General <a href="#general-13">47</a></p>
<p>5.11 UE Power Limit Function (UPLF) <a
href="#ue-power-limit-function-uplf">47</a></p>
<p>5.11.1 General <a href="#general-14">47</a></p>
<p>5.11.2 Activate Power Limit Procedure <a
href="#activate-power-limit-procedure">48</a></p>
<p>5.11.2.1 Initiation <a href="#initiation-7">48</a></p>
<p>5.11.2.2 Reception of ACTIVATE POWER LIMIT REQUEST by UE <a
href="#reception-of-activate-power-limit-request-by-ue">48</a></p>
<p>5.11.3 Deactivate Power Limit Procedure <a
href="#deactivate-power-limit-procedure">49</a></p>
<p>5.11.3.1 Initiation <a href="#initiation-8">49</a></p>
<p>5.11.3.2 Reception of DEACTIVATE POWER LIMIT REQUEST message by UE <a
href="#reception-of-deactivate-power-limit-request-message-by-ue">49</a></p>
<p>5.11.3.3 Removal of power limits by UE <a
href="#removal-of-power-limits-by-ue">49</a></p>
<p>5.12 MBMS Packet Counter reporting procedure <a
href="#mbms-packet-counter-reporting-procedure">49</a></p>
<p>5.12.1 Request MBMS Packet Counter value <a
href="#request-mbms-packet-counter-value">49</a></p>
<p>5.13 Set MUSIM UAI test function <a
href="#set-musim-uai-test-function">49</a></p>
<p>5.13.1 General <a href="#general-15">49</a></p>
<p>5.13.2 Initiation <a href="#initiation-9">50</a></p>
<p>6 Test Mode Control message definitions <a
href="#test-mode-control-message-definitions">50</a></p>
<p>6.1 General <a href="#general-16">50</a></p>
<p>6.2 Test mode messages <a href="#test-mode-messages">51</a></p>
<p>6.2.1 ACTIVATE TEST MODE <a href="#activate-test-mode">51</a></p>
<p>6.2.2 ACTIVATE TEST MODE COMPLETE <a
href="#activate-test-mode-complete">51</a></p>
<p>6.2.3 DEACTIVATE TEST MODE <a href="#deactivate-test-mode">51</a></p>
<p>6.2.4 DEACTIVATE TEST MODE COMPLETE <a
href="#deactivate-test-mode-complete">51</a></p>
<p>6.3 Test loop messages <a href="#test-loop-messages">51</a></p>
<p>6.3.1 CLOSE UE TEST LOOP <a href="#close-ue-test-loop-1">51</a></p>
<p>6.3.2 CLOSE UE TEST LOOP COMPLETE <a
href="#close-ue-test-loop-complete">52</a></p>
<p>6.3.3 OPEN UE TEST LOOP <a href="#open-ue-test-loop-1">52</a></p>
<p>6.3.4 OPEN UE TEST LOOP COMPLETE <a
href="#open-ue-test-loop-complete">52</a></p>
<p>6.3.5 Void <a href="#void">53</a></p>
<p>6.3.6 Void <a href="#void-1">53</a></p>
<p>6.4 Beamlock messages <a href="#beamlock-messages">53</a></p>
<p>6.4.1 ACTIVATE BEAMLOCK <a href="#activate-beamlock">53</a></p>
<p>6.4.2 ACTIVATE BEAMLOCK COMPLETE <a
href="#activate-beamlock-complete">53</a></p>
<p>6.4.3 DEACTIVATE BEAMLOCK <a href="#deactivate-beamlock">54</a></p>
<p>6.4.4 DEACTIVATE BEAMLOCK COMPLETE <a
href="#deactivate-beamlock-complete">54</a></p>
<p>6.5 UE SS-RSRP per receiver branch reporting messages <a
href="#ue-ss-rsrp-per-receiver-branch-reporting-messages">54</a></p>
<p>6.5.1 SS-RSRPB REPORT REQUEST <a
href="#ss-rsrpb-report-request">54</a></p>
<p>6.5.2 SS-RSRPB REPORT RESPONSE <a
href="#ss-rsrpb-report-response">55</a></p>
<p>6.6 UE Positioning messages <a
href="#ue-positioning-messages">55</a></p>
<p>6.6.1 RESET UE POSITIONING STORED INFORMATION <a
href="#reset-ue-positioning-stored-information-1">55</a></p>
<p>6.6.2 UPDATE UE LOCATION INFORMATION <a
href="#update-ue-location-information-1">56</a></p>
<p>6.7 NSSAI delete messages <a href="#nssai-delete-messages">56</a></p>
<p>6.7.1 NSSAI DELETE REQUEST <a href="#nssai-delete-request">56</a></p>
<p>6.7.2 NSSAI DELETE RESPONSE <a
href="#nssai-delete-response">58</a></p>
<p>6.8 SET UAI REQUEST <a href="#set-uai-request">58</a></p>
<p>6.8.1 SET UAI REQUEST <a href="#set-uai-request-1">58</a></p>
<p>6.8.2 SET UAI RESPONSE <a href="#set-uai-response">59</a></p>
<p>6.9 NR SIDELINK PACKET COUNTER reporting messages <a
href="#nr-sidelink-packet-counter-reporting-messages">59</a></p>
<p>6.9.1 UE TEST LOOP NR SIDELINK PACKET COUNTER REQUEST <a
href="#ue-test-loop-nr-sidelink-packet-counter-request">59</a></p>
<p>6.9.2 UE TEST LOOP NR SIDELINK PACKET COUNTER RESPONSE <a
href="#ue-test-loop-nr-sidelink-packet-counter-response">59</a></p>
<p>6.10 SET UL MESSAGE <a href="#set-ul-message">61</a></p>
<p>6.10.1 SET UL MESSAGE REQUEST <a
href="#set-ul-message-request">61</a></p>
<p>6.10.2 SET UL MESSAGE RESPONSE <a
href="#set-ul-message-response">61</a></p>
<p>6.11 Power Limit messages <a href="#power-limit-messages">61</a></p>
<p>6.11.1 ACTIVATE POWER LIMIT REQUEST <a
href="#activate-power-limit-request">61</a></p>
<p>6.11.2 ACTIVATE POWER LIMIT RESPONSE <a
href="#activate-power-limit-response">62</a></p>
<p>6.11.3 DEACTIVATE POWER LIMIT REQUEST <a
href="#deactivate-power-limit-request">63</a></p>
<p>6.11.4 DEACTIVATE POWER LIMIT RESPONSE <a
href="#deactivate-power-limit-response">63</a></p>
<p>6.12 UE TEST LOOP MODE C MBMS PACKET COUNTER reporting messages <a
href="#ue-test-loop-mode-c-mbms-packet-counter-reporting-messages">63</a></p>
<p>6.12.1 UE TEST LOOP MODE C MBMS PACKET COUNTER REQUEST <a
href="#ue-test-loop-mode-c-mbms-packet-counter-request">63</a></p>
<p>6.12.2 UE TEST LOOP MODE C MBMS PACKET COUNTER RESPONSE <a
href="#ue-test-loop-mode-c-mbms-packet-counter-response">63</a></p>
<p>6.13 SET MUSIM UAI REQUEST <a
href="#set-musim-uai-request">64</a></p>
<p>6.13.1 SET MUSIM UAI REQUEST <a
href="#set-musim-uai-request-1">64</a></p>
<p>6.13.2 SET MUSIM UAI RESPONSE <a
href="#set-musim-uai-response">66</a></p>
<p>7 Variables, constants and timers <a
href="#variables-constants-and-timers">66</a></p>
<p>7.1 State variables <a href="#state-variables">66</a></p>
<p>7.2 Constants <a href="#constants">66</a></p>
<p>7.3 Timers <a href="#timers">66</a></p>
<p>7.4 Configurable parameters <a
href="#configurable-parameters">66</a></p>
<p>8 Electrical Man Machine Interface (EMMI) <a
href="#electrical-man-machine-interface-emmi">67</a></p>
<p>Annex A (normative): Pre-defined message containers used for testing
<a
href="#annex-a-normative-pre-defined-message-containers-used-for-testing">68</a></p>
<p>Annex B (informative): Change history <a
href="#annex-b-informative-change-history">72</a></p>
<h1 id="foreword"><br />
Foreword</h1>
<p>This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).</p>
<p>The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:</p>
<p>Version x.y.z</p>
<p>where:</p>
<p>x the first digit:</p>
<p>1 presented to TSG for information;</p>
<p>2 presented to TSG for approval;</p>
<p>3 or greater indicates TSG approved document under change
control.</p>
<p>y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.</p>
<p>z the third digit is incremented when editorial only changes have
been incorporated in the document.</p>
<h1 id="scope"><br />
1 Scope</h1>
<p>The present document defines for User Equipment (UE) those special
functions and their activation/deactivation methods that are required in
the UE for conformance testing purposes when the UE is connected to the
5G System (5GS) via its radio interface(s).</p>
<p>The document also describes the operation of these special functions
when the 5GS capable UEs are connected via a non-5GS system e.g. E-UTRA
FDD or TDD system.</p>
<p>Depending on the 5GS system's architecture some relevant for the UE
for conformance testing special functions may be defined in TS 36.509
[6].</p>
<h1 id="references">2 References</h1>
<p>The following documents contain provisions which, through reference
in this text, constitute provisions of the present document.</p>
<p> References are either specific (identified by date of publication,
edition number, version number, etc.) or non‑specific.</p>
<p>- For a specific reference, subsequent revisions do not apply.</p>
<p>- For a non-specific reference, the latest version applies. In the
case of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document <em>in the same Release as the present document</em> unless the
context in which the reference is made suggests a different Release is
relevant (information on the applicable release in a particular context
can be found in e.g. test case title, description or applicability,
message description or content).</p>
<p>[1] 3GPP TR 21.905: "Vocabulary for 3GPP Specifications".</p>
<p>[2] 3GPP TS 38.508-1: "5GS; User Equipment (UE) conformance
specification; Part 1: Common test environment ".</p>
<p>[3] 3GPP TS 38.523-1: "5GS; User Equipment (UE) conformance
specification; Part 1: Protocol ".</p>
<p>[4] 3GPP TS 38.523-3: "5GS; User Equipment (UE) conformance
specification; Part 3: Protocol Test Suites "</p>
<p>[5] 3GPP TS 38.522: "NR; User Equipment (UE) conformance
specification; Applicability of RF and RRM test cases".</p>
<p>[6] 3GPP TS 36.509: "Evolved Universal Terrestrial Radio Access
(E-UTRA) and Evolved Packet Core (EPC); Special conformance testing
functions for User Equipment (UE)".</p>
<p>[7] 3GPP TS 24.007: "Mobile radio interface signalling layer 3;
General Aspects".</p>
<p>[8] 3GPP TS 34.109: "Terminal logical test interface; Special
conformance testing functions".</p>
<p>[9] 3GPP TS 44.014: "Individual equipment type requirements and
interworking; Special conformance testing functions".</p>
<p>[10] 3GPP TS 36.331: "Evolved Universal Terrestrial Radio Access
(EUTRA) Radio Resource Control (RRC) Protocol Specification".</p>
<p>[11] 3GPP TS 38.331: "NR Radio Resource Control (RRC) protocol
specification".</p>
<p>[12] 3GPP TS 38.521-1: "NR; User Equipment (UE) conformance
specification; Radio transmission and reception; Part 1: Range 1
Standalone".</p>
<p>[13] 3GPP TS 38.521-2: "NR; User Equipment (UE) conformance
specification; Radio transmission and reception; Part 2: Range 2
Standalone".</p>
<p>[14] 3GPP TS 38.521-3: "NR; User Equipment (UE) conformance
specification; Radio transmission and reception; Part 3: Range 1 and
Range 2 Interworking operation with other radios".</p>
<p>[15] 3GPP TS 38.521-4: "NR; User Equipment conformance specification;
Radio transmission and reception; Part 4: Performance".</p>
<p>[16] 3GPP TS 38.533: NR; "User Equipment (UE) conformance
specification; Radio resource management".</p>
<p>[17] 3GPP TS 24.301: "Non-Access-Stratum (NAS) protocol for Evolved
Packet System (EPS); Stage 3".</p>
<p>[18] 3GPP TS 36.323: "Evolved Universal Terrestrial Radio Access
(E-UTRA); Packet Data Convergence Protocol (PDCP) specification".</p>
<p>[19] 3GPP TS 38.323: "NR; Packet Data Convergence Protocol (PDCP)
specification".</p>
<p>[20] 3GPP TS 38.306: "NR; User Equipment (UE) radio access
capabilities".</p>
<p>[21] 3GPP TS 24.501: "Non-Access-Stratum (NAS) protocol for 5G System
(5GS); Stage 3".</p>
<p>[22] 3GPP TS 38.215: "NR; Physical Layer Measurements".</p>
<p>[23] 3GPP TS 38.321: "NR; Medium Access Control (MAC) protocol
specification".</p>
<p>[24] 3GPP TS 37.355: "LTE Positioning Protocol (LPP)".</p>
<p>[25] 3GPP TS 38.211: "NR; Physical channels and modulation".</p>
<p>[26] 3GPP TS 24.587: " Vehicle-to-Everything (V2X) services in 5G
System (5GS), Stage 3".</p>
<h1 id="definitions-symbols-and-abbreviations">3 Definitions, symbols
and abbreviations</h1>
<h2 id="definitions">3.1 Definitions</h2>
<p>For the purposes of the present document, the terms and definitions
given in 3GPP TR 21.905 [1] and the following apply. A term defined in
the present document takes precedence over the definition of the same
term, if any, in 3GPP TR 21.905 [1].</p>
<p><strong>Frequency Range 2 (FR2):</strong> The frequency ranges in
which NR can operate being in the range of 24250 MHz - 52600 MHz.</p>
<p><strong>Logical Test Interface:</strong> interface which provides the
logical service to interwork and to communicate between UE and System
Simulator during the test of a UE</p>
<p><strong>SS (System Simulator):</strong> test system (or equipment)
that drives the test process with UE, like 5G System simulator</p>
<p><strong>TMC (Test Mode Control):</strong> UE protocol entity used by
the SS to control the UE specific testing functions</p>
<p>NOTE: In other Special conformance testing functions for User
Equipment (UE) 3GPP specifications e.g. 36.509 [6], the term Test
Control (TC) is used for describing the same UE entity. The different
names do not preclude the implementation of a single entity to handle
all the functionality in a UE supporting different 3GPP
technologies.</p>
<p><strong>UE (User Equipment):</strong> user equipment as defined in
[1] that is under test</p>
<h2 id="symbols">3.2 Symbols</h2>
<p>No specific symbols apply for the purposes of the present
document.</p>
<h2 id="abbreviations">3.3 Abbreviations</h2>
<p>For the purposes of the present document, the abbreviations given in
3GPP TR 21.905 [1] and the following apply. An abbreviation defined in
the present document takes precedence over the definition of the same
abbreviation, if any, in 3GPP TR 21.905 [1].</p>
<p>EMMI Electrical Man Machine Interface</p>
<p>FFS For further Study</p>
<p>FR2 Frequency Range 2</p>
<p>LB Loop Back</p>
<p>MTC Main Test Component</p>
<p>NSSAI Network Slice Selection Assistance Information</p>
<p>SS System Simulator</p>
<p>TMC Test Mode Control</p>
<h1 id="ue-special-conformance-test-functions-overview">4 UE special
conformance test functions overview</h1>
<h2 id="requirements-for-ue-support-of-test-functions">4.1 Requirements
for UE support of test functions</h2>
<p>The UE special conformance test functions are required for the
support of 5GS conformance testing. They form a part of the core
requirements and thus have a direct impact on the design of the UE. The
use of the word "mandatory" in the present specification shall be
understood as a particular requirement being mandatory for performing UE
conformance testing.</p>
<p>NOTE: While the importance of conformance testing should not be
underestimated, and hence is highly recommended, the implementation of
facilitation of it is left to the Device implementation.</p>
<h2 id="ue-special-conformance-test-functions-concept">4.2 UE special
conformance test functions concept</h2>
<p>The present specification defines the UE special conformance test
functions including any relevant procedure and the Test Mode Control
(TMC) message contents used for information exchange.</p>
<p>The conformance test methods applied in RF/RRM Conformance Test
Specification TS 38.521-1 [12], TS 38.521-2 [13], TS 38.521-3 [14], TS
38.521-4 [15] and TS 38.533 [16], and, the conformance test models used
in Protocol Conformance Test Specifications TS 38.523-1 [3] and TS
38.523-3 [4], as well as, common test environment definition and Generic
procedures specified in TS 38.508-1 [2] utilise the UE special
conformance test functions. Default TMC messages and information element
contents utilised in all before mentioned test specifications are
specified in TS 38.508-1 [2].</p>
<p>The UE special conformance test functions vary depending on the
conformance testing functionality they are designed to support. The
following broader groups of UE special conformance test functions can be
identified:</p>
<p>- <strong>Test Loop Functions</strong>: Functions which require a
loop to be established between the UE and the System Simulator (SS) to
allow e.g. DL data packets sent by the SS to be looped back UL by the
UE</p>
<p>- <strong>General Test Functions</strong>: Commands send by the SS
e.g. to trigger a certain UE behaviour which may be a behaviour
determined by 3GPP core spec requirements or such needed to facilitate
conformance testing and not being part of any 3GPP core spec
requirements, or, to provide to the UE information needed for the
conformance testing.</p>
<p>NOTE 1: An example for behaviour needed to facilitate conformance
testing and not representing behaviour determined by 3GPP core spec
requirements is counting and reporting the number of received data
packets thereby providing means to the SS to verify 3GPP core spec
requirements.</p>
<p>The utilisation of any UE special conformance test functions shall be
considered as putting the UE in a test mode. The duration of the test
mode depends on the UE special conformance test function and in most of
the cases will be delimited by an activation and a deactivation command.
However, in the case of general test functions used e.g. only to provide
information relevant for the conformance testing the test mode can be
considered as entered as soon as the information is received and exited
as soon as the information has been acted upon.</p>
<p>As a common rule the UE special conformance test functions provide
access to isolated functions of the UE via the radio interface without
introducing new physical interfaces just for the reason of conformance
testing. However, in certain cases the usage of AT Commands may be
required which will require an external interface e.g. EMMI.</p>
<p>NOTE 2: It should be emphasised that the UE test functions only
describe the functional behaviour of the UE with respect to its external
interfaces; physical implementation of the UE test function is
completely left open to the manufacturer.</p>
<p>Depending on the conformance testing functionality they are designed
to support, the UE special conformance test functions may comprise:</p>
<p>- A single DL message (e.g. a test function intended to provide to
the UE information needed for the conformance testing)</p>
<p>- A Request/Acknowledgement type of 2 messages exchange, an DL
message followed by a UL message, (e.g. a test function intended to
request the UE to execute an action which requires acknowledgment that
request was received and acted upon)</p>
<p>Furthermore, depending on the conformance test scenarios</p>
<p>- An UE special conformance test function can be used in
isolation.</p>
<p>NOTE 3: An example for this is the provision to the UE of location
information which can then be used by the UE throughout its "normal"
i.e. not test mode functions dependant behaviour.</p>
<p>- Two, or more, UE special conformance test functions may need to be
executed in a particular sequence before the target UE behaviour can be
assumed.</p>
<p>NOTE 4: An example for this are the Activate UE test mode and Close
UE test loop functions. The former needs to be executed first, at a
particular moment of time, in order a specific type of test bearer
terminated in a particular UE protocol layer to be established. Followed
by the latter, executed at different point of time, which will instruct
the UE to start looping back the received packets.</p>
<p>- Two, or more, UE special conformance test functions may be executed
simultaneously with no particular relation one to another allowing for
different test mode functionality to take place at the same time.</p>
<p>NOTE 5: An example for this are the UE Beamlock test function and the
test functions needed for test loop mode operation (see NOTE 4). The
former may need to be active throughout the entire tests with the latter
being active in parts of the test as appropriate. Both being active
independently.</p>
<p>For the specification of UE special conformance test functions the
present specification may refer to other specifications. In the case
when text on the same matter exists in the present specification and in
the referred specification, the text in the present specification takes
precedence.</p>
<h1 id="ue-special-conformance-test-functions-operation">5 UE special
conformance test functions operation</h1>
<h2 id="general">5.1 General</h2>
<p>For consistency with legacy terminology, the present specification
uses the terms 'Activate UE test mode' and 'Deactivate UE test mode' for
denoting the activation and the deactivation of 5GS test mode bearers
procedures respectively. Consequently, 'Activate UE test mode' should
not be understood as setting the UE in test mode in general rather, as
setting the UE in a mode (i.e. establishing a special type of test
bearers) which other special UE conformance testing functions require
for proper operation. As this has been mentioned elsewhere in the
present specification, not all special UE conformance testing functions
require such a setting.</p>
<p>Similarly, the present specification may use the term 'UE test loop
mode X operation", where X is a chose letter, for denoting operation
which does not represent true looping back of data being received
rather, it represents what can be called as a "pseudo loop" i.e.
providing back information about the received data e.g. the number of
the received packets.</p>
<h2
id="activation-and-deactivation-of-5gs-test-mode-bearers-ue-test-mode-procedures">5.2
Activation and deactivation of 5GS test mode bearers (UE test mode
procedures)</h2>
<h3 id="general-1">5.2.1 General</h3>
<p>The SS performs, where applicable, activation and deactivation of the
conformance test functions in the UE by sending Security Protected NAS
Layer 3 messages.</p>
<p>The UE test mode procedures are intended for setting the UE into a
test mode where the SS can set up test bearers terminated at a
particular point in the 5GS protocol stack as specified in the
functional block diagram of each UE test loop mode of operation. The
following test bearers are defined in the present specification:</p>
<p>- data radio bearers (UE test loop mode A),</p>
<p>- EPS bearers or 5GS QoS flows (UE test loop mode B).</p>
<p>- MBS radio bearers (UE test loop mode C).</p>
<p>- NR PC5 QoS flows (UE test loop mode E).</p>
<h3 id="activate-ue-test-mode">5.2.2 Activate UE test mode</h3>
<p>Same as TS 36.509 [6], subclause 5.3.2 with the following
exceptions:</p>
<p>- where E-UTRA is mentioned the same applies for NR;</p>
<p>- where V2X is mentioned the same applies for NR sidelink;</p>
<p>- MTCH data radio bearer is replaced by MBS radio bearer;</p>
<p>the NB-IoT mode is out of the scope of the present specification;</p>
<p>where different UE test loop modes are mentioned only those
applicable to 5GS should be taken into account (see subclause 5.3.4 for
the applicable 5GS UE test loop modes).</p>
<h3 id="deactivate-ue-test-mode">5.2.3 Deactivate UE test mode</h3>
<p>Same as TS 36.509 [6], subclause 5.3.3 with the following
exceptions</p>
<p>- where E-UTRA is mentioned the same applies for NR;</p>
<p>- where V2X is mentioned the same applies for NR sidelink;</p>
<p>- the NB-IoT mode is out of the scope of the present
specification;</p>
<p>- where different UE test loop modes are mentioned only those
applicable to 5GS should be taken into account (see subclause 5.3.4 for
the applicable 5GS UE test loop modes).</p>
<p>Apart from sending the appropriate deactivation command to the UE the
functions shall be deactivated by:</p>
<p>switching off the UE; or</p>
<p>by removing the USIM.</p>
<h2 id="test-loop-functions">5.3 Test loop functions</h2>
<h3 id="general-2">5.3.1 General</h3>
<p>Before a loop functionality can be exercised, the test loop needs to
be closed; this is to be understood as the UE being instructed to start
looping back received data packets. When looping back received data
packets is not any longer required the loop should be re-opened; opening
of a loop does not change the type of bearer being established by the UE
test mode activation function (subclause 5.2.2).</p>
<p>To limit the number of special test functions, the concept of closing
and opening a loop is also used as instruction to the UE to
initiate/terminate other actions. An example of this is counting the
received packets and reporting the number of received packets back to
the SS; in the context of this utilisation closing a loop is to be
understood as the UE being instructed to start counting the packets,
whereas opening a loop should be understood as stop counting the
packets. Other utilisation of the closing/opening a "test loop" test
functionality can be specified if appropriate.</p>
<p>The UE test loop functions for 5GS are intended for:</p>
<p>- NR receiver and transmitter testing to disable application data
transfer in downlink and uplink during SS UE measurements.</p>
<p>- NR layer 2 (MAC, RLC, PDCP, SDAP) and data radio bearer testing to
generate data transfer in downlink and uplink.</p>
<p>- NR layer 2 (MAC, RLC, PDCP, SDAP) and sidelink data radio bearer
testing to generate data transfer in sidelink.</p>
<p>- NR layer 2 (MAC, RLC, PDCP) and MBS radio bearer testing.</p>
<p>- 5GC and NR layer 3 testing to verify data transfer continuation
over RRC and 5GC procedures.</p>
<p>- 5GC and NR layer 3 testing to verify data transfer over PC5
interface.</p>
<p>- 5GC NAS user-plane testing to verify uplink QoS flow descriptions
handling.</p>
<p>- PC5-U testing to verify sidelink PC5 QoS flow descriptions
handling.</p>
<h3 id="close-ue-test-loop">5.3.2 Close UE test loop</h3>
<h4 id="general-3">5.3.2.0 General</h4>
<p>Same as TS 36.509 [6], subclause 5.4.2 with the following
exceptions:</p>
<p>- where E-UTRA is mentioned the same applies for NR;</p>
<p>- where V2X is mentioned the same applies for NR sidelink;</p>
<p>- the NB-IoT mode is out of the scope of the present
specification</p>
<p>- where different UE test loop modes are mentioned only those
applicable to 5GS should be taken into account (see subclause 5.3.4 for
the applicable 5GS UE test loop modes).</p>
<p>- where EPS bearers are mentioned the same applies for 5GS QoS
flows;</p>
<p>- where MTCH data radio bearer is replaced by MBS radio bearer;</p>
<p>- UE supported minimum buffer size for MR-DC and NR shall match the
required total layer 2 buffer size as specified in TS 38.306 [20],
clause 4.1.4.</p>
<p>- Subclause 5.4.2.3 in TS 36.509 [6] is replaced by 5.3.2.1 in
current specification; and</p>
<p>- Subclause 5.4.2.4in TS 36.509 [6] is replaced by 5.3.2.2 in current
specification.</p>
<h4 id="reception-of-close-ue-test-loop-message-by-the-ue">5.3.2.1
Reception of CLOSE UE TEST LOOP message by the UE</h4>
<p>Same as TS 36.509 [6], subclause 5.4.2.3 with the following
exceptions:</p>
<p>…</p>
<p>1&gt; else if UE test loop mode C has been selected;</p>
<p>2&gt; if no MBS radio bearer is established or if the UE test mode is
not active; or</p>
<p>2&gt; if UE test loop mode A or UE test loop mode B operation is
already closed on one or more data radio bearers; or</p>
<p>2&gt; if TEST_LOOP_MODE_C_ACTIVE = TRUE or TEST_LOOP_MODE_D_ACTIVE =
TRUE or TEST_LOOP_MODE_E_ACTIVE = TRUE or TEST_LOOP_MODE_F_ACTIVE = TRUE
or TEST_LOOP_MODE_G_ACTIVE = TRUE or TEST_LOOP_MODE_H_ACTIVE = TRUE or
TEST_LOOP_MODE_I_ACTIVE = TRUE:</p>
<p>3&gt; the UE behaviour is unspecified.</p>
<p>2&gt; otherwise:</p>
<p>3&gt; set TEST_LOOP_MODE_C_ACTIVE to TRUE</p>
<p>3&gt; set state variable MBMS_PACKET_COUNTER to zero;</p>
<p>3&gt; perform the UE actions for UE Test Loop Mode C operation as
specified in subclause 5.3.4.2A and</p>
<p>3&gt; send CLOSE UE TEST LOOP COMPLETE message (the loopback shall be
operational prior to the sending of the acknowledgement).</p>
<p>1&gt; else if UE test loop mode E has been selected;</p>
<p>2&gt; if UE test loop mode A or UE test loop mode B operation is
already closed on one or more data radio bearers; or</p>
<p>2&gt; if TEST_LOOP_MODE_C_ACTIVE = TRUE or TEST_LOOP_MODE_D_ACTIVE =
TRUE or TEST_LOOP_MODE_E_ACTIVE = TRUE or TEST_LOOP_MODE_F_ACTIVE = TRUE
or TEST_LOOP_MODE_G_ACTIVE = TRUE or TEST_LOOP_MODE_H_ACTIVE = TRUE or
TEST_LOOP_MODE_I_ACTIVE = TRUE; or</p>
<p>2&gt; if the UE is unable to read the pre-configured parameters for
NR sidelink Communication from the USIM; or</p>
<p>2&gt; when test loop mode E is utilised in NR sidelink
out-of-coverage scenarios:</p>
<p>3&gt; the UE behaviour is unspecified.</p>
<p>2&gt; otherwise:</p>
<p>3&gt; set TEST_LOOP_MODE_E_ACTIVE to TRUE</p>
<p>3&gt; if the E0 bit in Communication Transmit or Receive parameter in
UE test loop mode E setup IE is set as zero;</p>
<p>4&gt; set TEST_LOOP_MODE_E_TRIGGER to RECEIVE</p>
<p>4&gt; set state variable PROSE_COMMUNICATION_MONITOR_N to the number
of entities in the list of Group Destination IDs to individually monitor
included in the UE test loop mode E setup IE;</p>
<p>4&gt; if PROSE_COMMUNICATION_MONITOR_N is greater than
MAX_ModeE_Monitor_Entities:</p>
<p>5&gt; the UE behaviour is unspecified.</p>
<p>4&gt; for SL_ID = 0…(PROSE_COMMUNICATION_MONITOR_N-1):</p>
<p>5&gt; set state variable PROSE_COMMUNICATION_DEST_ID(SL_ID) to the
parameter Group Destination ID #(SL_ID) to monitor of the UE test loop
mode E setup IE;</p>
<p>5&gt; set state variable STCH_PACKET_COUNTER(SL_ID) to zero;</p>
<p>5&gt; set state variable PSCCH_PACKET_COUNTER(SL_ID) to zero;</p>
<p>5&gt; set state variable PSSCH_PACKET_COUNTER(SL_ID) to zero;</p>
<p>4&gt; set state variable
STCH_PACKET_COUNTER(PROSE_COMMUNICATION_MONITOR_N) to zero;</p>
<p>4&gt; set state variable
PSCCH_PACKET_COUNTER(PROSE_COMMUNICATION_MONITOR_N) to zero;</p>
<p>4&gt; set state variable
PSSCH_PACKET_COUNTER(PROSE_COMMUNICATION_MONITOR_N) to zero;</p>
<p>4&gt; perform the UE actions for UE Test Loop Mode E operation as
specified in subclause 5.3.4.3.1;</p>
<p>3&gt; if the E0 bit in Communication Transmit or Receive parameter in
UE test loop mode E setup IE is set as one;</p>
<p>4&gt; if the E1 bit in Communication Transmit or Receive parameter in
UE test loop mode E setup IE is set as zero;</p>
<p>5&gt; set TEST_LOOP_MODE_E_TRIGGER to TRANSMIT;</p>
<p>4&gt; else</p>
<p>5&gt; set TEST_LOOP_MODE_E_TRIGGER to TRANSMIT_SL_MIMO;</p>
<p>4&gt; perform the UE actions for UE Test Loop Mode E operation as
specified in subclause 5.3.4.3.1;</p>
<p>3&gt; send CLOSE UE TEST LOOP COMPLETE message (the loopback shall be
operational prior to the sending of the acknowledgement).</p>
<h4 id="reception-of-at-command-ccutle-by-the-ue">5.3.2.2 Reception of
AT Command +CCUTLE by the UE</h4>
<p>Upon receiving the AT Command
+CCUTLE=&lt;status=0&gt;[,&lt;direction&gt;[,&lt;format&gt;,&lt;length&gt;,&lt;monitor_list&gt;,&lt;sl_mimo&gt;]]
the UE shall:</p>
<p>1&gt; if UE test loop mode E has been selected;</p>
<p>2&gt; if TEST_LOOP_MODE_E_ACTIVE = TRUE; or</p>
<p>2&gt; if the UE is unable to read the pre-configured parameters for
NR sidelink Communication from the USIM:</p>
<p>3&gt; the UE behaviour is unspecified.</p>
<p>2&gt; otherwise:</p>
<p>3&gt; set TEST_LOOP_MODE_E_ACTIVE to TRUE</p>
<p>3&gt; if the &lt;direction&gt; parameter in +CCUTLE set command is
set as zero;</p>
<p>4&gt; set TEST_LOOP_MODE_E_TRIGGER to RECEIVE</p>
<p>4&gt; if the &lt;format&gt; parameter in +CCUTLE set command is set
as 1</p>
<blockquote>
<p>5&gt; set state variable PROSE_COMMUNICATION_MONITOR_N to the number
of entities in the list of Destination Layer-2 IDs to individually
monitor included in the &lt;monitor_list&gt; parameter of +CCUTLE set
command;</p>
<p>5&gt; if PROSE_COMMUNICATION_MONITOR_N is greater than
MAX_ModeE_Monitor_Entities:</p>
<p>6&gt; the UE behaviour is unspecified.</p>
<p>5&gt; for SL_ID = 0…(PROSE_COMMUNICATION_MONITOR_N-1):</p>
<p>6&gt; set state variable PROSE_COMMUNICATION_DEST_ID(SL_ID) to the
parameter Destination Layer-2 ID #(SL_ID) to monitor in the +CCUTLE set
command;</p>
<p>6&gt; set state variable STCH_PACKET_COUNTER(SL_ID) to zero;</p>
<p>6&gt; set state variable PSCCH_PACKET_COUNTER(SL_ID) to zero;</p>
<p>6&gt; set state variable PSSCH_PACKET_COUNTER(SL_ID) to zero;</p>
<p>5&gt; set state variable
STCH_PACKET_COUNTER(PROSE_COMMUNICATION_MONITOR_N) to zero;</p>
<p>5&gt; set state variable
PSCCH_PACKET_COUNTER(PROSE_COMMUNICATION_MONITOR_N) to zero;</p>
<p>5&gt; set state variable
PSSCH_PACKET_COUNTER(PROSE_COMMUNICATION_MONITOR_N) to zero;</p>
<p>5&gt; perform the UE actions for UE Test Loop Mode E operation as
specified in subclause 5.3.4.3.1;</p>
</blockquote>
<p>4&gt; else</p>
<blockquote>
<p>5&gt; the UE behaviour is unspecified.</p>
</blockquote>
<p>3&gt; if the &lt;direction&gt; parameter in +CCUTLE set command is
set as one;</p>
<p>4&gt; if the &lt;sl_mimo&gt; parameter in UE test loop mode E setup
IE is set as zero</p>
<p>5&gt; set TEST_LOOP_MODE_E_TRIGGER to TRANSMIT</p>
<p>4&gt; else</p>
<p>5&gt; set TEST_LOOP_MODE_E_TRIGGER to TRANSMIT_SL_MIMO;</p>
<p>4&gt; perform the UE actions for UE Test Loop Mode E operation as
specified in subclause 5.3.4.3.1;</p>
<p>1&gt; else;</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<h3 id="open-ue-test-loop">5.3.3 Open UE test loop</h3>
<p>Same as TS 36.509 [6], subclause 5.4.5 with the exceptions:</p>
<p>- where E-UTRA is mentioned the same applies for NR;</p>
<p>- where V2X is mentioned the same applies for NR sidelink;</p>
<p>- the NB-IoT mode is out of the scope of the present
specification;</p>
<p>- where different UE test loop modes are mentioned only those
applicable to 5GS should be taken into account (see subclause 5.3.4 for
the applicable 5GS UE test loop modes).</p>
<h3 id="ue-functionality-when-test-loop-is-closed">5.3.4 UE
functionality when test loop is closed</h3>
<h4 id="ue-test-loop-mode-a-operation">5.3.4.1 UE test loop mode A
operation</h4>
<p>UE test loop mode A provides loopback of PDCP SDUs for bi-directional
data radio bearers while UE is operating in NR. The downlink PDCP SDUs
received by the UE on each bi-directional data radio bearer are returned
on the same radio bearer regardless of the PDCP SDU contents and of the
QoS flow descriptions of the associated QoS Flow as specified in TS
24.501 [21].</p>
<p>Figures 5.3.4.1-1 and 5.3.4.1-2 show functional block diagrams of UE
test loop function for the TMC entity and UE test loop mode A for the
case when EN-DC or NGEN-DC with a MCG bearer and a SCG bearer is
configured and for the case EN-DC or NGEN-DC with a MCG and a split
bearer is configured.</p>
<p>Figures 5.3.4.1-3 shows functional block diagrams of UE test loop
function for the TMC entity and UE test loop mode A for the case when
standalone NR is configured Header compression / decompression block in
NR PDCP covers ROCH and EHC protocols as described in TS 38.323 [19]
clause 4.2.2.</p>
<p>Figures 5.3.4.1-4 and 5.3.4.1-5 show functional block diagrams of UE
test loop function for the TMC entity and UE test loop mode A for the
case when NE-DC with a MCG bearer and a SCG bearer is configured and for
the case NE-DC with a MCG and a split bearer is configured.</p>
<p>NOTE 1: The number and the order of RB LB Entities in the functional
block diagrams are provided for illustration only. No specific order or
numbering is precluded.</p>
<p><img src="media/image3.svg" /></p>
<p>Figure 5.3.4.1-1: Model for Test Mode Control and UE Test Loop Mode A
on UE side when EN-DC or NGEN-DC with MCG bearer and SCG bearer is
configured</p>
<p><img src="media/image4.svg" /></p>
<p>Figure 5.3.4.1-2: Model for Test Mode Control and UE Test Loop Mode A
on UE side when EN-DC or NGEN-DC with MCG and split bearer
configured</p>
<p><img src="media/image5.svg" /></p>
<p>Figure 5.3.4.1-3: Model for Test Mode Control and UE Test Loop Mode A
on UE side when standalone NR is configured</p>
<p><img src="media/image6.svg" /></p>
<p>Figure 5.3.4.1-4: Model for Test Mode Control and UE Test Loop Mode A
on UE side when NE-DC with MCG and SCG bearers configured</p>
<p><img src="media/image7.svg" /></p>
<p>Figure 5.3.4.1-5: Model for Test Mode Control and UE Test Loop Mode A
on UE side when NE-DC with MCG and split bearers configured</p>
<p>UE test loop mode A is mandatory to all 5GS UEs.</p>
<p>Prior to closing the UE test loop mode A, thereby requesting the UE
to start looping back the received data packets, at least one 5GS test
mode bi-directional data radio bearer shall have been established
between SS and UE. This implies that before the procedure for
establishing the bi-directional data radio bearer takes place the SS
needs to activate the UE test mode as specified in subclause 5.2.2.</p>
<p>The 5GS UE test loop mode A operation is the same as the one
described in TS 36.509 [6], subclause 5.4.3 with the exception where
E-UTRA is mentioned the same applies for NR, and, the understanding that
the NB-IoT mode is out of the scope of the present specification.</p>
<h4 id="ue-test-loop-mode-b-operation">5.3.4.2 UE test loop mode B
operation</h4>
<h5 id="general-4">5.3.4.2.1 General</h5>
<p>UE test loop mode B is mandatory to all 5GS UEs supporting one or
more PDU session establishments.</p>
<h5 id="ue-test-loop-mode-b-operation-for-en-dc-and-ngen-dc">5.3.4.2.2
UE test loop mode B operation for EN-DC and NGEN-DC</h5>
<p>UE test loop mode B provides loopback of PDCP SDUs for bi-directional
EPS bearers while UE is operated in NR or E-UTRA modes. When operating
in NR or E-UTRA, the downlink PDCP SDUs or SNDCP PDUs received by the UE
on all bi-directional data radio bearers are returned by the UE on the
data radio bearer associated with an QoS Flow with a QoS flow
descriptions matching the TCP/UDP/IP protocol information within the
PDCP SDU or SNDCP SDU as specified in TS 24.501 [21].</p>
<p>NOTE 1: When multiple PDN connections are established (or multiple
Primary PDP Contexts are active), it is assumed that different IP
addresses are allocated to the UE by the SS on each PDN.</p>
<p>Figures 5.3.4.2.2-1 and 5.3.4.2.2-2 show functional block diagrams of
UE test loop function for the TMC entity and UE test loop mode B for the
case when EN-DC or NGEN-DC with a MCG bearer and a SCG bearer is
configured and for the case EN-DC or NGEN-DC with a MCG and a split
bearer is configured.</p>
<p>NOTE 2: The number and the order of RB LB Entities in the UE Test
Loop Function in the functional block diagrams are provided for
illustration only. No specific order or numbering is precluded.</p>
<p><img src="media/image8.svg" /></p>
<p>Figure 5.3.4.2.2-1: Model for Test Mode Control and UE Test Loop Mode
B on UE side when EN-DC or NGEN-DC with MCG bearer and SCG bearer is
configured</p>
<p><img src="media/image9.svg" /></p>
<p>Figure 5.3.4.2.2-2: Model for Test Mode Control and UE Test Loop Mode
B on UE side when EN-DC or NGEN-DC with MCG and split bearer
configured</p>
<h5 id="ue-test-loop-mode-b-operation-for-standalone-nr">5.3.4.2.3 UE
test loop mode B operation for Standalone NR</h5>
<p>UE test loop mode B provides loopback of SDAP SDUs for bi-directional
QoS Flows while UE is operated in standalone NR mode. Prior to closing
the UE test loop mode B, thereby requesting the UE to start looping back
the received data packets, at least one 5GS test mode bi-directional QoS
Flow shall have been established between SS and UE. This implies that
before the procedure for establishing the bi-directional QoS Flows takes
place the SS needs to activate the UE test mode as specified in
subclause 5.2.2</p>
<p>The downlink SDAP SDUs or IP PDU's received by the UE on all
bi-directional QoS Flows are returned by the UE without any modification
of the IP header to the UL QoS flow descriptions handling SAP for
transmission in uplink.</p>
<p>NOTE 1: When multiple PDU sessions are established, it is assumed
that different IP addresses are allocated to the UE by the SS on each
PDU session.</p>
<p>Figure 5.3.4.2.3-1 shows functional block diagrams of UE test loop
function for the TMC entity and UE test loop mode B for the case when
standalone NR is configured.</p>
<p>NOTE 2: The number and the order of QoS Flow LB Entities in the UE
Test Loop Function in the functional block diagrams are provided for
illustration only. No specific order or numbering is precluded.</p>
<p>The 5GS UE test loop mode B operation is the same as the one
described in TS 36.509 [6], subclause 5.4.4 with the exception where
E-UTRA is mentioned the same applies for NR, and, where PDCP SDU is
mentioned the same applies for SDAP SDU.</p>
<p><img src="media/image10.svg" /></p>
<p>Figure 5.3.4.2.3-1: Model for Test Mode Control and UE Test Loop Mode
B on UE side when standalone NR is configured</p>
<h5 id="ue-test-loop-mode-b-operation-for-ne-dc">5.3.4.2.4 UE test loop
mode B operation for NE-DC</h5>
<p>UE test loop mode B provides loopback of SDAP SDUs for bi-directional
QoS Flows while UE is operated in NR or E-UTRA modes. Prior to closing
the UE test loop mode B, thereby requesting the UE to start looping back
the received data packets, at least one 5GS test mode bi-directional QoS
Flow shall have been established between SS and UE. This implies that
before the procedure for establishing the bi-directional QoS Flows takes
place the SS needs to activate the UE test mode as specified in
subclause 5.2.2</p>
<p>The downlink SDAP SDUs or IP PDU's received by the UE on all
bi-directional QoS Flows are returned by the UE without any modification
of the IP header to the UL QoS flow descriptions handling SAP for
transmission in uplink.</p>
<p>NOTE 1: When multiple PDU sessions are established, it is assumed
that different IP addresses are allocated to the UE by the SS on each
PDU session.</p>
<p>Figure 5.3.4.2.4-1 and 5.3.4.2.4-2 show functional block diagrams of
UE test loop function for the TMC entity and UE test loop mode B for the
case when NE-DC with a MCG and a SCG bearer is configured and for the
case NE-DC with a MCG and a split bearer is configured.</p>
<p>NOTE 2: The number and the order of QoS Flow LB Entities in the UE
Test Loop Function in the functional block diagrams are provided for
illustration only. No specific order or numbering is precluded.</p>
<p><img src="media/image11.svg" /></p>
<p>Figure 5.3.4.2.4-1: Model for Test Mode Control and UE Test Loop Mode
B on UE side when NE-DC with MCG bearer and SCG bearers configured</p>
<p><img src="media/image12.svg" /></p>
<p>Figure 5.3.4.2.4-2: Model for Test Mode Control and UE Test Loop Mode
B on UE side when NE-DC with MCG bearer and split bearers configured</p>
<h4 id="a-ue-test-loop-mode-c-operation">5.3.4.2A UE test loop mode C
operation</h4>
<h5 id="a.1-general">5.3.4.2A.1 General</h5>
<p>UE test loop mode C is mandatory for NR UEs supporting MBS.</p>
<p>UE test loop mode C provides counting of successfully received MBS
Packets on one MRB (Multicast MRB or Broadcast MRB) while UE is
operating in NR/5GC.</p>
<p>- For Multicast MRB configuration:</p>
<p>- Multicast MRB with DL only RLC-UM or bidirectional RLC-UM
configuration for PTP transmission;</p>
<p>- Multicast MRB with RLC-AM entity configuration for PTP
transmission;</p>
<p>- Multicast MRB with DL only RLC-UM entity for PTM transmission;</p>
<p>- Multicast MRB with two RLC-UM entities, one DL only RLC-UM entity
for PTP transmission and the other DL only RLC-UM entity for PTM
transmission;</p>
<p>- Multicast MRB with three RLC-UM entities, one DL RLC-UM entity and
one UL RLC-UM entity for PTP transmission and the other DL only RLC-UM
entity for PTM transmission;</p>
<p>- Multicast MRB with two RLC entities, one RLC-AM entity for PTP
transmission and the other DL only RLC-UM entity for PTM
transmission.</p>
<p>- For Broadcast MRB configuration:</p>
<p>- Broadcast MRB with one DL only RLC-UM entity for PTM
transmission.</p>
<p>Figure 5.3.4.2A.1-1 shows a functional block diagram of UE test loop
function for TC entity and UE test loop mode C for Multicast MRB. The
MBMS Packet Counter function is configured to count successfully
received MBS packets on one Multicast MRB configured by the SS when UE
test loop mode C is activated.</p>
<p>Figure 5.3.4.2A.1-2 shows a functional block diagram of UE test loop
function for TC entity and UE test loop mode C for Broadcast MRB. The
MBMS Packet Counter function is configured to count successfully
received MBS packets on one Broadcast MRB configured by the SS when UE
test loop mode C is activated.</p>
<p><img src="media/image13.svg" /></p>
<p>Figure 5.3.4.2A.1-1: Model for UE test loop mode C on UE side for
Multicast MRB</p>
<p><img src="media/image14.svg" /></p>
<p>Figure 5.3.4.2A.1-2: Model for UE test loop mode C on UE side for
Broadcast MRB</p>
<h5 id="a.2-reception-of-mbs-packets">5.3.4.2A.2 Reception of MBS
packets</h5>
<p>For Broadcast MRB, upon receiving a MBS packet on the Broadcast MRB
with Identity of the logical channel of broadcast MTCH configured in
CLOSE UE TEST LOOP when operating in RRC_IDLE or RRC_CONNECTED or
RRC_INACTIVE mode with UE test loop mode C active the UE shall:</p>
<p>1&gt; if UE test loop mode C is active;</p>
<p>2&gt; increment MBMS_PACKET_COUNTER by 1:</p>
<p>1&gt; else:</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<p>For Multicast MRB, upon receiving a MBS packet on the Multicast MRB
with MRB Identity configured in CLOSE UE TEST LOOP when operating in
RRC_CONNECTED mode with UE test loop mode C active the UE shall:</p>
<p>1&gt; if UE test loop mode C is active;</p>
<p>2&gt; increment MBMS_PACKET_COUNTER by 1:</p>
<p>1&gt; else:</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<h5 id="a.3-release-of-rrc-connection">5.3.4.2A.3 Release of RRC
connection</h5>
<p>When the RRC connection is released then the UE shall:</p>
<p>1&gt; if UE test loop mode C is active for Broadcast MRB:</p>
<p>2&gt; keep UE test loop mode C active.</p>
<p>1&gt; else</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<h4 id="ue-test-loop-mode-e-operation">5.3.4.3 UE test loop mode E
operation</h4>
<h5 id="general-5">5.3.4.3.0 General</h5>
<p>UE test loop mode E is mandatory to all 5GS UEs supporting NR
sidelink.</p>
<p>UE test loop mode E provides means for either transmit or receive of
SDAP SDUs for PC5 QoS Flows while UE is operating in NR sidelink, as
specified by the test loop mode E setup IE in the CLOSE UE TEST LOOP
message.</p>
<p>For communication receive operation, UE test loop mode E provides
counting of successfully received STCH PDCP SDUs, PSCCH PHY transport
blocks and PSSCH PHY transport blocks while the UE is operating in NR
sidelink communication mode.</p>
<p>For communication transmit operation, UE test loop mode E provides
trigger for transmission of NR sidelink communication packets. For the
V2X out-of-coverage scenarios this trigger utilises AT commands and
requires an appropriate physical interface.</p>
<p>Figure 5.3.4.3.0-1 shows functional block diagrams of UE test loop
function for the TMC entity and UE test loop mode E for the
intra-frequency or inter-frequency concurrent operation case when
Communication receive is indicated in UE test loop mode E setup IE.</p>
<p>Figure 5.3.4.3.0-2 shows functional block diagrams of UE test loop
function for the TMC entity and UE test loop mode E for the PC5-only
operation case when Communication receive is indicated in UE test loop
mode E setup IE.</p>
<p>Figure 5.3.4.3.0-3 shows functional block diagrams of UE test loop
function for the TMC entity and UE test loop mode E for the
intra-frequency or inter-frequency concurrent operation case when
Communication transmit is indicated in UE test loop mode E setup IE.</p>
<p>Figure 5.3.4.3.0-4 shows functional block diagrams of UE test loop
function for the TMC entity and UE test loop mode E for the PC5-only
operation case when Communication transmit is indicated in UE test loop
mode E setup IE.</p>
<p><img src="media/image15.png" /></p>
<p>Figure 5.3.4.3.0-1: Model for Test Mode Control and UE Test Loop Mode
E on UE side when UE is in intra-frequency or inter-frequency concurrent
operation (Communication receive is indicated in UE test loop mode E
setup IE)</p>
<p><img src="media/image16.png" /></p>
<p>Figure 5.3.4.3.0-2: Model for Test Mode Control and UE Test Loop Mode
E on UE side when UE is in PC5-only operation (Communication receive is
indicated in UE test loop mode E setup IE)</p>
<p><img src="media/image17.png" /></p>
<p>Figure 5.3.4.3.0-3: Model for Test Mode Control and UE Test Loop Mode
E on UE side when UE is in intra-frequency or inter-frequency concurrent
operation (Communication transmit is indicated in UE test loop mode E
setup IE)</p>
<p><img src="media/image18.png" /></p>
<p>Figure 5.3.4.3.0-4: Model for Test Mode Control and UE Test Loop Mode
E on UE side when UE is in PC5-only operation (when Communication
transmit is indicated in UE test loop mode E setup IE)</p>
<p>The 5GS UE test loop mode E operation is the same as the one
described in TS 36.509 [6], subclause 5.4.4c with the exceptions:</p>
<p>- where V2X is mentioned the same applies for NR sidelink.</p>
<p>- Subclause 5.4.4c.1 in TS 36.509 [6] is replaced by 5.3.4.3.1 in
current specification.</p>
<h5 id="receive-or-transmit-nr-sidelink-communication">5.3.4.3.1 Receive
or Transmit NR sidelink Communication</h5>
<p>When operating in NR idle or connected or any cell selection state or
out-of-coverage state for NR sidelink test scenarios, with UE test loop
mode E active, the UE shall be able to either receive or transmit NR
sidelink communication packets based on the TEST_LOOP_MODE_E_TRIGGER
being set as either RECEIVE or TRANSMIT, respectively. The UE shall:</p>
<p>1&gt; if TEST_LOOP_MODE_E_ACTIVE is set to TRUE:</p>
<blockquote>
<p>2&gt; if TEST_LOOP_MODE_E_TRIGGER is set to RECEIVE;</p>
</blockquote>
<p>3&gt; upon successful reception of a SDAP SDU for NR sidelink
communication data packet:</p>
<blockquote>
<p>4&gt; set MATCH to zero;</p>
</blockquote>
<p>4&gt; if PROSE_COMMUNICATION_MONITOR_N &gt; 0</p>
<p>5&gt; for SL_ID = 0…(PROSE_COMMUNICATION_MONITOR_N-1):</p>
<p>6&gt; if Destination Layer-2 ID corresponding to the SDAP SDU equals
PROSE_COMMUNICATION_DEST_ID(SL_ID):</p>
<blockquote>
<p>7&gt; increment STCH_PACKET_COUNTER(SL_ID) by 1;</p>
<p>7&gt; set MATCH to one.</p>
</blockquote>
<p>4&gt; if MATCH equal zero:</p>
<p>5&gt; increment STCH_PACKET_COUNTER(PROSE_COMMUNICATION_MONITOR_N) by
1.</p>
<p>3&gt; upon successful reception of a PSCCH PHY transport block for NR
sidelink communication control packet:</p>
<p>4&gt; increment PSCCH_PACKET_COUNTER(PROSE_COMMUNICATION_MONITOR_N)
by 1.</p>
<p>3&gt; upon successful reception of a PSSCH PHY transport block for NR
sidelink communication data packet:</p>
<p>4&gt; set MATCH to zero;</p>
<p>4&gt; for SL_ID = 0…(PROSE_COMMUNICATION_MONITOR_N-1):</p>
<p>5&gt; if, in the received PSSCH PHY transport block, Destination
Layer-2 ID for NR sidelink communication equals
PROSE_COMMUNICATION_DEST_ID(SL_ID):</p>
<blockquote>
<p>6&gt; increment PSSCH_PACKET_COUNTER(SL_ID) by 1;</p>
<p>6&gt; set MATCH to one.</p>
</blockquote>
<p>4&gt; if MATCH equal zero:</p>
<p>5&gt; increment PSSCH_PACKET_COUNTER (PROSE_COMMUNICATION_MONITOR_N)
by 1.</p>
<p>2&gt; else if TEST_LOOP_MODE_E_TRIGGER is set to TRANSMIT;</p>
<p>3&gt; consider that a request from upper layers to transmit the
packet for V2X service over PC5 has been received.</p>
<p>4&gt; use '00 00 00 01'H as the V2X service identifier provided by
upper layer as specified in TS 24.587 [26] subclause 8.4.3.</p>
<p>4&gt; use '00 00 01 00'H as the application layer ID provided by
upper layer as specified in TS 24.587 [26] subclause 8.4.4, if
needed.</p>
<p>4&gt; create the SDAP SDU with payload size and contents as specified
below, see Figure 5.3.4.3.1-1 and Table 5.3.4.3.1-1, consider the SDAP
SDU as the packet corresponding to the V2X service identifier above, and
provide it as the input of PQF handling depiced in Figure 5.3.4.3.0-3 or
Figure 5.3.4.3.0-4 for transmission in every PSSCH duration according to
subclause 5.22.1.1 of TS 38.321 [23] for NR sidelink communication.</p>
<p>2&gt; else if TEST_LOOP_MODE_E_TRIGGER is set to
TRANSMIT_SL_MIMO;</p>
<p>3&gt; consider that a request from upper layers to transmit the
packet for V2X service over PC5 has been received.</p>
<p>4&gt; use '00 00 00 01'H as the V2X service identifier provided by
upper layer as specified in TS 24.587 [26] subclause 8.4.3.</p>
<p>4&gt; use '00 00 01 00'H as the application layer ID provided by
upper layer as specified in TS 24.587 [26] subclause 8.4.4, if
needed.</p>
<p>4&gt; create the SDAP SDU with payload size and contents as specified
below, see Figure 5.3.4.3.1-1 and Table 5.3.4.3.1-1, consider the SDAP
SDU as the packet corresponding to the V2X service identifier above, and
provide it as the input of PQF handling depiced in Figure 5.3.4.3.0-3 or
Figure 5.3.4.3.0-4 for transmission in every PSSCH duration according to
subclause 5.22.1.1 of TS 38.321 [23] for NR sidelink communication.</p>
<p>4&gt; transmit PSSCH in SL-MIMO mode with 2-layer precoding matrix
specified in TS 38.211 [25] subclause 8.3.1.4.</p>
<p>NOTE: The same SDAP SDU (1 packet) is transmitted (if permitted by
test specific Layer 1 and Layer 2 configuration) by the UE in every
PSSCH duration for NR sidelink communication during the entire duration
test loop mode E is closed.</p>
<p>2&gt; else:</p>
<p>3&gt; the UE behaviour is unspecified.</p>
<p>1&gt; else:</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<p>The SDAP SDU payload for NR sidelink communication packet when UE
test loop mode E is active shall be as specified in Figure 5.3.4.3.1-1
and Table 5.3.4.3.1-1. The UE shall also transmit the corresponding SCI
control information on PSCCH accordingly in the same slot on which the
SDAP SDU is transmitted for NR sidelink Communication.</p>
<p><img src="media/image19.png" /></p>
<p>Figure 5.3.4.3.1-1: NR sidelink communication Transmit operation in
UE test loop mode E</p>
<p>Table 5.3.4.3.1-1: SDAP SDU payload contents for NR sidelink
communication transmit operation in UE test loop mode E</p>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Size (N)</td>
<td>300 bytes</td>
</tr>
<tr>
<td>Payload</td>
<td>00…00</td>
</tr>
</tbody>
</table>
<h2 id="ue-beamlock-test-function-ubf">5.4 UE Beamlock test Function
(UBF)</h2>
<h3 id="general-6">5.4.1 General</h3>
<p>The UE Beamlock test function is intended for making the UE to lock
the UE antenna pattern once it has formed a beam towards the base
station (SS) direction following the cell identification procedure in
preparation for subsequent test procedures. Activating the UBF shall
lock the antenna pattern of all active intra-band component carriers and
all MIMO layers affected by the test function.</p>
<p>The Beamlock test function is mandatory for applicable UEs operating
in Frequency Range 2 (FR2).</p>
<p>The SS uses the UE Beamlock test mode activation procedure to command
the UE to lock the UE antenna pattern. The Beamlock activation procedure
can apply to UE transmitter and UE receiver beams either simultaneously
or independently.</p>
<p><img src="media/image20.png" /></p>
<p>Figure 5.4.1-1: UE Beamlock test mode activation procedure</p>
<p>The SS uses the UE Beamlock test mode deactivation procedure to
command the UE to re-tracking the beam towards the base station
direction. The Beamlock deactivation procedure can apply to UE
transmitter and UE receiver beams either simultaneously or
independently.</p>
<p><img src="media/image21.png" /></p>
<p>Figure 5.4.1-2: UE Beamlock test mode deactivation procedure</p>
<h3 id="activate-beamlock-procedure">5.4.2 Activate Beamlock
procedure</h3>
<h4 id="initiation">5.4.2.1 Initiation</h4>
<p>The SS requests the UE to activate beamlock by transmitting an
ACTIVATE BEAMLOCK message.</p>
<h4 id="reception-of-activate-beamlock-message-by-ue">5.4.2.2 Reception
of ACTIVATE BEAMLOCK message by UE</h4>
<p>When UE receives ACTIVATE BEAMLOCK message then the UE shall:</p>
<p>1&gt; if the UE is operating in FR2 AND is in RRC_CONNECTED
state:</p>
<p>2&gt; if UE Beamlock test Function = 01</p>
<p>3&gt; Lock the UE antenna pattern with Tx only</p>
<p>2&gt; else if UE Beamlock test Function = 10</p>
<p>3&gt; Lock the UE antenna pattern with Rx only</p>
<p>2&gt; else if UE Beamlock test Function = 11</p>
<p>3&gt; Lock the UE antenna pattern with both TxRx</p>
<p>2&gt; Transmit ACTIVATE BEAMLOCK COMPLETE message</p>
<p>1&gt; else:</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<h3 id="deactivate-beamlock-procedure">5.4.3 Deactivate Beamlock
procedure</h3>
<h4 id="initiation-1">5.4.3.1 Initiation</h4>
<p>The SS requests the UE to deactivate beamlock by transmitting a
DEACTIVATE BEAMLOCK message. The SS should do this when the UE is in
RRC_CONNECTED state.</p>
<h4 id="reception-of-deactivate-beamlock-message-by-ue">5.4.3.2
Reception of DEACTIVATE BEAMLOCK message by UE</h4>
<p>When UE receives DEACTIVATE BEAMLOCK message then the UE shall:</p>
<p>1&gt; if the UE is operating in FR2 AND is in RRC_CONNECTED state AND
the UE Beamlock test function is active:</p>
<p>2&gt; unlock the UE antenna pattern and transmit DEACTIVATE BEAMLOCK
COMPLETE message;</p>
<p>1&gt; else:</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<h4 id="release-of-antenna-beamlock-by-ue">5.4.3.3 Release of antenna
beamlock by UE</h4>
<p>When the UE leaves the RRC_CONNECTED state, the UE shall:</p>
<p>1&gt; if the UE is operating in FR2 AND the UE Beamlock test Function
is active</p>
<p>2&gt; unlock the UE antenna pattern;</p>
<h2 id="ue-ss-rsrpb-per-receiver-branch-reporting">5.5 UE SS-RSRPB per
receiver branch reporting</h2>
<h3 id="general-7">5.5.1 General</h3>
<p>In 38.215 [22], section 5.1.18 defines SS-RSRPB as below, with its
applicability only to FR2 and in RRC_CONNECTED Mode.</p>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 79%" />
</colgroup>
<tbody>
<tr>
<td><strong>Definition</strong></td>
<td><p>SS reference signal received power per branch (SS-RSRPB) is
defined as the linear average over the power contributions (in [W]) of
the resource elements that carry secondary synchronization signals (SS).
The measurement time resource(s) for SS-RSRPB are confined within
SS/PBCH Block Measurement Time Configuration (SMTC) window duration.</p>
<p>For SS-RSRPB determination demodulation reference signals for
physical broadcast channel (PBCH) and, if indicated by higher layers,
CSI reference signals in addition to secondary synchronization signals
may be used. SS-RSRPB using demodulation reference signal for PBCH or
CSI reference signal shall be measured by linear averaging over the
power contributions of the resource elements that carry corresponding
reference signals taking into account power scaling for the reference
signals as defined in 3GPP TS 38.213 [5].</p>
<p>SS-RSRPB shall be measured only among the reference signals
corresponding to SS/PBCH blocks with the same SS/PBCH block index and
the same physical-layer cell identity.</p>
<p>If higher-layers indicate certain SS/PBCH blocks for performing
SS-RSRPB measurements, then SS-RSRPB is measured only from the indicated
set of SS/PBCH block(s).</p>
<p>For frequency range 1, SS-RSRPB is not defined. For frequency range
2, SS-RSRPB shall be measured for each receiver branch based on the
combined signal from antenna elements corresponding to the receiver
branch.</p></td>
</tr>
<tr>
<td><strong>Applicable for</strong></td>
<td>RRC_CONNECTED intra-frequency</td>
</tr>
</tbody>
</table>
<p>The SS uses the SS-RSRPB reporting procedure to command the UE to
report SS-RSRP per UE receiver branch. The report from the UE shall be a
vector of values, where the number of the reported values equals the
number of receiver branches on the UE.</p>
<p><img src="media/image22.svg" /></p>
<p>Figure 5.5.1-1: UE SS-RSRPB reporting procedure</p>
<h3 id="initiation-2">5.5.2 Initiation</h3>
<p>The SS requests the UE to start reporting SS-RSRP per receiver branch
by transmitting a SS-RSRPB REPORT REQUEST message. And the UE responds
back reporting SS-RSRP per receiver branch via SS-RSRPB REPORT
RESPONSE.</p>
<h3 id="reception-of-ss-rsrpb-report-request-message-by-ue">5.5.3
Reception of SS-RSRPB REPORT REQUEST message by UE</h3>
<p>When the UE receives SS-RSRPB REPORT REQUEST message then the UE
shall:</p>
<p>1&gt; if the UE is operating in FR2 AND in RRC_CONNECTED state:</p>
<p>2&gt; if quantityConfigRS-Index is configured to UE by RRC
Signalling</p>
<p>3&gt; use the L3 filter coefficient given by
quantityConfigRS-Index.</p>
<p>2&gt; else</p>
<p>3&gt; use default L3 filter coefficient of fc4.</p>
<p>2&gt; if the MeasObjectId signalled by the IE SS-RSRPB Measurement
Config and ReportConfigNR with reportType set to periodical which is
asscociated to this MeasObjectNR are configured to the UE by RRC
Signalling</p>
<p>3&gt; Reply with the SS-RSRPB REPORT RESPONSE using the Measurement
configuration as in the Measurement Object identified in the SS-RSRPB
Measurement Config and reportInterval, reportAmount as in the associated
ReportConfigNR</p>
<p>3&gt; Report the SS-RSRPB measurement for the best SSB-ID of the
serving PCI configured in the MeasObject</p>
<p>3&gt; FFS to have multiple cells and/or SSB-ID</p>
<p>2&gt; else if the MeasObjectId signalled by the IE SS-RSRPB
Measurement Config is configured to the UE by RRC signalling but no
ReportConfigNR with reportType set to periodical is asscociated to this
MeasObjectNR:</p>
<p>3&gt; Reply with the SS-RSRPB REPORT RESPONSE using the Measurement
configuration as in the Measurement Object identified in the SS-RSRPB
Measurement Config and default reportInterval of 640ms, and default
reportAmount of r16</p>
<p>3&gt; Report the SS-RSRPB measurement for the serving PCI and best
SSB-ID configured in the MeasObject</p>
<p>3&gt; FFS to have multiple cells and/or SSB-ID</p>
<p>2&gt; else the UE behaviour is unspecified.</p>
<p>1&gt; else:</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<p>The SS-RSRPB Report Request &amp; SS-RSRPB Report Response Message
Octets are defined below in Section 6.5.</p>
<h2 id="ue-positioning-test-mode-procedures">5.6 UE Positioning test
mode procedures</h2>
<h3 id="reset-ue-positioning-stored-information">5.6.1 Reset UE
Positioning Stored Information</h3>
<h4 id="general-8">5.6.1.1 General</h4>
<p>Same as TS 36.509 [6], subclause 5.5.1.1.</p>
<h4 id="initiation-3">5.6.1.2 Initiation</h4>
<p>Same as TS 36.509 [6], subclause 5.5.1.2.</p>
<h4
id="reception-of-reset-ue-positioning-stored-information-message-by-ue">5.6.1.3
Reception of RESET UE POSITIONING STORED INFORMATION message by UE</h4>
<p>When UE receives RESET UE POSITIONING STORED INFORMATION message then
the UE shall:</p>
<p>1&gt; if the IE "UE Positioning Technology" has the value
‘AGNSS’:</p>
<p>2&gt; discard any stored GNSS reference time, reference position, and
any other aiding data obtained or derived during the previous test
instance (e.g. expected ranges and Doppler);</p>
<p>2&gt; temporarily disable any sensor data (if applicable) that can
aid the positioning for the duration of the subsequent positioning
procedure.</p>
<p>1&gt; if the IE "UE Positioning Technology" has the value
‘OTDOA’:</p>
<p>2&gt; discard any stored OTDOA reference and neighbour cell info
assistance data;</p>
<p>2&gt; use the reference cell in the provided OTDOA assistance data as
reference cell for reporting RSTD measurements in the subsequent
positioning procedure.</p>
<p>NOTE 1: Where OTDOA is mentioned this applies to OTDOA using LTE
cells.</p>
<p>1&gt; if the IE "UE Positioning Technology" has the value ‘MBS’:</p>
<p>2&gt; discard any stored MBS assistance data and information obtained
or derived during the previous test instance (e.g. Beacon PN code and
slot information and code phase measurements);</p>
<p>2&gt; temporarily disable any sensor data (if applicable) that can
aid the positioning for the duration of the subsequent positioning
procedure.</p>
<p>1&gt; if the IE "UE Positioning Technology" has the value ‘WLAN’:</p>
<p>2&gt; discard any stored WLAN assistance data and information
obtained or derived during the previous test instance;</p>
<p>1&gt; if the IE "UE Positioning Technology" has the value
‘Bluetooth’:</p>
<p>2&gt; discard any stored Bluetooth data obtained or derived during
the previous test instance;</p>
<p>1&gt; if the IE "UE Positioning Technology" has the value
‘Sensor’:</p>
<p>2&gt; discard any stored Sensor assistance data and information
obtained or derived during the previous test instance;</p>
<p>1&gt; if the IE "UE Positioning Technology" has the value
‘DL-TDOA’:</p>
<p>2&gt; discard any stored DL-PRS assistance data and information
obtained or derived during the previous test instance;</p>
<p>1&gt; if the IE "UE Positioning Technology" has the value
‘DL-AoD’:</p>
<p>2&gt; discard any stored DL-PRS assistance data and information
obtained or derived during the previous test instance;</p>
<p>1&gt; if the IE "UE Positioning Technology" has the value
‘Multi-RTT’:</p>
<p>2&gt; discard any stored UL-SRS configuration and DL-PRS assistance
data obtained or derived during the previous test instance;</p>
<p>1&gt; otherwise:</p>
<p>2&gt; ignore the message.</p>
<h3 id="update-ue-location-information">5.6.2 Update UE Location
Information</h3>
<p><img src="media/image23.svg" /></p>
<p>Figure 5.6.2-1: Update UE Location Information procedure</p>
<h4 id="general-9">5.6.2.1 General</h4>
<p>Same as TS 36.509 [6], subclause 5.5.2.1.</p>
<h4 id="initiation-4">5.6.2.2 Initiation</h4>
<p>Same as TS 36.509 [6], subclause 5.5.2.2.</p>
<h4
id="reception-of-update-ue-location-information-message-by-ue">5.6.2.3
Reception of UPDATE UE LOCATION INFORMATION message by UE</h4>
<p>Same as TS 36.509 [6], subclause 5.5.2.3.</p>
<h3 id="utc-time-reset">5.6.3 UTC time reset</h3>
<p>FFS</p>
<h2 id="nssai-delete-test-function">5.7 NSSAI delete test function</h2>
<h3 id="general-10">5.7.1 General</h3>
<p>The SS use the NSSAI delete test procedure to delete different type
of NSSAI information in the UE, see Figure 5.7.1-1. The different types
of NSSAI information that can be deleted in a NSSAI DELETE REQUEST
message are Default configured NSSAI, Configured NSSAI or Allowed NSSAI
information, see clause 6.7. The NSSAI delete test procedure is limited
to delete one type of NSSAI information. To delete more than one type of
NSSAI information the SS needs to repeat the procedure for each type of
NSSAI information.</p>
<p><img src="media/image24.svg" /></p>
<p>Figure 5.7.1-1: NSSAI delete test procedure</p>
<p>5.7.2 Initiation</p>
<p>The SS requests the UE to delete NSSAI information by transmitting a
NSSAI DELETE REQUEST message and the UE confirms the deletion of the
requested NSSAI information by responding with a NSSAI DELETE RESPONSE
message.</p>
<p>5.7.3 Reception of NSSAI DELETE REQUEST message by UE</p>
<p>When UE receives NSSAI DELETE REQUEST message then the UE shall:</p>
<p>1&gt; if the UE is operating in RRC_CONNECTED state:</p>
<p>2&gt; if Delete NSSAI type = 00:</p>
<p>3&gt; Delete the default configured NSSAI stored at the UE if
any.</p>
<p>2&gt; else if Delete NSSAI type = 01:</p>
<p>3&gt; if Octets 3,4 and 5 all set to "00000000":</p>
<p>4&gt; Delete configured NSSAI for all PLMNs stored at the UE if
any.</p>
<p>3&gt; else if at least one of octets 3,4 or 5 &lt;&gt;
"00000000":</p>
<p>4&gt; Delete configured NSSAI for the PLMN indicated by octet 3,4 and
5 stored at the UE if any.</p>
<p>2&gt; else if Delete NSSAI type = 10:</p>
<p>3&gt; if Octets 3,4 and 5 all set to "00000000":</p>
<p>4&gt; if Access type =00:</p>
<p>5&gt; Delete allowed NSSAI associated with 3GPP access for all PLMNs
stored at the UE if any.</p>
<p>4&gt; else if Access type =01:</p>
<p>5&gt; Delete allowed NSSAI associated with non-3GPP access for all
PLMNs stored at the UE if any.</p>
<p>4&gt; else if Access type =10:</p>
<p>5&gt; Delete allowed NSSAI associated with both 3GPP and non-3GPP
access for all PLMNs stored at the UE if any.</p>
<p>4&gt; else</p>
<p>5&gt; The UE behaviour is unspecified.</p>
<p>3&gt; else if At least one of octets 3,4 or 5 &lt;&gt;
"00000000":</p>
<p>4&gt; if Access type =00:</p>
<p>5&gt; Delete allowed NSSAI associated with 3GPP access for the PLMN
indicated by octet 3,4 and 5 stored at the UE if any.</p>
<p>4&gt; else if Access type =01:</p>
<p>5&gt; Delete allowed NSSAI associated with non-3GPP access for the
PLMN indicated by octet 3,4 and 5 stored at the UE if any.</p>
<p>4&gt; else if Access type =10:</p>
<p>5&gt; Delete allowed NSSAI associated with both 3GPP and non-3GPP
access for the PLMN indicated by octet 3,4 and 5 stored at the UE if
any.</p>
<p>4&gt; else</p>
<p>5&gt; The UE behaviour is unspecified.</p>
<p>2&gt; else</p>
<p>3&gt; The UE behaviour is unspecified.</p>
<p>2&gt; Transmit NSSAI DELETE RESPONSE message.</p>
<p>1&gt; else:</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<h2 id="set-uai-test-function">5.8 Set UAI test function</h2>
<h3 id="general-11">5.8.1 General</h3>
<p>The SS uses the Set UAI test procedure to trigger a change of
preference in the UE that will cause the indication of UE Assistance
Information (UAI) by the UE, see figure 5.8.1-1. The different types of
information that can be sent in a SET UAI REQUEST is preferred RRC
state, see clause 6.8.</p>
<p><img src="media/image25.png" /></p>
<p>Figure 5.8.1-1: Set UAI test procedure</p>
<h3 id="initiation-5">5.8.2 Initiation</h3>
<p>The SS requests the UE to set the preferred RRC state of UE
Assistance Information by transmitting a SET UAI REQUEST message and the
UE confirms by responding with a SET UAI RESPONSE message.</p>
<p>5.8.3 Reception of SET UAI REQUEST message by UE</p>
<p>When UE receives SET UAI REQUEST message then the UE shall:</p>
<ol type="1">
<li><p>if the UE is operating in RRC_CONNECTED state:</p></li>
</ol>
<p>2&gt; set its preferred RRC state within the release preference, to
the equivalent value as received in the Preferred RRC State of the SET
UAI REQUEST message.</p>
<p>2&gt; transmit SET UAI RESPONSE message.</p>
<p>1&gt; else:</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<h2 id="nr-sidelink-packet-counter-reporting-procedure">5.9 NR Sidelink
Packet Counter reporting procedure</h2>
<h3 id="request-nr-sidelink-packet-counter-value">5.9.1 Request NR
Sidelink Packet Counter value</h3>
<p><img src="media/image26.png" /></p>
<p>Figure 5.9.1-1: NR Sidelink Packet Counter reporting procedure based
on TC protocol messages</p>
<p><img src="media/image27.png" /></p>
<p>Figure 5.9.1-2: NR Sidelink Packet Counter reporting procedure based
on AT Commands</p>
<h4 id="general-12">5.9.1.1 General</h4>
<p>The SS uses the NR Sidelink Packet Counter reporting procedure to
request reporting of current NR sidelink related state variables. For
mode E the state variables STCH_PACKET_COUNTER, PSCCH_PACKET_COUNTER and
PSSCH_PACKET_COUNTER of NR sidelink are reported.</p>
<h4 id="initiation-6">5.9.1.2 Initiation</h4>
<p>The SS requests the UE to report its current value of
STCH_PACKET_COUNTER, PSCCH_PACKET_COUNTER and PSSCH_PACKET_COUNTER of NR
sidelink for test loop mode E by transmitting an UE TEST LOOP NR
SIDELINK PACKET COUNTER REQUEST message or by transmitting an AT Command
+CUSPCREQ.</p>
<h4
id="reception-of-ue-test-loop-nr-sidelink-counter-request-by-the-ue">5.9.1.3
Reception of UE TEST LOOP NR SIDELINK COUNTER REQUEST by the UE</h4>
<p>Upon receiving the UE TEST LOOP NR SIDELINK PACKET COUNTER REQUEST
message the UE shall:</p>
<p>1&gt; if TEST_LOOP_MODE_E_ACTIVE is TRUE:</p>
<p>2&gt; set the IE NR Sidelink PSCCH Packet Counter(s) Value in the UE
TEST LOOP PROSE COUNTER RESPONSE message to the value of the state
variable(s) PSCCH_PACKET_COUNTER(SL_ID) with SL_ID =
0…PROSE_COMMUNICATION_MONITOR_N;</p>
<p>2&gt; set the IE NR Sidelink STCH Packet Counter(s) Value in the UE
TEST LOOP PROSE COUNTER RESPONSE message to the value of the state
variable STCH_PACKET_COUNTER(SL_ID) with SL_ID =
0…PROSE_COMMUNICATION_MONITOR_N;</p>
<p>2&gt; set the IE NR Sidelink PSSCH Packet Counter(s) Value in the UE
TEST LOOP PROSE COUNTER RESPONSE message to the value of the state
variable(s) PSSCH_PACKET_COUNTER(SL_ID) with SL_ID =
0…PROSE_COMMUNICATION_MONITOR_N;</p>
<p>2&gt; send the UE TEST LOOP NR SIDELINK COUNTER RESPONSE message.</p>
<ol type="1">
<li><p>else:</p></li>
</ol>
<p>2&gt; the UE behaviour is unspecified.</p>
<h4 id="reception-of-at-command-cuspcreq-by-the-ue">5.9.1.4 Reception of
AT Command +CUSPCREQ by the UE</h4>
<p>Upon receiving the AT Command +CUSPCREQ the UE shall:</p>
<p>1&gt; if TEST_LOOP_MODE_E_ACTIVE is TRUE:</p>
<p>2&gt; in the response message of command +CUSPCREQ, set the parameter
&lt;type1&gt; to 2; set the parameter &lt;format&gt; to 1; set the
parameter &lt;length1&gt; to 4*(PROSE_COMMUNICATION_MONITOR_N+1); set
the parameter &lt;counter1&gt; to the value of the state variable(s)
PSCCH_PACKET_COUNTER(SL_ID) with SL_ID =
0…PROSE_COMMUNICATION_MONITOR_N;</p>
<p>2&gt; in the response message of command +CUSPCREQ, set the parameter
&lt;type2&gt; to 2; set the parameter &lt;format&gt; to 1; set the
parameter &lt;length2&gt; to 4*(PROSE_COMMUNICATION_MONITOR_N+1); set
the parameter &lt;counter2&gt; to the value of the state variable
STCH_PACKET_COUNTER(SL_ID) with SL_ID =
0…PROSE_COMMUNICATION_MONITOR_N;</p>
<p>2&gt; in the response message of command +CUSPCREQ, set the parameter
&lt;type3&gt; to 2; set the parameter &lt;format&gt; to 1; set the
parameter &lt;length3&gt; to 4*PROSE_COMMUNICATION_MONITOR_N+1; set the
parameter &lt;counter3&gt; to the value of the state variable(s)
PSSCH_PACKET_COUNTER(SL_ID) with SL_ID =
0…PROSE_COMMUNICATION_MONITOR_N;</p>
<p>2&gt; send the response message +CUSPCREQ:
[&lt;type1&gt;,&lt;format&gt;,&lt;length1&gt;,&lt;counter1&gt;],
[&lt;type2&gt;,&lt;format&gt;,&lt;length2&gt;,&lt;counter2&gt;],
[&lt;type3&gt;,&lt;format&gt;,&lt;length3&gt;,&lt;counter3&gt;].</p>
<p>1&gt; else:</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<h2 id="set-ul-message-test-function">5.10 Set UL Message test
function</h2>
<h3 id="general-13">5.10.1 General</h3>
<p>Same as TS 36.509 [6], subclause 5.10.1.</p>
<p>5.10.2 Initiation</p>
<p>Same as TS 36.509 [6], subclause 5.10.2.</p>
<p>5.10.3 Reception of SET UL MESSAGE REQUEST message by UE</p>
<p>Same as TS 36.509 [6], subclause 5.10.3 with the following
exception:</p>
<p>- the predefined UE capability container is defined in Annex A.1</p>
<h2 id="ue-power-limit-function-uplf">5.11 UE Power Limit Function
(UPLF)</h2>
<h3 id="general-14">5.11.1 General</h3>
<p>The UE Power Limit Function is intended for the SS to communicate to
the UE to apply a backoff of transmitted power on the NR primary
component carrier when in FR2 carrier aggregation mode. On activation of
this test function, the UE shall apply a configured power backoff on the
primary component carrier to provide sufficient power head room for the
other (secondary) component carrier(s). The UE power limit function is
mandatory for applicable UEs operating in Frequency Range 2 (FR2) and
supporting UL CA from Rel-16.</p>
<p>The SS uses the UE Power Limit test mode activation procedure to send
a power limit request to the UE. The transmission from the SS shall be a
vector of values, where the number of the reported values equals the
back-off or power limit to be applied by the UE.</p>
<p><img src="media/image28.png" /></p>
<p>Figure 5.11.1-1: Activate Power Limit test mode procedure</p>
<p><img src="media/image29.png" /></p>
<p>Figure 5.11.1-2: Deactivate Power Limit test mode procedure</p>
<h3 id="activate-power-limit-procedure">5.11.2 Activate Power Limit
Procedure</h3>
<h4 id="initiation-7">5.11.2.1 Initiation</h4>
<p>The SS requests the UE to apply the power limit by transmitting an
ACTIVATE POWER LIMIT REQUEST message. The UE confirms that the power
limit function is activated by sending an ACTIVATE POWER LIMIT
RESPONSE.</p>
<h4 id="reception-of-activate-power-limit-request-by-ue">5.11.2.2
Reception of ACTIVATE POWER LIMIT REQUEST by UE</h4>
<p>When the UE receives the ACTIVATE POWER LIMIT REQUEST message, then
the UE shall:</p>
<p>1&gt; if the UE is operating in FR2 AND is in RRC_CONNECTED
state:</p>
<p>2&gt; UE limits power on PCell according to a back-off defined by
X<sub>max,<em>PCell.</em></sub></p>
<p>1&gt; else;</p>
<p>2&gt; the UE behaviour is unspecified</p>
<p>The ACTIVATE POWER LIMIT REQUEST and ACTIVATE POWER LIMIT RESPONSE
Message Octets Octets and power back-off X<sub>max,<em>PCell</em></sub>
are defined below in Section 6.11.</p>
<h3 id="deactivate-power-limit-procedure">5.11.3 Deactivate Power Limit
Procedure</h3>
<h4 id="initiation-8">5.11.3.1 Initiation</h4>
<p>The SS requests the UE to deactivate from the power limit state by
transmitting a DEACTIVATE POWER LIMIT REQUEST message. The SS should do
this when the UE is in RRC_CONNECTED state.</p>
<h4
id="reception-of-deactivate-power-limit-request-message-by-ue">5.11.3.2
Reception of DEACTIVATE POWER LIMIT REQUEST message by UE</h4>
<p>When UE receives DEACTIVATE POWER LIMIT REQUEST message then the UE
shall:</p>
<p>1&gt; if the UE is operating in FR2 AND is in RRC_CONNECTED state AND
the UE Power Limit test function is active:</p>
<p>2&gt; Remove UE power limit on PCell and transmit DEACTIVATE POWER
LIMIT RESPONSE message.</p>
<p>1&gt; else:</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<h4 id="removal-of-power-limits-by-ue">5.11.3.3 Removal of power limits
by UE</h4>
<p>When the UE leaves the RRC_CONNECTED state, the UE shall:</p>
<p>1&gt; if the UE is operating in FR2 AND the UE Power limit test
Function is active</p>
<p>2&gt; remove UE power limit on PCell;</p>
<h2 id="mbms-packet-counter-reporting-procedure">5.12 MBMS Packet
Counter reporting procedure</h2>
<h3 id="request-mbms-packet-counter-value">5.12.1 Request MBMS Packet
Counter value</h3>
<p>Same as TS 36.509 [6], subclause 5.6 with the following
exception:</p>
<p>- MBMS Packet is replaced by MBS Packet</p>
<h2 id="set-musim-uai-test-function">5.13 Set MUSIM UAI test
function</h2>
<h3 id="general-15">5.13.1 General</h3>
<p>The SS uses the Set MUSIM UAI test procedure to trigger a change of
preference in the MUSIM UE that will cause the indication of UE
Assistance Information (UAI) by the UE, see figure 5.8.1-1. The
different types of information that can be sent in a SET MUSIM UAI
REQUEST is preferred RRC state and gap preference for MUSIM, see clause
6.13.</p>
<p><img src="media/image30.png" /></p>
<p>Figure 5.13.1-1: Set MUSIM UAI test procedure</p>
<h3 id="initiation-9">5.13.2 Initiation</h3>
<p>The SS requests the UE to set the MUSIM related UE Assistance
Information by transmitting a SET MUSIM UAI REQUEST message and the UE
confirms by responding with a SET MUSIM UAI RESPONSE message.</p>
<p>5.13.3 Reception of SET MUSIM UAI REQUEST message by UE</p>
<p>When UE receives SET MUSIM UAI REQUEST message then the UE shall:</p>
<p>1&gt; if the MUSIM UE is operating in RRC_CONNECTED state:</p>
<p>2&gt; set its preferred RRC state within the release preference, to
the equivalent value as received in the
<em>musim-PreferredRRC-State-r17</em> of the SET MUSIM UAI REQUEST
message.</p>
<p>2&gt; transmit SET MUSIM UAI RESPONSE message.</p>
<p>1&gt; if the UE has a preference for MUSIM periodic gap(s):</p>
<p>2&gt; set its preferred gap preference, to the equivalent value as
received in the <em>musim-GapPreferenceList</em> of the SET MUSIM UAI
REQUEST message.</p>
<p>2&gt; transmit SET MUSIM UAI RESPONSE message.</p>
<p>else:</p>
<p>2&gt; the UE behaviour is unspecified.</p>
<h1 id="test-mode-control-message-definitions">6 Test Mode Control
message definitions</h1>
<h2 id="general-16">6.1 General</h2>
<p>Clause 6 describes only TMC protocol messages.</p>
<p>When UE under test is operated in EN-DC or NGEN-DC the TMC messages
are sent using the E-UTRA RRC <em>DLInformationTransfer</em> and
<em>ULInformationTransfer</em> procedures, see TS 36.331 [10],
subclauses 5.6.1 and 5.6.2.</p>
<p>When UE under test is operated in NR or NE-DC the TMC messages are
sent using the NR RRC <em>DLInformationTransfer</em> and
<em>ULInformationTransfer</em> procedures, see TS 38.331 [11],
subclauses 5.7.1 and 5.7.2.</p>
<p>NOTE 1: A message received with skip indicator different from 0 will
be ignored.</p>
<p>NOTE 2: For general definition of Layer 3 message format see TS
24.007 [7], clause 11.</p>
<p>NOTE 3: 5GS use the same protocol discriminator value ("1111") as
E-UTRA, UTRA and GSM/GPRS as specified in TS 24.007 [7], subclause
11.2.3.1.1. 5GS test control messages the message type value series
101xxxxx is reserved, where x represents 0 or 1. The message type values
0000xxxx to 1001xxxx are reserved to E-UTRA, UTRA and GSM/GPRS as
specified in TS 36.509 [6], TS 34.109 [8] and TS 44.014 [9]. For 5GS
test control messages that are common with E-UTRA control messages in TS
36.509 [6] the 5GS test control messages use the same message type
values as used for the E-UTRA test control messages in TS 36.509
[6].</p>
<p>All the TMC messages are integrity protected and ciphered according
to TS 24.301 [17] subclause 4.4 or TS 24.501 [21] subclause 4.4
depending on whether the TMC message is sent via EPS or 5GC.</p>
<h2 id="test-mode-messages">6.2 Test mode messages</h2>
<h3 id="activate-test-mode">6.2.1 ACTIVATE TEST MODE</h3>
<p>Same as TS 36.509 [6], subclause 6.5.</p>
<h3 id="activate-test-mode-complete">6.2.2 ACTIVATE TEST MODE
COMPLETE</h3>
<p>Same as TS 36.509 [6], subclause 6.6.</p>
<h3 id="deactivate-test-mode">6.2.3 DEACTIVATE TEST MODE</h3>
<p>Same as TS 36.509 [6], subclause 6.7.</p>
<h3 id="deactivate-test-mode-complete">6.2.4 DEACTIVATE TEST MODE
COMPLETE</h3>
<p>Same as TS 36.509 [6], subclause 6.8.</p>
<h2 id="test-loop-messages">6.3 Test loop messages</h2>
<h3 id="close-ue-test-loop-1">6.3.1 CLOSE UE TEST LOOP</h3>
<p>Same as TS 36.509 [6], subclause 6.1 with the following
exception:</p>
<p>- The supported test modes for 5GS are limited to those specified in
subclause 5.3.4.</p>
<p>- LB Setup DRB#k IE is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>Z15</td>
<td>Z14</td>
<td>Z13</td>
<td>Z12</td>
<td>Z11</td>
<td>Z10</td>
<td>Z9</td>
<td>Z8</td>
<td>octet 1</td>
</tr>
<tr>
<td>Z7</td>
<td>Z6</td>
<td>Z5</td>
<td>Z4</td>
<td>Z3</td>
<td>Z2</td>
<td>Z1</td>
<td>Z0</td>
<td>octet 2</td>
</tr>
<tr>
<td colspan="2">Reserved</td>
<td>Q5</td>
<td>Q4</td>
<td>Q3</td>
<td>Q2</td>
<td>Q1</td>
<td>Q0</td>
<td>octet 3</td>
</tr>
</tbody>
</table>
<p>Z15..Z0 = Uplink PDCP SDU size in bits 0.. 12160 (binary coded, Z15
is most significant bit and Z0 least significant bit). See Note 1.<br />
Q5 = 0 for E-UTRA Data Radio Bearers and Q5 = 1 for NR Data Radio
Bearers</p>
<p>Q4..Q0 = 0..31 representing DRB-Identity -1, where DRB-Identity
identifies the data radio bearer in accordance to TS 36.331 [10] for
E-UTRA Data Radio Bearers and TS 38.331 [11] for NR Data Radio Bearers
[11] (binary coded, Q4 is most significant bit and Q0 least significant
bit).</p>
<p>NOTE 1: The UL PDCP SDU size is limited to 12160 bits (1520
octets).</p>
<p>NOTE 2: A "LB Setup DRB IE" is only needed for a DRB if UL PDCP SDU
scaling is needed. If there is no "LB Setup DRB IE" associated with a
DRB in the CLOSE UE TEST LOOP message, then the same size of the PDCP
SDU received in downlink is returned in uplink.</p>
<p>NOTE 3: The UL PDCP SDU size shall be byte aligned (i.e. multiple of
8 bits) according to TS 36.323 [18] clause 6.2.1 for E-UTRA Data Radio
Bearers and TS 38.323 [19] clause 6.2.1 for NR Data Radio Bearers.</p>
<p>- The Communication Transmit or Receive message in UE test loop mode
E setup is as below:</p>
<p>And where UE test loop mode C setup is:</p>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 71%" />
<col style="width: 18%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td>8 7 6 5 4 3 2 1</td>
<td></td>
</tr>
<tr>
<td></td>
<td>MRB ID</td>
<td><p>octet 1</p>
<p>octet 2</p>
<p>octet 3</p></td>
</tr>
</tbody>
</table>
<p>Where MRB ID is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td colspan="7">Reserved</td>
<td>C0</td>
<td>octet 1</td>
</tr>
<tr>
<td>A8</td>
<td>A7</td>
<td>A6</td>
<td>A5</td>
<td>A4</td>
<td>A3</td>
<td>A2</td>
<td>A1</td>
<td>octet 2</td>
</tr>
<tr>
<td>A0</td>
<td colspan="7">Reserved</td>
<td>octet 3</td>
</tr>
</tbody>
</table>
<p>A8..A0 = 0..511 representing MRB-Identity -1, where MRB-Identity
identifies the Multicast MRB in accordance to TS 38.331 [11] (binary
coded, A8 is most significant bit and A0 least significant bit).</p>
<p>A4..A0= 0..31 representing Identity of the logical channel of
broadcast MTCH -1, where Identity of the logical channel of broadcast
MTCH identifies the Broadcast MRB in accordance to TS 38.321 [23]
(binary coded, A4 is most significant bit and A0 least significant
bit).</p>
<p>C0=0 is used to trigger the UE to count the MBS packet on Multicast
MRB of the MRB-Identity configured in A8..A0; C0=1 is used to trigger
the UE to count the MBS packet on Broadcast MRB of the Identity of the
logical channel of broadcast MTCH configured in A4..A0.</p>
<p>And where UE test loop mode E setup is:</p>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 71%" />
<col style="width: 18%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td>8 7 6 5 4 3 2 1</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Length of UE test loop mode E Monitor setup contents in bytes</td>
<td>Octet 1</td>
</tr>
<tr>
<td></td>
<td>Communication Transmit or Receive</td>
<td>Octet 2</td>
</tr>
<tr>
<td></td>
<td>Monitor list</td>
<td><p>Octet 3</p>
<p>Octet N+2</p>
<p>or</p>
<p>Octet 3*N+2</p></td>
</tr>
</tbody>
</table>
<p>where Communication Transmit or Receive is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td colspan="6">Reserved</td>
<td>E1</td>
<td>E0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>E0 = 0 is used to trigger the UE to continuously monitor and receive
NR sidelink communication message (on STCH, PSCCH and PSSCH), and E0 = 1
is used to trigger the UE to start continuous transmitting NR sidelink
communication messages (on STCH).</p>
<p>If E0 = 1, E1 = 1 is used to indicate UE shall transmit with 2-layer
SL-MIMO transmission with precoding matrix defined in TS 38.211 [25]
subclause 8.3.1.4, and E1 = 0 is used to indicate UE shall transmit with
single antenna port; otherwise E1 is used as reserved bit.</p>
<h3 id="close-ue-test-loop-complete">6.3.2 CLOSE UE TEST LOOP
COMPLETE</h3>
<p>Same as TS 36.509 [6], subclause 6.2.</p>
<h3 id="open-ue-test-loop-1">6.3.3 OPEN UE TEST LOOP</h3>
<p>Same as TS 36.509 [6], subclause 6.3.</p>
<h3 id="open-ue-test-loop-complete">6.3.4 OPEN UE TEST LOOP
COMPLETE</h3>
<p>Same as TS 36.509 [6], subclause 6.4.</p>
<h3 id="void">6.3.5 Void</h3>
<h3 id="void-1">6.3.6 Void</h3>
<h2 id="beamlock-messages">6.4 Beamlock messages</h2>
<h3 id="activate-beamlock">6.4.1 ACTIVATE BEAMLOCK</h3>
<p>This message is only sent in the direction SS to UE.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information Element</td>
<td>Reference</td>
<td>Presence</td>
<td>Format</td>
<td>Length</td>
</tr>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
<tr>
<td>UE Beamlock test Function</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>where UE Beamlock test Function is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X1</td>
<td>X2</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>where X1,X2 = 01 for activate beamlock of Tx only, 10 for activate
beamlock of Rx only and 11 for activate beamlock of both TxRx.</p>
<p>NOTE: X1,X2 = 00 is not used</p>
<h3 id="activate-beamlock-complete">6.4.2 ACTIVATE BEAMLOCK
COMPLETE</h3>
<p>This message is only sent in the direction UE to SS.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information Element</td>
<td>Reference</td>
<td>Presence</td>
<td>Format</td>
<td>Length</td>
</tr>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<h3 id="deactivate-beamlock">6.4.3 DEACTIVATE BEAMLOCK</h3>
<p>This message is only sent in the direction SS to UE.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information Element</td>
<td>Reference</td>
<td>Presence</td>
<td>Format</td>
<td>Length</td>
</tr>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<h3 id="deactivate-beamlock-complete">6.4.4 DEACTIVATE BEAMLOCK
COMPLETE</h3>
<p>This message is only sent in the direction UE to SS.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information Element</td>
<td>Reference</td>
<td>Presence</td>
<td>Format</td>
<td>Length</td>
</tr>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<h2 id="ue-ss-rsrp-per-receiver-branch-reporting-messages">6.5 UE
SS-RSRP per receiver branch reporting messages</h2>
<h3 id="ss-rsrpb-report-request">6.5.1 SS-RSRPB REPORT REQUEST</h3>
<p>This message is only sent in the direction SS to UE.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information Element</td>
<td>Reference</td>
<td>Presence</td>
<td>Format</td>
<td>Length</td>
</tr>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], subclause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
<tr>
<td>SS-RSRPB Measurement Config</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>where SS-RSRPB Measurement Config is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>X8</td>
<td>X7</td>
<td>X6</td>
<td>X5</td>
<td>X4</td>
<td>X3</td>
<td>X2</td>
<td>X1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>This maps to the MeasObjectId as configured by the RRC Reconfig
Message.</p>
<h3 id="ss-rsrpb-report-response">6.5.2 SS-RSRPB REPORT RESPONSE</h3>
<p>This message is only sent in the direction UE to SS representing the
measured SS-RSRPB. The reporting range of SS-RSRPB (0 to 126) maps to
the RSRP values in dBm as per Table 10.1.6.1-1 in TS 38.133. To report
SS-RSRPB (0 to 126) per measured SSB, UE shall send 3 Octets, the First
Octet reporting the Measured SSB ID (values 0 to 63 representing 6 bits
X1 to X6 of Octet 1), Second Octet reporting SS-RSRPB for Branch#0 and
third Octet reporting SS-RSRPB for Branch#1.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information Element</td>
<td>Reference</td>
<td>Presence</td>
<td>Format</td>
<td>Length</td>
</tr>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], subclause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
<tr>
<td>SS-RSRPB report response param</td>
<td></td>
<td>M</td>
<td>V</td>
<td>3</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>where SS-RSRPB report response param is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td colspan="2">Reserved</td>
<td>X6</td>
<td>X5</td>
<td>X4</td>
<td>X3</td>
<td>X2</td>
<td>X1</td>
<td>octet 1</td>
</tr>
<tr>
<td>16</td>
<td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>bit no.</td>
</tr>
<tr>
<td>X16</td>
<td>X15</td>
<td>X14</td>
<td>X13</td>
<td>X12</td>
<td>X11</td>
<td>X10</td>
<td>X9</td>
<td>octet 2</td>
</tr>
<tr>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>bit no.</td>
</tr>
<tr>
<td>X24</td>
<td>X23</td>
<td>X22</td>
<td>X21</td>
<td>X20</td>
<td>X19</td>
<td>X18</td>
<td>X17</td>
<td>octet 3</td>
</tr>
</tbody>
</table>
<p>where X1 to X24 spanning over three octets shall have the following
definition:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 20%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr>
<th>Definition</th>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>SSB ID</td>
<td colspan="2">Reserved</td>
<td>X6</td>
<td>X5</td>
<td>X4</td>
<td>X3</td>
<td>X2</td>
<td>X1</td>
<td>octet 1</td>
</tr>
<tr>
<td>RSRPB Branch #0</td>
<td>0</td>
<td>X15</td>
<td>X14</td>
<td>X13</td>
<td>X12</td>
<td>X11</td>
<td>X10</td>
<td>X9</td>
<td>octet 2</td>
</tr>
<tr>
<td>RSRPB Branch #1</td>
<td>0</td>
<td>X23</td>
<td>X22</td>
<td>X21</td>
<td>X20</td>
<td>X19</td>
<td>X18</td>
<td>X17</td>
<td>octet 3</td>
</tr>
</tbody>
</table>
<h2 id="ue-positioning-messages">6.6 UE Positioning messages</h2>
<h3 id="reset-ue-positioning-stored-information-1">6.6.1 RESET UE
POSITIONING STORED INFORMATION</h3>
<p>This message is only sent in the direction SS to UE.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Information Element</th>
<th>Reference</th>
<th>Presence</th>
<th>Format</th>
<th>Length</th>
</tr>
</thead>
<tbody>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [7], subclause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [7], subclause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
<tr>
<td>UE Positioning Technology</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>where UE Positioning Technology is a single octet IE:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="8">UE Positioning Technology</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>UE Positioning Technology value</p>
<p>Bits</p>
<p><strong>8 7 6 5 4 3 2 1</strong></p>
<p>0 0 0 0 0 0 0 0 AGNSS</p>
<p>0 0 0 0 0 0 0 1 OTDOA</p>
<p>0 0 0 0 0 0 1 0 MBS</p>
<p>0 0 0 0 0 0 1 1 WLAN</p>
<p>0 0 0 0 0 1 0 0 Bluetooth</p>
<p>0 0 0 0 0 1 0 1 Sensor</p>
<p>0 0 0 0 0 1 1 0 Multi-RTT</p>
<p>0 0 0 0 0 1 1 1 DL-TDOA</p>
<p>0 0 0 0 1 0 0 0 DL-AoD</p>
<p>All other cause values are reserved for future use.</p>
<h3 id="update-ue-location-information-1">6.6.2 UPDATE UE LOCATION
INFORMATION</h3>
<p>Same as TS 36.509 [6], subclause 6.12.</p>
<h2 id="nssai-delete-messages">6.7 NSSAI delete messages</h2>
<h3 id="nssai-delete-request">6.7.1 NSSAI DELETE REQUEST</h3>
<p>This message is only sent in the direction SS to UE.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Information Element</th>
<th>Reference</th>
<th>Presence</th>
<th>Format</th>
<th>Length</th>
</tr>
</thead>
<tbody>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
<tr>
<td>Delete NSSAI type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
<tr>
<td>Configured NSSAI</td>
<td></td>
<td>CV- ConfNSSAI</td>
<td>V</td>
<td>3</td>
</tr>
<tr>
<td>Allowed NSSAI</td>
<td></td>
<td>CV- AllowedNSSAI</td>
<td>V</td>
<td>4</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 70%" />
</colgroup>
<tbody>
<tr>
<td>Condition</td>
<td>Explanation</td>
</tr>
<tr>
<td>CV- ConfNSSAI</td>
<td>This IE is mandatory present if the IE "Delete NSSAI type" is set to
Delete Configured NSSAI. Else it shall be absent.</td>
</tr>
<tr>
<td>CV- AllowedNSSAI</td>
<td>This IE is mandatory present if the IE "Delete NSSAI type" is set to
Delete Allowed NSSAI. Else it shall be absent.</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>where Delete NSSAI type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Reserved</td>
<td>E1</td>
<td>E0</td>
<td>octet 2</td>
</tr>
</tbody>
</table>
<p>E1=0 and E0=0; Delete default configured NSSAI.</p>
<p>E1=0 and E0=1; Delete Configured NSSAI.</p>
<p>E1=1 and E0=0: Delete Allowed NSSAI.</p>
<p>where Configured NSSAI type</p>
<p>E1=1 and E0=1: Reserved.</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="4">MCC digit 2</td>
<td colspan="4">MCC digit 1</td>
<td>octet 3</td>
</tr>
<tr>
<td colspan="4">MNC digit 3</td>
<td colspan="4">MCC digit 3</td>
<td>octet 4</td>
</tr>
<tr>
<td colspan="4">MNC digit 2</td>
<td colspan="4">MNC digit 1</td>
<td>octet 5</td>
</tr>
</tbody>
</table>
<p>Octets 3,4 and 5 all set to "00000000": Delete configured NSSAI for
all configured PLMNs.</p>
<p>At least one of octets 3,4 or 5 &lt;&gt; "00000000": Delete
configured NSSAI for the PLMN indicated by octet 3.4 and 5,</p>
<p>- where octets 3 and 4 (bits 1 to 4) is MCC, Mobile country code. The
MCC is BCD coding. The MCC field is coded as in ITU-T Rec. E212 [39],
annex A; and</p>
<p>- where octet 4 (bits 5 to 8) and octet 5 is MNC, Mobile network
code. The MNC is BCD coding. The MNC shall consist of 2 or 3 digits. If
only two digits are used in the MNC then shall MNC digit 3 be set to
"1111".</p>
<p>where Allowed NSSAI:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="4">MCC digit 2</td>
<td colspan="4">MCC digit 1</td>
<td>octet 3</td>
</tr>
<tr>
<td colspan="4">MNC digit 3</td>
<td colspan="4">MCC digit 3</td>
<td>octet 4</td>
</tr>
<tr>
<td colspan="4">MNC digit 2</td>
<td colspan="4">MNC digit 1</td>
<td>octet 5</td>
</tr>
<tr>
<td colspan="5">Reserved</td>
<td></td>
<td>A1</td>
<td>A0</td>
<td>octet 6</td>
</tr>
</tbody>
</table>
<p>Octets 3,4 and 5 all set to "00000000": Delete NSSAI for all allowed
PLMNs.</p>
<p>At least one of octets 3,4 or 5 &lt;&gt; "00000000": Delete allowed
NSSAI for the PLMN indicated by octet 3.4 and 5,</p>
<p>- where octets 3 and 4 (bits 1 to 4): MCC, Mobile country code. The
MCC is BCD Coding. The MCC field is coded as in ITU-T Rec. E212 [39],
annex A; and</p>
<p>- where octet 4 (bits 5 to 8) and octet 5 is MNC, Mobile network
code. The MNC is BCD coding. The MNC shall consist of 2 or 3 digits. If
only two digits are used in the MNC then shall MNC digit 3 be coded as
"1111"; and</p>
<p>- where octet 6 is</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5">Reserved</td>
<td></td>
<td>A1</td>
<td>A0</td>
<td>octet 6</td>
</tr>
</tbody>
</table>
<blockquote>
<p>where A0 and A1 define the access type:</p>
</blockquote>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr>
<th><strong>A1</strong></th>
<th><strong>A0</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>3GPP access</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>Non-3GPP access</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>3GPP access and non-3GPP access</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>reserved</td>
</tr>
</tbody>
</table>
<h3 id="nssai-delete-response">6.7.2 NSSAI DELETE RESPONSE</h3>
<p>This message is only sent in the direction UE to SS.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Information Element</th>
<th>Reference</th>
<th>Presence</th>
<th>Format</th>
<th>Length</th>
</tr>
</thead>
<tbody>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<h2 id="set-uai-request">6.8 SET UAI REQUEST</h2>
<h3 id="set-uai-request-1">6.8.1 SET UAI REQUEST</h3>
<p>This message is only sent in the direction SS to UE.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Information Element</th>
<th>Reference</th>
<th>Presence</th>
<th>Format</th>
<th>Length</th>
</tr>
</thead>
<tbody>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
<tr>
<td>Preferred RRC State</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>where Preferred RRC State is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Reserved</td>
<td>E1</td>
<td>E0</td>
<td>octet 2</td>
</tr>
</tbody>
</table>
<p>E1=0 and E0=0; idle.</p>
<p>E1=0 and E0=1; inactive.</p>
<p>E1=1 and E0=0: connected.</p>
<p>E1=1 and E0=1: outOfConnected.</p>
<h3 id="set-uai-response">6.8.2 SET UAI RESPONSE</h3>
<p>This message is only sent in the direction UE to SS.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Information Element</th>
<th>Reference</th>
<th>Presence</th>
<th>Format</th>
<th>Length</th>
</tr>
</thead>
<tbody>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<h2 id="nr-sidelink-packet-counter-reporting-messages">6.9 NR SIDELINK
PACKET COUNTER reporting messages</h2>
<h3 id="ue-test-loop-nr-sidelink-packet-counter-request">6.9.1 UE TEST
LOOP NR SIDELINK PACKET COUNTER REQUEST</h3>
<p>This message is only sent in the direction SS to UE.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information Element</td>
<td>Reference</td>
<td>Presence</td>
<td>Format</td>
<td>Length</td>
</tr>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], subclause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], subclause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<h3 id="ue-test-loop-nr-sidelink-packet-counter-response">6.9.2 UE TEST
LOOP NR SIDELINK PACKET COUNTER RESPONSE</h3>
<p>This message is only sent in the direction UE to SS.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information Element</td>
<td>Reference</td>
<td>Presence</td>
<td>Format</td>
<td>Length</td>
</tr>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], subclause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], subclause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
<tr>
<td>NR Sidelink PSCCH Packet Counter(s) Value</td>
<td></td>
<td>CV-ModeE</td>
<td>TLV</td>
<td>4*(N<sup>C</sup>+1)+2</td>
</tr>
<tr>
<td>NR Sidelink STCH Packet Counter(s) Value</td>
<td></td>
<td>CV-ModeE</td>
<td>TLV</td>
<td>4*(N<sup>C</sup>+1)+2</td>
</tr>
<tr>
<td>NR Sidelink PSSCH Packet Counter(s) Value</td>
<td></td>
<td>CV-ModeE</td>
<td>TLV</td>
<td>4*(N<sup>C</sup>+1)+2</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 49%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td>Condition</td>
<td>Explanation</td>
</tr>
<tr>
<td>CV-ModeE</td>
<td>This IE is mandatory present if TEST_LOOP_MODE_E_ACTIVE is TRUE else
it shall be absent. N<sup>C</sup> = PROSE_COMMUNICATION_MONITOR_N.</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>And where NR Sidelink PSCCH Packet Counter(s) Value is:</p>
<table>
<colgroup>
<col style="width: 74%" />
<col style="width: 25%" />
</colgroup>
<tbody>
<tr>
<td>8 7 6 5 4 3 2 1</td>
<td></td>
</tr>
<tr>
<td>NR Sidelink PSCCH Packet Counter(s) Value type</td>
<td>octet 1</td>
</tr>
<tr>
<td>Length of NR Sidelink PSCCH Packet Counter(s) Value contents in
bytes</td>
<td>octet 2</td>
</tr>
<tr>
<td>NR Sidelink PSCCH Packet Counter IE #0</td>
<td><p>octet 3</p>
<p>octet 4</p>
<p>octet 5</p>
<p>octet 6</p></td>
</tr>
<tr>
<td>…</td>
<td></td>
</tr>
<tr>
<td>NR Sidelink PSCCH Packet Counter IE #N<sup>C</sup></td>
<td><p>octet 3+4 * N<sup>C</sup></p>
<p>octet 4+4 * N<sup>C</sup></p>
<p>octet 5+4 * N<sup>C</sup></p>
<p>octet 6+4 * N<sup>C</sup></p></td>
</tr>
</tbody>
</table>
<p>And where NR Sidelink PSCCH Packet Counter(s) Value type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>And where NR Sidelink PSCCH Packet Counter IE #n is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>D31</td>
<td>D30</td>
<td>D29</td>
<td>D28</td>
<td>D27</td>
<td>D26</td>
<td>D25</td>
<td>D24</td>
<td>octet 1</td>
</tr>
<tr>
<td>D23</td>
<td>D22</td>
<td>D21</td>
<td>D20</td>
<td>D19</td>
<td>D18</td>
<td>D17</td>
<td>D16</td>
<td>octet 2</td>
</tr>
<tr>
<td>D15</td>
<td>D14</td>
<td>D13</td>
<td>D12</td>
<td>D11</td>
<td>D10</td>
<td>D9</td>
<td>D8</td>
<td>octet 3</td>
</tr>
<tr>
<td>D7</td>
<td>D6</td>
<td>D5</td>
<td>D4</td>
<td>D3</td>
<td>D2</td>
<td>D1</td>
<td>D0</td>
<td>octet 4</td>
</tr>
</tbody>
</table>
<p>D31..D0 = PSCCH packet counter 0.. 4294967295 (binary coded, D31 is
most significant bit and D0 least significant bit) corresponding to
PSCCH_PACKET_COUNTER(SL_ID = n).</p>
<p>And where NR Sidelink STCH Packet Counter(s) Value is:</p>
<table>
<colgroup>
<col style="width: 74%" />
<col style="width: 25%" />
</colgroup>
<tbody>
<tr>
<td>8 7 6 5 4 3 2 1</td>
<td></td>
</tr>
<tr>
<td>NR Sidelink STCH Packet Counter(s) Value type</td>
<td>octet 1</td>
</tr>
<tr>
<td>Length of NR Sidelink STCH Packet Counter(s) Value in bytes</td>
<td>octet 2</td>
</tr>
<tr>
<td>NR Sidelink STCH Packet Counter IE #0</td>
<td><p>octet 3</p>
<p>octet 4</p>
<p>octet 5</p>
<p>octet 6</p></td>
</tr>
<tr>
<td>…</td>
<td></td>
</tr>
<tr>
<td>NR Sidelink STCH Packet Counter IE #N<sup>C</sup></td>
<td><p>octet 3+4 * N<sup>C</sup></p>
<p>octet 4+4 * N<sup>C</sup></p>
<p>octet 5+4 * N<sup>C</sup></p>
<p>octet 6+4 * N<sup>C</sup></p></td>
</tr>
</tbody>
</table>
<p>where NR Sidelink STCH Packet Counter(s) Value type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>And where NR Sidelink STCH Packet Counter IE #n is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>E31</td>
<td>E30</td>
<td>E29</td>
<td>E28</td>
<td>E27</td>
<td>E26</td>
<td>E25</td>
<td>E24</td>
<td>octet 1</td>
</tr>
<tr>
<td>E23</td>
<td>E22</td>
<td>E21</td>
<td>E20</td>
<td>E19</td>
<td>E18</td>
<td>E17</td>
<td>E16</td>
<td>octet 2</td>
</tr>
<tr>
<td>E15</td>
<td>E14</td>
<td>E13</td>
<td>E12</td>
<td>E11</td>
<td>E10</td>
<td>E9</td>
<td>E8</td>
<td>octet 3</td>
</tr>
<tr>
<td>E7</td>
<td>E6</td>
<td>E5</td>
<td>E4</td>
<td>E3</td>
<td>E2</td>
<td>E1</td>
<td>E0</td>
<td>octet 4</td>
</tr>
</tbody>
</table>
<p>E31..E0 = STCH Packet Counter value 0.. 4294967295 (binary coded, E31
is most significant bit and E0 least significant bit) corresponding to
STCH_PACKET_COUNTER(SL_ID = n).</p>
<p>And where NR Sidelink PSSCH Packet Counter(s) Value is:</p>
<table>
<colgroup>
<col style="width: 74%" />
<col style="width: 25%" />
</colgroup>
<tbody>
<tr>
<td>8 7 6 5 4 3 2 1</td>
<td></td>
</tr>
<tr>
<td>NR Sidelink PSSCH Packet Counter(s) Value type</td>
<td>octet 1</td>
</tr>
<tr>
<td>Length of NR Sidelink PSSCH Packet Counter(s) Value contents in
bytes</td>
<td>octet 2</td>
</tr>
<tr>
<td>NR Sidelink PSSCH Packet Counter IE #0</td>
<td><p>octet 3</p>
<p>octet 4</p>
<p>octet 5</p>
<p>octet 6</p></td>
</tr>
<tr>
<td>…</td>
<td></td>
</tr>
<tr>
<td>NR Sidelink PSSCH Packet Counter IE #N<sup>C</sup></td>
<td><p>octet 3+4 * N<sup>C</sup></p>
<p>octet 4+4 * N<sup>C</sup></p>
<p>octet 5+4 * N</p>
<p>octet 6+4 * N<sup>C</sup></p></td>
</tr>
</tbody>
</table>
<p>And where NR Sidelink PSSCH Packet Counter(s) Value type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>And where NR Sidelink PSSCH Packet Counter IE #n is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>F31</td>
<td>F30</td>
<td>F29</td>
<td>F28</td>
<td>F27</td>
<td>F26</td>
<td>F25</td>
<td>F24</td>
<td>octet 1</td>
</tr>
<tr>
<td>F23</td>
<td>F22</td>
<td>F21</td>
<td>F20</td>
<td>F19</td>
<td>F18</td>
<td>F17</td>
<td>F16</td>
<td>octet 2</td>
</tr>
<tr>
<td>F15</td>
<td>F14</td>
<td>F13</td>
<td>F12</td>
<td>F11</td>
<td>F10</td>
<td>F9</td>
<td>F8</td>
<td>octet 3</td>
</tr>
<tr>
<td>F7</td>
<td>F6</td>
<td>F5</td>
<td>F4</td>
<td>F3</td>
<td>F2</td>
<td>F1</td>
<td>F0</td>
<td>octet 4</td>
</tr>
</tbody>
</table>
<p>F31..F0 = PSSCH packet counter 0.. 4294967295 (binary coded, F31 is
most significant bit and F0 least significant bit) corresponding to
PSSCH_PACKET_COUNTER(SL_ID = n).</p>
<h2 id="set-ul-message">6.10 SET UL MESSAGE</h2>
<h3 id="set-ul-message-request">6.10.1 SET UL MESSAGE REQUEST </h3>
<p>Same as TS 36.509 [6], subclause 6.19.1</p>
<h3 id="set-ul-message-response">6.10.2 SET UL MESSAGE RESPONSE</h3>
<p>Same as TS 36.509 [6], subclause 6.19.2.</p>
<h2 id="power-limit-messages">6.11 Power Limit messages</h2>
<h3 id="activate-power-limit-request">6.11.1 ACTIVATE POWER LIMIT
REQUEST</h3>
<p>The values sent the SS as part of this test function maps to the
values defined in Table 6.11.1-1.</p>
<p>For intra-band contiguous FR2 UL-CA scenarios where it is critical to
prevent drop of the secondary component carrier(s) due to prioritization
rules in section 7.5 of TS 38.213, a parameter
X<sub>max,<em>f</em>,<em>PCell </em></sub> is defined for the Pcell such
that</p>
<p>X<sub>max, <em>PCell </em></sub> = 10 log<sub>10</sub>(<em>total
aggregated BW/PCell BW</em>)</p>
<p>X<sub>max,<em>i</em>,<em>PCell </em></sub> is the back-off in
transmit power applied on the primary component carrier from
P<sub>CMAX,<em>f,c. </em></sub>This ensure sufficient power allocation
is possible on the secondary component carrier(s)</p>
<p>This message is only sent in the direction SS to UE.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Information Element</th>
<th>Reference</th>
<th style="text-align: center;">Presence</th>
<th style="text-align: center;">Format</th>
<th style="text-align: center;">Length</th>
</tr>
</thead>
<tbody>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [7], subclause 11.2.3.1.1</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [7], subclause 11.2.3.1.2</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td>TOTAL NR AGGREGATED BANDWIDTH</td>
<td></td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td>PCELL NR BANDWIDTH</td>
<td></td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>where TOTAL NR AGGREGATED BANDWIDTH is a single octet IE:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>X8</td>
<td>X7</td>
<td>X6</td>
<td>X5</td>
<td>X4</td>
<td>X3</td>
<td>X2</td>
<td>X1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>and represents the total NR aggregated bandwidth as per the equation
below:</p>
<p><img src="media/image31.png" /></p>
<p>where PCELL NR BANDWIDTH is a single octet IE:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>X8</td>
<td>X7</td>
<td>X6</td>
<td>X5</td>
<td>X4</td>
<td>X3</td>
<td>X2</td>
<td>X1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>and represents the PCell NR bandwidth as per the equation below:</p>
<p><img src="media/image32.png" /></p>
<h3 id="activate-power-limit-response">6.11.2 ACTIVATE POWER LIMIT
RESPONSE</h3>
<p>This message is only sent in the direction UE to SS.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information Element</td>
<td>Reference</td>
<td>Presence</td>
<td>Format</td>
<td>Length</td>
</tr>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message Type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<h3 id="deactivate-power-limit-request">6.11.3 DEACTIVATE POWER LIMIT
REQUEST</h3>
<p>This message is only sent in the direction SS to UE</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information Element</td>
<td>Reference</td>
<td>Presence</td>
<td>Format</td>
<td>Length</td>
</tr>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message Type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<h3 id="deactivate-power-limit-response">6.11.4 DEACTIVATE POWER LIMIT
RESPONSE</h3>
<p>This message is only sent in the direction UE to SS.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr>
<td>Information Element</td>
<td>Reference</td>
<td>Presence</td>
<td>Format</td>
<td>Length</td>
</tr>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message Type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>bit no.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<h2 id="ue-test-loop-mode-c-mbms-packet-counter-reporting-messages">6.12
UE TEST LOOP MODE C MBMS PACKET COUNTER reporting messages</h2>
<h3 id="ue-test-loop-mode-c-mbms-packet-counter-request">6.12.1 UE TEST
LOOP MODE C MBMS PACKET COUNTER REQUEST</h3>
<p>Same as TS 36.509 [6], subclause 6.10</p>
<h3 id="ue-test-loop-mode-c-mbms-packet-counter-response">6.12.2 UE TEST
LOOP MODE C MBMS PACKET COUNTER RESPONSE</h3>
<p>Same as TS 36.509 [6], subclause 6.11.</p>
<h2 id="set-musim-uai-request">6.13 SET MUSIM UAI REQUEST</h2>
<h3 id="set-musim-uai-request-1">6.13.1 SET MUSIM UAI REQUEST</h3>
<p>This message is only sent in the direction SS to UE.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Information Element</th>
<th>Reference</th>
<th>Presence</th>
<th>Format</th>
<th>Length</th>
</tr>
</thead>
<tbody>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
<tr>
<td><em>musim-PreferredRRC-State</em></td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
<tr>
<td><em>musim-GapPreferenceList</em></td>
<td></td>
<td>CV-<em>musimGap</em></td>
<td>TLV</td>
<td>5*(N<sup>C</sup>+1)+2</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 49%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr>
<th>Condition</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>CV-<em>musimGap</em></td>
<td>0 ≤ N<sup>C</sup> ≤ 3.</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>where <em>musim-PreferredRRC-State</em> is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Reserved</td>
<td>E1</td>
<td>E0</td>
<td>octet 3</td>
</tr>
</tbody>
</table>
<p>E1=0 and E0=0; idle.</p>
<p>E1=0 and E0=1; inactive.</p>
<p>E1=1 and E0=0: outOfConnected.</p>
<p>E1=1 and E0=1: Reserved.</p>
<p>where <em>musim-GapPreferenceList</em> is:</p>
<table>
<colgroup>
<col style="width: 74%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th>8 7 6 5 4 3 2 1</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><em>musim-GapPreferenceList</em> Value type</td>
<td>octet 1</td>
</tr>
<tr>
<td>Length of <em>musim-GapPreferenceList</em> Value contents in
bytes</td>
<td>octet 2</td>
</tr>
<tr>
<td><em>musim-GapPreferenceList</em> IE #0</td>
<td><p>octet 3</p>
<p>octet 4</p>
<p>octet 5</p>
<p>octet 6</p>
<p>octet 7</p></td>
</tr>
<tr>
<td>…</td>
<td></td>
</tr>
<tr>
<td><em>musim-GapPreferenceList</em> IE #N<sup>C</sup></td>
<td><p>octet 3+5 * N<sup>C</sup></p>
<p>octet 4+5 * N<sup>C</sup></p>
<p>octet 5+5 * N<sup>C</sup></p>
<p>octet 6+5 * N<sup>C</sup></p>
<p>octet 7+5 * N<sup>C</sup></p></td>
</tr>
</tbody>
</table>
<p>And where <em>musim-GapPreferenceList</em> Value type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<p>And where <em>musim-GapPreferenceList</em> IE #n is:</p>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 0%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th colspan="2">2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>A9</td>
<td>A8</td>
<td>A7</td>
<td>A6</td>
<td>A5</td>
<td colspan="2">A4</td>
<td>A3</td>
<td>A2</td>
<td>octet 1</td>
</tr>
<tr>
<td>A1</td>
<td>A0</td>
<td>B3</td>
<td>B2</td>
<td>B1</td>
<td colspan="2">B0</td>
<td colspan="2">Reserved</td>
<td>octet 2</td>
</tr>
<tr>
<td>C2</td>
<td>C1</td>
<td>C0</td>
<td>D3</td>
<td>D2</td>
<td colspan="2">D1</td>
<td>D0</td>
<td>Reserved</td>
<td>octet 3</td>
</tr>
<tr>
<td>E13</td>
<td>E12</td>
<td>E11</td>
<td>E10</td>
<td>E9</td>
<td colspan="2">E8</td>
<td>E7</td>
<td>E6</td>
<td>octet 4</td>
</tr>
<tr>
<td>E5</td>
<td>E4</td>
<td>E3</td>
<td>E2</td>
<td>E1</td>
<td colspan="2">E0</td>
<td colspan="2">Reserved</td>
<td>octet 5</td>
</tr>
</tbody>
</table>
<p>A9..A0 = 0..1023 Indicates gap starting SFN number for the aperiodic
MUSIM gap preference (binary coded, A9 is most significant bit and A0
least significant bit).</p>
<p>B3..B0 = 0..9 Indicates gap starting subframe number for the
aperiodic MUSIM gap(binary coded, B3 is most significant bit and B0
least significant bit).</p>
<p>C2..C0 = 0..4 Indicates the length of the UE's MUSIM gap as specified
in TS 38.133 [14] clause 9.1.10. This field is mandatory present for
both periodic gap and aperiodic gap preference indication (binary coded,
C2 is most significant bit and C0 least significant bit).</p>
<p>C2..C0 = 0; ms3.</p>
<p>C2..C0 = 1; ms4.</p>
<p>C2..C0 = 2; ms6.</p>
<p>C2..C0 = 3; ms10.</p>
<p>C2..C0 = 4; ms20.</p>
<p>D3..D0 = 0..8 Indicates the gap repetition period in ms for the
periodic MUSIM gap as specified in TS 38.133 [14] clause 9.1.10 (binary
coded, D3 is most significant bit and D0 least significant bit).</p>
<p>D3..D0 = 0; ms20.</p>
<p>D3..D0 = 1; ms40.</p>
<p>D3..D0 = 2; ms80.</p>
<p>D3..D0 = 3; ms160.</p>
<p>D3..D0 = 4; ms320.</p>
<p>D3..D0 = 5; ms640.</p>
<p>D3..D0 = 6; ms1280.</p>
<p>D3..D0 = 7; ms2560.</p>
<p>D3..D0 = 8; ms5120.</p>
<p>E13..E0= 0.. (gap repetition period-1) Indicates the gap offset in
number of subframes for the periodic MUSIM gap as specified in TS 38.133
[14] clause 9.1.10. This field is mandatory present for the periodic
MUSIM gap indication (binary coded, E13 is most significant bit and E0
least significant bit).</p>
<h3 id="set-musim-uai-response">6.13.2 SET MUSIM UAI RESPONSE</h3>
<p>This message is only sent in the direction UE to SS.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Information Element</th>
<th>Reference</th>
<th>Presence</th>
<th>Format</th>
<th>Length</th>
</tr>
</thead>
<tbody>
<tr>
<td>Protocol discriminator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.1</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Skip indicator</td>
<td>TS 24.007 [5], sub clause 11.2.3.1.2</td>
<td>M</td>
<td>V</td>
<td>½</td>
</tr>
<tr>
<td>Message type</td>
<td></td>
<td>M</td>
<td>V</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>where message type is:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
<th>bit no.</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>octet 1</td>
</tr>
</tbody>
</table>
<h1 id="variables-constants-and-timers">7 Variables, constants and
timers</h1>
<h2 id="state-variables">7.1 State variables</h2>
<p>Same as [9] TS 36.509, subclause 7.1 except:</p>
<p>STCH_PACKET_COUNTER(SL_ID)</p>
<p>This 32-bit integer state variable is used to count successful
reception of SDAP SDUs while UE test loop mode E is activated and
TEST_LOOP_MODE_E_TRIGGER is set to RECEIVE. The counter variable is
indexed with SL_ID = 0…( MAX_ModeE_Monitor_Entities).
STCH_PACKET_COUNTER(SL_ID) shall be set to zero when UE is switched on.
If configured value of variable PROSE_COMMUNICATION_MONITOR_N is set to
0 then UE counts all SDAP SDUs as part of one counter
STCH_PACKET_COUNTER(0) irrespective of Group Destination IDs or
Destination Layer-2 IDs.</p>
<h2 id="constants">7.2 Constants</h2>
<p>Same as [9] TS 36.509, subclause 7.2.</p>
<h2 id="timers">7.3 Timers</h2>
<p>Same as [9] TS 36.509, subclause 7.3.</p>
<h2 id="configurable-parameters">7.4 Configurable parameters</h2>
<p>Same as [9] TS 36.509, subclause 7.4.</p>
<h1 id="electrical-man-machine-interface-emmi">8 Electrical Man Machine
Interface (EMMI)</h1>
<p>The EMMI is used for automation of conformance testing. The commands
used on the EMMI by the System Simulator, shall be limited to those
specified in TS 38.523-3 [3]. An illustration is given in figure 8-1 as
an example.</p>
<p>At the System Simulator side, the logical EMMI using mandatory AT
commands shall interface with the Main Test Component (MTC) of TTCN test
cases which hosts the Upper Tester. The physical EMMI interface towards
the UE may be for example a standard USB interface. Other interfaces of
proprietary or standardized type shall not be precluded.</p>
<p>At the UE side an adapter needs to be provided by the UE manufacturer
for converting the commands into the UE manufacturer specific interface
and format.</p>
<p>The use of EMMI is optional for the UE.</p>
<p><img src="media/image33.svg" /></p>
<p>Figure 8-1: An example of EMMI and its use for automation of
signalling testing</p>
<p class="heading"
id="annex-a-normative-pre-defined-message-containers-used-for-testing"><br />
Annex A (normative):<br />
Pre-defined message containers used for testing</p>
<p>A.1 Predefined UE Capability container</p>
<p>NOTE: For sake of testability, the below container list does not
describe the true capability of the UE and does not rely on UEs support
of EN-DC.</p>
<p>ue-CapabilityRAT-ContainerList</p>
<p>{</p>
<p>{</p>
<p>rat-Type nr,</p>
<p>ue-CapabilityRAT-Container '
E9A29800575F5A935F0A03C32001609317941BCBD09009B20C39F30C7942C0E0D8040623805D46C28C0D608C21A08107482407D6C98AB1A1CF88E3D033EC09F1991C790E7D033EC09F51CF9863CA16070387938002F800E000BE00088000E0551B137582308682041D20901F5B262AC6873E238F40CFB027C66471E439F40CFB027D473E618F28581C0E1E4E000BE0038002F800224003800D940001400001506C00D608C21A08107882405D6C98AB091C790E7C62471E439F51CF9863CA16070387827F7000001FDC00000110001C00408385000000061E140006134000208C38280389A0000081587800001C4D000006120400C028809A1A00BC090226C73E1C29D3B639F0E14E9DB1CF870A74ED8E7C37A09801F00140E0A00E0601280380030120020301F03C01000000008000010040000100200000C01000802008020000100100000A0080000600400003802001000000040020300C0080000800400004802000028010000160080000C0339535953582B5829583359335819583B580B581B5809594B581140C04000025949410000196525040000A594901000039652427000104B292028000B2CA480800034B292020000F2CA480800044B29202000132CA480800054B29282000172CA480800064B292018A55574AAAA82C552A8BA551541A2A93455038AA0F154062A93555298AA05142405201F40A05028140A05028140A05028140A05028000300080A0041010020140400800080801000020040104040300601002014728840004080C10181C282C30344044484C5060646C70747C8494989CA0A4A8B4BCD105190'H</p>
<p>},</p>
<p>{</p>
<p>rat-Type eutra-nr,</p>
<p>ue-CapabilityRAT-Container
'A107A04908360000808109870A00000011102C1C038500000048A824020C0C0385000000808B91504C040101870A000001811722A0900030200E14000002021C88C268C01C28000C2680010881309A08070A000309A000522068260000808385000000C08722205811170A00000311184C2C0385000184D000211026130400E1400061340008440902C9C0385000001C888164C45C2800000C406130100E140006134000A440D0480818D8070A000004010E4541302004361C2800001204391102C6403850000004888163001C2800000E4441A0004040C4C0385000002888834000C080109870A000005911068041169B4100E1400000C2220D808022D34821C2800001A4441A0104020D0403850000038888360200804120870A000007911048049A08070A00000811104C048920870A00000891184D1803050071340000911026134100C1401C4D000026440984C2C03050071340000911026130400C1401C4D000024440984C04030500713400009910241311004505C4D0000284441A000604008A0B89A000054888360000808114171340000B111088001010206263601C4D00002E444220006040081890D871340000C11108C000101020624361C4D00003244422000404481818D8071340000D111088001011306004361C4D000036444230000404481810D871340000E11506800105031100E2680001D021C8A834000C280108871340000F010E4541B00004140844389A00007C08722A0900830B00E26800008022E4441B00004044818B89A00008089C5404081818D8021F0E0000061340042102205C56040081810D821F0E0000061340044102205C440C0C6C010F8700000309A0023081102E220206360087C380000184D0012040881711810021B043E1C00000C268009420440B8A80810303130043E1C00000C268008420440B8AC0801030213043E1C00000C268008820440B888181898021F0E0000061340046102205C44040C4C010F8700000309A0024081102E230200426087C380000184D0012840881715010206060E0087C380000184D00108408817158100206040E087C380000184D00110408817110303070043E1C00000C268008C20440B888081838021F0E0000061340048102205C46040081C10F8700000309A0025081102E23020040C087C380000184D001304088170D810021F0E000006134004E102205C4404081818D80700000309A0028081102E2202060C0086C380000184D0014840881711810020604361C00000C268009820440F8680018D80700000309A002A021C20440F88808103031300E0000061340050043840881F11010306004261C00000C26800A4087081103E23020040C084C380000184D0013010E102207C54040818103030700E0000061340056043840881F150103060040C081C380000184D0016010E102207C56040081810302070E0000061340044043840881715000206040C0C1C0380000184D00158408817150003060040C081C380000184D0016040881F11030206060E01C00000C26800B4087081103E23060040C081C380000184D0013010E102207C54040808103030700E0000061340056043840881F15010202060C0081C380000184D0010810E102207C56040080810302070E0000061340044043840881F15000202040C0C1C0380000184D0015810E102207C54000808183002070E0000061340042043840881F150003020040C081C380000184D0016010E102207C4404081818380700000309A0028022E102207C44040C1801038700000309A0029022E102207C4604008181038700000309A0026022E102207C4400081818380700000309A0028021C20440F88800183002070E000006134005204384088171500020204040C1C0380000184D001584088171500030200404081C380000184D0016040881F11010202060E01C00000C26800B4087081103E230200404081C380000184D0013010E102207C4400080818380700000309A0028023F081103E220006040081C380000184D0014811F840881F15010202060C00818380000184D0010810E102207C56040080810302060E0000061340044043840881F15000202060C00818380000184D0010810E102207C54000C08010302060E0000061340058043840881F110103060040C1C00000C26800B8087081103E23020040C0818380000184D0013010E102207C44000C1801030700000309A002E021C20440F86C1801030700000309A0027023F081102E2A000404080818300700000309A002B081102E2A000604008081030700000309A002C081103E220204040C180380000184D0017810E102207C4604008081030700000309A0030021C20440F88800101030600E0000061340062043840881F110003020040C1C00000C26800B8087081103E1A02260C45C00000C26800C8087081103E1B022240C5C00000C26800CC087081103E1A02060C45C00000C26800D0087081103E1B020040C5C00000C26800D4087081102E1A02260C01C00000C26800D820440B86C0889030700000309A0037081103E1A02060C01C00000C26800E0087081103E1B020040C1C00000C268009C087081103E1A00060C01C00000C26800E0087081103E130622E0000061340072045C20440B88800181002020E000006134005C102207C360400808380000184D00138117081102E130222E00000613400721022048260000800389A00000C8A8160041C4D00007404391504C080113870000001D810E4442202040C0C6C010F870000001E11108C080103021B043E1C0000007A4442202040C0C4C010F870000001E11108C0801030213043E1C0000007A4442202040C0C1C010F870000001E11108C0801030207043E1C0000007A44413022043E1C0000007C4441A02060C0086C38000000FC888340448189898070000002011106808983112130E000000412220D811120624261C000000844441A02040C4C4C0380000010C88834040C188909870000002211106C08010312130E0000004522A15010202040C081818380700000023010E4542A0204040C18010302070E00000047021C8A85604008081030206040E1C00000090043911888001030206060E01C0000009244098880018300206040E1C00000094440D888001010206060E01C0000009204391036220004040C1801038700000025810E440D8880018100206040E1C00000094043910241A02240C0C1C0380000013088834044C180103870000002691106C08890302070E0000004E2231100020204040C1C0380000012488131100030200404081C380000012888131500020204040C1801030700000027910262A0006040080810302060E000000502206824044C188B80000014408722A0981112062E00000052021C888168245C4D00000C44413060045A9C4D0000A6444220004040CA00114871340002A11106C08011412292E268000202220D800022824525C4D0000404441211065045C4D0000AA4441A0004040CA08B89A000158888340008081940071340002B911048001941171340002C115048001940071340002C810E4440B0C00E2680005A2221100820604820D180389A00016C888440208181A0802460E2680005C22211008306004820918389A00017488846020081812082460E2680005E2221100820104820D180389A00016C888440208041A0802460E2680005C22211808020104820918389A00017888844020804103034600E2680005B22211008201060C00918389A00017088846020080410302460E2680005E22215008206040C0D040120871340002F9110A8041830020604820904389A000180888560200818103024104821C4D0000C24442201040C4D0401208713400031111088041831124104821C4D0000C644423010040C490412087134000321110A804100820604160D040389A000194888540208041830020B04821C4D0000CC4442B0100402081810582410E268000672221100820104080D040389A0001A088844020804182002410E2680006922211808020104080904389A0001A88884404086C194112292E2680006B2221101031B0045048A4B89A0001B088846040086C11412292E2680006D222110003020045048A4B89A0001B888846000080811412292E2680006F222110002020636008A4B89A0001C088844000C08010D82292E26800071222118000202043608A4B89A0001C88884400084818A002292E26800073222110003120042808A4B89A0001D088846000084810A02292E26800075222110002020628008A4B89A0001C088844000C08010A02292E26800071222118000202042808A4B89A0001C888844000808189002292E26800070222110003020042408A4B89A0001C488846000080810902292E26800072222110002020622008A4B89A0001C088844000C08010882292E26800071222118000202042208A4B89A0001C888834000C0801149F1340003B11106C00010102293E268000772220981002294E268000782220980002294E268000782221103021B064E0089C389A0001E4888440C0C6C011382270E2680007A22211830021B044E089C389A0001EC8884404086C193802270E268000792221101031B0044E089C389A0001E888846040086C11382270E2680007B2221100021B064E0089C389A0001E488844000C6C011382270E2680007A22211800021B044E089C389A0001EC88844040C18011382270E2680007C222118100206044E089C389A0001F488844000C08011382270E2680007C222118000202044E089C389A0001F48884404081810D832722E2680007E2221101020606360089CB89A0001C088844040C18010D82272E268000712221181002060436089CB89A0001C88884400080810D832722E2680007E2221100020206360089CB89A0001C088844000C08010D82272E268000712221180002020436089CB89A0001C88883404086C1939971340003F9110680818D802273E268000802220D810021B044E7C4D0001024441206064E85C4D00010444413060044E9C4D0000F044422000404084C192807134000341110880010103130044A1C4D0000D2444220006040084C112871340004191108C0001010213044A1C4D0000D44442A00040408181898021F0E26800084222150003020040C084C10F87134000429110AC00010102060426087C389A000218888440408181898021F0E268000692221181002060426087C389A0001A8888440008181898021F0E268000692221180002060426087C389A0001A888836044481810F87134000439110680C103031B00E268000882220D018306004361C4D0001124441B030040C086C389A00022888844000808903131B00E2680008B22211000202260C4086C389A00023088844000C088103121B0E2680008D222118000202240C486C389A000238888440008081831121B0E2680008F222110003022240C086C389A00024088834044C18890D871340004891106C088903121B0E268000922220D010202063601C4D0001104441B0200404086C389A000228888540008081030206063201C4D0001264442A0004040C18010302190E26800094222150003020040C081810C871340004A9110AC0001010206040C0864389A000258888540008089030207062601C4D00012E4442A0004044818183802130E2680009822215000202260C0081C109871340004C9110A80018111206040E084C389A000268888560000808903020704261C4D0001364542A0204040818103030700E26800093021C8A85404080818300206040E1C4D0001280439150AC0801010206040C081C389A00025808722211000206040C0C1C0389A00016C88844000C18010302070E2680005D222118000206040C081C389A00017888844000808101030700E2680005B2221100030200404081C389A00017488846000080810102070E2680005E2221500020204080C180103071340004E1110A80010103040040C0818389A00027488854000C0801020206040C1C4D00013C4442B0000404081010302060E2680009F22211008203060C00818389A00028088844020C0C010302060E2680007C222118080203040C0818389A0001F48885400080810103060040C1C4D0000BE4442A0006040080810302060E2680006022215800020204040818103071340003091106800101130622E268000A12220D0003022240C5C4D000144441E12171181248C01B1CF87083639F0E201B1CF87100D8E7C38806C73E1C403639F0E201B1CF87100D8E7C3841B1CF87100D8E7C38806C73E1C20D8E7C3841B1CF87100D8E7C38806C73E1C403639F0E106C73E1C20D8E7C38C01B1CF871803639F0E3006C73E1C600D8E7C38C01B1CF871803639F0E201B1CF87100D8E7C38806C73E1C403639F0E201B1CF87100D8E7C38806C73E1C403639F0E3006C73E1C600D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E3006C73E1C600D8E7C38C01B1CF87100D8E7C38C01B1CF8728003639F0E50006C73E1C8003639F0E4001B1CF872000D8E7C394001B1CF8728003639F0E4001B1CF872000D8E7C390006C73E1CA000D8E7C394001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF871803639F0E4001B1CF872000D8E7C390006C73E1C600D8E7C390006C73E1C8003639F0E4001B1CF8728003639F0E50006C73E1CA000D8E7C394001B1CF8728003639F0E4001B1CF872000D8E7C394001B1CF8728003639F0E50006C73E1CA000D8E7C394001B1CF8728003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF8728003639F0E50006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1CA000D8E7C394001B1CF8728003639F0E50006C73E1C8003639F0E4001B1CF872000D8E7C38C01B1CF8728003639F0E50006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C600D8E7C38C01B1CF871803639F0E3006C73E1C600D8E7C38C01B1CF871803639F0E3006C73E1C600D8E7C38806C73E1C8003639F0E3006C73E1C403639F0E201B1CF87083639F0E201B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C403639F0E3006C73E1C600D8E7C38C01B1CF871803639F0E3006C73E1C600D8E7C38C01B1CF8728003639F0E50006C73E1CA000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C600D8E7C38C01B1CF871803639F0E4001B1CF872000D8E7C394001B1CF8728003639F0E201B1CF87100D8E7C3841B1CF87100D8E7C390006C73E1C600D8E7C38C01B1CF87100D8E7C38C01B1CF871803639F0E201B1CF87100D8E7C3841B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1CA000D8E7C394001B1CF8728003639F0E4001B1CF872000D8E7C390006C73E1CA000D8E7C394001B1CF8728003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C600D8E7C38C01B1CF87100D8E7C38806C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E3006C73E1C600D8E7C38C01B1CF87100D8E7C38806C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1CA000D8E7C394001B1CF8728003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E3006C73E1C600D8E7C38C01B1CF871803639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C38C01B1CF871803639F0E3006C73E1C600D8E7C394001B1CF8728003639F0E50006C73E1CA000D8E7C394001B1CF8728003639F0E50006C73E1CA000D8E7C394001B1CF8728003639F0E50006C73E1CA000D8E7C390006C73E1C8003639F0E4001B1CF872000D8E7C390006C73E1C8003639F0E50006C73E1CA000D8E7C394001B1CF8728003639F0E4001B1CF872000D8E7C390006C73E1CA000D8E7C394001B1CF8728003639F0E3006C73E1C600D8E7C3018B0248000000000000000000000000000000004100041410010505040414141410414104141041105041050400010441000000000004141414141010505050400A800000000000002AAAAAAAAAAA8000000000000000000000000000000000000000008510C00020100010000002000100201420001008080100A200010000004010100201440002008000800020040288000201010020140400800100008020200402808010001000180804008050800080202004028800040000008040400805100008020001000080100A300008000004000000804040080518000400000200800040002004028C000400000280000040101002014600020080014000002000080100A30001000000400000100404008051800080200020000008000200402880006000001004040080510000C040002000080100A2000080404008000100201440002008080100002004028800020100040000400805180008000002008000C0002004028C000401000100000060001002014800020000008000003000000402020040290000400000100400060000008000400805200008020002000000C000001000080100A4000100000060000010000002010100201480002000000C00000200800040002004029000040100018000004000000800040080518000800000100000040202004028C000400000080400020001002014600020080004000001000080100A30001004000600000180004008052800040000010000004020001000080600C02004001400020100008000002000000800040300601002000804020000200020080401008100400010000C0300680600C0600400400800200008000001008000400020180300801000400010040002000000800040300601002000804010080401020100001000100400008000C0300680600C0600400400800180008020002000080600C0200400100804000040004010000400020080401008180600D00C0180C0080080100040200800020001008020080408020000400060180340300603002002004000C0004000000804040300601002000A000100000040000010000004020201803008010005000080000020100008000002000100C018040080020000800000100000040202018030080100040400800020000200040100401008020104008000100004000500C01A018034030060500200200400400800201004000100008020000400040200802010300C01A018030180100100200080801008040100402080200002000040008010000200008000A0180340300680600C0A0040040080080100040400800020000200040080001000040004010040100802010500C01A018034030060500200200400400800180010000004010080600C02004000C000802000200004030060100200060002000001004020180300801000300010040008000100C0180400800180010000002008080600C02004000C0008020001000040300601002000600020000008020201803008010002000180804030060100200020003008080100A200010040004000100C01880002000000800000100800080002018031000040100010000002000001000040300610000C020002000080600C300010000004010000800040300618000C00000800000040202018030C00060000040080002000100C018600030100020000001000080600C300010000006000000804040300618000800000301000040002018030C00040100018000002000100C018A000200000080000020000008000001008080600C5000100000040000010040004000000800040300628000802000200000080000020000004000201803100004000001000000400000080404030062000080000020080008000001000080600C4000100000040000010040002000100C018600030000008000001008080600C300018000004010000800040300618000C040002000000400020180314000400000100000040000010040004000100C018A000200000080200020000008000002000080600C200018000006020100C01840003010000C00020180308000401000380004008052000040000010000004020001000080100A2000080000100201002014600010000004000004010080100A30400800010000400040100001000020004008040200802010500201600402C00805100008000004010080100A200010000004010100201420001008080100A400010000004000001000000201010020148000200000080000020080004000200402900004000001004000400000080004008052000080200020000008000001000080100A500010000004000001000000401000100004008052800080000020080008000002000000800020040294000401000100000040000010000004000100201480002000000C0000020080008000200402900004000001808000400000100004008052000080200030000008000002000080100A50001000000400000100000020000010040400805280008000002000000802000100000080002004029400040100010000004000000800000400010020148000200000080000010000008020200402900004000001000000201000100004008052000080200020000004000002000080100A404010000200002000400800010000200040180804010060204020000300006000500201600402C008052020080001000010002004020080401008200C0002000030002010000180003000280100B002016004029010040100802008041002000040000800100600010000180010080000C0001800140080580100B0020148040200002000201004010081010000180008060000C000600402C0080520100802008040804000040004040000600020180003000180100B002014800020000008000001008000C000200402900004000001004000200000180004008052000080200020000004000003000080100A40001000000200000080400060001002014800020000004020001000000C0002004029000040100008000002000001800040080518000800000200800180002004028C0004010001000000C0001002014400020080024000200402900004000000800000401000100004008052000080000010080008000002000080100A400010040002000001000000400010020148000200000080200020000008000200402900004010001000000400000100004008052000080000020000004000003010080100A300010000002000003008040080518000800000100800180002004028C0004010000800000C00010020144000200000240402004029000040000010040002000001000040080528000800000200000080000010080004000200402940004000001004000400000080000020001002014A000200800080000020000004000001000080100A300018080004000001000040080518000800000200000040202004028C000400000100400020001002014600020080008000001000080100A404010000200002000401800040000600040200003000060004008040100802010500201600402C00805202008000100001000200C00020000300020100201804030082004000080001000280100B00201600402901004000080000800100601010020180410080000C00018001002000040000800140080580100B002014808020080401004020803000080000C000804000060000C0008010000200004000A00402C0080580100A4000100000040000018080002000100201480002000000C04000200000040002004028C00060000018080002000100201460003010000C000001000080100A5000100000040000010000004000000804040080528000800000200000080200020000004000200402940004000001004000400000100000020001002014A000200800080000020000008000001000080100A5000100000060000010000002000000804040080528000800000300000080000010080004000200402940004000001800000401000080000020001002014A0002000000C0400020000004000001000080100A5000100400060000010000002000000800040080528000800000200000040000020080008000200402940004000001000000201000100000040001002014A000200000080200010000008000002000080100A500010040004000000800000400000100004008052000080000020000008020002000080100A3000100000060000018080400805180008000003010000C00020040280'H</p>
<p>}</p>
<p>}</p>
<p class="heading" id="annex-b-informative-change-history">Annex B
(informative):<br />
Change history</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 2%" />
<col style="width: 4%" />
<col style="width: 51%" />
<col style="width: 7%" />
</colgroup>
<tbody>
<tr>
<td colspan="8" style="text-align: center;"><strong>Change
history</strong></td>
</tr>
<tr>
<td style="text-align: center;"><strong>Date</strong></td>
<td style="text-align: center;"><strong>Meeting</strong></td>
<td style="text-align: center;"><strong>TDoc</strong></td>
<td style="text-align: center;"><strong>CR</strong></td>
<td style="text-align: center;"><strong>Rev</strong></td>
<td style="text-align: center;"><strong>Cat</strong></td>
<td style="text-align: center;"><strong>Subject/Comment</strong></td>
<td style="text-align: center;"><strong>New version</strong></td>
</tr>
<tr>
<td style="text-align: left;">2017-08</td>
<td style="text-align: left;">RAN5#76</td>
<td style="text-align: left;">R5-174100</td>
<td style="text-align: center;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: center;">Introduction of TS 38.509.</td>
<td style="text-align: left;">0.0.1</td>
</tr>
<tr>
<td style="text-align: left;">2017-12</td>
<td style="text-align: left;">RAN5#77</td>
<td style="text-align: left;">R5-176853</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: center;">Adding technical content: UE beamlock
special conformance testing function</td>
<td style="text-align: left;">0.1.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-03</td>
<td style="text-align: left;">RAN5#78</td>
<td style="text-align: left;">R5-181211</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: center;">Text proposal to add UE test loop mode A
and B for 5GS (TP 38.509)</td>
<td style="text-align: left;">0.2.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-04</td>
<td style="text-align: left;">RAN5#78</td>
<td style="text-align: left;">R5-182071</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: center;">Text proposal to add UE functional block
diagram for UE test loop modes A and B</td>
<td style="text-align: left;">0.3.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-04</td>
<td style="text-align: left;">RAN5#78</td>
<td style="text-align: left;">R5-182070</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: center;">Update of 38.509 general sections</td>
<td style="text-align: left;">0.3.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-04</td>
<td style="text-align: left;">RAN5#78</td>
<td style="text-align: left;">R5-182037</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: center;">Text Proposal on SS-RSRPB UE
reporting</td>
<td style="text-align: left;">0.3.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-05</td>
<td style="text-align: left;">RAN5#79</td>
<td style="text-align: left;">R5-182423</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: center;">Editorial updates to 38.509</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-05</td>
<td style="text-align: left;">RAN5#79</td>
<td style="text-align: left;">R5-182354</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: center;">Text proposal to add message type ID for
UBF and SS-RSRP messages’</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-05</td>
<td style="text-align: left;">RAN5#79</td>
<td style="text-align: left;">R5-183081</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: center;">Text proposal to UE test loop modes A
and B</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-06</td>
<td style="text-align: left;">RAN#80</td>
<td style="text-align: left;">RP-181209</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: center;">put under revision control as v13.0.0
with small editorial changes</td>
<td style="text-align: left;">15.0.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-09</td>
<td style="text-align: left;">RAN#81</td>
<td style="text-align: left;">R5-185057</td>
<td style="text-align: left;">0001</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Editorial updates to 38.509</td>
<td style="text-align: left;">15.1.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-09</td>
<td style="text-align: left;">RAN#81</td>
<td style="text-align: left;">R5-185523</td>
<td style="text-align: left;">0003</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">FR2_UE_BeamlockMode_IE_38.509</td>
<td style="text-align: left;">15.1.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-12</td>
<td style="text-align: left;">RAN#82</td>
<td style="text-align: left;">R5-186863</td>
<td style="text-align: left;">0007</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Update of Test Control UE Beamlock
Function messages</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-12</td>
<td style="text-align: left;">RAN#82</td>
<td style="text-align: left;">R5-187113</td>
<td style="text-align: left;">0009</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Correction of 5GC terminology</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-12</td>
<td style="text-align: left;">RAN#82</td>
<td style="text-align: left;">R5-187684</td>
<td style="text-align: left;">0008</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Addition of Test Loop for SDAP
testing</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: left;">2018-12</td>
<td style="text-align: left;">RAN#82</td>
<td style="text-align: left;">R5-187891</td>
<td style="text-align: left;">0011</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">FR2 UE RSRPB Function 38.509</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: left;">2019-03</td>
<td style="text-align: left;">RAN#83</td>
<td style="text-align: left;">R5-191128</td>
<td style="text-align: left;">0013</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Addition of information for RESET UE
POSITIONING STORED INFORMATION message</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: left;">2019-03</td>
<td style="text-align: left;">RAN#83</td>
<td style="text-align: left;">R5-191196</td>
<td style="text-align: left;">0014</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Resolving FFS's</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: left;">2019-06</td>
<td style="text-align: left;">RAN#84</td>
<td style="text-align: left;">R5-194785</td>
<td style="text-align: left;">0017</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Correction of clause used for UE
position message definitions</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: left;">2019-06</td>
<td style="text-align: left;">RAN#84</td>
<td style="text-align: left;">R5-195334</td>
<td style="text-align: left;">0016</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Addition of NSSAI Test Mode</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: left;">2019-09</td>
<td style="text-align: left;">RAN#85</td>
<td style="text-align: left;">R5-197184</td>
<td style="text-align: left;">0018</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">B</td>
<td style="text-align: center;">Addition of NSSAI Test Mode</td>
<td style="text-align: left;">15.5.0</td>
</tr>
<tr>
<td style="text-align: left;">2019-09</td>
<td style="text-align: left;">RAN#85</td>
<td style="text-align: left;">R5-197306</td>
<td style="text-align: left;">0020</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Update to 38.509 for SS-RSRPB
report</td>
<td style="text-align: left;">15.5.0</td>
</tr>
<tr>
<td style="text-align: left;">2019-12</td>
<td style="text-align: left;">RAN#86</td>
<td style="text-align: left;">R5-199307</td>
<td style="text-align: left;">0021</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Deactivate Beamlock upon RRC
disconnected</td>
<td style="text-align: left;">15.6.0</td>
</tr>
<tr>
<td style="text-align: left;">2020-01</td>
<td style="text-align: left;">RAN#86</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: center;">Removal of duplicated rows in table
6.5.2 SS-RSRPB REPORT RESPONSE</td>
<td style="text-align: left;">15.6.1</td>
</tr>
<tr>
<td style="text-align: left;">2020-03</td>
<td style="text-align: left;">RAN#87</td>
<td style="text-align: left;">R5-200904</td>
<td style="text-align: left;">0027</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Editorial update of Beamlock
deactivation</td>
<td style="text-align: left;">15.7.0</td>
</tr>
<tr>
<td style="text-align: left;">2020-03</td>
<td style="text-align: left;">RAN#87</td>
<td style="text-align: left;">R5-201124</td>
<td style="text-align: left;">0024</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Correction to SS-RSRPB reporting</td>
<td style="text-align: left;">15.7.0</td>
</tr>
<tr>
<td style="text-align: left;">2020-03</td>
<td style="text-align: left;">RAN#87</td>
<td style="text-align: left;">R5-201207</td>
<td style="text-align: left;">0026</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">Correction to NSSAI DELETE REQUEST</td>
<td style="text-align: left;">15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td style="text-align: center;">RAN#88</td>
<td style="text-align: center;">R5-202884</td>
<td style="text-align: center;">0030</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR to 38.509 to clarify UBF for
Intra-Band Carrier Aggregation</td>
<td style="text-align: center;">15.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td style="text-align: center;">RAN#89</td>
<td style="text-align: center;">R5-204402</td>
<td style="text-align: center;">0031</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">TMC Integrity and Ciphering
Protection</td>
<td style="text-align: center;">15.9.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td style="text-align: center;">RAN#91</td>
<td style="text-align: center;">R5-211675</td>
<td style="text-align: center;">0033</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification of DRB identity in CLOSE
UE TEST LOOP message in 38.509</td>
<td style="text-align: center;">15.10.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td style="text-align: center;">RAN#91</td>
<td style="text-align: center;">R5-211549</td>
<td style="text-align: center;">0034</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Addition of UAI test function</td>
<td style="text-align: center;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td style="text-align: center;">RAN#92</td>
<td style="text-align: center;">R5-213421</td>
<td style="text-align: center;">0037</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Update UE Positioning test mode
procedures and UE Positioning messages</td>
<td style="text-align: center;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td style="text-align: center;">RAN#92</td>
<td style="text-align: center;">R5-213568</td>
<td style="text-align: center;">0035</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Addition of test mode for NR
sidelink</td>
<td style="text-align: center;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td style="text-align: center;">RAN#92</td>
<td style="text-align: center;">R5-213569</td>
<td style="text-align: center;">0036</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Addition of ProSe Packet Counter value
reporting procedure for NR sidelink</td>
<td style="text-align: center;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td style="text-align: center;">RAN#92</td>
<td style="text-align: center;">R5-213582</td>
<td style="text-align: center;">0039</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Addition of test function Set UL Message
- NR</td>
<td style="text-align: center;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td style="text-align: center;">RAN#92</td>
<td style="text-align: center;">R5-213880</td>
<td style="text-align: center;">0040</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">UE Beamlock Function update for
MIMO</td>
<td style="text-align: center;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td style="text-align: center;">RAN#93</td>
<td style="text-align: center;">R5-216069</td>
<td style="text-align: center;">0045</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Update to UE test loop mode E to trigger
SL-MIMO transmission</td>
<td style="text-align: center;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td style="text-align: center;">RAN#93</td>
<td style="text-align: center;">R5-216275</td>
<td style="text-align: center;">0044</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Addition of predefined UE capability
container for test function Set UL Message - NR</td>
<td style="text-align: center;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td style="text-align: center;">RAN#94</td>
<td style="text-align: center;">R5-217935</td>
<td style="text-align: center;">0047</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Addition of NR positioning methods
information in the RESET UE POSITIONING STORED INFORMATION message</td>
<td style="text-align: center;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td style="text-align: center;">RAN#95</td>
<td style="text-align: center;">R5-221401</td>
<td style="text-align: center;">0058</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Addition of EHC function to the test
loop mode A</td>
<td style="text-align: center;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td style="text-align: center;">RAN#95</td>
<td style="text-align: center;">R5-221410</td>
<td style="text-align: center;">0051</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Editorial update of section 6.6.2 and
6.7</td>
<td style="text-align: center;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td style="text-align: center;">RAN#95</td>
<td style="text-align: center;">R5-221430</td>
<td style="text-align: center;">0053</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Addition of test loop mode for
NE-DC</td>
<td style="text-align: center;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td style="text-align: center;">RAN#95</td>
<td style="text-align: center;">R5-221516</td>
<td style="text-align: center;">0054</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to test loop procedures for
SL test</td>
<td style="text-align: center;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td style="text-align: center;">RAN#95</td>
<td style="text-align: center;">R5-221517</td>
<td style="text-align: center;">0055</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to test protocol messages for
SL test</td>
<td style="text-align: center;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td style="text-align: center;">RAN#95</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">upgraded to Rel-17 because of Rel-17
freeze</td>
<td style="text-align: center;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td style="text-align: center;">RAN#97</td>
<td style="text-align: center;">R5-225331</td>
<td style="text-align: center;">0070</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Add Loop back mode C related description
for MBS</td>
<td style="text-align: center;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td style="text-align: center;">RAN#97</td>
<td style="text-align: center;">R5-225611</td>
<td style="text-align: center;">0066</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Rel-17 Extension of test control command
message type values reserved for 5GS</td>
<td style="text-align: center;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td style="text-align: center;">RAN#97</td>
<td style="text-align: center;">R5-225842</td>
<td style="text-align: center;">0068</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Rel-17 Addition of new test function to
limit Pcell power: Option 2</td>
<td style="text-align: center;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td style="text-align: center;">RAN#98</td>
<td style="text-align: center;">R5-227514</td>
<td style="text-align: center;">0075</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Update of Loop Mode C for MBS TC</td>
<td style="text-align: center;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td style="text-align: center;">RAN#99</td>
<td style="text-align: center;">R5-231843</td>
<td style="text-align: center;">0078</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Editorial on ACTIVATE POWER LIMIT
REQUEST test function Rel-17</td>
<td style="text-align: center;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td style="text-align: center;">RAN#100</td>
<td style="text-align: center;">R5-233380</td>
<td style="text-align: center;">0081</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Addition of MUSIM UAI test function</td>
<td style="text-align: center;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2024-03</td>
<td style="text-align: center;">RAN#103</td>
<td style="text-align: center;">R5-241492</td>
<td style="text-align: center;">0083</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction of Test Loop Mode C for MBS
broadcast</td>
<td style="text-align: center;">17.5.0</td>
</tr>
</tbody>
</table>
</body>
</html>
