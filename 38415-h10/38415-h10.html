<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>38415-h10</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#contents" id="toc-contents"><br />
Contents</a></li>
<li><a href="#foreword" id="toc-foreword"><br />
Foreword</a></li>
<li><a href="#scope" id="toc-scope"><br />
1 Scope</a></li>
<li><a href="#references" id="toc-references">2 References</a></li>
<li><a href="#definitions-and-abbreviations"
id="toc-definitions-and-abbreviations">3 Definitions and
abbreviations</a>
<ul>
<li><a href="#definitions" id="toc-definitions">3.1 Definitions</a></li>
<li><a href="#abbreviations" id="toc-abbreviations">3.2
Abbreviations</a></li>
</ul></li>
<li><a href="#general" id="toc-general">4 General</a>
<ul>
<li><a href="#general-aspects" id="toc-general-aspects">4.1 General
aspects</a></li>
</ul></li>
<li><a href="#pdu-session-user-plane-protocol"
id="toc-pdu-session-user-plane-protocol">5 PDU Session user plane
protocol</a>
<ul>
<li><a href="#general-1" id="toc-general-1">5.1 General</a></li>
<li><a href="#pdu-session-user-plane-protocol-layer-services"
id="toc-pdu-session-user-plane-protocol-layer-services">5.2 PDU Session
user plane protocol layer services</a></li>
<li><a href="#services-expected-from-the-transport-network-layer"
id="toc-services-expected-from-the-transport-network-layer">5.3 Services
expected from the Transport Network Layer</a></li>
<li><a href="#elementary-procedures" id="toc-elementary-procedures">5.4
Elementary procedures</a>
<ul>
<li><a href="#transfer-of-dl-pdu-session-information"
id="toc-transfer-of-dl-pdu-session-information">5.4.1 Transfer of DL PDU
Session Information </a>
<ul>
<li><a href="#successful-operation"
id="toc-successful-operation">5.4.1.1 Successful operation</a></li>
<li><a href="#unsuccessful-operation"
id="toc-unsuccessful-operation">5.4.1.2 Unsuccessful operation</a></li>
</ul></li>
<li><a href="#transfer-of-ul-pdu-session-information"
id="toc-transfer-of-ul-pdu-session-information">5.4.2 Transfer of UL PDU
Session Information </a>
<ul>
<li><a href="#successful-operation-1"
id="toc-successful-operation-1">5.4.2.1 Successful operation</a></li>
<li><a href="#unsuccessful-operation-1"
id="toc-unsuccessful-operation-1">5.4.2.2 Unsuccessful
operation</a></li>
</ul></li>
</ul></li>
<li><a href="#elements-for-the-pdu-session-user-plane-protocol"
id="toc-elements-for-the-pdu-session-user-plane-protocol">5.5 Elements
for the PDU Session user plane protocol</a>
<ul>
<li><a href="#general-2" id="toc-general-2">5.5.1 General</a></li>
<li><a href="#frame-format-for-the-pdu-session-user-plane-protocol"
id="toc-frame-format-for-the-pdu-session-user-plane-protocol">5.5.2
Frame format for the PDU Session user plane protocol</a>
<ul>
<li><a href="#dl-pdu-session-information-pdu-type-0"
id="toc-dl-pdu-session-information-pdu-type-0">5.5.2.1 DL PDU SESSION
INFORMATION (PDU Type 0)</a></li>
<li><a href="#ul-pdu-session-information-pdu-type-1"
id="toc-ul-pdu-session-information-pdu-type-1">5.5.2.2 UL PDU SESSION
INFORMATION (PDU Type 1)</a></li>
</ul></li>
<li><a href="#coding-of-information-elements-in-frames"
id="toc-coding-of-information-elements-in-frames">5.5.3 Coding of
information elements in frames</a>
<ul>
<li><a href="#pdu-type" id="toc-pdu-type">5.5.3.1 PDU Type</a></li>
<li><a href="#spare" id="toc-spare">5.5.3.2 Spare</a></li>
<li><a href="#qos-flow-identifier-qfi"
id="toc-qos-flow-identifier-qfi">5.5.3.3 QoS Flow Identifier
(QFI)</a></li>
<li><a href="#reflective-qos-indicator-rqi"
id="toc-reflective-qos-indicator-rqi">5.5.3.4 Reflective QoS Indicator
(RQI)</a></li>
<li><a href="#padding" id="toc-padding">5.5.3.5 Padding </a></li>
<li><a href="#paging-policy-presence-ppp"
id="toc-paging-policy-presence-ppp">5.5.3.6 Paging Policy Presence
(PPP)</a></li>
<li><a href="#paging-policy-indicator-ppi"
id="toc-paging-policy-indicator-ppi">5.5.3.7 Paging Policy Indicator
(PPI)</a></li>
<li><a href="#qos-monitoring-packet-qmp"
id="toc-qos-monitoring-packet-qmp">5.5.3.8 QoS Monitoring Packet
(QMP)</a></li>
<li><a href="#dl-sending-time-stamp"
id="toc-dl-sending-time-stamp">5.5.3.9 DL Sending Time Stamp</a></li>
<li><a href="#dl-sending-time-stamp-repeated"
id="toc-dl-sending-time-stamp-repeated">5.5.3.10 DL Sending Time Stamp
Repeated</a></li>
<li><a href="#dl-received-time-stamp"
id="toc-dl-received-time-stamp">5.5.3.11 DL Received Time Stamp</a></li>
<li><a href="#ul-sending-time-stamp"
id="toc-ul-sending-time-stamp">5.5.3.12 UL Sending Time Stamp</a></li>
<li><a href="#dl-delay-ind." id="toc-dl-delay-ind.">5.5.3.13 DL Delay
Ind.</a></li>
<li><a href="#dl-delay-result" id="toc-dl-delay-result">5.5.3.14 DL
Delay Result</a></li>
<li><a href="#ul-delay-ind." id="toc-ul-delay-ind.">5.5.3.15 UL Delay
Ind.</a></li>
<li><a href="#ul-delay-result" id="toc-ul-delay-result">5.5.3.16 UL
Delay Result</a></li>
<li><a href="#sequence-number-presence-snp"
id="toc-sequence-number-presence-snp">5.5.3.17 Sequence Number Presence
(SNP)</a></li>
<li><a href="#dl-qfi-sequence-number"
id="toc-dl-qfi-sequence-number">5.5.3.18 DL QFI Sequence Number</a></li>
<li><a href="#ul-qfi-sequence-number"
id="toc-ul-qfi-sequence-number">5.5.3.19 UL QFI Sequence Number</a></li>
<li><a href="#n3n9-delay-ind." id="toc-n3n9-delay-ind.">5.5.3.20 N3/N9
Delay Ind.</a></li>
<li><a href="#n3n9-delay-result" id="toc-n3n9-delay-result">5.5.3.21
N3/N9 Delay Result</a></li>
<li><a href="#d1-ul-pdcp-delay-result-ind"
id="toc-d1-ul-pdcp-delay-result-ind">5.5.3.22 D1 UL PDCP Delay Result
Ind</a></li>
<li><a href="#mbs-sequence-number-presence-msnp"
id="toc-mbs-sequence-number-presence-msnp">5.5.3.23 MBS Sequence Number
Presence (MSNP)</a></li>
<li><a href="#dl-mbs-qfi-sequence-number"
id="toc-dl-mbs-qfi-sequence-number">5.5.3.24 DL MBS QFI Sequence
Number</a></li>
</ul></li>
<li><a href="#timers" id="toc-timers">5.5.4 Timers</a></li>
</ul></li>
<li><a
href="#handling-of-unknown-unforeseen-and-erroneous-protocol-data"
id="toc-handling-of-unknown-unforeseen-and-erroneous-protocol-data">5.6
Handling of unknown, unforeseen and erroneous protocol data</a></li>
</ul></li>
<li><a href="#a.1-example-of-using-future-extension-field"
id="toc-a.1-example-of-using-future-extension-field">A.1 Example of
using Future Extension field</a>
<ul>
<li><a href="#a.1.1-new-ie-flags" id="toc-a.1.1-new-ie-flags">A.1.1 New
IE Flags</a></li>
</ul></li>
</ul>
</nav>
<p>3GPP TS 38.415 V17.1.0 (2023-12)</p>
<p>Technical Specification</p>
<p>3rd Generation Partnership Project;</p>
<p>Technical Specification Group Radio Access Network;</p>
<p>NG-RAN;</p>
<p>PDU Session User Plane Protocol</p>
<p>(Release 17)</p>
<p><img src="media/image1.jpeg" /> <img src="media/image2.png" /></p>
<p>The present document has been developed within the 3rd Generation
Partnership Project (3GPP <sup>TM</sup>) and may be further elaborated
for the purposes of 3GPP..<br />
The present document has not been subject to any approval process by the
3GPP Organizational Partners and shall not be implemented.<br />
This Specification is provided for future development work within 3GPP
only. The Organizational Partners accept no liability for any use of
this Specification.<br />
Specifications and Reports for implementation of the 3GPP <sup>TM</sup>
system should be obtained via the 3GPP Organizational Partners'
Publications Offices.</p>
<blockquote>
<p><em><strong>3GPP</strong></em></p>
<p>Postal address</p>
<p>3GPP support office address</p>
<p>650 Route des Lucioles - Sophia Antipolis</p>
<p>Valbonne - FRANCE</p>
<p>Tel.: +33 4 92 94 42 00 Fax: +33 4 93 65 47 16</p>
<p>Internet</p>
<p>http://www.3gpp.org</p>
</blockquote>
<p><em><strong>Copyright Notification</strong></em></p>
<p>No part may be reproduced except as authorized by written
permission.<br />
The copyright and the foregoing restriction extend to reproduction in
all media.</p>
<p>© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).</p>
<p>All rights reserved.</p>
<p>UMTS™ is a Trade Mark of ETSI registered for the benefit of its
members</p>
<p>3GPP™ is a Trade Mark of ETSI registered for the benefit of its
Members and of the 3GPP Organizational Partners<br />
LTE™ is a Trade Mark of ETSI registered for the benefit of its Members
and of the 3GPP Organizational Partners</p>
<p>GSM® and the GSM logo are registered and owned by the GSM
Association</p>
<h1 class="TT" id="contents"><br />
Contents</h1>
<p>Foreword <a href="#foreword">5</a></p>
<p>1 Scope <a href="#scope">6</a></p>
<p>2 References <a href="#references">6</a></p>
<p>3 Definitions and abbreviations <a
href="#definitions-and-abbreviations">6</a></p>
<p>3.1 Definitions <a href="#definitions">6</a></p>
<p>3.2 Abbreviations <a href="#abbreviations">6</a></p>
<p>4 General <a href="#general">7</a></p>
<p>4.1 General aspects <a href="#general-aspects">7</a></p>
<p>5 PDU Session user plane protocol <a
href="#pdu-session-user-plane-protocol">7</a></p>
<p>5.1 General <a href="#general-1">7</a></p>
<p>5.2 PDU Session user plane protocol layer services <a
href="#pdu-session-user-plane-protocol-layer-services">7</a></p>
<p>5.3 Services expected from the Transport Network Layer <a
href="#services-expected-from-the-transport-network-layer">7</a></p>
<p>5.4 Elementary procedures <a href="#elementary-procedures">7</a></p>
<p>5.4.1 Transfer of DL PDU Session Information <a
href="#transfer-of-dl-pdu-session-information">7</a></p>
<p>5.4.1.1 Successful operation <a
href="#successful-operation">7</a></p>
<p>5.4.1.2 Unsuccessful operation <a
href="#unsuccessful-operation">8</a></p>
<p>5.4.2 Transfer of UL PDU Session Information <a
href="#transfer-of-ul-pdu-session-information">8</a></p>
<p>5.4.2.1 Successful operation <a
href="#successful-operation-1">8</a></p>
<p>5.4.2.2 Unsuccessful operation <a
href="#unsuccessful-operation-1">9</a></p>
<p>5.5 Elements for the PDU Session user plane protocol <a
href="#elements-for-the-pdu-session-user-plane-protocol">9</a></p>
<p>5.5.1 General <a href="#general-2">9</a></p>
<p>5.5.2 Frame format for the PDU Session user plane protocol <a
href="#frame-format-for-the-pdu-session-user-plane-protocol">10</a></p>
<p>5.5.2.1 DL PDU SESSION INFORMATION (PDU Type 0) <a
href="#dl-pdu-session-information-pdu-type-0">10</a></p>
<p>5.5.2.2 UL PDU SESSION INFORMATION (PDU Type 1) <a
href="#ul-pdu-session-information-pdu-type-1">11</a></p>
<p>5.5.3 Coding of information elements in frames <a
href="#coding-of-information-elements-in-frames">12</a></p>
<p>5.5.3.1 PDU Type <a href="#pdu-type">12</a></p>
<p>5.5.3.2 Spare <a href="#spare">12</a></p>
<p>5.5.3.3 QoS Flow Identifier (QFI) <a
href="#qos-flow-identifier-qfi">12</a></p>
<p>5.5.3.4 Reflective QoS Indicator (RQI) <a
href="#reflective-qos-indicator-rqi">12</a></p>
<p>5.5.3.5 Padding <a href="#padding">13</a></p>
<p>5.5.3.6 Paging Policy Presence (PPP) <a
href="#paging-policy-presence-ppp">13</a></p>
<p>5.5.3.7 Paging Policy Indicator (PPI) <a
href="#paging-policy-indicator-ppi">13</a></p>
<p>5.5.3.8 QoS Monitoring Packet (QMP) <a
href="#qos-monitoring-packet-qmp">13</a></p>
<p>5.5.3.9 DL Sending Time Stamp <a
href="#dl-sending-time-stamp">13</a></p>
<p>5.5.3.10 DL Sending Time Stamp Repeated <a
href="#dl-sending-time-stamp-repeated">13</a></p>
<p>5.5.3.11 DL Received Time Stamp <a
href="#dl-received-time-stamp">14</a></p>
<p>5.5.3.12 UL Sending Time Stamp <a
href="#ul-sending-time-stamp">14</a></p>
<p>5.5.3.13 DL Delay Ind. <a href="#dl-delay-ind.">14</a></p>
<p>5.5.3.14 DL Delay Result <a href="#dl-delay-result">14</a></p>
<p>5.5.3.15 UL Delay Ind. <a href="#ul-delay-ind.">14</a></p>
<p>5.5.3.16 UL Delay Result <a href="#ul-delay-result">14</a></p>
<p>5.5.3.17 Sequence Number Presence (SNP) <a
href="#sequence-number-presence-snp">15</a></p>
<p>5.5.3.18 DL QFI Sequence Number <a
href="#dl-qfi-sequence-number">15</a></p>
<p>5.5.3.19 UL QFI Sequence Number <a
href="#ul-qfi-sequence-number">15</a></p>
<p>5.5.3.20 N3/N9 Delay Ind. <a href="#n3n9-delay-ind.">15</a></p>
<p>5.5.3.21 N3/N9 Delay Result <a href="#n3n9-delay-result">15</a></p>
<p>5.5.3.22 D1 UL PDCP Delay Result Ind <a
href="#d1-ul-pdcp-delay-result-ind">15</a></p>
<p>5.5.3.23 MBS Sequence Number Presence (MSNP) <a
href="#mbs-sequence-number-presence-msnp">15</a></p>
<p>5.5.3.24 DL MBS QFI Sequence Number <a
href="#dl-mbs-qfi-sequence-number">16</a></p>
<p>5.5.4 Timers <a href="#timers">16</a></p>
<p>5.6 Handling of unknown, unforeseen and erroneous protocol data <a
href="#handling-of-unknown-unforeseen-and-erroneous-protocol-data">16</a></p>
<p>Annex A (informative): Example of using Future Extension Field <a
href="#annex-a-informative-example-of-using-future-extension-field">17</a></p>
<p>A.1 Example of using Future Extension field <a
href="#a.1-example-of-using-future-extension-field">17</a></p>
<p>A.1.1 New IE Flags <a href="#a.1.1-new-ie-flags">17</a></p>
<p>Annex B (informative): Change history <a
href="#annex-b-informative-change-history">18</a></p>
<h1 id="foreword"><br />
Foreword</h1>
<p>This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).</p>
<p>The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:</p>
<p>Version x.y.z</p>
<p>where:</p>
<p>x the first digit:</p>
<p>1 presented to TSG for information;</p>
<p>2 presented to TSG for approval;</p>
<p>3 or greater indicates TSG approved document under change
control.</p>
<p>y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.</p>
<p>z the third digit is incremented when editorial only changes have
been incorporated in the document.</p>
<h1 id="scope"><br />
1 Scope</h1>
<p>The present document specifies the PDU Session user plane protocol
being used over the NG-U, Xn-U and N9 interfaces. Applicability to other
interfaces is not precluded.</p>
<h1 id="references">2 References</h1>
<p>The following documents contain provisions which, through reference
in this text, constitute provisions of the present document.</p>
<p>- References are either specific (identified by date of publication,
edition number, version number, etc.) or non‑specific.</p>
<p>- For a specific reference, subsequent revisions do not apply.</p>
<p>- For a non-specific reference, the latest version applies. In the
case of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document <em>in the same Release as the present document</em>.</p>
<p>[1] 3GPP TR 21.905: "Vocabulary for 3GPP Specifications".</p>
<p>[2] 3GPP TS 38.300: "NextGen Radio Access Network (NG-RAN); Overall
description; Stage 2".</p>
<p>[3] 3GPP TS 29.281: "General Packet Radio System (GPRS) Tunnelling
Protocol User Plane (GTPv1-U)".</p>
<blockquote>
<p>[4] 3GPP TS 37.324: "E-UTRA and NR; Service Data Application Protocol
(SDAP) specification".</p>
</blockquote>
<p>[5] 3GPP TS 23.501: "System Architecture for the 5G System; Stage
2".</p>
<p>[6] IETF RFC 5905 (2010-06): "Network Time Protocol Version 4:
Protocol and Algorithms Specification".</p>
<p>[7] 3GPP TS 38.413: "NG-RAN; NG Application Protocol (NGAP)".</p>
<h1 id="definitions-and-abbreviations">3 Definitions and
abbreviations</h1>
<h2 id="definitions">3.1 Definitions</h2>
<p>For the purposes of the present document, the terms and definitions
given in 3GPP TR 21.905 [1] and the following apply. A term defined in
the present document takes precedence over the definition of the same
term, if any, in 3GPP TR 21.905 [1].</p>
<p><strong>Multicast Broadcast User Plane Function</strong>: as defined
in TS 23.501 [5].</p>
<p><strong>NG-U</strong>: as defined in TS 38.300 [2].</p>
<p><strong>Xn-U</strong>: logical interface between NG-RAN nodes as
defined in TS 38.300 [2].</p>
<h2 id="abbreviations">3.2 Abbreviations</h2>
<p>For the purposes of the present document, the abbreviations given in
3GPP TR 21.905 [1] and the following apply. An abbreviation defined in
the present document takes precedence over the definition of the same
abbreviation, if any, in 3GPP TR 21.905 [1].</p>
<p>MBS Multicast Broadcast Service</p>
<p>MB-UPF Multicast Broadcast User Plane Function</p>
<p>PDCP Packet Data Convergence Protocol</p>
<p>PPI Paging Policy Indicator</p>
<p>PPP Paging Policy Presence</p>
<p>QFI QoS Flow Identifier</p>
<p>RQA Reflective QoS Attribute</p>
<p>RQI Reflective QoS Indication</p>
<p>SN Sequence Number</p>
<p>UP User Plane</p>
<p>UPF User Plane Function</p>
<h1 id="general">4 General</h1>
<h2 id="general-aspects">4.1 General aspects</h2>
<p>The PDU Session User Plane protocol is located in the User Plane of
the Radio Network Layer above the Transport Network Layer of the
interface.</p>
<p>Each PDU session User Plane protocol instance is associated to one
PDU Session.</p>
<p>In this version of the present document, the PDU session user plane
protocol data is conveyed by GTP-U protocol means, more specifically, by
means of the "PDU Session Container" GTP-U Extension Header as defined
in TS 29.281 [3].</p>
<h1 id="pdu-session-user-plane-protocol">5 PDU Session user plane
protocol</h1>
<h2 id="general-1">5.1 General</h2>
<p>The PDU session UP layer uses the services of the Transport Network
Layer in order to send its packets over the interface.</p>
<h2 id="pdu-session-user-plane-protocol-layer-services">5.2 PDU Session
user plane protocol layer services</h2>
<p>The following functions are provided by the PDU Session User Plane
protocol:</p>
<p>- Provision of control information elements (e.g. QFI, RQI)
associated with a PDU session.</p>
<h2 id="services-expected-from-the-transport-network-layer">5.3 Services
expected from the Transport Network Layer</h2>
<p>The PDU session UP layer expects the following services from the
Transport Network Layer:</p>
<p>- Transfer of PDU session User Plane PDUs.</p>
<h2 id="elementary-procedures">5.4 Elementary procedures</h2>
<h3 id="transfer-of-dl-pdu-session-information">5.4.1 Transfer of DL PDU
Session Information </h3>
<h4 id="successful-operation">5.4.1.1 Successful operation</h4>
<p>The purpose of the Transfer of DL PDU Session Information procedure
is to send control information elements related to the PDU Session from
UPF to NG-RAN.</p>
<p>In the case of uplink and downlink data forwarding the DL PDU Session
Information procedure shall also be used to send control information
elements related to the PDU Session from NG-RAN node to UPF, or from UPF
to NG-RAN node, or between NG-RAN nodes.</p>
<p>A PDU Session user plane instance making use of the Transfer of DL
PDU Session Information procedure is associated to a single PDU Session.
The Transfer of DL PDU Session Information procedure may be invoked
whenever packets for that particular PDU Session need to be transferred
across the related interface instance.</p>
<p>The DL PDU SESSION INFORMATION frame includes a QoS Flow Identifier
(QFI) field associated with the transferred packet. The NG-RAN shall use
the received QFI to determine the QoS flow and QoS profile which are
associated with the received packet.</p>
<p>The DL PDU SESSION INFORMATION frame shall include the Reflective QoS
Indicator (RQI) field to indicate whether user plane Reflective QoS
shall be activated or not. The NG-RAN shall, if RQA has been configured
for the involved QoS flow as specified in TS 38.413 [7], take the RQI
into account as specified in TS 37.324 [4].</p>
<p>The DL PDU SESSION INFORMATION frame may also include a Paging Policy
Indicator (PPI) field associated with the transferred packet. The NG-RAN
shall use the received PPI to determine the paging policy
differentiation which is associated with the received packet as
described in TS 23.501 [5].</p>
<p>The DL PDU SESSION INFORMATION frame may also include a QoS
Monitoring Packet (QMP) field and a DL sending time stamp field. The
NG-RAN shall, if QoS monitoring has been configured for the included QFI
field, perform delay measurement and QoS monitoring, as specified in TS
23.501 [5].</p>
<p>The DL PDU SESSION INFORMATION frame may also include a DL QFI
Sequence Number field associated with the transferred packet. The NG-RAN
shall, if the QoS flow has been configured eligible for redundant
transport bearer in TS 38.413 [6], use the received DL QFI Sequence
Number field to determine and eliminate duplicated packets for a given
QoS flow as specified in TS 23.501 [5].</p>
<p>The DL PDU SESSION INFORMATION frame may also include a DL MBS QFI
Sequence Number field associated with the transferred packet. The NG-RAN
shall use the received DL MBS QFI Sequence Number field to determine the
PDCP count that should be used when transferring the packet over the
radio as specified in TS 38.300 [2].</p>
<p>When needed, the NG-RAN shall propagate the DL PDU Session
Information to a peer NG-RAN.</p>
<p><img src="media/image3.svg" /></p>
<p>Figure 5.4.1.1-1: Successful Transfer of DL PDU Session
Information</p>
<h4 id="unsuccessful-operation">5.4.1.2 Unsuccessful operation</h4>
<p>Void.</p>
<h3 id="transfer-of-ul-pdu-session-information">5.4.2 Transfer of UL PDU
Session Information </h3>
<h4 id="successful-operation-1">5.4.2.1 Successful operation</h4>
<p>The purpose of the Transfer of UL PDU Session Information procedure
is to send control information elements related to the PDU Session from
NG-RAN to UPF.</p>
<p>An UL PDU Session user plane instance making use of the Transfer of
UL PDU Session Information procedure is associated to a single PDU
Session. The Transfer of UL PDU Session Information procedure may be
invoked whenever packets for that particular PDU Session need to be
transferred across the related interface instance.</p>
<p>The UL PDU SESSION INFORMATION frame includes a QoS Flow Identifier
(QFI) field associated with the transferred packet.</p>
<p>If QoS monitoring has been requested for the included QFI field, the
UL PDU SESSION INFORMATION frame may include a QoS Monitoring Packet
(QMP) field, a DL Sending Time Stamp Repeated field, a DL Receiving Time
Stamp field, a UL Sending Time Stamp field, and/or Delay Result for UL
or DL. If QoS monitoring with N3/N9 delay reporting has been requested
for the included QFI field, the I-UPF may include in the UL PDU SESSION
INFORMATION frame a N3/N9 Delay Ind. field, a N3/N9 Delay Result field
and delay result for UL and DL if received from the RAN. The UPF shall,
if supported, use this information to calculate UL, DL, or RTT delay as
specified in TS 23.501 [5].</p>
<p>The UL PDU SESSION INFORMATION frame may also include a UL QFI
Sequence Number field associated with the transferred packet. The UPF
shall, if the QoS flow has been configured eligible for redundant
transport bearer in TS 38.413 [6], use the received UL QFI Sequence
Number field to determine and eliminate duplicated packets for a given
QoS flow as specified in TS 23.501 [5].</p>
<p><img src="media/image4.svg" /></p>
<p>Figure 5.4.2.1-1: Successful Transfer of UL PDU Session
Information</p>
<h4 id="unsuccessful-operation-1">5.4.2.2 Unsuccessful operation</h4>
<p>Void.</p>
<h2 id="elements-for-the-pdu-session-user-plane-protocol">5.5 Elements
for the PDU Session user plane protocol</h2>
<h3 id="general-2">5.5.1 General</h3>
<p>In the present document the structure of frames are specified by
using figures similar to figure 5.5.1-1.</p>
<table style="width:88%;">
<colgroup>
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr>
<td colspan="8" style="text-align: center;">Bits</td>
<td rowspan="2" style="text-align: center;"><blockquote>
<p>Number of Octets</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">7</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
</tr>
<tr>
<td colspan="4" style="text-align: center;">Field 1</td>
<td colspan="4" style="text-align: center;">Field 2</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td colspan="6" style="text-align: center;">Field 3</td>
<td colspan="2" style="text-align: center;">Field 4</td>
<td rowspan="2" style="text-align: center;">2</td>
</tr>
<tr>
<td colspan="4" style="text-align: center;">Field 4 continue</td>
<td colspan="4" style="text-align: center;">Spare</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">Field 6</td>
<td rowspan="2" style="text-align: center;">2</td>
</tr>
<tr>
<td colspan="4" style="text-align: center;">Field 6 continue</td>
<td colspan="4" style="text-align: center;">Padding bits</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">Future Extension</td>
<td style="text-align: center;">0-m</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">Padding</td>
<td style="text-align: center;">0-3</td>
</tr>
</tbody>
</table>
<p>Figure 5.5.1-1: Example frame format</p>
<p>Unless otherwise indicated, fields which consist of multiple bits
within an octet have the most significant bit located at the higher bit
position (indicated above frame in figure 5.5.1-1). In addition, if a
field spans several octets, most significant bits are located in lower
numbered octets (right of frame in figure 5.5.1-1).</p>
<p>On the NG interface, the frame is transmitted starting from the
lowest numbered octet. Within each octet, the bits are sent according to
decreasing bit position (bit position 7 first).</p>
<p>Spare bits should be set to "0" by the sender and should not be
checked by the receiver.</p>
<p>The header part of the frame is always an integer number of octets.
The payload part is octet aligned (by adding 'Padding Bits' when
needed).</p>
<p>The receiver should be able to remove an additional Future Extension
field that may be present.<br />
See description of Future Extension field in A.1.</p>
<p>Padding octets may be added at the end of the frame, see Padding in
5.5.3.5.</p>
<h3 id="frame-format-for-the-pdu-session-user-plane-protocol">5.5.2
Frame format for the PDU Session user plane protocol</h3>
<h4 id="dl-pdu-session-information-pdu-type-0">5.5.2.1 DL PDU SESSION
INFORMATION (PDU Type 0)</h4>
<p>This frame format is defined to allow the NG-RAN to receive some
control information elements which are associated with the transfer of a
packet over the interface.</p>
<p>The following shows the respective DL PDU SESSION INFORMATION
frame.</p>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 11%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 18%" />
</colgroup>
<tbody>
<tr>
<td colspan="8" style="text-align: center;">Bits</td>
<td rowspan="2" style="text-align: center;"><blockquote>
<p>Number of Octets</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">7</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
</tr>
<tr>
<td colspan="4" style="text-align: center;">PDU Type (=0)</td>
<td style="text-align: center;">QMP</td>
<td style="text-align: center;">SNP</td>
<td style="text-align: center;">MSNP</td>
<td style="text-align: center;">Spare</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;">PPP</td>
<td style="text-align: center;">RQI</td>
<td colspan="6" style="text-align: center;">QoS Flow Identifier</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td colspan="3" style="text-align: center;">PPI</td>
<td colspan="5" style="text-align: center;">Spare</td>
<td style="text-align: center;">0 or 1</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">DL Sending Time Stamp</td>
<td style="text-align: center;">0 or 8</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">DL QFI Sequence Number</td>
<td style="text-align: center;">0 or 3</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">DL MBS QFI Sequence
Number</td>
<td style="text-align: center;">0 or 4</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">Padding</td>
<td style="text-align: center;">0-3</td>
</tr>
</tbody>
</table>
<p>Figure 5.5.2.1-1: DL PDU SESSION INFORMATION (PDU Type 0) Format</p>
<h4 id="ul-pdu-session-information-pdu-type-1">5.5.2.2 UL PDU SESSION
INFORMATION (PDU Type 1)</h4>
<p>This frame format is defined to allow the UPF to receive some control
information elements which are associated with the transfer of a packet
over the interface.</p>
<p>The following shows the respective UL PDU SESSION INFORMATION
frame.</p>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 18%" />
</colgroup>
<tbody>
<tr>
<td colspan="8" style="text-align: center;">Bits</td>
<td rowspan="2" style="text-align: center;"><blockquote>
<p>Number of Octets</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">7</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
</tr>
<tr>
<td colspan="4" style="text-align: center;">PDU Type (=1)</td>
<td style="text-align: center;">QMP</td>
<td style="text-align: center;">DL Delay Ind.</td>
<td style="text-align: center;">UL Delay Ind.</td>
<td style="text-align: center;">SNP</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;">N3/N9 Delay Ind.</td>
<td style="text-align: center;">New IE Flag</td>
<td colspan="6" style="text-align: center;">QoS Flow Identifier</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">DL Sending Time Stamp
Repeated</td>
<td style="text-align: center;">0 or 8</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">DL Received Time Stamp</td>
<td style="text-align: center;">0 or 8</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">UL Sending Time Stamp</td>
<td style="text-align: center;">0 or 8</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">DL Delay Result</td>
<td style="text-align: center;">0 or 4</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">UL Delay Result</td>
<td style="text-align: center;">0 or 4</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">UL QFI Sequence Number</td>
<td style="text-align: center;">0 or 3</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">N3/N9 Delay Result</td>
<td style="text-align: center;">0 or 4</td>
</tr>
<tr>
<td style="text-align: center;">New IE flag 7(E)</td>
<td style="text-align: center;">New IE Flag 6</td>
<td style="text-align: center;">New IE Flag 5</td>
<td style="text-align: center;">New IE Flag 4</td>
<td style="text-align: center;">New IE Flag 3</td>
<td style="text-align: center;">New IE Flag 2</td>
<td style="text-align: center;">New IE Flag 1</td>
<td style="text-align: center;">New IE Flag 0</td>
<td style="text-align: center;"><p>0 or 1</p>
<p>New IE</p>
<p>Flags</p>
<p>Octet</p></td>
</tr>
<tr>
<td colspan="7" style="text-align: center;">Spare</td>
<td style="text-align: center;">D1 UL PDCPDelay Result Ind</td>
<td style="text-align: center;">0 or 1</td>
</tr>
<tr>
<td colspan="8" style="text-align: center;">Padding</td>
<td style="text-align: center;">0-3</td>
</tr>
</tbody>
</table>
<p>Figure 5.5.2.2-1: UL PDU SESSION INFORMATION (PDU Type 1) Format</p>
<p>The New IE Flag in bit 6 of 2<sup>nd</sup> octet in UL PDU SESSION
INFORMATION (PDU Type 1) indicates if the first octet of New IE Flags
Octet is present or not.</p>
<p>Bit 0 of New IE Flags Octet in UL PDU SESSION INFORMATION (PDU Type
1) indicates if the D1 UL PDCP Delay Result Ind is present (1) or not
(0)</p>
<h3 id="coding-of-information-elements-in-frames">5.5.3 Coding of
information elements in frames</h3>
<h4 id="pdu-type">5.5.3.1 PDU Type</h4>
<p><strong>Description:</strong> The PDU Type indicates the structure of
the PDU session UP frame. The field takes the value of the PDU Type it
identifies; i.e. "0" for PDU Type 0. The PDU type is in bit 4 to bit 7
in the first octet of the frame.</p>
<p><strong>Value range:</strong> {0= DL PDU SESSION INFORMATION, 1=UL
PDU SESSION INFORMATION, 2-15=reserved for future PDU type
extensions}.</p>
<p><strong>Field length:</strong> 4 bits.</p>
<h4 id="spare">5.5.3.2 Spare</h4>
<p><strong>Description:</strong> The spare field is set to "0" by the
sender and should not be interpreted by the receiver. This field is
reserved for later versions.</p>
<p><strong>Value range:</strong> (0–2<sup>n</sup>-1).</p>
<p><strong>Field Length:</strong> n bits.</p>
<h4 id="qos-flow-identifier-qfi">5.5.3.3 QoS Flow Identifier (QFI)</h4>
<p><strong>Description:</strong> When present this parameter indicates
the QoS Flow Identifier of the QoS flow to which the transferred packet
belongs.</p>
<p><strong>Value range:</strong> {0..2<sup>6</sup>-1}.</p>
<p><strong>Field length:</strong> 6 bits.</p>
<h4 id="reflective-qos-indicator-rqi">5.5.3.4 Reflective QoS Indicator
(RQI)</h4>
<p><strong>Description:</strong> This parameter indicates activation of
the reflective QoS towards the UE for the transferred packet as
described in clause 5.4.1.1. It is used only in the downlink direction.
If RQA (Reflective QoS Activation) has not been configured for the
involved QoS flow, the RQI shall be ignored by the NG-RAN node.</p>
<p><strong>Value range:</strong> {0= Reflective QoS activation not
triggered, 1= Reflective QoS activation triggered}.</p>
<p><strong>Field length:</strong> 1 bit.</p>
<h4 id="padding">5.5.3.5 Padding </h4>
<p><strong>Description:</strong> The padding is included at the end of
the frame to ensure that the PDU Session user plane protocol PDU length
(including padding and the future extension) is (n*4– 2) octets, where n
is a positive integer. If there is any future extension, the padding
should be added after the future extensions.</p>
<p><strong>Field Length:</strong> 0–3 octets.</p>
<h4 id="paging-policy-presence-ppp">5.5.3.6 Paging Policy Presence
(PPP)</h4>
<p><strong>Description:</strong> This parameter indicates the presence
of the Paging Policy Indicator (PPI).</p>
<p><strong>Value range:</strong> {0= Paging Policy Indicator not
present, 1= Paging Policy Indicator present}.</p>
<p><strong>Field length:</strong> 1 bit.</p>
<h4 id="paging-policy-indicator-ppi">5.5.3.7 Paging Policy Indicator
(PPI)</h4>
<p><strong>Description:</strong> When present, the Paging Policy
Indicator is used for paging policy differentiation (see details in 3GPP
TS 23.501 [5]). This field applies to PDU sessions of IP type.</p>
<p><strong>Value range:</strong> {0..2<sup>3</sup>-1}.</p>
<p><strong>Field length:</strong> 3 bits.</p>
<h4 id="qos-monitoring-packet-qmp">5.5.3.8 QoS Monitoring Packet
(QMP)</h4>
<p><strong>Description:</strong> This parameter indicates that the
transferred packet is used for QoS monitoring as described in clause
5.4.1.1 and clause 5.4.2.1. This parameter also indicates the presence
of the DL Sending Time Stamp in the DL PDU Session Information frame and
the presence of the DL Sending Time Stamp Repeated, the DL Receiving
Time Stamp, the UL Sending Time Stamp in the UL PDU Session Information
frame. If QoS monitoring has not been configured for the involved QoS
flow, the QMP shall be ignored by the NG-RAN node.</p>
<p><strong>Value range:</strong> {0= not used for QoS monitoring, 1=
used for QoS monitoring}.</p>
<p><strong>Field length:</strong> 1 bit.</p>
<h4 id="dl-sending-time-stamp">5.5.3.9 DL Sending Time Stamp</h4>
<p><strong>Description:</strong> This field indicates the time when the
UPF sends the DL PDU Session Information frame with the QMP field set to
1. It is used only in the downlink direction and encoded in the same
format as the 64-bit timestamp format as defined in Section 6 of IETF
RFC 5905 [6].</p>
<p><strong>Value range:</strong> {0..2<sup>64</sup>-1}.</p>
<p><strong>Field length:</strong> 8 octets.</p>
<h4 id="dl-sending-time-stamp-repeated">5.5.3.10 DL Sending Time Stamp
Repeated</h4>
<p><strong>Description:</strong> This field indicates the value of the
DL Sending Time Stamp field that the NG-RAN has received in the DL PDU
Session Information frame with the QMP field set to 1 for the involved
QoS flow. It is used only in the uplink direction and encoded in the
same format as the 64-bit timestamp format as defined in Section 6 of
IETF RFC 5905 [6]. The UPF shall, if supported, use this information to
calculate DL or RTT delay between the NG-RAN and the UPF as specified in
TS 23.501 [5].</p>
<p><strong>Value range:</strong> {0..2<sup>64</sup>-1}.</p>
<p><strong>Field length:</strong> 8 octets.</p>
<h4 id="dl-received-time-stamp">5.5.3.11 DL Received Time Stamp</h4>
<p><strong>Description:</strong> This field indicates the time when the
NG-RAN node receives the DL PDU Session Information frame with the QMP
field set to 1 for the involved QoS flow. It is used only in the uplink
direction and encoded in the same format as the 64-bit timestamp format
as defined in Section 6 of IETF RFC 5905 [6]. The UPF shall, if
supported, use this information to calculate DL or RTT delay between the
NG-RAN and the UPF as specified in TS 23.501 [5].</p>
<p><strong>Value range:</strong> {0..2<sup>64</sup>-1}.</p>
<p><strong>Field length:</strong> 8 octets.</p>
<h4 id="ul-sending-time-stamp">5.5.3.12 UL Sending Time Stamp</h4>
<p><strong>Description:</strong> This field indicates the time when the
NG-RAN node sends this UL PDU Session Information frame. It is used only
in the uplink direction and encoded in the same format as the 64-bit
timestamp format as defined in Section 6 of IETF RFC 5905 [6]. The UPF
shall, if supported, use this information to calculate UL or RTT delay
between the NG-RAN and the UPF as specified in TS 23.501 [5].</p>
<p><strong>Value range:</strong> {0..2<sup>64</sup>-1}.</p>
<p><strong>Field length:</strong> 8 octets.</p>
<h4 id="dl-delay-ind.">5.5.3.13 DL Delay Ind.</h4>
<p><strong>Description:</strong> This parameter indicates the presence
of DL Delay Result.</p>
<p><strong>Value range:</strong> {0= DL Delay Result not present, 1= DL
Delay Result present}.</p>
<p><strong>Field length:</strong> 1 bit.</p>
<h4 id="dl-delay-result">5.5.3.14 DL Delay Result</h4>
<p><strong>Description:</strong> This field indicates the downlink delay
measurement result which is the sum of the delay incurred in NG-RAN
(including the delay at gNB-CU-UP, on F1-U and on gNB-DU) and the delay
over Uu interface in milliseconds for the involved QoS flow. It is used
only in the uplink direction and encoded as an Unsigned32 binary integer
value. The UPF shall, if supported, use this information to calculate DL
or RTT delay as specified in TS 23.501 [5].</p>
<p><strong>Value range:</strong> {0..2<sup>32</sup>-1}.</p>
<p><strong>Field length:</strong> 4 octets.</p>
<h4 id="ul-delay-ind.">5.5.3.15 UL Delay Ind.</h4>
<p><strong>Description:</strong> This parameter indicates the presence
of UL Delay Result.</p>
<p><strong>Value range:</strong> {0= UL Delay Result not present, 1= UL
Delay Result present}.</p>
<p><strong>Field length:</strong> 1 bit.</p>
<h4 id="ul-delay-result">5.5.3.16 UL Delay Result</h4>
<p><strong>Description:</strong> This field indicates the uplnk delay
measurement result which is the sum of the delay incurred in NG-RAN
(including the delay at gNB-CU-UP, on F1-U and on gNB-DU), the delay
over Uu interface and the delay in the UE in milliseconds for the
involved QoS flow. It is used only in the uplink direction and encoded
as an Unsigned32 binary integer value. The UPF shall, if supported, use
this information to calculate UL or RTT delay as specified in TS 23.501
[5].</p>
<p><strong>Value range:</strong> {0..2<sup>32</sup>-1}.</p>
<p><strong>Field length:</strong> 4 octets.</p>
<h4 id="sequence-number-presence-snp">5.5.3.17 Sequence Number Presence
(SNP)</h4>
<p><strong>Description:</strong> This parameter indicates the presence
of the DL QFI Sequence Number in the DL PDU Session Information frame or
the presence of the UL QFI Sequence Number in the UL PDU Session
Information frame.</p>
<p><strong>Value range:</strong> {0= DL/UL QFI Sequence Number not
present, 1= DL/UL QFI Sequence Number present}.</p>
<p><strong>Field length:</strong> 1 bit.</p>
<h4 id="dl-qfi-sequence-number">5.5.3.18 DL QFI Sequence Number</h4>
<p><strong>Description:</strong> This parameter indicates the sequence
number as assigned by the UPF associated with a given QoS Flow.</p>
<p><strong>Value range:</strong> {0..2<sup>24</sup>-1}.</p>
<p><strong>Field length:</strong> 3 octets.</p>
<h4 id="ul-qfi-sequence-number">5.5.3.19 UL QFI Sequence Number</h4>
<p><strong>Description:</strong> This parameter indicates the sequence
number as assigned by the NG-RAN node associated with a given QoS
flow.</p>
<p><strong>Value range:</strong> {0..2<sup>24</sup>-1}.</p>
<p><strong>Field length:</strong> 3 octets.</p>
<h4 id="n3n9-delay-ind.">5.5.3.20 N3/N9 Delay Ind.</h4>
<p><strong>Description:</strong> This parameter indicates the presence
of N3/N9 Delay Result.</p>
<p><strong>Value range:</strong> {0= N3/N9 Delay Result not present, 1=
N3/N9 Delay Result present}.</p>
<p><strong>Field length:</strong> 1 bit.</p>
<h4 id="n3n9-delay-result">5.5.3.21 N3/N9 Delay Result</h4>
<p><strong>Description:</strong> This field indicates the accumulated N3
and N9 packet delay as specified in [5], and is reported by the I-UPF.
The reported value is expressed in milliseconds and encoded as an
Unsigned32 binary integer value.</p>
<p><strong>Value range:</strong> {0..2<sup>32</sup>-1}.</p>
<p><strong>Field length:</strong> 4 octets.</p>
<h4 id="d1-ul-pdcp-delay-result-ind">5.5.3.22 D1 UL PDCP Delay Result
Ind</h4>
<p><strong>Description:</strong> This parameter indicates if the UL
Delay Result includes or not includes the D1 measurement (UL PDCP Packet
Average Delay). This parameter shall be ignored if the UL Delay Ind is
set to “0”.</p>
<p><strong>Value range:</strong> {0= D1 UL PDCP Packet Average Delay
measurement is not included, 1= D1 UL PDCP Packet Average Delay
measurement is included}.</p>
<p><strong>Field length:</strong> 1 bit.</p>
<h4 id="mbs-sequence-number-presence-msnp">5.5.3.23 MBS Sequence Number
Presence (MSNP)</h4>
<p><strong>Description:</strong> This parameter indicates the presence
of the DL MBS QFI Sequence Number in the DL PDU Session Information
frame.</p>
<p><strong>Value range:</strong> {0= DL MBS QFI Sequence Number not
present, 1= DL MBS QFI Sequence Number present}.</p>
<p><strong>Field length:</strong> 1 bit.</p>
<h4 id="dl-mbs-qfi-sequence-number">5.5.3.24 DL MBS QFI Sequence
Number</h4>
<p><strong>Description:</strong> This parameter indicates the sequence
number as assigned by the MB-UPF associated with a given MBS QoS
Flow.</p>
<p><strong>Value range:</strong> {0..2<sup>32</sup>-1}.</p>
<p><strong>Field length:</strong> 4 octets.</p>
<h3 id="timers">5.5.4 Timers</h3>
<p>Void.</p>
<h2 id="handling-of-unknown-unforeseen-and-erroneous-protocol-data">5.6
Handling of unknown, unforeseen and erroneous protocol data</h2>
<p>Void.</p>
<p class="heading"
id="annex-a-informative-example-of-using-future-extension-field"><br />
Annex A (informative):<br />
Example of using Future Extension Field</p>
<h1 id="a.1-example-of-using-future-extension-field">A.1 Example of
using Future Extension field</h1>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr>
<th>New IE flag 7(E)</th>
<th><p>New IE flag</p>
<p>6</p></th>
<th><p>New IE flag</p>
<p>5</p></th>
<th><p>New IE flag</p>
<p>4</p></th>
<th><p>New IE flag</p>
<p>3</p></th>
<th><p>New IE flag</p>
<p>2</p></th>
<th><p>New IE flag</p>
<p>1</p></th>
<th><p>New IE flag</p>
<p>0</p></th>
<th><p>1 Octet</p>
<p>New IE Flags</p></th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="8">New IE 1</td>
<td>3 Octets</td>
</tr>
<tr>
<td colspan="8">New IE 2</td>
<td>2 Octets</td>
</tr>
</tbody>
</table>
<p>Figure A.1-1: Example of future Extension Field</p>
<p>In the Example of the future Extension Field, New IE flag 0 indicates
if the New IE 1 is present or not. New IE flag 1 indicates if the new IE
2 is present or not.</p>
<h2 id="a.1.1-new-ie-flags">A.1.1 New IE Flags</h2>
<p><strong>Description:</strong> The <em>New IE Flags</em> IE is only
present if at least one new IE is present. The <em>New IE Flags</em> IE
contains flags indicating which new IEs that are present following the
<em>New IE Flags</em> IE. The last bit position of the <em>New IE
Flags</em> IE is used as the Extension Flag to allow the extension of
the <em>New IE Flags</em> IE in the future. Extension octets of the
<em>New IE Flags</em> IE shall follow directly after the first octet of
the <em>New IE Flags</em> IE. When an extension octet of the <em>New IE
Flags</em> IE is present, then all previous extension octets of the
<em>New IE Flags</em> IE and the <em>New IE Flags</em> IE shall also be
present, even if they have all their flag bits indicating no presence of
their respective new IEs.</p>
<p class="heading" id="annex-b-informative-change-history"><br />
Annex B (informative):<br />
Change history</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 50%" />
<col style="width: 7%" />
</colgroup>
<tbody>
<tr>
<td colspan="8" style="text-align: center;"><strong>Change
history</strong></td>
</tr>
<tr>
<td style="text-align: center;"><strong>Date</strong></td>
<td style="text-align: center;"><strong>Meeting</strong></td>
<td style="text-align: center;"><strong>TDoc</strong></td>
<td style="text-align: center;"><strong>CR</strong></td>
<td style="text-align: center;"><strong>Rev</strong></td>
<td style="text-align: center;"><strong>Cat</strong></td>
<td style="text-align: center;"><strong>Subject/Comment</strong></td>
<td style="text-align: center;"><strong>New version</strong></td>
</tr>
<tr>
<td style="text-align: center;">2018-04</td>
<td style="text-align: center;">R3#99bis</td>
<td style="text-align: center;">R3-181720</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">TS skeleton.</td>
<td style="text-align: center;">0.0.1</td>
</tr>
<tr>
<td style="text-align: center;">2018-04</td>
<td style="text-align: center;">R3#99bis</td>
<td style="text-align: center;">R3-182525</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Integration of R3-182399 with sections 4
and 5 and annex A1.</td>
<td style="text-align: center;">0.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-05</td>
<td style="text-align: center;">R3#100</td>
<td style="text-align: center;">R3-183594</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Integration of R3-182619 to remove
editor's notes, remove FFS and fix some editorials; integration of
R3-183413 introducing PDU type for downlink and uplink; removing the FFS
of uplink frame type in line with R3-182619 for downlink frame type;
integration of R3-183000 solving the FFS on QFI.</td>
<td style="text-align: center;">0.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-06</td>
<td style="text-align: center;">RAN#80</td>
<td style="text-align: center;">RP-180740</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">For approval.</td>
<td style="text-align: center;">1.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-06</td>
<td style="text-align: center;">RAN#80</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Specification approved at TSG-RAN and
placed under change control</td>
<td style="text-align: center;">15.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-09</td>
<td style="text-align: center;">RAN#81</td>
<td style="text-align: center;">RP-181922</td>
<td style="text-align: center;">0001</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">NR Corrections (38.415 Baseline CR
covering RAN3#101 agreements)</td>
<td style="text-align: center;">15.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-12</td>
<td style="text-align: center;">RAN#82</td>
<td style="text-align: center;">RP-182446</td>
<td style="text-align: center;">0003</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Rapporteur’s CR for TS38.415</td>
<td style="text-align: center;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td style="text-align: center;">RAN#87-e</td>
<td style="text-align: center;">RP-200425</td>
<td style="text-align: center;">0012</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">E2E delay measurement for QoS monitoring
for URLLC</td>
<td style="text-align: center;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-07</td>
<td style="text-align: center;">RAN#88-e</td>
<td style="text-align: center;">RP-201079</td>
<td style="text-align: center;">0010</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of NR_IIOT support to TS
38.415</td>
<td style="text-align: center;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-07</td>
<td style="text-align: center;">RAN#88-e</td>
<td style="text-align: center;">RP-201085</td>
<td style="text-align: center;">0013</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">QoS monitoring for URLLC</td>
<td style="text-align: center;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td style="text-align: center;">RAN#89-e</td>
<td style="text-align: center;">RP-201950</td>
<td style="text-align: center;">0014</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Need of D1 and Reporting interval for
Qos monitoring for URLLC</td>
<td style="text-align: center;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td style="text-align: center;">RAN#89-e</td>
<td style="text-align: center;">RP-201948</td>
<td style="text-align: center;">0015</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Rapporteur Correction of QoS Flow
Redundancy</td>
<td style="text-align: center;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td style="text-align: center;">RAN#90-e</td>
<td style="text-align: center;">RP-202313</td>
<td style="text-align: center;">0016</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">N3/N9 packet delay reporting for GTP-U
path QoS monitoring</td>
<td style="text-align: center;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td style="text-align: center;">RAN#91-e</td>
<td style="text-align: center;">RP-210240</td>
<td style="text-align: center;">0019</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">UE support for D1 part of UL Delay and
adding New IE Flag for extensibility</td>
<td style="text-align: center;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td style="text-align: center;">RAN#92-e</td>
<td style="text-align: center;">RP-211333</td>
<td style="text-align: center;">0027</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Correction of PDU Type Frame</td>
<td style="text-align: center;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td style="text-align: center;">RAN#94-e</td>
<td style="text-align: center;">RP-212863</td>
<td style="text-align: center;">0030</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for UL PDU Session
Information</td>
<td style="text-align: center;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td style="text-align: center;">RAN#95-e</td>
<td style="text-align: center;">RP-220236</td>
<td style="text-align: center;">0033</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">Rapporteur Corrections of TS 38.415</td>
<td style="text-align: center;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td style="text-align: center;">RAN#95-e</td>
<td style="text-align: center;">RP-220224</td>
<td style="text-align: center;">0034</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of NR MBS</td>
<td style="text-align: center;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td style="text-align: center;">RAN#102</td>
<td style="text-align: center;">RP-233849</td>
<td style="text-align: center;">0038</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction of NG-U</td>
<td style="text-align: center;">17.1.0</td>
</tr>
</tbody>
</table>
</body>
</html>
