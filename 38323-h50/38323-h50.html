<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>38323-h50</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#contents" id="toc-contents"><br />
Contents</a></li>
<li><a href="#foreword" id="toc-foreword"><br />
Foreword</a></li>
<li><a href="#scope" id="toc-scope"><br />
1 Scope</a></li>
<li><a href="#references" id="toc-references">2 References</a></li>
<li><a href="#definitions-and-abbreviations"
id="toc-definitions-and-abbreviations">3 Definitions and
abbreviations</a>
<ul>
<li><a href="#definitions" id="toc-definitions">3.1 Definitions</a></li>
<li><a href="#abbreviations" id="toc-abbreviations">3.2
Abbreviations</a></li>
</ul></li>
<li><a href="#general" id="toc-general">4 General</a>
<ul>
<li><a href="#introduction" id="toc-introduction">4.1
Introduction</a></li>
<li><a href="#architecture" id="toc-architecture">4.2 Architecture</a>
<ul>
<li><a href="#pdcp-structure" id="toc-pdcp-structure">4.2.1 PDCP
structure</a></li>
<li><a href="#pdcp-entities" id="toc-pdcp-entities">4.2.2 PDCP
entities</a></li>
</ul></li>
<li><a href="#services" id="toc-services">4.3 Services</a>
<ul>
<li><a href="#services-provided-to-upper-layers"
id="toc-services-provided-to-upper-layers">4.3.1 Services provided to
upper layers</a></li>
<li><a href="#services-expected-from-lower-layers"
id="toc-services-expected-from-lower-layers">4.3.2 Services expected
from lower layers</a></li>
</ul></li>
<li><a href="#functions" id="toc-functions">4.4 Functions</a></li>
</ul></li>
<li><a href="#procedures" id="toc-procedures">5 Procedures</a>
<ul>
<li><a href="#pdcp-entity-handling" id="toc-pdcp-entity-handling">5.1
PDCP entity handling</a>
<ul>
<li><a href="#pdcp-entity-establishment"
id="toc-pdcp-entity-establishment">5.1.1 PDCP entity
establishment</a></li>
<li><a href="#pdcp-entity-re-establishment"
id="toc-pdcp-entity-re-establishment">5.1.2 PDCP entity
re-establishment</a></li>
<li><a href="#pdcp-entity-release" id="toc-pdcp-entity-release">5.1.3
PDCP entity release</a></li>
<li><a href="#pdcp-entity-suspend" id="toc-pdcp-entity-suspend">5.1.4
PDCP entity suspend</a></li>
<li><a href="#pdcp-entity-reconfiguration"
id="toc-pdcp-entity-reconfiguration">5.1.5 PDCP entity
reconfiguration</a></li>
</ul></li>
<li><a href="#data-transfer" id="toc-data-transfer">5.2 Data
transfer</a>
<ul>
<li><a href="#transmit-operation" id="toc-transmit-operation">5.2.1
Transmit operation</a></li>
<li><a href="#receive-operation" id="toc-receive-operation">5.2.2
Receive operation</a>
<ul>
<li><a
href="#actions-when-a-pdcp-data-pdu-is-received-from-lower-layers"
id="toc-actions-when-a-pdcp-data-pdu-is-received-from-lower-layers">5.2.2.1
Actions when a PDCP Data PDU is received from lower layers</a></li>
<li><a href="#actions-when-a-t-reordering-expires"
id="toc-actions-when-a-t-reordering-expires">5.2.2.2 Actions when a
<em>t-Reordering</em> expires</a></li>
<li><a href="#actions-when-the-value-of-t-reordering-is-reconfigured"
id="toc-actions-when-the-value-of-t-reordering-is-reconfigured">5.2.2.3
Actions when the value of <em>t-Reordering</em> is reconfigured</a></li>
</ul></li>
<li><a href="#sidelink-transmit-operation"
id="toc-sidelink-transmit-operation">5.2.3 Sidelink transmit
operation</a></li>
<li><a href="#sidelink-receive-operation"
id="toc-sidelink-receive-operation">5.2.4 Sidelink receive
operation</a></li>
</ul></li>
<li><a href="#sdu-discard" id="toc-sdu-discard">5.3 SDU discard</a></li>
<li><a href="#status-reporting" id="toc-status-reporting">5.4 Status
reporting</a>
<ul>
<li><a href="#transmit-operation-1" id="toc-transmit-operation-1">5.4.1
Transmit operation</a></li>
<li><a href="#receive-operation-1" id="toc-receive-operation-1">5.4.2
Receive operation</a></li>
</ul></li>
<li><a href="#data-recovery" id="toc-data-recovery">5.5 Data
recovery</a></li>
<li><a href="#data-volume-calculation"
id="toc-data-volume-calculation">5.6 Data volume calculation</a></li>
<li><a href="#robust-header-compression-and-decompression"
id="toc-robust-header-compression-and-decompression">5.7 Robust header
compression and decompression</a>
<ul>
<li><a href="#supported-header-compression-protocols-and-profiles"
id="toc-supported-header-compression-protocols-and-profiles">5.7.1
Supported header compression protocols and profiles</a></li>
<li><a href="#configuration-of-rohc"
id="toc-configuration-of-rohc">5.7.2 Configuration of ROHC</a></li>
<li><a href="#protocol-parameters" id="toc-protocol-parameters">5.7.3
Protocol parameters</a></li>
<li><a href="#header-compression-using-rohc"
id="toc-header-compression-using-rohc">5.7.4 Header compression using
ROHC</a></li>
<li><a href="#header-decompression-using-rohc"
id="toc-header-decompression-using-rohc">5.7.5 Header decompression
using ROHC</a></li>
<li><a href="#pdcp-control-pdu-for-interspersed-rohc-feedback"
id="toc-pdcp-control-pdu-for-interspersed-rohc-feedback">5.7.6 PDCP
Control PDU for interspersed ROHC feedback</a>
<ul>
<li><a href="#transmit-operation-2"
id="toc-transmit-operation-2">5.7.6.1 Transmit Operation</a></li>
<li><a href="#receive-operation-2" id="toc-receive-operation-2">5.7.6.2
Receive Operation</a></li>
</ul></li>
</ul></li>
<li><a href="#ciphering-and-deciphering"
id="toc-ciphering-and-deciphering">5.8 Ciphering and
deciphering</a></li>
<li><a href="#integrity-protection-and-verification"
id="toc-integrity-protection-and-verification">5.9 Integrity protection
and verification</a></li>
<li><a
href="#handling-of-unknown-unforeseen-and-erroneous-protocol-data"
id="toc-handling-of-unknown-unforeseen-and-erroneous-protocol-data">5.10
Handling of unknown, unforeseen, and erroneous protocol data</a></li>
<li><a href="#pdcp-duplication" id="toc-pdcp-duplication">5.11 PDCP
duplication</a>
<ul>
<li><a href="#activationdeactivation-of-pdcp-duplication"
id="toc-activationdeactivation-of-pdcp-duplication">5.11.1
Activation/Deactivation of PDCP duplication</a></li>
<li><a href="#duplicate-pdu-discard"
id="toc-duplicate-pdu-discard">5.11.2 Duplicate PDU discard</a></li>
</ul></li>
<li><a href="#ethernet-header-compression-and-decompression"
id="toc-ethernet-header-compression-and-decompression">5.12 Ethernet
header compression and decompression</a>
<ul>
<li><a href="#supported-header-compression-protocols"
id="toc-supported-header-compression-protocols">5.12.1 Supported header
compression protocols</a></li>
<li><a href="#configuration-of-ehc" id="toc-configuration-of-ehc">5.12.2
Configuration of EHC</a></li>
<li><a href="#protocol-parameters-1"
id="toc-protocol-parameters-1">5.12.3 Protocol parameters</a></li>
<li><a href="#header-compression-using-ehc"
id="toc-header-compression-using-ehc">5.12.4 Header compression using
EHC</a></li>
<li><a href="#header-decompression-using-ehc"
id="toc-header-decompression-using-ehc">5.12.5 Header decompression
using EHC</a></li>
<li><a href="#pdcp-control-pdu-for-ehc-feedback"
id="toc-pdcp-control-pdu-for-ehc-feedback">5.12.6 PDCP Control PDU for
EHC feedback</a>
<ul>
<li><a href="#transmit-operation-3"
id="toc-transmit-operation-3">5.12.6.1 Transmit Operation</a></li>
<li><a href="#receive-operation-3" id="toc-receive-operation-3">5.12.6.2
Receive Operation</a></li>
</ul></li>
<li><a href="#simultaneous-configuration-of-rohc-and-ehc"
id="toc-simultaneous-configuration-of-rohc-and-ehc">5.12.7 Simultaneous
configuration of ROHC and EHC</a></li>
</ul></li>
<li><a href="#uplink-data-switching" id="toc-uplink-data-switching">5.13
Uplink data switching</a></li>
<li><a href="#uplink-data-compression-and-decompression"
id="toc-uplink-data-compression-and-decompression">5.14 Uplink Data
compression and decompression</a>
<ul>
<li><a href="#udc-protocol" id="toc-udc-protocol">5.14.1 UDC
protocol</a></li>
<li><a href="#configuration-of-udc" id="toc-configuration-of-udc">5.14.2
Configuration of UDC</a></li>
<li><a href="#udc-header" id="toc-udc-header">5.14.3 UDC header</a></li>
<li><a href="#uplink-data-compression"
id="toc-uplink-data-compression">5.14.4 Uplink data compression</a></li>
<li><a href="#pdcp-control-pdu-for-udc-feedback"
id="toc-pdcp-control-pdu-for-udc-feedback">5.14.5 PDCP Control PDU for
UDC feedback</a></li>
<li><a href="#pre-defined-dictionary"
id="toc-pre-defined-dictionary">5.14.6 Pre-defined dictionary</a></li>
<li><a href="#udc-buffer-reset-procedure"
id="toc-udc-buffer-reset-procedure">5.14.7 UDC buffer reset
procedure</a></li>
<li><a href="#udc-checksum-error-handling"
id="toc-udc-checksum-error-handling">5.14.8 UDC checksum error
handling</a></li>
</ul></li>
</ul></li>
<li><a href="#protocol-data-units-formats-and-parameters"
id="toc-protocol-data-units-formats-and-parameters">6 Protocol data
units, formats, and parameters</a>
<ul>
<li><a href="#protocol-data-units" id="toc-protocol-data-units">6.1
Protocol data units</a>
<ul>
<li><a href="#data-pdu" id="toc-data-pdu">6.1.1 Data PDU</a></li>
<li><a href="#control-pdu" id="toc-control-pdu">6.1.2 Control
PDU</a></li>
</ul></li>
<li><a href="#formats" id="toc-formats">6.2 Formats</a>
<ul>
<li><a href="#general-1" id="toc-general-1">6.2.1 General</a></li>
<li><a href="#data-pdu-1" id="toc-data-pdu-1">6.2.2 Data PDU</a>
<ul>
<li><a href="#data-pdu-for-srbs" id="toc-data-pdu-for-srbs">6.2.2.1 Data
PDU for SRBs</a></li>
<li><a href="#data-pdu-for-drbs-and-mrbs-with-12-bits-pdcp-sn"
id="toc-data-pdu-for-drbs-and-mrbs-with-12-bits-pdcp-sn">6.2.2.2 Data
PDU for DRBs and MRBs with 12 bits PDCP SN</a></li>
<li><a href="#data-pdu-for-drbs-and-mrbs-with-18-bits-pdcp-sn"
id="toc-data-pdu-for-drbs-and-mrbs-with-18-bits-pdcp-sn">6.2.2.3 Data
PDU for DRBs and MRBs with 18 bits PDCP SN</a></li>
<li><a
href="#data-pdu-for-sidelink-drbs-for-groupcast-and-broadcast-for-the-sidelink-srb0-and-for-the-sidelink-srb4"
id="toc-data-pdu-for-sidelink-drbs-for-groupcast-and-broadcast-for-the-sidelink-srb0-and-for-the-sidelink-srb4">6.2.2.4
Data PDU for sidelink DRBs for groupcast and broadcast, for the sidelink
SRB0‎ and for the sidelink SRB4</a></li>
<li><a href="#data-pdu-for-sidelink-srbs-for-unicast"
id="toc-data-pdu-for-sidelink-srbs-for-unicast">6.2.2.5 Data PDU for
sidelink SRBs for unicast</a></li>
<li><a
href="#data-pdu-for-sidelink-drbs-for-unicast-with-12-bits-pdcp-sn"
id="toc-data-pdu-for-sidelink-drbs-for-unicast-with-12-bits-pdcp-sn">6.2.2.6
Data PDU for sidelink DRBs for unicast with 12 bits PDCP SN</a></li>
<li><a
href="#data-pdu-for-sidelink-drbs-for-unicast-with-18-bits-pdcp-sn"
id="toc-data-pdu-for-sidelink-drbs-for-unicast-with-18-bits-pdcp-sn">6.2.2.7
Data PDU for sidelink DRBs for unicast with 18 bits PDCP SN</a></li>
</ul></li>
<li><a href="#control-pdu-1" id="toc-control-pdu-1">6.2.3 Control
PDU</a>
<ul>
<li><a href="#control-pdu-for-pdcp-status-report"
id="toc-control-pdu-for-pdcp-status-report">6.2.3.1 Control PDU for PDCP
status report</a></li>
<li><a href="#control-pdu-for-interspersed-rohc-feedback"
id="toc-control-pdu-for-interspersed-rohc-feedback">6.2.3.2 Control PDU
for interspersed ROHC feedback</a></li>
<li><a href="#control-pdu-for-ehc-feedback"
id="toc-control-pdu-for-ehc-feedback">6.2.3.3 Control PDU for EHC
feedback</a></li>
<li><a href="#control-pdu-for-udc-feedback"
id="toc-control-pdu-for-udc-feedback">6.2.3.4 Control PDU for UDC
feedback</a></li>
</ul></li>
</ul></li>
<li><a href="#parameters" id="toc-parameters">6.3 Parameters</a>
<ul>
<li><a href="#general-2" id="toc-general-2">6.3.1 General</a></li>
<li><a href="#pdcp-sn" id="toc-pdcp-sn">6.3.2 PDCP SN</a></li>
<li><a href="#data" id="toc-data">6.3.3 Data</a></li>
<li><a href="#mac-i" id="toc-mac-i">6.3.4 MAC-I</a></li>
<li><a href="#count" id="toc-count">6.3.5 COUNT</a></li>
<li><a href="#r" id="toc-r">6.3.6 R</a></li>
<li><a href="#dc" id="toc-dc">6.3.7 D/C</a></li>
<li><a href="#pdu-type" id="toc-pdu-type">6.3.8 PDU type</a></li>
<li><a href="#fmc" id="toc-fmc">6.3.9 FMC</a></li>
<li><a href="#bitmap" id="toc-bitmap">6.3.10 Bitmap</a></li>
<li><a href="#interspersed-rohc-feedback"
id="toc-interspersed-rohc-feedback">6.3.11 Interspersed ROHC
feedback</a></li>
<li><a href="#sdu-type" id="toc-sdu-type">6.3.12 SDU Type</a></li>
<li><a href="#knrp-sess-id" id="toc-knrp-sess-id">6.3.13
K<sub>NRP-sess</sub> ID</a></li>
<li><a href="#fe" id="toc-fe">6.3.14 FE</a></li>
</ul></li>
</ul></li>
<li><a href="#state-variables-constants-and-timers"
id="toc-state-variables-constants-and-timers">7 State variables,
constants, and timers</a>
<ul>
<li><a href="#state-variables" id="toc-state-variables">7.1 State
variables</a></li>
<li><a href="#constants" id="toc-constants">7.2 Constants</a></li>
<li><a href="#timers" id="toc-timers">7.3 Timers</a></li>
</ul></li>
<li><a href="#a.1-ehc-principle" id="toc-a.1-ehc-principle">A.1 EHC
principle</a></li>
<li><a href="#a.2-ehc-packet-format-and-parameters"
id="toc-a.2-ehc-packet-format-and-parameters">A.2 EHC packet format and
parameters</a>
<ul>
<li><a href="#a.2.1-ehc-packet-format"
id="toc-a.2.1-ehc-packet-format">A.2.1 EHC packet format</a>
<ul>
<li><a
href="#a.2.1.1-ehc-full-header-packet-and-ehc-compressed-header-packet"
id="toc-a.2.1.1-ehc-full-header-packet-and-ehc-compressed-header-packet">A.2.1.1
EHC Full Header packet and EHC Compressed Header packet</a></li>
<li><a href="#a.2.1.2-ehc-feedback-packet"
id="toc-a.2.1.2-ehc-feedback-packet">A.2.1.2 EHC feedback
packet</a></li>
</ul></li>
<li><a href="#a.2.2-parameters" id="toc-a.2.2-parameters">A.2.2
Parameters</a>
<ul>
<li><a href="#a.2.2.1-fc" id="toc-a.2.2.1-fc">A.2.2.1 F/C</a></li>
<li><a href="#a.2.2.2-cid" id="toc-a.2.2.2-cid">A.2.2.2 CID</a></li>
</ul></li>
</ul></li>
<li><a href="#b.1-udc-general-description"
id="toc-b.1-udc-general-description">B.1 UDC general
description</a></li>
<li><a href="#b.2-udc-packet-format-and-parameters"
id="toc-b.2-udc-packet-format-and-parameters">B.2 UDC packet format and
parameters</a>
<ul>
<li><a href="#b.2.1-udc-header-and-udc-data-block-format"
id="toc-b.2.1-udc-header-and-udc-data-block-format">B.2.1 UDC Header and
UDC Data Block format</a></li>
<li><a href="#b.2.2-udc-parameters" id="toc-b.2.2-udc-parameters">B.2.2
UDC parameters</a>
<ul>
<li><a href="#b.2.2.1-fu" id="toc-b.2.2.1-fu">B.2.2.1 FU</a></li>
<li><a href="#b.2.2.2-fr" id="toc-b.2.2.2-fr">B.2.2.2 FR</a></li>
<li><a href="#b.2.2.3-checksum" id="toc-b.2.2.3-checksum">B.2.2.3
Checksum</a></li>
</ul></li>
<li><a href="#b.2.3-an-example-of-udc-checksum-calculation"
id="toc-b.2.3-an-example-of-udc-checksum-calculation">B.2.3 An example
of UDC Checksum calculation</a></li>
</ul></li>
</ul>
</nav>
<p>3GPP TS 38.323 V17.5.0 (2023-06)</p>
<p>Technical Specification</p>
<p>3rd Generation Partnership Project;</p>
<p>Technical Specification Group Radio Access Network;</p>
<p>NR;</p>
<p>Packet Data Convergence Protocol (PDCP) specification</p>
<p>(Release 17)</p>
<p><img src="media/image1.svg" /> <img src="media/image2.svg" /></p>
<p>The present document has been developed within the 3rd Generation
Partnership Project (3GPP <sup>TM</sup>) and may be further elaborated
for the purposes of 3GPP.<br />
The present document has not been subject to any approval process by the
3GPP Organizational Partners and shall not be implemented.<br />
This Specification is provided for future development work within 3GPP
only. The Organizational Partners accept no liability for any use of
this Specification.<br />
Specifications and Reports for implementation of the 3GPP <sup>TM</sup>
system should be obtained via the 3GPP Organizational Partners'
Publications Offices.</p>
<blockquote>
<p><em><strong>3GPP</strong></em></p>
<p>Postal address</p>
<p>3GPP support office address</p>
<p>650 Route des Lucioles - Sophia Antipolis</p>
<p>Valbonne - FRANCE</p>
<p>Tel.: +33 4 92 94 42 00 Fax: +33 4 93 65 47 16</p>
<p>Internet</p>
<p>http://www.3gpp.org</p>
</blockquote>
<p><em><strong>Copyright Notification</strong></em></p>
<p>No part may be reproduced except as authorized by written
permission.<br />
The copyright and the foregoing restriction extend to reproduction in
all media.</p>
<p>© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).</p>
<p>All rights reserved.</p>
<p>UMTS™ is a Trade Mark of ETSI registered for the benefit of its
members</p>
<p>3GPP™ is a Trade Mark of ETSI registered for the benefit of its
Members and of the 3GPP Organizational Partners<br />
LTE™ is a Trade Mark of ETSI registered for the benefit of its Members
and of the 3GPP Organizational Partners</p>
<p>GSM® and the GSM logo are registered and owned by the GSM
Association</p>
<h1 class="TT" id="contents"><br />
Contents</h1>
<p>Foreword <a href="#foreword">6</a></p>
<p>1 Scope <a href="#scope">7</a></p>
<p>2 References <a href="#references">7</a></p>
<p>3 Definitions and abbreviations <a
href="#definitions-and-abbreviations">8</a></p>
<p>3.1 Definitions <a href="#definitions">8</a></p>
<p>3.2 Abbreviations <a href="#abbreviations">8</a></p>
<p>4 General <a href="#general">9</a></p>
<p>4.1 Introduction <a href="#introduction">9</a></p>
<p>4.2 Architecture <a href="#architecture">9</a></p>
<p>4.2.1 PDCP structure <a href="#pdcp-structure">9</a></p>
<p>4.2.2 PDCP entities <a href="#pdcp-entities">11</a></p>
<p>4.3 Services <a href="#services">13</a></p>
<p>4.3.1 Services provided to upper layers <a
href="#services-provided-to-upper-layers">13</a></p>
<p>4.3.2 Services expected from lower layers <a
href="#services-expected-from-lower-layers">13</a></p>
<p>4.4 Functions <a href="#functions">14</a></p>
<p>5 Procedures <a href="#procedures">14</a></p>
<p>5.1 PDCP entity handling <a href="#pdcp-entity-handling">14</a></p>
<p>5.1.1 PDCP entity establishment <a
href="#pdcp-entity-establishment">14</a></p>
<p>5.1.2 PDCP entity re-establishment <a
href="#pdcp-entity-re-establishment">14</a></p>
<p>5.1.3 PDCP entity release <a href="#pdcp-entity-release">16</a></p>
<p>5.1.4 PDCP entity suspend <a href="#pdcp-entity-suspend">16</a></p>
<p>5.1.5 PDCP entity reconfiguration <a
href="#pdcp-entity-reconfiguration">17</a></p>
<p>5.2 Data transfer <a href="#data-transfer">17</a></p>
<p>5.2.1 Transmit operation <a href="#transmit-operation">17</a></p>
<p>5.2.2 Receive operation <a href="#receive-operation">18</a></p>
<p>5.2.2.1 Actions when a PDCP Data PDU is received from lower layers <a
href="#actions-when-a-pdcp-data-pdu-is-received-from-lower-layers">18</a></p>
<p>5.2.2.2 Actions when a <em>t-Reordering</em> expires <a
href="#actions-when-a-t-reordering-expires">20</a></p>
<p>5.2.2.3 Actions when the value of <em>t-Reordering</em> is
reconfigured <a
href="#actions-when-the-value-of-t-reordering-is-reconfigured">20</a></p>
<p>5.2.3 Sidelink transmit operation <a
href="#sidelink-transmit-operation">20</a></p>
<p>5.2.4 Sidelink receive operation <a
href="#sidelink-receive-operation">20</a></p>
<p>5.3 SDU discard <a href="#sdu-discard">21</a></p>
<p>5.4 Status reporting <a href="#status-reporting">21</a></p>
<p>5.4.1 Transmit operation <a href="#transmit-operation-1">21</a></p>
<p>5.4.2 Receive operation <a href="#receive-operation-1">22</a></p>
<p>5.5 Data recovery <a href="#data-recovery">22</a></p>
<p>5.6 Data volume calculation <a
href="#data-volume-calculation">22</a></p>
<p>5.7 Robust header compression and decompression <a
href="#robust-header-compression-and-decompression">23</a></p>
<p>5.7.1 Supported header compression protocols and profiles <a
href="#supported-header-compression-protocols-and-profiles">23</a></p>
<p>5.7.2 Configuration of ROHC <a
href="#configuration-of-rohc">23</a></p>
<p>5.7.3 Protocol parameters <a href="#protocol-parameters">24</a></p>
<p>5.7.4 Header compression using ROHC <a
href="#header-compression-using-rohc">24</a></p>
<p>5.7.5 Header decompression using ROHC <a
href="#header-decompression-using-rohc">25</a></p>
<p>5.7.6 PDCP Control PDU for interspersed ROHC feedback <a
href="#pdcp-control-pdu-for-interspersed-rohc-feedback">25</a></p>
<p>5.7.6.1 Transmit Operation <a href="#transmit-operation-2">25</a></p>
<p>5.7.6.2 Receive Operation <a href="#receive-operation-2">25</a></p>
<p>5.8 Ciphering and deciphering <a
href="#ciphering-and-deciphering">25</a></p>
<p>5.9 Integrity protection and verification <a
href="#integrity-protection-and-verification">26</a></p>
<p>5.10 Handling of unknown, unforeseen, and erroneous protocol data <a
href="#handling-of-unknown-unforeseen-and-erroneous-protocol-data">27</a></p>
<p>5.11 PDCP duplication <a href="#pdcp-duplication">27</a></p>
<p>5.11.1 Activation/Deactivation of PDCP duplication <a
href="#activationdeactivation-of-pdcp-duplication">27</a></p>
<p>5.11.2 Duplicate PDU discard <a
href="#duplicate-pdu-discard">27</a></p>
<p>5.12 Ethernet header compression and decompression <a
href="#ethernet-header-compression-and-decompression">28</a></p>
<p>5.12.1 Supported header compression protocols <a
href="#supported-header-compression-protocols">28</a></p>
<p>5.12.2 Configuration of EHC <a
href="#configuration-of-ehc">28</a></p>
<p>5.12.3 Protocol parameters <a
href="#protocol-parameters-1">28</a></p>
<p>5.12.4 Header compression using EHC <a
href="#header-compression-using-ehc">28</a></p>
<p>5.12.5 Header decompression using EHC <a
href="#header-decompression-using-ehc">28</a></p>
<p>5.12.6 PDCP Control PDU for EHC feedback <a
href="#pdcp-control-pdu-for-ehc-feedback">28</a></p>
<p>5.12.6.1 Transmit Operation <a
href="#transmit-operation-3">28</a></p>
<p>5.12.6.2 Receive Operation <a href="#receive-operation-3">28</a></p>
<p>5.12.7 Simultaneous configuration of ROHC and EHC <a
href="#simultaneous-configuration-of-rohc-and-ehc">29</a></p>
<p>5.13 Uplink data switching <a
href="#uplink-data-switching">29</a></p>
<p>5.14 Uplink Data compression and decompression <a
href="#uplink-data-compression-and-decompression">30</a></p>
<p>5.14.1 UDC protocol <a href="#udc-protocol">30</a></p>
<p>5.14.2 Configuration of UDC <a
href="#configuration-of-udc">30</a></p>
<p>5.14.3 UDC header <a href="#udc-header">30</a></p>
<p>5.14.4 Uplink data compression <a
href="#uplink-data-compression">30</a></p>
<p>5.14.5 PDCP Control PDU for UDC feedback <a
href="#pdcp-control-pdu-for-udc-feedback">30</a></p>
<p>5.14.6 Pre-defined dictionary <a
href="#pre-defined-dictionary">31</a></p>
<p>5.14.7 UDC buffer reset procedure <a
href="#udc-buffer-reset-procedure">31</a></p>
<p>5.14.8 UDC checksum error handling <a
href="#udc-checksum-error-handling">31</a></p>
<p>6 Protocol data units, formats, and parameters <a
href="#protocol-data-units-formats-and-parameters">31</a></p>
<p>6.1 Protocol data units <a href="#protocol-data-units">31</a></p>
<p>6.1.1 Data PDU <a href="#data-pdu">31</a></p>
<p>6.1.2 Control PDU <a href="#control-pdu">31</a></p>
<p>6.2 Formats <a href="#formats">32</a></p>
<p>6.2.1 General <a href="#general-1">32</a></p>
<p>6.2.2 Data PDU <a href="#data-pdu-1">32</a></p>
<p>6.2.2.1 Data PDU for SRBs <a href="#data-pdu-for-srbs">32</a></p>
<p>6.2.2.2 Data PDU for DRBs and MRBs with 12 bits PDCP SN <a
href="#data-pdu-for-drbs-and-mrbs-with-12-bits-pdcp-sn">32</a></p>
<p>6.2.2.3 Data PDU for DRBs and MRBs with 18 bits PDCP SN <a
href="#data-pdu-for-drbs-and-mrbs-with-18-bits-pdcp-sn">33</a></p>
<p>6.2.2.4 Data PDU for sidelink DRBs for groupcast and broadcast, for
the sidelink SRB0‎ and for the sidelink SRB4 <a
href="#data-pdu-for-sidelink-drbs-for-groupcast-and-broadcast-for-the-sidelink-srb0-and-for-the-sidelink-srb4">33</a></p>
<p>6.2.2.5 Data PDU for sidelink SRBs for unicast <a
href="#data-pdu-for-sidelink-srbs-for-unicast">34</a></p>
<p>6.2.2.6 Data PDU for sidelink DRBs for unicast with 12 bits PDCP SN
<a
href="#data-pdu-for-sidelink-drbs-for-unicast-with-12-bits-pdcp-sn">34</a></p>
<p>6.2.2.7 Data PDU for sidelink DRBs for unicast with 18 bits PDCP SN
<a
href="#data-pdu-for-sidelink-drbs-for-unicast-with-18-bits-pdcp-sn">35</a></p>
<p>6.2.3 Control PDU <a href="#control-pdu-1">36</a></p>
<p>6.2.3.1 Control PDU for PDCP status report <a
href="#control-pdu-for-pdcp-status-report">36</a></p>
<p>6.2.3.2 Control PDU for interspersed ROHC feedback <a
href="#control-pdu-for-interspersed-rohc-feedback">37</a></p>
<p>6.2.3.3 Control PDU for EHC feedback <a
href="#control-pdu-for-ehc-feedback">37</a></p>
<p>6.2.3.4 Control PDU for UDC feedback <a
href="#control-pdu-for-udc-feedback">37</a></p>
<p>6.3 Parameters <a href="#parameters">37</a></p>
<p>6.3.1 General <a href="#general-2">37</a></p>
<p>6.3.2 PDCP SN <a href="#pdcp-sn">38</a></p>
<p>6.3.3 Data <a href="#data">38</a></p>
<p>6.3.4 MAC-I <a href="#mac-i">38</a></p>
<p>6.3.5 COUNT <a href="#count">38</a></p>
<p>6.3.6 R <a href="#r">39</a></p>
<p>6.3.7 D/C <a href="#dc">39</a></p>
<p>6.3.8 PDU type <a href="#pdu-type">39</a></p>
<p>6.3.9 FMC <a href="#fmc">39</a></p>
<p>6.3.10 Bitmap <a href="#bitmap">39</a></p>
<p>6.3.11 Interspersed ROHC feedback <a
href="#interspersed-rohc-feedback">39</a></p>
<p>6.3.12 SDU Type <a href="#sdu-type">40</a></p>
<p>6.3.13 K<sub>NRP-sess</sub> ID <a href="#knrp-sess-id">40</a></p>
<p>6.3.14 FE <a href="#fe">40</a></p>
<p>7 State variables, constants, and timers <a
href="#state-variables-constants-and-timers">40</a></p>
<p>7.1 State variables <a href="#state-variables">40</a></p>
<p>7.2 Constants <a href="#constants">41</a></p>
<p>7.3 Timers <a href="#timers">41</a></p>
<p>Annex A (normative): Ethernet Header Compression (EHC) protocol <a
href="#annex-a-normative-ethernet-header-compression-ehc-protocol">42</a></p>
<p>A.1 EHC principle <a href="#a.1-ehc-principle">42</a></p>
<p>A.2 EHC packet format and parameters <a
href="#a.2-ehc-packet-format-and-parameters">43</a></p>
<p>A.2.1 EHC packet format <a href="#a.2.1-ehc-packet-format">43</a></p>
<p>A.2.1.1 EHC Full Header packet and EHC Compressed Header packet <a
href="#a.2.1.1-ehc-full-header-packet-and-ehc-compressed-header-packet">43</a></p>
<p>A.2.1.2 EHC feedback packet <a
href="#a.2.1.2-ehc-feedback-packet">44</a></p>
<p>A.2.2 Parameters <a href="#a.2.2-parameters">45</a></p>
<p>A.2.2.1 F/C <a href="#a.2.2.1-fc">45</a></p>
<p>A.2.2.2 CID <a href="#a.2.2.2-cid">45</a></p>
<p>Annex B (normative): Uplink Data Compression Protocol <a
href="#annex-b-normative-uplink-data-compression-protocol">45</a></p>
<p>B.1 UDC general description <a
href="#b.1-udc-general-description">45</a></p>
<p>B.2 UDC packet format and parameters <a
href="#b.2-udc-packet-format-and-parameters">45</a></p>
<p>B.2.1 UDC Header and UDC Data Block format <a
href="#b.2.1-udc-header-and-udc-data-block-format">45</a></p>
<p>B.2.2 UDC parameters <a href="#b.2.2-udc-parameters">46</a></p>
<p>B.2.2.1 FU <a href="#b.2.2.1-fu">46</a></p>
<p>B.2.2.2 FR <a href="#b.2.2.2-fr">46</a></p>
<p>B.2.2.3 Checksum <a href="#b.2.2.3-checksum">46</a></p>
<p>B.2.3 An example of UDC Checksum calculation <a
href="#b.2.3-an-example-of-udc-checksum-calculation">46</a></p>
<p>Annex C (informative): Change history <a
href="#annex-c-informative-change-history">47</a></p>
<h1 id="foreword"><br />
Foreword</h1>
<p>This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).</p>
<p>The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:</p>
<p>Version x.y.z</p>
<p>where:</p>
<p>x the first digit:</p>
<p>1 presented to TSG for information;</p>
<p>2 presented to TSG for approval;</p>
<p>3 or greater indicates TSG approved document under change
control.</p>
<p>y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.</p>
<p>z the third digit is incremented when editorial only changes have
been incorporated in the document.</p>
<h1 id="scope"><br />
1 Scope</h1>
<p>The present document provides the description of the Packet Data
Convergence Protocol (PDCP).</p>
<h1 id="references">2 References</h1>
<p>The following documents contain provisions which, through reference
in this text, constitute provisions of the present document.</p>
<p>- References are either specific (identified by date of publication,
edition number, version number, etc.) or non‑specific.</p>
<p>- For a specific reference, subsequent revisions do not apply.</p>
<p>- For a non-specific reference, the latest version applies. In the
case of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document <em>in the same Release as the present document</em>.</p>
<p>[1] 3GPP TR 21.905: "Vocabulary for 3GPP Specifications".</p>
<p>[2] 3GPP TS 38.300: "NG Radio Access Network; Overall
description".</p>
<p>[3] 3GPP TS 38.331: "NR Radio Resource Control (RRC); Protocol
Specification".</p>
<p>[4] 3GPP TS 38.321: "NR Medium Access Control (MAC) protocol
specification".</p>
<p>[5] 3GPP TS 38.322: "NR Radio Link Control (RLC) protocol
specification".</p>
<p>[6] 3GPP TS 33.501: "Security Architecture and Procedures for 5G
System ".</p>
<p>[7] IETF RFC 5795: "The RObust Header Compression (ROHC)
Framework".</p>
<p>[8] IETF RFC 3095: "RObust Header Compression (ROHC): Framework and
four profiles: RTP, UDP, ESP and uncompressed".</p>
<p>[9] IETF RFC 4815: "RObust Header Compression (ROHC): Corrections and
Clarifications to RFC 3095".</p>
<p>[10] IETF RFC 6846: "RObust Header Compression (ROHC): A Profile for
TCP/IP (ROHC-TCP)".</p>
<p>[11] IETF RFC 5225: "RObust Header Compression (ROHC) Version 2:
Profiles for RTP, UDP, IP, ESP and UDP Lite".</p>
<p>[12] 3GPP TS 36.321: "Evolved Universal Terrestrial Radio Access
(E-UTRA) Medium Access Control (MAC) protocol specification".</p>
<p>[13] 3GPP TS 23.287: "Architecture enhancements for 5G System (5GS)
to support Vehicle-to-Everything (V2X) services".</p>
<p>[14] 3GPP TS 33.536: "Security Aspect of 3GPP Support for Advanced
V2X Services".</p>
<p>[15] IEEE Standard 802.3™-2018: "Ethernet".</p>
<p>[16] 3GPP TS 24.587: "Vehicle-to-Everything (V2X) services in 5G
System (5GS), Stage 3".</p>
<p>[17] 3GPP TS 33.401: "3GPP System Architecture Evolution (SAE);
Security Architecture".</p>
<p>[18] 3GPP TS 23.304: "Proximity based Services (ProSe) in the 5G
System (5GS)".</p>
<p>[19] IETF RFC 1951: "DEFLATE Compressed Data Format Specification
version 1.3".</p>
<p>[20] IETF RFC 3485: "The Session Initiation Protocol (SIP) and
Session Description Protocol (SDP) Static Dictionary for Signaling
Compression (SigComp)".</p>
<p>[21] IETF RFC 1979: "PPP Deflate Protocol".</p>
<p>[22] 3GPP TS 38.351: "NR; Sidelink Relay Adaptation Protocol (SRAP)
Specification".</p>
<h1 id="definitions-and-abbreviations">3 Definitions and
abbreviations</h1>
<h2 id="definitions">3.1 Definitions</h2>
<p>For the purposes of the present document, the terms and definitions
given in TR 21.905 [1] and the following apply. A term defined in the
present document takes precedence over the definition of the same term,
if any, in TR 21.905 [1].</p>
<p><strong>AM DRB</strong>: a data radio bearer which utilizes RLC
AM.</p>
<p><strong>AM MRB:</strong> an MRB associated with at least one AM RLC
bearer for PTP transmission.</p>
<p><strong>Broadcast MRB</strong>: a radio bearer configured for MBS
broadcast delivery.</p>
<p><strong>DAPS bearer</strong>: a bearer whose radio protocols are
located in both the source gNB and the target gNB during DAPS handover
to use both source gNB and target gNB resources.</p>
<p><strong>MBS Radio Bearer:</strong> a radio bearer that is configured
for MBS delivery.</p>
<p><strong>Multicast MRB:</strong> a radio bearer configured for MBS
multicast delivery.</p>
<p><strong>Non-split bearer</strong>: a bearer whose radio protocols are
located in either the MgNB or the SgNB to use MgNB or SgNB resource,
respectively.</p>
<p><strong>NR sidelink communication</strong>: AS functionality enabling
at least V2X communication as defined in TS 23.287 [13] and ProSe
communication (including ProSe non-Relay and UE-to-Network Relay
communication) as defined in TS 23.304 [18], between two or more nearby
UEs, using NR technology but not traversing any network node.</p>
<p><strong>NR sidelink discovery</strong>: AS functionality enabling
ProSe non-Relay Discovery and ProSe UE-to-Network Relay discovery for
Proximity based Services as defined in TS 23.304 [18] between two or
more nearby UEs, using NR technology but not traversing any network
node.</p>
<p><strong>NR sidelink transmission</strong>: any NR Sidelink-based
transmission, including both transmission for NR sidelink discovery and
transmission for NR sidelink communication.</p>
<p><strong>PDCP data volume</strong>: the amount of data available for
transmission in a PDCP entity.</p>
<p><strong>Split bearer</strong>: in dual connectivity, a bearer whose
radio protocols are located in both the MgNB and the SgNB to use both
MgNB and SgNB resources.</p>
<p><strong>Split secondary RLC entity</strong>: in dual connectivity,
the RLC entity other than the primary RLC entity which is responsible
for split bearer operation. If the PDCP entity is associated with two
RLC entities, the split secondary RLC entity is the RLC entity other
than the primary RLC entity. If the PDCP entity is associated with more
than two RLC entities, the split secondary RLC entity is configured by
upper layers.</p>
<p><strong>UM DRB</strong>: a data radio bearer which utilizes RLC
UM.</p>
<p><strong>UM MRB:</strong> an MRB associated with only RLC UM.</p>
<h2 id="abbreviations">3.2 Abbreviations</h2>
<p>For the purposes of the present document, the abbreviations given in
TR 21.905 [1] and the following apply. An abbreviation defined in the
present document takes precedence over the definition of the same
abbreviation, if any, in TR 21.905 [1].</p>
<p>AM Acknowledged Mode</p>
<p>ARP Address Resolution Protocol</p>
<p>CID Context Identifier</p>
<p>DAPS Dual Active Protocol Stack</p>
<p>DRB Data Radio Bearer carrying user plane data</p>
<p>EHC Ethernet Header Compression</p>
<p>FIFO First In First Out</p>
<p>gNB NR Node B</p>
<p>HFN Hyper Frame Number</p>
<p>IETF Internet Engineering Task Force</p>
<p>IP Internet Protocol</p>
<p>MAC Medium Access Control</p>
<p>MAC-I Message Authentication Code for Integrity</p>
<p>MBS Multicast/Broadcast Services</p>
<p>MRB MBS Radio Bearer</p>
<p>MTCH MBS Traffic Channel</p>
<p>PDCP Packet Data Convergence Protocol</p>
<p>PDU Protocol Data Unit</p>
<p>RB Radio Bearer</p>
<p>RFC Request For Comments</p>
<p>RLC Radio Link Control</p>
<p>ROHC RObust Header Compression</p>
<p>RRC Radio Resource Control</p>
<p>RTP Real Time Protocol</p>
<p>SAP Service Access Point</p>
<p>SCCH Sidelink Control Channel</p>
<p>SDU Service Data Unit</p>
<p>SLRB Sidelink Radio Bearer carrying NR sidelink communication or NR
sidelink discovery</p>
<p>SN Sequence Number</p>
<p>SRAP Sidelink Relay Adaptation Protocol</p>
<p>SRB Signalling Radio Bearer carrying control plane data</p>
<p>STCH Sidelink Traffic Channel</p>
<p>TCP Transmission Control Protocol</p>
<p>UDC Uplink Data Compression</p>
<p>UDP User Datagram Protocol</p>
<p>UE User Equipment</p>
<p>UM Unacknowledged Mode</p>
<p>U2N UE-to-Network</p>
<p>X-MAC Computed MAC-I</p>
<h1 id="general">4 General</h1>
<h2 id="introduction">4.1 Introduction</h2>
<p>The present document describes the functionality of the PDCP.</p>
<h2 id="architecture">4.2 Architecture</h2>
<h3 id="pdcp-structure">4.2.1 PDCP structure</h3>
<p>Figure 4.2.1-1 represents one possible structure for the PDCP
sublayer, and Figure 4.2.1-2 represents one possible structure for the
PDCP sublayer used in L2 U2N relay case; they should not restrict
implementation. The figures are based on the radio interface protocol
architecture defined in TS 38.300 [2].</p>
<p><img src="media/image3.svg" /></p>
<p>Figure 4.2.1-1: PDCP layer, structure view (normal)</p>
<p><img src="media/image4.svg" /></p>
<p>Figure 4.2.1-2: PDCP layer, structure view (L2 U2N relay)</p>
<p>The PDCP sublayer is configured by upper layers TS 38.331 [3]. The
PDCP sublayer is used for RBs mapped on DCCH, DTCH, MTCH, SCCH, and STCH
type of logical channels. The PDCP sublayer is not used for any other
type of logical channels.</p>
<p>Each RB (except for SRB0 for Uu interface) is associated with one
PDCP entity. Each PDCP entity is associated with one, two, three, four,
six, or eight RLC entities depending on the RB characteristic (e.g.
uni-directional/bi-directional or split/non-split) or RLC mode:</p>
<p>- For split bearers, each PDCP entity is associated with two UM RLC
entities (for same direction), four UM RLC entities (two for each
direction), or two AM RLC entities;</p>
<p>- For RBs configured with PDCP duplication, each PDCP entity is
associated with N UM RLC entities (for same direction), 2 × N UM RLC
entities (N for each direction), or N AM RLC entities, where 2 &lt;= N
&lt;= 4;</p>
<p>- For DAPS bearers, each PDCP entity is associated with two UM RLC
entities (for same direction, one for source and one for target cell),
four UM RLC entities (two for each direction on source cell and target
cell), or two AM RLC entities (one for source cell and one for target
cell);</p>
<p>- For UM MRBs, each PDCP entity is associated with one UM RLC entity
(for MTCH or for downlink DTCH), two UM RLC entities (one for MTCH and
one for downlink DTCH, or one for downlink DTCH and one for uplink
DTCH), or three UM RLC entities (one for MTCH, one for downlink DTCH,
and one for uplink DTCH);</p>
<p>- For AM MRBs, each PDCP entity is associated with one AM RLC entity
(for downlink DTCH and uplink DTCH), or one UM RLC entity (for MTCH) and
one AM RLC entity (for downlink DTCH and uplink DTCH);</p>
<p>- Otherwise, each PDCP entity is associated with one UM RLC entity,
two UM RLC entities (one for each direction), or one AM RLC entity.</p>
<p>For the case of L2 U2N relay, all PDCP entities are associated with
one SRAP entity.</p>
<h3 id="pdcp-entities">4.2.2 PDCP entities</h3>
<p>The PDCP entities are located in the PDCP sublayer. Several PDCP
entities may be defined for a UE. Each PDCP entity is carrying the data
of one radio bearer. A PDCP entity is associated either to the control
plane or the user plane depending on which radio bearer it is carrying
data for.</p>
<p>Figure 4.2.2-1 represents the functional view of the PDCP entity for
the PDCP sublayer; it should not restrict implementation. The figure is
based on the radio interface protocol architecture defined in TS 38.300
[2].</p>
<p>For split bearers and DAPS bearers, routing is performed in the
transmitting PDCP entity.</p>
<p>A PDCP entity associated with DRB can be configured by upper layers
TS 38.331 [3] to use header compression or uplink data compression
(UDC). A PDCP entity associated with MRB can be configured by upper
layers TS 38.331 [3] to use header compression. In this version of the
specification, the robust header compression protocol (ROHC), the
Ethernet header compression protocol (EHC) and UDC are supported. Each
header compression protocol is independently configured for a
DRB/MRB.</p>
<p><img src="media/image5.svg" /></p>
<p>Figure 4.2.2-1: PDCP layer, functional view</p>
<p>Figure 4.2.2-2 represents the functional view of the PDCP entity
associated with the DAPS bearer for the PDCP sublayer; it should not
restrict implementation. The figure is based on the radio interface
protocol architecture defined in TS 38.300 [2].</p>
<p>For DAPS bearers, the PDCP entity is configured with two sets of
security functions and keys and two sets of header compression
protocols.</p>
<p><img src="media/image6.svg" /></p>
<p>Figure 4.2.2-2: PDCP layer associated with DAPS bearer, functional
view</p>
<h2 id="services">4.3 Services</h2>
<h3 id="services-provided-to-upper-layers">4.3.1 Services provided to
upper layers</h3>
<p>The PDCP layer provides its services to the RRC or SDAP layers. The
following services are provided by PDCP to upper layers:</p>
<p>- transfer of user plane data;</p>
<p>- transfer of control plane data;</p>
<p>- header compression;</p>
<p>- uplink data compression;</p>
<p>- ciphering;</p>
<p>- integrity protection.</p>
<p>The maximum supported size of a PDCP SDU is 9000 bytes. The maximum
supported size of a PDCP Control PDU is 9000 bytes.</p>
<h3 id="services-expected-from-lower-layers">4.3.2 Services expected
from lower layers</h3>
<p>A PDCP entity expects the following services from lower layers per
RLC entity (for a detailed description see TS 38.322 [5]):</p>
<p>- acknowledged data transfer service, including indication of
successful delivery of PDCP PDUs;</p>
<p>- unacknowledged data transfer service.</p>
<p>A PDCP entity expects the following service from SRAP entity (for a
detailed description see TS 38.351 [22]), if the PDCP entity is
associated with an SRAP entity:</p>
<p>- data transfer.</p>
<h2 id="functions">4.4 Functions</h2>
<p>The PDCP layer supports the following functions:</p>
<p>- transfer of data (user plane or control plane);</p>
<p>- maintenance of PDCP SNs;</p>
<p>- header compression and decompression using the ROHC protocol;</p>
<p>- header compression and decompression using the EHC protocol;</p>
<p>- uplink data compression and decompression using the UDC
protocol;</p>
<p>- ciphering and deciphering;</p>
<p>- integrity protection and integrity verification;</p>
<p>- timer based SDU discard;</p>
<p>- for split bearers and DAPS bearer, routing;</p>
<p>- duplication;</p>
<p>- reordering and in-order delivery;</p>
<p>- out-of-order delivery;</p>
<p>- duplicate discarding.</p>
<h1 id="procedures">5 Procedures</h1>
<h2 id="pdcp-entity-handling">5.1 PDCP entity handling</h2>
<h3 id="pdcp-entity-establishment">5.1.1 PDCP entity establishment</h3>
<p>When upper layers request a PDCP entity establishment for a radio
bearer for Uu or PC5 interface; or for NR sidelink communication for
groupcast and broadcast or for sidelink SRB4, when receiving the first
PDCP PDU, and there is not yet a corresponding PDCP entity, the UE
shall:</p>
<p>- establish a PDCP entity for the radio bearer;</p>
<p>- set the state variables of the PDCP entity to initial values;</p>
<p>- follow the procedures in clause 5.2.</p>
<p>NOTE: The receiving PDCP entity of sidelink SRB0 and sidelink SRB1 is
established same as NR sidelink groupcast and broadcast.</p>
<h3 id="pdcp-entity-re-establishment">5.1.2 PDCP entity
re-establishment</h3>
<p>When upper layers request a PDCP entity re-establishment, the UE
shall additionally perform once the procedures described in this clause
for Uu or PC5 interface. After performing the procedures in this clause,
the UE shall follow the procedures in clause 5.2.</p>
<p>When upper layers request a PDCP entity re-establishment, the
transmitting PDCP entity shall:</p>
<p>- for UM DRBs and AM DRBs, reset the ROHC protocol for uplink and
start with an IR state in U-mode (as defined in RFC 3095 [8] and RFC
4815 [9]) if <em>drb-ContinueROHC</em> is not configured in TS 38.331
[3];</p>
<p>- for UM DRBs and AM DRBs, reset the EHC protocol for uplink if
<em>drb-ContinueEHC-UL</em> is not configured in TS 38.331 [3];</p>
<p>- for AM DRBs, reset the UDC compression buffer to all zeros and
prefill the dictionary if <em>drb-ContinueUDC</em> is not configured in
TS 38.331 [3];</p>
<p>- for SRBs and UM DRBs, set TX_NEXT to the initial value;</p>
<p>- for SRBs, discard all stored PDCP SDUs and PDCP PDUs;</p>
<p>- apply the ciphering algorithm and key provided by upper layers
during the PDCP entity re-establishment procedure;</p>
<p>- apply the integrity protection algorithm and key provided by upper
layers during the PDCP entity re-establishment procedure;</p>
<p>- for UM DRBs, for each PDCP SDU already associated with a PDCP SN
but for which a corresponding PDU has not previously been submitted to
lower layers, and;</p>
<p>- for AM DRBs for Uu interface whose PDCP entities were suspended,
from the first PDCP SDU for which the successful delivery of the
corresponding PDCP Data PDU has not been confirmed by lower layers, for
each PDCP SDU already associated with a PDCP SN:</p>
<p>- consider the PDCP SDUs as received from upper layer;</p>
<p>- perform transmission of the PDCP SDUs in ascending order of the
COUNT value associated to the PDCP SDU prior to the PDCP
re-establishment without restarting the <em>discardTimer</em>, as
specified in clause 5.2.1;</p>
<p>- for AM DRBs whose PDCP entities were not suspended, from the first
PDCP SDU for which the successful delivery of the corresponding PDCP
Data PDU has not been confirmed by lower layers, perform retransmission
or transmission of all the PDCP SDUs already associated with PDCP SNs in
ascending order of the COUNT values associated to the PDCP SDU prior to
the PDCP entity re-establishment as specified below:</p>
<p>- perform header compression of the PDCP SDU using ROHC as specified
in the clause 5.7.4 and/or using EHC as specified in the clause
5.12.4;</p>
<p>- If <em>drb-ContinueUDC</em> is configured and if the PDCP SDU has
been compressed before:</p>
<p>- submit the PDCP SDU previously compressed to integrity protection
and ciphering function;</p>
<p>- else:</p>
<p>- perform uplink data compression of the PDCP SDU as specified in
clause 5.14.4, and submit the PDCP SDU to integrity protection and
ciphering function;</p>
<p>- perform integrity protection and ciphering of the PDCP SDU using
the COUNT value associated with this PDCP SDU as specified in the clause
5.9 and 5.8;</p>
<p>- submit the resulting PDCP Data PDU to lower layer, as specified in
clause 5.2.1.</p>
<p>When upper layers request a PDCP entity re-establishment, the
receiving PDCP entity shall:</p>
<p>- process the PDCP Data PDUs that are received from lower layers due
to the re-establishment of the lower layers, as specified in the clause
5.2.2.1;</p>
<p>- for SRBs, discard all stored PDCP SDUs and PDCP PDUs;</p>
<p>- for SRBs, UM DRBs and UM MRBs, if <em>t-Reordering</em> is
running:</p>
<p>- stop and reset <em>t-Reordering</em>;</p>
<p>- for UM DRBs and UM MRBs, deliver all stored PDCP SDUs to the upper
layers in ascending order of associated COUNT values after performing
header decompression;</p>
<p>- for AM DRBs and AM MRBs for Uu interface, perform header
decompression using ROHC for all stored PDCP SDUs if
<em>drb-ContinueROHC</em> is not configured in TS 38.331 [3];</p>
<p>- for AM DRBs for PC5 interface, perform header decompression using
ROHC for all stored PDCP IP SDUs;</p>
<p>- for AM DRBs and AM MRBs for Uu interface, perform header
decompression using EHC for all stored PDCP SDUs if
<em>drb-ContinueEHC-DL</em> is not configured in TS 38.331 [3];</p>
<p>- for UM DRBs, AM DRBs, UM MRBs and AM MRBs, reset the ROHC protocol
for downlink and start with NC state in U-mode (as defined in RFC 3095
[8] and RFC 4815 [9]) if <em>drb-ContinueROHC</em> is not configured in
TS 38.331 [3];</p>
<p>- for UM DRBs, AM DRBs, UM MRBs and AM MRBs, reset the EHC protocol
for downlink if <em>drb-ContinueEHC-DL</em> is not configured in TS
38.331 [3];</p>
<p>- for SRBs and UM DRBs, set RX_NEXT and RX_DELIV to the initial
value;</p>
<p>- for UM MRBs and AM MRBs, set RX_NEXT and RX_DELIV to the initial
value if <em>initialRX-DELIV</em> is configured in TS 38.331 [3];</p>
<p>- apply the ciphering algorithm and key provided by upper layers
during the PDCP entity re-establishment procedure;</p>
<p>- apply the integrity protection algorithm and key provided by upper
layers during the PDCP entity re-establishment procedure.</p>
<p>NOTE 1: After PDCP re-establishment on a sidelink ‎SRB/DRB, UE
determines when to transmit and receive with the new key and discard the
old key as specified in TS ‎‎33.536 [14].‎</p>
<p>NOTE 2: At PDCP re-establishment, the MRB type (i.e. UM MRB or AM
MRB) is determined by the target configuration.‎</p>
<h3 id="pdcp-entity-release">5.1.3 PDCP entity release</h3>
<p>When upper layers request a PDCP entity release for a radio bearer
for Uu or PC5 interface, the UE shall:</p>
<p>- discard all stored PDCP SDUs and PDCP PDUs in the transmitting PDCP
entity;</p>
<p>- for UM DRBs, AM DRBs, UM MRBs and AM MRBs, deliver the PDCP SDUs
stored in the receiving PDCP entity to upper layers in ascending order
of associated COUNT values after performing header decompression, if not
decompressed before;</p>
<p>- release the PDCP entity for the radio bearer.</p>
<p>NOTE: For NR sidelink communication for groupcast and broadcast or
for sidelink SRB4, the receiving PDCP entity release for an SLRB is up
to UE implementation.</p>
<h3 id="pdcp-entity-suspend">5.1.4 PDCP entity suspend</h3>
<p>When upper layers request a PDCP entity suspend, the transmitting
PDCP entity shall:</p>
<p>- set TX_NEXT to the initial value;</p>
<p>- discard all stored PDCP PDUs;</p>
<p>When upper layers request a PDCP entity suspend, the receiving PDCP
entity shall:</p>
<p>- if t-<em>Reordering</em> is running:</p>
<p>- stop and reset <em>t-Reordering</em>;</p>
<p>- deliver all stored PDCP SDUs to the upper layers in ascending order
of associated COUNT values after performing header decompression;</p>
<p>- set RX_NEXT and RX_DELIV to the initial value, except for MRB.</p>
<h3 id="pdcp-entity-reconfiguration">5.1.5 PDCP entity
reconfiguration</h3>
<p>When upper layers reconfigure the PDCP entity to configure DAPS, the
UE shall:</p>
<p>- establish a ciphering function for the radio bearer and apply the
ciphering algorithm and key provided by upper layers for the ciphering
function;</p>
<p>- establish an integrity protection function for the radio bearer and
apply the integrity protection algorithm and key provided by upper
layers for the integrity protection function;</p>
<p>- establish a header compression protocol for the radio bearer and
apply the header compression configuration provided by upper layers for
the header compression protocol.</p>
<p>When upper layers reconfigure the PDCP entity to release DAPS, the UE
shall:</p>
<p>- release the ciphering function associated to the released RLC
entity for the radio bearer;</p>
<p>- release the integrity protection function associated to the
released RLC entity for the radio bearer;</p>
<p>- release the header compression protocol associated to the released
RLC entity for the radio bearer.</p>
<p>NOTE 1: The state variables which control the transmission and
reception operation should not be reset, and the timers including
<em>t-Reordering</em> and <em>discardTimer</em> keep running during PDCP
entity reconfiguration procedure.</p>
<p>NOTE 2: Before releasing the header compression protocol associated
to the released RLC entity, how to handle all stored PDCP SDUs received
from the released RLC entity is left up to UE implementation.</p>
<p>NOTE 3: No special handling for the header compression protocol is
defined to avoid potential security issue (e.g. keystream reuse) for
DAPS handover with no security key change.</p>
<h2 id="data-transfer">5.2 Data transfer</h2>
<h3 id="transmit-operation">5.2.1 Transmit operation</h3>
<p>At reception of a PDCP SDU from upper layers, the transmitting PDCP
entity shall:</p>
<p>- start the <em>discardTimer</em> associated with this PDCP SDU (if
configured).</p>
<p>For a PDCP SDU received from upper layers, the transmitting PDCP
entity shall:</p>
<p>- associate the COUNT value corresponding to TX_NEXT to this PDCP
SDU;</p>
<p>NOTE 1: Associating more than half of the PDCP SN space of contiguous
PDCP SDUs with PDCP SNs, when e.g., the PDCP SDUs are discarded or
transmitted without acknowledgement, may cause HFN desynchronization
problem. How to prevent HFN desynchronization problem is left up to UE
implementation.</p>
<p>- perform header compression of the PDCP SDU using ROHC as specified
in the clause 5.7.4 and/or using EHC as specified in the clause
5.12.4;</p>
<p>- perform uplink data compression of the PDCP SDU as specified in
clause 5.14.4;</p>
<p>- perform integrity protection, and ciphering using the TX_NEXT as
specified in the clause 5.9 and 5.8, respectively;</p>
<p>- set the PDCP SN of the PDCP Data PDU to TX_NEXT modulo
2<sup>[<em>pdcp-SN-SizeUL</em>]</sup>;</p>
<p>- increment TX_NEXT by one;</p>
<p>- submit the resulting PDCP Data PDU to lower layer as specified
below.</p>
<p>When submitting a PDCP PDU to lower layer, the transmitting PDCP
entity shall:</p>
<p>- if the transmitting PDCP entity is associated with an SRAP
entity:</p>
<p>- submit the PDCP PDU to the associated SRAP entity;</p>
<p>- else, if the transmitting PDCP entity is associated with one RLC
entity:</p>
<p>- submit the PDCP PDU to the associated RLC entity;</p>
<p>- else, if the transmitting PDCP entity is associated with at least
two RLC entities:</p>
<p>- if the PDCP duplication is activated for the RB:</p>
<p>- if the PDCP PDU is a PDCP Data PDU:</p>
<p>- duplicate the PDCP Data PDU and submit the PDCP Data PDU to the
associated RLC entities activated for PDCP duplication;</p>
<p>- else:</p>
<p>- submit the PDCP Control PDU to the primary RLC entity;</p>
<p>- else (i.e. the PDCP duplication is deactivated for the RB or the RB
is a DAPS bearer):</p>
<p>- if the split secondary RLC entity is configured; and</p>
<p>- if the total amount of PDCP data volume and RLC data volume pending
for initial transmission (as specified in TS 38.322 [5]) in the primary
RLC entity and the split secondary RLC entity is equal to or larger than
<em>ul-DataSplitThreshold</em>:</p>
<p>- submit the PDCP PDU to either the primary RLC entity or the split
secondary RLC entity;</p>
<p>- else, if the transmitting PDCP entity is associated with the DAPS
bearer:</p>
<p>- if the uplink data switching has not been requested:</p>
<p>- submit the PDCP PDU to the RLC entity associated with the source
cell;</p>
<p>- else:</p>
<p>- if the PDCP PDU is a PDCP Data PDU:</p>
<p>- submit the PDCP Data PDU to the RLC entity associated with the
target cell;</p>
<p>- else:</p>
<p>- if the PDCP Control PDU is associated with source cell:</p>
<p>- submit the PDCP Control PDU to the RLC entity associated with the
source cell;</p>
<p>- else:</p>
<p>- submit the PDCP Control PDU to the RLC entity associated with the
target cell;</p>
<p>- else:</p>
<p>- submit the PDCP PDU to the primary RLC entity.</p>
<p>NOTE 2: If the transmitting PDCP entity is associated with two RLC
entities, the UE should minimize the amount of PDCP PDUs submitted to
lower layers before receiving request from lower layers and minimize the
PDCP SN gap between PDCP PDUs submitted to two associated RLC entities
to minimize PDCP reordering delay in the receiving PDCP entity.</p>
<h3 id="receive-operation">5.2.2 Receive operation</h3>
<h4
id="actions-when-a-pdcp-data-pdu-is-received-from-lower-layers">5.2.2.1
Actions when a PDCP Data PDU is received from lower layers</h4>
<p>In this clause, following definitions are used:</p>
<p>- HFN(State Variable): the HFN part (i.e. the number of most
significant bits equal to HFN length) of the State Variable;</p>
<p>- SN(State Variable): the SN part (i.e. the number of least
significant bits equal to PDCP SN length) of the State Variable;</p>
<p>- RCVD_SN: the PDCP SN of the received PDCP Data PDU, included in the
PDU header;</p>
<p>- RCVD_HFN: the HFN of the received PDCP Data PDU, calculated by the
receiving PDCP entity;</p>
<p>- RCVD_COUNT: the COUNT of the received PDCP Data PDU = [RCVD_HFN,
RCVD_SN].</p>
<p>At reception of a PDCP Data PDU from lower layers, the receiving PDCP
entity shall determine the COUNT value of the received PDCP Data PDU,
i.e. RCVD_COUNT, as follows:</p>
<p>- if RCVD_SN &lt; SN(RX_DELIV) – Window_Size:</p>
<p>- RCVD_HFN = HFN(RX_DELIV) + 1.</p>
<p>- else if RCVD_SN &gt;= SN(RX_DELIV) + Window_Size:</p>
<p>- RCVD_HFN = HFN(RX_DELIV) – 1.</p>
<p>- else:</p>
<p>- RCVD_HFN = HFN(RX_DELIV);</p>
<p>- RCVD_COUNT = [RCVD_HFN, RCVD_SN].</p>
<p>After determining the COUNT value of the received PDCP Data PDU =
RCVD_COUNT, the receiving PDCP entity shall:</p>
<p>- perform deciphering and integrity verification of the PDCP Data PDU
using COUNT = RCVD_COUNT;</p>
<p>- if integrity verification fails:</p>
<p>- indicate the integrity verification failure to upper layer;</p>
<p>- discard the PDCP Data PDU and consider it as not received;</p>
<p>- if RCVD_COUNT &lt; RX_DELIV; or</p>
<p>- if the PDCP Data PDU with COUNT = RCVD_COUNT has been received
before:</p>
<p>- discard the PDCP Data PDU;</p>
<p>If the received PDCP Data PDU with COUNT value = RCVD_COUNT is not
discarded above, the receiving PDCP entity shall:</p>
<p>- store the resulting PDCP SDU in the reception buffer;</p>
<p>- if RCVD_COUNT &gt;= RX_NEXT:</p>
<p>- update RX_NEXT to RCVD_COUNT + 1.</p>
<p>- if <em>outOfOrderDelivery</em> is configured:</p>
<p>- deliver the resulting PDCP SDU to upper layers after performing
header decompression using EHC.</p>
<p>- if RCVD_COUNT = RX_DELIV:</p>
<p>- deliver to upper layers in ascending order of the associated COUNT
value after performing header decompression, if not decompressed
before;</p>
<p>- all stored PDCP SDU(s) with consecutively associated COUNT value(s)
starting from COUNT = RX_DELIV;</p>
<p>- update RX_DELIV to the COUNT value of the first PDCP SDU which has
not been delivered to upper layers, with COUNT value &gt; RX_DELIV;</p>
<p>- if <em>t-Reordering</em> is running, and if RX_DELIV &gt;=
RX_REORD:</p>
<p>- stop and reset <em>t-Reordering</em>.</p>
<p>- if <em>t-Reordering</em> is not running (includes the case when
<em>t-Reordering</em> is stopped due to actions above), and RX_DELIV
&lt; RX_NEXT:</p>
<p>- update RX_REORD to RX_NEXT;</p>
<p>- start <em>t-Reordering</em>.</p>
<h4 id="actions-when-a-t-reordering-expires">5.2.2.2 Actions when a
<em>t-Reordering</em> expires</h4>
<p>When <em>t-Reordering</em> expires, the receiving PDCP entity
shall:</p>
<p>- deliver to upper layers in ascending order of the associated COUNT
value after performing header decompression, if not decompressed
before:</p>
<p>- all stored PDCP SDU(s) with associated COUNT value(s) &lt;
RX_REORD;</p>
<p>- all stored PDCP SDU(s) with consecutively associated COUNT value(s)
starting from RX_REORD;</p>
<p>- update RX_DELIV to the COUNT value of the first PDCP SDU which has
not been delivered to upper layers, with COUNT value &gt;= RX_REORD;</p>
<p>- if RX_DELIV &lt; RX_NEXT:</p>
<p>- update RX_REORD to RX_NEXT;</p>
<p>- start <em>t-Reordering</em>.</p>
<h4 id="actions-when-the-value-of-t-reordering-is-reconfigured">5.2.2.3
Actions when the value of <em>t-Reordering</em> is reconfigured</h4>
<p>When the value of the <em>t-Reordering</em> is reconfigured by upper
layers while the <em>t-Reordering</em> is running, the receiving PDCP
entity shall:</p>
<p>- update RX_REORD to RX_NEXT;</p>
<p>- stop and restart <em>t-Reordering</em>.</p>
<h3 id="sidelink-transmit-operation">5.2.3 Sidelink transmit
operation</h3>
<p>For NR sidelink transmission of the SLRB, the UE shall follow the
procedures in clause 5.2.1 with following modification:</p>
<p>- perform the header compression using ROHC as specified in clause
5.7.4, if SDU Type is IP;</p>
<p>- set the PDCP SN of the PDCP Data PDU to TX_NEXT modulo
2<sup>[<em>sl-PDCP-SN-Size</em>]</sup>.</p>
<h3 id="sidelink-receive-operation">5.2.4 Sidelink receive
operation</h3>
<p>For sidelink reception of the SLRB, the UE shall follow the
procedures in clause 5.2.2 with following modification:</p>
<p>- perform the header decompression using ROHC as specified in clause
5.7.5, if SDU Type is IP.</p>
<p>NOTE: For reception of sidelink SRBs except sidelink SRB3, the UE may
deliver the PDCP SDU to the upper layer along with an indication whether
it is PC5-S message or NR sidelink discovery message.</p>
<h2 id="sdu-discard">5.3 SDU discard</h2>
<p>When the <em>discardTimer</em> expires for a PDCP SDU, or the
successful delivery of a PDCP SDU is confirmed by PDCP status report,
the transmitting PDCP entity shall discard the PDCP SDU along with the
corresponding PDCP Data PDU. If the corresponding PDCP Data PDU has
already been submitted to lower layers, the discard is indicated to
lower layers.</p>
<p>For SRBs, when upper layers request a PDCP SDU discard, the PDCP
entity shall discard all stored PDCP SDUs and PDCP PDUs.</p>
<p>NOTE: Discarding a PDCP SDU already associated with a PDCP SN causes
a SN gap in the transmitted PDCP Data PDUs, which increases PDCP
reordering delay in the receiving PDCP entity. It is up to UE
implementation how to minimize SN gap after SDU discard.</p>
<h2 id="status-reporting">5.4 Status reporting</h2>
<h3 id="transmit-operation-1">5.4.1 Transmit operation</h3>
<p>For AM DRBs configured by upper layers to send a PDCP status report
in the uplink (<em>statusReportRequired</em> in TS 38.331 [3]), the
receiving PDCP entity shall trigger a PDCP status report when:</p>
<p>- upper layer requests a PDCP entity re-establishment;</p>
<p>- upper layer requests a PDCP data recovery;</p>
<p>- upper layer requests a uplink data switching;</p>
<p>- upper layer reconfigures the PDCP entity to release DAPS and
<em>daps-SourceRelease</em> is configured in TS 38.331 [3].</p>
<p>For UM DRBs configured by upper layers to send a PDCP status report
in the uplink (<em>statusReportRequired</em> in TS 38.331 [3]), the
receiving PDCP entity shall trigger a PDCP status report when:</p>
<p>- upper layer requests a uplink data switching.</p>
<p>For AM DRBs in the sidelink, the receiving PDCP entity shall trigger
a PDCP status report when:</p>
<p>- upper layer requests a PDCP entity re-establishment.</p>
<p>For AM MRBs configured by upper layers to send a PDCP status report
in the uplink (<em>statusReportRequired</em> in TS 38.331 [3]), the
receiving PDCP entity shall trigger a PDCP status report when:</p>
<p>- upper layer requests a PDCP entity re-establishment;</p>
<p>- upper layer requests a PDCP data recovery.</p>
<p>If a PDCP status report is triggered, the receiving PDCP entity
shall:</p>
<p>- compile a PDCP status report as indicated below by:</p>
<p>- setting the FMC field to RX_DELIV;</p>
<p>- if RX_DELIV &lt; RX_NEXT:</p>
<p>- allocating a Bitmap field of length in bits equal to the number of
COUNTs from and not including the first missing PDCP SDU up to and
including the last out-of-sequence PDCP SDUs, rounded up to the next
multiple of 8, or up to and including a PDCP SDU for which the resulting
PDCP Control PDU size is equal to 9000 bytes, whichever comes first;</p>
<p>- setting in the bitmap field as '0' for all PDCP SDUs that have not
been received, and optionally PDCP SDUs for which decompression have
failed;</p>
<p>- setting in the bitmap field as '1' for all PDCP SDUs that have been
received;</p>
<p>- submit the PDCP status report to lower layers as the first PDCP PDU
for transmission via the transmitting PDCP entity as specified in clause
5.2.1 for Uu interface and in clause 5.2.3 for PC5 interface.</p>
<h3 id="receive-operation-1">5.4.2 Receive operation</h3>
<p>For AM DRBs, when a PDCP status report is received in the downlink or
in the sidelink, the transmitting PDCP entity shall:</p>
<p>- consider for each PDCP SDU, if any, with the bit in the bitmap set
to '1', or with the associated COUNT value less than the value of FMC
field as successfully delivered, and discard the PDCP SDU as specified
in clause 5.3.</p>
<h2 id="data-recovery">5.5 Data recovery</h2>
<p>For AM DRBs, when upper layers request a PDCP data recovery for a
radio bearer, the transmitting PDCP entity shall:</p>
<p>- perform retransmission of all the PDCP Data PDUs previously
submitted to re-established or released AM RLC entities in ascending
order of the associated COUNT values for which the successful delivery
has not been confirmed by lower layers, following the data submission
procedure in clause 5.2.1.</p>
<p>After performing the above procedures, the transmitting PDCP entity
shall follow the procedures in clause 5.2.1.</p>
<h2 id="data-volume-calculation">5.6 Data volume calculation</h2>
<p>For the purpose of MAC buffer status reporting, the transmitting PDCP
entity shall consider the following as PDCP data volume:</p>
<p>- the PDCP SDUs for which no PDCP Data PDUs have been
constructed;</p>
<p>- the PDCP Data PDUs that have not been submitted to lower
layers;</p>
<p>- the PDCP Control PDUs;</p>
<p>- for AM DRBs, the PDCP SDUs to be retransmitted according to clause
5.1.2 and clause 5.13;</p>
<p>- for AM DRBs, the PDCP Data PDUs to be retransmitted according to
clause 5.5.</p>
<p>If the transmitting PDCP entity is associated with at least two RLC
entities, when indicating the PDCP data volume to a MAC entity for BSR
triggering and Buffer Size calculation (as specified in TS 38.321 [4]
and TS 36.321 [12]), the transmitting PDCP entity shall:</p>
<p>- if the PDCP duplication is activated for the RB:</p>
<p>- indicate the PDCP data volume to the MAC entity associated with the
primary RLC entity;</p>
<p>- indicate the PDCP data volume excluding the PDCP Control PDU to the
MAC entity associated with the RLC entity other than the primary RLC
entity activated for PDCP duplication;</p>
<p>- indicate the PDCP data volume as 0 to the MAC entity associated
with RLC entity deactivated for PDCP duplication;</p>
<p>- else (i.e. the PDCP duplication is deactivated for the RB or the RB
is a DAPS bearer):</p>
<p>- if the split secondary RLC entity is configured; and</p>
<p>- if the total amount of PDCP data volume and RLC data volume pending
for initial transmission (as specified in TS 38.322 [5]) in the primary
RLC entity and the split secondary RLC entity is equal to or larger than
<em>ul-DataSplitThreshold</em>:</p>
<p>- indicate the PDCP data volume to both the MAC entity associated
with the primary RLC entity and the MAC entity associated with the split
secondary RLC entity;</p>
<p>- indicate the PDCP data volume as 0 to the MAC entity associated
with RLC entity other than the primary RLC entity and the split
secondary RLC entity;</p>
<p>- else, if the transmitting PDCP entity is associated with the DAPS
bearer:</p>
<p>- if the uplink data switching has not been requested:</p>
<p>- indicate the PDCP data volume to the MAC entity associated with the
source cell;</p>
<p>- else:</p>
<p>- indicate the PDCP data volume excluding the PDCP Control PDU for
interspersed ROHC feedback associated with the source cell to the MAC
entity associated with the target cell;</p>
<p>- indicate the PDCP data volume of PDCP Control PDU for interspersed
ROHC feedback associated with the source cell to the MAC entity
associated with the source cell;</p>
<p>- else:</p>
<p>- indicate the PDCP data volume to the MAC entity associated with the
primary RLC entity;</p>
<p>- indicate the PDCP data volume as 0 to the MAC entity associated
with the RLC entity other than the primary RLC entity.</p>
<h2 id="robust-header-compression-and-decompression">5.7 Robust header
compression and decompression</h2>
<h3 id="supported-header-compression-protocols-and-profiles">5.7.1
Supported header compression protocols and profiles</h3>
<p>The ROHC protocol is based on the Robust Header Compression (ROHC)
framework defined in RFC 5795 [7]. There are multiple ROHC algorithms,
called profiles, defined for the ROHC framework. Each profile is
specific to the particular network layer, transport layer or upper layer
protocol combination e.g. TCP/IP and RTP/UDP/IP.</p>
<p>The detailed definition of the ROHC channel is specified as part of
the ROHC framework defined in RFC 5795 [7]. This includes how to
multiplex different flows (header compressed or not) over the ROHC
channel, as well as how to associate a specific IP flow with a specific
context state during initialization of the compression algorithm for
that flow.</p>
<p>The implementation of the functionality of the ROHC framework and of
the functionality of the supported header compression profiles is not
covered in this specification.</p>
<p>In this version of the specification the support of the following
profiles is described:</p>
<p>Table 5.7.1-1: Supported ROHC protocols and profiles</p>
<table>
<colgroup>
<col style="width: 31%" />
<col style="width: 29%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">Profile Identifier</th>
<th>Usage</th>
<th>Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0x0000</td>
<td>No compression</td>
<td>RFC 5795</td>
</tr>
<tr>
<td style="text-align: center;">0x0001</td>
<td>RTP/UDP/IP</td>
<td>RFC 3095, RFC 4815</td>
</tr>
<tr>
<td style="text-align: center;">0x0002</td>
<td>UDP/IP</td>
<td>RFC 3095, RFC 4815</td>
</tr>
<tr>
<td style="text-align: center;">0x0003</td>
<td>ESP/IP</td>
<td>RFC 3095, RFC 4815</td>
</tr>
<tr>
<td style="text-align: center;">0x0004</td>
<td>IP</td>
<td>RFC 3843, RFC 4815</td>
</tr>
<tr>
<td style="text-align: center;">0x0006</td>
<td>TCP/IP</td>
<td>RFC 6846</td>
</tr>
<tr>
<td style="text-align: center;">0x0101</td>
<td>RTP/UDP/IP</td>
<td>RFC 5225</td>
</tr>
<tr>
<td style="text-align: center;">0x0102</td>
<td>UDP/IP</td>
<td>RFC 5225</td>
</tr>
<tr>
<td style="text-align: center;">0x0103</td>
<td>ESP/IP</td>
<td>RFC 5225</td>
</tr>
<tr>
<td style="text-align: center;">0x0104</td>
<td>IP</td>
<td>RFC 5225</td>
</tr>
</tbody>
</table>
<h3 id="configuration-of-rohc">5.7.2 Configuration of ROHC</h3>
<p>PDCP entities associated with DRBs and MRBs can be configured by
upper layers TS 38.331 [3] to use ROHC. Each PDCP entity carrying user
plane data may be configured to use ROHC. PDCP entities associated with
sidelink DRBs can be configured to use ROHC for IP SDUs. For DRBs and
MRBs other than DAPS bearers, the PDCP entity uses at most one ROHC
compressor instance and at most one ROHC decompressor instance. For DAPS
bearers, the PDCP entity uses at most one ROHC compressor instance (i.e.
use the ROHC compressor instance for source cell before uplink data
switching, and use the ROHC compressor instance for target cell after
uplink data switching) and at most two ROHC decompressor instances.</p>
<h3 id="protocol-parameters">5.7.3 Protocol parameters</h3>
<p>RFC 5795 [7] has configuration parameters that are mandatory and that
must be configured by upper layers between compressor and decompressor
peers ; these parameters define the ROHC channel. The ROHC channel is a
unidirectional channel, i.e. if <em>rohc</em> is configured there is one
channel for the downlink and one for the uplink, and if
<em>uplinkOnlyROHC</em> is configured there is only one channel for the
uplink. There is thus one set of parameters for each channel, and if
<em>rohc</em> is configured the same values shall be used for both
channels belonging to the same PDCP entity.</p>
<p>These parameters are categorized in two different groups, as defined
below:</p>
<p>- M: Mandatory and configured by upper layers;</p>
<p>- N/A: Not used in this specification.</p>
<p>The usage and definition of the parameters shall be as specified
below.</p>
<p>- MAX_CID (M): This is the maximum CID value that can be used. One
CID value shall always be reserved for uncompressed flows. The parameter
MAX_CID is configured by upper layers (<em>maxCID</em> in TS 38.331
[3]);</p>
<p>- LARGE_CIDS: This value is not configured by upper layers, but
rather it is inferred from the configured value of MAX_CID according to
the following rule:</p>
<p>- If MAX_CID &gt; 15 then LARGE_CIDS = TRUE else LARGE_CIDS =
FALSE;</p>
<p>- PROFILES (M): Profiles are used to define which profiles are
allowed to be used by the UE. The list of supported profiles is
described in clause 5.7.1. The parameter PROFILES is configured by upper
layers (<em>profiles</em> for uplink and downlink,
<em>sl-RoHC-Profiles</em> in <em>SidelinkPreconfigNR</em> for sidelink
in TS 38.331 [3]);</p>
<p>- FEEDBACK_FOR (N/A): This is a reference to the channel in the
opposite direction between two compression endpoints and indicates to
what channel any feedback sent refers to. Feedback received on one ROHC
channel for this PDCP entity shall always refer to the ROHC channel in
the opposite direction for this same PDCP entity;</p>
<p>- MRRU (N/A): ROHC segmentation is not used.</p>
<h3 id="header-compression-using-rohc">5.7.4 Header compression using
ROHC</h3>
<p>If ROHC is configured, the ROHC protocol generates two types of
output packets:</p>
<p>- ROHC compressed packets, each associated with one PDCP SDU;</p>
<p>- standalone packets not associated with a PDCP SDU, i.e.
interspersed ROHC feedback.</p>
<p>A ROHC compressed packet is associated with the same PDCP SN and
COUNT value as the related PDCP SDU. The header compression is not
applicable to the SDAP header and the SDAP Control PDU if included in
the PDCP SDU.</p>
<p>For DAPS bearers, the PDCP entity shall perform the header
compression for the PDCP SDU using the ROHC protocol either configured
for the source cell or configured for the target cell, based on to which
cell the PDCP SDU is transmitted.</p>
<p>Interspersed ROHC feedback are not associated with a PDCP SDU. They
are not associated with a PDCP SN and are not ciphered.</p>
<p>NOTE 1: If the MAX_CID number of ROHC contexts are already
established for the compressed flows and a new IP flow does not match
any established ROHC context, the compressor should associate the new IP
flow with one of the ROHC CIDs allocated for the existing compressed
flows or send PDCP SDUs belonging to the IP flow as uncompressed
packet.</p>
<p>NOTE 2: For downlink, the ROHC protocol of the target cell should
maintain the IR state if operating in U-mode and O-mode during DAPS
handover before release of source cell.</p>
<h3 id="header-decompression-using-rohc">5.7.5 Header decompression
using ROHC</h3>
<p>If ROHC is configured by upper layers for PDCP entities associated
with user plane data, the PDCP Data PDUs are decompressed by the ROHC
protocol after performing deciphering as explained in clause 5.8. The
header decompression is not applicable to the SDAP header and the SDAP
Control PDU if included in the PDCP Data PDU.</p>
<p>For DAPS bearers, the PDCP entity shall perform the header
decompression for the PDCP SDU using the ROHC protocol either configured
for the source cell or configured for the target cell, based on from
which cell the PDCP SDU is received.</p>
<h3 id="pdcp-control-pdu-for-interspersed-rohc-feedback">5.7.6 PDCP
Control PDU for interspersed ROHC feedback</h3>
<h4 id="transmit-operation-2">5.7.6.1 Transmit Operation</h4>
<p>When an interspersed ROHC feedback is generated by the ROHC protocol,
the transmitting PDCP entity shall:</p>
<p>- submit to lower layers the corresponding PDCP Control PDU as
specified in clause 6.2.3.2 i.e. without associating a PDCP SN, nor
performing ciphering, as specified in clause 5.2.1.</p>
<h4 id="receive-operation-2">5.7.6.2 Receive Operation</h4>
<p>At reception of a PDCP Control PDU for interspersed ROHC feedback
from lower layers, the receiving PDCP entity shall:</p>
<p>- deliver the corresponding interspersed ROHC feedback to the
associated ROHC protocol without performing deciphering.</p>
<h2 id="ciphering-and-deciphering">5.8 Ciphering and deciphering</h2>
<p>The ciphering function includes both ciphering and deciphering and is
performed in PDCP, if configured. The data unit that is ciphered is the
MAC-I (see clause 6.3.4) and the data part of the PDCP Data PDU (see
clause 6.3.3) except the SDAP header and the SDAP Control PDU if
included in the PDCP SDU. The ciphering is not applicable to PDCP
Control PDUs.</p>
<p>For downlink and uplink, the ciphering algorithm and key to be used
by the PDCP entity are configured by upper layers TS 38.331 [3] and the
ciphering method shall be applied as specified in TS 33.501 [6].</p>
<p>The ciphering function is activated/suspended/resumed by upper layers
TS 38.331 [3]. When security is activated and not suspended, the
ciphering function shall be applied to all PDCP Data PDUs indicated by
upper layers TS 38.331 [3] for the downlink and the uplink,
respectively.</p>
<p>For DAPS bearers, the PDCP entity shall perform the ciphering or
deciphering for the PDCP SDU using the ciphering algorithm and key
either configured for the source cell or configured for the target cell,
based on to/from which cell the PDCP SDU is transmitted/received.</p>
<p>For downlink and uplink ciphering and deciphering, the parameters
that are required by PDCP for ciphering are defined in TS 33.501 [6] and
are input to the ciphering algorithm. The required inputs to the
ciphering function include the COUNT value, and DIRECTION (direction of
the transmission: set as specified in TS 33.501 [6]). The parameters
required by PDCP which are provided by upper layers TS 38.331 [3] are
listed below:</p>
<p>- BEARER (defined as the radio bearer identifier in TS 33.501 [6]. It
will use the value RB identity –1 as in TS 38.331 [3]);</p>
<p>- KEY (the ciphering keys for the control plane and for the user
plane are K<sub>RRCenc</sub> and K<sub>UPenc</sub>, respectively).</p>
<p>For NR sidelink communication, the ciphering algorithm and key to be
used by the PDCP entity are configured by upper layers as specified in
TS 24.587 [16] and the ciphering method shall be applied as specified in
TS 33.536 [14].</p>
<p>For NR sidelink communication, the ciphering function is activated
for sidelink SRBs (except for SL-SRB0) and/or sidelink DRBs for a PC5
unicast ‎link by upper layers, as specified in TS 38.331 [3]. When
security is activated for sidelink SRBs, the ciphering function ‎shall be
applied to all PDCP Data PDUs (except for carrying Direct Security Mode
Command message as specified in TS 33.536 [14]) for the sidelink SRBs
which belong to ‎the PC5 unicast link.‎ When security is activated for
sidelink DRBs, the ciphering function ‎shall be applied to all PDCP Data
PDUs for the sidelink DRBs which belong to ‎the PC5 unicast link.‎</p>
<p>For NR sidelink communication, the ciphering and deciphering function
as specified in TS 33.536 [14] is applied with KEY (NRPEK), COUNT,
BEARER (LSB 5 bits of LCID as specified in TS 38.321 [4]) and DIRECTION
(which value shall be set is specified in TS 33.536 [14]) as input.</p>
<p>The ciphering and deciphering are not applied to MRBs and sidelink
SRB4.</p>
<h2 id="integrity-protection-and-verification">5.9 Integrity protection
and verification</h2>
<p>The integrity protection function includes both integrity protection
and integrity verification and is performed in PDCP, if configured. The
data unit that is integrity protected is the PDU header and the data
part of the PDU before ciphering. The integrity protection is always
applied to PDCP Data PDUs of SRBs. The integrity protection is applied
to sidelink SRB1, SRB2 and SRB3. The integrity protection is applied to
PDCP Data PDUs of DRBs (including sidelink DRBs for unicast) for which
integrity protection is configured. The integrity protection is not
applicable to PDCP Control PDUs.</p>
<p>For downlink and uplink, the integrity protection algorithm and key
to be used by the PDCP entity are configured by upper layers TS 38.331
[3] and the integrity protection method shall be applied as specified in
TS 33.501 [6] for NR and in TS 33.401 [17] for E-UTRA/EPC.</p>
<p>The integrity protection function is activated/suspended/resumed by
upper layers TS 38.331 [3]. When security is activated and not
suspended, the integrity protection function shall be applied to all
PDUs including and subsequent to the PDU indicated by upper layers TS
38.331 [3] for the downlink and the uplink, respectively.</p>
<p>NOTE 1: As the RRC message which activates the integrity protection
function is itself integrity protected with the configuration included
in this RRC message, this message needs first be decoded by RRC before
the integrity protection verification could be performed for the PDU in
which the message was received.</p>
<p>NOTE 2: As the PC5-S message which activates the integrity protection
function is itself integrity protected with the configuration included
in this PC5-S message, this message needs first be decoded by upper
layer before the integrity protection verification could be performed
for the PDU in which the message was received.</p>
<p>For DAPS bearers, the PDCP entity shall perform the integrity
protection or verification for the PDCP SDU using the integrity
protection algorithm and key either configured for the source cell or
configured for the target cell, based on to/from which cell the PDCP SDU
is transmitted/received.</p>
<p>For downlink and uplink integrity protection and verification, the
parameters that are required by PDCP for integrity protection are
defined in TS 33.501 [6] or TS 33.401 [17] and are input to the
integrity protection algorithm. The required inputs to the integrity
protection function include the COUNT value, and DIRECTION (direction of
the transmission: set as specified in TS 33.501 [6]) or TS 33.401 [17].
The parameters required by PDCP which are provided by upper layers TS
38.331 [3] are listed below:</p>
<p>- BEARER (defined as the radio bearer identifier in TS 33.501 [6] or
TS 33.401 [17]. It will use the value RB identity –1 as in TS 38.331
[3]);</p>
<p>- KEY (the integrity protection keys for the control plane and for
the user plane are K<sub>RRCint</sub> and K<sub>UPint</sub>,
respectively).</p>
<p>For NR sidelink communication, the integrity protection algorithm and
key to be used by the PDCP entity are configured by upper layers TS
24.587 [16] and the integrity protection method shall be applied as
specified in TS 33.536 [14].</p>
<p>For NR sidelink communication, the integrity protection function is
activated for sidelink SRBs and/or sidelink DRBs for a PC5 unicast link
‎by upper layers, as specified in TS 38.331 [3]. When security is
activated for sidelink SRBs, the integrity protection ‎function shall be
applied to all PDUs including and subsequent to the PDU for the ‎sidelink
SRBs which belong to the PC5 unicast link.‎ When security is activated
for sidelink DRBs, the integrity protection ‎function shall be applied to
all PDUs including and subsequent to the PDU for the ‎sidelink DRBs which
belong to the PC5 unicast link.‎</p>
<p>For the SLRB that needs integrity protection and verification, the
parameters that are required by PDCP for integrity protection are
defined in TS 33.536 [14] and are input to the integrity protection
algorithm. The required inputs to the integrity protection function
include the KEY (NRPIK), COUNT, BEARER (LSB 5 bits of LCID as specified
in TS 38.321 [4]) and DIRECTION (which value shall be set is specified
in TS 33.536 [14]).</p>
<p>At transmission, the UE computes the value of the MAC-I field and at
reception it verifies the integrity of the PDCP Data PDU by calculating
the X-MAC based on the input parameters as specified above. If the
calculated X-MAC corresponds to the received MAC-I, integrity protection
is verified successfully.</p>
<p>The integrity protection and verification are not applied to MRBs and
sidelink SRB4.</p>
<h2 id="handling-of-unknown-unforeseen-and-erroneous-protocol-data">5.10
Handling of unknown, unforeseen, and erroneous protocol data</h2>
<p>When a PDCP PDU that contains reserved or invalid values is received,
the receiving PDCP entity shall:</p>
<p>- discard the received PDU.</p>
<p>NOTE: For NR sidelink communication for unicast, the invalid values
include the invalid value of K<sub>NRP-sess</sub> ID.</p>
<h2 id="pdcp-duplication">5.11 PDCP duplication</h2>
<h3 id="activationdeactivation-of-pdcp-duplication">5.11.1
Activation/Deactivation of PDCP duplication</h3>
<p>For the PDCP entity configured with <em>pdcp-Duplication</em>, the
transmitting PDCP entity shall:</p>
<p>- for SRBs:</p>
<p>- activate the PDCP duplication;</p>
<p>- for DRBs:</p>
<p>- if the activation of PDCP duplication is indicated for the DRB:</p>
<p>- activate the PDCP duplication for the DRB;</p>
<p>- if the activation of PDCP duplication is indicated for at least one
associated RLC entities:</p>
<p>- activate the PDCP duplication for the indicated associated RLC
entities;</p>
<p>- activate the PDCP duplication for the DRB;</p>
<p>- if the deactivation of PDCP duplication is indicated for the
DRB:</p>
<p>- deactivate the PDCP duplication for the DRB;</p>
<p>- if the deactivation of PDCP duplication is indicated for at least
one associated RLC entities:</p>
<p>- deactivate the PDCP duplication for the indicated associated RLC
entities;</p>
<p>- if all associated RLC entities other than the primary RLC entity
are deactivated for PDCP duplication:</p>
<p>- deactivate the PDCP duplication for the DRB.</p>
<h3 id="duplicate-pdu-discard">5.11.2 Duplicate PDU discard</h3>
<p>For the PDCP entity configured with <em>pdcp-Duplication</em>, the
transmitting PDCP entity shall:</p>
<p>- if the successful delivery of a PDCP Data PDU is confirmed by one
of the associated AM RLC entities:</p>
<p>- indicate to the other AM RLC entities to discard the duplicated
PDCP Data PDU;</p>
<p>- if the deactivation of PDCP duplication is indicated for the
DRB:</p>
<p>- indicate to the RLC entities other than the primary RLC entity to
discard all duplicated PDCP Data PDUs;</p>
<p>- if the deactivation of PDCP duplication is indicated for at least
one associated RLC entities:</p>
<p>- indicate to the RLC entities deactivated for PDCP duplication to
discard all duplicated PDCP Data PDUs.</p>
<h2 id="ethernet-header-compression-and-decompression">5.12 Ethernet
header compression and decompression</h2>
<h3 id="supported-header-compression-protocols">5.12.1 Supported header
compression protocols</h3>
<p>The EHC protocol is based on the Ethernet Header Compression (EHC)
framework defined in Annex A.</p>
<h3 id="configuration-of-ehc">5.12.2 Configuration of EHC</h3>
<p>PDCP entities associated with DRBs and MRBs can be configured by
upper layers TS 38.331 [3] to use EHC. Each PDCP entity carrying user
plane data may be configured to use EHC. Every PDCP entity uses at most
one EHC compressor instance and at most one EHC decompressor
instance.</p>
<h3 id="protocol-parameters-1">5.12.3 Protocol parameters</h3>
<p>The usage and definition of the parameters shall be as specified
below.</p>
<p>- MAX_CID_EHC_UL: This is the maximum CID value that can be used for
uplink. One CID value shall always be reserved for uncompressed flows.
The parameter MAX_CID_EHC_UL is configured by upper layers
(<em>maxCID-EHC-UL</em> in TS 38.331 [3]);</p>
<h3 id="header-compression-using-ehc">5.12.4 Header compression using
EHC</h3>
<p>If EHC is configured, the EHC protocol generates two types of output
packets:</p>
<p>- EHC compressed packets (i.e. EHC full header packets and EHC
compressed header packets), each associated with one PDCP SDU;</p>
<p>- standalone packets not associated with a PDCP SDU, i.e. EHC
feedback.</p>
<p>An EHC compressed packet is associated with the same PDCP SN and
COUNT value as the related PDCP SDU. The header compression is not
applicable to the SDAP header and the SDAP Control PDU if included in
the PDCP SDU.</p>
<p>EHC feedback are not associated with a PDCP SDU. They are not
associated with a PDCP SN and are not ciphered/integrity protected.</p>
<h3 id="header-decompression-using-ehc">5.12.5 Header decompression
using EHC</h3>
<p>If EHC is configured by upper layers for PDCP entities associated
with user plane data, the PDCP Data PDUs are decompressed by the EHC
protocol after performing deciphering and integrity verification as
explained in clause 5.8 and 5.9, respectively. The header decompression
is not applicable to the SDAP header and the SDAP Control PDU if
included in the PDCP Data PDU.</p>
<h3 id="pdcp-control-pdu-for-ehc-feedback">5.12.6 PDCP Control PDU for
EHC feedback</h3>
<h4 id="transmit-operation-3">5.12.6.1 Transmit Operation</h4>
<p>When an EHC feedback is generated by the EHC protocol, the
transmitting PDCP entity shall:</p>
<p>- submit to lower layers the corresponding PDCP Control PDU as
specified in clause 6.2.3.3 i.e. without associating a PDCP SN, nor
performing ciphering/integrity protection.</p>
<h4 id="receive-operation-3">5.12.6.2 Receive Operation</h4>
<p>At reception of a PDCP Control PDU for EHC feedback from lower
layers, the receiving PDCP entity shall:</p>
<p>- deliver the corresponding EHC feedback to the EHC protocol without
performing deciphering/integrity verification.</p>
<h3 id="simultaneous-configuration-of-rohc-and-ehc">5.12.7 Simultaneous
configuration of ROHC and EHC</h3>
<p>If both ROHC and EHC are configured for a DRB/MRB, the ROHC header
shall be located after the EHC header. Figure 5.12.7-1 shows the
location of the ROHC header and the EHC header in a PDCP Data PDU.</p>
<p><img src="media/image7.svg" /></p>
<p>Figure 5.12.7-1: Location of ROHC header and EHC header in a PDCP
Data PDU</p>
<p>If a PDCP SDU including non-IP Ethernet packet is received from upper
layers, the EHC compressor shall bypass the ROHC compressor and submit
the EHC compressed non-IP Ethernet packet to lower layers according to
clause 5.2.1.</p>
<p>If a PDCP Data PDU including non-IP Ethernet packet is received from
lower layers, the EHC decompressor shall bypass the ROHC decompressor
and deliver the EHC decompressed non-IP Ethernet packet to upper layers
according to clause 5.2.2.</p>
<h2 id="uplink-data-switching">5.13 Uplink data switching</h2>
<p>For DAPS bearers, when upper layers request uplink data switching,
the transmitting PDCP entity shall:</p>
<p>- for AM DRBs, from the first PDCP SDU for which the successful
delivery of the corresponding PDCP Data PDU has not been confirmed by
the RLC entity associated with the source cell, perform retransmission
or transmission of all the PDCP SDUs already associated with PDCP SNs in
ascending order of the COUNT values associated to the PDCP SDU prior to
uplink data switching to the RLC entity associated with the target cell
as specified below:</p>
<p>- perform header compression of the PDCP SDU using ROHC as specified
in the clause 5.7.4;</p>
<p>- perform integrity protection and ciphering of the PDCP SDU using
the COUNT value associated with this PDCP SDU as specified in the clause
5.9 and 5.8, respectively;</p>
<p>- submit the resulting PDCP Data PDU to lower layer, as specified in
clause 5.2.1.</p>
<p>- for UM DRBs, for all PDCP SDUs which have been processed by PDCP
but which have not yet been submitted to lower layers, perform
transmission of the PDCP SDUs in ascending order of the COUNT values to
the RLC entity associated with the target cell as specified below:</p>
<p>- perform header compression of the PDCP SDU using ROHC as specified
in the clause 5.7.4;</p>
<p>- perform integrity protection and ciphering of the PDCP SDU using
the COUNT value associated with this PDCP SDU as specified in the clause
5.9 and 5.8, respectively;</p>
<p>- submit the resulting PDCP Data PDU to lower layer, as specified in
clause 5.2.1.</p>
<h2 id="uplink-data-compression-and-decompression">5.14 Uplink Data
compression and decompression</h2>
<h3 id="udc-protocol">5.14.1 UDC protocol</h3>
<p>The UDC protocol is based on IETF RFC 1951 (DEFLATE Compressed Data
Format Specification) [19].</p>
<p>Static Huffman coding tree defined in [19] is used as the DEFLATE
compression strategy.</p>
<p>UDC Data Block should be byte-alignment. Z_SYNC_FLUSH is used as the
DEFLATE byte-alignment with corresponding reference [21], wherein the
fixed last four bytes, 0x00 0x00 0xFF 0xFF, are removed before
transmission.</p>
<h3 id="configuration-of-udc">5.14.2 Configuration of UDC</h3>
<p>The PDCP entities associated with DRBs can be configured by upper
layers, see TS 38.331 [3], to use UDC. If UDC is configured, the UE
shall apply UDC compression function (details see Annex B) to process
the received PDCP SDU from upper layers corresponding to the configured
DRB. The size of compression buffer is configured by upper layers via
<em>bufferSize</em>. If pre-defined dictionary is configured by upper
layers, the UE shall first set the compression buffer to all zeros and
then prefill the configured pre-defined dictionary in the compression
buffer upon configuration of UDC. If pre-defined dictionary is not
configured by upper layers, UE shall set the compression buffer to all
zeros.</p>
<h3 id="udc-header">5.14.3 UDC header</h3>
<p>UDC header (1 byte) is added in UDC compression function followed by
UDC data block. The UDC header contains the information about whether
the current PDCP SDU is compressed by UDC protocol or not. Only the
compressed packets are stored in the buffer. The UDC header also
contains a reset bit to inform the decompressor that the compression
buffer has been reset. The validation bits (checksum) of the compression
buffer are also contained in UDC header. Checksum mechanism could be
used to resolve miss-match (if any) between the compression and
de-compression buffers. If both SDAP and UDC are configured for a DRB,
the UDC header shall be located after the SDAP header. Figure 5.14.3-1
shows the location of the UDC header in a PDCP data PDU.</p>
<p><img src="media/image8.svg" /></p>
<p>Figure 5.14.3-1: Location of UDC header in a PDCP Data PDU</p>
<h3 id="uplink-data-compression">5.14.4 Uplink data compression</h3>
<p>The UDC protocol generates UDC packets, each associated with one PDCP
SDU.</p>
<p>A UDC packet is associated with the same PDCP SN and COUNT values as
the related PDCP SDU. The uplink data compression is not applicable to
the SDAP header and the SDAP Control PDU if included in the PDCP Data
PDU.</p>
<h3 id="pdcp-control-pdu-for-udc-feedback">5.14.5 PDCP Control PDU for
UDC feedback</h3>
<p>At reception of a PDCP Control PDU for UDC feedback from lower
layers, the receiving PDCP entity shall:</p>
<p>- deliver the corresponding UDC feedback to the UDC protocol without
performing deciphering/integrity verification.</p>
<h3 id="pre-defined-dictionary">5.14.6 Pre-defined dictionary</h3>
<p>One standard dictionary for SIP and SDP and one operator defined
dictionary can be used as pre-defined dictionaries in UDC. The standard
dictionary for SIP and SDP consists of the first 3468 bytes of the
dictionary for SigComp defined in RFC 3485 [20]. When UDC is configured,
at most one dictionary, configured by upper layers, is put into the tail
of the compression buffer. Also, the compression buffer acts as a FIFO
and hence the content of the dictionary is to be totally pushed out of
the compression buffer after the size of transmitted uncompressed
packets compressed by UDC exceeds the compression buffer size. If the
size of dictionary is larger than the compression buffer size, only the
tail of the dictionary is inserted in the compression buffer.</p>
<h3 id="udc-buffer-reset-procedure">5.14.7 UDC buffer reset
procedure</h3>
<p>UDC works on the condition that compression buffer and de-compression
buffer are synchronized. UDC buffer reset mechanism is to resynchronize
buffer when error is detected. For resynchronization, UE shall reset the
compression buffer to all zeros.</p>
<h3 id="udc-checksum-error-handling">5.14.8 UDC checksum error
handling</h3>
<p>UDC checksum error notification PDCP control PDU indicates the
compression buffer and de-compression buffer are out of synchronization.
When receiving the notification, the UE shall trigger UDC buffer reset
procedure to resynchonize the compression buffer.</p>
<h1 id="protocol-data-units-formats-and-parameters">6 Protocol data
units, formats, and parameters</h1>
<h2 id="protocol-data-units">6.1 Protocol data units</h2>
<h3 id="data-pdu">6.1.1 Data PDU</h3>
<p>The PDCP Data PDU is used to convey one or more of followings in
addition to the PDU header:</p>
<p>- user plane data;</p>
<p>- control plane data;</p>
<p>- a MAC-I.</p>
<h3 id="control-pdu">6.1.2 Control PDU</h3>
<p>The PDCP Control PDU is used to convey one of followings in addition
to the PDU header:</p>
<p>- a PDCP status report;</p>
<p>- an interspersed ROHC feedback;</p>
<p>- an EHC feedback;</p>
<p>- a UDC feedback.</p>
<h2 id="formats">6.2 Formats</h2>
<h3 id="general-1">6.2.1 General</h3>
<p>A PDCP PDU is a bit string that is byte aligned (i.e. multiple of 8
bits) in length. In the figures in clause 6.2, bit strings are
represented by tables in which the most significant bit is the leftmost
bit of the first line of the table, the least significant bit is the
rightmost bit on the last line of the table, and more generally the bit
string is to be read from left to right and then in the reading order of
the lines. The bit order of each parameter field within a PDCP PDU is
represented with the first and most significant bit in the leftmost bit
and the last and least significant bit in the rightmost bit.</p>
<p>PDCP SDUs are bit strings that are byte aligned (i.e. multiple of 8
bits) in length. A compressed or uncompressed SDU is included into a
PDCP Data PDU from the first bit onward.</p>
<h3 id="data-pdu-1">6.2.2 Data PDU</h3>
<h4 id="data-pdu-for-srbs">6.2.2.1 Data PDU for SRBs</h4>
<p>Figure 6.2.2.1-1 shows the format of the PDCP Data PDU with 12 bits
PDCP SN. This format is applicable for SRBs.</p>
<p><img src="media/image9.svg" /></p>
<p>Figure 6.2.2.1-1: PDCP Data PDU format for SRBs</p>
<h4 id="data-pdu-for-drbs-and-mrbs-with-12-bits-pdcp-sn">6.2.2.2 Data
PDU for DRBs and MRBs with 12 bits PDCP SN</h4>
<p>Figure 6.2.2.2-1 shows the format of the PDCP Data PDU with 12 bits
PDCP SN. This format is applicable for UM DRBs, AM DRBs, UM MRBs and AM
MRBs.</p>
<p><img src="media/image10.svg" /></p>
<p>Figure 6.2.2.2-1: PDCP Data PDU format with 12 bits PDCP SN</p>
<h4 id="data-pdu-for-drbs-and-mrbs-with-18-bits-pdcp-sn">6.2.2.3 Data
PDU for DRBs and MRBs with 18 bits PDCP SN</h4>
<p>Figure 6.2.2.3-1 shows the format of the PDCP Data PDU with 18 bits
PDCP SN. This format is applicable for UM DRBs, AM DRBs, UM MRBs and AM
MRBs.</p>
<p><img src="media/image11.svg" /></p>
<p>Figure 6.2.2.3-1: PDCP Data PDU format for DRBs with 18 bits PDCP
SN</p>
<h4
id="data-pdu-for-sidelink-drbs-for-groupcast-and-broadcast-for-the-sidelink-srb0-and-for-the-sidelink-srb4">6.2.2.4
Data PDU for sidelink DRBs for groupcast and broadcast, for the sidelink
SRB0‎ and for the sidelink SRB4</h4>
<p>Figure 6.2.2.4-1 shows the format of the PDCP Data PDU with 12 bits
PDCP SN. This format is applicable for sidelink DRBs for groupcast and
broadcast, for the sidelink SRB0 and for the sidelink SRB4.</p>
<p><img src="media/image12.svg" /></p>
<p>Figure 6.2.2.4-1: PDCP Data PDU format for sidelink DRBs for
groupcast and broadcast, for the sidelink SRB0‎ and for the sidelink
SRB4</p>
<p>NOTE: There is no control PDU for SLRBs for groupcast and broadcast.
Thus, there is no D/C field in the PDCP Data PDU format for SLRBs for
groupcast and broadcast. SDU type is only applicable for sidelink
DRB.</p>
<h4 id="data-pdu-for-sidelink-srbs-for-unicast">6.2.2.5 Data PDU for
sidelink SRBs for unicast</h4>
<p>Figure 6.2.2.5-1 shows the format of the PDCP Data PDU with 12 bits
PDCP SN. This format is applicable for sidelink SRB1, SRB2 and SRB3 for
unicast.</p>
<p><img src="media/image13.svg" /></p>
<p>Figure 6.2.2.5-1: PDCP Data PDU format for sidelink SRB1, SRB2 and
SRB3 for unicast</p>
<h4
id="data-pdu-for-sidelink-drbs-for-unicast-with-12-bits-pdcp-sn">6.2.2.6
Data PDU for sidelink DRBs for unicast with 12 bits PDCP SN</h4>
<p>Figure 6.2.2.6-1 shows the format of the PDCP Data PDU with 12 bits
PDCP SN. This format is applicable for sidelink DRBs for unicast.</p>
<p><img src="media/image14.svg" /></p>
<p>Figure 6.2.2.6-1: PDCP Data PDU format for sidelink DRBs for unicast
with 12 bits PDCP SN</p>
<h4
id="data-pdu-for-sidelink-drbs-for-unicast-with-18-bits-pdcp-sn">6.2.2.7
Data PDU for sidelink DRBs for unicast with 18 bits PDCP SN</h4>
<p>Figure 6.2.2.7-1 shows the format of the PDCP Data PDU with 18 bits
PDCP SN. This format is applicable for sidelink DRBs for unicast.</p>
<p><img src="media/image15.svg" /></p>
<p>Figure 6.2.2.7-1: PDCP Data PDU format for sidelink DRBs for unicast
with 18 bits PDCP SN</p>
<h3 id="control-pdu-1">6.2.3 Control PDU</h3>
<h4 id="control-pdu-for-pdcp-status-report">6.2.3.1 Control PDU for PDCP
status report</h4>
<p>Figure 6.2.3.1-1 shows the format of the PDCP Control PDU carrying
one PDCP status report. This format is applicable for UM DRBs, AM DRBs
(including sidelink DRBs for unicast) and AM MRBs.</p>
<p><img src="media/image16.svg" /></p>
<p>Figure 6.2.3.1-1: PDCP Control PDU format for PDCP status report</p>
<h4 id="control-pdu-for-interspersed-rohc-feedback">6.2.3.2 Control PDU
for interspersed ROHC feedback</h4>
<p>Figure 6.2.3.2-1 shows the format of the PDCP Control PDU carrying
one interspersed ROHC feedback. This format is applicable for UM DRBs,
AM DRBs (including sidelink DRBs for unicast), UM MRBs and AM MRBs.</p>
<p><img src="media/image17.svg" /></p>
<p>Figure 6.2.3.2-1: PDCP Control PDU format for interspersed ROHC
feedback</p>
<h4 id="control-pdu-for-ehc-feedback">6.2.3.3 Control PDU for EHC
feedback</h4>
<p>Figure 6.2.3.3-1 shows the format of the PDCP Control PDU carrying
one EHC feedback. This format is applicable for UM DRBs, AM DRBs, UM
MRBs and AM MRBs.</p>
<p><img src="media/image18.svg" /></p>
<p>Figure 6.2.3.3-1: PDCP Control PDU format for EHC feedback</p>
<h4 id="control-pdu-for-udc-feedback">6.2.3.4 Control PDU for UDC
feedback</h4>
<p>Figure 6.2.3.4-1 shows the format of the PDCP Control PDU carrying
one UDC feedback. This format is applicable for AM DRBs.</p>
<p><img src="media/image19.svg" /></p>
<p>Figure 6.2.3.4-1: PDCP Control PDU format for UDC feedback</p>
<h2 id="parameters">6.3 Parameters</h2>
<h3 id="general-2">6.3.1 General</h3>
<p>If not otherwise mentioned in the definition of each field then the
bits in the parameters shall be interpreted as follows: the left most
bit string is the first and most significant and the right most bit is
the last and least significant bit.</p>
<p>Unless otherwise mentioned, integers are encoded in standard binary
encoding for unsigned integers. In all cases the bits appear ordered
from MSB to LSB when read in the PDU.</p>
<h3 id="pdcp-sn">6.3.2 PDCP SN</h3>
<p>Length: 12 or 18 bits as indicated in table 6.3.2-1. The length of
the PDCP SN is configured by upper layers (<em>pdcp-SN-SizeUL,</em>
<em>pdcp-SN-SizeDL,</em> or <em>sl-PDCP-SN-Size</em> in TS 38.331
[3]).</p>
<p>Table 6.3.2-1: PDCP SN length</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<tbody>
<tr>
<td>Length</td>
<td>Description</td>
</tr>
<tr>
<td>12</td>
<td>SRBs, UM DRBs, AM DRBs (including sidelink SRBs and sidelink DRBs),
UM MRBs and AM MRBs</td>
</tr>
<tr>
<td>18</td>
<td>UM DRBs, AM DRBs (including sidelink DRBs for unicast), UM MRBs and
AM MRBs</td>
</tr>
</tbody>
</table>
<p>NOTE: For NR sidelink communication for groupcast and broadcast, only
12 bits PDCP SN length is used for the sidelink DRBs.</p>
<h3 id="data">6.3.3 Data</h3>
<p>Length: Variable</p>
<p>This field includes one of the followings:</p>
<p>- Uncompressed PDCP SDU (user plane data, or control plane data);</p>
<p>- Compressed PDCP SDU (user plane data only).</p>
<p>NOTE: All fields other than PDCP PDU header and MAC-I belong to Data
field.‎</p>
<h3 id="mac-i">6.3.4 MAC-I</h3>
<p>Length: 32 bits</p>
<p>This field carries a message authentication code calculated as
specified in clause 5.9.</p>
<p>For SRBs for Uu interface, the MAC-I field is always present. If
integrity protection is not configured, the MAC-I field is still present
but should be padded with padding bits set to 0.</p>
<p>For sidelink SRB1, SRB2 and SRB3, the MAC-I field is present only
when the sidelink SRB1, SRB2 and SRB3 are configured with integrity
‎protection‎.‎</p>
<p>For DRBs (including sidelink DRBs for unicast), the MAC-I field is
present only when the DRB is configured with integrity protection.</p>
<h3 id="count">6.3.5 COUNT</h3>
<p>Length: 32 bits</p>
<p>The COUNT value is composed of a HFN and the PDCP SN. The size of the
HFN part in bits is equal to 32 minus the length of the PDCP SN.</p>
<p><img src="media/image20.svg" /></p>
<p>Figure 6.3.5-1: Format of COUNT</p>
<p>NOTE: COUNT does not wrap around.</p>
<h3 id="r">6.3.6 R</h3>
<p>Length: 1 bit</p>
<p>Reserved. In this version of the specification reserved bits shall be
set to 0. Reserved bits shall be ignored by the receiver.</p>
<h3 id="dc">6.3.7 D/C</h3>
<p>Length: 1 bit</p>
<p>This field indicates whether the corresponding PDCP PDU is a PDCP
Data PDU or a PDCP Control PDU.</p>
<p>Table 6.3.7-1: D/C field</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<tbody>
<tr>
<td>Bit</td>
<td>Description</td>
</tr>
<tr>
<td>0</td>
<td>Control PDU</td>
</tr>
<tr>
<td>1</td>
<td>Data PDU</td>
</tr>
</tbody>
</table>
<h3 id="pdu-type">6.3.8 PDU type</h3>
<p>Length: 3 bits</p>
<p>This field indicates the type of control information included in the
corresponding PDCP Control PDU.</p>
<p>Table 6.3.8-1: PDU type</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<tbody>
<tr>
<td>Bit</td>
<td>Description</td>
</tr>
<tr>
<td>000</td>
<td>PDCP status report</td>
</tr>
<tr>
<td>001</td>
<td>Interspersed ROHC feedback</td>
</tr>
<tr>
<td>010</td>
<td>EHC feedback</td>
</tr>
<tr>
<td>011</td>
<td>UDC feedback</td>
</tr>
<tr>
<td>100-111</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<h3 id="fmc">6.3.9 FMC</h3>
<p>Length: 32 bits</p>
<p>First Missing COUNT. This field indicates the COUNT value of the
first missing PDCP SDU within the reordering window, i.e. RX_DELIV.</p>
<h3 id="bitmap">6.3.10 Bitmap</h3>
<p>Length: Variable. The length of the bitmap field can be 0.</p>
<p>This field indicates which SDUs are missing and which SDUs are
correctly received in the receiving PDCP entity. The bit position of
N<sup>th</sup> bit in the Bitmap is N, i.e., the bit position of the
first bit in the Bitmap is 1.</p>
<p>Table 6.3.10-1 Bitmap</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr>
<td>Bit</td>
<td>Description</td>
</tr>
<tr>
<td style="text-align: center;">0</td>
<td>PDCP SDU with COUNT = (FMC + bit position) modulo 2<sup>32</sup> is
missing.</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td>PDCP SDU with COUNT = (FMC + bit position) modulo 2<sup>32</sup> is
correctly received.</td>
</tr>
</tbody>
</table>
<h3 id="interspersed-rohc-feedback">6.3.11 Interspersed ROHC
feedback</h3>
<p>Length: Variable</p>
<p>This field contains one ROHC packet with only feedback, i.e. a ROHC
packet that is not associated with a PDCP SDU as defined in clause
5.7.4.</p>
<h3 id="sdu-type">6.3.12 SDU Type</h3>
<p>Length: 3 bits</p>
<p>PDCP SDU type, i.e. Layer-3 Protocol Data Unit type as specified in
[13] and [18]. PDCP entity may handle the SDU differently per SDU Type,
e.g. ROHC is applicable to IP SDU but not Non-IP SDU, Ethernet SDU,
Unstructured SDU and ARP SDU.</p>
<p>Table 6.3.12-1: SDU Type</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<tbody>
<tr>
<td>Bit</td>
<td>Description</td>
</tr>
<tr>
<td>000</td>
<td>IP</td>
</tr>
<tr>
<td>001</td>
<td>Non-IP</td>
</tr>
<tr>
<td>010</td>
<td>Ethernet</td>
</tr>
<tr>
<td>011</td>
<td>Unstructured</td>
</tr>
<tr>
<td>100</td>
<td>ARP</td>
</tr>
<tr>
<td>101-111</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<h3 id="knrp-sess-id">6.3.13 K<sub>NRP-sess</sub> ID</h3>
<p>Length: 16 bits</p>
<p>K<sub>NRP-sess</sub> Identity as specified in TS 33.536 [14].</p>
<p>For the SLRB that does not need integrity and ciphering protection,
the UE shall set K<sub>NRP-sess</sub> ID to "0" in the PDCP PDU
header.</p>
<h3 id="fe">6.3.14 FE</h3>
<p>Length: 1 bit</p>
<p>Indication of whether checksum error is detected or not. Value '1'
means checksum error is detected and the UE shall reset the compression
buffer.</p>
<p>Table 6.3.14-1: FE field</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: center;"><strong>Bit</strong></td>
<td style="text-align: center;"><strong>Description</strong></td>
</tr>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">No Error</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">Checksum Error Notification</td>
</tr>
</tbody>
</table>
<h1 id="state-variables-constants-and-timers">7 State variables,
constants, and timers</h1>
<h2 id="state-variables">7.1 State variables</h2>
<p>This clause describes the state variables used in PDCP entities in
order to specify the PDCP protocol. The state variables defined in this
clause are normative.</p>
<p>All state variables are non-negative integers, and take values from 0
to [2<sup>32</sup> – 1].</p>
<p>PDCP Data PDUs are numbered integer sequence numbers (SN) cycling
through the field: 0 to [2<sup>[<em>pdcp-SN-SizeUL</em>]</sup> – 1] or 0
to [2<sup>[<em>pdcp-SN-SizeDL</em>]</sup> – 1] or 0 to
[2<sup>[<em>sl-PDCP-SN-Size</em>]</sup> – 1].</p>
<p>The transmitting PDCP entity shall maintain the following state
variables:</p>
<p>a) TX_NEXT</p>
<p>This state variable indicates the COUNT value of the next PDCP SDU to
be transmitted. The initial value is 0, except for SRBs configured with
state variables continuation. For target SRB configured with state
variables continuation, the initial value is the value stored in PDCP
entity for the corresponding source SRB. For source SRB configured with
state variables continuation, the initial value is the value stored in
PDCP entity for the corresponding target SRB.</p>
<p>The receiving PDCP entity shall maintain the following state
variables:</p>
<p>a) RX_NEXT</p>
<p>This state variable indicates the COUNT value of the next PDCP SDU
expected to be received. The initial value is 0, except for sidelink
broadcast and groupcast, for SRBs configured with state variables
continuation, and for broadcast MRBs. For NR sidelink communication for
broadcast and groupcast or sidelink SRB4 for NR sidelink discovery, the
initial value of the SN part of RX_NEXT is (x +1) modulo
(2<sup>[<em>sl-PDCP-SN-Size</em>]</sup>), where x is the SN of the first
received PDCP Data PDU. For broadcast MRBs, the initial value of the SN
part of RX_NEXT is (x +1) modulo
(2<sup>[<em>PDCP-SN-SizeDL</em>]</sup>), where x is the SN of the first
received PDCP Data PDU. For target SRB configured with state variables
continuation, the initial value is the value stored in PDCP entity for
the corresponding source SRB. For source SRB configured with state
variables continuation, the initial value is the value stored in PDCP
entity for the corresponding target SRB.</p>
<p>NOTE 1: For NR sidelink communication for broadcast and groupcast or
sidelink SRB4 for NR sidelink discovery, it is up to UE implementation
to select the HFN part for RX_NEXT such that initial value of RX_DELIV
should be a positive value.</p>
<p>NOTE 2: For broadcast MRBs, the initial value of the HFN part of
RX_NEXT is set by UE implementation.</p>
<p>b) RX_DELIV</p>
<p>This state variable indicates the COUNT value of the first PDCP SDU
not delivered to the upper layers, but still waited for. The initial
value is 0, except for sidelink broadcast and groupcast, for SRBs
configured with state variables continuation, and for MRBs. For NR
sidelink communication for broadcast and groupcast or sidelink SRB4 for
NR sidelink discovery, the initial value of the SN part of RX_DELIV is
(x – 0.5 × 2<sup>[<em>sl-PDCP-SN-Size</em>–1]</sup>) modulo
(2<sup>[<em>sl-PDCP-SN-Size</em>]</sup>), where x is the SN of the first
received PDCP Data PDU. For broadcast MRBs, the initial value of the SN
part of RX_DELIV is set to (x – 0.5 ×
2<sup>[<em>PDCP-SN-SizeDL</em>–1]</sup>) modulo
(2<sup>[<em>PDCP-SN-SizeDL</em>]</sup>), where x is the SN of the first
received PDCP Data PDU. For multicast MRBs, the initial value of
RX_DELIV is set, if provided, by <em>initialRX-DELIV</em> in TS 38.331
[3]. For target SRB configured with state variables continuation, the
initial value is the value stored in PDCP entity for the corresponding
source SRB. For source SRB configured with state variables continuation,
the initial value is the value stored in PDCP entity for the
corresponding target SRB.</p>
<p>NOTE 3: For broadcast MRBs, the initial value of the HFN part of
RX_DELIV is set by UE implementation.</p>
<p>c) RX_REORD</p>
<p>This state variable indicates the COUNT value following the COUNT
value associated with the PDCP Data PDU which triggered
<em>t-Reordering</em>. For target SRB configured with state variables
continuation, the initial value is the value stored in PDCP entity for
the corresponding source SRB. For source SRB configured with state
variables continuation, the initial value is the value stored in PDCP
entity for the corresponding target SRB.</p>
<h2 id="constants">7.2 Constants</h2>
<p>a) Window_Size</p>
<p>This constant indicates the size of the reordering window. The value
equals to 2<sup>[<em>pdcp-SN-SizeDL</em>] – 1</sup> for SRB/DRB/MRB and
2<sup>[<em>sl-PDCP-SN-Size</em>] – 1</sup> for SLRB.</p>
<h2 id="timers">7.3 Timers</h2>
<p>The transmitting PDCP entity shall maintain the following timers:</p>
<p>a) <em>discardTimer</em></p>
<p>This timer is configured only for DRBs. The duration of the timer is
configured by upper layers TS 38.331 [3]. In the transmitter, a new
timer is started upon reception of an SDU from upper layer.</p>
<p>The receiving PDCP entity shall maintain the following timers:</p>
<p>b) <em>t-Reordering</em></p>
<p>The duration of the timer is configured by upper layers TS 38.331
[3], except for the case of NR sidelink communication or sidelink SRB4.
For NR sidelink communication or sidelink SRB4, the
<em>t-Reordering</em> timer is determined by the UE implementation. This
timer is used to detect loss of PDCP Data PDUs as specified in clause
5.2.2. If <em>t-Reordering</em> is running, <em>t-Reordering</em> shall
not be started additionally, i.e. only one <em>t-Reordering</em> per
receiving PDCP entity is running at a given time.</p>
<p class="heading"
id="annex-a-normative-ethernet-header-compression-ehc-protocol">Annex A
(normative):<br />
Ethernet Header Compression (EHC) protocol</p>
<h1 id="a.1-ehc-principle">A.1 EHC principle</h1>
<p>The Ethernet header compression (EHC) protocol compresses Ethernet
header as shown in Figure A.1-1 [15]. The fields that are compressed
(i.e. removed from the Ethernet header) by the EHC protocol are:
DESTINATION ADDRESS, SOURCE ADDRESS, 802.1Q TAG, and LENGTH/TYPE. The
fields PREAMBLE, SFD, and FCS are not transmitted in 3GPP system, and
thus not considered in EHC protocol. There may be more than one 802.1Q
TAG fields in the Ethernet header, and all are compressed by the EHC
protocol. The padding (PAD) is not compressed by the EHC protocol.</p>
<p><img src="media/image21.svg" /></p>
<p>Figure A.1-1: Ethernet packet format [15]</p>
<p>The EHC compressor and the EHC decompressor store original header
field information as a "EHC context". Each EHC context is identified by
a unique identifier, called Context ID (CID). The EHC context must be
synchronized between the EHC compressor and the EHC decompressor;
otherwise, the EHC decompressor erroneously decompresses the "Compressed
Header (CH)" packets.</p>
<p>For an Ethernet packet stream, the EHC compressor establishes the EHC
context and associates it with the CID. Then, the EHC compressor
transmits the "Full Header (FH)" packet to the EHC decompressor
including the associated CID. The EHC compressor keeps transmitting the
FH packets until the EHC feedback is received from the EHC
decompressor.</p>
<p>NOTE: If the maximum number of EHC contexts are already established
for the compressed flows and a new Ethernet flow does not match any
established EHC context, the compressor should associate the new
Ethernet flow with one of the EHC CIDs allocated for the existing
compressed flows or send PDCP SDUs belonging to the Ethernet flow as
uncompressed packet.</p>
<p>When the EHC decompressor receives the FH packet, the EHC
decompressor establishes the EHC context identified by the CID, and
transmits the EHC feedback to the EHC compressor to indicate that the
EHC context associated with the CID is successfully established in the
EHC decompressor.</p>
<p>After receiving the EHC feedback, the EHC compressor starts to
transmit the CH packets to the EHC decompressor including the associated
CID. The CH packet includes only the header fields not stored in the EHC
context.</p>
<p>When the EHC decompressor receives the CH packet, the EHC
decompressor restores original header fields based on the stored EHC
context identified by the associated CID.</p>
<p>Figure A.1-2 represents a conceptual view of EHC operation.</p>
<p><img src="media/image22.svg" /></p>
<p>Figure A.1-2: EHC operation</p>
<h1 id="a.2-ehc-packet-format-and-parameters">A.2 EHC packet format and
parameters</h1>
<h2 id="a.2.1-ehc-packet-format">A.2.1 EHC packet format</h2>
<h3
id="a.2.1.1-ehc-full-header-packet-and-ehc-compressed-header-packet">A.2.1.1
EHC Full Header packet and EHC Compressed Header packet</h3>
<p>Figure A.2.1.1-1 and Figure A.2.1.1-2 show the formats of EHC FH
packet and EHC CH packet, respectively.</p>
<p><img src="media/image23.svg" /></p>
<p>Figure A.2.1.1-1: EHC Full Header packet format</p>
<p><img src="media/image24.svg" /></p>
<p>Figure A.2.1.1-2: EHC Compressed Header packet format</p>
<h3 id="a.2.1.2-ehc-feedback-packet">A.2.1.2 EHC feedback packet</h3>
<p>Figure A.2.1.2-1 shows the format of the EHC feedback packet.</p>
<p><img src="media/image25.svg" /></p>
<p>Figure A.2.1.2-1: EHC feedback packet format</p>
<h2 id="a.2.2-parameters">A.2.2 Parameters</h2>
<h3 id="a.2.2.1-fc">A.2.2.1 F/C</h3>
<p>Length: 1 bit</p>
<p>This field indicates whether the corresponding EHC packet is a FH
packet or a CH packet.</p>
<p>Table A.2.2.1-1: F/C field</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<tbody>
<tr>
<td>Bit</td>
<td>Description</td>
</tr>
<tr>
<td>0</td>
<td>FH packet</td>
</tr>
<tr>
<td>1</td>
<td>CH packet</td>
</tr>
</tbody>
</table>
<h3 id="a.2.2.2-cid">A.2.2.2 CID</h3>
<p>Length: 7, or 15 bits. The length of the CID is configured by upper
layers (<em>ehc-CID-Length</em> in TS 38.331 [3]).</p>
<p>The CID = "all zeros" indicates that the corresponding Ethernet
header is "uncompressed". The EHC decompressor does not establish the
EHC context identified by the CID = "all zeros".</p>
<p class="heading"
id="annex-b-normative-uplink-data-compression-protocol">Annex B
(normative):<br />
Uplink Data Compression Protocol</p>
<h1 id="b.1-udc-general-description">B.1 UDC general description</h1>
<p>A UDC packet consists of a UDC header and a UDC data block. A UDC
data block contains either DEFLATE compressed blocks generated by UDC
protocol or original PDCP SDU for SDU not compressed by UDC protocol;
the type is specified in FU field (details see Annex B.2.2.1) in UDC
header. The FR field (details see Annex B.2.2.2) and the Checksum field
(details see Annex B.2.2.3) in UDC header are used only if FU field is
set to 1.</p>
<p>If reset procedure is triggered, after performing the reset, the FR
field in UDC header of the first compressed PDU shall be set to 1.</p>
<p>NOTE: UE is allowed not to compress the PDCP SDUs if the UL data rate
before compression is higher than what the UE is capable of.</p>
<h1 id="b.2-udc-packet-format-and-parameters">B.2 UDC packet format and
parameters</h1>
<h2 id="b.2.1-udc-header-and-udc-data-block-format">B.2.1 UDC Header and
UDC Data Block format</h2>
<p>Figure B.2.1-1 shows the format of UDC Header and UDC Data Block.</p>
<p><img src="media/image26.svg" /></p>
<p>Figure B.2.1-1: UDC header and UDC data block format</p>
<h2 id="b.2.2-udc-parameters">B.2.2 UDC parameters</h2>
<h3 id="b.2.2.1-fu">B.2.2.1 FU</h3>
<p>Length: 1 bit</p>
<p>Indication of whether this packet is compressed by UDC protocol or
not. Value '1' means the packet is compressed by UDC protocol.</p>
<p>Table B.2.2.1-1: FU field</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<tbody>
<tr>
<td>Bit</td>
<td>Description</td>
</tr>
<tr>
<td>0</td>
<td>Packet is not compressed using UDC protocol</td>
</tr>
<tr>
<td>1</td>
<td>Packet is compressed using UDC protocol</td>
</tr>
</tbody>
</table>
<h3 id="b.2.2.2-fr">B.2.2.2 FR</h3>
<p>Length: 1 bit</p>
<p>Indication of whether UDC compression buffer is reset or not. Value
'1' means this is the first compressed packet after UDC buffer
reset.</p>
<p>Table B.2.2.2-1: FR field</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<tbody>
<tr>
<td>Bit</td>
<td>Description</td>
</tr>
<tr>
<td>0</td>
<td>Compression buffer is not reset.</td>
</tr>
<tr>
<td>1</td>
<td>Compression buffer has been reset.</td>
</tr>
</tbody>
</table>
<h3 id="b.2.2.3-checksum">B.2.2.3 Checksum</h3>
<p>Length: 4 bits</p>
<p>This field contains the validation bits for the compression buffer
content: The checksum is calculated by the content of current
compression buffer before the current packet is put into buffer.</p>
<p>The checksum is derived from the values of the first 4 bytes and the
last 4 bytes in the whole compression buffer. The calculation is
described as follows:</p>
<p>- Each byte is divided into two 4-bit numbers.</p>
<p>- The 16 4-bit numbers are added together to obtain a sum;</p>
<p>- The checksum is one's complement of the right-most 4 bits (i.e. 4
LSB) of the sum.</p>
<p>An example of checksum calculation is shown in Annex B.2.3.</p>
<h2 id="b.2.3-an-example-of-udc-checksum-calculation">B.2.3 An example
of UDC Checksum calculation</h2>
<p>The current UDC compression/decompression buffer has the following
binary values for example:</p>
<p>Header
&lt;1,1,0,0,0,1,0,1,0,0,1,1,1,1,1,1,0,0,0,1,1,0,0,1,0,1,0,1,0,0,0,1, ……,
0,1,1,1,1,1,0,1,1,0,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1,0,0,1,1,1,0,0&gt;
Tail</p>
<p>The sum of the first 4 bytes and the last 4 bytes can be
calculated:</p>
<p>1100+0101+0011+1111+0001+1001+0101+0001+0111+1101+1000+1010+1001+1111+1001+1100
= 10000110;</p>
<p>And checksum value will be one's complement of the right-most 4 bits
(i.e. 4 LSB) of the above sum. Hence checksum is 1001.</p>
<p class="heading" id="annex-c-informative-change-history">Annex C
(informative):<br />
Change history</p>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 52%" />
<col style="width: 7%" />
</colgroup>
<tbody>
<tr>
<td colspan="8" style="text-align: center;"><strong>Change
history</strong></td>
</tr>
<tr>
<td style="text-align: center;"><strong>Date</strong></td>
<td style="text-align: center;"><strong>Meeting</strong></td>
<td style="text-align: center;"><strong>TDoc</strong></td>
<td style="text-align: center;"><strong>CR</strong></td>
<td style="text-align: center;"><strong>Rev</strong></td>
<td style="text-align: center;"><strong>Cat</strong></td>
<td style="text-align: center;"><strong>Subject/Comment</strong></td>
<td style="text-align: center;"><strong>New Version</strong></td>
</tr>
<tr>
<td style="text-align: center;">2017.03</td>
<td style="text-align: center;">RAN2#97bis</td>
<td style="text-align: center;">R2-1703512</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">First version.</td>
<td style="text-align: left;">x.y.z</td>
</tr>
<tr>
<td style="text-align: center;">2017.04</td>
<td style="text-align: center;">RAN2#97bis</td>
<td style="text-align: center;">R2-1703916</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Change clause name "Retransmission" to
"Data recovery"</td>
<td style="text-align: left;">0.0.1</td>
</tr>
<tr>
<td style="text-align: center;">2017.05</td>
<td style="text-align: center;">RAN2#98</td>
<td style="text-align: center;">R2-1704076</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Initial draft TS capturing outcome of
e-mail discussion [97bis#24]</td>
<td style="text-align: left;">0.0.5</td>
</tr>
<tr>
<td style="text-align: center;">2017.06</td>
<td style="text-align: center;">RAN2 NR AH</td>
<td style="text-align: center;">R2-1706868</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Capture agreements made in RAN2#98</td>
<td style="text-align: left;">0.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2017.08</td>
<td style="text-align: center;">RAN2 NR AH</td>
<td style="text-align: center;">R2-1707507</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Capture agreements made in RAN2 NR
AH#2</td>
<td style="text-align: left;">0.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2017.08</td>
<td style="text-align: center;">RAN2#99</td>
<td style="text-align: center;">R2-1709097</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Adding integrity protection in clause
5.1.2</td>
<td style="text-align: left;">0.2.1</td>
</tr>
<tr>
<td style="text-align: center;">2017.08</td>
<td style="text-align: center;">RAN2#99</td>
<td style="text-align: center;">R2-1709753</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Capture agreements made in RAN2#99</td>
<td style="text-align: left;">0.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2017.09</td>
<td style="text-align: center;">RANP#77</td>
<td style="text-align: center;">RP-171993</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Provided for information to RAN</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2017.10</td>
<td style="text-align: center;">RAN2#99bis</td>
<td style="text-align: center;">R2-1713660</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Capture agreements made in
RAN2#99bis</td>
<td style="text-align: left;">1.0.1</td>
</tr>
<tr>
<td style="text-align: center;">2017.11</td>
<td style="text-align: center;">RAN2#100</td>
<td style="text-align: center;">R2-1714273</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Capture agreements made in RAN2#100</td>
<td style="text-align: left;">1.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2017.12</td>
<td style="text-align: center;">RP-78</td>
<td style="text-align: center;">RP-172335</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Provided for approval to RAN</td>
<td style="text-align: left;">2.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2017/12</td>
<td style="text-align: left;">RP-78</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Upgraded to Rel-15 (MCC)</td>
<td style="text-align: left;">15.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2018/03</td>
<td style="text-align: center;">RP-79</td>
<td style="text-align: center;">RP-180440</td>
<td style="text-align: center;">0002</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to PDCP specification</td>
<td style="text-align: center;">15.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2018/06</td>
<td style="text-align: center;">RP-80</td>
<td style="text-align: center;">RP-181215</td>
<td style="text-align: center;">0006</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to PDCP specification</td>
<td style="text-align: center;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-80</td>
<td style="text-align: center;">RP-181215</td>
<td style="text-align: center;">0009</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of PDCP duplication</td>
<td style="text-align: center;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2018/09</td>
<td style="text-align: center;">RP-81</td>
<td style="text-align: center;">RP-181942</td>
<td style="text-align: center;">0011</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on PDCP transmission</td>
<td style="text-align: center;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2018/12</td>
<td style="text-align: center;">RP-82</td>
<td style="text-align: center;">RP-182650</td>
<td style="text-align: center;">0022</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Suspend and resume of security</td>
<td style="text-align: center;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-82</td>
<td style="text-align: center;">RP-182655</td>
<td style="text-align: center;">0023</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Introducing PDCP suspend procedure</td>
<td style="text-align: center;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-82</td>
<td style="text-align: center;">RP-182656</td>
<td style="text-align: center;">0024</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on ciphering MAC-I</td>
<td style="text-align: center;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2019/03</td>
<td style="text-align: center;">RP-83</td>
<td style="text-align: center;">RP-190544</td>
<td style="text-align: center;">0025</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the PDCP re-establishment
for AM DRB</td>
<td style="text-align: center;">15.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-83</td>
<td style="text-align: center;">RP-190540</td>
<td style="text-align: center;">0027</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on PDCP SN length</td>
<td style="text-align: center;">15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019/06</td>
<td style="text-align: center;">RP-84</td>
<td style="text-align: center;">RP-191375</td>
<td style="text-align: center;">0031</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">PDCP association with RLC for RBs
configured with PDCP duplication</td>
<td style="text-align: center;">15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2020/03</td>
<td style="text-align: center;">RP-87</td>
<td style="text-align: center;">RP-200346</td>
<td style="text-align: center;">0038</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">38.323 CR for NR V2X</td>
<td style="text-align: center;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-87</td>
<td style="text-align: center;">RP-200352</td>
<td style="text-align: center;">0039</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of NR IIOT</td>
<td style="text-align: center;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-87</td>
<td style="text-align: center;">RP-200347</td>
<td style="text-align: center;">0042</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of DAPS handover</td>
<td style="text-align: center;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2020/07</td>
<td style="text-align: center;">RP-88</td>
<td style="text-align: center;">RP-201190</td>
<td style="text-align: center;">0032</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">PDCP security issue about duplicate
detection</td>
<td style="text-align: center;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-88</td>
<td style="text-align: center;">RP-201195</td>
<td style="text-align: center;">0045</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">C</td>
<td style="text-align: center;">CR on 38.323 for NR mobility
enhancement</td>
<td style="text-align: center;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-88</td>
<td style="text-align: center;">RP-201176</td>
<td style="text-align: center;">0048</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">38.323 CR for NR V2X</td>
<td style="text-align: center;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-88</td>
<td style="text-align: center;">RP-201181</td>
<td style="text-align: center;">0049</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">NR PDCP corrections for NR IIOT</td>
<td style="text-align: center;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020/09</td>
<td style="text-align: center;">RP-89</td>
<td style="text-align: center;">RP-201963</td>
<td style="text-align: center;">0050</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on receive operation when
both EHC and out-of-order delivery are configured for a DRB</td>
<td style="text-align: center;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-89</td>
<td style="text-align: center;">RP-201932</td>
<td style="text-align: center;">0052</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">PDCP entity associated with AM RLC
entity</td>
<td style="text-align: center;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-89</td>
<td style="text-align: center;">RP-201927</td>
<td style="text-align: center;">0056</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">38.323 corrections‎ on Sidelink</td>
<td style="text-align: center;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2021/03</td>
<td style="text-align: center;">RP-91</td>
<td style="text-align: center;">RP-210692</td>
<td style="text-align: center;">0064</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on PDCP transmit
operation</td>
<td style="text-align: center;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2021/06</td>
<td style="text-align: center;">RP-92</td>
<td style="text-align: center;">RP-211485</td>
<td style="text-align: center;">0074</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Correction on suspended AM DRB in PDCP
re-establishment</td>
<td style="text-align: center;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-92</td>
<td style="text-align: center;">RP-211470</td>
<td style="text-align: center;">0078</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">PDCP miscellaneous corrections</td>
<td style="text-align: center;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2021/09</td>
<td style="text-align: center;">RP-93</td>
<td style="text-align: center;">RP-212442</td>
<td style="text-align: center;">0080</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR for the ciphering of EHC header</td>
<td style="text-align: center;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021/12</td>
<td style="text-align: center;">RP-94</td>
<td style="text-align: center;">RP-213342</td>
<td style="text-align: center;">0082</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to Window_Size for SLRB</td>
<td style="text-align: center;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2022/03</td>
<td style="text-align: center;">RP-95</td>
<td style="text-align: center;">RP-220495</td>
<td style="text-align: center;">0085</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introducing support of UP IP for EPC
connected architectures using NR PDCP</td>
<td style="text-align: center;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-95</td>
<td style="text-align: center;">RP-220491</td>
<td style="text-align: center;">0086</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of SL Relay in 38.323</td>
<td style="text-align: center;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-95</td>
<td style="text-align: center;">RP-220489</td>
<td style="text-align: center;">0087</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of the support for UDC in
NR</td>
<td style="text-align: center;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-95</td>
<td style="text-align: center;">RP-220484</td>
<td style="text-align: center;">0088</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of NR MBS into 38.323</td>
<td style="text-align: center;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2022/06</td>
<td style="text-align: center;">RP-96</td>
<td style="text-align: center;">RP-221712</td>
<td style="text-align: center;">0092</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Correction on PDCP SN setting for SLRB
transmit operation</td>
<td style="text-align: center;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-96</td>
<td style="text-align: center;">RP-221732</td>
<td style="text-align: center;">0093</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on PDCP for SL relay</td>
<td style="text-align: center;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-96</td>
<td style="text-align: center;">RP-221731</td>
<td style="text-align: center;">0094</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to UDC</td>
<td style="text-align: center;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-96</td>
<td style="text-align: center;">RP-221712</td>
<td style="text-align: center;">0095</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Corrections on receiving PDCP entity
establishment for SL-SRB0/SL-SRB1</td>
<td style="text-align: center;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-96</td>
<td style="text-align: center;">RP-221754</td>
<td style="text-align: center;">0096</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">PDCP Corrections for MBS</td>
<td style="text-align: center;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022/09</td>
<td style="text-align: center;">RP-97</td>
<td style="text-align: center;">RP-222524</td>
<td style="text-align: center;">0097</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on PDCP for L2 U2N Relay</td>
<td style="text-align: center;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-97</td>
<td style="text-align: center;">RP-222523</td>
<td style="text-align: center;">0098</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections for MBS 38.323</td>
<td style="text-align: center;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022/12</td>
<td style="text-align: center;">RP-98</td>
<td style="text-align: center;">RP-223406</td>
<td style="text-align: center;">0102</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">MBS corrections for PDCP</td>
<td style="text-align: center;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-98</td>
<td style="text-align: center;">RP-223412</td>
<td style="text-align: center;">0104</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">PDCP correction for SL relay</td>
<td style="text-align: center;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-98</td>
<td style="text-align: center;">RP-223413</td>
<td style="text-align: center;">0105</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on PDCP Control PDU for UDC
feedback</td>
<td style="text-align: center;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-98</td>
<td style="text-align: center;">RP-223414</td>
<td style="text-align: center;">0111</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Data volume calculation for DAPS</td>
<td style="text-align: center;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">RP-98</td>
<td style="text-align: center;">RP-223406</td>
<td style="text-align: center;">0112</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">PDCP Initialisation of MRB</td>
<td style="text-align: center;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2023/03</td>
<td style="text-align: center;">RP-99</td>
<td style="text-align: center;">RP-230692</td>
<td style="text-align: center;">0115</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on PDCP for L2 U2N
Relay</td>
<td style="text-align: center;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2023/06</td>
<td style="text-align: center;">RP-100</td>
<td style="text-align: center;">RP-231416</td>
<td style="text-align: center;">0123</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on the services expected
from SRAP layer</td>
<td style="text-align: center;">17.5.0</td>
</tr>
</tbody>
</table>
</body>
</html>
