<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>38321-h90</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
  type="text/javascript"></script>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#contents" id="toc-contents"><br />
Contents</a></li>
<li><a href="#foreword" id="toc-foreword"><br />
Foreword</a></li>
<li><a href="#scope" id="toc-scope"><br />
1 Scope</a></li>
<li><a href="#references" id="toc-references">2 References</a></li>
<li><a href="#definitions-symbols-and-abbreviations"
id="toc-definitions-symbols-and-abbreviations">3 Definitions, symbols
and abbreviations</a>
<ul>
<li><a href="#definitions" id="toc-definitions">3.1 Definitions</a></li>
<li><a href="#abbreviations" id="toc-abbreviations">3.2
Abbreviations</a></li>
</ul></li>
<li><a href="#general" id="toc-general">4 General</a>
<ul>
<li><a href="#introduction" id="toc-introduction">4.1
Introduction</a></li>
<li><a href="#mac-architecture" id="toc-mac-architecture">4.2 MAC
architecture</a>
<ul>
<li><a href="#general-1" id="toc-general-1">4.2.1 General</a></li>
<li><a href="#mac-entities" id="toc-mac-entities">4.2.2 MAC
Entities</a></li>
</ul></li>
<li><a href="#services" id="toc-services">4.3 Services</a>
<ul>
<li><a href="#services-provided-to-upper-layers"
id="toc-services-provided-to-upper-layers">4.3.1 Services provided to
upper layers</a></li>
<li><a href="#services-expected-from-physical-layer"
id="toc-services-expected-from-physical-layer">4.3.2 Services expected
from physical layer</a></li>
</ul></li>
<li><a href="#functions" id="toc-functions">4.4 Functions</a></li>
<li><a href="#channel-structure" id="toc-channel-structure">4.5 Channel
structure</a>
<ul>
<li><a href="#general-2" id="toc-general-2">4.5.1 General</a></li>
<li><a href="#transport-channels" id="toc-transport-channels">4.5.2
Transport Channels</a></li>
<li><a href="#logical-channels" id="toc-logical-channels">4.5.3 Logical
Channels</a></li>
<li><a href="#mapping-of-transport-channels-to-logical-channels"
id="toc-mapping-of-transport-channels-to-logical-channels">4.5.4 Mapping
of Transport Channels to Logical Channels</a>
<ul>
<li><a href="#general-3" id="toc-general-3">4.5.4.1 General</a></li>
<li><a href="#uplink-mapping" id="toc-uplink-mapping">4.5.4.2 Uplink
mapping</a></li>
<li><a href="#downlink-mapping" id="toc-downlink-mapping">4.5.4.3
Downlink mapping</a></li>
<li><a href="#sidelink-mapping" id="toc-sidelink-mapping">4.5.4.4
Sidelink mapping</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#mac-procedures" id="toc-mac-procedures">5 MAC
procedures</a>
<ul>
<li><a href="#random-access-procedure"
id="toc-random-access-procedure">5.1 Random Access procedure</a>
<ul>
<li><a href="#random-access-procedure-initialization"
id="toc-random-access-procedure-initialization">5.1.1 Random Access
procedure initialization</a></li>
<li><a
href="#a-initialization-of-variables-specific-to-random-access-type"
id="toc-a-initialization-of-variables-specific-to-random-access-type">5.1.1a
Initialization of variables specific to Random Access type</a></li>
<li><a
href="#b-selection-of-the-set-of-random-access-resources-for-the-random-access-procedure"
id="toc-b-selection-of-the-set-of-random-access-resources-for-the-random-access-procedure">5.1.1b
Selection of the set of Random Access resources for the Random Access
procedure</a></li>
<li><a href="#c-availability-of-the-set-of-random-access-resources"
id="toc-c-availability-of-the-set-of-random-access-resources">5.1.1c
Availability of the set of Random Access resources</a></li>
<li><a
href="#d-selection-of-the-set-of-random-access-resources-based-on-feature-prioritization"
id="toc-d-selection-of-the-set-of-random-access-resources-based-on-feature-prioritization">5.1.1d
Selection of the set of Random Access resources based on feature
prioritization</a></li>
<li><a href="#random-access-resource-selection"
id="toc-random-access-resource-selection">5.1.2 Random Access Resource
selection</a></li>
<li><a href="#a-random-access-resource-selection-for-2-step-ra-type"
id="toc-a-random-access-resource-selection-for-2-step-ra-type">5.1.2a
Random Access Resource selection for 2-step RA type</a></li>
<li><a href="#random-access-preamble-transmission"
id="toc-random-access-preamble-transmission">5.1.3 Random Access
Preamble transmission</a></li>
<li><a href="#a-msga-transmission" id="toc-a-msga-transmission">5.1.3a
MSGA transmission</a></li>
<li><a href="#random-access-response-reception"
id="toc-random-access-response-reception">5.1.4 Random Access Response
reception</a></li>
<li><a
href="#a-msgb-reception-and-contention-resolution-for-2-step-ra-type"
id="toc-a-msgb-reception-and-contention-resolution-for-2-step-ra-type">5.1.4a
MSGB reception and contention resolution for 2-step RA type</a></li>
<li><a href="#contention-resolution"
id="toc-contention-resolution">5.1.5 Contention Resolution</a></li>
<li><a href="#completion-of-the-random-access-procedure"
id="toc-completion-of-the-random-access-procedure">5.1.6 Completion of
the Random Access procedure</a></li>
</ul></li>
<li><a href="#maintenance-of-uplink-time-alignment"
id="toc-maintenance-of-uplink-time-alignment">5.2 Maintenance of Uplink
Time Alignment</a></li>
<li><a href="#a-maintenance-of-ul-synchronization"
id="toc-a-maintenance-of-ul-synchronization">5.2a Maintenance of UL
Synchronization</a></li>
<li><a href="#dl-sch-data-transfer" id="toc-dl-sch-data-transfer">5.3
DL-SCH data transfer</a>
<ul>
<li><a href="#dl-assignment-reception"
id="toc-dl-assignment-reception">5.3.1 DL Assignment reception</a></li>
<li><a href="#harq-operation" id="toc-harq-operation">5.3.2 HARQ
operation</a>
<ul>
<li><a href="#harq-entity" id="toc-harq-entity">5.3.2.1 HARQ
Entity</a></li>
<li><a href="#harq-process" id="toc-harq-process">5.3.2.2 HARQ
process</a></li>
</ul></li>
<li><a href="#disassembly-and-demultiplexing"
id="toc-disassembly-and-demultiplexing">5.3.3 Disassembly and
demultiplexing</a></li>
</ul></li>
<li><a href="#ul-sch-data-transfer" id="toc-ul-sch-data-transfer">5.4
UL-SCH data transfer</a>
<ul>
<li><a href="#ul-grant-reception" id="toc-ul-grant-reception">5.4.1 UL
Grant reception</a></li>
<li><a href="#harq-operation-1" id="toc-harq-operation-1">5.4.2 HARQ
operation</a>
<ul>
<li><a href="#harq-entity-1" id="toc-harq-entity-1">5.4.2.1 HARQ
Entity</a></li>
<li><a href="#harq-process-1" id="toc-harq-process-1">5.4.2.2 HARQ
process</a></li>
</ul></li>
<li><a href="#multiplexing-and-assembly"
id="toc-multiplexing-and-assembly">5.4.3 Multiplexing and assembly</a>
<ul>
<li><a href="#logical-channel-prioritization"
id="toc-logical-channel-prioritization">5.4.3.1 Logical Channel
Prioritization</a>
<ul>
<li><a href="#general-4" id="toc-general-4">5.4.3.1.1 General</a></li>
<li><a href="#selection-of-logical-channels"
id="toc-selection-of-logical-channels">5.4.3.1.2 Selection of logical
channels</a></li>
<li><a href="#allocation-of-resources"
id="toc-allocation-of-resources">5.4.3.1.3 Allocation of
resources</a></li>
</ul></li>
<li><a href="#multiplexing-of-mac-control-elements-and-mac-sdus"
id="toc-multiplexing-of-mac-control-elements-and-mac-sdus">5.4.3.2
Multiplexing of MAC Control Elements and MAC SDUs</a></li>
</ul></li>
<li><a href="#scheduling-request" id="toc-scheduling-request">5.4.4
Scheduling Request</a></li>
<li><a href="#buffer-status-reporting"
id="toc-buffer-status-reporting">5.4.5 Buffer Status Reporting</a></li>
<li><a href="#power-headroom-reporting"
id="toc-power-headroom-reporting">5.4.6 Power Headroom
Reporting</a></li>
<li><a href="#pre-emptive-buffer-status-reporting"
id="toc-pre-emptive-buffer-status-reporting">5.4.7 Pre-emptive Buffer
Status Reporting</a></li>
<li><a href="#timing-advance-reporting"
id="toc-timing-advance-reporting">5.4.8 Timing Advance
Reporting</a></li>
</ul></li>
<li><a href="#pch-reception" id="toc-pch-reception">5.5 PCH
reception</a></li>
<li><a href="#bch-reception" id="toc-bch-reception">5.6 BCH
reception</a></li>
<li><a href="#discontinuous-reception-drx"
id="toc-discontinuous-reception-drx">5.7 Discontinuous Reception
(DRX)</a></li>
<li><a href="#a-discontinuous-reception-drx-for-mbs-broadcast"
id="toc-a-discontinuous-reception-drx-for-mbs-broadcast">5.7a
Discontinuous Reception (DRX) for MBS Broadcast</a></li>
<li><a href="#b-discontinuous-reception-drx-for-mbs-multicast"
id="toc-b-discontinuous-reception-drx-for-mbs-multicast">5.7b
Discontinuous Reception (DRX) for MBS Multicast</a></li>
<li><a href="#transmission-and-reception-without-dynamic-scheduling"
id="toc-transmission-and-reception-without-dynamic-scheduling">5.8
Transmission and reception without dynamic scheduling</a>
<ul>
<li><a href="#downlink" id="toc-downlink">5.8.1 Downlink</a></li>
<li><a href="#a-downlink-for-multicast"
id="toc-a-downlink-for-multicast">5.8.1a Downlink for Multicast</a></li>
<li><a href="#uplink" id="toc-uplink">5.8.2 Uplink</a></li>
<li><a href="#sidelink" id="toc-sidelink">5.8.3 Sidelink</a></li>
</ul></li>
<li><a href="#activationdeactivation-of-scells"
id="toc-activationdeactivation-of-scells">5.9 Activation/Deactivation of
SCells</a></li>
<li><a href="#activationdeactivation-of-pdcp-duplication"
id="toc-activationdeactivation-of-pdcp-duplication">5.10
Activation/Deactivation of PDCP duplication</a></li>
<li><a href="#mac-reconfiguration" id="toc-mac-reconfiguration">5.11 MAC
reconfiguration</a></li>
<li><a href="#mac-reset" id="toc-mac-reset">5.12 MAC Reset</a></li>
<li><a href="#a-void" id="toc-a-void">5.12a Void</a></li>
<li><a
href="#handling-of-unknown-unforeseen-and-erroneous-protocol-data"
id="toc-handling-of-unknown-unforeseen-and-erroneous-protocol-data">5.13
Handling of unknown, unforeseen and erroneous protocol data</a></li>
<li><a href="#handling-of-measurement-gaps"
id="toc-handling-of-measurement-gaps">5.14 Handling of measurement
gaps</a></li>
<li><a href="#bandwidth-part-bwp-operation"
id="toc-bandwidth-part-bwp-operation">5.15 Bandwidth Part (BWP)
operation</a>
<ul>
<li><a href="#downlink-and-uplink" id="toc-downlink-and-uplink">5.15.1
Downlink and Uplink</a></li>
<li><a href="#sidelink-1" id="toc-sidelink-1">5.15.2 Sidelink</a></li>
</ul></li>
<li><a href="#sul-operation" id="toc-sul-operation">5.16 SUL
operation</a></li>
<li><a href="#beam-failure-detection-and-recovery-procedure"
id="toc-beam-failure-detection-and-recovery-procedure">5.17 Beam Failure
Detection and Recovery procedure</a></li>
<li><a href="#handling-of-mac-ces" id="toc-handling-of-mac-ces">5.18
Handling of MAC CEs</a>
<ul>
<li><a href="#general-5" id="toc-general-5">5.18.1 General</a></li>
<li><a
href="#activationdeactivation-of-semi-persistent-csi-rscsi-im-resource-set"
id="toc-activationdeactivation-of-semi-persistent-csi-rscsi-im-resource-set">5.18.2
Activation/Deactivation of Semi-persistent CSI-RS/CSI-IM resource
set</a></li>
<li><a href="#aperiodic-csi-trigger-state-subselection"
id="toc-aperiodic-csi-trigger-state-subselection">5.18.3 Aperiodic CSI
Trigger State Subselection</a></li>
<li><a href="#activationdeactivation-of-ue-specific-pdsch-tci-state"
id="toc-activationdeactivation-of-ue-specific-pdsch-tci-state">5.18.4
Activation/Deactivation of UE-specific PDSCH TCI state</a></li>
<li><a href="#indication-of-tci-state-for-ue-specific-pdcch"
id="toc-indication-of-tci-state-for-ue-specific-pdcch">5.18.5 Indication
of TCI state for UE-specific PDCCH</a></li>
<li><a
href="#activationdeactivation-of-semi-persistent-csi-reporting-on-pucch"
id="toc-activationdeactivation-of-semi-persistent-csi-reporting-on-pucch">5.18.6
Activation/Deactivation of Semi-persistent CSI reporting on
PUCCH</a></li>
<li><a
href="#activationdeactivation-of-semi-persistent-srs-and-indication-of-spatial-relation-of-spap-srs"
id="toc-activationdeactivation-of-semi-persistent-srs-and-indication-of-spatial-relation-of-spap-srs">5.18.7
Activation/Deactivation of Semi-persistent SRS and Indication of spatial
relation of SP/AP SRS</a></li>
<li><a
href="#activationdeactivation-of-spatial-relation-of-pucch-resource"
id="toc-activationdeactivation-of-spatial-relation-of-pucch-resource">5.18.8
Activation/Deactivation of spatial relation of PUCCH resource</a></li>
<li><a
href="#activationdeactivation-of-semi-persistent-zp-csi-rs-resource-set"
id="toc-activationdeactivation-of-semi-persistent-zp-csi-rs-resource-set">5.18.9
Activation/Deactivation of semi-persistent ZP CSI-RS resource
set</a></li>
<li><a href="#recommended-bit-rate"
id="toc-recommended-bit-rate">5.18.10 Recommended Bit Rate</a></li>
<li><a href="#void" id="toc-void">5.18.11 Void</a></li>
<li><a href="#void-1" id="toc-void-1">5.18.12 Void</a></li>
<li><a href="#void-2" id="toc-void-2">5.18.13 Void</a></li>
<li><a href="#update-of-pathloss-reference-rs-of-srs"
id="toc-update-of-pathloss-reference-rs-of-srs">5.18.14 Update of
Pathloss Reference RS of SRS</a></li>
<li><a href="#update-of-pathloss-reference-rs-of-pusch"
id="toc-update-of-pathloss-reference-rs-of-pusch">5.18.15 Update of
Pathloss Reference RS of PUSCH</a></li>
<li><a
href="#indication-of-spatial-relation-of-srs-resource-for-a-serving-cell-set"
id="toc-indication-of-spatial-relation-of-srs-resource-for-a-serving-cell-set">5.18.16
Indication of spatial relation of SRS resource for a Serving Cell
set</a></li>
<li><a href="#activationdeactivation-of-semi-persistent-positioning-srs"
id="toc-activationdeactivation-of-semi-persistent-positioning-srs">5.18.17
Activation/Deactivation of Semi-Persistent Positioning SRS</a></li>
<li><a href="#timing-offset-adjustments-for-iab"
id="toc-timing-offset-adjustments-for-iab">5.18.18 Timing offset
adjustments for IAB</a></li>
<li><a href="#guard-symbols-for-iab"
id="toc-guard-symbols-for-iab">5.18.19 Guard symbols for IAB</a></li>
<li><a
href="#positioning-measurement-gap-activationdeactivation-command"
id="toc-positioning-measurement-gap-activationdeactivation-command">5.18.20
Positioning Measurement Gap Activation/Deactivation Command</a></li>
<li><a href="#ppw-activationdeactivation-command"
id="toc-ppw-activationdeactivation-command">5.18.21 PPW
Activation/Deactivation Command</a></li>
<li><a
href="#update-of-pucch-power-control-set-for-multiple-trp-pucch-repetition"
id="toc-update-of-pucch-power-control-set-for-multiple-trp-pucch-repetition">5.18.22
Update of PUCCH Power Control Set for multiple TRP PUCCH
repetition</a></li>
<li><a href="#unified-tci-states-activationdeactivation-mac-ce"
id="toc-unified-tci-states-activationdeactivation-mac-ce">5.18.23
Unified TCI States Activation/Deactivation MAC CE</a></li>
<li><a href="#update-of-differential-koffset"
id="toc-update-of-differential-koffset">5.18.24 Update of Differential
Koffset</a></li>
<li><a href="#bfd-rs-indication-mac-ce"
id="toc-bfd-rs-indication-mac-ce">5.18.25 BFD-RS Indication MAC
CE</a></li>
<li><a href="#restricted-and-recommended-beam-indication-for-iab"
id="toc-restricted-and-recommended-beam-indication-for-iab">5.18.26
Restricted and recommended beam indication for IAB</a></li>
<li><a href="#dl-tx-power-adjustment-for-iab"
id="toc-dl-tx-power-adjustment-for-iab">5.18.27 DL TX power adjustment
for IAB</a></li>
<li><a href="#ul-psd-range-adjustment-for-iab"
id="toc-ul-psd-range-adjustment-for-iab">5.18.28 UL PSD range adjustment
for IAB</a></li>
<li><a href="#timing-case-indication-for-iab"
id="toc-timing-case-indication-for-iab">5.18.29 Timing case indication
for IAB</a></li>
<li><a href="#case-6-timing-request"
id="toc-case-6-timing-request">5.18.30 Case-6 Timing Request</a></li>
</ul></li>
<li><a href="#data-inactivity-monitoring"
id="toc-data-inactivity-monitoring">5.19 Data inactivity
monitoring</a></li>
<li><a href="#void-3" id="toc-void-3">5.20 Void</a></li>
<li><a href="#lbt-operation" id="toc-lbt-operation">5.21 LBT
operation</a>
<ul>
<li><a href="#general-6" id="toc-general-6">5.21.1 General</a></li>
<li><a href="#lbt-failure-detection-and-recovery-procedure"
id="toc-lbt-failure-detection-and-recovery-procedure">5.21.2 LBT failure
detection and recovery procedure</a></li>
</ul></li>
<li><a href="#sl-sch-data-transfer" id="toc-sl-sch-data-transfer">5.22
SL-SCH Data transfer</a>
<ul>
<li><a href="#sl-sch-data-transmission"
id="toc-sl-sch-data-transmission">5.22.1 SL-SCH Data transmission</a>
<ul>
<li><a href="#sl-grant-reception-and-sci-transmission"
id="toc-sl-grant-reception-and-sci-transmission">5.22.1.1 SL Grant
reception and SCI transmission</a></li>
<li><a href="#tx-resource-re-selection-check"
id="toc-tx-resource-re-selection-check">5.22.1.2 TX resource
(re-)selection check</a></li>
<li><a href="#a-re-evaluation-and-pre-emption"
id="toc-a-re-evaluation-and-pre-emption">5.22.1.2a Re-evaluation and
Pre-emption</a></li>
<li><a
href="#b-re-selection-for-using-a-received-resource-conflict-indication"
id="toc-b-re-selection-for-using-a-received-resource-conflict-indication">5.22.1.2b
Re-selection for using a received resource conflict indication</a></li>
<li><a href="#sidelink-harq-operation"
id="toc-sidelink-harq-operation">5.22.1.3 Sidelink HARQ operation</a>
<ul>
<li><a href="#sidelink-harq-entity"
id="toc-sidelink-harq-entity">5.22.1.3.1 Sidelink HARQ Entity</a></li>
<li><a href="#a-sidelink-process"
id="toc-a-sidelink-process">5.22.1.3.1a Sidelink process</a></li>
<li><a href="#psfch-reception" id="toc-psfch-reception">5.22.1.3.2 PSFCH
reception</a></li>
<li><a href="#harq-based-sidelink-rlf-detection"
id="toc-harq-based-sidelink-rlf-detection">5.22.1.3.3 HARQ-based
Sidelink RLF detection</a></li>
</ul></li>
<li><a href="#multiplexing-and-assembly-1"
id="toc-multiplexing-and-assembly-1">5.22.1.4 Multiplexing and
assembly</a>
<ul>
<li><a href="#general-7" id="toc-general-7">5.22.1.4.0 General</a></li>
<li><a href="#logical-channel-prioritization-1"
id="toc-logical-channel-prioritization-1">5.22.1.4.1 Logical channel
prioritization</a>
<ul>
<li><a href="#general-8" id="toc-general-8">5.22.1.4.1.1
General</a></li>
<li><a href="#selection-of-logical-channels-1"
id="toc-selection-of-logical-channels-1">5.22.1.4.1.2 Selection of
logical channels</a></li>
<li><a href="#allocation-of-sidelink-resources"
id="toc-allocation-of-sidelink-resources">5.22.1.4.1.3 Allocation of
sidelink resources</a></li>
</ul></li>
<li><a href="#multiplexing-of-mac-control-elements-and-mac-sdus-1"
id="toc-multiplexing-of-mac-control-elements-and-mac-sdus-1">5.22.1.4.2
Multiplexing of MAC Control Elements and MAC SDUs</a></li>
</ul></li>
<li><a href="#scheduling-request-1"
id="toc-scheduling-request-1">5.22.1.5 Scheduling Request</a></li>
<li><a href="#buffer-status-reporting-1"
id="toc-buffer-status-reporting-1">5.22.1.6 Buffer Status
Reporting</a></li>
<li><a href="#csi-reporting" id="toc-csi-reporting">5.22.1.7 CSI
Reporting</a></li>
<li><a href="#void-4" id="toc-void-4">5.22.1.8 Void</a></li>
<li><a href="#iuc-request-transmission"
id="toc-iuc-request-transmission">5.22.1.9 IUC-Request
transmission</a></li>
<li><a href="#iuc-information-reporting"
id="toc-iuc-information-reporting">5.22.1.10 IUC-Information
Reporting</a>
<ul>
<li><a href="#general-9" id="toc-general-9">5.22.1.10.1 General</a></li>
<li><a href="#reception-of-iuc-information-reporting"
id="toc-reception-of-iuc-information-reporting">5.22.1.10.2 Reception of
IUC-Information Reporting</a></li>
</ul></li>
</ul></li>
<li><a href="#sl-sch-data-reception"
id="toc-sl-sch-data-reception">5.22.2 SL-SCH Data reception</a>
<ul>
<li><a href="#sci-reception" id="toc-sci-reception">5.22.2.1 SCI
reception</a></li>
<li><a href="#sidelink-harq-operation-1"
id="toc-sidelink-harq-operation-1">5.22.2.2 Sidelink HARQ operation</a>
<ul>
<li><a href="#sidelink-harq-entity-1"
id="toc-sidelink-harq-entity-1">5.22.2.2.1 Sidelink HARQ Entity</a></li>
<li><a href="#sidelink-process" id="toc-sidelink-process">5.22.2.2.2
Sidelink process</a></li>
</ul></li>
<li><a href="#disassembly-and-demultiplexing-1"
id="toc-disassembly-and-demultiplexing-1">5.22.2.3 Disassembly and
demultiplexing</a></li>
</ul></li>
</ul></li>
<li><a href="#sl-bch-data-transfer" id="toc-sl-bch-data-transfer">5.23
SL-BCH data transfer</a>
<ul>
<li><a href="#sl-bch-data-transmission"
id="toc-sl-bch-data-transmission">5.23.1 SL-BCH data
transmission</a></li>
<li><a href="#sl-bch-data-reception"
id="toc-sl-bch-data-reception">5.23.2 SL-BCH data reception</a></li>
</ul></li>
<li><a href="#handling-of-prs-processing-window"
id="toc-handling-of-prs-processing-window">5.24 Handling of PRS
Processing Window</a></li>
<li><a
href="#positioning-measurement-gap-activationdeactivation-request"
id="toc-positioning-measurement-gap-activationdeactivation-request">5.25
Positioning Measurement Gap Activation/Deactivation Request</a></li>
<li><a href="#positioning-srs-transmission-in-rrc_inactive"
id="toc-positioning-srs-transmission-in-rrc_inactive">5.26 Positioning
SRS transmission in RRC_INACTIVE</a>
<ul>
<li><a href="#general-10" id="toc-general-10">5.26.1 General</a></li>
<li><a href="#ta-validation-for-srs-transmission-in-rrc_inactive"
id="toc-ta-validation-for-srs-transmission-in-rrc_inactive">5.26.2 TA
validation for SRS transmission in RRC_INACTIVE</a></li>
</ul></li>
<li><a href="#small-data-transmission"
id="toc-small-data-transmission">5.27 Small Data Transmission</a>
<ul>
<li><a href="#general-11" id="toc-general-11">5.27.1 General</a></li>
<li><a href="#ta-validation-for-cg-sdt"
id="toc-ta-validation-for-cg-sdt">5.27.2 TA Validation for
CG-SDT</a></li>
</ul></li>
<li><a href="#sidelink-discontinuous-reception-drx"
id="toc-sidelink-discontinuous-reception-drx">5.28 Sidelink
Discontinuous Reception (DRX)</a>
<ul>
<li><a href="#general-12" id="toc-general-12">5.28.1 General</a></li>
<li><a href="#behaviour-of-ue-receiving-sl-sch-data"
id="toc-behaviour-of-ue-receiving-sl-sch-data">5.28.2 Behaviour of UE
receiving SL-SCH Data</a></li>
<li><a href="#behaviour-of-ue-transmitting-sl-sch-data"
id="toc-behaviour-of-ue-transmitting-sl-sch-data">5.28.3 Behaviour of UE
transmitting SL-SCH Data</a></li>
</ul></li>
<li><a href="#activationdeactivation-of-scg"
id="toc-activationdeactivation-of-scg">5.29 Activation/Deactivation of
SCG</a></li>
<li><a href="#handling-of-fr2-ul-gap"
id="toc-handling-of-fr2-ul-gap">5.30 Handling of FR2 UL gap</a></li>
</ul></li>
<li><a href="#protocol-data-units-formats-and-parameters"
id="toc-protocol-data-units-formats-and-parameters">6 Protocol Data
Units, formats and parameters</a>
<ul>
<li><a href="#protocol-data-units" id="toc-protocol-data-units">6.1
Protocol Data Units</a>
<ul>
<li><a href="#general-13" id="toc-general-13">6.1.1 General</a></li>
<li><a
href="#mac-pdu-dl-sch-and-ul-sch-except-transparent-mac-and-random-access-response"
id="toc-mac-pdu-dl-sch-and-ul-sch-except-transparent-mac-and-random-access-response">6.1.2
MAC PDU (DL-SCH and UL-SCH except transparent MAC and Random Access
Response)</a></li>
<li><a href="#mac-control-elements-ces"
id="toc-mac-control-elements-ces">6.1.3 MAC Control Elements (CEs)</a>
<ul>
<li><a href="#buffer-status-report-mac-ces"
id="toc-buffer-status-report-mac-ces">6.1.3.1 Buffer Status Report MAC
CEs</a></li>
<li><a href="#c-rnti-mac-ce" id="toc-c-rnti-mac-ce">6.1.3.2 C-RNTI MAC
CE</a></li>
<li><a href="#ue-contention-resolution-identity-mac-ce"
id="toc-ue-contention-resolution-identity-mac-ce">6.1.3.3 UE Contention
Resolution Identity MAC CE</a></li>
<li><a href="#timing-advance-command-mac-ce"
id="toc-timing-advance-command-mac-ce">6.1.3.4 Timing Advance Command
MAC CE</a></li>
<li><a href="#a-absolute-timing-advance-command-mac-ce"
id="toc-a-absolute-timing-advance-command-mac-ce">6.1.3.4a Absolute
Timing Advance Command MAC CE</a></li>
<li><a href="#drx-command-mac-ce" id="toc-drx-command-mac-ce">6.1.3.5
DRX Command MAC CE</a></li>
<li><a href="#long-drx-command-mac-ce"
id="toc-long-drx-command-mac-ce">6.1.3.6 Long DRX Command MAC
CE</a></li>
<li><a href="#configured-grant-confirmation-mac-ce"
id="toc-configured-grant-confirmation-mac-ce">6.1.3.7 Configured Grant
Confirmation MAC CE</a></li>
<li><a href="#single-entry-phr-mac-ce"
id="toc-single-entry-phr-mac-ce">6.1.3.8 Single Entry PHR MAC
CE</a></li>
<li><a href="#multiple-entry-phr-mac-ce"
id="toc-multiple-entry-phr-mac-ce">6.1.3.9 Multiple Entry PHR MAC
CE</a></li>
<li><a href="#scell-activationdeactivation-mac-ces"
id="toc-scell-activationdeactivation-mac-ces">6.1.3.10 SCell
Activation/Deactivation MAC CEs</a></li>
<li><a href="#duplication-activationdeactivation-mac-ce"
id="toc-duplication-activationdeactivation-mac-ce">6.1.3.11 Duplication
Activation/Deactivation MAC CE</a></li>
<li><a
href="#sp-csi-rscsi-im-resource-set-activationdeactivation-mac-ce"
id="toc-sp-csi-rscsi-im-resource-set-activationdeactivation-mac-ce">6.1.3.12
SP CSI-RS/CSI-IM Resource Set Activation/Deactivation MAC CE</a></li>
<li><a href="#aperiodic-csi-trigger-state-subselection-mac-ce"
id="toc-aperiodic-csi-trigger-state-subselection-mac-ce">6.1.3.13
Aperiodic CSI Trigger State Subselection MAC CE</a></li>
<li><a
href="#tci-states-activationdeactivation-for-ue-specific-pdsch-mac-ce"
id="toc-tci-states-activationdeactivation-for-ue-specific-pdsch-mac-ce">6.1.3.14
TCI States Activation/Deactivation for UE-specific PDSCH MAC CE</a></li>
<li><a href="#tci-state-indication-for-ue-specific-pdcch-mac-ce"
id="toc-tci-state-indication-for-ue-specific-pdcch-mac-ce">6.1.3.15 TCI
State Indication for UE-specific PDCCH MAC CE</a></li>
<li><a href="#sp-csi-reporting-on-pucch-activationdeactivation-mac-ce"
id="toc-sp-csi-reporting-on-pucch-activationdeactivation-mac-ce">6.1.3.16
SP CSI reporting on PUCCH Activation/Deactivation MAC CE</a></li>
<li><a href="#sp-srs-activationdeactivation-mac-ce"
id="toc-sp-srs-activationdeactivation-mac-ce">6.1.3.17 SP SRS
Activation/Deactivation MAC CE</a></li>
<li><a href="#pucch-spatial-relation-activationdeactivation-mac-ce"
id="toc-pucch-spatial-relation-activationdeactivation-mac-ce">6.1.3.18
PUCCH spatial relation Activation/Deactivation MAC CE</a></li>
<li><a href="#sp-zp-csi-rs-resource-set-activationdeactivation-mac-ce"
id="toc-sp-zp-csi-rs-resource-set-activationdeactivation-mac-ce">6.1.3.19
SP ZP CSI-RS Resource Set Activation/Deactivation MAC CE</a></li>
<li><a href="#recommended-bit-rate-mac-ce"
id="toc-recommended-bit-rate-mac-ce">6.1.3.20 Recommended bit rate MAC
CE</a></li>
<li><a href="#timing-delta-mac-ce" id="toc-timing-delta-mac-ce">6.1.3.21
Timing Delta MAC CE</a></li>
<li><a href="#guard-symbols-mac-ces"
id="toc-guard-symbols-mac-ces">6.1.3.22 Guard Symbols MAC CEs</a></li>
<li><a href="#bfr-mac-ces" id="toc-bfr-mac-ces">6.1.3.23 BFR MAC
CEs</a></li>
<li><a
href="#enhanced-tci-states-activationdeactivation-for-ue-specific-pdsch-mac-ce"
id="toc-enhanced-tci-states-activationdeactivation-for-ue-specific-pdsch-mac-ce">6.1.3.24
Enhanced TCI States Activation/Deactivation for UE-specific PDSCH MAC
CE</a></li>
<li><a
href="#enhanced-pucch-spatial-relation-activationdeactivation-mac-ce"
id="toc-enhanced-pucch-spatial-relation-activationdeactivation-mac-ce">6.1.3.25
Enhanced PUCCH Spatial Relation Activation/Deactivation MAC CE</a></li>
<li><a href="#enhanced-spap-srs-spatial-relation-indication-mac-ce"
id="toc-enhanced-spap-srs-spatial-relation-indication-mac-ce">6.1.3.26
Enhanced SP/AP SRS Spatial Relation Indication MAC CE</a></li>
<li><a href="#srs-pathloss-reference-rs-update-mac-ce"
id="toc-srs-pathloss-reference-rs-update-mac-ce">6.1.3.27 SRS Pathloss
Reference RS Update MAC CE</a></li>
<li><a href="#pusch-pathloss-reference-rs-update-mac-ce"
id="toc-pusch-pathloss-reference-rs-update-mac-ce">6.1.3.28 PUSCH
Pathloss Reference RS Update MAC CE</a></li>
<li><a
href="#serving-cell-set-based-srs-spatial-relation-indication-mac-ce"
id="toc-serving-cell-set-based-srs-spatial-relation-indication-mac-ce">6.1.3.29
Serving Cell Set based SRS Spatial Relation Indication MAC CE</a></li>
<li><a href="#lbt-failure-mac-ces" id="toc-lbt-failure-mac-ces">6.1.3.30
LBT failure MAC CEs</a></li>
<li><a href="#multiple-entry-configured-grant-confirmation-mac-ce"
id="toc-multiple-entry-configured-grant-confirmation-mac-ce">6.1.3.31
Multiple Entry Configured Grant Confirmation MAC CE</a></li>
<li><a href="#duplication-rlc-activationdeactivation-mac-ce"
id="toc-duplication-rlc-activationdeactivation-mac-ce">6.1.3.32
Duplication RLC Activation/Deactivation MAC CE</a></li>
<li><a href="#sidelink-buffer-status-report-mac-ces"
id="toc-sidelink-buffer-status-report-mac-ces">6.1.3.33 Sidelink Buffer
Status Report MAC CEs</a></li>
<li><a href="#sidelink-configured-grant-confirmation-mac-ce"
id="toc-sidelink-configured-grant-confirmation-mac-ce">6.1.3.34 Sidelink
Configured Grant Confirmation MAC CE</a></li>
<li><a href="#sidelink-csi-reporting-mac-ce"
id="toc-sidelink-csi-reporting-mac-ce">6.1.3.35 Sidelink CSI Reporting
MAC CE</a></li>
<li><a href="#sp-positioning-srs-activationdeactivation-mac-ce"
id="toc-sp-positioning-srs-activationdeactivation-mac-ce">6.1.3.36 SP
Positioning SRS Activation/Deactivation MAC CE</a></li>
<li><a href="#guard-symbols-mac-ces-for-case-6-and-case-7-timing-modes"
id="toc-guard-symbols-mac-ces-for-case-6-and-case-7-timing-modes">6.1.3.37
Guard Symbols MAC CEs for Case-6 and Case-7 timing modes</a></li>
<li><a href="#case-7-timing-advance-offset-mac-ce"
id="toc-case-7-timing-advance-offset-mac-ce">6.1.3.38 Case-7 Timing
advance offset MAC CE</a></li>
<li><a href="#case-6-timing-request-mac-ce"
id="toc-case-6-timing-request-mac-ce">6.1.3.39 Case-6 Timing Request MAC
CE</a></li>
<li><a
href="#positioning-measurement-gap-activationdeactivation-request-mac-ce"
id="toc-positioning-measurement-gap-activationdeactivation-request-mac-ce">6.1.3.40
Positioning Measurement Gap Activation/Deactivation Request MAC
CE</a></li>
<li><a
href="#positioning-measurement-gap-activationdeactivation-command-mac-ce"
id="toc-positioning-measurement-gap-activationdeactivation-command-mac-ce">6.1.3.41
Positioning Measurement Gap Activation/Deactivation Command MAC
CE</a></li>
<li><a href="#ppw-activationdeactivation-command-mac-ce"
id="toc-ppw-activationdeactivation-command-mac-ce">6.1.3.42 PPW
Activation/Deactivation Command MAC CE</a></li>
<li><a href="#enhanced-bfr-mac-ces"
id="toc-enhanced-bfr-mac-ces">6.1.3.43 Enhanced BFR MAC CEs</a></li>
<li><a
href="#enhanced-tci-states-indication-for-ue-specific-pdcch-mac-ce"
id="toc-enhanced-tci-states-indication-for-ue-specific-pdcch-mac-ce">6.1.3.44
Enhanced TCI States Indication for UE-specific PDCCH MAC CE</a></li>
<li><a
href="#pucch-spatial-relation-activationdeactivation-for-multiple-trp-pucch-repetition-mac-ce"
id="toc-pucch-spatial-relation-activationdeactivation-for-multiple-trp-pucch-repetition-mac-ce">6.1.3.45
PUCCH spatial relation Activation/Deactivation for multiple TRP PUCCH
repetition MAC CE</a></li>
<li><a
href="#pucch-power-control-set-update-for-multiple-trp-pucch-repetition-mac-ce"
id="toc-pucch-power-control-set-update-for-multiple-trp-pucch-repetition-mac-ce">6.1.3.46
PUCCH Power Control Set Update for multiple TRP PUCCH repetition MAC
CE</a></li>
<li><a href="#unified-tci-states-activationdeactivation-mac-ce-1"
id="toc-unified-tci-states-activationdeactivation-mac-ce-1">6.1.3.47
Unified TCI States Activation/Deactivation MAC CE</a></li>
<li><a href="#enhanced-single-entry-phr-mac-ce"
id="toc-enhanced-single-entry-phr-mac-ce">6.1.3.48 Enhanced Single Entry
PHR MAC CE</a></li>
<li><a href="#enhanced-multiple-entry-phr-mac-ce"
id="toc-enhanced-multiple-entry-phr-mac-ce">6.1.3.49 Enhanced Multiple
Entry PHR MAC CE</a></li>
<li><a href="#enhanced-single-entry-phr-for-multiple-trp-mac-ce"
id="toc-enhanced-single-entry-phr-for-multiple-trp-mac-ce">6.1.3.50
Enhanced Single Entry PHR for multiple TRP MAC CE</a></li>
<li><a href="#enhanced-multiple-entry-phr-for-multiple-trp-mac-ce"
id="toc-enhanced-multiple-entry-phr-for-multiple-trp-mac-ce">6.1.3.51
Enhanced Multiple Entry PHR for multiple TRP MAC CE</a></li>
<li><a href="#sidelink-drx-command-mac-ce"
id="toc-sidelink-drx-command-mac-ce">6.1.3.52 Sidelink DRX Command MAC
CE</a></li>
<li><a href="#inter-ue-coordination-information-mac-ce"
id="toc-inter-ue-coordination-information-mac-ce">6.1.3.53 Inter-UE
Coordination Information MAC CE</a></li>
<li><a href="#inter-ue-coordination-request-mac-ce"
id="toc-inter-ue-coordination-request-mac-ce">6.1.3.54 Inter-UE
Coordination Request MAC CE</a></li>
<li><a href="#enhanced-scell-activationdeactivation-mac-ces"
id="toc-enhanced-scell-activationdeactivation-mac-ces">6.1.3.55 Enhanced
SCell Activation/Deactivation MAC CEs</a></li>
<li><a href="#timing-advance-report-mac-ce"
id="toc-timing-advance-report-mac-ce">6.1.3.56 Timing Advance Report MAC
CE</a></li>
<li><a href="#differential-koffset-mac-ce"
id="toc-differential-koffset-mac-ce">6.1.3.57 Differential Koffset MAC
CE</a></li>
<li><a href="#bfd-rs-indication-mac-ce-1"
id="toc-bfd-rs-indication-mac-ce-1">6.1.3.58 BFD-RS Indication MAC
CE</a></li>
<li><a href="#spap-srs-tci-state-indication-mac-ce"
id="toc-spap-srs-tci-state-indication-mac-ce">6.1.3.59 SP/AP SRS TCI
State Indication MAC CE</a></li>
<li><a href="#serving-cell-set-based-srs-tci-state-indication-mac-ce"
id="toc-serving-cell-set-based-srs-tci-state-indication-mac-ce">6.1.3.60
Serving Cell Set based SRS TCI State Indication MAC CE</a></li>
<li><a href="#child-iab-du-restricted-beam-indication-mac-ce"
id="toc-child-iab-du-restricted-beam-indication-mac-ce">6.1.3.61 Child
IAB-DU Restricted Beam Indication MAC CE</a></li>
<li><a href="#iab-mt-recommended-beam-indication-mac-ce"
id="toc-iab-mt-recommended-beam-indication-mac-ce">6.1.3.62 IAB-MT
Recommended Beam Indication MAC CE</a></li>
<li><a
href="#dl-tx-power-adjustment-and-desired-dl-tx-power-adjustment-mac-ces"
id="toc-dl-tx-power-adjustment-and-desired-dl-tx-power-adjustment-mac-ces">6.1.3.63
DL TX Power Adjustment and Desired DL TX Power Adjustment MAC
CEs</a></li>
<li><a href="#desired-iab-mt-psd-range-mac-ce"
id="toc-desired-iab-mt-psd-range-mac-ce">6.1.3.64 Desired IAB-MT PSD
range MAC CE</a></li>
<li><a href="#timing-case-indication-mac-ce"
id="toc-timing-case-indication-mac-ce">6.1.3.65 Timing Case Indication
MAC CE</a></li>
</ul></li>
<li><a href="#mac-pdu-transparent-mac"
id="toc-mac-pdu-transparent-mac">6.1.4 MAC PDU (transparent
MAC)</a></li>
<li><a href="#mac-pdu-random-access-response"
id="toc-mac-pdu-random-access-response">6.1.5 MAC PDU (Random Access
Response)</a></li>
<li><a href="#a-mac-pdu-msgb" id="toc-a-mac-pdu-msgb">6.1.5a MAC PDU
(MSGB)</a></li>
<li><a href="#mac-pdu-sl-sch" id="toc-mac-pdu-sl-sch">6.1.6 MAC PDU
(SL-SCH)</a></li>
</ul></li>
<li><a href="#formats-and-parameters"
id="toc-formats-and-parameters">6.2 Formats and parameters</a>
<ul>
<li><a href="#mac-subheader-for-dl-sch-and-ul-sch"
id="toc-mac-subheader-for-dl-sch-and-ul-sch">6.2.1 MAC subheader for
DL-SCH and UL-SCH</a></li>
<li><a href="#mac-subheader-for-random-access-response"
id="toc-mac-subheader-for-random-access-response">6.2.2 MAC subheader
for Random Access Response</a></li>
<li><a href="#a-mac-subheader-for-msgb"
id="toc-a-mac-subheader-for-msgb">6.2.2a MAC subheader for MSGB</a></li>
<li><a href="#mac-payload-for-random-access-response"
id="toc-mac-payload-for-random-access-response">6.2.3 MAC payload for
Random Access Response</a></li>
<li><a href="#a-mac-payload-for-msgb"
id="toc-a-mac-payload-for-msgb">6.2.3a MAC payload for MSGB</a></li>
<li><a href="#mac-subheader-for-sl-sch"
id="toc-mac-subheader-for-sl-sch">6.2.4 MAC subheader for
SL-SCH</a></li>
</ul></li>
</ul></li>
<li><a href="#variables-and-constants"
id="toc-variables-and-constants">7 Variables and constants</a>
<ul>
<li><a href="#rnti-values" id="toc-rnti-values">7.1 RNTI values</a></li>
<li><a href="#backoff-parameter-values"
id="toc-backoff-parameter-values">7.2 Backoff Parameter values</a></li>
<li><a href="#delta_preamble-values" id="toc-delta_preamble-values">7.3
DELTA_PREAMBLE values</a></li>
<li><a href="#prach-mask-index-values"
id="toc-prach-mask-index-values">7.4 PRACH Mask Index values</a></li>
</ul></li>
</ul>
</nav>
<p>3GPP TS 38.321 V17.9.0 (2024-06)</p>
<p>Technical Specification</p>
<p>3rd Generation Partnership Project;</p>
<p>Technical Specification Group Radio Access Network;</p>
<p>NR;</p>
<p>Medium Access Control (MAC) protocol specification</p>
<p>(Release 17)</p>
<p><img src="media/image1.svg" /> <img src="media/image2.svg" /></p>
<p>The present document has been developed within the 3rd Generation
Partnership Project (3GPP <sup>TM</sup>) and may be further elaborated
for the purposes of 3GPP.<br />
The present document has not been subject to any approval process by the
3GPP Organizational Partners and shall not be implemented.<br />
This Specification is provided for future development work within 3GPP
only. The Organizational Partners accept no liability for any use of
this Specification.<br />
Specifications and Reports for implementation of the 3GPP <sup>TM</sup>
system should be obtained via the 3GPP Organizational Partners'
Publications Offices.</p>
<blockquote>
<p><em><strong>3GPP</strong></em></p>
<p>Postal address</p>
<p>3GPP support office address</p>
<p>650 Route des Lucioles - Sophia Antipolis</p>
<p>Valbonne - FRANCE</p>
<p>Tel.: +33 4 92 94 42 00 Fax: +33 4 93 65 47 16</p>
<p>Internet</p>
<p>http://www.3gpp.org</p>
</blockquote>
<p><em><strong>Copyright Notification</strong></em></p>
<p>No part may be reproduced except as authorized by written
permission.<br />
The copyright and the foregoing restriction extend to reproduction in
all media.</p>
<p>© 2024, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).</p>
<p>All rights reserved.</p>
<p>UMTS™ is a Trade Mark of ETSI registered for the benefit of its
members</p>
<p>3GPP™ is a Trade Mark of ETSI registered for the benefit of its
Members and of the 3GPP Organizational Partners<br />
LTE™ is a Trade Mark of ETSI registered for the benefit of its Members
and of the 3GPP Organizational Partners</p>
<p>GSM® and the GSM logo are registered and owned by the GSM
Association</p>
<h1 class="TT" id="contents"><br />
Contents</h1>
<p>Foreword <a href="#foreword">8</a></p>
<p>1 Scope <a href="#scope">9</a></p>
<p>2 References <a href="#references">9</a></p>
<p>3 Definitions, symbols and abbreviations <a
href="#definitions-symbols-and-abbreviations">10</a></p>
<p>3.1 Definitions <a href="#definitions">10</a></p>
<p>3.2 Abbreviations <a href="#abbreviations">11</a></p>
<p>4 General <a href="#general">13</a></p>
<p>4.1 Introduction <a href="#introduction">13</a></p>
<p>4.2 MAC architecture <a href="#mac-architecture">13</a></p>
<p>4.2.1 General <a href="#general-1">13</a></p>
<p>4.2.2 MAC Entities <a href="#mac-entities">13</a></p>
<p>4.3 Services <a href="#services">15</a></p>
<p>4.3.1 Services provided to upper layers <a
href="#services-provided-to-upper-layers">15</a></p>
<p>4.3.2 Services expected from physical layer <a
href="#services-expected-from-physical-layer">15</a></p>
<p>4.4 Functions <a href="#functions">15</a></p>
<p>4.5 Channel structure <a href="#channel-structure">16</a></p>
<p>4.5.1 General <a href="#general-2">16</a></p>
<p>4.5.2 Transport Channels <a href="#transport-channels">16</a></p>
<p>4.5.3 Logical Channels <a href="#logical-channels">16</a></p>
<p>4.5.4 Mapping of Transport Channels to Logical Channels <a
href="#mapping-of-transport-channels-to-logical-channels">17</a></p>
<p>4.5.4.1 General <a href="#general-3">17</a></p>
<p>4.5.4.2 Uplink mapping <a href="#uplink-mapping">17</a></p>
<p>4.5.4.3 Downlink mapping <a href="#downlink-mapping">17</a></p>
<p>4.5.4.4 Sidelink mapping <a href="#sidelink-mapping">17</a></p>
<p>5 MAC procedures <a href="#mac-procedures">18</a></p>
<p>5.1 Random Access procedure <a
href="#random-access-procedure">18</a></p>
<p>5.1.1 Random Access procedure initialization <a
href="#random-access-procedure-initialization">18</a></p>
<p>5.1.1a Initialization of variables specific to Random Access type <a
href="#a-initialization-of-variables-specific-to-random-access-type">22</a></p>
<p>5.1.1b Selection of the set of Random Access resources for the Random
Access procedure <a
href="#b-selection-of-the-set-of-random-access-resources-for-the-random-access-procedure">26</a></p>
<p>5.1.1c Availability of the set of Random Access resources <a
href="#c-availability-of-the-set-of-random-access-resources">26</a></p>
<p>5.1.1d Selection of the set of Random Access resources based on
feature prioritization <a
href="#d-selection-of-the-set-of-random-access-resources-based-on-feature-prioritization">27</a></p>
<p>5.1.2 Random Access Resource selection <a
href="#random-access-resource-selection">27</a></p>
<p>5.1.2a Random Access Resource selection for 2-step RA type <a
href="#a-random-access-resource-selection-for-2-step-ra-type">30</a></p>
<p>5.1.3 Random Access Preamble transmission <a
href="#random-access-preamble-transmission">32</a></p>
<p>5.1.3a MSGA transmission <a href="#a-msga-transmission">33</a></p>
<p>5.1.4 Random Access Response reception <a
href="#random-access-response-reception">35</a></p>
<p>5.1.4a MSGB reception and contention resolution for 2-step RA type <a
href="#a-msgb-reception-and-contention-resolution-for-2-step-ra-type">38</a></p>
<p>5.1.5 Contention Resolution <a
href="#contention-resolution">40</a></p>
<p>5.1.6 Completion of the Random Access procedure <a
href="#completion-of-the-random-access-procedure">43</a></p>
<p>5.2 Maintenance of Uplink Time Alignment <a
href="#maintenance-of-uplink-time-alignment">43</a></p>
<p>5.2a Maintenance of UL Synchronization <a
href="#a-maintenance-of-ul-synchronization">46</a></p>
<p>5.3 DL-SCH data transfer <a href="#dl-sch-data-transfer">46</a></p>
<p>5.3.1 DL Assignment reception <a
href="#dl-assignment-reception">46</a></p>
<p>5.3.2 HARQ operation <a href="#harq-operation">48</a></p>
<p>5.3.2.1 HARQ Entity <a href="#harq-entity">48</a></p>
<p>5.3.2.2 HARQ process <a href="#harq-process">49</a></p>
<p>5.3.3 Disassembly and demultiplexing <a
href="#disassembly-and-demultiplexing">50</a></p>
<p>5.4 UL-SCH data transfer <a href="#ul-sch-data-transfer">50</a></p>
<p>5.4.1 UL Grant reception <a href="#ul-grant-reception">50</a></p>
<p>5.4.2 HARQ operation <a href="#harq-operation-1">55</a></p>
<p>5.4.2.1 HARQ Entity <a href="#harq-entity-1">55</a></p>
<p>5.4.2.2 HARQ process <a href="#harq-process-1">58</a></p>
<p>5.4.3 Multiplexing and assembly <a
href="#multiplexing-and-assembly">60</a></p>
<p>5.4.3.1 Logical Channel Prioritization <a
href="#logical-channel-prioritization">60</a></p>
<p>5.4.3.1.1 General <a href="#general-4">60</a></p>
<p>5.4.3.1.2 Selection of logical channels <a
href="#selection-of-logical-channels">61</a></p>
<p>5.4.3.1.3 Allocation of resources <a
href="#allocation-of-resources">61</a></p>
<p>5.4.3.2 Multiplexing of MAC Control Elements and MAC SDUs <a
href="#multiplexing-of-mac-control-elements-and-mac-sdus">63</a></p>
<p>5.4.4 Scheduling Request <a href="#scheduling-request">63</a></p>
<p>5.4.5 Buffer Status Reporting <a
href="#buffer-status-reporting">68</a></p>
<p>5.4.6 Power Headroom Reporting <a
href="#power-headroom-reporting">71</a></p>
<p>5.4.7 Pre-emptive Buffer Status Reporting <a
href="#pre-emptive-buffer-status-reporting">74</a></p>
<p>5.4.8 Timing Advance Reporting <a
href="#timing-advance-reporting">75</a></p>
<p>5.5 PCH reception <a href="#pch-reception">76</a></p>
<p>5.6 BCH reception <a href="#bch-reception">76</a></p>
<p>5.7 Discontinuous Reception (DRX) <a
href="#discontinuous-reception-drx">76</a></p>
<p>5.7a Discontinuous Reception (DRX) for MBS Broadcast <a
href="#a-discontinuous-reception-drx-for-mbs-broadcast">83</a></p>
<p>5.7b Discontinuous Reception (DRX) for MBS Multicast <a
href="#b-discontinuous-reception-drx-for-mbs-multicast">84</a></p>
<p>5.8 Transmission and reception without dynamic scheduling <a
href="#transmission-and-reception-without-dynamic-scheduling">87</a></p>
<p>5.8.1 Downlink <a href="#downlink">87</a></p>
<p>5.8.1a Downlink for Multicast <a
href="#a-downlink-for-multicast">88</a></p>
<p>5.8.2 Uplink <a href="#uplink">88</a></p>
<p>5.8.3 Sidelink <a href="#sidelink">91</a></p>
<p>5.9 Activation/Deactivation of SCells <a
href="#activationdeactivation-of-scells">93</a></p>
<p>5.10 Activation/Deactivation of PDCP duplication <a
href="#activationdeactivation-of-pdcp-duplication">95</a></p>
<p>5.11 MAC reconfiguration <a href="#mac-reconfiguration">95</a></p>
<p>5.12 MAC Reset <a href="#mac-reset">96</a></p>
<p>5.12a Void <a href="#a-void">97</a></p>
<p>5.13 Handling of unknown, unforeseen and erroneous protocol data <a
href="#handling-of-unknown-unforeseen-and-erroneous-protocol-data">97</a></p>
<p>5.14 Handling of measurement gaps <a
href="#handling-of-measurement-gaps">98</a></p>
<p>5.15 Bandwidth Part (BWP) operation <a
href="#bandwidth-part-bwp-operation">98</a></p>
<p>5.15.1 Downlink and Uplink <a href="#downlink-and-uplink">98</a></p>
<p>5.15.2 Sidelink <a href="#sidelink-1">102</a></p>
<p>5.16 SUL operation <a href="#sul-operation">104</a></p>
<p>5.17 Beam Failure Detection and Recovery procedure <a
href="#beam-failure-detection-and-recovery-procedure">104</a></p>
<p>5.18 Handling of MAC CEs <a href="#handling-of-mac-ces">107</a></p>
<p>5.18.1 General <a href="#general-5">107</a></p>
<p>5.18.2 Activation/Deactivation of Semi-persistent CSI-RS/CSI-IM
resource set <a
href="#activationdeactivation-of-semi-persistent-csi-rscsi-im-resource-set">108</a></p>
<p>5.18.3 Aperiodic CSI Trigger State Subselection <a
href="#aperiodic-csi-trigger-state-subselection">109</a></p>
<p>5.18.4 Activation/Deactivation of UE-specific PDSCH TCI state <a
href="#activationdeactivation-of-ue-specific-pdsch-tci-state">109</a></p>
<p>5.18.5 Indication of TCI state for UE-specific PDCCH <a
href="#indication-of-tci-state-for-ue-specific-pdcch">109</a></p>
<p>5.18.6 Activation/Deactivation of Semi-persistent CSI reporting on
PUCCH <a
href="#activationdeactivation-of-semi-persistent-csi-reporting-on-pucch">110</a></p>
<p>5.18.7 Activation/Deactivation of Semi-persistent SRS and Indication
of spatial relation of SP/AP SRS <a
href="#activationdeactivation-of-semi-persistent-srs-and-indication-of-spatial-relation-of-spap-srs">110</a></p>
<p>5.18.8 Activation/Deactivation of spatial relation of PUCCH resource
<a
href="#activationdeactivation-of-spatial-relation-of-pucch-resource">110</a></p>
<p>5.18.9 Activation/Deactivation of semi-persistent ZP CSI-RS resource
set <a
href="#activationdeactivation-of-semi-persistent-zp-csi-rs-resource-set">111</a></p>
<p>5.18.10 Recommended Bit Rate <a
href="#recommended-bit-rate">111</a></p>
<p>5.18.11 Void <a href="#void">112</a></p>
<p>5.18.12 Void <a href="#void-1">112</a></p>
<p>5.18.13 Void <a href="#void-2">112</a></p>
<p>5.18.14 Update of Pathloss Reference RS of SRS <a
href="#update-of-pathloss-reference-rs-of-srs">112</a></p>
<p>5.18.15 Update of Pathloss Reference RS of PUSCH <a
href="#update-of-pathloss-reference-rs-of-pusch">112</a></p>
<p>5.18.16 Indication of spatial relation of SRS resource for a Serving
Cell set <a
href="#indication-of-spatial-relation-of-srs-resource-for-a-serving-cell-set">112</a></p>
<p>5.18.17 Activation/Deactivation of Semi-Persistent Positioning SRS <a
href="#activationdeactivation-of-semi-persistent-positioning-srs">112</a></p>
<p>5.18.18 Timing offset adjustments for IAB <a
href="#timing-offset-adjustments-for-iab">113</a></p>
<p>5.18.19 Guard symbols for IAB <a
href="#guard-symbols-for-iab">113</a></p>
<p>5.18.20 Positioning Measurement Gap Activation/Deactivation Command
<a
href="#positioning-measurement-gap-activationdeactivation-command">114</a></p>
<p>5.18.21 PPW Activation/Deactivation Command <a
href="#ppw-activationdeactivation-command">114</a></p>
<p>5.18.22 Update of PUCCH Power Control Set for multiple TRP PUCCH
repetition <a
href="#update-of-pucch-power-control-set-for-multiple-trp-pucch-repetition">115</a></p>
<p>5.18.23 Unified TCI States Activation/Deactivation MAC CE <a
href="#unified-tci-states-activationdeactivation-mac-ce">115</a></p>
<p>5.18.24 Update of Differential Koffset <a
href="#update-of-differential-koffset">115</a></p>
<p>5.18.25 BFD-RS Indication MAC CE <a
href="#bfd-rs-indication-mac-ce">115</a></p>
<p>5.18.26 Restricted and recommended beam indication for IAB <a
href="#restricted-and-recommended-beam-indication-for-iab">115</a></p>
<p>5.18.27 DL TX power adjustment for IAB <a
href="#dl-tx-power-adjustment-for-iab">116</a></p>
<p>5.18.28 UL PSD range adjustment for IAB <a
href="#ul-psd-range-adjustment-for-iab">116</a></p>
<p>5.18.29 Timing case indication for IAB <a
href="#timing-case-indication-for-iab">117</a></p>
<p>5.18.30 Case-6 Timing Request <a
href="#case-6-timing-request">117</a></p>
<p>5.19 Data inactivity monitoring <a
href="#data-inactivity-monitoring">117</a></p>
<p>5.20 Void <a href="#void-3">118</a></p>
<p>5.21 LBT operation <a href="#lbt-operation">118</a></p>
<p>5.21.1 General <a href="#general-6">118</a></p>
<p>5.21.2 LBT failure detection and recovery procedure <a
href="#lbt-failure-detection-and-recovery-procedure">118</a></p>
<p>5.22 SL-SCH Data transfer <a href="#sl-sch-data-transfer">119</a></p>
<p>5.22.1 SL-SCH Data transmission <a
href="#sl-sch-data-transmission">119</a></p>
<p>5.22.1.1 SL Grant reception and SCI transmission <a
href="#sl-grant-reception-and-sci-transmission">119</a></p>
<p>5.22.1.2 TX resource (re-)selection check <a
href="#tx-resource-re-selection-check">130</a></p>
<p>5.22.1.2a Re-evaluation and Pre-emption <a
href="#a-re-evaluation-and-pre-emption">131</a></p>
<p>5.22.1.2b Re-selection for using a received resource conflict
indication <a
href="#b-re-selection-for-using-a-received-resource-conflict-indication">132</a></p>
<p>5.22.1.3 Sidelink HARQ operation <a
href="#sidelink-harq-operation">133</a></p>
<p>5.22.1.3.1 Sidelink HARQ Entity <a
href="#sidelink-harq-entity">133</a></p>
<p>5.22.1.3.1a Sidelink process <a
href="#a-sidelink-process">136</a></p>
<p>5.22.1.3.2 PSFCH reception <a href="#psfch-reception">137</a></p>
<p>5.22.1.3.3 HARQ-based Sidelink RLF detection <a
href="#harq-based-sidelink-rlf-detection">138</a></p>
<p>5.22.1.4 Multiplexing and assembly <a
href="#multiplexing-and-assembly-1">139</a></p>
<p>5.22.1.4.0 General <a href="#general-7">139</a></p>
<p>5.22.1.4.1 Logical channel prioritization <a
href="#logical-channel-prioritization-1">139</a></p>
<p>5.22.1.4.1.1 General <a href="#general-8">139</a></p>
<p>5.22.1.4.1.2 Selection of logical channels <a
href="#selection-of-logical-channels-1">140</a></p>
<p>5.22.1.4.1.3 Allocation of sidelink resources <a
href="#allocation-of-sidelink-resources">141</a></p>
<p>5.22.1.4.2 Multiplexing of MAC Control Elements and MAC SDUs <a
href="#multiplexing-of-mac-control-elements-and-mac-sdus-1">142</a></p>
<p>5.22.1.5 Scheduling Request <a
href="#scheduling-request-1">142</a></p>
<p>5.22.1.6 Buffer Status Reporting <a
href="#buffer-status-reporting-1">143</a></p>
<p>5.22.1.7 CSI Reporting <a href="#csi-reporting">145</a></p>
<p>5.22.1.8 Void <a href="#void-4">146</a></p>
<p>5.22.1.9 IUC-Request transmission <a
href="#iuc-request-transmission">146</a></p>
<p>5.22.1.10 IUC-Information Reporting <a
href="#iuc-information-reporting">146</a></p>
<p>5.22.1.10.1 General <a href="#general-9">146</a></p>
<p>5.22.1.10.2 Reception of IUC-Information Reporting <a
href="#reception-of-iuc-information-reporting">147</a></p>
<p>5.22.2 SL-SCH Data reception <a
href="#sl-sch-data-reception">147</a></p>
<p>5.22.2.1 SCI reception <a href="#sci-reception">147</a></p>
<p>5.22.2.2 Sidelink HARQ operation <a
href="#sidelink-harq-operation-1">147</a></p>
<p>5.22.2.2.1 Sidelink HARQ Entity <a
href="#sidelink-harq-entity-1">147</a></p>
<p>5.22.2.2.2 Sidelink process <a href="#sidelink-process">148</a></p>
<p>5.22.2.3 Disassembly and demultiplexing <a
href="#disassembly-and-demultiplexing-1">150</a></p>
<p>5.23 SL-BCH data transfer <a href="#sl-bch-data-transfer">150</a></p>
<p>5.23.1 SL-BCH data transmission <a
href="#sl-bch-data-transmission">150</a></p>
<p>5.23.2 SL-BCH data reception <a
href="#sl-bch-data-reception">150</a></p>
<p>5.24 Handling of PRS Processing Window <a
href="#handling-of-prs-processing-window">150</a></p>
<p>5.25 Positioning Measurement Gap Activation/Deactivation Request <a
href="#positioning-measurement-gap-activationdeactivation-request">150</a></p>
<p>5.26 Positioning SRS transmission in RRC_INACTIVE <a
href="#positioning-srs-transmission-in-rrc_inactive">151</a></p>
<p>5.26.1 General <a href="#general-10">151</a></p>
<p>5.26.2 TA validation for SRS transmission in RRC_INACTIVE <a
href="#ta-validation-for-srs-transmission-in-rrc_inactive">151</a></p>
<p>5.27 Small Data Transmission <a
href="#small-data-transmission">152</a></p>
<p>5.27.1 General <a href="#general-11">152</a></p>
<p>5.27.2 TA Validation for CG-SDT <a
href="#ta-validation-for-cg-sdt">153</a></p>
<p>5.28 Sidelink Discontinuous Reception (DRX) <a
href="#sidelink-discontinuous-reception-drx">153</a></p>
<p>5.28.1 General <a href="#general-12">153</a></p>
<p>5.28.2 Behaviour of UE receiving SL-SCH Data <a
href="#behaviour-of-ue-receiving-sl-sch-data">154</a></p>
<p>5.28.3 Behaviour of UE transmitting SL-SCH Data <a
href="#behaviour-of-ue-transmitting-sl-sch-data">157</a></p>
<p>5.29 Activation/Deactivation of SCG <a
href="#activationdeactivation-of-scg">157</a></p>
<p>5.30 Handling of FR2 UL gap <a
href="#handling-of-fr2-ul-gap">158</a></p>
<p>6 Protocol Data Units, formats and parameters <a
href="#protocol-data-units-formats-and-parameters">159</a></p>
<p>6.1 Protocol Data Units <a href="#protocol-data-units">159</a></p>
<p>6.1.1 General <a href="#general-13">159</a></p>
<p>6.1.2 MAC PDU (DL-SCH and UL-SCH except transparent MAC and Random
Access Response) <a
href="#mac-pdu-dl-sch-and-ul-sch-except-transparent-mac-and-random-access-response">159</a></p>
<p>6.1.3 MAC Control Elements (CEs) <a
href="#mac-control-elements-ces">162</a></p>
<p>6.1.3.1 Buffer Status Report MAC CEs <a
href="#buffer-status-report-mac-ces">162</a></p>
<p>6.1.3.2 C-RNTI MAC CE <a href="#c-rnti-mac-ce">168</a></p>
<p>6.1.3.3 UE Contention Resolution Identity MAC CE <a
href="#ue-contention-resolution-identity-mac-ce">168</a></p>
<p>6.1.3.4 Timing Advance Command MAC CE <a
href="#timing-advance-command-mac-ce">168</a></p>
<p>6.1.3.4a Absolute Timing Advance Command MAC CE <a
href="#a-absolute-timing-advance-command-mac-ce">169</a></p>
<p>6.1.3.5 DRX Command MAC CE <a href="#drx-command-mac-ce">169</a></p>
<p>6.1.3.6 Long DRX Command MAC CE <a
href="#long-drx-command-mac-ce">169</a></p>
<p>6.1.3.7 Configured Grant Confirmation MAC CE <a
href="#configured-grant-confirmation-mac-ce">169</a></p>
<p>6.1.3.8 Single Entry PHR MAC CE <a
href="#single-entry-phr-mac-ce">169</a></p>
<p>6.1.3.9 Multiple Entry PHR MAC CE <a
href="#multiple-entry-phr-mac-ce">171</a></p>
<p>6.1.3.10 SCell Activation/Deactivation MAC CEs <a
href="#scell-activationdeactivation-mac-ces">173</a></p>
<p>6.1.3.11 Duplication Activation/Deactivation MAC CE <a
href="#duplication-activationdeactivation-mac-ce">174</a></p>
<p>6.1.3.12 SP CSI-RS/CSI-IM Resource Set Activation/Deactivation MAC CE
<a
href="#sp-csi-rscsi-im-resource-set-activationdeactivation-mac-ce">174</a></p>
<p>6.1.3.13 Aperiodic CSI Trigger State Subselection MAC CE <a
href="#aperiodic-csi-trigger-state-subselection-mac-ce">175</a></p>
<p>6.1.3.14 TCI States Activation/Deactivation for UE-specific PDSCH MAC
CE <a
href="#tci-states-activationdeactivation-for-ue-specific-pdsch-mac-ce">176</a></p>
<p>6.1.3.15 TCI State Indication for UE-specific PDCCH MAC CE <a
href="#tci-state-indication-for-ue-specific-pdcch-mac-ce">177</a></p>
<p>6.1.3.16 SP CSI reporting on PUCCH Activation/Deactivation MAC CE <a
href="#sp-csi-reporting-on-pucch-activationdeactivation-mac-ce">177</a></p>
<p>6.1.3.17 SP SRS Activation/Deactivation MAC CE <a
href="#sp-srs-activationdeactivation-mac-ce">178</a></p>
<p>6.1.3.18 PUCCH spatial relation Activation/Deactivation MAC CE <a
href="#pucch-spatial-relation-activationdeactivation-mac-ce">179</a></p>
<p>6.1.3.19 SP ZP CSI-RS Resource Set Activation/Deactivation MAC CE <a
href="#sp-zp-csi-rs-resource-set-activationdeactivation-mac-ce">180</a></p>
<p>6.1.3.20 Recommended bit rate MAC CE <a
href="#recommended-bit-rate-mac-ce">180</a></p>
<p>6.1.3.21 Timing Delta MAC CE <a
href="#timing-delta-mac-ce">181</a></p>
<p>6.1.3.22 Guard Symbols MAC CEs <a
href="#guard-symbols-mac-ces">182</a></p>
<p>6.1.3.23 BFR MAC CEs <a href="#bfr-mac-ces">182</a></p>
<p>6.1.3.24 Enhanced TCI States Activation/Deactivation for UE-specific
PDSCH MAC CE <a
href="#enhanced-tci-states-activationdeactivation-for-ue-specific-pdsch-mac-ce">184</a></p>
<p>6.1.3.25 Enhanced PUCCH Spatial Relation Activation/Deactivation MAC
CE <a
href="#enhanced-pucch-spatial-relation-activationdeactivation-mac-ce">185</a></p>
<p>6.1.3.26 Enhanced SP/AP SRS Spatial Relation Indication MAC CE <a
href="#enhanced-spap-srs-spatial-relation-indication-mac-ce">186</a></p>
<p>6.1.3.27 SRS Pathloss Reference RS Update MAC CE <a
href="#srs-pathloss-reference-rs-update-mac-ce">187</a></p>
<p>6.1.3.28 PUSCH Pathloss Reference RS Update MAC CE <a
href="#pusch-pathloss-reference-rs-update-mac-ce">188</a></p>
<p>6.1.3.29 Serving Cell Set based SRS Spatial Relation Indication MAC
CE <a
href="#serving-cell-set-based-srs-spatial-relation-indication-mac-ce">188</a></p>
<p>6.1.3.30 LBT failure MAC CEs <a
href="#lbt-failure-mac-ces">190</a></p>
<p>6.1.3.31 Multiple Entry Configured Grant Confirmation MAC CE <a
href="#multiple-entry-configured-grant-confirmation-mac-ce">191</a></p>
<p>6.1.3.32 Duplication RLC Activation/Deactivation MAC CE <a
href="#duplication-rlc-activationdeactivation-mac-ce">191</a></p>
<p>6.1.3.33 Sidelink Buffer Status Report MAC CEs <a
href="#sidelink-buffer-status-report-mac-ces">191</a></p>
<p>6.1.3.34 Sidelink Configured Grant Confirmation MAC CE <a
href="#sidelink-configured-grant-confirmation-mac-ce">192</a></p>
<p>6.1.3.35 Sidelink CSI Reporting MAC CE <a
href="#sidelink-csi-reporting-mac-ce">193</a></p>
<p>6.1.3.36 SP Positioning SRS Activation/Deactivation MAC CE <a
href="#sp-positioning-srs-activationdeactivation-mac-ce">193</a></p>
<p>6.1.3.37 Guard Symbols MAC CEs for Case-6 and Case-7 timing modes <a
href="#guard-symbols-mac-ces-for-case-6-and-case-7-timing-modes">196</a></p>
<p>6.1.3.38 Case-7 Timing advance offset MAC CE <a
href="#case-7-timing-advance-offset-mac-ce">197</a></p>
<p>6.1.3.39 Case-6 Timing Request MAC CE <a
href="#case-6-timing-request-mac-ce">197</a></p>
<p>6.1.3.40 Positioning Measurement Gap Activation/Deactivation Request
MAC CE <a
href="#positioning-measurement-gap-activationdeactivation-request-mac-ce">197</a></p>
<p>6.1.3.41 Positioning Measurement Gap Activation/Deactivation Command
MAC CE <a
href="#positioning-measurement-gap-activationdeactivation-command-mac-ce">198</a></p>
<p>6.1.3.42 PPW Activation/Deactivation Command MAC CE <a
href="#ppw-activationdeactivation-command-mac-ce">198</a></p>
<p>6.1.3.43 Enhanced BFR MAC CEs <a
href="#enhanced-bfr-mac-ces">199</a></p>
<p>6.1.3.44 Enhanced TCI States Indication for UE-specific PDCCH MAC CE
<a
href="#enhanced-tci-states-indication-for-ue-specific-pdcch-mac-ce">202</a></p>
<p>6.1.3.45 PUCCH spatial relation Activation/Deactivation for multiple
TRP PUCCH repetition MAC CE <a
href="#pucch-spatial-relation-activationdeactivation-for-multiple-trp-pucch-repetition-mac-ce">203</a></p>
<p>6.1.3.46 PUCCH Power Control Set Update for multiple TRP PUCCH
repetition MAC CE <a
href="#pucch-power-control-set-update-for-multiple-trp-pucch-repetition-mac-ce">204</a></p>
<p>6.1.3.47 Unified TCI States Activation/Deactivation MAC CE <a
href="#unified-tci-states-activationdeactivation-mac-ce-1">205</a></p>
<p>6.1.3.48 Enhanced Single Entry PHR MAC CE <a
href="#enhanced-single-entry-phr-mac-ce">206</a></p>
<p>6.1.3.49 Enhanced Multiple Entry PHR MAC CE <a
href="#enhanced-multiple-entry-phr-mac-ce">207</a></p>
<p>6.1.3.50 Enhanced Single Entry PHR for multiple TRP MAC CE <a
href="#enhanced-single-entry-phr-for-multiple-trp-mac-ce">212</a></p>
<p>6.1.3.51 Enhanced Multiple Entry PHR for multiple TRP MAC CE <a
href="#enhanced-multiple-entry-phr-for-multiple-trp-mac-ce">212</a></p>
<p>6.1.3.52 Sidelink DRX Command MAC CE <a
href="#sidelink-drx-command-mac-ce">215</a></p>
<p>6.1.3.53 Inter-UE Coordination Information MAC CE <a
href="#inter-ue-coordination-information-mac-ce">216</a></p>
<p>6.1.3.54 Inter-UE Coordination Request MAC CE <a
href="#inter-ue-coordination-request-mac-ce">217</a></p>
<p>6.1.3.55 Enhanced SCell Activation/Deactivation MAC CEs <a
href="#enhanced-scell-activationdeactivation-mac-ces">218</a></p>
<p>6.1.3.56 Timing Advance Report MAC CE <a
href="#timing-advance-report-mac-ce">219</a></p>
<p>6.1.3.57 Differential Koffset MAC CE <a
href="#differential-koffset-mac-ce">220</a></p>
<p>6.1.3.58 BFD-RS Indication MAC CE <a
href="#bfd-rs-indication-mac-ce-1">220</a></p>
<p>6.1.3.59 SP/AP SRS TCI State Indication MAC CE <a
href="#spap-srs-tci-state-indication-mac-ce">220</a></p>
<p>6.1.3.60 Serving Cell Set based SRS TCI State Indication MAC CE <a
href="#serving-cell-set-based-srs-tci-state-indication-mac-ce">222</a></p>
<p>6.1.3.61 Child IAB-DU Restricted Beam Indication MAC CE <a
href="#child-iab-du-restricted-beam-indication-mac-ce">223</a></p>
<p>6.1.3.62 IAB-MT Recommended Beam Indication MAC CE <a
href="#iab-mt-recommended-beam-indication-mac-ce">226</a></p>
<p>6.1.3.63 DL TX Power Adjustment and Desired DL TX Power Adjustment
MAC CEs <a
href="#dl-tx-power-adjustment-and-desired-dl-tx-power-adjustment-mac-ces">229</a></p>
<p>6.1.3.64 Desired IAB-MT PSD range MAC CE <a
href="#desired-iab-mt-psd-range-mac-ce">230</a></p>
<p>6.1.3.65 Timing Case Indication MAC CE <a
href="#timing-case-indication-mac-ce">232</a></p>
<p>6.1.4 MAC PDU (transparent MAC) <a
href="#mac-pdu-transparent-mac">233</a></p>
<p>6.1.5 MAC PDU (Random Access Response) <a
href="#mac-pdu-random-access-response">233</a></p>
<p>6.1.5a MAC PDU (MSGB) <a href="#a-mac-pdu-msgb">234</a></p>
<p>6.1.6 MAC PDU (SL-SCH) <a href="#mac-pdu-sl-sch">235</a></p>
<p>6.2 Formats and parameters <a
href="#formats-and-parameters">236</a></p>
<p>6.2.1 MAC subheader for DL-SCH and UL-SCH <a
href="#mac-subheader-for-dl-sch-and-ul-sch">236</a></p>
<p>6.2.2 MAC subheader for Random Access Response <a
href="#mac-subheader-for-random-access-response">240</a></p>
<p>6.2.2a MAC subheader for MSGB <a
href="#a-mac-subheader-for-msgb">240</a></p>
<p>6.2.3 MAC payload for Random Access Response <a
href="#mac-payload-for-random-access-response">241</a></p>
<p>6.2.3a MAC payload for MSGB <a
href="#a-mac-payload-for-msgb">242</a></p>
<p>6.2.4 MAC subheader for SL-SCH <a
href="#mac-subheader-for-sl-sch">244</a></p>
<p>7 Variables and constants <a
href="#variables-and-constants">244</a></p>
<p>7.1 RNTI values <a href="#rnti-values">244</a></p>
<p>7.2 Backoff Parameter values <a
href="#backoff-parameter-values">248</a></p>
<p>7.3 DELTA_PREAMBLE values <a
href="#delta_preamble-values">248</a></p>
<p>7.4 PRACH Mask Index values <a
href="#prach-mask-index-values">249</a></p>
<p>Annex A (informative): Change history <a
href="#annex-a-informative-change-history">250</a></p>
<h1 id="foreword"><br />
Foreword</h1>
<p>This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).</p>
<p>The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:</p>
<p>Version x.y.z</p>
<p>where:</p>
<p>x the first digit:</p>
<p>1 presented to TSG for information;</p>
<p>2 presented to TSG for approval;</p>
<p>3 or greater indicates TSG approved document under change
control.</p>
<p>y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.</p>
<p>z the third digit is incremented when editorial only changes have
been incorporated in the document.</p>
<h1 id="scope"><br />
1 Scope</h1>
<p>The present document specifies the NR MAC protocol.</p>
<h1 id="references">2 References</h1>
<p>The following documents contain provisions which, through reference
in this text, constitute provisions of the present document.</p>
<p>- References are either specific (identified by date of publication,
edition number, version number, etc.) or non‑specific.</p>
<p>- For a specific reference, subsequent revisions do not apply.</p>
<p>- For a non-specific reference, the latest version applies. In the
case of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document <em>in the same Release as the present document</em>.</p>
<p>[1] 3GPP TR 21.905: "Vocabulary for 3GPP Specifications".</p>
<p>[2] 3GPP TS 38.300: "NR; Overall description; Stage 2".</p>
<p>[3] 3GPP TS 38.322: "NR; Radio Link Control (RLC) protocol
specification".</p>
<p>[4] 3GPP TS 38.323: "NR; Packet Data Convergence Protocol (PDCP)
protocol specification".</p>
<p>[5] 3GPP TS 38.331: "NR; Radio Resource Control (RRC); Protocol
specification".</p>
<p>[6] 3GPP TS 38.213: "NR; Physical Layer Procedures for control".</p>
<p>[7] 3GPP TS 38.214: "NR; Physical Layer Procedures for data".</p>
<p>[8] 3GPP TS 38.211: "NR; Physical channels and modulation".</p>
<p>[9] 3GPP TS 38.212: "NR; Multiplexing and channel coding".</p>
<p>[10] Void.</p>
<p>[11] 3GPP TS 38.133: "NR; Requirements for support of radio resource
management".</p>
<p>[12] 3GPP TS 36.133: "Evolved Universal Terrestrial Radio Access
(E-UTRA); Requirements for support of radio resource management".</p>
<p>[13] 3GPP TS 26.114: "Technical Specification Group Services and
System Aspects; IP Multimedia Subsystem (IMS); Multimedia Telephony;
Media handling and interaction".</p>
<p>[14] 3GPP TS 38.101-1: "NR; User Equipment (UE) radio transmission
and reception; Part 1: Range 1 Standalone".</p>
<p>[15] 3GPP TS 38.101-2: "NR; User Equipment (UE) radio transmission
and reception; Part 2: Range 2 Standalone".</p>
<p>[16] 3GPP TS 38.101-3: "NR; User Equipment (UE) radio transmission
and reception; Part 3: Range 1 and Range 2 Interworking operation with
other radios".</p>
<p>[17] 3GPP TS 36.213: "Evolved Universal Terrestrial Radio Access
(E-UTRA); Physical Layer Procedures".</p>
<p>[18] 3GPP TS 37.213: "Physical layer procedures for shared spectrum
channel access".</p>
<p>[19] 3GPP TS 23.287: "Architecture enhancements for 5G System (5GS)
to support Vehicle-to-Everything (V2X) services ".</p>
<p>[20] 3GPP TS 23.285: "Architecture enhancements for V2X
services".</p>
<p>[21] 3GPP TS 36.331: "Evolved Universal Terrestrial Radio Access
(E-UTRA); Radio Resource Control (RRC); Protocol specification".</p>
<p>[22] 3GPP TS 36.321: "Evolved Universal Terrestrial Radio Access
(E-UTRA); Medium Access Control (MAC); Protocol specification".</p>
<p>[23] 3GPP TS 37.355: "Evolved Universal Terrestrial Radio Access
(E-UTRA); LTE Positioning Protocol (LPP)".</p>
<p>[24] 3GPP TS 38.215: "NR; Physical layer measurements".</p>
<p>[25] 3GPP TS 38.306: "NR; User Equipment (UE) radio access
capabilities".</p>
<p>[26] 3GPP TS 23.304: "Proximity based Services (ProSe) in the 5G
System (5GS)".</p>
<p>[27] 3GPP TS 38.473: "NG-RAN; F1 Application Protocol (F1AP)".</p>
<p>[28] 3GPP TS 24.587: " Technical Specification Group Core Network and
Terminals; Vehicle-to-Everything (V2X) services in 5G System (5GS)".</p>
<p>[29] 3GPP TS 24.554: "Technical Specification Group Core Network and
Terminals; Proximity-services (ProSe) in 5G System (5GS) protocol".</p>
<h1 id="definitions-symbols-and-abbreviations">3 Definitions, symbols
and abbreviations</h1>
<h2 id="definitions">3.1 Definitions</h2>
<p>For the purposes of the present document, the terms and definitions
given in TR 21.905 [1] and the following apply. A term defined in the
present document takes precedence over the definition of the same term,
if any, in TR 21.905 [1].</p>
<p><strong>Dormant BWP:</strong> The dormant BWP is one of downlink BWPs
configured by the network via dedicated RRC signaling. In the dormant
BWP, the UE stop monitoring PDCCH on/for the SCell, but continues
performing CSI measurements, Automatic Gain Control (AGC) and beam
management, if configured.</p>
<p><strong>DRX group:</strong> A group of Serving Cells that is
configured by RRC and that have the same DRX Active Time.</p>
<p><strong>HARQ information:</strong> HARQ information for DL-SCH, for
UL-SCH, or for SL-SCH transmissions consists of New Data Indicator
(NDI), Transport Block Size (TBS), Redundancy Version (RV), and HARQ
process ID.</p>
<p><strong>IAB-donor:</strong> gNB that provides network access to UEs
via a network of backhaul and access links.</p>
<p><strong>IAB-node:</strong> RAN node that supports NR access links to
UEs and NR backhaul links to parent nodes and child nodes.</p>
<p><strong>Listen Before Talk</strong>: A procedure according to which
transmissions are not performed if the channel is identified as being
occupied, see TS 37.213 [18].</p>
<p><strong>Msg3</strong>: Message transmitted on UL-SCH containing a
C-RNTI MAC CE or CCCH SDU, submitted from upper layer and associated
with the UE Contention Resolution Identity, as part of a Random Access
procedure.</p>
<p><strong>Non-terrestrial network:</strong> An NG-RAN consisting of
gNBs, which provide non-terrestrial NR access to UEs by means of an NTN
payload embarked on an airborne or space-borne NTN vehicle and an NTN
Gateway.</p>
<p><strong>NR backhaul link:</strong> NR link used for backhauling
between an IAB-node and an IAB-donor, and between IAB-nodes in case of a
multi-hop backhauling.</p>
<p><strong>NR sidelink communication</strong>: AS functionality enabling
at least V2X Communication as defined in TS 23.287 [19] and ProSe
communication (including ProSe non-Relay and UE-to-Network Relay
communication) as defined in TS 23.304 [26], between two or more nearby
UEs, using NR technology but not traversing any network node.</p>
<p><strong>NR sidelink discovery</strong>: AS functionality enabling
ProSe non-Relay discovery and ProSe UE-to-Network Relay discovery for
Proximity based Services as defined in TS 23.304 [26], between two or
more nearby UEs, using NR technology but not traversing any network
node.</p>
<p><strong>NR sidelink transmission</strong>: Any NR Sidelink-based
transmission, including both transmission for NR sidelink discovery and
transmission for NR sidelink communication.</p>
<p><strong>PDCCH occasion</strong>: A time duration (i.e. one or a
consecutive number of symbols) during which the MAC entity is configured
to monitor the PDCCH.</p>
<p><strong>PRS Processing Window</strong>: A time window during which UE
may perform PRS measurement inside the active DL BWP with the same
numerology as the active DL BWP without measurement gap.</p>
<p><strong>RedCap UE:</strong> A UE with reduced capabilities as
specified in clause 4.2.21.1 in TS 38.306 [25].</p>
<p><strong>Serving Cell:</strong> A PCell, a PSCell, or an SCell in TS
38.331 [5].</p>
<p><strong>Sidelink transmission information:</strong> Sidelink
transmission information included in an SCI for an SL-SCH transmission
as specified in clause 8.3 and 8.4 of TS 38.212 [9] consists of Sidelink
HARQ information including NDI, RV, Sidelink process ID, HARQ feedback
enabled/disabled indicator, Sidelink identification information
including cast type indicator, Source Layer-1 ID and Destination Layer-1
ID, and Sidelink other information including CSI request, a priority, a
communication range requirement and Zone ID.</p>
<p><strong>Special Cell:</strong> For Dual Connectivity operation the
term Special Cell refers to the PCell of the MCG or the PSCell of the
SCG depending on if the MAC entity is associated to the MCG or the SCG,
respectively. Otherwise the term Special Cell refers to the PCell. A
Special Cell supports PUCCH transmission and contention-based Random
Access, and is always activated.</p>
<p><strong>Timing Advance Group:</strong> A group of Serving Cells that
is configured by RRC and that, for the cells with a UL configured, using
the same timing reference cell and the same Timing Advance value. A
Timing Advance Group containing the SpCell of a MAC entity is referred
to as Primary Timing Advance Group (PTAG), whereas the term Secondary
Timing Advance Group (STAG) refers to other TAGs.</p>
<p><strong>UE-gNB RTT:</strong> For non-terrestrial networks, the sum of
the UE's Timing Advance value (see TS 38.211 [8] clause 4.3.1) and
<em>kmac</em>.</p>
<p><strong>V2X sidelink communication</strong>: AS functionality
enabling V2X Communication as defined in TS 23.285 [20], between nearby
UEs, using E-UTRA technology but not traversing any network node.</p>
<p>NOTE 1: A timer is running once it is started, until it is stopped or
until it expires; otherwise it is not running. A timer can be started if
it is not running or restarted if it is running. A Timer is always
started or restarted from its initial value. The duration of a timer is
not updated until it is stopped or expires (e.g. due to BWP switching).
When the MAC entity applies zero value for a timer, the timer shall be
started and immediately expire unless explicitly stated otherwise.</p>
<p>NOTE 2: In this version of the specification, the SRS in the
procedural description includes Positioning SRS except for the
Positioning SRS for transmission in RRC_INACTIVE as in clause 5.26.
Positioning SRS except for the Positioning SRS for transmission in
RRC_INACTIVE is treated the same as SRS by the UE unless explicitly
stated otherwise.</p>
<h2 id="abbreviations">3.2 Abbreviations</h2>
<p>For the purposes of the present document, the abbreviations given in
TR 21.905 [1] and the following apply. An abbreviation defined in the
present document takes precedence over the definition of the same
abbreviation, if any, in TR 21.905 [1].</p>
<p>AP Aperiodic</p>
<p>BFR Beam Failure Recovery</p>
<p>BSR Buffer Status Report</p>
<p>BWP Bandwidth Part</p>
<p>CE Control Element</p>
<p>CG Cell Group</p>
<p>CG-SDT Configured Grant-based SDT</p>
<p>CI-RNTI Cancellation Indication RNTI</p>
<p>CSI Channel State Information</p>
<p>CSI-IM CSI Interference Measurement</p>
<p>CSI-RS CSI Reference Signal</p>
<p>CS-RNTI Configured Scheduling RNTI</p>
<p>DAPS Dual Active Protocol Stack</p>
<p>DCP DCI with CRC scrambled by PS-RNTI</p>
<p>DL-PRS DownLink-Positioning Reference Signal</p>
<p>G-CS-RNTI Group Configured Scheduling RNTI</p>
<p>G-RNTI Group RNTI</p>
<p>IAB Integrated Access and Backhaul</p>
<p>INT-RNTI Interruption RNTI</p>
<p>LBT Listen Before Talk</p>
<p>LCG Logical Channel Group</p>
<p>LCP Logical Channel Prioritization</p>
<p>MBS Multicast/Broadcast Services</p>
<p>MCCH MBS Control Channel</p>
<p>MCCH-RNTI MBS Control Channel RNTI</p>
<p>MCG Master Cell Group</p>
<p>MPE Maximum Permissible Exposure</p>
<p>MTCH MBS Traffic Channel</p>
<p>NCD-SSB Non Cell Defining SSB</p>
<p>NSAG Network Slice AS Group</p>
<p>NUL Normal Uplink</p>
<p>NZP CSI-RS Non-Zero Power CSI-RS</p>
<p>PDB Packet Delay Budget</p>
<p>PEI-RNTI Paging Early Indication RNTI</p>
<p>PHR Power Headroom Report</p>
<p>PS-RNTI Power Saving RNTI</p>
<p>PTAG Primary Timing Advance Group</p>
<p>PTM Point to Multipoint</p>
<p>PTP Point to Point</p>
<p>QCL Quasi-colocation</p>
<p>PPW PRS Processing Window</p>
<p>PRS Positioning Reference Signal</p>
<p>RA-SDT Random Access-based SDT</p>
<p>RS Reference Signal</p>
<p>SCG Secondary Cell Group</p>
<p>SDT Small Data Transmission</p>
<p>SFI-RNTI Slot Format Indication RNTI</p>
<p>SI System Information</p>
<p>SL-RNTI Sidelink RNTI</p>
<p>SL-CS-RNTI Sidelink Configured Scheduling RNTI</p>
<p>SpCell Special Cell</p>
<p>SP Semi-Persistent</p>
<p>SP-CSI-RNTI Semi-Persistent CSI RNTI</p>
<p>SPS Semi-Persistent Scheduling</p>
<p>SR Scheduling Request</p>
<p>SRI SRS Resource Indicator</p>
<p>SS Synchronization Signals</p>
<p>SSB Synchronization Signal Block</p>
<p>STAG Secondary Timing Advance Group</p>
<p>SUL Supplementary Uplink</p>
<p>TAG Timing Advance Group</p>
<p>TCI Transmission Configuration Indicator</p>
<p>TPC-SRS-RNTI Transmit Power Control-Sounding Reference
Signal-RNTI</p>
<p>TRIV Time Resource Indicator Value</p>
<p>TRP Transmit/Receive Point</p>
<p>TRS CSI-RS for tracking</p>
<p>U2N UE-to-Network</p>
<p>UCI Uplink Control Information</p>
<p>V2X Vehicle-to-Everything</p>
<p>ZP CSI-RS Zero Power CSI-RS</p>
<h1 id="general">4 General</h1>
<h2 id="introduction">4.1 Introduction</h2>
<p>The objective of this clause is to describe the MAC architecture and
the MAC entity of the UE from a functional point of view.</p>
<h2 id="mac-architecture">4.2 MAC architecture</h2>
<h3 id="general-1">4.2.1 General</h3>
<p>This clause describes a model of the MAC i.e. it does not specify or
restrict implementations.</p>
<p>RRC is in control of the MAC configuration.</p>
<h3 id="mac-entities">4.2.2 MAC Entities</h3>
<p>The MAC entity of the UE handles the following transport
channels:</p>
<p>- Broadcast Channel (BCH);</p>
<p>- Downlink Shared Channel(s) (DL-SCH);</p>
<p>- Paging Channel (PCH);</p>
<p>- Uplink Shared Channel(s) (UL-SCH);</p>
<p>- Random Access Channel(s) (RACH).</p>
<p>When the UE is configured with SCG, two MAC entities are configured
to the UE: one for the MCG and one for the SCG.</p>
<p>When the UE is configured with DAPS handover, two MAC entities are
used by the UE: one for the source cell (source MAC entity) and one for
the target cell (target MAC entity).</p>
<p>The functions of the different MAC entities in the UE operate
independently unless otherwise specified. The timers and parameters used
in each MAC entity are configured independently unless otherwise
specified. The Serving Cells, C-RNTI, radio bearers, logical channels,
upper and lower layer entities, LCGs, and HARQ entities considered by
each MAC entity refer to those mapped to that MAC entity unless
otherwise specified.</p>
<p>If the MAC entity is configured with one or more SCells, there are
multiple DL-SCH and there may be multiple UL-SCH as well as multiple
RACH per MAC entity; one DL-SCH, one UL-SCH, and one RACH on the SpCell,
one DL-SCH, zero or one UL-SCH and zero or one RACH for each SCell.</p>
<p>If the MAC entity is not configured with any SCell, there is one
DL-SCH, one UL-SCH, and one RACH per MAC entity.</p>
<p>Figure 4.2.2-1 illustrates one possible structure of the MAC entity
when SCG is not configured and for each MAC entity during DAPS
handover.</p>
<p><img src="media/image3.svg" /></p>
<p>Figure 4.2.2-1: MAC structure overview</p>
<p>Figure 4.2.2-2 illustrates one possible structure for the MAC
entities when MCG and SCG are configured.</p>
<p><img src="media/image4.svg" /></p>
<p>Figure 4.2.2-2: MAC structure overview with two MAC entities</p>
<p>In addition, the MAC entity of the UE handles the following transport
channel for sidelink:</p>
<p>- Sidelink Shared Channel (SL-SCH);</p>
<p>- Sidelink Broadcast Channel (SL-BCH).</p>
<p>Figure 4.2.2-3 illustrates one possible structure for the MAC entity
when sidelink is configured.</p>
<p><img src="media/image5.svg" /></p>
<p>Figure 4.2.2-3: MAC structure overview for sidelink</p>
<h2 id="services">4.3 Services</h2>
<h3 id="services-provided-to-upper-layers">4.3.1 Services provided to
upper layers</h3>
<p>The MAC sublayer provides the following services to upper layers:</p>
<p>- data transfer;</p>
<p>- radio resource allocation.</p>
<h3 id="services-expected-from-physical-layer">4.3.2 Services expected
from physical layer</h3>
<p>The MAC sublayer expects the following services from the physical
layer:</p>
<p>- data transfer services;</p>
<p>- signalling of HARQ feedback;</p>
<p>- signalling of Scheduling Request;</p>
<p>- measurements (e.g. Channel Quality Indication (CQI)).</p>
<h2 id="functions">4.4 Functions</h2>
<p>The MAC sublayer supports the following functions:</p>
<p>- mapping between logical channels and transport channels;</p>
<p>- multiplexing of MAC SDUs from one or different logical channels
onto transport blocks (TB) to be delivered to the physical layer on
transport channels;</p>
<p>- demultiplexing of MAC SDUs to one or different logical channels
from transport blocks (TB) delivered from the physical layer on
transport channels;</p>
<p>- scheduling information reporting;</p>
<p>- error correction through HARQ;</p>
<p>- logical channel prioritization;</p>
<p>- priority handling between overlapping resources of one UE;</p>
<p>- radio resource selection.</p>
<p>The relevance of MAC functions for uplink, downlink, and sidelink is
indicated in Table 4.4-1.</p>
<p>Table 4.4-1: The link direction association of MAC functions.</p>
<table>
<colgroup>
<col style="width: 54%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr>
<th>MAC function</th>
<th>Downlink</th>
<th>Uplink</th>
<th>Sidelink TX</th>
<th>Sidelink RX</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mapping between logical channels and transport channels</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Multiplexing</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Demultiplexing</td>
<td>X</td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>Scheduling information reporting</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Error correction through HARQ</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Logical Channel prioritization</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Radio resource selection</td>
<td></td>
<td></td>
<td>X</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="channel-structure">4.5 Channel structure</h2>
<h3 id="general-2">4.5.1 General</h3>
<p>The MAC sublayer operates on the channels defined below; transport
channels are SAPs between MAC and Layer 1, logical channels are SAPs
between MAC and RLC.</p>
<h3 id="transport-channels">4.5.2 Transport Channels</h3>
<p>The MAC sublayer uses the transport channels listed in Table 4.5.2-1
below.</p>
<p>Table 4.5.2-1: Transport channels used by MAC</p>
<table style="width:100%;">
<colgroup>
<col style="width: 37%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 14%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Transport channel name</th>
<th>Acronym</th>
<th>Downlink</th>
<th>Uplink</th>
<th>Sidelink</th>
</tr>
</thead>
<tbody>
<tr>
<td>Broadcast Channel</td>
<td>BCH</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Downlink Shared Channel</td>
<td>DL-SCH</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Paging Channel</td>
<td>PCH</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Uplink Shared Channel</td>
<td>UL-SCH</td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Random Access Channel</td>
<td>RACH</td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Sidelink Broadcast Channel</td>
<td>SL-BCH</td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>Sidelink Shared Channel</td>
<td>SL-SCH</td>
<td></td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table>
<h3 id="logical-channels">4.5.3 Logical Channels</h3>
<p>The MAC sublayer provides data transfer services on logical channels.
To accommodate different kinds of data transfer services, multiple types
of logical channels are defined i.e. each supporting transfer of a
particular type of information.</p>
<p>Each logical channel type is defined by what type of information is
transferred.</p>
<p>The MAC sublayer provides the control and traffic channels listed in
Table 4.5.3-1 below.</p>
<p>Table 4.5.3-1: Logical channels provided by MAC.</p>
<table>
<colgroup>
<col style="width: 41%" />
<col style="width: 13%" />
<col style="width: 22%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr>
<th>Logical channel name</th>
<th>Acronym</th>
<th>Control channel</th>
<th>Traffic channel</th>
</tr>
</thead>
<tbody>
<tr>
<td>Broadcast Control Channel</td>
<td>BCCH</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Paging Control Channel</td>
<td>PCCH</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Common Control Channel</td>
<td>CCCH</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Dedicated Control Channel</td>
<td>DCCH</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Dedicated Traffic Channel</td>
<td>DTCH</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>MBS Control Channel</td>
<td>MCCH</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>MBS Traffic Channel</td>
<td>MTCH</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>Sidelink Broadcast Control Channel</td>
<td>SBCCH</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Sidelink Control Channel</td>
<td>SCCH</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Sidelink Traffic Channel</td>
<td>STCH</td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table>
<h3 id="mapping-of-transport-channels-to-logical-channels">4.5.4 Mapping
of Transport Channels to Logical Channels</h3>
<h4 id="general-3">4.5.4.1 General</h4>
<p>The MAC entity is responsible for mapping logical channels onto
transport channels. This mapping depends on the multiplexing that is
configured by RRC.</p>
<h4 id="uplink-mapping">4.5.4.2 Uplink mapping</h4>
<p>The uplink logical channels can be mapped as described in Table
4.5.4.2-1.</p>
<p>Table 4.5.4.2-1: Uplink channel mapping.</p>
<table>
<colgroup>
<col style="width: 52%" />
<col style="width: 23%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr>
<th style="text-align: right;"><p>Transport channel</p>
<p>Logical channel</p></th>
<th>UL-SCH</th>
<th>RACH</th>
</tr>
</thead>
<tbody>
<tr>
<td>CCCH</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>DCCH</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>DTCH</td>
<td>X</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="downlink-mapping">4.5.4.3 Downlink mapping</h4>
<p>The downlink logical channels can be mapped as described in Table
4.5.4.3-1.</p>
<p>Table 4.5.4.3-1: Downlink channel mapping.</p>
<table>
<colgroup>
<col style="width: 41%" />
<col style="width: 19%" />
<col style="width: 19%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr>
<th style="text-align: right;"><p>Transport channel</p>
<p>Logical channel</p></th>
<th>BCH</th>
<th>PCH</th>
<th>DL-SCH</th>
</tr>
</thead>
<tbody>
<tr>
<td>BCCH</td>
<td>X</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>PCCH</td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>CCCH</td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>DCCH</td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>DTCH</td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>MCCH</td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>MTCH</td>
<td></td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table>
<h4 id="sidelink-mapping">4.5.4.4 Sidelink mapping</h4>
<p>The sidelink logical channels can be mapped as described in Table
4.5.4.4-1.</p>
<p>Table 4.5.4.4-1: Sidelink channel mapping.</p>
<table>
<colgroup>
<col style="width: 52%" />
<col style="width: 23%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr>
<th style="text-align: right;"><p>Transport channel</p>
<p>Logical channel</p></th>
<th>SL-BCH</th>
<th>SL-SCH</th>
</tr>
</thead>
<tbody>
<tr>
<td>SBCCH</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>SCCH</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>STCH</td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table>
<h1 id="mac-procedures">5 MAC procedures</h1>
<h2 id="random-access-procedure">5.1 Random Access procedure</h2>
<h3 id="random-access-procedure-initialization">5.1.1 Random Access
procedure initialization</h3>
<p>The Random Access procedure described in this clause is initiated by
a PDCCH order, by the MAC entity itself, or by RRC for the events in
accordance with TS 38.300 [2]. There is only one Random Access procedure
ongoing at any point in time in a MAC entity. The Random Access
procedure on an SCell shall only be initiated by a PDCCH order with
<em>ra-PreambleIndex</em> different from 0b000000.</p>
<p>NOTE 1: If a new Random Access procedure is triggered while another
is already ongoing in the MAC entity, it is up to UE implementation
whether to continue with the ongoing procedure or start with the new
procedure (e.g. for SI request).</p>
<p>NOTE 2: If there was an ongoing Random Access procedure that is
triggered by a PDCCH order while the UE receives another PDCCH order
indicating the same Random Access Preamble, PRACH mask index and uplink
carrier, the Random Access procedure is considered as the same Random
Access procedure as the ongoing one and not initialized again.</p>
<p>When a Random Access procedure is initiated, UE selects a set of
Random Access resources as specified in clause 5.1.1b and initialises
the following parameters for the Random Access procedure according to
the values configured by RRC for the selected set of Random Access
resources:</p>
<p>- <em>prach-ConfigurationIndex</em>: the available set of PRACH
occasions for the transmission of the Random Access Preamble for Msg1.
These are also applicable to the MSGA PRACH if the PRACH occasions are
shared between 2-step and 4-step RA types;</p>
<p>- <em>prach-ConfigurationPeriodScaling-IAB</em>: the scaling factor
defined in TS 38.211 [8] and applicable to IAB-MTs, extending the
periodicity of the PRACH occasions baseline configuration indicated by
<em>prach-ConfigurationIndex</em>;</p>
<p>- <em>prach-ConfigurationFrameOffset-IAB</em>: the frame offset
defined in TS 38.211 [8] and applicable to IAB-MTs, altering the ROs
frame defined in the baseline configuration indicated by
<em>prach-ConfigurationIndex</em>;</p>
<p>- <em>prach-ConfigurationSOffset-IAB</em>: the subframe/slot offset
defined in TS 38.211 [8] and applicable to IAB-MTs, altering the ROs
subframe or slot defined in the baseline configuration indicated by
<em>prach-ConfigurationIndex</em>;</p>
<p>- <em>msgA-PRACH-ConfigurationIndex</em>: the available set of PRACH
occasions for the transmission of the Random Access Preamble for MSGA in
2-step RA type;</p>
<p>- <em>preambleReceivedTargetPower</em>: initial Random Access
Preamble power for 4-step RA type;</p>
<p>- <em>msgA-PreambleReceivedTargetPower</em>: initial Random Access
Preamble power for 2-step RA type;</p>
<p>- <em>rsrp-ThresholdSSB</em>: an RSRP threshold for the selection of
the SSB for 4-step RA type. If the Random Access procedure is initiated
for beam failure recovery, <em>rsrp-ThresholdSSB</em> used for the
selection of the SSB within <em>candidateBeamRSList</em> refers to
<em>rsrp-ThresholdSSB</em> in <em>BeamFailureRecoveryConfig</em> IE;</p>
<p>- <em>rsrp-ThresholdCSI-RS</em>: an RSRP threshold for the selection
of CSI-RS for 4-step RA type. If the Random Access procedure is
initiated for beam failure recovery, <em>rsrp-ThresholdCSI-RS</em> is
equal to <em>rsrp-ThresholdSSB</em> in
<em>BeamFailureRecoveryConfig</em> IE;</p>
<p>- <em>msgA-RSRP-ThresholdSSB</em>: an RSRP threshold for the
selection of the SSB for 2-step RA type;</p>
<p>- <em>rsrp-ThresholdSSB-SUL</em>: an RSRP threshold for the selection
between the NUL carrier and the SUL carrier;</p>
<p><em>- msgA-RSRP-Threshold</em>: an RSRP threshold for selection
between 2-step RA type and 4-step RA type when both 2-step and 4-step RA
type Random Access Resources are configured in the UL BWP;</p>
<p><em>- rsrp-ThresholdMsg3</em>: an RSRP threshold for Msg3 repetition
(see clause 5.1.1b);</p>
<p><em>- FeatureCombination</em>: feature or a combination of features
associated with a set of Random Access resources;</p>
<p><em>- featurePriorities</em>: priorities for features, such as
RedCap, Slicing, etc. (see clause 5.1.1d);</p>
<p>- <em>msgA-TransMax</em>: The maximum number of MSGA transmissions
when both 4-step and 2-step RA type Random Access Resources are
configured;</p>
<p>- <em>candidateBeamRSList</em>: a list of reference signals (CSI-RS
and/or SSB) identifying the candidate beams for recovery and the
associated Random Access parameters;</p>
<p>- <em>recoverySearchSpaceId</em>: the search space identity for
monitoring the response of the beam failure recovery request;</p>
<p>- <em>powerRampingStep</em>: the power-ramping factor;</p>
<p>- <em>msgA-PreamblePowerRampingStep</em>: the power ramping factor
for MSGA preamble;</p>
<p>- <em>powerRampingStepHighPriority</em>: the power-ramping factor in
case of prioritized Random Access procedure;</p>
<p>- <em>scalingFactorBI</em>: a scaling factor for prioritized Random
Access procedure;</p>
<p>- <em>ra-PreambleIndex</em>: Random Access Preamble;</p>
<p>- <em>ra-ssb-OccasionMaskIndex</em>: defines PRACH occasion(s)
associated with an SSB in which the MAC entity may transmit a Random
Access Preamble (see clause 7.4);</p>
<p>- <em>msgA-SSB-SharedRO-MaskIndex</em>: Indicates the subset of
4-step RA type PRACH occasions shared with 2-step RA type PRACH
occasions for each SSB. If 2-step RA type PRACH occasions are shared
with 4-step RA type PRACH occasions and
<em>msgA-SSB-SharedRO-MaskIndex</em> is not configured, then all 4-step
RA type PRACH occasions are available for 2-step RA type (see clause
7.4);</p>
<p>- <em>ssb-SharedRO-MaskIndex</em>: defines PRACH occasions, on which
preambles are allocated for a feature or a combination of features,
associated with an SSB in which the MAC entity may transmit a Random
Access Preamble (see clause 7.4);</p>
<p>- <em>ra-OccasionList</em>: defines PRACH occasion(s) associated with
a CSI-RS in which the MAC entity may transmit a Random Access
Preamble;</p>
<p>- <em>ra-PreambleStartIndex</em>: the starting index of Random Access
Preamble(s) for on-demand SI request;</p>
<p>- <em>startPreambleForThisPartition</em>: the first preamble
associated with the set of Random Access Resources applicable to the
Random Access procedure;</p>
<p>- <em>preambleTransMax</em>: the maximum number of Random Access
Preamble transmission;</p>
<p>- <em>ssb-perRACH-OccasionAndCB-PreamblesPerSSB</em>: defines the
number of SSBs mapped to each PRACH occasion for 4-step RA type and the
number of contention-based Random Access Preambles mapped to each
SSB;</p>
<p>- <em>msgA-CB-PreamblesPerSSB-PerSharedRO</em>: defines the number of
contention-based Random Access Preambles for 2-step RA type mapped to
each SSB when the PRACH occasions are shared between 2-step and 4-step
RA types;</p>
<p>- <em>msgA-SSB-PerRACH-OccasionAndCB-PreamblesPerSSB</em>: defines
the number of SSBs mapped to each PRACH occasion for 2-step RA type and
the number of contention-based Random Access Preambles mapped to each
SSB;</p>
<p>- <em>numberOfPreamblesPerSSB-ForThisPartition</em>: defines the
number of consecutive preambles for a feature or a combination of
features mapped to each SSB;</p>
<p>- <em>msgA-PUSCH-ResourceGroupA</em>: defines MSGA PUSCH resources
that the UE shall use when performing MSGA transmission using Random
Access Preambles group A;</p>
<p>- <em>msgA-PUSCH-ResourceGroupB</em>: defines MSGA PUSCH resources
that the UE shall use when performing MSGA transmission using Random
Access Preambles group B;</p>
<p>- <em>msgA-PUSCH-Resource-Index</em>: identifies the index of the
PUSCH resource used for MSGA in case of contention-free Random Access
with 2-step RA type;</p>
<p>- if <em>groupBconfigured</em> is configured, then Random Access
Preambles group B is configured for 4-step RA type.</p>
<p>- Amongst the contention-based Random Access Preambles associated
with an SSB (as defined in TS 38.213 [6]), the first
<em>numberOfRA-PreamblesGroupA</em> included in
<em>groupBconfigured</em> Random Access Preambles belong to Random
Access Preambles group A. The remaining Random Access Preambles
associated with the SSB belong to Random Access Preambles group B (if
configured).</p>
<p>- if <em>groupB-ConfiguredTwoStepRA</em> is configured, then Random
Access Preambles group B is configured for 2-step RA type.</p>
<p>- Amongst the contention-based Random Access Preambles for 2-step RA
type associated with an SSB (as defined in TS 38.213 [6]), the first
<em>numberOfRA-PreamblesGroupA</em> included in
<em>GroupB-ConfiguredTwoStepRA</em> Random Access Preambles belong to
Random Access Preambles group A. The remaining Random Access Preambles
associated with the SSB belong to Random Access Preambles group B (if
configured).</p>
<p>NOTE 3: If Random Access Preambles group B is supported by the cell
Random Access Preambles group B is included for each SSB.</p>
<p>- if Random Access Preambles group B is configured for 4-step RA
type:</p>
<p>- <em>ra-Msg3SizeGroupA</em>: the threshold to determine the groups
of Random Access Preambles for 4-step RA type;</p>
<p>- <em>msg3-DeltaPreamble</em>: ∆<em><sub>PREAMBLE_Msg3</sub></em> in
TS 38.213 [6];</p>
<p>- <em>messagePowerOffsetGroupB</em>: the power offset for preamble
selection included in <em>groupBconfigured</em>;</p>
<p>- <em>numberOfRA-PreamblesGroupA</em>: defines the number of Random
Access Preambles in Random Access Preamble group A for each SSB included
in <em>groupBconfigured</em>.</p>
<p>- if Random Access Preambles group B is configured for 2-step RA
type:</p>
<p>- <em>msgA-DeltaPreamble</em>: ∆<em><sub>MsgA_PUSCH</sub></em> in TS
38.213 [6];</p>
<p>- <em>messagePowerOffsetGroupB</em>: the power offset for preamble
selection included in <em>GroupB-ConfiguredTwoStepRA</em>;</p>
<p>- <em>numberOfRA-PreamblesGroupA</em>: defines the number of Random
Access Preambles in Random Access Preamble group A for each SSB included
in <em>GroupB-ConfiguredTwoStepRA</em>;</p>
<p>- <em>ra-MsgA-SizeGroupA</em>: the threshold to determine the groups
of Random Access Preambles for 2-step RA type.</p>
<p>- the set of Random Access Preambles and/or PRACH occasions for SI
request, if any;</p>
<p>- the set of Random Access Preambles and/or PRACH occasions for beam
failure recovery request, if any;</p>
<p>- the set of Random Access Preambles and/or PRACH occasions for
reconfiguration with sync, if any;</p>
<p>- <em>ra-ResponseWindow</em>: the time window to monitor RA
response(s) (SpCell only);</p>
<p>- <em>ra-ContentionResolutionTimer</em>: the Contention Resolution
Timer (SpCell only);</p>
<p>- <em>msgB-ResponseWindow</em>: the time window to monitor RA
response(s) for 2-step RA type (SpCell only).</p>
<p>In addition, the following information for related Serving Cell is
assumed to be available for UEs:</p>
<p>- if Random Access Preambles group B is configured:</p>
<p>- if the Serving Cell for the Random Access procedure is configured
with supplementary uplink as specified in TS 38.331 [5], and SUL carrier
is selected for performing Random Access Procedure:</p>
<p>- P<sub>CMAX,f,c</sub> of the SUL carrier as specified in TS 38.101-1
[14], TS 38.101-2 [15], and TS 38.101-3 [16].</p>
<p>- else:</p>
<p>- P<sub>CMAX,f,c</sub> of the NUL carrier as specified in TS 38.101-1
[14], TS 38.101-2 [15], and TS 38.101-3 [16].</p>
<p>The following UE variables are used for the Random Access
procedure:</p>
<p>- <em>PREAMBLE_INDEX</em>;</p>
<p>- <em>PREAMBLE_TRANSMISSION_COUNTER</em>;</p>
<p>- <em>PREAMBLE_POWER_RAMPING_COUNTER</em>;</p>
<p>- <em>PREAMBLE_POWER_RAMPING_STEP</em>;</p>
<p>- <em>PREAMBLE_RECEIVED_TARGET_POWER</em>;</p>
<p>- <em>PREAMBLE_BACKOFF</em>;</p>
<p>- <em>PCMAX</em>;</p>
<p>- <em>SCALING_FACTOR_BI</em>;</p>
<p>- <em>TEMPORARY_C-RNTI</em>;</p>
<p>- <em>RA_TYPE</em>;</p>
<p>- <em>POWER_OFFSET_2STEP_RA</em>;</p>
<p>- <em>MSGA_PREAMBLE_POWER_RAMPING_STEP</em>.</p>
<p>When the Random Access procedure is initiated on a Serving Cell, the
MAC entity shall:</p>
<p>1&gt; flush the Msg3 buffer;</p>
<p>1&gt; flush the MSGA buffer;</p>
<p>1&gt; set the <em>PREAMBLE_TRANSMISSION_COUNTER</em> to 1;</p>
<p>1&gt; set the <em>PREAMBLE_POWER_RAMPING_COUNTER</em> to 1;</p>
<p>1&gt; set the <em>PREAMBLE_BACKOFF</em> to 0 ms;</p>
<p>1&gt; set <em>POWER_OFFSET_2STEP_RA</em> to 0 dB;</p>
<p>1&gt; if the carrier to use for the Random Access procedure is
explicitly signalled:</p>
<p>2&gt; select the signalled carrier for performing Random Access
procedure;</p>
<p>2&gt; set the <em>PCMAX</em> to P<sub>CMAX,f,c</sub> of the signalled
carrier.</p>
<p>1&gt; else if the carrier to use for the Random Access procedure is
not explicitly signalled; and</p>
<p>1&gt; if the Serving Cell for the Random Access procedure is
configured with supplementary uplink as specified in TS 38.331 [5];
and</p>
<p>1&gt; if the RSRP of the downlink pathloss reference is less than
<em>rsrp-ThresholdSSB-SUL</em>:</p>
<p>2&gt; select the SUL carrier for performing Random Access
procedure;</p>
<p>2&gt; set the <em>PCMAX</em> to P<sub>CMAX,f,c</sub> of the SUL
carrier.</p>
<p>1&gt; else:</p>
<p>2&gt; select the NUL carrier for performing Random Access
procedure;</p>
<p>2&gt; set the <em>PCMAX</em> to P<sub>CMAX,f,c</sub> of the NUL
carrier.</p>
<p>NOTE 4: Void.</p>
<p>1&gt; perform the BWP operation as specified in clause 5.15;</p>
<p>1&gt; select the set of Random Access resources applicable to the
current Random Access procedure according to clause 5.1.1b;</p>
<p>1&gt; if the Random Access procedure is initiated by PDCCH order and
if the <em>ra-PreambleIndex</em> explicitly provided by PDCCH is not
0b000000; or</p>
<p>1&gt; if the Random Access procedure was initiated for SI request (as
specified in TS 38.331 [5]) and the Random Access Resources for SI
request have been explicitly provided by RRC; or</p>
<p>1&gt; if the Random Access procedure was initiated for SpCell beam
failure recovery (as specified in clause 5.17) and if the
contention-free Random Access Resources for beam failure recovery
request for 4-step RA type have been explicitly provided by RRC for the
BWP selected for Random Access procedure; or</p>
<p>1&gt; if the Random Access procedure was initiated for
reconfiguration with sync and if the contention-free Random Access
Resources for 4-step RA type have been explicitly provided in
<em>rach-ConfigDedicated</em> for the BWP selected for Random Access
procedure:</p>
<p>2&gt; set the <em>RA_TYPE</em> to <em>4-stepRA</em>.</p>
<p>1&gt; else if the BWP selected for Random Access procedure is
configured with both 2-step and 4-step RA type Random Access Resources
within the selected set of Random Access resources (as specified in
clause 5.1.1b) and the RSRP of the downlink pathloss reference is above
<em>msgA-RSRP-Threshold</em>; or</p>
<p>1&gt; if the BWP selected for Random Access procedure is only
configured with 2-step RA type Random Access resources within the
selected set of Random Access resources according to clause 5.1.1b;
or</p>
<p>1&gt; if the Random Access procedure was initiated for
reconfiguration with sync and if the contention-free Random Access
Resources for 2-step RA type have been explicitly provided in
<em>rach-ConfigDedicated</em> for the BWP selected for Random Access
procedure:</p>
<p>2&gt; set the <em>RA_TYPE</em> to <em>2-stepRA</em>.</p>
<p>1&gt; else:</p>
<p>2&gt; set the <em>RA_TYPE</em> to <em>4-stepRA</em>.</p>
<p>1&gt; perform initialization of variables specific to Random Access
type as specified in clause 5.1.1a;</p>
<p>1&gt; if <em>RA_TYPE</em> is set to <em>2-stepRA</em>:</p>
<p>2&gt; perform the Random Access Resource selection procedure for
2-step RA type (see clause 5.1.2a).</p>
<p>1&gt; else:</p>
<p>2&gt; perform the Random Access Resource selection procedure (see
clause 5.1.2).</p>
<h3
id="a-initialization-of-variables-specific-to-random-access-type">5.1.1a
Initialization of variables specific to Random Access type</h3>
<p>The MAC entity shall:</p>
<p>1&gt; if <em>RA_TYPE</em> is set to <em>2-stepRA</em>:</p>
<p>2&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to
<em>msgA-PreamblePowerRampingStep</em>;</p>
<p>2&gt; set <em>SCALING_FACTOR_BI</em> to 1;</p>
<p>2&gt; apply <em>preambleTransMax</em> included in the
<em>RACH-ConfigGenericTwoStepRA</em>;</p>
<p>2&gt; if the Random Access procedure was initiated for
reconfiguration with sync or for SCG activation; and</p>
<p>2&gt; if <em>cfra-TwoStep</em> is configured for the selected
carrier:</p>
<p>3&gt; if <em>msgA-TransMax</em> is configured in the
<em>cfra-TwoStep</em>:</p>
<p>4&gt; apply <em>msgA-TransMax</em> configured in the
<em>cfra-TwoStep</em>.</p>
<p>2&gt; else if <em>msgA-TransMax</em> is included in the
<em>RACH-ConfigCommonTwoStepRA</em>:</p>
<p>3&gt; apply <em>msgA-TransMax</em> included in the
<em>RACH-ConfigCommonTwoStepRA</em>.</p>
<p>2&gt; if the Random Access procedure was initiated for SpCell beam
failure recovery (as specified in clause 5.17); and</p>
<p>2&gt; if <em>beamFailureRecoveryConfig</em> is configured for the
active UL BWP of the selected carrier; and</p>
<p>2&gt; if <em>ra-PrioritizationTwoStep</em> is configured in the
<em>beamFailureRecoveryConfig</em>:</p>
<p>3&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em> included in the
<em>ra-PrioritizationTwoStep</em> in
<em>beamFailureRecoveryConfig</em>;</p>
<p>3&gt; if <em>scalingFactorBI</em> is configured in the
<em>ra-PrioritizationTwoStep</em> in
<em>beamFailureRecoveryConfig</em>:</p>
<p>4&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>2&gt; else if the Random Access procedure was initiated for
reconfiguration with sync or for SCG activation; and</p>
<p>2&gt; if <em>rach-ConfigDedicated</em> is configured for the selected
carrier; and</p>
<p>2&gt; if <em>ra-PrioritizationTwoStep</em> is configured in the
<em>rach-ConfigDedicated</em>:</p>
<p>3&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em> included in the
<em>ra-PrioritizationTwoStep</em> in <em>rach-ConfigDedicated</em>;</p>
<p>3&gt; if <em>scalingFactorBI</em> is configured in
<em>ra-PrioritizationTwoStep</em> in the
<em>rach-ConfigDedicated</em>:</p>
<p>4&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>2&gt; else if both <em>ra-PrioritizationForSlicingTwoStep</em> for a
<em>NSAG-ID</em> and <em>ra-PrioritizationForAccessIdentityTwoStep</em>
are configured for the selected carrier; and</p>
<p>2&gt; if the MAC entity is provided by upper layers with both this
<em>NSAG-ID</em> and Access Identity 1 or 2; and</p>
<p>2&gt; if for at least one of these Access Identities the
corresponding bit in the <em>ra-PrioritizationForAI</em> is set to
<em>one</em>:</p>
<p>3&gt; if <em>enableRA-PrioritizationForSlicing</em> is set to
<em>true</em>:</p>
<p>4&gt; if <em>powerRampingStepHighPriority</em> is configured in the
<em>ra-PrioritizationForSlicingTwoStep</em> for this
<em>NSAG-ID</em>:</p>
<p>5&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em>.</p>
<p>4&gt; if <em>scalingFactorBI</em> is configured in the
<em>ra-PrioritizationForSlicingTwoStep</em> for this
<em>NSAG-ID</em>:</p>
<p>5&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>3&gt; else if <em>enableRA-PrioritizationForSlicing</em> is set to
<em>false</em>:</p>
<p>4&gt; if <em>powerRampingStepHighPriority</em> is configured in the
<em>ra-PrioritizationForAccessIdentityTwoStep</em>:</p>
<p>5&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em>.</p>
<p>4&gt; if <em>scalingFactorBI</em> is configured in the
<em>ra-PrioritizationForAccessIdentityTwoStep</em>:</p>
<p>5&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>2&gt; else if <em>ra-PrioritizationForSlicingTwoStep</em> for a
<em>NSAG-ID</em> is configured for the selected carrier; and</p>
<p>2&gt; if the MAC entity is provided by upper layers with this
<em>NSAG-ID</em>:</p>
<p>3&gt; if <em>powerRampingStepHighPriority</em> is configured in the
<em>ra-PrioritizationForSlicingTwoStep</em> for this
<em>NSAG-ID</em>:</p>
<p>4&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em>.</p>
<p>3&gt; if <em>scalingFactorBI</em> is configured in the
<em>ra-PrioritizationForSlicingTwoStep</em> for this
<em>NSAG-ID</em>:</p>
<p>4&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>2&gt; else if <em>ra-PrioritizationForAccessIdentityTwoStep</em> is
configured for the selected carrier; and</p>
<p>2&gt; if the MAC entity is provided by upper layers with Access
Identity 1 or 2; and</p>
<p>2&gt; if for at least one of these Access Identities the
corresponding bit in the <em>ra-PrioritizationForAI</em> is set to
<em>one</em>:</p>
<p>3&gt; if <em>powerRampingStepHighPriority</em> is configured in the
<em>ra-PrioritizationForAccessIdentityTwoStep</em>:</p>
<p>4&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em>.</p>
<p>3&gt; if <em>scalingFactorBI</em> is configured in the
<em>ra-PrioritizationForAccessIdentityTwoStep</em>:</p>
<p>4&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>2&gt; set <em>MSGA_PREAMBLE_POWER_RAMPING_STEP</em> to
<em>PREAMBLE_POWER_RAMPING_STEP</em>.</p>
<p>1&gt; else (i.e. <em>RA_TYPE</em> is set to <em>4-stepRA</em>):</p>
<p>2&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to
<em>powerRampingStep</em>;</p>
<p>2&gt; set <em>SCALING_FACTOR_BI</em> to 1;</p>
<p>2&gt; set <em>preambleTransMax</em> to <em>preambleTransMax</em>
included in the <em>RACH-ConfigGeneric</em>;</p>
<p>2&gt; if the Random Access procedure was initiated for SpCell beam
failure recovery (as specified in clause 5.17); and</p>
<p>2&gt; if <em>beamFailureRecoveryConfig</em> is configured for the
active UL BWP of the selected carrier:</p>
<p>3&gt; start the <em>beamFailureRecoveryTimer</em>, if configured;</p>
<p>3&gt; apply the parameters <em>powerRampingStep</em>,
<em>preambleReceivedTargetPower</em>, and <em>preambleTransMax</em>
configured in the <em>beamFailureRecoveryConfig</em>.</p>
<p>2&gt; if the Random Access procedure was initiated for beam failure
recovery (as specified in clause 5.17); and</p>
<p>2&gt; if <em>beamFailureRecoveryConfig</em> is configured for the
active UL BWP of the selected carrier; and</p>
<p>2&gt; if <em>ra-Prioritization</em> is configured in the
<em>beamFailureRecoveryConfig</em>:</p>
<p>3&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em> included in the
<em>ra-Prioritization</em> in <em>beamFailureRecoveryConfig</em>;</p>
<p>3&gt; if <em>scalingFactorBI</em> is configured in
<em>ra-Prioritization</em> in the
<em>beamFailureRecoveryConfig</em>:</p>
<p>4&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>2&gt; else if the Random Access procedure was initiated for
reconfiguration with sync or for SCG activation; and</p>
<p>2&gt; if <em>rach-ConfigDedicated</em> is configured for the selected
carrier; and</p>
<p>2&gt; if <em>ra-Prioritization</em> is configured in the
<em>rach-ConfigDedicated</em>:</p>
<p>3&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em> included in the
<em>ra-Prioritization</em> in <em>rach-ConfigDedicated</em>;</p>
<p>3&gt; if <em>scalingFactorBI</em> is configured in
<em>ra-Prioritization</em> in the <em>rach-ConfigDedicated</em>:</p>
<p>4&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>2&gt; else if both <em>ra-PrioritizationForSlicing</em> for a
<em>NSAG-ID</em> and <em>ra-PrioritizationForAccessIdentity</em> are
configured for the selected carrier; and</p>
<p>2&gt; if the MAC entity is provided by upper layers with both this
<em>NSAG-ID</em> and Access Identity 1 or 2; and</p>
<p>2&gt; if for at least one of these Access Identities the
corresponding bit in the <em>ra-PrioritizationForAI</em> is set to
<em>one</em>:</p>
<p>3&gt; if <em>enableRA-PrioritizationForSlicing</em> is set to
<em>true</em>:</p>
<p>4&gt; if <em>powerRampingStepHighPriority</em> is configured in the
<em>ra-PrioritizationForSlicing</em> for this <em>NSAG-ID</em>:</p>
<p>5&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em>.</p>
<p>4&gt; if <em>scalingFactorBI</em> is configured in the
<em>ra-PrioritizationForSlicing</em> for this <em>NSAG-ID</em>:</p>
<p>5&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>3&gt; else if <em>enableRA-PrioritizationForSlicing</em> is set to
<em>false</em>:</p>
<p>4&gt; if <em>powerRampingStepHighPriority</em> is configured in the
<em>ra-PrioritizationForAccessIdentity</em>:</p>
<p>5&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em>.</p>
<p>4&gt; if <em>scalingFactorBI</em> is configured in the
<em>ra-PrioritizationForAccessIdentity</em>:</p>
<p>5&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>2&gt; else if <em>ra-PrioritizationForSlicing</em> for a
<em>NSAG-ID</em> is configured for the selected carrier; and</p>
<p>2&gt; if the MAC entity is provided by upper layers with this
<em>NSAG-ID</em>:</p>
<p>3&gt; if <em>powerRampingStepHighPriority</em> is configured in the
<em>ra-PrioritizationForSlicing</em> for this <em>NSAG-ID</em>:</p>
<p>4&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em>.</p>
<p>3&gt; if <em>scalingFactorBI</em> is configured in the
<em>ra-PrioritizationForSlicing</em> for this <em>NSAG-ID</em>:</p>
<p>4&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>2&gt; else if <em>ra-PrioritizationForAccessIdentity</em> is
configured for the selected carrier; and</p>
<p>2&gt; if the MAC entity is provided by upper layers with Access
Identity 1 or 2; and</p>
<p>2&gt; if for at least one of these Access Identities the
corresponding bit in the <em>ra-PrioritizationForAI</em> is set to
<em>one</em>:</p>
<p>3&gt; if <em>powerRampingStepHighPriority</em> is configured in the
<em>ra-PrioritizationForAccessIdentity</em>:</p>
<p>4&gt; set <em>PREAMBLE_POWER_RAMPING_STEP</em> to the
<em>powerRampingStepHighPriority</em>.</p>
<p>3&gt; if <em>scalingFactorBI</em> is configured in the
<em>ra-PrioritizationForAccessIdentity</em>:</p>
<p>4&gt; set <em>SCALING_FACTOR_BI</em> to the
<em>scalingFactorBI</em>.</p>
<p>2&gt; if <em>RA_TYPE</em> is switched from <em>2-stepRA</em> to
<em>4-stepRA</em> during this Random Access procedure:</p>
<p>3&gt; set <em>POWER_OFFSET_2STEP_RA</em> to
(<em>PREAMBLE_POWER_RAMPING_COUNTER</em> – 1) ×
(<em>MSGA_PREAMBLE_POWER_RAMPING_STEP</em> –
<em>PREAMBLE_POWER_RAMPING_STEP</em>).</p>
<p>NOTE: If <em>enableRA-PrioritizationForSlicing</em> is not configured
in <em>BWP-UplinkCommon</em> and if both the provided <em>NSAG-ID</em>
and the provided Access Identity whose corresponding bit in the
<em>ra-PrioritizationForAI</em> is set to <em>one</em> are configured
with <em>ra-Prioritization</em> either in <em>RACH-ConfigCommon</em> or
<em>RACH-ConfigCommonTwoStepRA</em>, it is up to UE implementation how
to determine the values of <em>PREAMBLE_POWER_RAMPING_STEP</em> and
<em>SCALING_FACTOR_BI</em>.</p>
<h3
id="b-selection-of-the-set-of-random-access-resources-for-the-random-access-procedure">5.1.1b
Selection of the set of Random Access resources for the Random Access
procedure</h3>
<p>The MAC entity shall:</p>
<p>1&gt; if the BWP selected for Random Access procedure is configured
with both set(s) of Random Access resources with
<em>msg3-Repetitions</em> set to <em>true</em> and set(s) of Random
Access resources without <em>msg3-Repetitions</em> set to <em>true</em>
and the RSRP of the downlink pathloss reference is less than
<em>rsrp-ThresholdMsg3</em>; or</p>
<p>1&gt; if the BWP selected for Random Access procedure is only
configured with the set(s) of Random Access resources with
<em>msg3-Repetitions</em> set to <em>true</em>:</p>
<p>2&gt; assume Msg3 repetition is applicable for the current Random
Access procedure.</p>
<p>1&gt; else:</p>
<p>2&gt; assume Msg3 repetition is not applicable for the current Random
Access procedure.</p>
<p>NOTE 1: Void.</p>
<p>1&gt; if neither contention-free Random Access Resources nor Random
Access Resources for SI request have been provided for this Random
Access procedure and one or more of the features including RedCap and/or
Slicing and/or SDT and/or MSG3 repetition is applicable for this Random
Access procedure:</p>
<p>NOTE 2: The applicability of SDT is determined by MAC entity
according to clause 5.27. The applicability of <em>NSAG-ID</em> is
determined by upper layers when the Random Access procedure is
initiated. The applicability of RedCap is also determined by upper
layers when Random Access procedure is initiated and it is applicable to
the Random Access procedures initiated by PDCCH orders and any Random
Access procedure initiated by the MAC entity.</p>
<p>2&gt; if none of the sets of Random Access resources are available
for any feature applicable to the current Random Access procedure (as
specified in clause 5.1.1c):</p>
<p>3&gt; select the set(s) of Random Access resources that are not
associated with any feature indication (as specified in clause 5.1.1c)
for this Random Access procedure.</p>
<p>2&gt; else if there is one set of Random Access resources available
which can be used for indicating all features triggering this Random
Access procedure:</p>
<p>3&gt; select this set of Random Access resources for this Random
Access procedure.</p>
<p>2&gt; else (i.e. there are one or more sets of Random Access
resources available that are configured with indication(s) for a subset
of all features triggering this Random Access procedure):</p>
<blockquote>
<p>3&gt; select a set of Random Access resources from the available
set(s) of Random Access resources based on the priority order indicated
by upper layers as specified in clause 5.1.1d for this Random Access
Procedure.</p>
</blockquote>
<p>1&gt; else if contention-free Random Access Resources have been
provided for this Random Access procedure and RedCap is applicable for
the current Random Access procedure and there is one set of Random
Access resources available that is only configured with RedCap
indication:</p>
<p>2&gt; select this set of Random Access resources for this Random
Access procedure.</p>
<p>1&gt; else:</p>
<p>2&gt; select the set of Random Access resources that are not
associated with any feature indication (as specified in clause 5.1.1c)
for the current Random Access procedure.</p>
<h3 id="c-availability-of-the-set-of-random-access-resources">5.1.1c
Availability of the set of Random Access resources</h3>
<p>The MAC entity shall for each set of configured Random Access
resources:</p>
<p>1&gt; if <em>redCap</em> is set to <em>true</em> for a set of Random
Access resources:</p>
<p>2&gt; consider the set of Random Access resources as not available
for a Random Access procedure for which RedCap is not applicable.</p>
<p>1&gt; if <em>smallData</em> is set to <em>true</em> for a set of
Random Access resources:</p>
<p>2&gt; consider the set of Random Access resources as not available
for the Random Access procedure which is not triggered for RA-SDT.</p>
<p>1&gt; if <em>NSAG-List</em> is configured for a set of Random Access
resources:</p>
<p>2&gt; consider the set of Random Access resources as not available
for the Random Access procedure unless it is triggered for any one of
the <em>NSAG-ID</em>(s) in the <em>NSAG-List</em>.</p>
<p>1&gt; if <em>msg3-Repetitions</em> is set to <em>true</em> for a set
of Random Access resources:</p>
<p>2&gt; consider the set of Random Access resources as not available
for the Random Access procedure if Msg3 repetition is not
applicable.</p>
<p>1&gt; if a set of Random Access resources is not configured with
<em>FeatureCombination</em>:</p>
<p>2&gt; consider the set of Random Access resources to not associated
with any feature.</p>
<h3
id="d-selection-of-the-set-of-random-access-resources-based-on-feature-prioritization">5.1.1d
Selection of the set of Random Access resources based on feature
prioritization</h3>
<p>The MAC entity shall:</p>
<p>1&gt; among the available sets of Random Access resources for this
Random Access procedure (as specified in clause 5.1.1c), identify those
configured with a feature which has the highest priority assigned in
<em>featurePriorities</em> among all the features applicable to this
Random Access procedure as specified in TS 38.331 [5].</p>
<p>1&gt; if a single set of Random Access resources is identified:</p>
<p>2&gt; select this set of Random Access resources.</p>
<p>1&gt; else if more than one set of Random Access resources is
identified:</p>
<p>2&gt; repeat the procedure taking as an input the identified sets of
Random Access resources and the feature applicable to the current Random
Access procedure with the highest priority assigned in
<em>featurePriorities</em> among all the features applicable to this
Random Access procedure, except the features considered already.</p>
<p>1&gt; else (i.e. no set of Random Access resources is
identified):</p>
<p>2&gt; repeat the procedure taking as an input the previous identified
available sets of Random Access resources and the feature applicable to
the current Random Access procedure with the highest priority assigned
in <em>featurePriorities</em> among all the features applicable to this
Random Access procedure, except the features considered already.</p>
<h3 id="random-access-resource-selection">5.1.2 Random Access Resource
selection</h3>
<p>If the selected <em>RA_TYPE</em> is set to <em>4-stepRA</em>, the MAC
entity shall:</p>
<p>1&gt; if the Random Access procedure was initiated for SpCell beam
failure recovery (as specified in clause 5.17); and</p>
<p>1&gt; if the <em>beamFailureRecoveryTimer</em> (in clause 5.17) is
either running or not configured; and</p>
<p>1&gt; if the contention-free Random Access Resources for beam failure
recovery request associated with any of the SSBs and/or CSI-RSs have
been explicitly provided by RRC; and</p>
<p>1&gt; if at least one of the SSBs with SS-RSRP above
<em>rsrp-ThresholdSSB</em> amongst the SSBs in
<em>candidateBeamRSList</em> or the CSI-RSs with CSI-RSRP above
<em>rsrp-ThresholdCSI-RS</em> amongst the CSI-RSs in
<em>candidateBeamRSList</em> is available:</p>
<p>2&gt; select an SSB with SS-RSRP above <em>rsrp-ThresholdSSB</em>
amongst the SSBs in <em>candidateBeamRSList</em> or a CSI-RS with
CSI-RSRP above <em>rsrp-ThresholdCSI-RS</em> amongst the CSI-RSs in
<em>candidateBeamRSList</em>;</p>
<p>2&gt; if CSI-RS is selected, and there is no
<em>ra-PreambleIndex</em> associated with the selected CSI-RS:</p>
<p>3&gt; set the <em>PREAMBLE_INDEX</em> to a <em>ra-PreambleIndex</em>
corresponding to the SSB in <em>candidateBeamRSList</em> which is
quasi-colocated with the selected CSI-RS as specified in TS 38.214
[7].</p>
<p>2&gt; else:</p>
<p>3&gt; set the <em>PREAMBLE_INDEX</em> to a <em>ra-PreambleIndex</em>
corresponding to the selected SSB or CSI-RS from the set of Random
Access Preambles for beam failure recovery request.</p>
<p>1&gt; else if the <em>ra-PreambleIndex</em> has been explicitly
provided by PDCCH; and</p>
<p>1&gt; if the <em>ra-PreambleIndex</em> is not 0b000000:</p>
<p>2&gt; set the <em>PREAMBLE_INDEX</em> to the signalled
<em>ra-PreambleIndex</em>;</p>
<p>2&gt; select the SSB signalled by PDCCH.</p>
<p>1&gt; else if the contention-free Random Access Resources associated
with SSBs have been explicitly provided in <em>rach-ConfigDedicated</em>
and at least one SSB with SS-RSRP above <em>rsrp-ThresholdSSB</em>
amongst the associated SSBs is available:</p>
<p>2&gt; select an SSB with SS-RSRP above <em>rsrp-ThresholdSSB</em>
amongst the associated SSBs;</p>
<p>2&gt; set the <em>PREAMBLE_INDEX</em> to a <em>ra-PreambleIndex</em>
corresponding to the selected SSB.</p>
<p>1&gt; else if the contention-free Random Access Resources associated
with CSI-RSs have been explicitly provided in
<em>rach-ConfigDedicated</em> and at least one CSI-RS with CSI-RSRP
above <em>rsrp-ThresholdCSI-RS</em> amongst the associated CSI-RSs is
available:</p>
<p>2&gt; select a CSI-RS with CSI-RSRP above
<em>rsrp-ThresholdCSI-RS</em> amongst the associated CSI-RSs;</p>
<p>2&gt; set the <em>PREAMBLE_INDEX</em> to a <em>ra-PreambleIndex</em>
corresponding to the selected CSI-RS.</p>
<p>1&gt; else if the Random Access procedure was initiated for SI
request (as specified in TS 38.331 [5]); and</p>
<p>1&gt; if the Random Access Resources for SI request have been
explicitly provided by RRC:</p>
<p>2&gt; if at least one of the SSBs with SS-RSRP above
<em>rsrp-ThresholdSSB</em> is available:</p>
<p>3&gt; select an SSB with SS-RSRP above
<em>rsrp-ThresholdSSB</em>.</p>
<p>2&gt; else:</p>
<p>3&gt; select any SSB.</p>
<p>2&gt; select a Random Access Preamble corresponding to the selected
SSB, from the Random Access Preamble(s) determined according to
<em>ra-PreambleStartIndex</em> as specified in TS 38.331 [5];</p>
<p>2&gt; set the <em>PREAMBLE_INDEX</em> to selected Random Access
Preamble.</p>
<p>1&gt; else (i.e. for the contention-based Random Access preamble
selection):</p>
<p>2&gt; if at least one of the SSBs with SS-RSRP above
<em>rsrp-ThresholdSSB</em> is available:</p>
<p>3&gt; select an SSB with SS-RSRP above
<em>rsrp-ThresholdSSB</em>.</p>
<p>2&gt; else:</p>
<p>3&gt; select any SSB.</p>
<p>2&gt; if the <em>RA_TYPE</em> is switched from <em>2-stepRA</em> to
<em>4-stepRA</em>:</p>
<p>3&gt; if a Random Access Preambles group was selected during the
current Random Access procedure:</p>
<p>4&gt; select the same group of Random Access Preambles as was
selected for the 2-step RA type.</p>
<p>3&gt; else:</p>
<p>4&gt; if Random Access Preambles group B is configured; and</p>
<p>4&gt; if the transport block size of the MSGA payload configured in
the <em>rach-ConfigDedicated</em> corresponds to the transport block
size of the MSGA payload associated with Random Access Preambles group
B:</p>
<p>5&gt; select the Random Access Preambles group B.</p>
<p>4&gt; else:</p>
<p>5&gt; select the Random Access Preambles group A.</p>
<p>2&gt; else if Msg3 buffer is empty:</p>
<p>3&gt; if Random Access Preambles group B is configured:</p>
<p>4&gt; if the potential Msg3 size (UL data available for transmission
plus MAC subheader(s) and, where required, MAC CEs) is greater than
<em>ra-Msg3SizeGroupA</em> and the pathloss is less than <em>PCMAX</em>
(of the Serving Cell performing the Random Access Procedure) –
<em>preambleReceivedTargetPower</em> – <em>msg3-DeltaPreamble</em> –
<em>messagePowerOffsetGroupB</em>; or</p>
<p>4&gt; if the Random Access procedure was initiated for the CCCH
logical channel and the CCCH SDU size plus MAC subheader is greater than
<em>ra-Msg3SizeGroupA</em>:</p>
<p>5&gt; select the Random Access Preambles group B.</p>
<p>4&gt; else:</p>
<p>5&gt; select the Random Access Preambles group A.</p>
<p>3&gt; else:</p>
<p>4&gt; select the Random Access Preambles group A.</p>
<p>2&gt; else (i.e. Msg3 is being retransmitted):</p>
<p>3&gt; select the same group of Random Access Preambles as was used
for the Random Access Preamble transmission attempt corresponding to the
first transmission of Msg3.</p>
<p>2&gt; select a Random Access Preamble randomly with equal probability
from the Random Access Preambles associated with the selected SSB and
the selected Random Access Preambles group;</p>
<p>2&gt; set the <em>PREAMBLE_INDEX</em> to the selected Random Access
Preamble.</p>
<p>1&gt; if the Random Access procedure was initiated for SI request (as
specified in TS 38.331 [5]); and</p>
<p>1&gt; if <em>ra-AssociationPeriodIndex</em> and
<em>si-RequestPeriod</em> are configured:</p>
<p>2&gt; determine the next available PRACH occasion from the PRACH
occasions corresponding to the selected SSB in the association period
given by <em>ra-AssociationPeriodIndex</em> in the
<em>si-RequestPeriod</em> permitted by the restrictions given by the
<em>ra-ssb-OccasionMaskIndex</em> if configured (the MAC entity shall
select a PRACH occasion randomly with equal probability amongst the
consecutive PRACH occasions according to clause 8.1 of TS 38.213 [6]
corresponding to the selected SSB).</p>
<p>1&gt; else if an SSB is selected above:</p>
<p>2&gt; determine the next available PRACH occasion from the PRACH
occasions corresponding to the selected SSB permitted by the
restrictions given by the <em>ra-ssb-OccasionMaskIndex</em> if
configured, or <em>ssb-SharedRO-MaskIndex</em> if configured, or
indicated by PDCCH (the MAC entity shall select a PRACH occasion
randomly with equal probability amongst the consecutive PRACH occasions
according to clause 8.1 of TS 38.213 [6] regardless the FR2 UL gap,
corresponding to the selected SSB; the MAC entity may take into account
the possible occurrence of measurement gaps and MUSIM gaps when
determining the next available PRACH occasion corresponding to the
selected SSB).</p>
<p>1&gt; else if a CSI-RS is selected above:</p>
<p>2&gt; if there is no contention-free Random Access Resource
associated with the selected CSI-RS:</p>
<p>3&gt; determine the next available PRACH occasion from the PRACH
occasions, permitted by the restrictions given by the
<em>ra-ssb-OccasionMaskIndex</em> if configured, corresponding to the
SSB in <em>candidateBeamRSList</em> which is quasi-colocated with the
selected CSI-RS as specified in TS 38.214 [7] (the MAC entity shall
select a PRACH occasion randomly with equal probability amongst the
consecutive PRACH occasions according to clause 8.1 of TS 38.213 [6]
regardless the FR2 UL gap, corresponding to the SSB which is
quasi-colocated with the selected CSI-RS; the MAC entity may take into
account the possible occurrence of measurement gaps and MUSIM gaps when
determining the next available PRACH occasion corresponding to the SSB
which is quasi-colocated with the selected CSI-RS).</p>
<p>2&gt; else:</p>
<p>3&gt; determine the next available PRACH occasion from the PRACH
occasions in <em>ra-OccasionList</em> corresponding to the selected
CSI-RS (the MAC entity shall select a PRACH occasion randomly with equal
probability amongst the PRACH occasions occurring simultaneously but on
different subcarriers regardless the FR2 UL gap, corresponding to the
selected CSI-RS; the MAC entity may take into account the possible
occurrence of measurement gaps and MUSIM gaps when determining the next
available PRACH occasion corresponding to the selected CSI-RS).</p>
<p>1&gt; perform the Random Access Preamble transmission procedure (see
clause 5.1.3).</p>
<p>NOTE 1: When the UE determines if there is an SSB with SS-RSRP above
<em>rsrp-ThresholdSSB</em> or a CSI-RS with CSI-RSRP above
<em>rsrp-ThresholdCSI-RS</em>, the UE uses the latest unfiltered L1-RSRP
measurement.</p>
<p>NOTE 2: Void.</p>
<p>NOTE 3: If a RedCap UE in RRC_IDLE or RRC_INACTIVE mode is configured
with a BWP indicated by <em>initialDownlinkBWP-RedCap</em> which is not
associated with any SSB, SS-RSRP measurement is performed based on the
SSB associated with the BWP indicated by <em>initialDownlinkBWP</em>. If
a RedCap UE in RRC_INACTIVE mode is configured with SDT and with a BWP
indicated by <em>initialDownlinkBWP-RedCap</em> which is associated with
NCD-SSB, SS-RSRP measurement can also be performed based on this NCD-SSB
during SDT.</p>
<p>NOTE 4: If a RedCap UE in RRC_IDLE or RRC_INACTIVE mode is configured
with a BWP indicated by <em>initialDownlinkBWP-RedCap</em> which is not
associated with any SSB for RACH, it is up to the UE implementation to
perform a new RSRP measurements before Msg1/MsgA retransmission.</p>
<h3 id="a-random-access-resource-selection-for-2-step-ra-type">5.1.2a
Random Access Resource selection for 2-step RA type</h3>
<p>If the selected <em>RA_TYPE</em> is set to <em>2-stepRA</em>, the MAC
entity shall:</p>
<p>1&gt; if the contention-free 2-step RA type Resources associated with
SSBs have been explicitly provided in <em>rach-ConfigDedicated</em> and
at least one SSB with SS-RSRP above <em>msgA-RSRP-ThresholdSSB</em>
amongst the associated SSBs is available:</p>
<p>2&gt; select an SSB with SS-RSRP above
<em>msgA-RSRP-ThresholdSSB</em> amongst the associated SSBs;</p>
<p>2&gt; set the <em>PREAMBLE_INDEX</em> to a <em>ra-PreambleIndex</em>
corresponding to the selected SSB.</p>
<p>1&gt; else (i.e. for the contention-based Random Access Preamble
selection):</p>
<p>2&gt; if at least one of the SSBs with SS-RSRP above
<em>msgA-RSRP-ThresholdSSB</em> is available:</p>
<p>3&gt; select an SSB with SS-RSRP above
<em>msgA-RSRP-ThresholdSSB</em>.</p>
<p>2&gt; else:</p>
<p>3&gt; select any SSB.</p>
<p>2&gt; if contention-free Random Access Resources for 2-step RA type
have not been configured and if Random Access Preambles group has not
yet been selected during the current Random Access procedure:</p>
<p>3&gt; if Random Access Preambles group B for 2-step RA type is
configured:</p>
<p>4&gt; if the potential MSGA payload size (UL data available for
transmission plus MAC subheader and, where required, MAC CEs) is greater
than the <em>ra-MsgA-SizeGroupA</em> and the pathloss is less than
<em>PCMAX</em> (of the Serving Cell performing the Random Access
Procedure) – <em>msgA-PreambleReceivedTargetPower</em> –
<em>msgA-DeltaPreamble</em> – <em>messagePowerOffsetGroupB</em>; or</p>
<p>4&gt; if the Random Access procedure was initiated for the CCCH
logical channel and the CCCH SDU size plus MAC subheader is greater than
<em>ra-MsgA-SizeGroupA</em>:</p>
<p>5&gt; select the Random Access Preambles group B.</p>
<p>4&gt; else:</p>
<p>5&gt; select the Random Access Preambles group A.</p>
<p>3&gt; else:</p>
<p>4&gt; select the Random Access Preambles group A.</p>
<p>2&gt; else if contention-free Random Access Resources for 2-step RA
type have been configured and if Random Access Preambles group has not
yet been selected during the current Random Access procedure:</p>
<p>3&gt; if Random Access Preambles group B for 2-step RA type is
configured; and</p>
<p>3&gt; if the transport block size of the MSGA payload configured in
the <em>rach-ConfigDedicated</em> corresponds to the transport block
size of the MSGA payload associated with Random Access Preambles group
B:</p>
<p>4&gt; select the Random Access Preambles group B.</p>
<p>3&gt; else:</p>
<p>4&gt; select the Random Access Preambles group A.</p>
<p>2&gt; else (i.e. Random Access preambles group has been selected
during the current Random Access procedure):</p>
<p>3&gt; select the same group of Random Access Preambles as was used
for the Random Access Preamble transmission attempt corresponding to the
earlier transmission of MSGA.</p>
<p>2&gt; select a Random Access Preamble randomly with equal probability
from the 2-step RA type Random Access Preambles associated with the
selected SSB and the selected Random Access Preambles group;</p>
<p>2&gt; set the <em>PREAMBLE_INDEX</em> to the selected Random Access
Preamble.</p>
<p>1&gt; determine the next available PRACH occasion from the PRACH
occasions corresponding to the selected SSB permitted by the
restrictions given by the <em>msgA-SSB-SharedRO-MaskIndex</em> if
configured, or <em>ra-ssb-OccasionMaskIndex</em> if configured, or
<em>ssb-SharedRO-MaskIndex</em> if configured (the MAC entity shall
select a PRACH occasion randomly with equal probability among the
consecutive PRACH occasions allocated for 2-step RA type according to
clause 8.1 of TS 38.213 [6] regardless the FR2 UL gap, corresponding to
the selected SSB; the MAC entity may take into account the possible
occurrence of measurement gaps and MUSIM gaps when determining the next
available PRACH occasion corresponding to the selected SSB);</p>
<p>1&gt; if the Random Access Preamble was not selected by the MAC
entity among the contention-based Random Access Preamble(s):</p>
<p>2&gt; select a PUSCH occasion from the PUSCH occasions configured in
<em>msgA-CFRA-PUSCH</em> corresponding to the PRACH slot of the selected
PRACH occasion, according to <em>msgA-PUSCH-Resource-Index</em>
corresponding to the selected SSB;</p>
<p>2&gt; determine the UL grant and the associated HARQ information for
the MSGA payload in the selected PUSCH occasion;</p>
<p>2&gt; deliver the UL grant and the associated HARQ information to the
HARQ entity.</p>
<p>1&gt; else:</p>
<p>2&gt; select a PUSCH occasion corresponding to the selected preamble
and PRACH occasion according to clause 8.1A of TS 38.213 [6];</p>
<p>2&gt; determine the UL grant for the MSGA payload according to the
PUSCH configuration associated with the selected Random Access Preambles
group and determine the associated HARQ information;</p>
<p>2&gt; if the selected preamble and PRACH occasion is mapped to a
valid PUSCH occasion as specified in clause 8.1A of TS 38.213 [6]:</p>
<p>3&gt; deliver the UL grant and the associated HARQ information to the
HARQ entity.</p>
<p>1&gt; perform the MSGA transmission procedure (see clause
5.1.3a).</p>
<p>NOTE 1: To determine if there is an SSB with <em>SS-RSRP</em> above
<em>msgA-RSRP-ThresholdSSB</em>, the UE uses the latest unfiltered
<em>L1-RSRP</em> measurement.</p>
<p>NOTE 2: If a RedCap UE in RRC_IDLE or RRC_INACTIVE mode is configured
with a BWP indicated by <em>initialDownlinkBWP-RedCap</em> which is not
associated with any SSB, SS-RSRP measurement is performed based on the
SSB associated with the BWP indicated by <em>initialDownlinkBWP</em>. If
a RedCap UE in RRC_INACTIVE mode is configured with SDT and with a BWP
indicated by <em>initialDownlinkBWP-RedCap</em> which is associated with
NCD-SSB, SS-RSRP measurement can also be performed based on this NCD-SSB
during SDT.</p>
<p>NOTE 3: If a RedCap UE in RRC_IDLE or RRC_INACTIVE mode is configured
with a BWP indicated by <em>initialDownlinkBWP-RedCap</em> which is not
associated with any SSB for RACH, it is up to the UE implementation to
perform a new RSRP measurements before Msg1/MsgA retransmission.</p>
<h3 id="random-access-preamble-transmission">5.1.3 Random Access
Preamble transmission</h3>
<p>The MAC entity shall, for each Random Access Preamble:</p>
<p>1&gt; if <em>PREAMBLE_TRANSMISSION_COUNTER</em> is greater than one;
and</p>
<p>1&gt; if the notification of suspending power ramping counter has not
been received from lower layers; and</p>
<p>1&gt; if LBT failure indication was not received from lower layers
for the last Random Access Preamble transmission; and</p>
<p>1&gt; if SSB or CSI-RS selected is not changed from the selection in
the last Random Access Preamble transmission:</p>
<p>2&gt; increment <em>PREAMBLE_POWER_RAMPING_COUNTER</em> by 1.</p>
<p>1&gt; select the value of <em>DELTA_PREAMBLE</em> according to clause
7.3;</p>
<p>1&gt; set <em>PREAMBLE_RECEIVED_TARGET_POWER</em> to
<em>preambleReceivedTargetPower</em> + <em>DELTA_PREAMBLE</em> +
(<em>PREAMBLE_POWER_RAMPING_COUNTER</em> – 1) ×
<em>PREAMBLE_POWER_RAMPING_STEP</em> <em>+</em>
<em>POWER_OFFSET_2STEP_RA</em>;</p>
<p>1&gt; except for contention-free Random Access Preamble for beam
failure recovery request, compute the RA-RNTI associated with the PRACH
occasion in which the Random Access Preamble is transmitted;</p>
<p>1&gt; instruct the physical layer to transmit the Random Access
Preamble using the selected PRACH occasion, corresponding RA-RNTI (if
available), <em>PREAMBLE_INDEX</em>, and
<em>PREAMBLE_RECEIVED_TARGET_POWER</em>.</p>
<p>1&gt; if LBT failure indication is received from lower layers for
this Random Access Preamble transmission:</p>
<p>2&gt; if <em>lbt-FailureRecoveryConfig</em> is configured:</p>
<p>3&gt; perform the Random Access Resource selection procedure (see
clause 5.1.2).</p>
<p>2&gt; else:</p>
<p>3&gt; increment <em>PREAMBLE_TRANSMISSION_COUNTER</em> by 1;</p>
<p>3&gt; if <em>PREAMBLE_TRANSMISSION_COUNTER</em> =
<em>preambleTransMax</em> + 1:</p>
<p>4&gt; if the Random Access Preamble is transmitted on the SpCell:</p>
<p>5&gt; indicate a Random Access problem to upper layers;</p>
<p>5&gt; if this Random Access procedure was triggered for SI
request:</p>
<p>6&gt; consider the Random Access procedure unsuccessfully
completed.</p>
<p>4&gt; else if the Random Access Preamble is transmitted on an
SCell:</p>
<p>5&gt; consider the Random Access procedure unsuccessfully
completed.</p>
<p>3&gt; if the Random Access procedure is not completed:</p>
<p>4&gt; perform the Random Access Resource selection procedure (see
clause 5.1.2).</p>
<p>The RA-RNTI associated with the PRACH occasion in which the Random
Access Preamble is transmitted, is computed as:</p>
<p>RA-RNTI = 1 + s_id + 14 × t_id + 14 × 80 × f_id + 14 × 80 × 8 ×
ul_carrier_id</p>
<p>where s_id is the index of the first OFDM symbol of the PRACH
occasion (0 ≤ s_id &lt; 14), t_id is the index of the first slot of the
PRACH occasion in a system frame (0 ≤ t_id &lt; 80), where the
subcarrier spacing to determine t_id is based on the value of μ
specified in clause 5.3.2 in TS 38.211 [8] for μ = {0, 1, 2, 3}, and for
μ = {5, 6}, t_id is the index of the 120 kHz slot in a system frame that
contains the PRACH occasion (0 ≤ t_id &lt; 80), f_id is the index of the
PRACH occasion in the frequency domain (0 ≤ f_id &lt; 8), and
ul_carrier_id is the UL carrier used for Random Access Preamble
transmission (0 for NUL carrier, and 1 for SUL carrier).</p>
<h3 id="a-msga-transmission">5.1.3a MSGA transmission</h3>
<p>The MAC entity shall, for each MSGA:</p>
<p>1&gt; if <em>PREAMBLE_TRANSMISSION_COUNTER</em> is greater than one;
and</p>
<p>1&gt; if the notification of suspending power ramping counter has not
been received from lower layers; and</p>
<p>1&gt; if LBT failure indication was not received from lower layers
for the last MSGA Random Access Preamble transmission; and</p>
<p>1&gt; if SSB selected is not changed from the selection in the last
Random Access Preamble transmission:</p>
<p>2&gt; increment <em>PREAMBLE_POWER_RAMPING_COUNTER</em> by 1.</p>
<p>1&gt; select the value of <em>DELTA_PREAMBLE</em> according to clause
7.3;</p>
<p>1&gt; set <em>PREAMBLE_RECEIVED_TARGET_POWER</em> to
<em>msgA-PreambleReceivedTargetPower</em> + <em>DELTA_PREAMBLE</em> +
(<em>PREAMBLE_POWER_RAMPING_COUNTER</em> – 1) ×
<em>PREAMBLE_POWER_RAMPING_STEP</em>;</p>
<p>1&gt; if this is the first MSGA transmission within this Random
Access procedure:</p>
<p>2&gt; if the transmission is not being made for the CCCH logical
channel:</p>
<p>3&gt; indicate to the Multiplexing and assembly entity to include a
C-RNTI MAC CE in the subsequent uplink transmission.</p>
<p>2&gt; if the Random Access procedure was initiated for SpCell beam
failure recovery and <em>spCell-BFR-CBRA</em> with value <em>true</em>
is configured:</p>
<p>3&gt; if there is at least one Serving Cell of this MAC entity
configured with two BFD-RS sets:</p>
<p>4&gt; indicate to the Multiplexing and assembly entity to include an
Enhanced BFR MAC CE or a Truncated Enhanced BFR MAC CE in the subsequent
uplink transmission.</p>
<p>3&gt; else:</p>
<p>4&gt; indicate to the Multiplexing and assembly entity to include a
BFR MAC CE or a Truncated BFR MAC CE in the subsequent uplink
transmission.</p>
<p>2&gt; else if the Random Access procedure was initiated for beam
failure recovery of both BFD-RS sets of SpCell:</p>
<p>3&gt; indicate to the Multiplexing and assembly entity to include an
Enhanced BFR MAC CE or a Truncated Enhanced BFR MAC CE in the subsequent
uplink transmission.</p>
<p>2&gt; obtain the MAC PDU to transmit from the Multiplexing and
assembly entity according to the HARQ information determined for the
MSGA payload (see clause 5.1.2a) and store it in the MSGA buffer.</p>
<p>1&gt; compute the MSGB-RNTI associated with the PRACH occasion in
which the Random Access Preamble is transmitted;</p>
<p>1&gt; instruct the physical layer to transmit the MSGA using the
selected PRACH occasion and the associated PUSCH resource of MSGA (if
the selected preamble and PRACH occasion is mapped to a valid PUSCH
occasion), using the corresponding RA-RNTI, MSGB-RNTI,
<em>PREAMBLE_INDEX</em>, <em>PREAMBLE_RECEIVED_TARGET_POWER</em>,
<em>msgA-PreambleReceivedTargetPower</em>, and the amount of power
ramping applied to the latest MSGA preamble transmission (i.e.
(<em>PREAMBLE_POWER_RAMPING_COUNTER</em> – 1) ×
<em>PREAMBLE_POWER_RAMPING_STEP</em>);</p>
<p>1&gt; if LBT failure indication is received from lower layers for the
transmission of this MSGA Random Access Preamble:</p>
<p>2&gt; instruct the physical layer to cancel the transmission of the
MSGA payload on the associated PUSCH resource;</p>
<p>2&gt; if <em>lbt-FailureRecoveryConfig</em> is configured:</p>
<p>3&gt; perform the Random Access Resource selection procedure for
2-step RA type (see clause 5.1.2a).</p>
<p>2&gt; else:</p>
<p>3&gt; increment <em>PREAMBLE_TRANSMISSION_COUNTER</em> by 1;</p>
<p>3&gt; if <em>PREAMBLE_TRANSMISSION_COUNTE</em>R =
<em>preambleTransMax</em> + 1:</p>
<p>4&gt; indicate a Random Access problem to upper layers;</p>
<p>4&gt; if this Random Access procedure was triggered for SI
request:</p>
<p>5&gt; consider this Random Access procedure unsuccessfully
completed.</p>
<p>3&gt; if the Random Access procedure is not completed:</p>
<p>4&gt; if <em>msgA-TransMax</em> is applied (see clause 5.1.1a) and
<em>PREAMBLE_TRANSMISSION_COUNTER</em> = <em>msgA-TransMax</em> + 1:</p>
<p>5&gt; set the <em>RA_TYPE</em> to <em>4-stepRA</em>;</p>
<p>5&gt; perform initialization of variables specific to Random Access
type as specified in clause 5.1.1a;</p>
<p>5&gt; if the Msg3 buffer is empty:</p>
<p>6&gt; obtain the MAC PDU to transmit from the MSGA buffer and store
it in the Msg3 buffer;</p>
<p>5&gt; flush HARQ buffer used for the transmission of MAC PDU in the
MSGA buffer;</p>
<p>5&gt; discard explicitly signalled contention-free 2-step RA type
Random Access Resources, if any;</p>
<p>5&gt; perform the Random Access Resource selection procedure as
specified in clause 5.1.2.</p>
<p>4&gt; else:</p>
<p>5&gt; perform the Random Access Resource selection procedure for
2-step RA type (see clause 5.1.2a).</p>
<p>NOTE: The MSGA transmission includes the transmission of the PRACH
Preamble as well as the contents of the MSGA buffer in the PUSCH
resource corresponding to the selected PRACH occasion and
<em>PREAMBLE_INDEX</em> (see TS 38.213 [6])</p>
<p>The MSGB-RNTI associated with the PRACH occasion in which the Random
Access Preamble is transmitted, is computed as:</p>
<p>MSGB-RNTI = 1 + s_id + 14 × t_id + 14 × 80 × f_id + 14 × 80 × 8 ×
ul_carrier_id + 14 × 80 × 8 × 2</p>
<p>where s_id is the index of the first OFDM symbol of the PRACH
occasion (0 ≤ s_id &lt; 14), t_id is the index of the first slot of the
PRACH occasion in a system frame (0 ≤ t_id &lt; 80), where the
subcarrier spacing to determine t_id is based on the value of μ
specified in clause 5.3.2 in TS 38.211 [8] for μ = {0, 1, 2, 3}, and for
μ = {5, 6}, t_id is the index of the 120 kHz slot in a system frame that
contains the PRACH occasion (0 ≤ t_id &lt; 80), f_id is the index of the
PRACH occasion in the frequency domain (0 ≤ f_id &lt; 8), and
ul_carrier_id is the UL carrier used for Random Access Preamble
transmission (0 for NUL carrier, and 1 for SUL carrier). The RA-RNTI is
calculated as specified in clause 5.1.3.</p>
<h3 id="random-access-response-reception">5.1.4 Random Access Response
reception</h3>
<p>Once the Random Access Preamble is transmitted and regardless of the
possible occurrence of a measurement gap, the MAC entity shall:</p>
<p>1&gt; if the contention-free Random Access Preamble for beam failure
recovery request was transmitted by the MAC entity:</p>
<p>2&gt; if the contention-free Random Access Preamble for beam failure
recovery request was transmitted on a non-terrestrial network:</p>
<p>3&gt; start the <em>ra-ResponseWindow</em> configured in
<em>BeamFailureRecoveryConfig</em> at the PDCCH occasion as specified in
TS 38.213 [6].</p>
<p>2&gt; else:</p>
<p>3&gt; start the <em>ra-ResponseWindow</em> configured in
<em>BeamFailureRecoveryConfig</em> at the first PDCCH occasion as
specified in TS 38.213 [6] from the end of the Random Access Preamble
transmission.</p>
<p>2&gt; monitor for a PDCCH transmission on the search space indicated
by <em>recoverySearchSpaceId</em> of the SpCell identified by the C-RNTI
while <em>ra-ResponseWindow</em> is running.</p>
<p>1&gt; else:</p>
<p>2&gt; if the Random Access Preamble was transmitted on a
non-terrestrial network:</p>
<p>3&gt; start the <em>ra-ResponseWindow</em> configured in
<em>RACH-ConfigCommon</em> at the PDCCH occasion as specified in TS
38.213 [6].</p>
<p>2&gt; else:</p>
<p>3&gt; start the <em>ra-ResponseWindow</em> configured in
<em>RACH-ConfigCommon</em> at the first PDCCH occasion as specified in
TS 38.213 [6] from the end of the Random Access Preamble
transmission.</p>
<p>2&gt; monitor the PDCCH of the SpCell for Random Access Response(s)
identified by the RA-RNTI while the <em>ra-ResponseWindow</em> is
running.</p>
<p>1&gt; if notification of a reception of a PDCCH transmission on the
search space indicated by <em>recoverySearchSpaceId</em> is received
from lower layers on the Serving Cell where the preamble was
transmitted; and</p>
<p>1&gt; if PDCCH transmission is addressed to the C-RNTI; and</p>
<p>1&gt; if the contention-free Random Access Preamble for beam failure
recovery request was transmitted by the MAC entity:</p>
<p>2&gt; consider the Random Access procedure successfully
completed.</p>
<p>1&gt; else if a valid (as specified in TS 38.213 [6]) downlink
assignment has been received on the PDCCH for the RA-RNTI and the
received TB is successfully decoded:</p>
<p>2&gt; if the Random Access Response contains a MAC subPDU with
Backoff Indicator:</p>
<p>3&gt; set the <em>PREAMBLE_BACKOFF</em> to value of the BI field of
the MAC subPDU using Table 7.2-1, multiplied with
<em>SCALING_FACTOR_BI</em>.</p>
<p>2&gt; else:</p>
<p>3&gt; set the <em>PREAMBLE_BACKOFF</em> to 0 ms.</p>
<p>2&gt; if the Random Access Response contains a MAC subPDU with Random
Access Preamble identifier corresponding to the transmitted
<em>PREAMBLE_INDEX</em> (see clause 5.1.3):</p>
<p>3&gt; consider this Random Access Response reception successful.</p>
<p>2&gt; if the Random Access Response reception is considered
successful:</p>
<p>3&gt; if the Random Access Response includes a MAC subPDU with RAPID
only:</p>
<p>4&gt; consider this Random Access procedure successfully
completed;</p>
<p>4&gt; indicate the reception of an acknowledgement for SI request to
upper layers.</p>
<p>3&gt; else:</p>
<p>4&gt; apply the following actions for the Serving Cell where the
Random Access Preamble was transmitted:</p>
<p>5&gt; process the received Timing Advance Command (see clause
5.2);</p>
<p>5&gt; indicate the <em>preambleReceivedTargetPower</em> and the
amount of power ramping applied to the latest Random Access Preamble
transmission to lower layers (i.e.
(<em>PREAMBLE_POWER_RAMPING_COUNTER</em> – 1) ×
<em>PREAMBLE_POWER_RAMPING_STEP</em>);</p>
<p>5&gt; if the Random Access procedure for an SCell is performed on
uplink carrier where <em>pusch-Config</em> is not configured:</p>
<p>6&gt; ignore the received UL grant.</p>
<p>5&gt; else:</p>
<p>6&gt; process the received UL grant value and indicate it to the
lower layers.</p>
<p>4&gt; if the Random Access Preamble was not selected by the MAC
entity among the contention-based Random Access Preamble(s):</p>
<p>5&gt; consider the Random Access procedure successfully
completed.</p>
<p>4&gt; else:</p>
<p>5&gt; set the <em>TEMPORARY_C-RNTI</em> to the value received in the
Random Access Response;</p>
<p>5&gt; if this is the first successfully received Random Access
Response within this Random Access procedure:</p>
<p>6&gt; if the transmission is not being made for the CCCH logical
channel:</p>
<p>7&gt; indicate to the Multiplexing and assembly entity to include a
C-RNTI MAC CE in the subsequent uplink transmission.</p>
<p>6&gt; if the Random Access procedure was initiated for SpCell beam
failure recovery and <em>spCell-BFR-CBRA</em> with value <em>true</em>
is configured:</p>
<p>7&gt; if there is at least one Serving Cell of this MAC entity
configured with two BFD-RS sets:</p>
<p>8&gt; indicate to the Multiplexing and assembly entity to include an
Enhanced BFR MAC CE or a Truncated Enhanced BFR MAC CE in the subsequent
uplink transmission.</p>
<p>7&gt; else:</p>
<p>8&gt; indicate to the Multiplexing and assembly entity to include a
BFR MAC CE or a Truncated BFR MAC CE in the subsequent uplink
transmission.</p>
<p>6&gt; else if the Random Access procedure was initiated for beam
failure recovery of both BFD-RS sets of SpCell:</p>
<p>7&gt; indicate to the Multiplexing and assembly entity to include an
Enhanced BFR MAC CE or a Truncated Enhanced BFR MAC CE in the subsequent
uplink transmission.</p>
<p>6&gt; obtain the MAC PDU to transmit from the Multiplexing and
assembly entity and store it in the Msg3 buffer.</p>
<p>NOTE: If within a Random Access procedure, an uplink grant provided
in the Random Access Response for the same group of contention-based
Random Access Preambles has a different size than the first uplink grant
allocated during that Random Access procedure, the UE behavior is not
defined.</p>
<p>1&gt; if <em>ra-ResponseWindow</em> configured in
<em>BeamFailureRecoveryConfig</em> expires and if a PDCCH transmission
on the search space indicated by <em>recoverySearchSpaceId</em>
addressed to the C-RNTI has not been received on the Serving Cell where
the preamble was transmitted; or</p>
<p>1&gt; if <em>ra-ResponseWindow</em> configured in
<em>RACH-ConfigCommon</em> expires, and if the Random Access Response
containing Random Access Preamble identifiers that matches the
transmitted <em>PREAMBLE_INDEX</em> has not been received:</p>
<p>2&gt; consider the Random Access Response reception not
successful;</p>
<p>2&gt; increment <em>PREAMBLE_TRANSMISSION_COUNTER</em> by 1;</p>
<p>2&gt; if <em>PREAMBLE_TRANSMISSION_COUNTER</em> =
<em>preambleTransMax</em> + 1:</p>
<p>3&gt; if the Random Access Preamble is transmitted on the SpCell:</p>
<p>4&gt; indicate a Random Access problem to upper layers;</p>
<p>4&gt; if this Random Access procedure was triggered for SI
request:</p>
<p>5&gt; consider the Random Access procedure unsuccessfully
completed.</p>
<p>3&gt; else if the Random Access Preamble is transmitted on an
SCell:</p>
<p>4&gt; consider the Random Access procedure unsuccessfully
completed.</p>
<p>2&gt; if the Random Access procedure is not completed:</p>
<p>3&gt; select a random backoff time according to a uniform
distribution between 0 and the <em>PREAMBLE_BACKOFF</em>;</p>
<p>3&gt; if the criteria (as defined in clause 5.1.2) to select
contention-free Random Access Resources is met during the backoff
time:</p>
<p>4&gt; perform the Random Access Resource selection procedure (see
clause 5.1.2).</p>
<p>3&gt; else if the Random Access procedure for an SCell is performed
on uplink carrier where <em>pusch-Config</em> is not configured:</p>
<p>4&gt; delay the subsequent Random Access transmission until the
Random Access Procedure is triggered by a PDCCH order with the same
<em>ra-PreambleIndex</em>, <em>ra-ssb-OccasionMaskIndex</em>, and UL/SUL
indicator TS 38.212 [9].</p>
<p>3&gt; else:</p>
<p>4&gt; perform the Random Access Resource selection procedure (see
clause 5.1.2) after the backoff time.</p>
<p>The MAC entity may stop <em>ra-ResponseWindow</em> (and hence
monitoring for Random Access Response(s)) after successful reception of
a Random Access Response containing Random Access Preamble identifiers
that matches the transmitted <em>PREAMBLE_INDEX</em>.</p>
<p>HARQ operation is not applicable to the Random Access Response
reception.</p>
<h3
id="a-msgb-reception-and-contention-resolution-for-2-step-ra-type">5.1.4a
MSGB reception and contention resolution for 2-step RA type</h3>
<p>Once the MSGA preamble is transmitted, regardless of the possible
occurrence of a measurement gap, the MAC entity shall:</p>
<p>1&gt; start the <em>msgB-ResponseWindow</em> at the PDCCH occasion as
specified in TS 38.213 [6], clause 8.2A;</p>
<p>1&gt; monitor the PDCCH of the SpCell for a Random Access Response
identified by MSGB-RNTI while the <em>msgB-ResponseWindow</em> is
running;</p>
<p>1&gt; if C-RNTI MAC CE was included in the MSGA:</p>
<p>2&gt; monitor the PDCCH of the SpCell for Random Access Response
identified by the C-RNTI while the <em>msgB-ResponseWindow</em> is
running.</p>
<p>1&gt; if notification of a reception of a PDCCH transmission of the
SpCell is received from lower layers:</p>
<p>2&gt; if the C-RNTI MAC CE was included in MSGA:</p>
<p>3&gt; if the Random Access procedure was initiated for SpCell beam
failure recovery or for beam failure recovery of both BFD-RS sets of
SpCell (as specified in clause 5.17) and the PDCCH transmission is
addressed to the C-RNTI:</p>
<p>4&gt; consider this Random Access Response reception successful;</p>
<p>4&gt; stop the <em>msgB-ResponseWindow</em>;</p>
<p>4&gt; consider this Random Access procedure successfully
completed.</p>
<p>3&gt; else if the <em>timeAlignmentTimer</em> associated with the
PTAG is running; or</p>
<p>3&gt; if CG-SDT procedure is ongoing and
<em>cg-SDT-TimeAlignmentTimer</em> is running:</p>
<p>4&gt; if the PDCCH transmission is addressed to the C-RNTI and
contains a UL grant for a new transmission:</p>
<p>5&gt; consider this Random Access Response reception successful;</p>
<p>5&gt; stop the <em>msgB-ResponseWindow</em>;</p>
<p>5&gt; consider this Random Access procedure successfully
completed.</p>
<p>3&gt; else:</p>
<p>4&gt; if a downlink assignment has been received on the PDCCH for the
C-RNTI and the received TB is successfully decoded:</p>
<p>5&gt; if the MAC PDU contains the Absolute Timing Advance Command MAC
CE:</p>
<p>6&gt; process the received Timing Advance Command (see clause
5.2);</p>
<p>6&gt; consider this Random Access Response reception successful;</p>
<p>6&gt; stop the <em>msgB-ResponseWindow</em>;</p>
<p>6&gt; consider this Random Access procedure successfully completed
and finish the disassembly and demultiplexing of the MAC PDU.</p>
<p>2&gt; if a valid (as specified in TS 38.213 [6]) downlink assignment
has been received on the PDCCH for the MSGB-RNTI and the received TB is
successfully decoded:</p>
<p>3&gt; if the MSGB contains a MAC subPDU with Backoff Indicator:</p>
<p>4&gt; set the <em>PREAMBLE_BACKOFF</em> to value of the BI field of
the MAC subPDU using Table 7.2-1, multiplied with
<em>SCALING_FACTOR_BI</em>.</p>
<p>3&gt; else:</p>
<p>4&gt; set the <em>PREAMBLE_BACKOFF</em> to 0 ms.</p>
<p>3&gt; if the MSGB contains a fallbackRAR MAC subPDU; and</p>
<p>3&gt; if the Random Access Preamble identifier in the MAC subPDU
matches the transmitted <em>PREAMBLE_INDEX</em> (see clause 5.1.3a):</p>
<p>4&gt; consider this Random Access Response reception successful;</p>
<p>4&gt; apply the following actions for the SpCell:</p>
<p>5&gt; process the received Timing Advance Command (see clause
5.2);</p>
<p>5&gt; indicate the <em>msgA-PreambleReceivedTargetPower</em> and the
amount of power ramping applied to the latest Random Access Preamble
transmission to lower layers (i.e.
(<em>PREAMBLE_POWER_RAMPING_COUNTER</em> – 1) ×
<em>PREAMBLE_POWER_RAMPING_STEP</em>);</p>
<p>5&gt; if the Random Access Preamble was not selected by the MAC
entity among the contention-based Random Access Preamble(s):</p>
<p>6&gt; consider the Random Access procedure successfully
completed;</p>
<p>6&gt; process the received UL grant value and indicate it to the
lower layers.</p>
<p>5&gt; else:</p>
<p>6&gt; set the <em>TEMPORARY_C-RNTI</em> to the value received in the
Random Access Response;</p>
<p>6&gt; if the Msg3 buffer is empty:</p>
<p>7&gt; obtain the MAC PDU to transmit from the MSGA buffer and store
it in the Msg3 buffer;</p>
<p>6&gt; process the received UL grant value and indicate it to the
lower layers and proceed with Msg3 transmission.</p>
<p>NOTE: If within a 2-step RA type procedure, an uplink grant provided
in the fallback RAR has a different size than the MSGA payload, the UE
behavior is not defined.</p>
<p>3&gt; else if the MSGB contains a successRAR MAC subPDU; and</p>
<p>3&gt; if the CCCH SDU was included in the MSGA and the UE Contention
Resolution Identity in the MAC subPDU matches the CCCH SDU:</p>
<p>4&gt; stop <em>msgB-ResponseWindow</em>;</p>
<p>4&gt; if this Random Access procedure was initiated for SI
request:</p>
<p>5&gt; indicate the reception of an acknowledgement for SI request to
upper layers.</p>
<p>4&gt; else:</p>
<p>5&gt; set the C-RNTI to the value received in the
<em>successRAR</em>;</p>
<p>5&gt; apply the following actions for the SpCell:</p>
<p>6&gt; process the received Timing Advance Command (see clause
5.2);</p>
<p>6&gt; indicate the <em>msgA-PreambleReceivedTargetPower</em> and the
amount of power ramping applied to the latest Random Access Preamble
transmission to lower layers (i.e.
(<em>PREAMBLE_POWER_RAMPING_COUNTER</em> – 1) ×
<em>PREAMBLE_POWER_RAMPING_STEP</em>).</p>
<p>4&gt; deliver the <em>TPC</em>, <em>PUCCH resource Indicator</em>,
<em>ChannelAccess-CPext</em> (if indicated), and <em>HARQ feedback
Timing Indicator</em> received in successRAR to lower layers.</p>
<p>4&gt; consider this Random Access Response reception successful;</p>
<p>4&gt; consider this Random Access procedure successfully
completed;</p>
<p>4&gt; finish the disassembly and demultiplexing of the MAC PDU.</p>
<p>1&gt; if <em>msgB-ResponseWindow</em> expires, and the Random Access
Response Reception has not been considered as successful based on
descriptions above:</p>
<p>2&gt; increment <em>PREAMBLE_TRANSMISSION_COUNTER</em> by 1;</p>
<p>2&gt; if <em>PREAMBLE_TRANSMISSION_COUNTER</em> =
<em>preambleTransMax</em> + 1:</p>
<p>3&gt; indicate a Random Access problem to upper layers;</p>
<p>3&gt; if this Random Access procedure was triggered for SI
request:</p>
<p>4&gt; consider this Random Access procedure unsuccessfully
completed.</p>
<p>2&gt; if the Random Access procedure is not completed:</p>
<p>3&gt; if <em>msgA-TransMax</em> is applied (see clause 5.1.1a) and
<em>PREAMBLE_TRANSMISSION_COUNTER</em> = <em>msgA-TransMax</em> + 1:</p>
<p>4&gt; set the <em>RA_TYPE</em> to <em>4-stepRA</em>;</p>
<p>4&gt; perform initialization of variables specific to Random Access
type as specified in clause 5.1.1a;</p>
<p>4&gt; if the Msg3 buffer is empty:</p>
<p>5&gt; obtain the MAC PDU to transmit from the MSGA buffer and store
it in the Msg3 buffer;</p>
<p>4&gt; flush HARQ buffer used for the transmission of MAC PDU in the
MSGA buffer;</p>
<p>4&gt; discard explicitly signalled contention-free 2-step RA type
Random Access Resources, if any;</p>
<p>4&gt; perform the Random Access Resource selection procedure as
specified in clause 5.1.2.</p>
<p>3&gt; else:</p>
<p>4&gt; select a random backoff time according to a uniform
distribution between 0 and the <em>PREAMBLE_BACKOFF</em>;</p>
<p>4&gt; if the criteria (as defined in clause 5.1.2a) to select
contention-free Random Access Resources is met during the backoff
time:</p>
<p>5&gt; perform the Random Access Resource selection procedure for
2-step RA type Random Access (see clause 5.1.2a).</p>
<p>4&gt; else:</p>
<p>5&gt; perform the Random Access Resource selection procedure for
2-step RA type Random Access (see clause 5.1.2a) after the backoff
time.</p>
<p>Upon receiving a fallbackRAR, the MAC entity may stop
<em>msgB-ResponseWindow</em> once the Random Access Response reception
is considered as successful.</p>
<h3 id="contention-resolution">5.1.5 Contention Resolution</h3>
<p>Once Msg3 is transmitted the MAC entity shall:</p>
<p>1&gt; if the Msg3 transmission (i.e. initial transmission or HARQ
retransmission) is scheduled with PUSCH repetition Type A:</p>
<p>2&gt; if Msg3 is transmitted on a non-terrestrial network:</p>
<p>3&gt; start or restart the <em>ra-ContentionResolutionTimer</em> in
the first symbol after the end of all repetitions of the Msg3
transmission plus the UE-gNB RTT.</p>
<p>2&gt; else:</p>
<p>3&gt; start or restart the <em>ra-ContentionResolutionTimer</em> in
the first symbol after the end of all repetitions of the Msg3
transmission.</p>
<p>1&gt; else if Msg3 transmission (i.e. initial transmission or HARQ
retransmission) is transmitted on a non-terrestrial network:</p>
<p>2&gt; start or restart the <em>ra-ContentionResolutionTimer</em> in
the first symbol after the end of the Msg3 transmission plus the UE-gNB
RTT.</p>
<p>1&gt; else:</p>
<p>2&gt; start or restart the <em>ra-ContentionResolutionTimer</em> in
the first symbol after the end of the Msg3 transmission.</p>
<p>1&gt; monitor the PDCCH while the
<em>ra-ContentionResolutionTimer</em> is running regardless of the
possible occurrence of a measurement gap;</p>
<p>1&gt; if notification of a reception of a PDCCH transmission of the
SpCell is received from lower layers:</p>
<p>2&gt; if the C-RNTI MAC CE was included in Msg3:</p>
<p>3&gt; if the Random Access procedure was initiated for SpCell beam
failure recovery or for beam failure recovery of both BFD-RS sets of
SpCell (as specified in clause 5.17) and the PDCCH transmission is
addressed to the C-RNTI; or</p>
<p>3&gt; if the Random Access procedure was initiated by a PDCCH order
and the PDCCH transmission is addressed to the C-RNTI; or</p>
<p>3&gt; if the Random Access procedure was initiated by the MAC
sublayer itself or by the RRC sublayer and the PDCCH transmission is
addressed to the C-RNTI and contains a UL grant for a new
transmission:</p>
<p>4&gt; consider this Contention Resolution successful;</p>
<p>4&gt; stop <em>ra-ContentionResolutionTimer</em>;</p>
<p>4&gt; discard the <em>TEMPORARY_C-RNTI</em>;</p>
<p>4&gt; consider this Random Access procedure successfully
completed.</p>
<p>2&gt; else if the CCCH SDU was included in Msg3 and the PDCCH
transmission is addressed to its <em>TEMPORARY_C-RNTI</em>:</p>
<p>3&gt; if the MAC PDU is successfully decoded:</p>
<p>4&gt; stop <em>ra-ContentionResolutionTimer</em>;</p>
<p>4&gt; if the MAC PDU contains a UE Contention Resolution Identity MAC
CE; and</p>
<p>4&gt; if the UE Contention Resolution Identity in the MAC CE matches
the CCCH SDU transmitted in Msg3:</p>
<p>5&gt; consider this Contention Resolution successful and finish the
disassembly and demultiplexing of the MAC PDU;</p>
<p>5&gt; if this Random Access procedure was initiated for SI
request:</p>
<p>6&gt; indicate the reception of an acknowledgement for SI request to
upper layers.</p>
<p>5&gt; else:</p>
<p>6&gt; set the C-RNTI to the value of the
<em>TEMPORARY_C-RNTI</em>;</p>
<p>5&gt; discard the <em>TEMPORARY_C-RNTI</em>;</p>
<p>5&gt; consider this Random Access procedure successfully
completed.</p>
<p>4&gt; else:</p>
<p>5&gt; discard the <em>TEMPORARY_C-RNTI</em>;</p>
<p>5&gt; consider this Contention Resolution not successful and discard
the successfully decoded MAC PDU.</p>
<p>1&gt; if <em>ra-ContentionResolutionTimer</em> expires:</p>
<p>2&gt; if Msg3 transmission was transmitted on a non-terrestrial
network:</p>
<p>3&gt; if no PDCCH addressed to TC-RNTI indicating uplink grant for a
Msg3 retransmission is received after the start of the
<em>ra-ContentionResolutionTimer</em>:</p>
<p>4&gt; discard the <em>TEMPORARY_C-RNTI</em>;</p>
<p>4&gt; consider the Contention Resolution not successful.</p>
<p>2&gt; else:</p>
<p>3&gt; discard the <em>TEMPORARY_C-RNTI</em>;</p>
<p>3&gt; consider the Contention Resolution not successful.</p>
<p>1&gt; if the Contention Resolution is considered not successful:</p>
<p>2&gt; flush the HARQ buffer used for transmission of the MAC PDU in
the Msg3 buffer;</p>
<p>2&gt; increment <em>PREAMBLE_TRANSMISSION_COUNTER</em> by 1;</p>
<p>2&gt; if <em>PREAMBLE_TRANSMISSION_COUNTER</em> =
<em>preambleTransMax</em> + 1:</p>
<p>3&gt; indicate a Random Access problem to upper layers.</p>
<p>3&gt; if this Random Access procedure was triggered for SI
request:</p>
<p>4&gt; consider the Random Access procedure unsuccessfully
completed.</p>
<p>2&gt; if the Random Access procedure is not completed:</p>
<p>3&gt; if the <em>RA_TYPE</em> is set to <em>4-stepRA</em>:</p>
<p>4&gt; select a random backoff time according to a uniform
distribution between 0 and the <em>PREAMBLE_BACKOFF</em>;</p>
<p>4&gt; if the criteria (as defined in clause 5.1.2) to select
contention-free Random Access Resources is met during the backoff
time:</p>
<p>5&gt; perform the Random Access Resource selection procedure (see
clause 5.1.2);</p>
<p>4&gt; else:</p>
<p>5&gt; perform the Random Access Resource selection procedure (see
clause 5.1.2) after the backoff time.</p>
<p>3&gt; else (i.e. the <em>RA_TYPE</em> is set to
<em>2-stepRA</em>):</p>
<p>4&gt; if <em>msgA-TransMax</em> is applied (see clause 5.1.1a) and
<em>PREAMBLE_TRANSMISSION_COUNTER</em> = <em>msgA-TransMax</em> + 1:</p>
<p>5&gt; set the <em>RA_TYPE</em> to <em>4-stepRA</em>;</p>
<p>5&gt; perform initialization of variables specific to Random Access
type as specified in clause 5.1.1a;</p>
<p>5&gt; flush HARQ buffer used for the transmission of MAC PDU in the
MSGA buffer;</p>
<p>5&gt; discard explicitly signalled contention-free 2-step RA type
Random Access Resources, if any;</p>
<p>5&gt; perform the Random Access Resource selection as specified in
clause 5.1.2.</p>
<p>4&gt; else:</p>
<p>5&gt; select a random backoff time according to a uniform
distribution between 0 and the <em>PREAMBLE_BACKOFF</em>;</p>
<p>5&gt; if the criteria (as defined in clause 5.1.2a) to select
contention-free Random Access Resources is met during the backoff
time:</p>
<p>6&gt; perform the Random Access Resource selection procedure for
2-step RA type as specified in clause 5.1.2a.</p>
<p>5&gt; else:</p>
<p>6&gt; perform the Random Access Resource selection for 2-step RA type
procedure (see clause 5.1.2a) after the backoff time.</p>
<h3 id="completion-of-the-random-access-procedure">5.1.6 Completion of
the Random Access procedure</h3>
<p>Upon completion of the Random Access procedure, the MAC entity
shall:</p>
<p>1&gt; discard any explicitly signalled contention-free Random Access
Resources for 2-step RA type and 4-step RA type except the 4-step RA
type contention-free Random Access Resources for beam failure recovery
request, if any;</p>
<p>1&gt; flush the HARQ buffer used for transmission of the MAC PDU in
the Msg3 buffer and the MSGA buffer.</p>
<p>Upon successful completion of the Random Access procedure initiated
for DAPS handover, the target MAC entity shall:</p>
<p>1&gt; indicate the successful completion of the Random Access
procedure to the upper layers.</p>
<h2 id="maintenance-of-uplink-time-alignment">5.2 Maintenance of Uplink
Time Alignment</h2>
<p>RRC configures the following parameters for the maintenance of UL
time alignment:</p>
<p>- <em>timeAlignmentTimer</em> (per TAG) which controls how long the
MAC entity considers the Serving Cells belonging to the associated TAG
to be uplink time aligned;</p>
<p>- <em>inactivePosSRS-TimeAlignmentTimer</em> which controls how long
the MAC entity considers the Positioning SRS transmission in
RRC_INACTIVE in clause 5.26 to be uplink time aligned;</p>
<p>- <em>cg-SDT-TimeAlignmentTimer</em> which controls how long the MAC
entity considers the uplink transmission for CG-SDT to be uplink time
aligned.</p>
<p>The MAC entity shall:</p>
<p>1&gt; when a Timing Advance Command MAC CE is received, and if an
N<sub>TA</sub> (as defined in TS 38.211 [8]) has been maintained with
the indicated TAG:</p>
<p>2&gt; apply the Timing Advance Command for the indicated TAG;</p>
<p>2&gt; if there is ongoing Positioning SRS Transmission in
RRC_INACTIVE as in clause 5.26:</p>
<p>3&gt; start or restart the <em>inactivePosSRS-TimeAlignmentTimer</em>
associated with the indicated TAG.</p>
<p>2&gt; if CG-SDT procedure triggered as in clause 5.27 is ongoing:</p>
<p>3&gt; start or restart the <em>cg-SDT-TimeAlignmentTimer</em>
associated with the indicated TAG.</p>
<p>2&gt; else:</p>
<p>3&gt; start or restart the <em>timeAlignmentTimer</em> associated
with the indicated TAG.</p>
<p>1&gt; when a Timing Advance Command is received in a Random Access
Response message for a Serving Cell belonging to a TAG or in a MSGB for
an SpCell:</p>
<p>2&gt; if the Random Access Preamble was not selected by the MAC
entity among the contention-based Random Access Preamble:</p>
<p>3&gt; apply the Timing Advance Command for this TAG;</p>
<p>3&gt; start or restart the <em>timeAlignmentTimer</em> associated
with this TAG.</p>
<p>2&gt; else if the <em>timeAlignmentTimer</em> associated with this
TAG is not running:</p>
<p>3&gt; apply the Timing Advance Command for this TAG;</p>
<p>3&gt; start the <em>timeAlignmentTimer</em> associated with this
TAG;</p>
<p>3&gt; when the Contention Resolution is considered not successful as
described in clause 5.1.5; or</p>
<p>3&gt; when the Contention Resolution is considered successful for SI
request as described in clause 5.1.5, after transmitting HARQ feedback
for MAC PDU including UE Contention Resolution Identity MAC CE:</p>
<p>4&gt; stop <em>timeAlignmentTimer</em> associated with this TAG.</p>
<p>3&gt; when the Contention Resolution is considered not successful as
described in clause 5.1.5:</p>
<p>4&gt; if CG-SDT procedure triggered as in clause 5.27 is ongoing:</p>
<p>5&gt; set the N<sub>TA</sub> value to the value before applying the
received Timing Advance Command as in TS 38.211 [8].</p>
<p>3&gt; when the Contention Resolution is considered successful for
Random Access procedure while the CG-SDT procedure is ongoing:</p>
<p>4&gt; stop <em>timeAlignmentTimer</em> associated with this TAG;</p>
<p>4&gt; start or restart the <em>cg-SDT-TimeAlignmentTimer</em>
associated with this TAG.</p>
<p>3&gt; when the Contention Resolution is considered successful for
Random Access procedure while SRS transmission in RRC_INACTIVE is
ongoing:</p>
<p>4&gt; start or restart the <em>inactivePosSRS-TimeAlignmentTimer</em>
associated with this TAG.</p>
<p>2&gt; else:</p>
<p>3&gt; ignore the received Timing Advance Command.</p>
<p>1&gt; when an Absolute Timing Advance Command is received in response
to a MSGA transmission including C-RNTI MAC CE as specified in clause
5.1.4a:</p>
<p>2&gt; apply the Timing Advance Command for PTAG;</p>
<p>2&gt; if there is ongoing Positioning SRS Transmission in
RRC_INACTIVE as in clause 5.26:</p>
<p>3&gt; start or restart the <em>inactivePosSRS-TimeAlignmentTimer</em>
associated with the indicated TAG.</p>
<p>2&gt; if CG-SDT procedure is ongoing:</p>
<p>3&gt; start or restart the <em>cg-SDT-TimeAlignmentTimer</em>
associated with PTAG.</p>
<p>2&gt; else:</p>
<p>3&gt; start or restart the <em>timeAlignmentTimer</em> associated
with PTAG.</p>
<p>1&gt; when the indication is received from upper layer for stopping
the <em>inactivePosSRS-TimeAlignmentTimer</em>:</p>
<p>2&gt; stop the <em>inactivePosSRS-TimeAlignmentTimer</em>.</p>
<p>1&gt; when the indication is received from upper layer for starting
the <em>inactivePosSRS-TimeAlignmentTimer</em>:</p>
<p>2&gt; start or restart the
<em>inactivePosSRS-TimeAlignmentTimer</em>.</p>
<p>1&gt; when instruction from the upper layer has been received for
starting the <em>cg-SDT-TimeAlignmentTimer</em>:</p>
<p>2&gt; start the <em>cg-SDT-TimeAlignmentTimer</em>.</p>
<p>1&gt; when instruction from the upper layer has been received for
stopping the <em>cg-SDT-TimeAlignmentTimer</em>:</p>
<p>2&gt; consider the <em>cg-SDT-TimeAlignmentTimer</em> as expired.</p>
<p>1&gt; when instruction from the upper layer has been received for
starting the <em>TimeAlignmentTimer</em> associated with PTAG:</p>
<p>2&gt; start the <em>TimeAlignmentTimer</em> associated with PTAG.</p>
<p>1&gt; when a <em>timeAlignmentTimer</em> expires:</p>
<p>2&gt; if the <em>timeAlignmentTimer</em> is associated with the
PTAG:</p>
<p>3&gt; flush all HARQ buffers for all Serving Cells;</p>
<p>3&gt; notify RRC to release PUCCH for all Serving Cells, if
configured;</p>
<p>3&gt; notify RRC to release SRS for all Serving Cells, if
configured;</p>
<p>3&gt; clear any configured downlink assignments and configured uplink
grants;</p>
<p>3&gt; clear any PUSCH resource for semi-persistent CSI reporting;</p>
<p>3&gt; consider all running <em>timeAlignmentTimer</em>s as
expired;</p>
<p>3&gt; maintain N<sub>TA</sub> (defined in TS 38.211 [8]) of all
TAGs.</p>
<p>2&gt; else if the <em>timeAlignmentTimer</em> is associated with an
STAG, then for all Serving Cells belonging to this TAG:</p>
<p>3&gt; flush all HARQ buffers;</p>
<p>3&gt; notify RRC to release PUCCH, if configured;</p>
<p>3&gt; notify RRC to release SRS, if configured;</p>
<p>3&gt; clear any configured downlink assignments and configured uplink
grants;</p>
<p>3&gt; clear any PUSCH resource for semi-persistent CSI reporting;</p>
<p>3&gt; maintain N<sub>TA</sub> (defined in TS 38.211 [8]) of this
TAG.</p>
<p>1&gt; when the <em>inactivePosSRS-TimeAlignmentTimer</em>
expires:</p>
<p>2&gt; notify RRC to release Positioning SRS for RRC_INACTIVE
configuration(s).</p>
<p>1&gt; when the <em>cg-SDT-TimeAlignmentTimer</em> expires:</p>
<p>2&gt; clear any configured uplink grants;</p>
<p>2&gt; if a PDCCH addressed to the MAC entity's C-RNTI after initial
transmission for the CG-SDT with CCCH message has not been received:</p>
<p>3&gt; consider ongoing CG-SDT procedure as terminated;</p>
<p>3&gt; indicate the expiry of <em>cg-SDT-TimeAlignmentTimer</em> to
the upper layer.</p>
<p>2&gt; flush all HARQ buffers;</p>
<p>2&gt; maintain N<sub>TA</sub> (defined in TS 38.211 [8]) of this
TAG.</p>
<p>When the MAC entity stops uplink transmissions for an SCell due to
the fact that the maximum uplink transmission timing difference between
TAGs of the MAC entity or the maximum uplink transmission timing
difference between TAGs of any MAC entity of the UE is exceeded, the MAC
entity considers the <em>timeAlignmentTimer</em> associated with the
SCell as expired.</p>
<p>The MAC entity shall not perform any uplink transmission on a Serving
Cell except the Random Access Preamble and MSGA transmission when the
<em>timeAlignmentTimer</em> associated with the TAG to which this
Serving Cell belongs is not running, CG-SDT procedure is not ongoing and
SRS transmission in RRC_INACTIVE as in clause 5.26 is not ongoing.
Furthermore, when the <em>timeAlignmentTimer</em> associated with the
PTAG is not running, CG-SDT procedure is not ongoing and SRS
transmission in RRC_INACTIVE as in clause 5.26 is not ongoing, the MAC
entity shall not perform any uplink transmission on any Serving Cell
except the Random Access Preamble and MSGA transmission on the SpCell.
The MAC entity shall not perform any uplink transmission except the
Random Access Preamble and MSGA transmission when the
<em>cg-SDT-TimeAlignmentTimer</em> is not running during the ongoing
CG-SDT procedure as triggered in clause 5.27 and the
<em>inactivePosSRS-TimeAlignmentTimer</em> is not running.</p>
<h2 id="a-maintenance-of-ul-synchronization">5.2a Maintenance of UL
Synchronization</h2>
<p>The MAC entity shall for each Serving Cell:</p>
<p>1&gt; if an indication of uplink synchronization has been received
from upper layers (see clause 5.2.2.6 of TS 38.331 [5]):</p>
<p>2&gt; allow uplink transmission on the Serving Cell.</p>
<p>1&gt; if an indication of uplink synchronization loss is received
from upper layers (see clause 5.2.2.6 of TS 38.331 [5]):</p>
<p>2&gt; flush all HARQ buffers;</p>
<p>2&gt; not perform any uplink transmission on the Serving Cell.</p>
<p>NOTE: The MAC entity suspends all UL operations (e.g. stop RACH, SR,
and UL HARQ operation) after receiving the indication of an uplink
synchronization loss and resumes the operation when receiving an
indication of uplink synchronization.</p>
<h2 id="dl-sch-data-transfer">5.3 DL-SCH data transfer</h2>
<h3 id="dl-assignment-reception">5.3.1 DL Assignment reception</h3>
<p>Downlink assignments received on the PDCCH both indicate that there
is a transmission on a DL-SCH for a particular MAC entity and provide
the relevant HARQ information.</p>
<p>When the MAC entity has a C-RNTI, Temporary C-RNTI, CS-RNTI, G-RNTI
or G-CS-RNTI, the MAC entity shall for each PDCCH occasion during which
it monitors PDCCH and for each Serving Cell:</p>
<p>1&gt; if a downlink assignment for this PDCCH occasion and this
Serving Cell has been received on the PDCCH for the MAC entity's C-RNTI,
or Temporary C‑RNTI, or G-RNTI configured for multicast MTCH:</p>
<p>2&gt; if this is the first downlink assignment for this Temporary
C-RNTI:</p>
<p>3&gt; consider the NDI to have been toggled.</p>
<p>2&gt; if the downlink assignment is for the MAC entity's C-RNTI, and
if the previous downlink assignment indicated to the HARQ entity of the
same HARQ process was either a downlink assignment received for the MAC
entity's CS-RNTI or G-CS-RNTI, or a configured downlink assignment for
unicast or MBS multicast; or</p>
<p>2&gt; if the downlink assignment is for the MAC entity's G-RNTI
configured for multicast MTCH, and if the previous downlink assignment
indicated to the HARQ entity of the same HARQ process was either a
downlink assignment received for the MAC entity's CS-RNTI or G-CS-RNTI,
or other G-RNTI, or C-RNTI, or a configured downlink assignment for
unicast or MBS multicast:</p>
<p>3&gt; consider the NDI to have been toggled regardless of the value
of the NDI.</p>
<p>2&gt; stop the <em>cg-SDT-RetransmissionTimer</em>, if it is running,
for the corresponding HARQ process for initial transmission with CCCH
message;</p>
<p>2&gt; stop the <em>configuredGrantTimer</em>, if it is running, for
the corresponding HARQ process for initial transmission with CCCH
message;</p>
<p>2&gt; indicate the presence of a downlink assignment and deliver the
associated HARQ information to the HARQ entity.</p>
<p>1&gt; else if a downlink assignment for this PDCCH occasion has been
received for this Serving Cell on the PDCCH for the MAC entity's CS-RNTI
or G-CS-RNTI:</p>
<p>2&gt; if the NDI in the received HARQ information is 1:</p>
<p>3&gt; consider the NDI for the corresponding HARQ process not to have
been toggled;</p>
<p>3&gt; indicate the presence of a downlink assignment for this Serving
Cell and deliver the associated HARQ information to the HARQ entity.</p>
<p>2&gt; if the NDI in the received HARQ information is 0:</p>
<p>3&gt; if PDCCH contents indicate SPS deactivation:</p>
<p>4&gt; clear the configured downlink assignment for this Serving Cell
(if any);</p>
<p>4&gt; if the <em>timeAlignmentTimer</em>, associated with the TAG
containing the Serving Cell on which the HARQ feedback is to be
transmitted, is running:</p>
<p>5&gt; indicate a positive acknowledgement for the SPS deactivation to
the physical layer.</p>
<p>3&gt; else if PDCCH content indicates SPS activation:</p>
<p>4&gt; store the downlink assignment for this Serving Cell and the
associated HARQ information as configured downlink assignment;</p>
<p>4&gt; initialise or re-initialise the configured downlink assignment
for this Serving Cell to start in the associated PDSCH duration and to
recur according to rules in clause 5.8.1 or in clause 5.8.1a;</p>
<p>For each Serving Cell and each configured downlink assignment, if
configured and activated, the MAC entity shall:</p>
<p>1&gt; if the PDSCH duration of the configured downlink assignment
does not overlap with the PDSCH duration of a downlink assignment
received on the PDCCH for this Serving Cell:</p>
<p>2&gt; instruct the physical layer to receive, in this PDSCH duration,
transport block on the DL-SCH according to the configured downlink
assignment and to deliver it to the HARQ entity;</p>
<p>2&gt; set the HARQ Process ID to the HARQ Process ID associated with
this PDSCH duration;</p>
<p>2&gt; consider the NDI bit for the corresponding HARQ process to have
been toggled;</p>
<p>2&gt; indicate the presence of a configured downlink assignment and
deliver the stored HARQ information to the HARQ entity.</p>
<p>For configured downlink assignments without
<em>harq-ProcID-Offset</em>, the HARQ Process ID associated with the
slot where the DL transmission starts is derived from the following
equation:</p>
<p>HARQ Process ID = [floor (CURRENT_slot × 10 /
(<em>numberOfSlotsPerFrame</em> × <em>periodicity</em>))]<br />
modulo <em>nrofHARQ-Processes</em></p>
<p>where CURRENT_slot = [(SFN × <em>numberOfSlotsPerFrame</em>) + slot
number in the frame] and <em>numberOfSlotsPerFrame</em> refers to the
number of consecutive slots per frame as specified in TS 38.211 [8].</p>
<p>For configured downlink assignments with <em>harq-ProcID-Offset</em>,
the HARQ Process ID associated with the slot where the DL transmission
starts is derived from the following equation:</p>
<p>HARQ Process ID = [floor (CURRENT_slot × 10 /
(<em>numberOfSlotsPerFrame</em> × <em>periodicity</em>))]<br />
modulo <em>nrofHARQ-Processes</em> + <em>harq-ProcID-Offset</em></p>
<p>where CURRENT_slot = [(SFN × <em>numberOfSlotsPerFrame</em>) + slot
number in the frame] and <em>numberOfSlotsPerFrame</em> refers to the
number of consecutive slots per frame as specified in TS 38.211 [8].</p>
<p>NOTE 1: In case of unaligned SFN across carriers in a cell group, the
SFN of the concerned Serving Cell is used to calculate the HARQ Process
ID used for configured downlink assignments.</p>
<p>NOTE 2: CURRENT_slot refers to the slot index of the first
transmission occasion of a bundle of configured downlink assignment.</p>
<p>When the MAC entity needs to read BCCH, the MAC entity may, based on
the scheduling information from RRC:</p>
<p>1&gt; if a downlink assignment for this PDCCH occasion has been
received on the PDCCH for the SI-RNTI;</p>
<p>2&gt; indicate a downlink assignment and redundancy version for the
dedicated broadcast HARQ process to the HARQ entity.</p>
<p>When the MAC entity needs to read MCCH, the MAC entity may, based on
the scheduling information from RRC:</p>
<p>1&gt; if a downlink assignment for this PDCCH occasion has been
received on the PDCCH for the MCCH-RNTI:</p>
<p>2&gt; indicate a downlink assignment and redundancy version for the
selected HARQ process to the HARQ entity.</p>
<p>When the MAC entity needs to read broadcast MTCH, the MAC entity may,
based on the scheduling information from RRC and DCI:</p>
<p>1&gt; if a downlink assignment for this PDCCH occasion has been
received on the PDCCH for the G-RNTI configured for broadcast MTCH:</p>
<p>2&gt; indicate the presence of a downlink assignment and deliver the
associated HARQ information for the selected HARQ process to the HARQ
entity.</p>
<h3 id="harq-operation">5.3.2 HARQ operation</h3>
<h4 id="harq-entity">5.3.2.1 HARQ Entity</h4>
<p>The MAC entity includes a HARQ entity for each Serving Cell, which
maintains a number of parallel HARQ processes. Each HARQ process is
associated with a HARQ process identifier. The HARQ entity directs HARQ
information and associated TBs received on the DL-SCH to the
corresponding HARQ processes (see clause 5.3.2.2).</p>
<p>The number of parallel DL HARQ processes per HARQ entity is specified
in TS 38.214 [7]. The dedicated broadcast HARQ process is used for
BCCH.</p>
<p>The HARQ process supports one TB when the physical layer is not
configured for downlink spatial multiplexing. The HARQ process supports
one or two TBs when the physical layer is configured for downlink
spatial multiplexing.</p>
<p>When the MAC entity is configured with
<em>pdsch-AggregationFactor</em> &gt; 1, the parameter
<em>pdsch-AggregationFactor</em> provides the number of transmissions of
a TB within a bundle of the downlink assignment. Bundling operation
relies on the HARQ entity for invoking the same HARQ process for each
transmission that is part of the same bundle. After the initial
transmission, <em>pdsch-AggregationFactor</em> – 1 HARQ retransmissions
follow within a bundle.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if a downlink assignment has been indicated:</p>
<p>2&gt; allocate the TB(s) received from the physical layer and the
associated HARQ information to the HARQ process indicated by the
associated HARQ information.</p>
<p>1&gt; if a downlink assignment has been indicated for the broadcast
HARQ process:</p>
<p>2&gt; allocate the received TB to the broadcast HARQ process.</p>
<p>NOTE: It is up to UE implementation to allocate the received TB for
MCCH or broadcast MTCH to one HARQ process.</p>
<h4 id="harq-process">5.3.2.2 HARQ process</h4>
<p>When a transmission takes place for the HARQ process, one or two (in
case of downlink spatial multiplexing) TBs and the associated HARQ
information are received from the HARQ entity.</p>
<p>For each received TB and associated HARQ information, the HARQ
process shall:</p>
<p>1&gt; if the NDI, when provided, has been toggled compared to the
value of the previous received transmission corresponding to this TB;
or</p>
<p>1&gt; if the HARQ process is equal to the broadcast process, and this
is the first received transmission for the TB according to the system
information schedule indicated by RRC; or</p>
<p>1&gt; if the HARQ process is associated with a transmission indicated
with a MCCH-RNTI for MBS broadcast, and this is the first received
transmission for the TB according to the MCCH schedule indicated by RRC;
or</p>
<p>1&gt; if the HARQ process is associated with a transmission indicated
with a G-RNTI for MBS broadcast, and this is the first received
transmission for the TB according to the MTCH schedule indicated by RRC
or according to the scheduling indicated by DCI as specified in TS
38.214 [7]; or</p>
<p>1&gt; if this is the very first received transmission for this TB
(i.e. there is no previous NDI for this TB):</p>
<p>2&gt; consider this transmission to be a new transmission.</p>
<p>1&gt; else:</p>
<p>2&gt; consider this transmission to be a retransmission.</p>
<p>The MAC entity then shall:</p>
<p>1&gt; if this is a new transmission:</p>
<p>2&gt; attempt to decode the received data.</p>
<p>1&gt; else if this is a retransmission:</p>
<p>2&gt; if the data for this TB has not yet been successfully
decoded:</p>
<p>3&gt; instruct the physical layer to combine the received data with
the data currently in the soft buffer for this TB and attempt to decode
the combined data.</p>
<p>1&gt; if the data which the MAC entity attempted to decode was
successfully decoded for this TB; or</p>
<p>1&gt; if the data for this TB was successfully decoded before:</p>
<p>2&gt; if the HARQ process is equal to the broadcast process:</p>
<p>3&gt; deliver the decoded MAC PDU to upper layers.</p>
<p>2&gt; else if this is the first successful decoding of the data for
this TB:</p>
<p>3&gt; deliver the decoded MAC PDU to the disassembly and
demultiplexing entity.</p>
<p>1&gt; else:</p>
<p>2&gt; instruct the physical layer to replace the data in the soft
buffer for this TB with the data which the MAC entity attempted to
decode.</p>
<p>1&gt; if the HARQ process is associated with a transmission indicated
with a Temporary C-RNTI and the Contention Resolution is not yet
successful (see clause 5.1.5); or</p>
<p>1&gt; if the HARQ process is associated with a transmission indicated
with a MSGB-RNTI and the Random Access procedure is not yet successfully
completed (see clause 5.1.4a); or</p>
<p>1&gt; if the HARQ process is equal to the broadcast process; or</p>
<p>1&gt; if the HARQ process is associated with a transmission indicated
with a MCCH-RNTI or a G-RNTI for MBS broadcast; or</p>
<p>1&gt; if the HARQ process is associated with a transmission indicated
with a G-RNTI or a G-CS-RNTI or a configured downlink assignment for MBS
multicast and HARQ feedback is disabled for this G-RNTI or G-CS-RNTI or
the corresponding G-CS-RNTI, as specified in clause 18 of TS 38.213 [6];
or</p>
<p>1&gt; if the HARQ process is associated with a transmission indicated
with a G-RNTI or a G-CS-RNTI or a configured downlink assignment for MBS
multicast and NACK only HARQ feedback is used for this G-RNTI or
G-CS-RNTI or the corresponding G-CS-RNTI and the data for this TB is
successfully decoded and the transmission is not the first transmission
of PDSCH where the configured downlink assignment was (re-)initialised;
or</p>
<p>1&gt; if the <em>timeAlignmentTimer</em>, associated with the TAG
containing the Serving Cell on which the HARQ feedback is to be
transmitted, is stopped or expired and if the
<em>cg-SDT-TimeAlignmentTimer</em>, if configured, is not running;
or</p>
<p>1&gt; if the HARQ process is configured with disabled HARQ
feedback:</p>
<p>2&gt; if <em>harq-FeedbackEnablingforSPSactive</em> is configured
with value <em>true</em> and the transmission is the first transmission
on the configured downlink assignment after activation of the configured
downlink assignment:</p>
<p>3&gt; instruct the physical layer to generate acknowledgement(s) of
the data in this TB.</p>
<p>2&gt; else:</p>
<p>3&gt; not instruct the physical layer to generate acknowledgement(s)
of the data in this TB.</p>
<p>1&gt; else:</p>
<p>2&gt; instruct the physical layer to generate acknowledgement(s) of
the data in this TB.</p>
<p>The MAC entity shall ignore NDI received in all downlink assignments
on PDCCH for its Temporary C-RNTI when determining if NDI on PDCCH for
its C-RNTI has been toggled compared to the value in the previous
transmission.</p>
<p>NOTE: If the MAC entity receives a retransmission with a TB size
different from the last TB size signalled for this TB, the UE behavior
is left up to UE implementation.</p>
<h3 id="disassembly-and-demultiplexing">5.3.3 Disassembly and
demultiplexing</h3>
<p>The MAC entity shall disassemble and demultiplex a MAC PDU as defined
in clauses 6.1.2 and 6.1.5a.</p>
<p>When a MAC entity receives a MAC PDU for MAC entity's G-RNTI or
G-CS-RNTI, or by the configured downlink assignment for MBS multicast
containing an LCID or eLCID which is not configured, the MAC entity
shall at least:</p>
<p>1&gt; discard the received subPDU.</p>
<h2 id="ul-sch-data-transfer">5.4 UL-SCH data transfer</h2>
<h3 id="ul-grant-reception">5.4.1 UL Grant reception</h3>
<p>Uplink grant is either received dynamically on the PDCCH, in a Random
Access Response, configured semi-persistently by RRC or determined to be
associated with the PUSCH resource of MSGA as specified in clause
5.1.2a. The MAC entity shall have an uplink grant to transmit on the
UL-SCH. To perform the requested transmissions, the MAC layer receives
HARQ information from lower layers. An uplink grant addressed to CS-RNTI
with NDI = 0 is considered as a configured uplink grant. An uplink grant
addressed to CS-RNTI with NDI = 1 is considered as a dynamic uplink
grant.</p>
<p>If the MAC entity has a C-RNTI, a Temporary C-RNTI, or CS-RNTI, the
MAC entity shall for each PDCCH occasion and for each Serving Cell
belonging to a TAG that has a running <em>timeAlignmentTimer</em> or a
running <em>cg-SDT-TimeAlignmentTimer</em> and for each grant received
for this PDCCH occasion:</p>
<p>1&gt; if an uplink grant for this Serving Cell has been received on
the PDCCH for the MAC entity's C-RNTI or Temporary C-RNTI; or</p>
<p>1&gt; if an uplink grant has been received in a Random Access
Response:</p>
<p>2&gt; if the uplink grant is for MAC entity's C-RNTI and if the
previous uplink grant delivered to the HARQ entity for the same HARQ
process was either an uplink grant received for the MAC entity's CS-RNTI
or a configured uplink grant:</p>
<p>3&gt; consider the NDI to have been toggled for the corresponding
HARQ process regardless of the value of the NDI.</p>
<p>2&gt; if the uplink grant is for MAC entity's C-RNTI, and the
identified HARQ process is configured for a configured uplink grant:</p>
<p>3&gt; start or restart the <em>configuredGrantTimer</em> for the
corresponding HARQ process, if configured;</p>
<p>3&gt; stop the <em>cg-RetransmissionTimer</em> for the corresponding
HARQ process, if running.</p>
<p>2&gt; stop the <em>cg-SDT-RetransmissionTimer</em> for the
corresponding HARQ process, if running.</p>
<p>2&gt; deliver the uplink grant and the associated HARQ information to
the HARQ entity.</p>
<p>1&gt; else if an uplink grant for this PDCCH occasion has been
received for this Serving Cell on the PDCCH for the MAC entity's
CS-RNTI:</p>
<p>2&gt; if the NDI in the received HARQ information is 1:</p>
<p>3&gt; consider the NDI for the corresponding HARQ process not to have
been toggled;</p>
<p>3&gt; start or restart the <em>configuredGrantTimer</em> for the
corresponding HARQ process, if configured;</p>
<p>3&gt; stop the <em>cg-RetransmissionTimer</em> for the corresponding
HARQ process, if running;</p>
<p>3&gt; stop the <em>cg-SDT-RetransmissionTimer</em> for the
corresponding HARQ process, if running;</p>
<p>3&gt; deliver the uplink grant and the associated HARQ information to
the HARQ entity;</p>
<p>3&gt; if a logical channel associated with a DRB configured with
<em>survivalTimeStateSupport</em> is multiplexed in the MAC PDU stored
in the HARQ buffer for the corresponding HARQ process:</p>
<p>4&gt; trigger activation of PDCP duplication for all configured RLC
entities of the DRB.</p>
<p>2&gt; else if the NDI in the received HARQ information is 0:</p>
<p>3&gt; if PDCCH contents indicate configured grant Type 2
deactivation:</p>
<p>4&gt; trigger configured uplink grant confirmation.</p>
<p>3&gt; else if PDCCH contents indicate configured grant Type 2
activation:</p>
<p>4&gt; trigger configured uplink grant confirmation;</p>
<p>4&gt; store the uplink grant for this Serving Cell and the associated
HARQ information as configured uplink grant;</p>
<p>4&gt; initialise or re-initialise the configured uplink grant for
this Serving Cell to start in the associated PUSCH duration and to recur
according to rules in clause 5.8.2;</p>
<p>4&gt; stop the <em>configuredGrantTimer</em> for the corresponding
HARQ process, if running;</p>
<p>4&gt; stop the <em>cg-RetransmissionTimer</em> for the corresponding
HARQ process, if running.</p>
<p>For each Serving Cell and each configured uplink grant, if configured
and activated, the MAC entity shall:</p>
<p>1&gt; if the MAC entity is configured with
<em>lch-basedPrioritization</em>, and the PUSCH duration of the
configured uplink grant does not overlap with the PUSCH duration of an
uplink grant received in a Random Access Response or with the PUSCH
duration of an uplink grant addressed to Temporary C-RNTI or the PUSCH
duration of a MSGA payload for this Serving Cell; or</p>
<p>1&gt; if the MAC entity is not configured with
<em>lch-basedPrioritization</em>, and the PUSCH duration of the
configured uplink grant does not overlap with the PUSCH duration of an
uplink grant received on the PDCCH or in a Random Access Response or the
PUSCH duration of a MSGA payload for this Serving Cell:</p>
<p>2&gt; set the HARQ Process ID to the HARQ Process ID associated with
this PUSCH duration;</p>
<p>2&gt; if, for the corresponding HARQ process, the
<em>configuredGrantTimer</em> is not running and
<em>cg-RetransmissionTimer</em> is not configured and
<em>cg-SDT-RetransmissionTimer</em> is not configured (i.e. new
transmission):</p>
<p>3&gt; if the configured uplink grant is for the initial transmission
for the CG-SDT with CCCH message; or</p>
<p>3&gt; if there is an ongoing CG-SDT procedure and PDCCH addressed to
the MAC entity's C-RNTI has been received; or</p>
<p>3&gt; if there is no ongoing CG-SDT procedure:</p>
<p>4&gt; consider the NDI bit for the corresponding HARQ process to have
been toggled;</p>
<p>4&gt; deliver the configured uplink grant and the associated HARQ
information to the HARQ entity.</p>
<p>2&gt; else if the <em>cg-RetransmissionTimer</em> for the
corresponding HARQ process is configured and not running, then for the
corresponding HARQ process:</p>
<p>3&gt; if the <em>configuredGrantTimer</em> is not running, and the
HARQ process is not pending (i.e. new transmission):</p>
<p>4&gt; consider the NDI bit to have been toggled;</p>
<p>4&gt; deliver the configured uplink grant and the associated HARQ
information to the HARQ entity.</p>
<p>3&gt; else if the previous uplink grant delivered to the HARQ entity
for the same HARQ process was a configured uplink grant (i.e.
retransmission on configured grant):</p>
<p>4&gt; deliver the configured uplink grant and the associated HARQ
information to the HARQ entity.</p>
<p>2&gt; else if the <em>cg-SDT-RetransmissionTimer</em> is configured
and not running for the corresponding HARQ process;</p>
<p>3&gt; if the configured uplink grant is for the initial transmission
for the CG-SDT with CCCH message (i.e., initial new transmission);
or</p>
<p>3&gt; if the <em>configuredGrantTimer</em> is not running or not
configured, and PDCCH addressed to the MAC entity's C-RNTI has been
received after the initial transmission of the CG-SDT with CCCH message
(i.e., subsequent new transmission):</p>
<p>4&gt; consider the NDI bit to have been toggled;</p>
<p>4&gt; deliver the configured uplink grant and the associated HARQ
information to the HARQ entity.</p>
<p>3&gt; else if the previous uplink grant delivered to the HARQ entity
for the same HARQ process was a configured uplink grant for initial
transmission of CG-SDT with CCCH message or for its retransmission;
and</p>
<p>3&gt; if PDCCH addressed to the MAC entity's C-RNTI has not been
received (i.e., retransmission for initial CG-SDT transmission):</p>
<p>4&gt; consider the NDI bit to have not been toggled;</p>
<p>4&gt; deliver the configured uplink grant and the associated HARQ
information to the HARQ entity.</p>
<p>For configured uplink grants neither configured with
<em>harq-ProcID-Offset2</em> nor with <em>cg-RetransmissionTimer</em>,
the HARQ Process ID associated with the first symbol of a UL
transmission is derived from the following equation:</p>
<p>HARQ Process ID = [floor(CURRENT_symbol/<em>periodicity</em>)] modulo
<em>nrofHARQ-Processes</em></p>
<p>For configured uplink grants with <em>harq-ProcID-Offset2</em>, the
HARQ Process ID associated with the first symbol of a UL transmission is
derived from the following equation:</p>
<p>HARQ Process ID = [floor(CURRENT_symbol / <em>periodicity</em>)]
modulo <em>nrofHARQ-Processes</em> + <em>harq-ProcID-Offset2</em></p>
<p>where CURRENT_symbol = (SFN × <em>numberOfSlotsPerFrame</em> ×
<em>numberOfSymbolsPerSlot</em> + slot number in the frame ×
<em>numberOfSymbolsPerSlot</em> + symbol number in the slot), and
<em>numberOfSlotsPerFrame</em> and <em>numberOfSymbolsPerSlot</em> refer
to the number of consecutive slots per frame and the number of
consecutive symbols per slot, respectively as specified in TS 38.211
[8].</p>
<p>For configured uplink grants configured with
<em>cg-RetransmissionTimer</em>, the UE implementation selects an HARQ
Process ID among the HARQ process IDs available for the configured grant
configuration. If the MAC entity is configured with
<em>intraCG-Prioritization</em>, for HARQ Process ID selection, the UE
shall prioritize the HARQ Process ID with the highest priority, where
the priority of HARQ process is determined by the highest priority among
priorities of the logical channels that are multiplexed (i.e. the MAC
PDU to transmit is already stored in the HARQ buffer) or have data
available that can be multiplexed (i.e. the MAC PDU to transmit is not
stored in the HARQ buffer) in the MAC PDU, according to the mapping
restrictions as described in clause 5.4.3.1.2. If the MAC entity is
configured with <em>intraCG-Prioritization</em>, for HARQ Process ID
selection among initial transmission and retransmission with equal
priority, the UE shall prioritize retransmissions before initial
transmissions. The priority of a HARQ Process for which no data for
logical channels is multiplexed or can be multiplexed in the MAC PDU is
lower than the priority of a HARQ Process for which data for any logical
channels is multiplexed or can be multiplexed in the MAC PDU. If the MAC
entity is not configured with <em>intraCG-Prioritization</em>, for HARQ
Process ID selection, the UE shall prioritize retransmissions before
initial transmissions. The UE shall toggle the NDI in the CG-UCI for new
transmissions and not toggle the NDI in the CG-UCI in
retransmissions.</p>
<p>NOTE 1: CURRENT_symbol refers to the symbol index of the first
transmission occasion of a bundle of configured uplink grant.</p>
<p>NOTE 2: A HARQ process is configured for a configured uplink grant
where neither <em>harq-ProcID-Offset</em> nor
<em>harq-ProcID-Offset2</em> is configured, if the configured uplink
grant is activated and the associated HARQ process ID is less than
<em>nrofHARQ-Processes</em>. A HARQ process is configured for a
configured uplink grant where <em>harq-ProcID-Offset2</em> is
configured, if the configured uplink grant is activated and the
associated HARQ process ID is greater than or equal to
<em>harq-ProcID-Offset2</em> and less than sum of
<em>harq-ProcID-Offset2</em> and <em>nrofHARQ-Processes</em> for the
configured grant configuration.</p>
<p>NOTE 3: If the MAC entity receives a grant in a Random Access
Response (i.e. MAC RAR or fallbackRAR), or addressed to Temporary C-RNTI
or determines a grant as specified in clause 5.1.2a for MSGA payload and
if the MAC entity also receives an overlapping grant for its C-RNTI or
CS-RNTI, requiring concurrent transmissions on the SpCell, the MAC
entity may choose to continue with either the grant for its
RA-RNTI/Temporary C-RNTI/MSGB-RNTI/the MSGA payload transmission or the
grant for its C-RNTI or CS-RNTI.</p>
<p>NOTE 4: In case of unaligned SFN across carriers in a cell group, the
SFN of the concerned Serving Cell is used to calculate the HARQ Process
ID used for configured uplink grants.</p>
<blockquote>
<p>NOTE 5: If <em>cg-RetransmissionTimer</em> is not configured, a HARQ
process is not shared between different configured grant configurations
in the same BWP.</p>
</blockquote>
<p>For the MAC entity configured with <em>lch-basedPrioritization</em>,
priority of an uplink grant is determined by the highest priority among
priorities of the logical channels that are multiplexed (i.e. the MAC
PDU to transmit is already stored in the HARQ buffer) or have data
available that can be multiplexed (i.e. the MAC PDU to transmit is not
stored in the HARQ buffer) in the MAC PDU, according to the mapping
restrictions as described in clause 5.4.3.1.2. The priority of an uplink
grant for which no data for logical channels is multiplexed or can be
multiplexed in the MAC PDU is lower than either the priority of an
uplink grant for which data for any logical channels is multiplexed or
can be multiplexed in the MAC PDU or the priority of the logical channel
triggering an SR.</p>
<p>For the MAC entity configured with <em>lch-basedPrioritization</em>,
if the corresponding PUSCH transmission of a configured uplink grant is
cancelled by CI-RNTI as specified in clause 11.2A of TS 38.213 [6] or
cancelled by a high PHY-priority PUCCH transmission as specified in
clause 9 of TS 38.213 [6], this configured uplink grant is considered as
a de-prioritized uplink grant. If this de-prioritized uplink grant is
configured with <em>autonomousTx</em>, the <em>configuredGrantTimer</em>
for the corresponding HARQ process of this de-prioritized uplink grant
shall be stopped if it is running. If this de-prioritized uplink grant
is configured with <em>autonomousTx</em>, the
<em>cg-RetransmissionTimer</em> for the corresponding HARQ process of
this de-prioritized uplink grant shall be stopped if it is running.</p>
<p>When the MAC entity is configured with
<em>lch-basedPrioritization</em>, for each uplink grant delivered to the
HARQ entity and whose associated PUSCH can be transmitted by lower
layers, the MAC entity shall:</p>
<p>1&gt; if this uplink grant is received in a Random Access Response
(i.e. in a MAC RAR or fallback RAR), or addressed to Temporary C-RNTI,
or is determined as specified in clause 5.1.2a for the transmission of
the MSGA payload:</p>
<p>2&gt; consider this uplink grant as a prioritized uplink grant.</p>
<p>1&gt; else if this uplink grant is addressed to CS-RNTI with NDI = 1
or C-RNTI:</p>
<p>2&gt; if there is no overlapping PUSCH duration of a configured
uplink grant which was not already de-prioritized, in the same BWP,
whose priority is higher than the priority of the uplink grant; and</p>
<p>2&gt; if there is no overlapping PUCCH resource with an SR
transmission which was not already de-prioritized and the simultaneous
transmission of the SR and the uplink grant is not allowed by
configuration of <em>simultaneousPUCCH-PUSCH</em> or
<em>simultaneousPUCCH-PUSCH-SecondaryPUCCHgroup</em> or
<em>simultaneousSR-PUSCH-diffPUCCH-Groups</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority-SecondaryPUCCHgroup</em>, and
the priority of the logical channel that triggered the SR is higher than
the priority of the uplink grant:</p>
<p>3&gt; consider this uplink grant as a prioritized uplink grant;</p>
<p>3&gt; consider the other overlapping uplink grant(s), if any, as a
de-prioritized uplink grant(s);</p>
<p>3&gt; consider the other overlapping SR transmission(s), if any, as a
de-prioritized SR transmission(s), except for the SR transmission(s)
whose simultaneous transmission is allowed by configuration of
<em>simultaneousPUCCH-PUSCH</em> or
<em>simultaneousPUCCH-PUSCH-SecondaryPUCCHgroup</em> or
<em>simultaneousSR-PUSCH-diffPUCCH-Groups</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority-SecondaryPUCCHgroup</em>;</p>
<p>3&gt; if the de-prioritized uplink grant(s) is a configured uplink
grant configured with <em>autonomousTx</em> whose PUSCH has already
started:</p>
<p>4&gt; stop the <em>configuredGrantTimer</em> for the corresponding
HARQ process of the de-prioritized uplink grant(s);</p>
<p>4&gt; stop the <em>cg-RetransmissionTimer</em> for the corresponding
HARQ process of the de-prioritized uplink grant(s).</p>
<p>1&gt; else if this uplink grant is a configured uplink grant:</p>
<p>2&gt; if there is no overlapping PUSCH duration of another configured
uplink grant which was not already de-prioritized, in the same BWP,
whose priority is higher than the priority of the uplink grant; and</p>
<p>2&gt; if there is no overlapping PUSCH duration of an uplink grant
addressed to CS-RNTI with NDI = 1 or C-RNTI which was not already
de-prioritized, in the same BWP, whose priority is higher than or equal
to the priority of the uplink grant; and</p>
<p>2&gt; if there is no overlapping PUCCH resource with an SR
transmission which was not already de-prioritized and the simultaneous
transmission of the SR and the uplink grant is not allowed by
configuration of <em>simultaneousPUCCH-PUSCH</em> or
<em>simultaneousPUCCH-PUSCH-SecondaryPUCCHgroup</em> or
<em>simultaneousSR-PUSCH-diffPUCCH-Groups</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority-SecondaryPUCCHgroup</em>, and
the priority of the logical channel that triggered the SR is higher than
the priority of the uplink grant:</p>
<p>3&gt; consider this uplink grant as a prioritized uplink grant;</p>
<p>3&gt; consider the other overlapping uplink grant(s), if any, as a
de-prioritized uplink grant(s);</p>
<p>3&gt; if the de-prioritized uplink grant(s) is a configured uplink
grant configured with <em>autonomousTx</em> whose PUSCH has already
started:</p>
<p>4&gt; stop the <em>configuredGrantTimer</em> for the corresponding
HARQ process of the de-prioritized uplink grant(s);</p>
<p>4&gt; stop the <em>cg-RetransmissionTimer</em> for the corresponding
HARQ process of the de-prioritized uplink grant(s).</p>
<p>3&gt; consider the other overlapping SR transmission(s), if any, as a
de-prioritized SR transmission(s), except for the SR transmission(s)
whose simultaneous transmission is allowed by configuration of
<em>simultaneousPUCCH-PUSCH</em> or
<em>simultaneousPUCCH-PUSCH-SecondaryPUCCHgroup</em> or
<em>simultaneousSR-PUSCH-diffPUCCH-Groups</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority-SecondaryPUCCHgroup</em>.</p>
<p>NOTE 6: If the MAC entity is configured with
<em>lch-basedPrioritization</em> and if there is overlapping PUSCH
duration of at least two configured uplink grants whose priorities are
equal, the prioritized uplink grant is determined by UE
implementation.</p>
<p>NOTE 7: If the MAC entity is not configured with
<em>lch-basedPrioritization</em> and if there is overlapping PUSCH
duration of at least two configured uplink grants, it is up to UE
implementation to choose one of the configured uplink grants.</p>
<p>NOTE 8: If the MAC entity is configured with
<em>lch-basedPrioritization</em>, the MAC entity does not take UCI
multiplexing according to the procedure specified in TS 38.213 [6] into
account when determining whether the PUSCH duration of an uplink grant
overlaps with the PUCCH resource for an SR transmission.</p>
<h3 id="harq-operation-1">5.4.2 HARQ operation</h3>
<h4 id="harq-entity-1">5.4.2.1 HARQ Entity</h4>
<p>The MAC entity includes a HARQ entity for each Serving Cell with
configured uplink (including the case when it is configured with
<em>supplementaryUplink</em>), which maintains a number of parallel HARQ
processes.</p>
<p>The number of parallel UL HARQ processes per HARQ entity is specified
in TS 38.214 [7].</p>
<p>Each HARQ process supports one TB.</p>
<p>Each HARQ process is associated with a HARQ process identifier. For
UL transmission with UL grant in RA Response or for UL transmission for
MSGA payload, HARQ process identifier 0 is used.</p>
<p>NOTE: When a single DCI is used to schedule multiple PUSCH, the UE is
allowed to map generated TB(s) internally to different HARQ processes in
case of LBT failure(s), i.e. UE may transmit a new TB on any HARQ
process in the grants that have the same TBS, the same RV and the NDIs
indicate new transmission.</p>
<p>The maximum number of transmissions of a TB within a bundle of the
dynamic grant or configured grant or the uplink grant received in a MAC
RAR is given by <em>REPETITION_NUMBER</em> as follows:</p>
<p>- For a dynamic grant, <em>REPETITION_NUMBER</em> is set to a value
provided by lower layers, as specified in clause 6.1.2.1 of TS 38.214
[7];</p>
<p>- For a configured grant, <em>REPETITION_NUMBER</em> is set to a
value provided by lower layers, as specified in clause 6.1.2.3 of TS
38.214 [7];</p>
<p>- For an uplink grant received in a MAC RAR, REPETITION_NUMBER is set
to a value provided by lower layers, as specified in clause 6.1.2.1 of
TS 38.214 [7].</p>
<p>If <em>REPETITION_NUMBER</em> &gt; 1, after the first transmission
within a bundle, at most <em>REPETITION_NUMBER</em> – 1 HARQ
retransmissions follow within the bundle. For both dynamic grant and
configured uplink grant, and uplink grant received in a MAC RAR bundling
operation relies on the HARQ entity for invoking the same HARQ process
for each transmission that is part of the same bundle. Within a bundle,
HARQ retransmissions are triggered without waiting for feedback from
previous transmission according to <em>REPETITION_NUMBER</em> for a
dynamic grant or configured uplink grant or uplink grant received in a
MAC RAR unless they are terminated as specified in clause 6.1 of TS
38.214 [7]. Each transmission within a bundle is a separate uplink grant
delivered to the HARQ entity.</p>
<p>For each transmission within a bundle of the dynamic grant or uplink
grant received in a MAC RAR, the sequence of redundancy versions is
determined according to clause 6.1.2.1 of TS 38.214 [7]. For each
transmission within a bundle of the configured uplink grant, the
sequence of redundancy versions is determined according to clause
6.1.2.3 of TS 38.214 [7].</p>
<p>For each uplink grant, the HARQ entity shall:</p>
<p>1&gt; identify the HARQ process associated with this grant, and for
each identified HARQ process:</p>
<p>2&gt; if the received grant was not addressed to a Temporary C-RNTI
on PDCCH, and the NDI provided in the associated HARQ information has
been toggled compared to the value in the previous transmission of this
TB of this HARQ process; or</p>
<p>2&gt; if the uplink grant was received on PDCCH for the C-RNTI and
the HARQ buffer of the identified process is empty; or</p>
<p>2&gt; if the uplink grant was received in a Random Access Response
(i.e. in a MAC RAR or a fallback RAR); or</p>
<p>2&gt; if the uplink grant was determined as specified in clause
5.1.2a for the transmission of the MSGA payload; or</p>
<p>2&gt; if the uplink grant was received on PDCCH for the C-RNTI in
<em>ra-ResponseWindow</em> and this PDCCH successfully completed the
Random Access procedure initiated for beam failure recovery; or</p>
<p>2&gt; if the uplink grant is part of a bundle of the configured
uplink grant, and may be used for initial transmission according to
clause 6.1.2.3 of TS 38.214 [7], and if no MAC PDU has been obtained for
this bundle:</p>
<p>3&gt; if there is a MAC PDU in the MSGA buffer and the uplink grant
determined as specified in clause 5.1.2a for the transmission of the
MSGA payload was selected; or</p>
<p>3&gt; if there is a MAC PDU in the MSGA buffer and the uplink grant
was received in a fallbackRAR and this fallbackRAR successfully
completed the Random Access procedure:</p>
<p>4&gt; obtain the MAC PDU to transmit from the MSGA buffer.</p>
<p>3&gt; else if there is a MAC PDU in the Msg3 buffer and the uplink
grant was received in a fallbackRAR:</p>
<p>4&gt; obtain the MAC PDU to transmit from the Msg3 buffer.</p>
<p>3&gt; else if there is a MAC PDU in the Msg3 buffer and the uplink
grant was received in a MAC RAR; or</p>
<p>3&gt; if there is a MAC PDU in the Msg3 buffer and the uplink grant
was received on PDCCH for the C-RNTI in <em>ra-ResponseWindow</em> and
this PDCCH successfully completed the Random Access procedure initiated
for beam failure recovery:</p>
<p>4&gt; obtain the MAC PDU to transmit from the Msg3 buffer.</p>
<p>4&gt; if the uplink grant size does not match with size of the
obtained MAC PDU; and</p>
<p>4&gt; if the Random Access procedure was successfully completed upon
receiving the uplink grant:</p>
<p>5&gt; indicate to the Multiplexing and assembly entity to include MAC
subPDU(s) carrying MAC SDU from the obtained MAC PDU in the subsequent
uplink transmission;</p>
<p>5&gt; obtain the MAC PDU to transmit from the Multiplexing and
assembly entity.</p>
<p>3&gt; else if this uplink grant is a configured grant configured with
<em>autonomousTx</em>; and</p>
<p>3&gt; if the previous configured uplink grant, in the BWP, for this
HARQ process was not prioritized; and</p>
<p>3&gt; if a MAC PDU had already been obtained for this HARQ process;
and</p>
<p>3&gt; if the uplink grant size matches with size of the obtained MAC
PDU; and</p>
<p>3&gt; if none of PUSCH transmission(s) of the obtained MAC PDU has
been completely performed:</p>
<p>4&gt; consider the MAC PDU has been obtained.</p>
<p>3&gt; else if the MAC entity is not configured with
<em>lch-basedPrioritization</em>; or</p>
<p>3&gt; if this uplink grant is a prioritized uplink grant:</p>
<p>4&gt; obtain the MAC PDU to transmit from the Multiplexing and
assembly entity, if any;</p>
<p>3&gt; if a MAC PDU to transmit has been obtained:</p>
<p>4&gt; if the uplink grant is not a configured grant configured with
<em>autonomousTx</em>; or</p>
<p>4&gt; if the uplink grant is a prioritized uplink grant:</p>
<p>5&gt; deliver the MAC PDU and the uplink grant and the HARQ
information of the TB to the identified HARQ process;</p>
<p>5&gt; instruct the identified HARQ process to trigger a new
transmission;</p>
<p>5&gt; if the uplink grant is a configured uplink grant:</p>
<p>6&gt; start or restart the <em>configuredGrantTimer</em>, if
configured, for the corresponding HARQ process when the transmission is
performed if LBT failure indication is not received from lower
layers;</p>
<p>6&gt; start or restart the <em>cg-RetransmissionTimer</em>, if
configured, for the corresponding HARQ process when the transmission is
performed if LBT failure indication is not received from lower
layers.</p>
<p>6&gt; if the configured uplink grant is for the initial transmission
for CG-SDT with CCCH message:</p>
<p>7&gt; start or restart the <em>cg-SDT-RetransmissionTimer</em>, if
configured, for the corresponding HARQ process when the transmission is
performed.</p>
<p>5&gt; if the uplink grant is addressed to C-RNTI, and the identified
HARQ process is configured for a configured uplink grant:</p>
<p>6&gt; start or restart the <em>configuredGrantTimer</em>, if
configured, for the corresponding HARQ process when the transmission is
performed if LBT failure indication is not received from lower
layers.</p>
<p>5&gt; if <em>cg-RetransmissionTimer</em> is configured for the
identified HARQ process; and</p>
<p>5&gt; if the transmission is performed and LBT failure indication is
received from lower layers:</p>
<p>6&gt; consider the identified HARQ process as pending.</p>
<p>3&gt; else:</p>
<p>4&gt; flush the HARQ buffer of the identified HARQ process.</p>
<p>2&gt; else (i.e. retransmission):</p>
<p>3&gt; if the uplink grant received on PDCCH was addressed to CS-RNTI
and if the HARQ buffer of the identified process is empty; or</p>
<p>3&gt; if the uplink grant is part of a bundle and if no MAC PDU has
been obtained for this bundle; or</p>
<p>3&gt; if the uplink grant is part of a bundle of the configured
uplink grant, and the PUSCH duration of the uplink grant overlaps with
an uplink grant received in a Random Access Response (i.e. MAC RAR or
fallbackRAR) or an uplink grant determined as specified in clause 5.1.2a
for MSGA payload for this Serving Cell; or</p>
<p>3&gt; if the MAC entity is not configured with
<em>lch-basedPrioritization</em> and this uplink grant is part of a
bundle of the configured uplink grant, and the PUSCH duration of the
uplink grant overlaps with a PUSCH duration of another uplink grant
received on the PDCCH; or</p>
<p>3&gt; if the MAC entity is configured with
<em>lch-basedPrioritization</em> and this uplink grant is not a
prioritized uplink grant:</p>
<p>4&gt; ignore the uplink grant.</p>
<p>3&gt; else:</p>
<p>4&gt; deliver the uplink grant and the HARQ information (redundancy
version) of the TB to the identified HARQ process;</p>
<p>4&gt; instruct the identified HARQ process to trigger a
retransmission;</p>
<p>4&gt; if the uplink grant is addressed to CS-RNTI; or</p>
<p>4&gt; if the uplink grant is addressed to C-RNTI, and the identified
HARQ process is configured for a configured uplink grant:</p>
<p>5&gt; start or restart the <em>configuredGrantTimer</em>, if
configured, for the corresponding HARQ process when the transmission is
performed if LBT failure indication is not received from lower
layers.</p>
<p>4&gt; if the uplink grant is a configured uplink grant:</p>
<p>5&gt; if the identified HARQ process is pending:</p>
<p>6&gt; start or restart the <em>configuredGrantTimer</em>, if
configured, for the corresponding HARQ process when the transmission is
performed if LBT failure indication is not received from lower
layers;</p>
<p>5&gt; start or restart the <em>cg-RetransmissionTimer</em>, if
configured, for the corresponding HARQ process when the transmission is
performed if LBT failure indication is not received from lower
layers.</p>
<p>5&gt; if the configured uplink grant is for the retransmission of the
initial transmission of the CG-SDT with CCCH message:</p>
<p>6&gt; start or restart the <em>cg-SDT-RetransmissionTimer</em> for
the corresponding HARQ process when transmission is performed.</p>
<p>4&gt; if the identified HARQ process is pending and the transmission
is performed and LBT failure indication is not received from lower
layers:</p>
<p>5&gt; consider the identified HARQ process as not pending.</p>
<p>When determining if NDI has been toggled compared to the value in the
previous transmission the MAC entity shall ignore NDI received in all
uplink grants on PDCCH for its Temporary C-RNTI.</p>
<p>When <em>configuredGrantTimer</em> or <em>cg-RetransmissionTimer</em>
or <em>cg-SDT-RetransmissionTimer</em> is started or restarted by a
PUSCH transmission, it shall be started at the beginning of the first
symbol of the PUSCH transmission.</p>
<h4 id="harq-process-1">5.4.2.2 HARQ process</h4>
<p>Each HARQ process is associated with a HARQ buffer.</p>
<p>New transmissions are performed on the resource and with the MCS
indicated on PDCCH or indicated in the Random Access Response (i.e. MAC
RAR or fallbackRAR), or signalled in RRC or determined as specified in
clause 5.1.2a for MSGA payload. Retransmissions are performed on the
resource and, if provided, with the MCS indicated on PDCCH, or on the
same resource and with the same MCS as was used for last made
transmission attempt within a bundle, or on stored configured uplink
grant resources and stored MCS when <em>cg-RetransmissionTimer</em> or
<em>cg-SDT-RetransmissionTimer</em> is configured. If
<em>cg-RetransmissionTimer</em> is configured, retransmissions with the
same HARQ process may be performed on any configured grant configuration
if the configured grant configurations have the same TBS. If
<em>cg-SDT-RetransmissionTimer</em> is configured, retransmission for
the initial CG-SDT transmission with the same HARQ process may be
performed on any configured grant configuration if the configured grant
configurations have the same TBS.</p>
<p>When <em>cg-RetransmissionTimer</em> is configured and the HARQ
entity obtains a MAC PDU to transmit and LBT failure indication is
received from lower layer, the corresponding HARQ process is considered
to be pending. For a configured uplink grant, configured with
<em>cg-RetransmissionTimer</em>, each associated HARQ process is
considered as not pending when:</p>
<p>- a transmission is performed on that HARQ process and LBT failure
indication is not received from lower layers; or</p>
<p>- the configured uplink grant is initialised and this HARQ process is
not associated with another active configured uplink grant; or</p>
<p>- the HARQ buffer for this HARQ process is flushed.</p>
<p>If the HARQ entity requests a new transmission for a TB, the HARQ
process shall:</p>
<p>1&gt; store the MAC PDU in the associated HARQ buffer;</p>
<p>1&gt; store the uplink grant received from the HARQ entity;</p>
<p>1&gt; generate a transmission as described below.</p>
<p>If the HARQ entity requests a retransmission for a TB, the HARQ
process shall:</p>
<p>1&gt; store the uplink grant received from the HARQ entity;</p>
<p>1&gt; generate a transmission as described below.</p>
<p>To generate a transmission for a TB, the HARQ process shall:</p>
<p>1&gt; if the MAC PDU was obtained from the Msg3 buffer; or</p>
<p>1&gt; if the MAC PDU was obtained from the MSGA buffer; or</p>
<p>1&gt; if there is no measurement gap at the time of the transmission
and, in case of retransmission, the retransmission does not collide with
a transmission for a MAC PDU obtained from the Msg3 buffer or the MSGA
buffer:</p>
<p>2&gt; if there are neither NR sidelink transmission nor transmission
of V2X sidelink communication at the time of the transmission; or</p>
<p>2&gt; if the transmission of the MAC PDU is prioritized over sidelink
transmission or can be simultaneously performed with sidelink
transmission:</p>
<p>3&gt; instruct the physical layer to generate a transmission
according to the stored uplink grant.</p>
<p>If a HARQ process receives downlink feedback information, the HARQ
process shall:</p>
<p>1&gt; stop the <em>cg-RetransmissionTimer</em>, if running;</p>
<p>1&gt; if acknowledgement is indicated:</p>
<p>2&gt; stop the <em>configuredGrantTimer</em>, if running.</p>
<p>If the <em>configuredGrantTimer</em> expires for a HARQ process, the
HARQ process shall:</p>
<p>1&gt; stop the <em>cg-RetransmissionTimer</em>, if running;</p>
<p>1&gt; stop the <em>cg-SDT-RetransmissionTimer</em>, if running.</p>
<p>1&gt; if a PDCCH addressed to the MAC entity's C-RNTI has not been
received after initial transmission for the CG-SDT with CCCH message to
which the <em>configuredGrantTimer</em> corresponds:</p>
<p>2&gt; indicate failure to perform SDT procedure to the upper
layer.</p>
<p>The transmission of the MAC PDU is prioritized over sidelink
transmission or can be performed simultaneously with sidelink
transmission if one of the following conditions is met:</p>
<p>- if there are both a sidelink grant for NR sidelink transmissionand
configured grant(s) for transmission of V2X sidelink communication on
SL-SCH as determined in clause 5.14.1.2.2 of TS 36.321 [22] at the time
of the transmission, and neither the NR sidelink transmission is
prioritized as determined in clause 5.22.1.3.1a nor the transmission(s)
of V2X sidelink communication is prioritized as determined in clause
5.14.1.2.2 of TS 36.321 [22]; or</p>
<p>- if there are both a sidelink grant NR sidelink transmission and
configured grant(s) for transmission of V2X sidelink communication on
SL-SCH as determined in clause 5.14.1.2.2 of TS 36.321 [22] at the time
of the transmission, and the MAC entity is able to perform this UL
transmission simultaneously with the NR sidelink transmission and/or the
transmission(s) of V2X sidelink communication; or</p>
<p>- if there is only configured grant(s) for transmission of V2X
sidelink communication on SL-SCH as determined in clause 5.14.1.2.2 of
TS 36.321 [22] at the time of the transmission, and either none of the
transmission(s) of V2X sidelink communication is prioritized as
determined in clause 5.14.1.2.2 of TS 36.321 [22] or the MAC entity is
able to perform this UL transmission simultaneously with the
transmission(s) of V2X sidelink communication; or</p>
<p>- if there is only a sidelink grant for NR sidelink transmission at
the time of the transmission, and if the NR sidelink transmission is not
prioritized as determined in clause 5.22.1.3.1a, or there is a sidelink
grant for NR sidelink transmission at the time of the transmission and
the MAC entity is able to perform this UL transmission simultaneously
with the NR sidelink transmission; or</p>
<p>- if there are both a sidelink grant for NR sidelink transmission and
configured grant(s) for transmission of V2X sidelink communication on
SL-SCH as determined in clause 5.14.1.2.2 of TS 36.321 [22] at the time
of the transmission, and either only the of NR sidelink transmission is
prioritized as determined in clause 5.22.1.3.1a or only the
transmission(s) of V2X sidelink communication is prioritized as
determined in clause 5.14.1.2.2 of TS 36.321 [22] and the MAC entity is
able to perform this UL transmission simultaneously with the prioritized
NR sidelink transmission or the transmission of V2X sidelink
communication:</p>
<p>NOTE 1: Among the UL transmissions where the MAC entity is able to
perform the transmission of NR sidelink communication prioritized
simultaneously, if there are more than one UL transmission which the MAC
entity is not able to perform simultaneously, it is up to UE
implementation whether this UL transmission is performed.</p>
<p>NOTE 2: Among the UL transmissions that the MAC entity is able to
perform simultaneously with all transmission(s) of V2X sidelink
communication prioritized, if there are more than one UL transmission
which the MAC entity is not able to perform simultaneously, it is up to
UE implementation whether this UL transmission is performed.</p>
<p>NOTE 3: Among the UL transmissions where the MAC entity is able to
perform the NR sidelink transmission prioritized simultaneously with all
transmission(s) of V2X sidelink communication prioritized, if there are
more than one UL transmission which the MAC entity is not able to
perform simultaneously, it is up to UE implementation whether this UL
transmission is performed.</p>
<p>NOTE 4: If there is configured grant(s) for transmission of V2X
sidelink communication on SL-SCH as determined in clause 5.14.1.2.2 of
TS 36.321 [22] at the time of the transmission, and the MAC entity is
not able to perform this UL transmission simultaneously with the
transmission(s) of V2X sidelink communication, and
prioritization-related information is not available prior to the time of
the transmission due to processing time restriction, it is up to UE
implementation whether this UL transmission is performed.</p>
<h3 id="multiplexing-and-assembly">5.4.3 Multiplexing and assembly</h3>
<h4 id="logical-channel-prioritization">5.4.3.1 Logical Channel
Prioritization</h4>
<h5 id="general-4">5.4.3.1.1 General</h5>
<p>The Logical Channel Prioritization (LCP) procedure is applied
whenever a new transmission is performed.</p>
<p>RRC controls the scheduling of uplink data by signalling for each
logical channel per MAC entity:</p>
<p>- <em>priority</em> where an increasing priority value indicates a
lower priority level;</p>
<p>- <em>prioritisedBitRate</em> which sets the Prioritized Bit Rate
(PBR);</p>
<p>- <em>bucketSizeDuration</em> which sets the Bucket Size Duration
(BSD).</p>
<p>RRC additionally controls the LCP procedure by configuring mapping
restrictions for each logical channel:</p>
<p>- <em>allowedSCS-List</em> which sets the allowed Subcarrier
Spacing(s) for transmission;</p>
<p>- <em>maxPUSCH-Duration</em> which sets the maximum PUSCH duration
allowed for transmission;</p>
<p>- <em>configuredGrantType1Allowed</em> which sets whether a
configured grant Type 1 can be used for transmission;</p>
<p>- <em>allowedServingCells</em> which sets the allowed cell(s) for
transmission;</p>
<p>- <em>allowedCG-List</em> which sets the allowed configured grant(s)
for transmission;</p>
<p>- <em>allowedPHY-PriorityIndex</em> which sets the allowed PHY
priority index(es) of a dynamic grant for transmission;</p>
<p>- <em>allowedHARQ-mode</em> which sets the allowed UL HARQ mode for
transmission.</p>
<p>The following UE variable is used for the Logical channel
prioritization procedure:</p>
<p>- <em>Bj</em> which is maintained for each logical channel
<em>j</em>.</p>
<p>The MAC entity shall initialize <em>Bj</em> of the logical channel to
zero when the logical channel is established.</p>
<p>For each logical channel <em>j</em>, the MAC entity shall:</p>
<p>1&gt; increment <em>Bj</em> by the product PBR × T before every
instance of the LCP procedure, where T is the time elapsed since
<em>Bj</em> was last incremented;</p>
<p>1&gt; if the value of <em>Bj</em> is greater than the bucket size
(i.e. PBR × BSD):</p>
<p>2&gt; set <em>Bj</em> to the bucket size.</p>
<p>NOTE: The exact moment(s) when the UE updates <em>Bj</em> between LCP
procedures is up to UE implementation, as long as <em>Bj</em> is up to
date at the time when a grant is processed by LCP.</p>
<h5 id="selection-of-logical-channels">5.4.3.1.2 Selection of logical
channels</h5>
<p>The MAC entity shall, when a new transmission is performed:</p>
<p>1&gt; select the logical channels for each UL grant that satisfy all
the following conditions:</p>
<p>2&gt; the set of allowed Subcarrier Spacing index values in
<em>allowedSCS-List</em>, if configured, includes the Subcarrier Spacing
index associated to the UL grant; and</p>
<p>2&gt; <em>maxPUSCH-Duration</em>, if configured, is larger than or
equal to the PUSCH transmission duration associated to the UL grant;
and</p>
<p>2&gt; <em>configuredGrantType1Allowed</em>, if configured, is set to
<em>true</em> in case the UL grant is a Configured Grant Type 1; and</p>
<p>2&gt; <em>allowedServingCells</em>, if configured, includes the Cell
information associated to the UL grant. Does not apply to logical
channels associated with a DRB configured with PDCP duplication within
the same MAC entity (i.e. CA duplication) when CA duplication is
deactivated for this DRB in this MAC entity; and</p>
<p>2&gt; <em>allowedCG-List</em>, if configured, includes the configured
grant index associated to the UL grant; and</p>
<p>2&gt; <em>allowedPHY-PriorityIndex</em>, if configured, includes the
priority index (as specified in clause 9 of TS 38.213 [6]) associated to
the dynamic UL grant; and</p>
<p>2&gt; <em>allowedHARQ-mode</em>, if configured, includes the allowed
UL HARQ mode for the HARQ process associated to the UL grant.</p>
<p>NOTE: The Subcarrier Spacing index, PUSCH transmission duration, Cell
information, and priority index are included in Uplink transmission
information received from lower layers for the corresponding scheduled
uplink transmission.</p>
<h5 id="allocation-of-resources">5.4.3.1.3 Allocation of resources</h5>
<p>Before the successful completion of the Random Access procedure
initiated for DAPS handover, the target MAC entity shall not select the
logical channel(s) corresponding to non-DAPS DRB(s) for the uplink grant
received in a Random Access Response or the uplink grant for the
transmission of the MSGA payload. The source MAC entity shall select
only the logical channel(s) corresponding to DAPS DRB(s) during DAPS
handover.</p>
<p>The MAC entity shall, when a new transmission is performed:</p>
<p>1&gt; allocate resources to the logical channels as follows:</p>
<p>2&gt; logical channels selected in clause 5.4.3.1.2 for the UL grant
with <em>Bj</em> &gt; 0 are allocated resources in a decreasing priority
order. If the PBR of a logical channel is set to <em>infinity</em>, the
MAC entity shall allocate resources for all the data that is available
for transmission on the logical channel before meeting the PBR of the
lower priority logical channel(s);</p>
<p>2&gt; decrement <em>Bj</em> by the total size of MAC SDUs served to
logical channel <em>j</em> above;</p>
<p>2&gt; if any resources remain, all the logical channels selected in
clause 5.4.3.1.2 are served in a strict decreasing priority order
(regardless of the value of <em>Bj</em>) until either the data for that
logical channel or the UL grant is exhausted, whichever comes first.
Logical channels configured with equal priority should be served
equally.</p>
<p>NOTE 1: The value of <em>Bj</em> can be negative.</p>
<p>If the MAC entity is requested to simultaneously transmit multiple
MAC PDUs, or if the MAC entity receives the multiple UL grants within
one or more coinciding PDCCH occasions (i.e. on different Serving
Cells), it is up to UE implementation in which order the grants are
processed.</p>
<p>The UE shall also follow the rules below during the scheduling
procedures above:</p>
<p>- the UE should not segment an RLC SDU (or partially transmitted SDU
or retransmitted RLC PDU) if the whole SDU (or partially transmitted SDU
or retransmitted RLC PDU) fits into the remaining resources of the
associated MAC entity;</p>
<p>- if the UE segments an RLC SDU from the logical channel, it shall
maximize the size of the segment to fill the grant of the associated MAC
entity as much as possible;</p>
<p>- the UE should maximise the transmission of data;</p>
<p>- if the MAC entity is given a UL grant size that is equal to or
larger than 8 bytes (when eLCID is not used) or 10 bytes (when eLCID is
used) while having data available and allowed (according to clause
5.4.3.1) for transmission, the MAC entity shall not transmit only
padding BSR and/or padding.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity is configured with
<em>enhancedSkipUplinkTxDynamic</em> with value <em>true</em> and the
grant indicated to the HARQ entity was addressed to a C-RNTI, or if the
MAC entity is configured with <em>enhancedSkipUplinkTxConfigured</em>
with value <em>true</em> and the grant indicated to the HARQ entity is a
configured uplink grant:</p>
<p>2&gt; if there is no UCI to be multiplexed on this PUSCH transmission
as specified in TS 38.213 [6]; and</p>
<p>2&gt; if there is no aperiodic CSI requested for this PUSCH
transmission as specified in TS 38.212 [9]; and</p>
<p>2&gt; if the MAC PDU includes zero MAC SDUs; and</p>
<p>2&gt; if the MAC PDU includes only the periodic BSR and there is no
data available for any LCG, or the MAC PDU includes only the padding
BSR:</p>
<p>3&gt; not generate a MAC PDU for the HARQ entity.</p>
<p>1&gt; else if the MAC entity is configured with
<em>skipUplinkTxDynamic</em> with value <em>true</em> and the grant
indicated to the HARQ entity was addressed to a C-RNTI, or the grant
indicated to the HARQ entity is a configured uplink grant:</p>
<p>2&gt; if there is no aperiodic CSI requested for this PUSCH
transmission as specified in TS 38.212 [9]; and</p>
<p>2&gt; if the MAC PDU includes zero MAC SDUs; and</p>
<p>2&gt; if the MAC PDU includes only the periodic BSR and there is no
data available for any LCG, or the MAC PDU includes only the padding
BSR:</p>
<p>3&gt; not generate a MAC PDU for the HARQ entity.</p>
<p>Logical channels shall be prioritised in accordance with the
following order (highest priority listed first):</p>
<p>- MAC CE for C-RNTI, or data from UL-CCCH;</p>
<p>- MAC CE for (Enhanced) BFR, or MAC CE for Configured Grant
Confirmation, or MAC CE for Multiple Entry Configured Grant
Confirmation;</p>
<p>- MAC CE for Sidelink Configured Grant Confirmation;</p>
<p>- MAC CE for LBT failure;</p>
<p>- MAC CE for Timing Advance Report;</p>
<p>- MAC CE for SL-BSR prioritized according to clause 5.22.1.6;</p>
<p>- MAC CE for (Extended) BSR, with exception of BSR included for
padding;</p>
<p>- MAC CE for (Enhanced) Single Entry PHR, or MAC CE for (Enhanced)
Multiple Entry PHR;</p>
<p>- MAC CE for Positioning Measurement Gap Activation/Deactivation
Request;</p>
<p>- MAC CE for the number of Desired Guard Symbols;</p>
<p>- MAC CE for Case-6 Timing Request;</p>
<p>- MAC CE for (Extended) Pre-emptive BSR;</p>
<p>- MAC CE for SL-BSR, with exception of SL-BSR prioritized according
to clause 5.22.1.6 and SL-BSR included for padding;</p>
<p>- MAC CE for IAB-MT Recommended Beam Indication, or MAC CE for
Desired IAB-MT PSD range, or MAC CE for Desired DL Tx Power
Adjustment;</p>
<p>- data from any Logical Channel, except data from UL-CCCH;</p>
<p>- MAC CE for Recommended bit rate query;</p>
<p>- MAC CE for BSR included for padding;</p>
<p>- MAC CE for SL-BSR included for padding.</p>
<p>NOTE 2: Prioritization among MAC CEs of same priority is up to UE
implementation.</p>
<p>The MAC entity shall prioritize any MAC CE listed in a higher order
than 'data from any Logical Channel, except data from UL-CCCH' over NR
sidelink transmission.</p>
<h4 id="multiplexing-of-mac-control-elements-and-mac-sdus">5.4.3.2
Multiplexing of MAC Control Elements and MAC SDUs</h4>
<p>The MAC entity shall multiplex MAC CEs and MAC SDUs in a MAC PDU
according to clauses 5.4.3.1 and 6.1.2.</p>
<p>NOTE: Content of a MAC PDU does not change after being built for
transmission on a dynamic uplink grant, regardless of LBT outcome.</p>
<h3 id="scheduling-request">5.4.4 Scheduling Request</h3>
<p>The Scheduling Request (SR) is used for requesting UL-SCH resources
for new transmission.</p>
<p>The MAC entity may be configured with zero, one, or more SR
configurations. An SR configuration consists of a set of PUCCH resources
for SR across different BWPs and cells. For a logical channel or for
SCell beam failure recovery (see clause 5.17) and for consistent LBT
failure recovery (see clause 5.21), at most one PUCCH resource for SR is
configured per BWP. For a logical channel serving a radio bearer
configured with SDT, PUCCH resource for SR is not configured for SDT.
For beam failure recovery of BFD-RS set(s) of Serving Cell, up to two
PUCCH resources for SR is configured per BWP. For positioning
measurement gap activation/deactivation request, a dedicated SR
configuration is configured.</p>
<p>Each SR configuration corresponds to one or more logical channels
and/or to SCell beam failure recovery and/or to consistent LBT failure
recovery and/or to beam failure recovery of a BFD-RS set and/or to
positioning measurement gap activation/deactivation request. Each
logical channel, SCell beam failure recovery, beam failure recovery of a
BFD-RS set and consistent LBT failure recovery, may be mapped to zero or
one SR configuration, which is configured by RRC. The SR configuration
of the logical channel that triggered a BSR (clause 5.4.5) or the SCell
beam failure recovery or the beam failure recovery of a BFD-RS set or
the consistent LBT failure recovery (clause 5.21) (if such a
configuration exists) or positioning measurement gap
activation/deactivation request (clause 5.25) is considered as
corresponding SR configuration for the triggered SR. Any SR
configuration may be used for an SR triggered by Pre-emptive BSR (clause
5.4.7) or Timing Advance reporting (clause 5.4.8).</p>
<p>RRC configures the following parameters for the scheduling request
procedure:</p>
<p>- <em>sr-ProhibitTimer</em> (per SR configuration);</p>
<p>- <em>sr-TransMax</em> (per SR configuration).</p>
<p>The following UE variables are used for the scheduling request
procedure:</p>
<p>- <em>SR_COUNTER</em> (per SR configuration).</p>
<p>If an SR is triggered and there are no other SRs pending
corresponding to the same SR configuration, the MAC entity shall set the
<em>SR_COUNTER</em> of the corresponding SR configuration to 0.</p>
<p>When an SR is triggered, it shall be considered as pending until it
is cancelled.</p>
<p>All pending SR(s) for BSR triggered according to the BSR procedure
(clause 5.4.5) prior to the MAC PDU assembly shall be cancelled and each
respective <em>sr-ProhibitTimer</em> shall be stopped when the MAC PDU
is transmitted and this PDU includes a Long or Short BSR MAC CE which
contains buffer status up to (and including) the last event that
triggered a BSR (see clause 5.4.5) prior to the MAC PDU assembly. All
pending SR(s) for BSR triggered according to the BSR procedure (clause
5.4.5) shall be cancelled and each respective <em>sr-ProhibitTimer</em>
shall be stopped when the UL grant(s) can accommodate all pending data
available for transmission.</p>
<p>The MAC entity shall for each pending SR not triggered according to
the BSR procedure (clause 5.4.5) for a Serving Cell:</p>
<p>1&gt; if this SR was triggered by Pre-emptive BSR procedure (see
clause 5.4.7) prior to the MAC PDU assembly and a MAC PDU containing the
relevant Pre-emptive BSR MAC CE is transmitted; or</p>
<p>1&gt; if this SR was triggered by beam failure recovery (see clause
5.17) of an SCell and a MAC PDU is transmitted and this PDU includes a
MAC CE for BFR which contains beam failure recovery information for this
SCell; or</p>
<p>1&gt; if this SR was triggered by beam failure recovery (see clause
5.17) for a BFD-RS set of a Serving Cell and a MAC PDU is transmitted
and this PDU includes an Enhanced BFR MAC CE or a Truncated Enhanced BFR
MAC CE which contains beam failure recovery information for this BFD-RS
set of the Serving Cell; or</p>
<p>1&gt; if this SR was triggered by beam failure recovery (see clause
5.17) of an SCell and this SCell is deactivated (see clause 5.9); or</p>
<p>1&gt; if this SR was triggered by beam failure recovery (see clause
5.17) for a BFD-RS set of an SCell and this SCell is deactivated (see
clause 5.9); or</p>
<p>1&gt; if the SR is triggered by positioning measurement gap
activation/deactivation request (see clause 5.25) and the Positioning
Measurement Gap Activation/Deactivation Request MAC CE that triggers the
SR has already been cancelled; or</p>
<p>1&gt; if this SR was triggered by consistent LBT failure recovery
(see clause 5.21) of an SCell and a MAC PDU is transmitted and the MAC
PDU includes an LBT failure MAC CE that indicates consistent LBT failure
for this SCell; or</p>
<p>1&gt; if this SR was triggered by consistent LBT failure recovery
(see clause 5.21) of an SCell and all the triggered consistent LBT
failure(s) for this SCell are cancelled; or</p>
<p>1&gt; if this SR was triggered by Timing Advance reporting (see
clause 5.4.8) and all the triggered Timing Advance reports are
cancelled:</p>
<p>2&gt; cancel the pending SR and stop the corresponding
<em>sr-ProhibitTimer</em>, if running.</p>
<p>Only PUCCH resources on a BWP which is active at the time of SR
transmission occasion are considered valid.</p>
<p>As long as at least one SR is pending, the MAC entity shall for each
pending SR:</p>
<p>1&gt; if the MAC entity has no valid PUCCH resource configured for
the pending SR:</p>
<p>2&gt; initiate a Random Access procedure (see clause 5.1) on the
SpCell and cancel the pending SR.</p>
<p>1&gt; else, for the SR configuration corresponding to the pending
SR:</p>
<p>2&gt; when the MAC entity has an SR transmission occasion on the
valid PUCCH resource for SR configured; and</p>
<p>2&gt; if <em>sr-ProhibitTimer</em> is not running at the time of the
SR transmission occasion; and</p>
<p>2&gt; if the PUCCH resource for the SR transmission occasion does not
overlap with a measurement gap:</p>
<p>3&gt; if the PUCCH resource for the SR transmission occasion overlaps
with neither a UL-SCH resource whose simultaneous transmission with the
SR is not allowed by configuration of <em>simultaneousPUCCH-PUSCH</em>
or <em>simultaneousPUCCH-PUSCH-SecondaryPUCCHgroup</em> or
<em>simultaneousSR-PUSCH-diffPUCCH-Groups</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority-SecondaryPUCCHgroup</em> nor an
SL-SCH resource; or</p>
<p>3&gt; if the MAC entity is able to perform this SR transmission
simultaneously with the transmission of the SL-SCH resource; or</p>
<p>3&gt; if the MAC entity is configured with
<em>lch-basedPrioritization</em>, and the PUCCH resource for the SR
transmission occasion does not overlap with the PUSCH duration of an
uplink grant received in a Random Access Response or with the PUSCH
duration of an uplink grant addressed to Temporary C-RNTI or with the
PUSCH duration of a MSGA payload, and the PUCCH resource for the SR
transmission occasion for the pending SR triggered as specified in
clause 5.4.5 overlaps with any other UL-SCH resource(s), and the
physical layer can signal the SR on one valid PUCCH resource for SR, and
the priority of the logical channel that triggered SR is higher than the
priority of the uplink grant(s) for any UL-SCH resource(s) where the
uplink grant was not already de-prioritized and its simultaneous
transmission with the SR is not allowed by configuration of
<em>simultaneousPUCCH-PUSCH</em> or
<em>simultaneousPUCCH-PUSCH-SecondaryPUCCHgroup</em> or
<em>simultaneousSR-PUSCH-diffPUCCHgroups</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority-SecondaryPUCCHgroup</em>, and
the priority of the uplink grant is determined as specified in clause
5.4.1; or</p>
<p>3&gt; if both <em>sl-PrioritizationThres</em> and
<em>ul-PrioritizationThres</em> are configured and the PUCCH resource
for the SR transmission occasion for the pending SR triggered as
specified in clause 5.22.1.5 overlaps with any UL-SCH resource(s)
carrying a MAC PDU, and the value of the priority of the triggered SR
determined as specified in clause 5.22.1.5 is lower than
<em>sl-PrioritizationThres</em> and the value of the highest priority of
the logical channel(s) in the MAC PDU is higher than or equal to
<em>ul-PrioritizationThres</em> and any MAC CE prioritized as described
in clause 5.4.3.1.3 is not included in the MAC PDU and the MAC PDU is
not prioritized by upper layer according to TS 23.287 [19]; or</p>
<p>3&gt; if an SL-SCH resource overlaps with the PUCCH resource for the
SR transmission occasion for the pending SR triggered as specified in
clause 5.4.5, and the MAC entity is not able to perform this SR
transmission simultaneously with the transmission of the SL-SCH
resource, and either transmission on the SL-SCH resource is not
prioritized as described in clause 5.22.1.3.1a or the priority value of
the logical channel that triggered SR is lower than
<em>ul-PrioritizationThres</em>, if configured; or</p>
<p>3&gt; if an SL-SCH resource overlaps with the PUCCH resource for the
SR transmission occasion for the pending SR triggered as specified in
clause 5.22.1.5, and the MAC entity is not able to perform this SR
transmission simultaneously with the transmission of the SL-SCH
resource, and the priority of the triggered SR determined as specified
in clause 5.22.1.5 is higher than the priority of the MAC PDU determined
as specified in clause 5.22.1.3.1a for the SL-SCH resource:</p>
<p>4&gt; consider the SR transmission as a prioritized SR
transmission.</p>
<p>4&gt; consider the other overlapping uplink grant(s), if any, as a
de-prioritized uplink grant(s), except for the overlapping uplink
grant(s) whose simultaneous transmission is allowed by configuration of
<em>simultaneousPUCCH-PUSCH</em> or
<em>simultaneousPUCCH-PUSCH-SecondaryPUCCHgroup</em> or
<em>simultaneousSR-PUSCH-diffPUCCH-Groups</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority</em> or
<em>simultaneousPUCCH-PUSCH-SamePriority-SecondaryPUCCHgroup</em>;</p>
<p>4&gt; if the de-prioritized uplink grant(s) is a configured uplink
grant configured with <em>autonomousTx</em> whose PUSCH has already
started:</p>
<p>5&gt; stop the <em>configuredGrantTimer</em> for the corresponding
HARQ process of the de-prioritized uplink grant(s);</p>
<p>5&gt; stop the <em>cg-RetransmissionTimer</em> for the corresponding
HARQ process of the de-prioritized uplink grant(s).</p>
<p>4&gt; if <em>SR_COUNTER</em> &lt; <em>sr-TransMax</em>:</p>
<p>5&gt; instruct the physical layer to signal the SR on one valid PUCCH
resource for SR;</p>
<p>5&gt; if LBT failure indication is not received from lower
layers:</p>
<p>6&gt; increment <em>SR_COUNTER</em> by 1;</p>
<p>6&gt; start the <em>sr-ProhibitTimer</em>.</p>
<p>5&gt; else if <em>lbt-FailureRecoveryConfig</em> is not
configured:</p>
<p>6&gt; increment <em>SR_COUNTER</em> by 1.</p>
<p>4&gt; else:</p>
<p>5&gt; notify RRC to release PUCCH for all Serving Cells;</p>
<p>5&gt; notify RRC to release SRS for all Serving Cells;</p>
<p>5&gt; clear any configured downlink assignments and uplink
grants;</p>
<p>5&gt; clear any PUSCH resources for semi-persistent CSI
reporting;</p>
<p>5&gt; initiate a Random Access procedure (see clause 5.1) on the
SpCell and cancel all pending SRs.</p>
<p>3&gt; else:</p>
<p>4&gt; consider the SR transmission as a de-prioritized SR
transmission.</p>
<p>NOTE 1: Except for SR for SCell beam failure recovery, the selection
of which valid PUCCH resource for SR to signal SR on when the MAC entity
has more than one overlapping valid PUCCH resource for the SR
transmission occasion is left to UE implementation.</p>
<p>NOTE 2: If more than one individual SR triggers an instruction from
the MAC entity to the PHY layer to signal the SR on the same valid PUCCH
resource, the <em>SR_COUNTER</em> for the relevant SR configuration is
incremented only once.</p>
<p>NOTE 3: When the MAC entity has pending SR for SCell beam failure
recovery and the MAC entity has one or more PUCCH resources (other than
PUCCH resources of pending SR for beam failure recovery of a BFD-RS set)
overlapping with PUCCH resource for SCell beam failure recovery for the
SR transmission occasion, the MAC entity considers only the PUCCH
resource for SCell beam failure recovery as valid. When the MAC entity
has pending SR for beam failure recovery of a BFD-RS set of Serving Cell
and the MAC entity has one or more PUCCH resources (other than PUCCH
resources of pending SR for beam failure recovery) overlapping with
PUCCH resource for beam failure recovery of that BFD-RS set for the SR
transmission occasion, the MAC entity considers only the PUCCH resource
for beam failure recovery of that BFD-RS set as valid.</p>
<p>NOTE 4: For a UE operating in a semi-static channel access mode as
described in TS 37.213 [18], PUCCH resources overlapping with the set of
consecutive symbols where the UE does not transmit before the start of a
next channel occupancy time are not considered valid.</p>
<p>NOTE 5: If the MAC entity is configured with
<em>lch-basedPrioritization</em>, the MAC entity does not take UCI
multiplexing according to the procedure specified in TS 38.213 [6] into
account when determining whether the valid PUCCH resource for the SR
transmission can be signalled by the physical layer and the SR
transmission occasion overlaps with the PUSCH duration of an uplink
grant of a MSGA payload.</p>
<p>NOTE 6: When the MAC entity has PUCCH resource for pending SR for
SCell beam failure recovery overlapping with PUCCH resource for pending
SR for beam failure recovery of a BFD-RS set for the SR transmission
occasion, it's up to UE implementation to select PUCCH resource for
SCell beam failure recovery or PUCCH resource for beam failure recovery
of a BFD-RS set.</p>
<p>The MAC entity may stop, if any, ongoing Random Access procedure due
to a pending SR for BSR, which was initiated by the MAC entity prior to
the MAC PDU assembly and which has no valid PUCCH resources configured,
if:</p>
<p>- a MAC PDU is transmitted using a UL grant other than a UL grant
provided by Random Access Response or a UL grant determined as specified
in clause 5.1.2a for the transmission of the MSGA payload, and this PDU
includes a BSR MAC CE which contains buffer status up to (and including)
the last event that triggered a BSR (see clause 5.4.5) prior to the MAC
PDU assembly; or</p>
<p>- the UL grant(s) can accommodate all pending data available for
transmission.</p>
<p>The MAC entity may stop, if any, ongoing Random Access procedure due
to a pending SR for SL-BSR, which has no valid PUCCH resources
configured, if:</p>
<p>- a MAC PDU is transmitted using a UL grant other than a UL grant
provided by Random Access Response or a UL grant determined as specified
in clause 5.1.2a for the transmission of the MSGA payload, and the
ongoing Random Access procedure was initiated by the MAC entity prior to
the MAC PDU assembly, and this PDU includes an SL-BSR MAC CE which
contains buffer status up to (and including) the last event that
triggered an SL-BSR (see clause 5.22.1.6) prior to the MAC PDU assembly;
or</p>
<p>- the SL grant(s) can accommodate all pending data available for
transmission, and the ongoing Random Access procedure was initiated by
the MAC entity prior to the sidelink MAC PDU assembly.</p>
<p>The MAC entity may stop, if any, ongoing Random Access procedure due
to a pending SR for SL-CSI reporting, which has no valid PUCCH resources
configured, if:</p>
<p>- the SL grant can accommodate SL-CSI reporting MAC CE for
transmission.</p>
<p>The MAC entity may stop, if any, ongoing Random Access procedure due
to a pending SR for SL-DRX command indication, which has no valid PUCCH
resources configured, if:</p>
<p>- the SL grant can accommodate SL-DRX command indication for
transmission.</p>
<p>The MAC entity may stop, if any, ongoing Random Access procedure due
to a pending SR for BFR of an SCell, which has no valid PUCCH resources
configured, if:</p>
<p>- a MAC PDU is transmitted using a UL grant other than a UL grant
provided by Random Access Response or a UL grant determined as specified
in clause 5.1.2a for the transmission of the MSGA payload, and this PDU
contains a MAC CE for BFR which includes beam failure recovery
information of that SCell; or</p>
<p>- the SCell is deactivated (as specified in clause 5.9) and all
triggered BFRs for SCells are cancelled.</p>
<p>The MAC entity may stop, if any, ongoing Random Access procedure due
to a pending SR for BFR of a BFD-RS set of a Serving Cell, which has no
valid PUCCH resources configured, if:</p>
<p>- a MAC PDU is transmitted using a UL grant other than a UL grant
provided by Random Access Response or a UL grant determined as specified
in clause 5.1.2a for the transmission of the MSGA payload, and this PDU
contains an Enhanced BFR MAC CE or a Truncated Enhanced BFR MAC CE which
includes beam failure recovery information of that BFD-RS set of the
Serving Cell.</p>
<p>The MAC entity may stop, if any, ongoing Random Access procedure due
to a pending SR for consistent LBT failure recovery, which has no valid
PUCCH resources configured, if:</p>
<p>- a MAC PDU is transmitted using a UL grant other than a UL grant
provided by Random Access Response or a UL grant determined as specified
in clause 5.1.2a for the transmission of the MSGA payload, and this PDU
includes an LBT failure MAC CE that indicates consistent LBT failure for
all the SCells that triggered consistent LBT failure; or</p>
<p>- all the SCells that triggered consistent LBT failure recovery are
deactivated (see clause 5.9).</p>
<p>The MAC entity may stop, if any, ongoing Random Access procedure due
to a pending SR for positioning measurement gap activation/deactivation
request, which has no valid PUCCH resources configured, if:</p>
<p>- the Positioning Measurement Gap Activation/Deactivation Request MAC
CE that triggers the SR corresponding to the Random Access procedure has
already been cancelled.</p>
<p>The MAC entity may stop, if any, ongoing Random Access procedure due
to a pending SR for Timing Advance report, which has no valid PUCCH
resources configured, if:</p>
<p>- a MAC PDU is transmitted using a UL grant other than a UL grant
provided by Random Access Response or a UL grant determined as specified
in clause 5.1.2a for the transmission of the MSGA payload, and this PDU
includes a Timing Advance Report MAC CE (see clause 5.4.8).</p>
<h3 id="buffer-status-reporting">5.4.5 Buffer Status Reporting</h3>
<p>The Buffer Status reporting (BSR) procedure is used to provide the
serving gNB with information about UL data volume in the MAC entity.</p>
<p>RRC configures the following parameters to control the BSR:</p>
<p>- <em>periodicBSR-Timer</em>;</p>
<p>- <em>retxBSR-Timer</em>;</p>
<p>- <em>logicalChannelSR-DelayTimerApplied</em>;</p>
<p>- <em>logicalChannelSR-DelayTimer</em>;</p>
<p>- <em>logicalChannelSR-Mask</em>;</p>
<p>- <em>logicalChannelGroup</em>,
<em>logicalChannelGroupIAB-Ext</em>;</p>
<p>- <em>sdt-LogicalChannelSR-DelayTimer</em>.</p>
<p>Each logical channel may be allocated to an LCG using the
<em>logicalChannelGroup</em>. The maximum number of LCGs is eight except
for IAB-MTs configured with <em>logicalChannelGroupIAB-Ext</em>, for
which the maximum number of LCGs is 256.</p>
<p>The MAC entity determines the amount of UL data available for a
logical channel according to the data volume calculation procedure in
TSs 38.322 [3] and 38.323 [4].</p>
<p>A BSR shall be triggered if any of the following events occur for
activated cell group:</p>
<p>- UL data, for a logical channel which belongs to an LCG, becomes
available to the MAC entity; and either</p>
<p>- this UL data belongs to a logical channel with higher priority than
the priority of any logical channel containing available UL data which
belong to any LCG; or</p>
<p>- none of the logical channels which belong to an LCG contains any
available UL data.</p>
<p>in which case the BSR is referred below to as 'Regular BSR';</p>
<p>- UL resources are allocated and number of padding bits is equal to
or larger than the size of the Buffer Status Report MAC CE plus its
subheader, in which case the BSR is referred below to as 'Padding
BSR';</p>
<p>- <em>retxBSR-Timer</em> expires, and at least one of the logical
channels which belong to an LCG contains UL data, in which case the BSR
is referred below to as 'Regular BSR';</p>
<p>- <em>periodicBSR-Timer</em> expires, in which case the BSR is
referred below to as 'Periodic BSR'.</p>
<p>NOTE 1: When Regular BSR triggering events occur for multiple logical
channels simultaneously, each logical channel triggers one separate
Regular BSR.</p>
<p>For Regular BSR, the MAC entity shall:</p>
<p>1&gt; if the BSR is triggered for a logical channel for which
<em>logicalChannelSR-DelayTimerApplied</em> with value <em>true</em> is
configured by upper layers and SDT procedure is not ongoing according to
clause 5.27:</p>
<p>2&gt; start or restart the <em>logicalChannelSR-DelayTimer</em>.</p>
<p>1&gt; else if BSR is triggered for a logical channel for which
<em>logicalChannelSR-DelayTimerApplied</em> with value <em>true</em> is
configured by upper layers and SDT procedure is ongoing according to
clause 5.27:</p>
<p>2&gt; start or restart <em>logicalChannelSR-DelayTimer</em> with the
value as configured by the <em>sdt-LogicalChannelSR-DelayTimer</em>.</p>
<p>1&gt; else:</p>
<p>2&gt; if running, stop the <em>logicalChannelSR-DelayTimer</em>.</p>
<p>For Regular and Periodic BSR, the MAC entity for which
<em>logicalChannelGroupIAB-Ext</em> is not configured by upper layers
shall:</p>
<p>1&gt; if more than one LCG has data available for transmission when
the MAC PDU containing the BSR is to be built:</p>
<p>2&gt; report Long BSR for all LCGs which have data available for
transmission.</p>
<p>1&gt; else:</p>
<p>2&gt; report Short BSR.</p>
<p>For Regular and Periodic BSR, the MAC entity for which
<em>logicalChannelGroupIAB-Ext</em> is configured by upper layers
shall:</p>
<p>1&gt; if more than one LCG has data available for transmission when
the MAC PDU containing the BSR is to be built:</p>
<p>2&gt; if the maximum LCG ID among the configured LCGs is 7 or
lower:</p>
<p>3&gt; report Long BSR for all LCGs which have data available for
transmission.</p>
<p>2&gt; else:</p>
<p>3&gt; report Extended Long BSR for all LCGs which have data available
for transmission.</p>
<p>1&gt; else:</p>
<p>2&gt; report Extended Short BSR.</p>
<p>For Padding BSR, the MAC entity for which
<em>logicalChannelGroupIAB-Ext</em> is not configured by upper layers
shall:</p>
<p>1&gt; if the number of padding bits is equal to or larger than the
size of the Short BSR plus its subheader but smaller than the size of
the Long BSR plus its subheader:</p>
<p>2&gt; if more than one LCG has data available for transmission when
the BSR is to be built:</p>
<p>3&gt; if the number of padding bits is equal to the size of the Short
BSR plus its subheader:</p>
<p>4&gt; report Short Truncated BSR of the LCG with the highest priority
logical channel with data available for transmission.</p>
<p>3&gt; else:</p>
<p>4&gt; report Long Truncated BSR of the LCG(s) with the logical
channels having data available for transmission following a decreasing
order of the highest priority logical channel (with or without data
available for transmission) in each of these LCG(s), and in case of
equal priority, in increasing order of LCGID.</p>
<p>2&gt; else:</p>
<p>3&gt; report Short BSR.</p>
<p>1&gt; else if the number of padding bits is equal to or larger than
the size of the Long BSR plus its subheader:</p>
<p>2&gt; report Long BSR for all LCGs which have data available for
transmission.</p>
<p>For Padding BSR, the MAC entity for which
<em>logicalChannelGroupIAB-Ext</em> is configured by upper layers
shall:</p>
<p>1&gt; if the number of padding bits is equal to or larger than the
size of the Extended Short BSR plus its subheader but smaller than the
size of the Extended Long BSR plus its subheader:</p>
<p>2&gt; if more than one LCG has data available for transmission when
the BSR is to be built:</p>
<p>3&gt; if the number of padding bits is smaller than the size of the
Extended Long Truncated BSR with zero Buffer Size field plus its
subheader:</p>
<p>4&gt; report Extended Short Truncated BSR of the LCG with the highest
priority logical channel with data available for transmission.</p>
<p>3&gt; else:</p>
<p>4&gt; report Extended Long Truncated BSR of the LCG(s) with the
logical channels having data available for transmission following a
decreasing order of the highest priority logical channel (with or
without data available for transmission) in each of these LCG(s), and in
case of equal priority, in increasing order of LCGID.</p>
<p>2&gt; else:</p>
<p>3&gt; report Extended Short BSR.</p>
<p>1&gt; else if the number of padding bits is equal to or larger than
the size of the Extended Long BSR plus its subheader:</p>
<p>2&gt; report Extended Long BSR for all LCGs which have data available
for transmission.</p>
<p>For BSR triggered by <em>retxBSR-Timer</em> expiry, the MAC entity
considers that the logical channel that triggered the BSR is the highest
priority logical channel that has data available for transmission at the
time the BSR is triggered.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the Buffer Status reporting procedure determines that at
least one BSR has been triggered and not cancelled:</p>
<p>2&gt; if UL-SCH resources are available for a new transmission and
the UL-SCH resources can accommodate the BSR MAC CE plus its subheader
as a result of logical channel prioritization:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the BSR MAC CE(s) as defined in clause 6.1.3.1;</p>
<p>3&gt; start or restart <em>periodicBSR-Timer</em> except when all the
generated BSRs are long or short Truncated or Extended long or short
Truncated BSRs;</p>
<p>3&gt; start or restart <em>retxBSR-Timer</em>.</p>
<p>2&gt; if a Regular BSR has been triggered and
<em>logicalChannelSR-DelayTimer</em> is not running:</p>
<p>3&gt; if there is no UL-SCH resource available for a new
transmission; or</p>
<p>3&gt; if the MAC entity is configured with configured uplink grant(s)
and the Regular BSR was triggered for a logical channel for which
<em>logicalChannelSR-Mask</em> is set to <em>false</em>; or</p>
<p>3&gt; if the UL-SCH resources available for a new transmission do not
meet the LCP mapping restrictions (see clause 5.4.3.1) configured for
the logical channel that triggered the BSR:</p>
<p>4&gt; trigger a Scheduling Request.</p>
<p>NOTE 2: UL-SCH resources are considered available if the MAC entity
has been configured with, receives, or determines an uplink grant. If
the MAC entity has determined at a given point in time that UL-SCH
resources are available, this need not imply that UL-SCH resources are
available for use at that point in time.</p>
<p>A MAC PDU shall contain at most one BSR MAC CE, even when multiple
events have triggered a BSR. The Regular BSR and the Periodic BSR shall
have precedence over the padding BSR.</p>
<p>The MAC entity shall restart <em>retxBSR-Timer</em> upon reception of
a grant for transmission of new data on any UL-SCH.</p>
<p>All triggered BSRs may be cancelled when the UL grant(s) can
accommodate all pending data available for transmission but is not
sufficient to additionally accommodate the BSR MAC CE plus its
subheader. All BSRs triggered prior to MAC PDU assembly shall be
cancelled when a MAC PDU is transmitted and this PDU includes a Long,
Extended Long, Short, or Extended Short BSR MAC CE which contains buffer
status up to (and including) the last event that triggered a BSR prior
to the MAC PDU assembly.</p>
<p>NOTE 3: MAC PDU assembly can happen at any point in time between
uplink grant reception and actual transmission of the corresponding MAC
PDU. BSR and SR can be triggered after the assembly of a MAC PDU which
contains a BSR MAC CE, but before the transmission of this MAC PDU. In
addition, BSR and SR can be triggered during MAC PDU assembly.</p>
<p>NOTE 4: Void</p>
<p>NOTE 5: If a HARQ process is configured with
<em>cg-RetransmissionTimer</em> and if the BSR is already included in a
MAC PDU for transmission on configured grant by this HARQ process, but
not yet transmitted by lower layers, it is up to UE implementation how
to handle the BSR content.</p>
<h3 id="power-headroom-reporting">5.4.6 Power Headroom Reporting</h3>
<p>The Power Headroom reporting procedure is used to provide the serving
gNB with the following information:</p>
<p>- Type 1 power headroom: the difference between the nominal UE
maximum transmit power and the estimated power for UL-SCH transmission
per activated Serving Cell;</p>
<p>- Type 2 power headroom: the difference between the nominal UE
maximum transmit power and the estimated power for UL-SCH and PUCCH
transmission on SpCell of the other MAC entity (i.e. E-UTRA MAC entity
in EN-DC, NE-DC, and NGEN-DC cases);</p>
<p>- Type 3 power headroom: the difference between the nominal UE
maximum transmit power and the estimated power for SRS transmission per
activated Serving Cell;</p>
<p>- MPE P-MPR: the power backoff to meet the MPE FR2 requirements for a
Serving Cell operating on FR2.</p>
<p>RRC controls Power Headroom reporting by configuring the following
parameters:</p>
<p>- <em>phr-PeriodicTimer</em>;</p>
<p>- <em>phr-ProhibitTimer</em>;</p>
<p>- <em>phr-Tx-PowerFactorChange</em>;</p>
<p>- <em>phr-Type2OtherCell</em>;</p>
<p>- <em>phr-ModeOtherCG</em>;</p>
<p>- <em>multiplePHR</em>;</p>
<p>- <em>mpe-Reporting-FR2</em>;</p>
<p>- <em>mpe-ProhibitTimer</em>;</p>
<p>- <em>mpe-Threshold</em>;</p>
<p>- <em>numberOfN</em>;</p>
<p>- <em>mpe-ResourcePoolToAddModList</em>;</p>
<p>- <em>twoPHRMode</em>.</p>
<p>A Power Headroom Report (PHR) shall be triggered if any of the
following events occur:</p>
<p>- <em>phr-ProhibitTimer</em> expires or has expired and the path loss
has changed more than <em>phr-Tx-PowerFactorChange</em> dB for at least
one RS used as pathloss reference for one activated Serving Cell of any
MAC entity of which the active DL BWP is not dormant BWP since the last
transmission of a PHR in this MAC entity when the MAC entity has UL
resources for new transmission;</p>
<p>NOTE 1: The path loss variation for one cell assessed above is
between the pathloss measured at present time on the current pathloss
reference and the pathloss measured at the transmission time of the last
transmission of PHR on the pathloss reference in use at that time,
irrespective of whether the pathloss reference has changed in between.
The current pathloss reference for this purpose does not include any
pathloss reference configured using <em>pathlossReferenceRS-Pos</em> in
TS 38.331 [5].</p>
<p>- <em>phr-PeriodicTimer</em> expires;</p>
<p>- upon configuration or reconfiguration of the power headroom
reporting functionality by upper layers, which is not used to disable
the function;</p>
<p>- activation of an SCell of any MAC entity with configured uplink of
which <em>firstActiveDownlinkBWP-Id</em> is not set to dormant BWP;</p>
<p>- activation of an SCG;</p>
<p>- addition of the PSCell except if the SCG is deactivated (i.e.
PSCell is newly added or changed);</p>
<p>- <em>phr-ProhibitTimer</em> expires or has expired, when the MAC
entity has UL resources for new transmission, and the following is true
for any of the activated Serving Cells of any MAC entity with configured
uplink:</p>
<p>- there are UL resources allocated for transmission or there is a
PUCCH transmission on this cell, and the required power backoff due to
power management (as allowed by P-MPR<sub>c</sub> as specified in TS
38.101-1 [14], TS 38.101-2 [15], and TS 38.101-3 [16]) for this cell has
changed more than <em>phr-Tx-PowerFactorChange</em> dB since the last
transmission of a PHR when the MAC entity had UL resources allocated for
transmission or PUCCH transmission on this cell.</p>
<p>- Upon switching of activated BWP from dormant BWP to non-dormant DL
BWP of an SCell of any MAC entity with configured uplink;</p>
<p>- if <em>mpe-Reporting-FR2</em> is configured, and
<em>mpe-ProhibitTimer</em> is not running:</p>
<p>- the measured P-MPR applied to meet FR2 MPE requirements as
specified in TS 38.101-2 [15] is equal to or larger than
<em>mpe-Threshold</em> for at least one activated FR2 Serving Cell since
the last transmission of a PHR in this MAC entity; or</p>
<p>- the measured P-MPR applied to meet FR2 MPE requirements as
specified in TS 38.101-2 [15] has changed more than
<em>phr-Tx-PowerFactorChange</em> dB for at least one activated FR2
Serving Cell since the last transmission of a PHR due to the measured
P-MPR applied to meet MPE requirements being equal to or larger than
<em>mpe-Threshold</em> in this MAC entity.</p>
<p>in which case the PHR is referred below to as 'MPE P-MPR report'.</p>
<p>NOTE 2: The MAC entity should avoid triggering a PHR when the
required power backoff due to power management decreases only
temporarily (e.g. for up to a few tens of milliseconds) and it should
avoid reflecting such temporary decrease in the values of
P<sub>CMAX,f,c</sub>/PH when a PHR is triggered by other triggering
conditions.</p>
<p>NOTE 3: If a HARQ process is configured with
<em>cg-RetransmissionTimer</em> and if the PHR is already included in a
MAC PDU for transmission on configured grant by this HARQ process, but
not yet transmitted by lower layers, it is up to UE implementation how
to handle the PHR content.</p>
<p>If the MAC entity has UL resources allocated for a new transmission
the MAC entity shall:</p>
<p>1&gt; if it is the first UL resource allocated for a new transmission
since the last MAC reset:</p>
<p>2&gt; start <em>phr-PeriodicTimer</em>.</p>
<p>1&gt; if the Power Headroom reporting procedure determines that at
least one PHR has been triggered and not cancelled; and</p>
<p>1&gt; if the allocated UL resources can accommodate the MAC CE for
PHR which the MAC entity is configured to transmit, plus its subheader,
as a result of LCP as defined in clause 5.4.3.1:</p>
<p>2&gt; if <em>multiplePHR</em> with value <em>true</em> is
configured:</p>
<p>3&gt; for each activated Serving Cell with configured uplink
associated with any MAC entity of which the active DL BWP is not dormant
BWP; and</p>
<p>3&gt; for each activated Serving Cell with configured uplink
associated with E-UTRA MAC entity:</p>
<p>4&gt; if this MAC entity is configured with <em>twoPHRMode</em>:</p>
<p>5&gt; if this Serving Cell is configured with multiple TRP PUSCH
repetition and the MAC entity this Serving Cell belongs to is configured
with <em>twoPHRMode</em>:</p>
<blockquote>
<p>6&gt; obtain two values of the Type 1 or the value of Type 3 power
headroom for the corresponding uplink carrier as specified in clause 7.7
of TS 38.213 [6] for NR Serving Cell.</p>
</blockquote>
<p>5&gt; else:</p>
<blockquote>
<p>6&gt; obtain the value of the Type 1 or Type 3 power headroom for the
corresponding uplink carrier as specified in clause 7.7 of TS 38.213 [6]
for NR Serving Cell and clause 5.1.1.2 of TS 36.213 [17] for E-UTRA
Serving Cell.</p>
</blockquote>
<p>4&gt; else (i.e. this MAC entity is not configured with
<em>twoPHRMode</em>):</p>
<p>5&gt; if this Serving Cell is configured with multiple TRP PUSCH
repetition and the MAC entity this Serving Cell belongs to is configured
with <em>twoPHRMode</em>:</p>
<p>6&gt; if there is at least one real PUSCH transmission at the slot
where the PHR MAC CE is transmitted:</p>
<p>7&gt; obtain the value of the Type 1 power headroom of the first real
transmission of the corresponding uplink carrier as specified in clause
7.7 of TS 38.213[6] for NR Serving Cell.</p>
<p>6&gt; else if there is no real PUSCH transmission at the slot where
the PHR MAC CE is transmitted:</p>
<p>7&gt; obtain the value of the type 1 power headroom of the reference
PUSCH transmission associated with the <em>SRS-ResourceSet</em> with a
lower <em>SRS-resourceSetID</em> or the value of the type 3 power
headroom for the corresponding uplink carrier as specified in clause 7.7
of TS 38.213[6] for NR Serving Cell.</p>
<p>5&gt; else:</p>
<p>6&gt; obtain the value of the Type 1 or Type 3 power headroom for the
corresponding uplink carrier as specified in clause 7.7 of TS 38.213 [6]
for NR Serving Cell and clause 5.1.1.2 of TS 36.213 [17] for E-UTRA
Serving Cell.</p>
<p>4&gt; if this MAC entity has UL resources allocated for transmission
on this Serving Cell; or</p>
<p>4&gt; if the other MAC entity, if configured, has UL resources
allocated for transmission on this Serving Cell and
<em>phr-ModeOtherCG</em> is set to <em>real</em> by upper layers:</p>
<p>5&gt; obtain the value for the corresponding P<sub>CMAX,f,c</sub>
field from the physical layer.</p>
<p>5&gt; if <em>mpe-Reporting-FR2</em> is configured and this Serving
Cell operates on FR2 and this Serving Cell is associated to this MAC
entity:</p>
<p>6&gt; obtain the value for the corresponding MPE field from the
physical layer.</p>
<p>5&gt; if <em>mpe-Reporting-FR2-r17</em> is configured and this
Serving Cell operates on FR2 and this Serving Cell is associated to this
MAC entity:</p>
<p>6&gt; obtain the value for the corresponding MPE<sub>i</sub> field
from the physical layer;</p>
<p>6&gt; obtain the value for the corresponding Resource<sub>i</sub>
field from the physical layer.</p>
<p>3&gt; if <em>phr-Type2OtherCell</em> with value <em>true</em> is
configured:</p>
<p>4&gt; if the other MAC entity is E-UTRA MAC entity:</p>
<p>5&gt; obtain the value of the Type 2 power headroom for the SpCell of
the other MAC entity (i.e. E-UTRA MAC entity);</p>
<p>5&gt; if <em>phr-ModeOtherCG</em> is set to <em>real</em> by upper
layers:</p>
<p>6&gt; obtain the value for the corresponding P<sub>CMAX,f,c</sub>
field for the SpCell of the other MAC entity (i.e. E-UTRA MAC entity)
from the physical layer.</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
and transmit the Enhanced Multiple entry PHR as defined in clause
6.1.3.49 if this MAC entity is configured with
<em>mpe-Reporting-FR2-r17</em> or the Enhanced Multiple Entry PHR for
multiple TRP MAC CE as defined in clause 6.1.3.51 if this MAC entity is
configured with <em>twoPHRMode</em> or the Multiple Entry PHR MAC CE as
defined in clause 6.1.3.9 otherwise based on the values reported by the
physical layer.</p>
<p>2&gt; else (i.e. Single Entry PHR format is used):</p>
<p>3&gt; if this MAC entity is configured with <em>twoPHRMode</em>:</p>
<p>4&gt; obtain two values of the Type 1 power headroom from the
physical layer for the corresponding uplink carrier of the PCell.</p>
<p>3&gt; else:</p>
<p>4&gt; obtain the value of the Type 1 power headroom from the physical
layer for the corresponding uplink carrier of the PCell.</p>
<p>3&gt; obtain the value for the corresponding P<sub>CMAX,f,c</sub>
field from the physical layer;</p>
<p>3&gt; if <em>mpe-Reporting-FR2</em> is configured and this Serving
Cell operates on FR2:</p>
<p>4&gt; obtain the value for the corresponding MPE field from the
physical layer.</p>
<p>3&gt; if <em>mpe-Reporting-FR2-r17</em> is configured and this
Serving Cell operates on FR2 and this Serving Cell is associated to this
MAC entity:</p>
<p>4&gt; obtain the value for the corresponding MPE<sub>i</sub> field
from the physical layer;</p>
<p>4&gt; obtain the value for the corresponding Resource<sub>i</sub>
field from the physical layer.</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
and transmit the Enhanced Single entry PHR as defined in clause 6.1.3.48
if this MAC entity is configured with <em>mpe-Reporting-FR2-r17</em> or
the Enhanced Single Entry PHR for multiple TRP MAC CE as defined in
clause 6.1.3.50 if this MAC entity is configured with
<em>twoPHRMode</em> or the Single Entry PHR MAC CE as defined in clause
6.1.3.8 otherwise based on the values reported by the physical
layer.</p>
<p>2&gt; if this PHR report is an MPE P-MPR report:</p>
<p>3&gt; start or restart the <em>mpe-ProhibitTimer</em>;</p>
<p>3&gt; cancel triggered MPE P-MPR reporting for Serving Cells included
in the PHR MAC CE.</p>
<p>2&gt; start or restart <em>phr-PeriodicTimer</em>;</p>
<p>2&gt; start or restart <em>phr-ProhibitTimer</em>;</p>
<p>2&gt; cancel all triggered PHR(s).</p>
<p>All triggered PHRs shall be cancelled when there is an ongoing SDT
procedure as in clause 5.27 and the UL grant(s) can accommodate all
pending data available for transmission but is not sufficient to
additionally accommodate the PHR MAC CE plus its subheader.</p>
<h3 id="pre-emptive-buffer-status-reporting">5.4.7 Pre-emptive Buffer
Status Reporting</h3>
<p>The Pre-emptive Buffer Status reporting (Pre-emptive BSR) procedure
is used by an IAB-MT to provide its parent IAB-DU(s) or IAB-donor-DU(s)
with the information about the amount of the data expected to arrive at
the IAB-MT from its child node(s) and/or UE(s) connected to it.</p>
<p>If configured, Pre-emptive BSR may be triggered for the specific case
of an IAB-MT if any of the following events occur:</p>
<p>- UL grant is provided to child IAB node or UE;</p>
<p>- BSR is received from child IAB node or UE.</p>
<p>IAB-MT may report Extended Pre-emptive BSR (as defined in clause
6.1.3.1) if the MAC entity of the IAB-MT is configured with
<em>logicalChannelGroupIAB-Ext</em> by upper layers. Otherwise IAB-MT
may report Pre-emptive BSR (as defined in clause 6.1.3.1).</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the Pre-emptive Buffer Status reporting procedure determines
that at least one Pre-emptive BSR has been triggered and not
cancelled:</p>
<p>2&gt; if UL-SCH resources are available for a new transmission and
the UL-SCH resources can accommodate the Extended Pre-emptive BSR or
Pre-emptive BSR MAC CE plus its subheader as a result of logical channel
prioritization:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the Extended Pre-emptive BSR or Pre-emptive BSR MAC CE as defined in
clause 6.1.3.1.</p>
<p>2&gt; else:</p>
<p>3&gt; trigger a Scheduling Request.</p>
<p>A MAC PDU shall contain at most one Pre-emptive BSR MAC CE or
Extended Pre-emptive BSR MAC CE, even when multiple events have
triggered a Pre-emptive BSR.</p>
<p>All triggered Pre-emptive BSR(s) shall be cancelled when a MAC PDU is
transmitted and this PDU includes the corresponding Pre-emptive BSR MAC
CE or Extended Pre-emptive BSR MAC CE.</p>
<p>NOTE: Pre-emptive BSR may be used for the case of dual-connected IAB
node. It is up to network implementation to work out the associated MAC
entity or entities which report the Pre-emptive BSR, and the associated
expected amount of data reported by any such entity or entities. For the
case of dual-connected IAB node, if two ingress BH RLC channels
belonging to the same ingress LCG are mapped to two different egress
Cell Groups (corresponding to different parent nodes), there may be
ambiguity in Pre-emptive BSR calculations and interpretation by the
receiving parent node(s) and the IAB node reporting pre-emptive BSR.</p>
<h3 id="timing-advance-reporting">5.4.8 Timing Advance Reporting</h3>
<p>The Timing Advance reporting procedure is used in a non-terrestrial
network to provide the gNB with an estimate of the UE's Timing Advance
value (i.e., <em>T</em><sub>TA</sub> as defined in the UE's TA formula,
see TS 38.211 [8] clause 4.3.1).</p>
<p>RRC controls Timing Advance reporting by configuring the following
parameters:</p>
<p><em>- offsetThresholdTA</em>;</p>
<p><em>- timingAdvanceSR</em>.</p>
<p>A Timing Advance report (TAR) shall be triggered if any of the
following events occur:</p>
<p>- upon indication from upper layers to trigger a Timing Advance
report;</p>
<p>- upon configuration of <em>offsetThresholdTA</em> by upper layers,
if the UE has not previously reported Timing Advance value to current
Serving Cell;</p>
<p>- if the variation between the current estimate of the Timing Advance
value and the last reported Timing Advance value is equal to or larger
than <em>offsetThresholdTA</em>, if configured.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the Timing Advance reporting procedure determines that at
least one TAR has been triggered and not cancelled:</p>
<p>2&gt; if UL-SCH resources are available for a new transmission and
the UL-SCH resources can accommodate the Timing Advance Report MAC CE
plus its subheader as a result of logical channel prioritization:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the Timing Advance Report MAC CE as defined in clause 6.1.3.56.</p>
<p>2&gt; else</p>
<p>3&gt; if <em>timingAdvanceSR</em> is configured with value
<em>enabled</em>:</p>
<p>4&gt; trigger a Scheduling Request.</p>
<p>NOTE: UL-SCH resources are considered available if the MAC entity has
been configured with, receives, or determines an uplink grant. If the
MAC entity has determined at a given point in time that UL-SCH resources
are available, this need not imply that UL-SCH resources are available
for use at that point in time.</p>
<p>A MAC PDU shall contain at most one Timing Advance Report MAC CE,
even when multiple events have triggered a Timing Advance report. The
Timing Advance Report MAC CE shall be generated based on the latest
available estimate of the UE's Timing Advance value prior to the MAC PDU
assembly.</p>
<p>All triggered Timing Advance reports shall be cancelled when a MAC
PDU is transmitted and this PDU includes a Timing Advance Report MAC
CE.</p>
<h2 id="pch-reception">5.5 PCH reception</h2>
<p>When the MAC entity needs to receive PCH, the MAC entity shall:</p>
<p>1&gt; if a PCH assignment has been received on the PDCCH for the
P-RNTI:</p>
<p>2&gt; attempt to decode the TB on the PCH as indicated by the PDCCH
information;</p>
<p>2&gt; if the TB on the PCH has been successfully decoded:</p>
<p>3&gt; deliver the decoded MAC PDU to upper layers.</p>
<h2 id="bch-reception">5.6 BCH reception</h2>
<p>When the MAC entity needs to receive BCH, the MAC entity shall:</p>
<p>1&gt; receive and attempt to decode the BCH;</p>
<p>1&gt; if a TB on the BCH has been successfully decoded:</p>
<p>2&gt; deliver the decoded MAC PDU to upper layers.</p>
<h2 id="discontinuous-reception-drx">5.7 Discontinuous Reception
(DRX)</h2>
<p>The MAC entity may be configured by RRC with a DRX functionality that
controls the UE's PDCCH monitoring activity for the MAC entity's C-RNTI,
CI-RNTI, CS-RNTI, INT-RNTI, SFI-RNTI, SP-CSI-RNTI, TPC-PUCCH-RNTI,
TPC-PUSCH-RNTI, TPC-SRS-RNTI, AI-RNTI, SL-RNTI, SL-CS-RNTI and SL
Semi-Persistent Scheduling V-RNTI. When using DRX operation, the MAC
entity shall also monitor PDCCH according to requirements found in other
clauses of this specification. When in RRC_CONNECTED, if DRX is
configured, for all the activated Serving Cells, the MAC entity may
monitor the PDCCH discontinuously using the DRX operation specified in
this clause; otherwise the MAC entity shall monitor the PDCCH as
specified in TS 38.213 [6].</p>
<p>NOTE 1: Void</p>
<p>RRC controls DRX operation by configuring the following
parameters:</p>
<p>- <em>drx-onDurationTimer</em>: the duration at the beginning of a
DRX cycle;</p>
<p>- <em>drx-SlotOffset</em>: the delay before starting the
<em>drx-onDurationTimer</em>;</p>
<p>- <em>drx-InactivityTimer</em>: the duration after the PDCCH occasion
in which a PDCCH indicates a new UL, DL or SL transmission for the MAC
entity;</p>
<p>- <em>drx-RetransmissionTimerDL</em> (per DL HARQ process except for
the broadcast process): the maximum duration until a DL retransmission
is received;</p>
<p>- <em>drx-RetransmissionTimerUL</em> (per UL HARQ process): the
maximum duration until a grant for UL retransmission is received;</p>
<p>- <em>drx-LongCycleStartOffset</em>: the Long DRX cycle and
<em>drx-StartOffset</em> which defines the subframe where the Long and
Short DRX cycle starts;</p>
<p>- <em>drx-ShortCycle</em> (optional): the Short DRX cycle;</p>
<p>- <em>drx-ShortCycleTimer</em> (optional): the duration the UE shall
follow the Short DRX cycle;</p>
<p>- <em>drx-HARQ-RTT-TimerDL</em> (per DL HARQ process except for the
broadcast process): the minimum duration before a DL assignment for HARQ
retransmission is expected by the MAC entity;</p>
<p>- <em>drx-HARQ-RTT-TimerUL</em> (per UL HARQ process): the minimum
duration before a UL HARQ retransmission grant is expected by the MAC
entity;</p>
<p>- <em>drx-RetransmissionTimerSL</em> (per sidelink process): the
maximum duration until a grant for SL retransmission is received;</p>
<p>- <em>drx-HARQ-RTT-TimerSL</em> (per sidelink process): the minimum
duration before an SL retransmission grant is expected by the MAC
entity;</p>
<p>- <em>drx-LastTransmissionUL</em> (optional): the configuration to
start <em>drx-HARQ-RTT-TimerUL</em> after the last transmission within a
bundle;</p>
<p>- <em>ps-Wakeup</em> (optional): the configuration to start
associated <em>drx-onDurationTimer</em> in case DCP is monitored but not
detected;</p>
<p>- <em>ps-TransmitOtherPeriodicCSI</em> (optional): the configuration
to report periodic CSI that is not L1-RSRP on PUCCH during the time
duration indicated by <em>drx-onDurationTimer</em> in case DCP is
configured but associated <em>drx-onDurationTimer</em> is not
started;</p>
<p>- <em>ps-TransmitPeriodicL1-RSRP</em> (optional): the configuration
to transmit periodic CSI that is L1-RSRP on PUCCH during the time
duration indicated by <em>drx-onDurationTimer</em> in case DCP is
configured but associated <em>drx-onDurationTimer</em> is not
started;</p>
<p>- <em>downlinkHARQ-FeedbackDisabled</em> (optional): the
configuration to disable HARQ feedback per DL HARQ process;</p>
<p>- <em>uplinkHARQ-Mode</em> (optional): the configuration to set
<em>HARQmodeA</em> or <em>HARQmodeB</em> per UL HARQ process.</p>
<p>Serving Cells of a MAC entity may be configured by RRC in two DRX
groups with separate DRX parameters. When RRC does not configure a
secondary DRX group, there is only one DRX group and all Serving Cells
belong to that one DRX group. When two DRX groups are configured, each
Serving Cell is uniquely assigned to either of the two groups. The DRX
parameters that are separately configured for each DRX group are:
<em>drx-onDurationTimer</em>, <em>drx-InactivityTimer</em>. The DRX
parameters that are common to the DRX groups are:
<em>drx-SlotOffset</em>, <em>drx-RetransmissionTimerDL</em>,
<em>drx-RetransmissionTimerUL</em>, <em>drx-LongCycleStartOffset</em>,
<em>drx-ShortCycle</em> (optional), <em>drx-ShortCycleTimer</em>
(optional), <em>drx-HARQ-RTT-TimerDL</em>, and
<em>drx-HARQ-RTT-TimerUL</em>.</p>
<p>When DRX is configured, the Active Time for Serving Cells in a DRX
group includes the time while:</p>
<p>- <em>drx-onDurationTimer</em> or <em>drx-InactivityTimer</em>
configured for the DRX group is running; or</p>
<p>- <em>drx-RetransmissionTimerDL</em>,
<em>drx-RetransmissionTimerUL</em> or <em>drx-RetransmissionTimerSL</em>
is running on any Serving Cell in the DRX group; or</p>
<p>- <em>ra-ContentionResolutionTimer</em> (as described in clause
5.1.5) or <em>msgB-ResponseWindow</em> (as described in clause 5.1.4a)
is running; or</p>
<p>- a Scheduling Request is sent on PUCCH and is pending (as described
in clause 5.4.4 or 5.22.1.5). If this Serving Cell is part of a
non-terrestrial network, the Active Time is started after the Scheduling
Request transmission that is performed when the <em>SR_COUNTER</em> is 0
for all the SR configurations with pending SR(s) plus the UE-gNB RTT;
or</p>
<p>- a PDCCH indicating a new transmission addressed to the C-RNTI of
the MAC entity has not been received after successful reception of a
Random Access Response for the Random Access Preamble not selected by
the MAC entity among the contention-based Random Access Preamble (as
described in clauses 5.1.4 and 5.1.4a).</p>
<p>The following MAC timers are used for DRX operation in a
non-terrestrial network:</p>
<p>- <em>HARQ-RTT-TimerDL-NTN</em> (per DL HARQ process configured with
HARQ feedback enabled): the minimum duration before a DL assignment for
HARQ retransmission is expected by the MAC entity;</p>
<p>- <em>HARQ-RTT-TimerUL-NTN</em> (per UL HARQ process configured with
<em>HARQModeA</em>): the minimum duration before a UL HARQ
retransmission grant is expected by the MAC entity.</p>
<p>When DRX is not configured and multicast DRX is configured for a
G-RNTI or G-CS-RNTI, the MAC entity shall:</p>
<p>1&gt; monitor the PDCCH as specified in TS 38.213 [6];</p>
<p>1&gt; if a MAC PDU is received in a configured downlink assignment
for unicast; or</p>
<p>1&gt; if the PDCCH indicates a DL unicast transmission:</p>
<p>2&gt; stop the <em>drx-RetransmissionTimerDL-PTM</em> for the
corresponding HARQ process.</p>
<p>When DRX is configured, the MAC entity shall:</p>
<p>1&gt; if a MAC PDU is received in a configured downlink assignment
for unicast:</p>
<p>2&gt; if this Serving Cell is configured with
<em>downlinkHARQ-FeedbackDisabled</em>:</p>
<p>3&gt; if the corresponding HARQ process is configured with HARQ
feedback enabled:</p>
<p>4&gt; set <em>HARQ-RTT-TimerDL-NTN</em> for the corresponding HARQ
process equal to <em>drx-HARQ-RTT-TimerDL</em> plus the latest available
UE-gNB RTT value;</p>
<p>4&gt; start the <em>HARQ-RTT-TimerDL-NTN</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
transmission carrying the DL HARQ feedback.</p>
<p>2&gt; else:</p>
<p>3&gt; start the <em>drx-HARQ-RTT-TimerDL</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
transmission carrying the DL HARQ feedback.</p>
<p>NOTE 1a: Void.</p>
<p>NOTE 1b: Void.</p>
<p>2&gt; stop the <em>drx-RetransmissionTimerDL</em> for the
corresponding HARQ process;</p>
<p>2&gt; stop the <em>drx-RetransmissionTimerDL-PTM</em> for the
corresponding HARQ process.</p>
<p>1&gt; if a MAC PDU is transmitted in a configured uplink grant and
LBT failure indication is not received from lower layers:</p>
<p>2&gt; if this Serving Cell is configured with
<em>uplinkHARQ-Mode</em>:</p>
<p>3&gt; if the corresponding HARQ process is configured as
<em>HARQModeA</em>:</p>
<p>4&gt; set <em>HARQ-RTT-TimerUL-NTN</em> for the corresponding HARQ
process equal to <em>drx-HARQ-RTT-TimerUL</em> plus the latest available
UE-gNB RTT value;</p>
<p>4&gt; if <em>drx-LastTransmissionUL</em> is configured:</p>
<p>5&gt; start the <em>HARQ-RTT-TimerUL-NTN</em> for the corresponding
HARQ process in the first symbol after the end of the last transmission
(within a bundle) of the corresponding PUSCH transmission.</p>
<p>4&gt; else:</p>
<p>5&gt; start the <em>HARQ-RTT-TimerUL-NTN</em> for the corresponding
HARQ process in the first symbol after the end of the first transmission
(within a bundle) of the corresponding PUSCH transmission.</p>
<p>2&gt; else:</p>
<p>3&gt; if <em>drx-LastTransmissionUL</em> is configured:</p>
<p>4&gt; start the <em>drx-HARQ-RTT-TimerUL</em> for the corresponding
HARQ process in the first symbol after the end of the last transmission
(within a bundle) of the corresponding PUSCH transmission.</p>
<p>3&gt; else:</p>
<p>4&gt; start the <em>drx-HARQ-RTT-TimerUL</em> for the corresponding
HARQ process in the first symbol after the end of the first transmission
(within a bundle) of the corresponding PUSCH transmission.</p>
<blockquote>
<p>2&gt; stop the <em>drx-RetransmissionTimerUL</em> for the
corresponding HARQ process at the first transmission (within a bundle)
of the corresponding PUSCH transmission.</p>
</blockquote>
<p>1&gt; if a MAC PDU is transmitted in a configured sidelink grant:</p>
<p>2&gt; if the PUCCH resource is configured:</p>
<p>3&gt; start the <em>drx-HARQ-RTT-TimerSL</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
PUCCH transmission carrying the SL HARQ feedback; or</p>
<p>3&gt; start the <em>drx-HARQ-RTT-TimerSL</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
PUCCH resource for the SL HARQ feedback when the PUCCH is not
transmitted;</p>
<p>3&gt; stop the <em>drx-RetransmissionTimerSL</em> for the
corresponding HARQ process.</p>
<p>2&gt; else:</p>
<p>3&gt; start the <em>drx-HARQ-RTT-TimerSL</em> for the corresponding
HARQ process at the first symbol after the end of the corresponding
PSSCH transmission;</p>
<p>3&gt; stop the <em>drx-RetransmissionTimerSL</em> for the
corresponding HARQ process.</p>
<p>1&gt; if a <em>drx-HARQ-RTT-TimerDL</em> expires:</p>
<p>2&gt; if the data of the corresponding HARQ process was not
successfully decoded:</p>
<p>3&gt; start the <em>drx-RetransmissionTimerDL</em> for the
corresponding HARQ process in the first symbol after the expiry of
<em>drx-HARQ-RTT-TimerDL</em>.</p>
<p>1&gt; if a <em>HARQ-RTT-TimerDL-NTN</em> expires:</p>
<p>2&gt; if the data of the corresponding HARQ process was not
successfully decoded:</p>
<p>3&gt; start the <em>drx-RetransmissionTimerDL</em> for the
corresponding HARQ process in the first symbol after the expiry of
<em>HARQ-RTT-TimerDL-NTN</em>.</p>
<p>1&gt; if a <em>drx-HARQ-RTT-TimerUL</em> expires:</p>
<p>2&gt; start the <em>drx-RetransmissionTimerUL</em> for the
corresponding HARQ process in the first symbol after the expiry of
<em>drx-HARQ-RTT-TimerUL</em>.</p>
<p>1&gt; if a <em>HARQ-RTT-TimerUL-NTN</em> expires:</p>
<p>2&gt; start the <em>drx-RetransmissionTimerUL</em> for the
corresponding HARQ process in the first symbol after the expiry of
<em>HARQ-RTT-TimerUL-NTN</em>.</p>
<p>1&gt; if a <em>drx-HARQ-RTT-TimerSL</em> expires:</p>
<p>2&gt; if a HARQ NACK feedback for the corresponding HARQ process is
transmitted on PUCCH; or</p>
<p>2&gt; if a HARQ NACK feedback for the corresponding HARQ process is
generated but not transmitted on PUCCH; or</p>
<p>2&gt; if the PUCCH resource is not configured for the SL grant:</p>
<p>3&gt; start the <em>drx-RetransmissionTimerSL</em> for the
corresponding HARQ process in the first symbol after the expiry of
<em>drx-HARQ-RTT-TimerSL</em>.</p>
<p>NOTE 1c: The UE handles the <em>drx-RetransmissionTimerSL</em>
operation when <em>sl-PUCCH-Config</em> is configured by RRC but PUCCH
resource is not scheduled same as when <em>sl-PUCCH-Config</em> is not
configured.</p>
<p>1&gt; if a DRX Command MAC CE indicated by PDCCH addressed to C-RNTI
or CS-RNTI, or by a configured downlink assignment for unicast
transmission or a Long DRX Command MAC CE is received:</p>
<p>2&gt; stop <em>drx-onDurationTimer</em> for each DRX group;</p>
<p>2&gt; stop <em>drx-InactivityTimer</em> for each DRX group.</p>
<p>1&gt; if <em>drx-InactivityTimer</em> for a DRX group expires:</p>
<p>2&gt; if the Short DRX cycle is configured:</p>
<p>3&gt; start or restart <em>drx-ShortCycleTimer</em> for this DRX
group in the first symbol after the expiry of
<em>drx-InactivityTimer</em>;</p>
<p>3&gt; use the Short DRX cycle for this DRX group.</p>
<p>2&gt; else:</p>
<p>3&gt; use the Long DRX cycle for this DRX group.</p>
<p>1&gt; if a DRX Command MAC CE indicated by PDCCH addressed to C-RNTI
or CS-RNTI, or by a configured downlink assignment for unicast
transmission is received:</p>
<p>2&gt; if the Short DRX cycle is configured:</p>
<p>3&gt; start or restart <em>drx-ShortCycleTimer</em> for each DRX
group in the first symbol after the end of DRX Command MAC CE
reception;</p>
<p>3&gt; use the Short DRX cycle for each DRX group.</p>
<p>2&gt; else:</p>
<p>3&gt; use the Long DRX cycle for each DRX group.</p>
<p>1&gt; if <em>drx-ShortCycleTimer</em> for a DRX group expires:</p>
<p>2&gt; use the Long DRX cycle for this DRX group.</p>
<p>1&gt; if a Long DRX Command MAC CE is received:</p>
<p>2&gt; stop <em>drx-ShortCycleTimer</em> for each DRX group;</p>
<p>2&gt; use the Long DRX cycle for each DRX group.</p>
<p>1&gt; if the Short DRX cycle is used for a DRX group, and [(SFN × 10)
+ subframe number] modulo (<em>drx-ShortCycle</em>) =
(<em>drx-StartOffset</em>) modulo (<em>drx-ShortCycle</em>):</p>
<p>2&gt; start <em>drx-onDurationTimer</em> for this DRX group after
<em>drx-SlotOffset</em> from the beginning of the subframe.</p>
<p>1&gt; if the Long DRX cycle is used for a DRX group, and [(SFN × 10)
+ subframe number] modulo (<em>drx-LongCycle</em>) =
<em>drx-StartOffset</em>:</p>
<p>2&gt; if DCP monitoring is configured for the active DL BWP as
specified in TS 38.213 [6], clause 10.3:</p>
<p>3&gt; if DCP indication associated with the current DRX cycle
received from lower layer indicated to start
<em>drx-onDurationTimer</em>, as specified in TS 38.213 [6]; or</p>
<p>3&gt; if all DCP occasion(s) in time domain, as specified in TS
38.213 [6], associated with the current DRX cycle occurred in Active
Time considering grants/assignments/DRX Command MAC CE/Long DRX Command
MAC CE received and Scheduling Request sent until 4 ms prior to start of
the last DCP occasion, or during a measurement gap, or when the MAC
entity monitors for a PDCCH transmission on the search space indicated
by <em>recoverySearchSpaceId</em> of the SpCell identified by the C-RNTI
while the <em>ra-ResponseWindow</em> is running (as specified in clause
5.1.4); or</p>
<p>3&gt; if <em>ps-Wakeup</em> is configured with value <em>true</em>
and DCP indication associated with the current DRX cycle has not been
received from lower layers:</p>
<p>4&gt; start <em>drx-onDurationTimer</em> after
<em>drx-SlotOffset</em> from the beginning of the subframe.</p>
<p>2&gt; else:</p>
<p>3&gt; start <em>drx-onDurationTimer</em> for this DRX group after
<em>drx-SlotOffset</em> from the beginning of the subframe.</p>
<p>NOTE 2: In case of unaligned SFN across carriers in a cell group, the
SFN of the SpCell is used to calculate the DRX duration.</p>
<p>1&gt; if a DRX group is in Active Time:</p>
<p>2&gt; monitor the PDCCH on the Serving Cells in this DRX group as
specified in TS 38.213 [6];</p>
<p>2&gt; if the PDCCH indicates a DL transmission; or</p>
<p>2&gt; if the PDCCH indicates a one-shot HARQ feedback as specified in
clause 9.1.4 of TS 38.213 [6]; or</p>
<p>2&gt; if the PDCCH indicates a retransmission of HARQ feedback as
specified in clause 9.1.5 of TS 38.213 [6]:</p>
<p>3&gt; if this Serving Cell is configured with
<em>downlinkHARQ-FeedbackDisabled</em>:</p>
<p>4&gt; if the corresponding HARQ process is configured with HARQ
feedback enabled:</p>
<p>5&gt; set <em>HARQ-RTT-TimerDL-NTN</em> for the corresponding HARQ
process equal to <em>drx-HARQ-RTT-TimerDL</em> plus the latest available
UE-gNB RTT value;</p>
<p>5&gt; start the <em>HARQ-RTT-TimerDL-NTN</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
transmission carrying the DL HARQ feedback.</p>
<p>3&gt; else:</p>
<p>4&gt; start or restart the <em>drx-HARQ-RTT-TimerDL</em> for the
corresponding HARQ process(es) whose HARQ feedback is reported in the
first symbol after the end of the corresponding transmission carrying
the DL HARQ feedback.</p>
<p>NOTE 3: When HARQ feedback is postponed by PDSCH-to-HARQ_feedback
timing indicating an inapplicable k1 value, as specified in TS 38.213
[6], the corresponding transmission opportunity to send the DL HARQ
feedback is indicated in a later PDCCH requesting the HARQ-ACK
feedback.</p>
<p>3&gt; stop the <em>drx-RetransmissionTimerDL</em> for the
corresponding HARQ process(es) whose HARQ feedback is reported;</p>
<p>3&gt; stop the <em>drx-RetransmissionTimerDL-PTM</em> for the
corresponding HARQ process;</p>
<p>3&gt; if the PDSCH-to-HARQ_feedback timing indicate an inapplicable
k1 value as specified in TS 38.213 [6]:</p>
<p>4&gt; start the <em>drx-RetransmissionTimerDL</em> in the first
symbol after the (end of the last) PDSCH transmission (within a bundle)
for the corresponding HARQ process.</p>
<p>2&gt; if the PDCCH indicates a UL transmission:</p>
<p>3&gt; if this Serving Cell is configured with
<em>uplinkHARQ-Mode</em>:</p>
<p>4&gt; if the corresponding HARQ process is configured as
<em>HARQModeA</em>:</p>
<p>5&gt; set <em>HARQ-RTT-TimerUL-NTN</em> for the corresponding HARQ
process equal to <em>drx-HARQ-RTT-TimerUL</em> plus the latest available
UE-gNB RTT value;</p>
<p>5&gt; if <em>drx-LastTransmissionUL</em> is configured:</p>
<p>6&gt; start the <em>HARQ-RTT-TimerUL-NTN</em> for the corresponding
HARQ process in the first symbol after the end of the last transmission
(within a bundle) of the corresponding PUSCH transmission.</p>
<p>5&gt; else:</p>
<p>6&gt; start the <em>HARQ-RTT-TimerUL-NTN</em> for the corresponding
HARQ process in the first symbol after the end of the first transmission
(within a bundle) of the corresponding PUSCH transmission.</p>
<p>3&gt; else:</p>
<p>4&gt; if <em>drx-LastTransmissionUL</em> is configured:</p>
<p>5&gt; start the <em>drx-HARQ-RTT-TimerUL</em> for the corresponding
HARQ process in the first symbol after the end of the last transmission
(within a bundle) of the corresponding PUSCH transmission.</p>
<p>4&gt; else:</p>
<p>5&gt; start the <em>drx-HARQ-RTT-TimerUL</em> for the corresponding
HARQ process in the first symbol after the end of the first transmission
(within a bundle) of the corresponding PUSCH transmission.</p>
<p>3&gt; stop the <em>drx-RetransmissionTimerUL</em> for the
corresponding HARQ process.</p>
<p>2&gt; if the PDCCH indicates an SL transmission:</p>
<p>3&gt; if the PUCCH resource is configured:</p>
<p>4&gt; start the <em>drx-HARQ-RTT-TimerSL</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
PUCCH transmission carrying the SL HARQ feedback; or</p>
<p>4&gt; start the <em>drx-HARQ-RTT-TimerSL</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
PUCCH resource for the SL HARQ feedback when the PUCCH is not
transmitted;</p>
<p>4&gt; stop the <em>drx-RetransmissionTimerSL</em> for the
corresponding HARQ process.</p>
<p>3&gt; else:</p>
<p>4&gt; start the <em>drx-HARQ-RTT-TimerSL</em> for the corresponding
HARQ process at the first symbol after end of PDCCH occasion;</p>
<p>4&gt; stop the <em>drx-RetransmissionTimerSL</em> for the
corresponding HARQ process.</p>
<p>2&gt; if the PDCCH indicates a new transmission (DL, UL or SL) on a
Serving Cell in this DRX group:</p>
<p>3&gt; start or restart <em>drx-InactivityTimer</em> for this DRX
group in the first symbol after the end of the PDCCH reception.</p>
<p>NOTE 3a: A PDCCH indicating activation of SPS, configured grant type
2, or configured sidelink grant of configured grant Type 2 is considered
to indicate a new transmission.</p>
<p>NOTE 3b: If the PDCCH reception includes two PDCCH candidates from
corresponding search spaces, as described in clause 10.1 in 38.213,
start or restart <em>drx-InactivityTimer</em> for this DRX group in the
first symbol after the end of the PDCCH candidate that ends later in
time.</p>
<p>2&gt; if a HARQ process receives downlink feedback information and
acknowledgement is indicated:</p>
<p>3&gt; stop the <em>drx-RetransmissionTimerUL</em> for the
corresponding HARQ process.</p>
<p>1&gt; if DCP monitoring is configured for the active DL BWP as
specified in TS 38.213 [6], clause 10.3; and</p>
<p>1&gt; if the current symbol n occurs within
<em>drx-onDurationTimer</em> duration; and</p>
<p>1&gt; if <em>drx-onDurationTimer</em> associated with the current DRX
cycle is not started as specified in this clause:</p>
<p>2&gt; if the MAC entity would not be in Active Time considering
grants/assignments/DRX Command MAC CE/Long DRX Command MAC CE received
and Scheduling Request sent until 4 ms prior to symbol n when evaluating
all DRX Active Time conditions as specified in this clause; and</p>
<p>2&gt; if <em>allowCSI-SRS-Tx-MulticastDRX-Active</em> is not
configured, or if <em>cfr-ConfigMulticast</em> is not configured for any
of the active BWP(s) of the Serving Cell(s), or if all multicast DRXes
would not be in Active Time considering multicast assignments/DRX
Command MAC CE for MBS multicast received until 4 ms prior to symbol n
when evaluating all DRX Active Time conditions as specified in Clause
5.7b and all multicast sessions are configured with multicast DRX:</p>
<p>3&gt; not transmit periodic SRS and semi-persistent SRS defined in TS
38.214 [7];</p>
<p>3&gt; not report semi-persistent CSI configured on PUSCH;</p>
<p>3&gt; not report semi-persistent CSI on PUCCH;</p>
<p>3&gt; if <em>ps-TransmitPeriodicL1-RSRP</em> is not configured with
value <em>true</em>:</p>
<p>4&gt; not report periodic CSI that is L1-RSRP on PUCCH.</p>
<p>3&gt; if <em>ps-TransmitOtherPeriodicCSI</em> is not configured with
value <em>true</em>:</p>
<p>4&gt; not report periodic CSI that is not L1-RSRP on PUCCH.</p>
<p>1&gt; else:</p>
<p>2&gt; in current symbol n, if a DRX group would not be in Active Time
considering grants/assignments scheduled on Serving Cell(s) in this DRX
group and DRX Command MAC CE/Long DRX Command MAC CE received and
Scheduling Request sent until 4 ms prior to symbol n when evaluating all
DRX Active Time conditions as specified in this clause; and</p>
<p>2&gt; if <em>allowCSI-SRS-Tx-MulticastDRX-Active</em> is not
configured, or if <em>cfr-ConfigMulticast</em> is not configured for any
of the active BWP(s) of the Serving Cell(s), or, in current symbol n, if
all multicast DRXes corresponding to the DRX group would not be in
Active Time considering multicast assignments/DRX Command MAC CE for MBS
multicast received until 4 ms prior to symbol n when evaluating all DRX
Active Time conditions as specified in Clause 5.7b and all multicast
sessions corresponding to the DRX group are configured with multicast
DRX:</p>
<p>3&gt; not transmit periodic SRS and semi-persistent SRS defined in TS
38.214 [7] in this DRX group;</p>
<p>3&gt; not report CSI on PUCCH and semi-persistent CSI configured on
PUSCH in this DRX group.</p>
<p>2&gt; if CSI masking (<em>csi-Mask</em>) is setup by upper
layers:</p>
<p>3&gt; in current symbol n, if <em>drx-onDurationTimer</em> of a DRX
group would not be running considering grants/assignments scheduled on
Serving Cell(s) in this DRX group and DRX Command MAC CE/Long DRX
Command MAC CE received until 4 ms prior to symbol n when evaluating all
DRX Active Time conditions as specified in this clause; and</p>
<p>3&gt; if <em>allowCSI-SRS-Tx-MulticastDRX-Active</em> is not
configured, or if <em>cfr-ConfigMulticast</em> is not configured for any
of the active BWP(s) of the Serving Cell(s), or, in current symbol n, if
<em>drx-onDurationTimerPTM(s)</em> of all multicast DRXes corresponding
to the DRX group would not be running considering DRX Command MAC CE for
MBS multicast received until 4 ms prior to symbol n when evaluating all
DRX Active Time conditions as specified in Clause 5.7b and all multicast
sessions corresponding to the DRX group are configured with multicast
DRX:</p>
<p>4&gt; not report CSI on PUCCH in this DRX group.</p>
<p>NOTE 4: If a UE multiplexes a CSI configured on PUCCH with other
overlapping UCI(s) according to the procedure specified in TS 38.213 [6]
clause 9.2.5 and this CSI multiplexed with other UCI(s) would be
reported on a PUCCH resource either outside DRX Active Time of the DRX
group in which this PUCCH is configured or outside the on-duration
period of the DRX group in which this PUCCH is configured if CSI masking
is setup by upper layers, it is up to UE implementation whether to
report this CSI multiplexed with other UCI(s).</p>
<p>Regardless of whether the MAC entity is monitoring PDCCH or not on
the Serving Cells in a DRX group, the MAC entity transmits HARQ
feedback, aperiodic CSI on PUSCH, and aperiodic SRS defined in TS 38.214
[7] on the Serving Cells in the DRX group when such is expected.</p>
<p>The MAC entity needs not to monitor the PDCCH if it is not a complete
PDCCH occasion (e.g. the Active Time starts or ends in the middle of a
PDCCH occasion).</p>
<h2 id="a-discontinuous-reception-drx-for-mbs-broadcast">5.7a
Discontinuous Reception (DRX) for MBS Broadcast</h2>
<p>For MBS broadcast, the MAC entity may be configured by RRC with a DRX
functionality per G-RNTI that controls the UE's PDCCH monitoring
activity for the MAC entity's G-RNTI(s) as specified in TS 38.331 [5].
When in RRC_IDLE or RRC_INACTIVE or RRC_CONNECTED, if broadcast DRX is
configured for a G-RNTI, the MAC entity is allowed to monitor the PDCCH
for this G-RNTI discontinuously using the broadcast DRX operation
specified in this clause; otherwise the MAC entity monitors each PDCCH
for this G-RNTI as specified in TS 38.213 [6]. The broadcast DRX
operation specified in this clause is performed independently for each
G-RNTI and independently from the DRX operation specified in clauses 5.7
and 5.7b.</p>
<p>RRC controls broadcast DRX operation by configuring the following
parameters:</p>
<p>- <em>drx-onDurationTimerPTM</em>: the duration at the beginning of a
DRX cycle;</p>
<p>- <em>drx-SlotOffsetPTM</em>: the delay before starting the
<em>drx-onDurationTimerPTM</em>;</p>
<p>- <em>drx-InactivityTimerPTM</em>: the duration after the PDCCH
occasion in which a PDCCH indicates a new DL broadcast transmission for
the MAC entity;</p>
<p>- <em>drx-LongCycleStartOffsetPTM</em>: the long DRX cycle
<em>drx-LongCycle-PTM</em> and <em>drx-StartOffset-PTM</em> which
defines the subframe where the DRX cycle starts.</p>
<p>When broadcast DRX is configured for a G-RNTI, the Active Time
includes the time while:</p>
<p><em>- drx-onDurationTimerPTM</em> or <em>drx-InactivityTimerPTM</em>
for this G-RNTI is running.</p>
<p>When broadcast DRX is configured for a G-RNTI, the MAC entity shall
for this G-RNTI:</p>
<p>1&gt; if [(SFN × 10) + subframe number] modulo
(<em>drx-LongCycle-PTM</em>) = <em>drx-StartOffset-PTM</em>:</p>
<p>2&gt; start <em>drx-onDurationTimerPTM</em> after
<em>drx-SlotOffsetPTM</em> from the beginning of the subframe.</p>
<p>1&gt; if the MAC entity is in Active Time for this G-RNTI:</p>
<p>2&gt; monitor the PDCCH for this G-RNTI as specified in TS 38.213
[6];</p>
<p>2&gt; if the PDCCH indicates a DL transmission for MBS broadcast:</p>
<p>3&gt; start or restart <em>drx-InactivityTimerPTM</em> in the first
symbol after the end of the PDCCH reception.</p>
<p>NOTE: If a cell is configured for MBS broadcast reception, the SFN of
this cell is used to calculate the DRX duration of MBS broadcast on this
cell.</p>
<h2 id="b-discontinuous-reception-drx-for-mbs-multicast">5.7b
Discontinuous Reception (DRX) for MBS Multicast</h2>
<p>For MBS multicast, the MAC entity may be configured by RRC with a DRX
functionality per G-RNTI or per G-CS-RNTI that controls the UE's PDCCH
monitoring activity for the MAC entity's G-RNTI(s) and G-CS-RNTI(s) as
specified in TS 38.331 [5]. When in RRC_CONNECTED, if multicast DRX is
configured for a G-RNTI or G-CS-RNTI, the MAC entity is allowed to
monitor the PDCCH for this G-RNTI or G-CS-RNTI discontinuously using the
multicast DRX operation specified in this clause; otherwise the MAC
entity monitors the PDCCH for this G-RNTI or G-CS-RNTI as specified in
TS 38.213 [6]. The multicast DRX operation specified in this clause is
performed independently for each G-RNTI or G-CS-RNTI and independently
from the DRX operation specified in clauses 5.7 and 5.7a.</p>
<p>RRC controls multicast DRX operation per G-RNTI or per G-CS-RNTI by
configuring the following parameters:</p>
<p>- <em>drx-onDurationTimerPTM</em>: the duration at the beginning of a
DRX cycle;</p>
<p>- <em>drx-SlotOffsetPTM</em>: the delay before starting the
<em>drx-onDurationTimerPTM</em>;</p>
<p>- <em>drx-InactivityTimerPTM</em>: the duration after the PDCCH
occasion in which a PDCCH indicates a new DL multicast transmission for
the MAC entity;</p>
<p>- <em>drx-LongCycleStartOffsetPTM</em>: the long DRX cycle
<em>drx-LongCycle-PTM</em> and <em>drx-StartOffset-PTM</em> which
defines the subframe where the long DRX cycle starts;</p>
<p>- <em>drx-RetransmissionTimerDL-PTM</em> (per DL HARQ process for MBS
multicast): the maximum duration until a DL multicast retransmission is
received;</p>
<p>- <em>drx-HARQ-RTT-TimerDL-PTM</em> (per DL HARQ process for MBS
multicast): the minimum duration before a DL multicast assignment for
HARQ retransmission is expected by the MAC entity.</p>
<p>The following MAC timer is used for DRX operation in a
non-terrestrial network:</p>
<p>- <em>HARQ-RTT-TimerDL-PTM-NTN</em> (per DL HARQ process for MBS
multicast): the minimum duration before a DL multicast assignment for
HARQ retransmission is expected by the MAC entity.</p>
<p>When multicast DRX is configured for a G-RNTI or G-CS-RNTI, the
Active Time includes the time while:</p>
<p>- <em>drx-onDurationTimerPTM</em> or <em>drx-InactivityTimerPTM</em>
or <em>drx-RetransmissionTimerDL-PTM</em> for this G-RNTI or G-CS-RNTI
is running.</p>
<p>When multicast DRX is not configured for a G-RNTI or G-CS-RNTI, and
the <em>cfr-ConfigMulticast</em> is configured for at least one of the
active BWP(s) of the Serving Cell(s), and unicast DRX is configured, the
MAC entity shall for this G-RNTI or G-CS-RNTI:</p>
<p>1&gt; monitor the PDCCH as specified in TS 38.213 [6];</p>
<p>1&gt; if the PDCCH indicates a DL multicast transmission; or</p>
<p>1&gt; if a MAC PDU is received in a configured downlink multicast
assignment:</p>
<p>2&gt; stop the <em>drx-RetransmissionTimerDL</em> for the
corresponding HARQ process.</p>
<p>1&gt; if the PDCCH addressed to G-RNTI indicates a DL multicast
transmission; or</p>
<p>1&gt; if the PDCCH addressed to G-CS-RNTI indicates a DL multicast
transmission and CS-RNTI is configured; or</p>
<p>1&gt; if a MAC PDU is received in a configured downlink multicast
assignment and CS-RNTI is configured:</p>
<p>2&gt; if the first HARQ-ACK reporting mode (i.e. ack-nack) is used as
specified in TS 38.213 [6]; and</p>
<p>2&gt; if HARQ feedback for MBS multicast is enabled:</p>
<p>3&gt; if the MAC PDU is received on a non-terrestrial network and the
UE supports <em>harq-RTT-TimerDL-ForNTN-MulticastMBS-r17</em>:</p>
<p>4&gt; set <em>HARQ-RTT-TimerDL-NTN</em> for the corresponding HARQ
process equal to <em>drx-HARQ-RTT-TimerDL</em> plus the latest available
UE-gNB RTT value;</p>
<p>4&gt; start the <em>HARQ-RTT-TimerDL-NTN</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
transmission carrying the DL HARQ feedback.</p>
<p>3&gt; else:</p>
<p>4&gt; start the <em>drx-HARQ-RTT-TimerDL</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
transmission carrying the DL HARQ feedback.</p>
<p>When multicast DRX is configured for a G-RNTI or G-CS-RNTI, and the
<em>cfr-ConfigMulticast</em> is configured for at least one of the
active BWP(s) of the Serving Cell(s), the MAC entity shall for this
G-RNTI or G-CS-RNTI:</p>
<p>1&gt; if a MAC PDU is received in a configured downlink multicast
assignment:</p>
<p>2&gt; if HARQ feedback for MBS multicast is enabled:</p>
<p>3&gt; if the MAC PDU is received on a non-terrestrial network and the
UE supports <em>harq-RTT-TimerDL-ForNTN-MulticastMBS-r17</em>:</p>
<p>4&gt; set <em>HARQ-RTT-TimerDL-PTM-NTN</em> for the corresponding
HARQ process equal to <em>drx-HARQ-RTT-TimerDL-PTM</em> plus the latest
available UE-gNB RTT value;</p>
<p>4&gt; start the <em>HARQ-RTT-TimerDL-PTM-NTN</em> for the
corresponding HARQ process in the first symbol after the end of the
corresponding transmission carrying the DL HARQ feedback.</p>
<p>3&gt; else:</p>
<p>4&gt; start the <em>drx-HARQ-RTT-TimerDL-PTM</em> for the
corresponding HARQ process in the first symbol after the end of the
corresponding transmission carrying the DL HARQ feedback;</p>
<p>3&gt; if the first HARQ-ACK reporting mode (i.e. ack-nack) is used as
specified in TS 38.213 [6]; and</p>
<p>3&gt; if CS-RNTI is configured:</p>
<p>4&gt; if the MAC PDU is received on a non-terrestrial network and the
UE supports <em>harq-RTT-TimerDL-ForNTN-MulticastMBS-r17</em>:</p>
<p>5&gt; set <em>HARQ-RTT-TimerDL-NTN</em> for the corresponding HARQ
process equal to <em>drx-HARQ-RTT-TimerDL</em> plus the latest available
UE-gNB RTT value;</p>
<p>5&gt; start the <em>HARQ-RTT-TimerDL-NTN</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
transmission carrying the DL HARQ feedback.</p>
<p>4&gt; else:</p>
<p>5&gt; start the <em>drx-HARQ-RTT-TimerDL</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
transmission carrying the DL HARQ feedback.</p>
<p>2&gt; stop the <em>drx-RetransmissionTimerDL-PTM</em> for the
corresponding HARQ process;</p>
<p>2&gt; stop the <em>drx-RetransmissionTimerDL</em> for the
corresponding HARQ process.</p>
<p>1&gt; if a <em>drx-HARQ-RTT-TimerDL-PTM</em> expires:</p>
<p>2&gt; if the data of the corresponding HARQ process was not
successfully decoded:</p>
<p>3&gt; start the <em>drx-RetransmissionTimerDL-PTM</em> for the
corresponding HARQ process in the first symbol after the expiry of
<em>drx-HARQ-RTT-TimerDL-PTM</em>.</p>
<p>1&gt; if a <em>HARQ-RTT-TimerDL-PTM-NTN</em> expires:</p>
<p>2&gt; if the data of the corresponding HARQ process was not
successfully decoded:</p>
<p>3&gt; start the <em>drx-RetransmissionTimerDL-PTM</em> for the
corresponding HARQ process in the first symbol after the expiry of
<em>HARQ-RTT-TimerDL-PTM-NTN</em>.</p>
<p>1&gt; if a DRX Command MAC CE indicated by PDCCH addressed to a
G-RNTI or G-CS-RNTI, or by a configured downlink multicast assignment is
received:</p>
<p>2&gt; stop <em>drx-onDurationTimerPTM</em> of the DRX for this G-RNTI
or G-CS-RNTI, or the corresponding G-CS-RNTI;</p>
<p>2&gt; stop <em>drx-InactivityTimerPTM</em> of the DRX for this G-RNTI
or G-CS-RNTI, or the corresponding G-CS-RNTI.</p>
<p>1&gt; if [(SFN × 10) + subframe number] modulo
(<em>drx-LongCycle-PTM</em>) = <em>drx-StartOffset-PTM</em>:</p>
<p>2&gt; start <em>drx-onDurationTimerPTM</em> after
<em>drx-SlotOffsetPTM</em> from the beginning of the subframe.</p>
<p>1&gt; if the MAC entity is in Active Time for this G-RNTI or
G-CS-RNTI:</p>
<p>2&gt; monitor the PDCCH for this G-RNTI or G-CS-RNTI as specified in
TS 38.213 [6];</p>
<p>2&gt; if the PDCCH indicates a DL multicast transmission:</p>
<p>3&gt; if HARQ feedback for MBS multicast is enabled:</p>
<p>4&gt; if the PDCCH is indicated on a non-terrestrial network and the
UE supports <em>harq-RTT-TimerDL-ForNTN-MulticastMBS-r17</em>:</p>
<p>5&gt; set <em>HARQ-RTT-TimerDL-PTM-NTN</em> for the corresponding
HARQ process equal to <em>drx-HARQ-RTT-TimerDL-PTM</em> plus the latest
available UE-gNB RTT value;</p>
<p>5&gt; start the <em>HARQ-RTT-TimerDL-PTM-NTN</em> for the
corresponding HARQ process in the first symbol after the end of the
corresponding transmission carrying the DL HARQ feedback.</p>
<p>4&gt; else:</p>
<p>5&gt; start the <em>drx-HARQ-RTT-TimerDL-PTM</em> for the
corresponding HARQ process in the first symbol after the end of the
corresponding transmission carrying the DL HARQ feedback;</p>
<p>4&gt; if the first HARQ-ACK reporting mode (i.e. ack-nack) is used as
specified in TS 38.213 [6]:</p>
<p>5&gt; if the PDCCH addressed to G-RNTI indicates a DL multicast
transmission; or</p>
<p>5&gt; if the PDCCH addressed to G-CS-RNTI indicates a DL multicast
transmission and CS-RNTI is configured:</p>
<p>6&gt; if the PDCCH is indicated on a non-terrestrial network and the
UE supports <em>harq-RTT-TimerDL-ForNTN-MulticastMBS-r17</em>:</p>
<p>7&gt; set <em>HARQ-RTT-TimerDL-NTN</em> for the corresponding HARQ
process equal to <em>drx-HARQ-RTT-TimerDL</em> plus the latest available
UE-gNB RTT value;</p>
<p>7&gt; start the <em>HARQ-RTT-TimerDL-NTN</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
transmission carrying the DL HARQ feedback.</p>
<p>6&gt; else:</p>
<p>7&gt; start the <em>drx-HARQ-RTT-TimerDL</em> for the corresponding
HARQ process in the first symbol after the end of the corresponding
transmission carrying the DL HARQ feedback.</p>
<p>3&gt; stop the <em>drx-RetransmissionTimerDL-PTM</em> for the
corresponding HARQ process;</p>
<p>3&gt; stop the <em>drx-RetransmissionTimerDL</em> for the
corresponding HARQ process.</p>
<p>2&gt; if the PDCCH indicates a new multicast transmission for this
G-RNTI or G-CS-RNTI:</p>
<p>3&gt; start or restart <em>drx-InactivityTimerPTM</em> in the first
symbol after the end of the PDCCH reception.</p>
<p>NOTE 1: A PDCCH indicating activation of multicast SPS is considered
to indicate a new transmission.</p>
<p>NOTE 2: The UE may start the <em>drx-HARQ-RTT-TimerDL</em> or
<em>HARQ-RTT-TimerDL-NTN</em> after receiving a PTM transmission only if
<em>ptp-Retx-Multicast</em> or <em>ptp-Retx-SPS-Multicast</em> was
included in the <em>UECapabilityInformation</em> message to network.</p>
<p>The MAC entity needs not to monitor the PDCCH for a G-RNTI or a
G-CS-RNTI if it is not a complete PDCCH occasion (e.g. the Active Time
for a G-RNTI or a G-CS-RNTI starts or ends in the middle of a PDCCH
occasion).</p>
<h2 id="transmission-and-reception-without-dynamic-scheduling">5.8
Transmission and reception without dynamic scheduling</h2>
<h3 id="downlink">5.8.1 Downlink</h3>
<p>Semi-Persistent Scheduling (SPS) is configured by RRC for a Serving
Cell per BWP. Multiple assignments can be active simultaneously in the
same BWP. Activation and deactivation of the DL SPS are independent
among the Serving Cells.</p>
<p>For the DL SPS, a DL assignment is provided by PDCCH, and stored or
cleared based on L1 signalling indicating SPS activation or
deactivation.</p>
<p>RRC configures the following parameters when the SPS is
configured:</p>
<p>- <em>cs-RNTI</em>: CS-RNTI for activation, deactivation, and
retransmission;</p>
<p>- <em>nrofHARQ-Processes</em>: the number of configured HARQ
processes for SPS;</p>
<p>- <em>harq-ProcID-Offset</em>: Offset of HARQ process for SPS;</p>
<p>- <em>periodicity</em>: periodicity of configured downlink assignment
for SPS.</p>
<p>When the SPS is released by upper layers, all the corresponding
configurations shall be released.</p>
<p>After a downlink assignment is configured for SPS, the MAC entity
shall consider sequentially that the N<sup>th</sup> downlink assignment
occurs in the slot for which:</p>
<blockquote>
<p>(<em>numberOfSlotsPerFrame</em> × SFN + slot number in the frame)
=<br />
[(<em>numberOfSlotsPerFrame</em> × SFN<sub>start time</sub> +
slot<sub>start time</sub>) + N × <em>periodicity</em> ×
<em>numberOfSlotsPerFrame</em> / 10]<br />
modulo (1024 × <em>numberOfSlotsPerFrame</em>)</p>
</blockquote>
<p>where SFN<sub>start time</sub> and slot<sub>start time</sub> are the
SFN and slot, respectively, of the first transmission of PDSCH where the
configured downlink assignment was (re-)initialised.</p>
<p>NOTE: In case of unaligned SFN across carriers in a cell group, the
SFN of the concerned Serving Cell is used to calculate the occurrences
of configured downlink assignments.</p>
<h3 id="a-downlink-for-multicast">5.8.1a Downlink for Multicast</h3>
<p>MBS Semi-Persistent Scheduling (SPS) is configured by RRC on one
Serving Cell per BWP. Multiple assignments can be active simultaneously
in the same BWP.</p>
<p>For the DL MBS SPS, a DL assignment is provided by PDCCH, and stored
or cleared based on L1 signalling indicating SPS activation or
deactivation.</p>
<p>RRC configures the following parameters when the MBS SPS is
configured:</p>
<p>- <em>cs-RNTI</em>: CS-RNTI for MBS SPS deactivation, PTP for PTM
retransmission if configured;</p>
<p>- <em>g-cs-RNTI</em>: G-CS-RNTI for activation, deactivation, and
retransmission;</p>
<p>- <em>nrofHARQ-Processes</em>: the number of configured HARQ
processes for MBS SPS;</p>
<p>- <em>harq-ProcID-Offset</em>: Offset of HARQ process for MBS
SPS;</p>
<p>- <em>periodicity</em>: periodicity of configured downlink assignment
for MBS SPS.</p>
<p>When the MBS SPS is released by upper layers, all the corresponding
configurations shall be released.</p>
<p>After a downlink assignment is configured for MBS SPS, the MAC entity
shall consider sequentially that the N<sup>th</sup> downlink assignment
occurs in the slot for which:</p>
<blockquote>
<p>(<em>numberOfSlotsPerFrame</em> × SFN + slot number in the frame)
=<br />
[(<em>numberOfSlotsPerFrame</em> × SFN<sub>start time</sub> +
slot<sub>start time</sub>) + N × <em>periodicity</em> ×
<em>numberOfSlotsPerFrame</em> / 10]<br />
modulo (1024 × <em>numberOfSlotsPerFrame</em>)</p>
</blockquote>
<p>where SFN<sub>start time</sub> and slot<sub>start time</sub> are the
SFN and slot, respectively, of the first transmission of PDSCH where the
configured downlink assignment was (re-)initialised.</p>
<h3 id="uplink">5.8.2 Uplink</h3>
<p>There are two types of transmission without dynamic grant:</p>
<p>- configured grant Type 1 where an uplink grant is provided by RRC,
and stored as configured uplink grant;</p>
<p>- configured grant Type 2 where an uplink grant is provided by PDCCH,
and stored or cleared as configured uplink grant based on L1 signalling
indicating configured uplink grant activation or deactivation.</p>
<p>Type 1 and Type 2 are configured by RRC for a Serving Cell per BWP.
Multiple configurations can be active simultaneously in the same BWP.
For Type 2, activation and deactivation are independent among the
Serving Cells. For the same BWP, the MAC entity can be configured with
both Type 1 and Type 2.</p>
<p>Only configured grant Type 1 can be configured for CG-SDT. CG-SDT can
only be configured on initial BWP.</p>
<p>RRC configures the following parameters when the configured grant
Type 1 is configured:</p>
<p>- <em>cs-RNTI</em>: CS-RNTI for retransmission;</p>
<p>- <em>cg-SDT-CS-RNTI</em>: CS-RNTI for CG-SDT retransmission;</p>
<p>- <em>cg-SDT-RSRP-ThresholdSSB</em>: an RSRP threshold configured for
SSB selection for CG-SDT;</p>
<p>- <em>periodicity</em>: periodicity of the configured grant Type
1;</p>
<p>- <em>timeDomainOffset</em>: Offset of a resource with respect to SFN
= <em>timeReferenceSFN</em> in time domain;</p>
<p>- <em>timeDomainAllocation</em>: Allocation of configured uplink
grant in time domain which contains <em>startSymbolAndLength</em> (i.e.
<em>SLIV</em> in TS 38.214 [7]) or <em>startSymbol</em> (i.e. <em>S</em>
in TS 38.214 [7]);</p>
<p>- <em>nrofHARQ-Processes</em>: the number of HARQ processes for
configured grant;</p>
<p>- <em>harq-ProcID-Offset</em>: offset of HARQ process for configured
grant configured with <em>cg-RetransmissionTimer</em> for operation with
shared spectrum channel access;</p>
<p>- <em>harq-ProcID-Offset2</em>: offset of HARQ process for configured
grant not configured with <em>cg-RetransmissionTimer</em>;</p>
<p>- <em>timeReferenceSFN</em>: SFN used for determination of the offset
of a resource in time domain. The UE uses the closest SFN with the
indicated number preceding the reception of the configured grant
configuration.</p>
<p>RRC configures the following parameters when the configured grant
Type 2 is configured:</p>
<p>- <em>cs-RNTI</em>: CS-RNTI for activation, deactivation, and
retransmission;</p>
<p>- <em>periodicity</em>: periodicity of the configured grant Type
2;</p>
<p>- <em>nrofHARQ-Processes</em>: the number of HARQ processes for
configured grant;</p>
<p>- <em>harq-ProcID-Offset</em>: offset of HARQ process for configured
grant configured with <em>cg-RetransmissionTimer</em> for operation with
shared spectrum channel access;</p>
<p>- <em>harq-ProcID-Offset2</em>: offset of HARQ process for configured
grant not configured with <em>cg-RetransmissionTimer</em>.</p>
<p>RRC configures the following parameter when retransmissions on
configured uplink grant is configured:</p>
<p>- <em>cg-RetransmissionTimer</em>: the duration after a configured
grant (re)transmission of a HARQ process when the UE shall not
autonomously retransmit that HARQ process;</p>
<p>- <em>cg-SDT-RetransmissionTimer</em>: the duration after a
configured grant (re)transmission of a HARQ process of the initial
CG-SDT transmission with CCCH message when the UE shall not autonomously
retransmit the HARQ process.</p>
<p>Upon configuration of a configured grant Type 1 for a BWP of a
Serving Cell by upper layers, the MAC entity shall:</p>
<p>1&gt; store the uplink grant provided by upper layers as a configured
uplink grant for the indicated BWP of the Serving Cell;</p>
<p>1&gt; initialise or re-initialise the configured uplink grant to
start in the symbol according to <em>timeDomainOffset</em>,
<em>timeReferenceSFN</em>, and <em>S</em> (derived from <em>SLIV</em> or
provided by <em>startSymbol</em> as specified in TS 38.214 [7]), and to
reoccur with <em>periodicity</em>.</p>
<p>After an uplink grant is configured for a configured grant Type 1,
the MAC entity shall consider sequentially that the N<sup>th</sup> (N
&gt;= 0) uplink grant occurs in the symbol for which:</p>
<p>[(SFN × <em>numberOfSlotsPerFrame</em> ×
<em>numberOfSymbolsPerSlot</em>)<br />
+ (slot number in the frame × <em>numberOfSymbolsPerSlot</em>) + symbol
number in the slot] =<br />
(<em>timeReferenceSFN</em> × <em>numberOfSlotsPerFrame</em> ×
<em>numberOfSymbolsPerSlot</em><br />
+ <em>timeDomainOffset</em> × <em>numberOfSymbolsPerSlot</em> + S + N ×
<em>periodicity</em>)<br />
modulo (1024 × <em>numberOfSlotsPerFrame</em> ×
<em>numberOfSymbolsPerSlot</em>)</p>
<p>For an uplink grant configured for configured grant Type 1 for CG-SDT
on the selected uplink carrier as in clause 5.27, when CG-SDT is
triggered and not terminated, for each configured uplink grant valid
according to TS 38.214 [7] for which the above formula is satisfied, the
MAC entity shall:</p>
<p>1&gt; if, after initial transmission for CG-SDT with CCCH message has
been performed according to clause 5.4.1, PDCCH addressed to the MAC
entity's C-RNTI has not been received:</p>
<p>2&gt; if the SSB corresponding to the configured UL grant has the
same SSB index as the SSB selected for initial transmission for CG-SDT
with CCCH message (i.e., retransmission of initial transmission of
CG-SDT):</p>
<p>3&gt; select this SSB;</p>
<p>3&gt; indicate the SSB index corresponding to the configured uplink
grant to the lower layer;</p>
<p>3&gt; consider this configured uplink grant as valid.</p>
<p>1&gt; else if at least one SSB configured for CG-SDT with SS-RSRP
above <em>cg-SDT-RSRP-ThresholdSSB</em> is available:</p>
<p>2&gt; if at least one SSB corresponding to the configured uplink
grant with SS-RSRP above the <em>cg-SDT-RSRP-ThresholdSSB</em> is
available:</p>
<p>3&gt; if this is the initial transmission of CG-SDT with CCCH message
after the CG-SDT procedure is initiated as in clause 5.27 (i.e., initial
transmission for CG-SDT):</p>
<p>4&gt; select an SSB with SS-RSRP above
<em>cg-SDT-RSRP-ThresholdSSB</em> amongst the SSB(s) associated with the
configured uplink grant.</p>
<p>3&gt; else if PDCCH addressed to C-RNTI has been received after the
initial transmission of CG-SDT with CCCH message (i.e., subsequent new
transmission for CG-SDT):</p>
<p>4&gt; if SS-RSRP of the SSB selected for the previous transmission
for CG-SDT is above <em>cg-SDT-RSRP-ThresholdSSB</em> and this SSB is
associated with this configured uplink grant:</p>
<p>5&gt; select this SSB.</p>
<p>4&gt; else if SS-RSRP of the SSB selected for the previous
transmission for CG-SDT is not above
<em>cg-SDT-RSRP-ThresholdSSB</em>:</p>
<p>5&gt; select an SSB with SS-RSRP above
<em>cg-SDT-RSRP-ThresholdSSB</em> amongst the SSB(s) associated with the
configured uplink grant.</p>
<p>3&gt; if SSB is selected above:</p>
<p>4&gt; indicate the SSB index to the lower layer;</p>
<p>4&gt; consider this configured uplink grant as valid.</p>
<p>1&gt; else:</p>
<p>2&gt; consider this configured uplink grant as not valid.</p>
<p>2&gt; if PDCCH addressed to C-RNTI after the initial transmission of
the CG-SDT with CCCH message has been received:</p>
<p>3&gt; if there is data available for transmission for at least one RB
configured for SDT:</p>
<p>4&gt; initiate Random Access procedure in clause 5.1.</p>
<p>NOTE 1: When the UE determines if there is an SSB with SS-RSRP above
<em>cg-SDT-RSRP-ThresholdSSB</em>, the UE uses the latest unfiltered
L1-RSRP measurement.</p>
<p>After an uplink grant is configured for a configured grant Type 2,
the MAC entity shall consider sequentially that the N<sup>th</sup> (N
&gt;= 0) uplink grant occurs in the symbol for which:</p>
<p>[(SFN × <em>numberOfSlotsPerFrame</em> ×
<em>numberOfSymbolsPerSlot</em>)<br />
+ (slot number in the frame × <em>numberOfSymbolsPerSlot</em>) + symbol
number in the slot] =<br />
[(SFN<sub>start time</sub> × <em>numberOfSlotsPerFrame</em> ×
<em>numberOfSymbolsPerSlot</em><br />
+ slot<sub>start time</sub> × <em>numberOfSymbolsPerSlot</em> +
symbol<sub>start time</sub>) + N × <em>periodicity</em>]<br />
modulo (1024 × <em>numberOfSlotsPerFrame</em> ×
<em>numberOfSymbolsPerSlot</em>)</p>
<p>where SFN<sub>start time</sub>, slot<sub>start time</sub>, and
symbol<sub>start time</sub> are the SFN, slot, and symbol, respectively,
of the first transmission opportunity of PUSCH where the configured
uplink grant was (re-)initialised.</p>
<p>If <em>cg-nrofPUSCH-InSlot</em> or <em>cg-nrofSlots</em> is
configured for a configured grant Type 1 or Type 2, the MAC entity shall
consider the uplink grants occur in those additional PUSCH allocations
as specified in clause 6.1.2.3 of TS 38.214 [7].</p>
<p>NOTE 2: In case of unaligned SFN across carriers in a cell group, the
SFN of the concerned Serving Cell is used to calculate the occurrences
of configured uplink grants.</p>
<p>When the configured uplink grant is released by upper layers, all the
corresponding configurations shall be released and all corresponding
uplink grants shall be cleared.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if at least one configured uplink grant confirmation has been
triggered and not cancelled; and</p>
<p>1&gt; if the MAC entity has UL resources allocated for new
transmission:</p>
<p>2&gt; if, in this MAC entity, at least one configured uplink grant is
configured by <em>configuredGrantConfigToAddModList</em>:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate a
Multiple Entry Configured Grant Confirmation MAC CE as defined in clause
6.1.3.31.</p>
<p>2&gt; else:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate a
Configured Grant Confirmation MAC CE as defined in clause 6.1.3.7.</p>
<p>2&gt; cancel all triggered configured uplink grant
confirmation(s).</p>
<p>For a configured grant Type 2, the MAC entity shall clear the
configured uplink grant(s) immediately after first transmission of
Configured Grant Confirmation MAC CE or Multiple Entry Configured Grant
Confirmation MAC CE which confirms the configured uplink grant
deactivation.</p>
<p>Retransmissions use:</p>
<p>- repetition of configured uplink grants; or</p>
<p>- received uplink grants addressed to CS-RNTI; or</p>
<p>- configured uplink grants with <em>cg-RetransmissionTimer</em> or
<em>cg-SDT-RetransmissionTimer</em> configured.</p>
<h3 id="sidelink">5.8.3 Sidelink</h3>
<p>There are two types of transmission without dynamic sidelink
grant:</p>
<p>- configured grant Type 1 where an sidelink grant is provided by RRC,
and stored as configured sidelink grant;</p>
<p>- configured grant Type 2 where an sidelink grant is provided by
PDCCH, and stored or cleared as configured sidelink grant based on L1
signalling indicating configured sidelink grant activation or
deactivation.</p>
<p>Type 1 and/or Type 2 are configured with a single BWP. Multiple
configurations of up to 8 configured grants (including both Type 1 and
Type 2, if configured) can be active simultaneously on the BWP.</p>
<p>RRC configures the following parameters when the configured grant
Type 1 is configured, as specified in TS 38.331 [5] or TS 36.331
[21]:</p>
<p>- <em>sl-ConfigIndexCG</em>: the identifier of a configured grant for
sidelink;</p>
<p>- <em>sl-CS-RNTI</em>: SL-CS-RNTI for retransmission;</p>
<p>- <em>sl-NrOfHARQ-Processes</em>: the number of HARQ processes for
configured grant;</p>
<p>- <em>sl-PeriodCG</em>: periodicity of the configured grant Type
1;</p>
<p>- <em>sl-TimeOffsetCG-Type1</em>: Offset of a resource with respect
to reference logical slot defined by <em>sl-TimeReferenceSFN-Type1</em>
in time domain, referring to the number of logical slots in a resource
pool;</p>
<p>- <em>sl-TimeResourceCG-Type1</em>: time resource location of the
configured grant Type 1;</p>
<p>- <em>sl-CG-MaxTransNumList</em>: the maximum number of times that a
TB can be transmitted using the configured grant;</p>
<p><em>- sl-HARQ-ProcID-offset</em>: offset of HARQ process for
configured grant Type 1;</p>
<p>- <em>sl-TimeReferenceSFN-Type1</em>: SFN used for determination of
the offset of a resource in time domain. If it is present, the UE uses
the first logical slot of associated resource pool after the starting
time of the closest SFN with the indicated number preceding the
reception of the sidelink configured grant configuration Type 1 as
reference logical slot. If it is absent, the indicated reference SFN is
zero.</p>
<p>RRC configures the following parameters when the configured grant
Type 2 is configured, as specified in TS 38.331 [5]:</p>
<p>- <em>sl-ConfigIndexCG</em>: the identifier of a configured grant for
sidelink;</p>
<p>- <em>sl-CS-RNTI</em>: SL-CS-RNTI for activation, deactivation, and
retransmission;</p>
<p>- <em>sl-NrOfHARQ-Processes</em>: the number of HARQ processes for
configured grant;</p>
<p>- <em>sl-PeriodCG</em>: periodicity of the configured grant Type
2;</p>
<p>- <em>sl-CG-MaxTransNumList</em>: the maximum number of times that a
TB can be transmitted using the configured grant;</p>
<p><em>- sl-HARQ-ProcID-offset</em>: offset of HARQ process for
configured grant Type 2.</p>
<p>Upon configuration of a configured grant Type 1, the MAC entity shall
for each configured sidelink grant:</p>
<p>1&gt; store the sidelink grant provided by RRC as a configured
sidelink grant;</p>
<p>1&gt; initialise or re-initialise the configured sidelink grant to
determine PSCCH duration(s) and PSSCH duration(s) according to
<em>sl-TimeOffsetCG-Type1</em> and <em>sl-TimeResourceCG-Type1</em>, and
to reoccur with <em>sl-periodCG</em> for transmissions of multiple MAC
PDUs according to clause 8.1.2 of TS 38.214 [7].</p>
<p>NOTE 1: If the MAC entity is configured with multiple configured
sidelink grants, collision among the configured sidelink grants may
occur. How to handle the collision is left to UE implementation.</p>
<p>After a sidelink grant is configured for a configured grant Type 1,
the MAC entity shall consider sequentially that the first slot of the
S<sup>th</sup> sidelink grant occurs in the logical slot for which:</p>
<p>CURRENT_slot = (<em>sl-ReferenceSlotCG-Type1</em> +
<em>sl-TimeOffsetCG-Type1</em> + S × <em>PeriodicitySL</em>) modulo
T'<sub>max</sub></p>
<p>where CURRENT_slot refers to current logical slot in the associated
resource pool,<span class="math inline">\(\ PeriodicitySL = \left\lceil
\frac{{T&#39;}_{\max}\ }{10240\ ms} \times sl\text{-}PeriodCG
\right\rceil\)</span> and T'<sub>max</sub> is the number of slots that
belongs to the associated resource pool as defined in clause 8 of TS
38.214[7]. <em>sl-ReferenceSlotCG-Type1</em> refers to reference logical
slot defined by <em>sl-TimeReferenceSFN-Type1</em>.</p>
<p>After a sidelink grant is configured for a configured grant Type 2,
the MAC entity shall consider sequentially that the first slot of
S<sup>th</sup> sidelink grant occurs in the logical slot for which:</p>
<p>CURRENT_slot = (<em>sl-StartSlotCG-Type2</em> + S ×
<em>PeriodicitySL</em>) modulo T'<sub>max</sub></p>
<p>where <em>sl-StartSlotCG-Type2</em> refers to the logical slot of the
first transmission opportunity of PSSCH where the configured sidelink
grant was (re)initialised.</p>
<p>When a configured sidelink grant is released by RRC, all the
corresponding configurations shall be released and all corresponding
sidelink grants shall be cleared.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the configured sidelink grant confirmation has been
triggered and not cancelled; and</p>
<p>1&gt; if the MAC entity has UL resources allocated for new
transmission:</p>
<p>2&gt; instruct the Multiplexing and Assembly procedure to generate a
Sidelink Configured Grant Confirmation MAC CE as defined in clause
6.1.3.34;</p>
<p>2&gt; cancel the triggered configured sidelink grant
confirmation.</p>
<p>For a configured grant Type 2, the MAC entity shall clear the
corresponding configured sidelink grant immediately after first
transmission of Sidelink Configured Grant Confirmation MAC CE triggered
by the configured sidelink grant deactivation.</p>
<h2 id="activationdeactivation-of-scells">5.9 Activation/Deactivation of
SCells</h2>
<p>If the MAC entity is configured with one or more SCells, the network
may activate and deactivate the configured SCells. Upon configuration of
an SCell, the SCell is deactivated unless the parameter
<em>sCellState</em> is set to <em>activated</em> for the SCell by upper
layers.</p>
<p>The configured SCell(s) is activated and deactivated by:</p>
<p>- receiving the SCell Activation/Deactivation MAC CE described in
clause 6.1.3.10;</p>
<p>- receiving the Enhanced SCell Activation/Deactivation MAC CE
described in clause 6.1.3.55;</p>
<p>- configuring <em>sCellDeactivationTimer</em> timer per configured
SCell (except the SCell configured with PUCCH, if any): the associated
SCell is deactivated upon its expiry;</p>
<p>- configuring <em>sCellState</em> per configured SCell: if
configured, the associated SCell is activated upon SCell
configuration;</p>
<p>- receiving <em>scg-State</em>: the SCells of SCG are
deactivated.</p>
<p>The MAC entity shall for each configured SCell:</p>
<p>1&gt; if an SCell is configured with <em>sCellState</em> set to
<em>activated</em> upon SCell configuration, or an SCell
Activation/Deactivation MAC CE or an Enhanced SCell
Activation/Deactivation MAC CE is received activating the SCell:</p>
<p>2&gt; if the SCell was deactivated prior to receiving this Enhanced
SCell Activation/Deactivation MAC CE and a TRS is indicated for this
SCell:</p>
<blockquote>
<p>3&gt; indicate to lower layers the information regarding the TRS.</p>
</blockquote>
<p>2&gt; if the SCell was deactivated prior to receiving this SCell
Activation/Deactivation MAC CE or this Enhanced SCell
Activation/Deactivation MAC CE; or</p>
<p>2&gt; if the SCell is configured with <em>sCellState</em> set to
<em>activated</em> upon SCell configuration:</p>
<p>3&gt; if <em>firstActiveDownlinkBWP-Id</em> is not set to dormant
BWP:</p>
<p>4&gt; activate the SCell according to the timing defined in TS 38.213
[6] for MAC CE activation and according to the timing defined in TS
38.133 [11] for direct SCell activation; i.e. apply normal SCell
operation including:</p>
<p>5&gt; SRS transmissions on the SCell;</p>
<p>5&gt; CSI reporting for the SCell;</p>
<p>5&gt; PDCCH monitoring on the SCell;</p>
<p>5&gt; PDCCH monitoring for the SCell;</p>
<p>5&gt; PUCCH transmissions on the SCell, if configured.</p>
<p>3&gt; else (i.e. <em>firstActiveDownlinkBWP-Id</em> is set to dormant
BWP):</p>
<p>4&gt; stop the <em>bwp-InactivityTimer</em> of this Serving Cell, if
running.</p>
<p>3&gt; activate the DL BWP and UL BWP indicated by
<em>firstActiveDownlinkBWP-Id</em> and <em>firstActiveUplinkBWP-Id</em>
respectively.</p>
<p>2&gt; start or restart the <em>sCellDeactivationTimer</em> associated
with the SCell according to the timing defined in TS 38.213 [6] for MAC
CE activation and according to the timing defined in TS 38.133 [11] for
direct SCell activation;</p>
<p>2&gt; if the active DL BWP is not the dormant BWP:</p>
<p>3&gt; (re-)initialize any suspended configured uplink grants of
configured grant Type 1 associated with this SCell according to the
stored configuration, if any, and to start in the symbol according to
rules in clause 5.8.2;</p>
<p>3&gt; trigger PHR according to clause 5.4.6.</p>
<p>1&gt; else if an SCell Activation/Deactivation MAC CE or an Enhanced
SCell Activation/Deactivation MAC CE is received deactivating the SCell;
or</p>
<p>1&gt; if the <em>sCellDeactivationTimer</em> associated with the
activated SCell expires; or</p>
<p>1&gt; if the SCG associated with the activated SCell is
deactivated:</p>
<p>2&gt; deactivate the SCell according to the timing defined in TS
38.213 [6];</p>
<p>2&gt; stop the <em>sCellDeactivationTimer</em> associated with the
SCell;</p>
<p>2&gt; stop the <em>bwp-InactivityTimer</em> associated with the
SCell;</p>
<p>2&gt; deactivate any active BWP associated with the SCell;</p>
<p>2&gt; clear any configured downlink assignment and any configured
uplink grant Type 2 associated with the SCell respectively;</p>
<p>2&gt; clear any PUSCH resource for semi-persistent CSI reporting
associated with the SCell;</p>
<p>2&gt; suspend any configured uplink grant Type 1 associated with the
SCell;</p>
<p>2&gt; flush all HARQ buffers associated with the SCell;</p>
<p>2&gt; cancel, if any, triggered consistent LBT failure for the
SCell.</p>
<p>1&gt; if PDCCH on the activated SCell indicates an uplink grant or
downlink assignment; or</p>
<p>1&gt; if PDCCH on the Serving Cell scheduling the activated SCell
indicates an uplink grant or a downlink assignment for the activated
SCell; or</p>
<p>1&gt; if a MAC PDU is transmitted in a configured uplink grant and
LBT failure indication is not received from lower layers; or</p>
<p>1&gt; if a MAC PDU is received in a configured downlink
assignment:</p>
<p>2&gt; restart the <em>sCellDeactivationTimer</em> associated with the
SCell.</p>
<p>1&gt; if the SCell is deactivated:</p>
<p>2&gt; not transmit SRS on the SCell;</p>
<p>2&gt; not report CSI for the SCell;</p>
<p>2&gt; not transmit on UL-SCH on the SCell;</p>
<p>2&gt; not transmit on RACH on the SCell;</p>
<p>2&gt; not monitor the PDCCH on the SCell;</p>
<p>2&gt; not monitor the PDCCH for the SCell;</p>
<p>2&gt; not transmit PUCCH on the SCell.</p>
<p>HARQ feedback for the MAC PDU containing SCell
Activation/Deactivation MAC CE or Enhanced SCell Activation/Deactivation
MAC CE shall not be impacted by PCell, PSCell and PUCCH SCell
interruptions due to SCell activation/deactivation in TS 38.133
[11].</p>
<p>When SCell is deactivated, the ongoing Random Access procedure on the
SCell, if any, is aborted.</p>
<h2 id="activationdeactivation-of-pdcp-duplication">5.10
Activation/Deactivation of PDCP duplication</h2>
<p>If one or more DRBs are configured with PDCP duplication, the network
may activate and deactivate the PDCP duplication for all or a subset of
associated RLC entities for the configured DRB(s).</p>
<p>The PDCP duplication for the configured DRB(s) is activated and
deactivated by:</p>
<p>- receiving the Duplication Activation/Deactivation MAC CE described
in clause 6.1.3.11;</p>
<p>- receiving the Duplication RLC Activation/Deactivation MAC CE
described in clause 6.1.3.32;</p>
<p>- indication by RRC.</p>
<p>The PDCP duplication for all or a subset of associated RLC entities
for the configured DRB(s) is activated and deactivated by:</p>
<p>- receiving the Duplication RLC Activation/Deactivation MAC CE
described in clause 6.1.3.32;</p>
<p>- indication by RRC.</p>
<p>The PDCP duplication for all associated RLC entities for the
configured DRB(s) is activated by:</p>
<p>- receiving an uplink grant addressed to CS-RNTI with NDI=1 for a
logical channel associated with the DRB configured with
<em>survivalTimeStateSupport</em>, described in clause 5.4.1.</p>
<p>The MAC entity shall for each DRB configured with PDCP
duplication:</p>
<p>1&gt; if a Duplication Activation/Deactivation MAC CE is received
activating the PDCP duplication of the DRB:</p>
<p>2&gt; indicate the activation of PDCP duplication of the DRB to upper
layers.</p>
<p>1&gt; if a Duplication Activation/Deactivation MAC CE is received
deactivating the PDCP duplication of the DRB:</p>
<p>2&gt; indicate the deactivation of PDCP duplication of the DRB to
upper layers.</p>
<p>1&gt; if a Duplication RLC Activation/Deactivation MAC CE is received
activating PDCP duplication for associated RLC entities of a DRB
configured with PDCP duplication:</p>
<p>2&gt; indicate the activation of PDCP duplication for the indicated
secondary RLC entity(ies) of the DRB to upper layers.</p>
<p>1&gt; if a Duplication RLC Activation/Deactivation MAC CE is received
deactivating PDCP duplication for associated RLC entities of a DRB
configured with PDCP duplication:</p>
<p>2&gt; indicate the deactivation of PDCP duplication for the indicated
secondary RLC entity(ies) of the DRB to upper layers.</p>
<p>1&gt; if activation of a PDCP duplication for all configured RLC
entities is triggered for the DRB as specified in clause 5.4.1:</p>
<p>2&gt; indicate the activation of PDCP duplication for all configured
RLC entities of the DRB to upper layers.</p>
<h2 id="mac-reconfiguration">5.11 MAC reconfiguration</h2>
<p>When a reconfiguration of the MAC entity is requested by upper
layers, the MAC entity shall:</p>
<p>1&gt; initialize the corresponding HARQ entity upon addition of an
SCell;</p>
<p>1&gt; remove the corresponding HARQ entity upon removal of an
SCell;</p>
<p>1&gt; apply the new value for timers when the timer is
(re)started;</p>
<p>1&gt; apply the new maximum parameter value when counters are
initialized;</p>
<p>1&gt; apply immediately the configurations received from upper layers
for other parameters.</p>
<h2 id="mac-reset">5.12 MAC Reset</h2>
<p>If a reset of the MAC entity is requested by upper layers or the
reset of the MAC entity is triggered due to SCG deactivation as defined
in clause 5.29, the MAC entity shall:</p>
<p>1&gt; if the MAC reset is not due to SCG deactivation:</p>
<p>2&gt; initialize <em>Bj</em> for each logical channel to zero;</p>
<p>1&gt; initialize <em>SBj</em> for each logical channel to zero if
Sidelink resource allocation mode 1 is configured by RRC;</p>
<blockquote>
<p>1&gt; if upper layers indicate SCG deactivation and
<em>bfd-and-RLM</em> with value <em>true</em> is configured for the
deactivated SCG:</p>
<p>2&gt; stop (if running) all timers except
<em>beamFailureDetectionTimer</em> associated with PSCell and
<em>timeAlignmentTimer</em>s.</p>
<p>1&gt; else:</p>
</blockquote>
<p>2&gt; stop (if running) all timers, except MBS broadcast DRX
timers;</p>
<p>2&gt; consider all <em>timeAlignmentTimer</em>s,
<em>inactivePosSRS-TimeAlignmentTimer</em>, and
<em>cg-SDT-TimeAlignmentTimer</em>, if configured, as expired and
perform the corresponding actions in clause 5.2;</p>
<p>1&gt; set the NDIs for all uplink HARQ processes to the value 0;</p>
<p>1&gt; sets the NDIs for all HARQ process IDs to the value 0 for
monitoring PDCCH in Sidelink resource allocation mode 1;</p>
<p>1&gt; stop, if any, ongoing Random Access procedure;</p>
<p>1&gt; discard explicitly signalled contention-free Random Access
Resources for 4-step RA type and 2-step RA type, if any;</p>
<p>1&gt; flush Msg3 buffer;</p>
<p>1&gt; flush MSGA buffer;</p>
<p>1&gt; cancel, if any, triggered Scheduling Request procedure;</p>
<p>1&gt; cancel, if any, triggered Buffer Status Reporting
procedure;</p>
<p>1&gt; cancel, if any, triggered Power Headroom Reporting
procedure;</p>
<p>1&gt; cancel, if any, triggered consistent LBT failure;</p>
<p>1&gt; cancel, if any, triggered BFR;</p>
<p>1&gt; cancel, if any, triggered Sidelink Buffer Status Reporting
procedure;</p>
<p>1&gt; cancel, if any, triggered Pre-emptive Buffer Status Reporting
procedure;</p>
<p>1&gt; cancel, if any, triggered Timing Advance Reporting
procedure;</p>
<p>1&gt; cancel, if any, triggered Recommended bit rate query
procedure;</p>
<p>1&gt; cancel, if any, triggered Configured uplink grant
confirmation;</p>
<p>1&gt; cancel, if any, triggered configured sidelink grant
confirmation;</p>
<p>1&gt; clear, if any, configured sidelink grants;</p>
<p>1&gt; cancel, if any, triggered Desired Guard Symbol query;</p>
<p>1&gt; cancel, if any, triggered Positioning Measurement Gap
Activation/Deactivation Request procedure;</p>
<p>1&gt; cancel, if any, triggered SDT procedure;</p>
<p>1&gt; cancel, if any, triggered IAB-MT Recommended Beam Indication
query;</p>
<p>1&gt; cancel, if any, triggered Desired DL TX Power Adjustment
query;</p>
<p>1&gt; cancel, if any, triggered Desired IAB-MT PSD range query;</p>
<p>1&gt; cancel, if any, triggered Case-6 Timing Request query;</p>
<p>1&gt; flush the soft buffers for all DL HARQ processes, except for
the DL HARQ process being used for MBS broadcast;</p>
<p>1&gt; for each DL HARQ process, except for the DL HARQ process being
used for MBS broadcast, consider the next received transmission for a TB
as the very first transmission;</p>
<p>1&gt; release, if any, Temporary C-RNTI;</p>
<p>1&gt; clear, if any, Differential Koffset;</p>
<p>1&gt; if upper layers indicate SCG deactivation and
<em>bfd-and-RLM</em> with value <em>true</em> is not configured; or</p>
<p>1&gt; if the MAC reset is not due to SCG deactivation:</p>
<p>2&gt; reset all <em>BFI_COUNTER</em>s;</p>
<p>1&gt; reset all <em>LBT_COUNTERs</em>.</p>
<p>If a Sidelink specific reset of the MAC entity is requested for a
PC5-RRC connection by upper layers, the MAC entity shall:</p>
<p>1&gt; flush the soft buffers for all Sidelink processes for all TB(s)
associated to the PC5-RRC connection;</p>
<p>1&gt; consider all Sidelink processes for all TB(s) associated to the
PC5-RRC connection as unoccupied;</p>
<p>1&gt; cancel, if any, triggered Scheduling Request procedure only
associated to the PC5-RRC connection;</p>
<p>1&gt; cancel, if any, triggered Sidelink Buffer Status Reporting
procedure only associated to the PC5-RRC connection;</p>
<p>1&gt; cancel, if any, triggered Sidelink CSI Reporting procedure
associated to the PC5-RRC connection;</p>
<p>1&gt; cancel, if any, triggered Sidelink DRX Command MAC CE
associated to the PC5-RRC connection;</p>
<p>1&gt; cancel, if any, triggered Sidelink IUC-Request transmission
procedure associated to the PC5-RRC connection;</p>
<p>1&gt; cancel, if any, triggered Sidelink IUC-Information Reporting
procedure associated to the PC5-RRC connection;</p>
<p>1&gt; stop (if running) all timers associated to the PC5-RRC
connection;</p>
<p>1&gt; reset the <em>numConsecutiveDTX</em> associated to the PC5-RRC
connection;</p>
<p>1&gt; initialize <em>SBj</em> for each logical channel associated to
the PC5-RRC connection to zero.</p>
<h2 id="a-void">5.12a Void</h2>
<h2 id="handling-of-unknown-unforeseen-and-erroneous-protocol-data">5.13
Handling of unknown, unforeseen and erroneous protocol data</h2>
<p>When a MAC entity receives a MAC PDU for the MAC entity's C-RNTI,
CS-RNTI, G-RNTI, G-CS-RNTI or by the configured downlink assignment,
containing a Reserved LCID or eLCID value, or an LCID or eLCID value the
MAC Entity does not support, the MAC entity shall at least:</p>
<p>1&gt; discard the received subPDU and any remaining subPDUs in the
MAC PDU.</p>
<p>When a MAC entity receives a MAC PDU for the MAC entity's C-RNTI or
CS-RNTI, or by the configured downlink assignment, containing an LCID or
eLCID value which is not configured, or an LCID or eLCID value
associated with a suspended RB as specified in TS 38.331 [5], the MAC
entity shall at least:</p>
<p>1&gt; discard the received subPDU.</p>
<p>When a MAC entity receives a MAC PDU on SL-SCH containing a Reserved
LCID value for broadcast or groupcast, or an LCID value which is not
configured, the MAC entity shall:</p>
<p>1&gt; discard the received subPDU.</p>
<p>When a MAC entity receives a MAC PDU on SL-SCH containing a Reserved
LCID value for unicast, the MAC entity shall:</p>
<p>1&gt; discard the received subPDU and any remaining subPDUs in the
MAC PDU.</p>
<h2 id="handling-of-measurement-gaps">5.14 Handling of measurement
gaps</h2>
<p>During an activated measurement gap, the MAC entity shall, on the
Serving Cell(s) in the corresponding frequency range of the measurement
gap configured by <em>measGapConfig</em> as specified in TS 38.331
[5]:</p>
<p>1&gt; not perform the transmission of HARQ feedback, SR, and CSI;</p>
<p>1&gt; not report SRS;</p>
<p>1&gt; not transmit on UL-SCH except for Msg3 or the MSGA payload as
specified in clause 5.4.2.2;</p>
<p>1&gt; if the <em>ra-ResponseWindow</em> or the
<em>ra-ContentionResolutionTimer</em> or the
<em>msgB-ResponseWindow</em> is running:</p>
<p>2&gt; monitor the PDCCH as specified in clauses 5.1.4 and 5.1.5.</p>
<p>1&gt; else:</p>
<p>2&gt; not monitor the PDCCH;</p>
<p>2&gt; not receive on DL-SCH.</p>
<h2 id="bandwidth-part-bwp-operation">5.15 Bandwidth Part (BWP)
operation</h2>
<h3 id="downlink-and-uplink">5.15.1 Downlink and Uplink</h3>
<p>In addition to clause 12 of TS 38.213 [6], this clause specifies
requirements on BWP operation.</p>
<p>A Serving Cell may be configured with one or multiple BWPs, and the
maximum number of BWP per Serving Cell is specified in TS 38.213
[6].</p>
<p>The BWP switching for a Serving Cell is used to activate an inactive
BWP and deactivate an active BWP at a time. The BWP switching is
controlled by the PDCCH indicating a downlink assignment or an uplink
grant, by the <em>bwp-InactivityTimer</em>, by RRC signalling, or by the
MAC entity itself upon initiation of Random Access procedure or upon
detection of consistent LBT failure on SpCell. Upon RRC
(re-)configuration of <em>firstActiveDownlinkBWP-Id</em> and/or
<em>firstActiveUplinkBWP-Id</em> for SpCell except for PSCell when SCG
is deactivated (see clause 5.29) or activation of an SCell, the DL BWP
and/or UL BWP indicated by <em>firstActiveDownlinkBWP-Id</em> and/or
<em>firstActiveUplinkBWP-Id</em> respectively (as specified in TS 38.331
[5]) is active without receiving PDCCH indicating a downlink assignment
or an uplink grant. Upon RRC (re-)configuration of
<em>firstActiveDownlinkBWP-Id</em> for PSCell when SCG is deactivated,
the DL BWP is switched to the <em>firstActiveDownlinkBWP-Id</em> as
specified in TS 38.331 [5]. The active BWP for a Serving Cell is
indicated by either RRC or PDCCH (as specified in TS 38.213 [6]). For
unpaired spectrum, a DL BWP is paired with a UL BWP, and BWP switching
is common for both UL and DL.</p>
<p>For each SCell a dormant BWP may be configured with
<em>dormantBWP-Id</em> by RRC signalling as described in TS 38.331 [5].
Entering or leaving dormant BWP for SCells is done by BWP switching per
SCell or per dormancy SCell group based on instruction from PDCCH (as
specified in TS 38.213 [6]). The dormancy SCell group configurations are
configured by RRC signalling as described in TS 38.331 [5]. Upon
reception of the PDCCH indicating leaving dormant BWP, the DL BWP
indicated by <em>firstOutsideActiveTimeBWP-Id</em> or by
<em>firstWithinActiveTimeBWP-Id</em> (as specified in TS 38.331 [5] and
TS 38.213 [6]) is activated. Upon reception of the PDCCH indicating
entering dormant BWP, the DL BWP indicated by <em>dormantBWP-Id</em> (as
specified in TS 38.331 [5]) is activated. The dormant BWP configuration
for SpCell or PUCCH SCell is not supported.</p>
<p>For each activated Serving Cell configured with a BWP, the MAC entity
shall:</p>
<p>1&gt; if a BWP is activated and the active DL BWP for the Serving
Cell is not the dormant BWP and the Serving Cell is not the PSCell of
deactivated SCG:</p>
<p>2&gt; transmit on UL-SCH on the BWP;</p>
<p>2&gt; transmit on RACH on the BWP, if PRACH occasions are
configured;</p>
<p>2&gt; monitor the PDCCH on the BWP;</p>
<p>2&gt; transmit PUCCH on the BWP, if configured;</p>
<p>2&gt; report CSI for the BWP;</p>
<p>2&gt; transmit SRS on the BWP, if configured;</p>
<p>2&gt; receive DL-SCH on the BWP;</p>
<p>2&gt; (re-)initialize any suspended configured uplink grants of
configured grant Type 1 on the active BWP according to the stored
configuration, if any, and to start in the symbol according to rules in
clause 5.8.2;</p>
<p>2&gt; if <em>lbt-FailureRecoveryConfig</em> is configured:</p>
<p>3&gt; stop the <em>lbt-FailureDetectionTimer</em>, if running;</p>
<p>3&gt; set <em>LBT_COUNTER</em> to 0;</p>
<p>3&gt; monitor LBT failure indications from lower layers as specified
in clause 5.21.2.</p>
<p>1&gt; if a BWP is activated and the active DL BWP for the Serving
Cell is dormant BWP:</p>
<p>2&gt; stop the <em>bwp-InactivityTimer</em> of this Serving Cell, if
running.</p>
<p>2&gt; not monitor the PDCCH on the BWP;</p>
<p>2&gt; not monitor the PDCCH for the BWP;</p>
<p>2&gt; not receive DL-SCH on the BWP;</p>
<p>2&gt; not report CSI on the BWP, report CSI except aperiodic CSI for
the BWP;</p>
<p>2&gt; not transmit SRS on the BWP;</p>
<p>2&gt; not transmit on UL-SCH on the BWP;</p>
<p>2&gt; not transmit on RACH on the BWP;</p>
<p>2&gt; not transmit PUCCH on the BWP;</p>
<p>2&gt; clear any configured downlink assignment and any configured
uplink grant Type 2 associated with the SCell respectively;</p>
<p>2&gt; suspend any configured uplink grant Type 1 associated with the
SCell;</p>
<p>2&gt; if configured, perform beam failure detection and beam failure
recovery for the SCell if beam failure is detected.</p>
<p>1&gt; if a BWP is deactivated or the Serving Cell is PSCell of
deactivated SCG:</p>
<p>2&gt; not transmit on UL-SCH on the BWP;</p>
<p>2&gt; not transmit on RACH on the BWP;</p>
<p>2&gt; not monitor the PDCCH on the BWP;</p>
<p>2&gt; not transmit PUCCH on the BWP;</p>
<p>2&gt; not report CSI for the BWP;</p>
<p>2&gt; not transmit SRS on the BWP;</p>
<p>2&gt; not receive DL-SCH on the BWP;</p>
<p>2&gt; clear any configured downlink assignment and configured uplink
grant of configured grant Type 2 on the BWP;</p>
<p>2&gt; suspend any configured uplink grant of configured grant Type 1
on the inactive BWP.</p>
<p>Upon initiation of the Random Access procedure on a Serving Cell,
after the selection of carrier for performing Random Access procedure as
specified in clause 5.1.1, the MAC entity shall for the selected carrier
of this Serving Cell:</p>
<p>1&gt; if PRACH occasions are not configured for the active UL
BWP:</p>
<p>2&gt; if the UE is a RedCap UE; and</p>
<p>2&gt; if <em>initialUplinkBWP-RedCap</em> is configured:</p>
<p>3&gt; switch the active UL BWP to BWP indicated by
<em>initialUplinkBWP-RedCap</em>.</p>
<p>2&gt; else:</p>
<p>3&gt; switch the active UL BWP to BWP indicated by
<em>initialUplinkBWP</em>.</p>
<p>2&gt; if the Serving Cell is an SpCell:</p>
<p>3&gt; if the UE is a RedCap UE; and</p>
<p>3&gt; if <em>initialDownlinkBWP-RedCap</em> is configured:</p>
<p>4&gt; switch the active DL BWP to BWP indicated by
<em>initialDownlinkBWP-RedCap</em>.</p>
<p>3&gt; else:</p>
<p>4&gt; switch the active DL BWP to BWP indicated by
<em>initialDownlinkBWP</em>.</p>
<p>1&gt; else:</p>
<p>2&gt; if the Serving Cell is an SpCell:</p>
<p>3&gt; if the active DL BWP does not have the same <em>bwp-Id</em> as
the active UL BWP:</p>
<p>4&gt; switch the active DL BWP to the DL BWP with the same
<em>bwp-Id</em> as the active UL BWP.</p>
<p>1&gt; stop the <em>bwp-InactivityTimer</em> associated with the
active DL BWP of this Serving Cell, if running.</p>
<p>1&gt; if the Serving Cell is SCell:</p>
<p>2&gt; stop the <em>bwp-InactivityTimer</em> associated with the
active DL BWP of SpCell, if running.</p>
<p>1&gt; perform the Random Access procedure on the active DL BWP of
SpCell and active UL BWP of this Serving Cell.</p>
<p>If the MAC entity receives a PDCCH for BWP switching of a Serving
Cell, the MAC entity shall:</p>
<p>1&gt; if there is no ongoing Random Access procedure associated with
this Serving Cell; or</p>
<p>1&gt; if the ongoing Random Access procedure associated with this
Serving Cell is successfully completed upon reception of this PDCCH
addressed to C-RNTI (as specified in clauses 5.1.4, 5.1.4a, and
5.1.5):</p>
<p>2&gt; cancel, if any, triggered consistent LBT failure for this
Serving Cell;</p>
<p>2&gt; perform BWP switching to a BWP indicated by the PDCCH.</p>
<p>If the MAC entity receives a PDCCH for BWP switching for a Serving
Cell(s) or a dormancy SCell group(s) while a Random Access procedure
associated with that Serving Cell is ongoing in the MAC entity, it is up
to UE implementation whether to switch BWP or ignore the PDCCH for BWP
switching, except for the PDCCH reception for BWP switching addressed to
the C-RNTI for successful Random Access procedure completion (as
specified in clauses 5.1.4, 5.1.4a, and 5.1.5) in which case the UE
shall perform BWP switching to a BWP indicated by the PDCCH. Upon
reception of the PDCCH for BWP switching other than successful
contention resolution, if the MAC entity decides to perform BWP
switching, the MAC entity shall stop the ongoing Random Access procedure
and initiate a Random Access procedure after performing the BWP
switching; if the MAC decides to ignore the PDCCH for BWP switching, the
MAC entity shall continue with the ongoing Random Access procedure on
the Serving Cell.</p>
<p>Upon reception of RRC (re-)configuration for BWP switching for a
Serving Cell while a Random Access procedure associated with that
Serving Cell is ongoing in the MAC entity, the MAC entity shall stop the
ongoing Random Access procedure and initiate a Random Access procedure
after performing the BWP switching.</p>
<p>Upon reception of RRC (re-)configuration for BWP switching for a
Serving Cell, cancel any triggered consistent LBT failure in this
Serving Cell.</p>
<p>The MAC entity shall for each activated Serving Cell configured with
<em>bwp-InactivityTimer</em>:</p>
<p>1&gt; if the <em>defaultDownlinkBWP-Id</em> is configured, and the
active DL BWP is not the BWP indicated by the
<em>defaultDownlinkBWP-Id</em>, and the active DL BWP is not the BWP
indicated by the <em>dormantBWP-Id</em> if configured; or</p>
<p>1&gt; if the UE is not a RedCap UE, and if the
<em>defaultDownlinkBWP-Id</em> is not configured, and the active DL BWP
is not the <em>initialDownlinkBWP</em>, and the active DL BWP is not the
BWP indicated by the <em>dormantBWP-Id</em> if configured; or</p>
<p>1&gt; if the UE is a RedCap UE, and if the
<em>defaultDownlinkBWP-Id</em> is not configured, and
<em>initialDownlinkBWP-RedCap</em> is not configured, and the active DL
BWP is not the <em>initialDownlinkBWP</em>; or</p>
<p>1&gt; if the UE is a RedCap UE, and if the
<em>defaultDownlinkBWP-Id</em> is not configured, and
<em>initialDownlinkBWP-RedCap</em> is configured, and the active DL BWP
is not the <em>initialDownlinkBWP-RedCap</em>:</p>
<p>2&gt; if a PDCCH addressed to C-RNTI or CS-RNTI indicating downlink
assignment or uplink grant is received on the active BWP; or</p>
<p>2&gt; if a PDCCH addressed to G-RNTI or G-CS-RNTI configured for
multicast indicating downlink assignment is received on the active BWP;
or</p>
<p>2&gt; if a PDCCH addressed to C-RNTI or CS-RNTI indicating downlink
assignment or uplink grant is received for the active BWP; or</p>
<p>2&gt; if a MAC PDU is transmitted in a configured uplink grant and
LBT failure indication is not received from lower layers; or</p>
<p>2&gt; if a MAC PDU is received in a configured downlink assignment
for unicast or MBS multicast:</p>
<p>3&gt; if there is no ongoing Random Access procedure associated with
this Serving Cell; or</p>
<p>3&gt; if the ongoing Random Access procedure associated with this
Serving Cell is successfully completed upon reception of this PDCCH
addressed to C-RNTI (as specified in clauses 5.1.4, 5.1.4a and
5.1.5):</p>
<p>4&gt; start or restart the <em>bwp-InactivityTimer</em> associated
with the active DL BWP.</p>
<p>2&gt; if the <em>bwp-InactivityTimer</em> associated with the active
DL BWP expires:</p>
<p>3&gt; if the <em>defaultDownlinkBWP-Id</em> is configured:</p>
<p>4&gt; perform BWP switching to a BWP indicated by the
<em>defaultDownlinkBWP-Id</em>.</p>
<p>3&gt; else:</p>
<p>4&gt; if the UE is a RedCap UE; and</p>
<p>4&gt; if <em>initialDownlinkBWP-RedCap</em> is configured:</p>
<p>5&gt; perform BWP switching to the
<em>initialDownlinkBWP-RedCap</em>.</p>
<p>4&gt; else:</p>
<p>5&gt; perform BWP switching to the <em>initialDownlinkBWP</em>.</p>
<p>NOTE: If a Random Access procedure is initiated on an SCell, both
this SCell and the SpCell are associated with this Random Access
procedure.</p>
<p>1&gt; if a PDCCH for BWP switching is received, and the MAC entity
switches the active DL BWP:</p>
<p>2&gt; if the <em>defaultDownlinkBWP-Id</em> is configured, and the
MAC entity switches to the DL BWP which is not indicated by the
<em>defaultDownlinkBWP-Id</em> and is not indicated by the
<em>dormantBWP-Id</em> if configured; or</p>
<p>2&gt; if the UE is not a RedCap UE, and if the
<em>defaultDownlinkBWP-Id</em> is not configured, and the MAC entity
switches to the DL BWP which is not the <em>initialDownlinkBWP</em> and
is not indicated by the <em>dormantBWP-Id</em> if configured; or</p>
<p>2&gt; if the UE is a RedCap UE, and if the
<em>defaultDownlinkBWP-Id</em> is not configured, and
<em>initialDownlinkBWP-RedCap</em> is not configured, and the MAC entity
switches to the DL BWP which is not the <em>initialDownlinkBWP</em>;
or</p>
<p>2&gt; if the UE is a RedCap UE, and if the
<em>defaultDownlinkBWP-Id</em> is not configured, and
<em>initialDownlinkBWP-RedCap</em> is configured, and the MAC entity
switches to the DL BWP which is not the
<em>initialDownlinkBWP-RedCap</em>:</p>
<p>3&gt; start or restart the <em>bwp-InactivityTimer</em> associated
with the active DL BWP.</p>
<p>Upon initiation of the Random Access procedure, after selection of
the carrier for performing Random Access procedure as specified in
clause 5.1.1, if the UE is a RedCap UE in RRC_IDLE or RRC_INACTIVE mode,
the MAC entity shall:</p>
<p>1&gt; if <em>initialUplinkBWP-RedCap</em> is configured for the
selected carrier:</p>
<p>2&gt; perform the Random Access procedure as specified in clause 5.1
by using the BWP configured by <em>initialUplinkBWP-RedCap</em>.</p>
<p>1&gt; else:</p>
<p>2&gt; perform the Random Access procedure as specified in clause 5.1
by using the BWP configured by <em>initialUplinkBWP</em>.</p>
<p>1&gt; if <em>initialDownlinkBWP-RedCap</em> is configured:</p>
<blockquote>
<p>2&gt; if the Random Access procedure was initiated for SI request (as
specified in TS 38.331 [5]) and the Random Access Resources for SI
request have been explicitly provided by RRC, and if the selected
carrier is SUL carrier:</p>
<p>3&gt; monitor the PDCCH on the BWP configured by
<em>initialDownlinkBWP</em>.</p>
<p>2&gt; else:</p>
</blockquote>
<p>3&gt; monitor the PDCCH on the BWP configured by
<em>initialDownlinkBWP-RedCap</em>.</p>
<p>1&gt; else:</p>
<p>2&gt; monitor the PDCCH on the BWP configured by
<em>initialDownlinkBWP</em>.</p>
<h3 id="sidelink-1">5.15.2 Sidelink</h3>
<p>In addition to clause 16 of TS 38.213 [6], this clause specifies
requirements on BWP operation for sidelink.</p>
<p>The MAC entity is configured with at most a single SL BWP where
sidelink transmission and reception are performed.</p>
<p>For a BWP, the MAC entity shall:</p>
<p>1&gt; if the BWP is activated:</p>
<p>2&gt; transmit SL-BCH on the BWP, if configured;</p>
<p>2&gt; transmit S-PSS and S-SSS on the BWP, if configured;</p>
<p>2&gt; transmit PSCCH on the BWP;</p>
<p>2&gt; transmit SL-SCH on the BWP;</p>
<p>2&gt; receive PSFCH on the BWP, if configured;</p>
<p>2&gt; receive S-PSS and S-SSS on the BWP, if configured;</p>
<p>2&gt; receive SL-BCH on the BWP, if configured;</p>
<p>2&gt; receive PSCCH on the BWP;</p>
<p>2&gt; receive SL-SCH on the BWP;</p>
<p>2&gt; transmit PSFCH on the BWP, if configured;</p>
<p>2&gt; (re-)initialize any suspended configured sidelink grant of
configured grant Type 1.</p>
<p>1&gt; if the BWP is deactivated:</p>
<p>2&gt; not transmit SL-BCH on the BWP, if configured;</p>
<p>2&gt; not transmit S-PSS and S-SSS on the BWP, if configured;</p>
<p>2&gt; not transmit PSCCH on the BWP;</p>
<p>2&gt; not transmit SL-SCH on the BWP;</p>
<p>2&gt; not receive PSFCH on the BWP, if configured;</p>
<p>2&gt; not receive SL-BCH on the BWP, if configured;</p>
<p>2&gt; not receive S-PSS and S-SSS on the BWP, if configured;</p>
<p>2&gt; not receive PSCCH on the BWP;</p>
<p>2&gt; not receive SL-SCH on the BWP;</p>
<p>2&gt; not transmit PSFCH on the BWP, if configured;</p>
<p>2&gt; suspend any configured sidelink grant of configured grant Type
1;</p>
<p>2&gt; clear any configured sidelink grant of configured grant Type
2;</p>
<p>2&gt; cancel, if any, triggered Scheduling Request procedure for
sidelink;</p>
<p>2&gt; cancel, if any, triggered Sidelink Buffer Status Reporting
procedure;</p>
<p>2&gt; cancel, if any, triggered Sidelink CSI Reporting procedure;</p>
<p>2&gt; cancel, if any, triggered Sidelink DRX Command MAC CE;</p>
<p>2&gt; cancel, if any, triggered Sidelink IUC-Request transmission
procedure;</p>
<p>2&gt; cancel, if any, triggered Sidelink IUC-Information Reporting
procedure.</p>
<h2 id="sul-operation">5.16 SUL operation</h2>
<p>The Supplementary UL (SUL) carrier can be configured as a complement
to the normal UL (NUL) carrier. Switching between the NUL carrier and
the SUL carrier means that the UL transmissions move from one carrier to
the other carrier, which is done by:</p>
<p>- an indication in DCI;</p>
<p>- the Random Access procedure as specified in clause 5.1.1;</p>
<p>- the SDT procedure as specified in clause 5.27.</p>
<p>If the MAC entity receives a UL grant indicating an SUL switch while
a Random Access procedure is ongoing, the MAC entity shall ignore the UL
grant.</p>
<p>The Serving Cell configured with <em>supplementaryUplink</em> belongs
to a single TAG.</p>
<h2 id="beam-failure-detection-and-recovery-procedure">5.17 Beam Failure
Detection and Recovery procedure</h2>
<p>The MAC entity may be configured by RRC per Serving Cell or per
BFD-RS set with a beam failure recovery procedure which is used for
indicating to the serving gNB of a new SSB or CSI-RS when beam failure
is detected on the serving SSB(s)/CSI-RS(s). Beam failure is detected by
counting beam failure instance indication from the lower layers to the
MAC entity. If <em>beamFailureRecoveryConfig</em> is reconfigured by
upper layers during an ongoing Random Access procedure for beam failure
recovery for SpCell, the MAC entity shall stop the ongoing Random Access
procedure and initiate a Random Access procedure using the new
configuration. The Serving Cell is configured with two BFD-RS sets if
and only if <em>failureDetectionSet1</em> and
<em>failureDetectionSet2</em> are configured for the active DL BWP of
the Serving Cell. When the SCG is deactivated, the UE performs beam
failure detection on the PSCell if <em>bfd-and-RLM</em> is set to
<em>true</em>.</p>
<p>RRC configures the following parameters in the
<em>beamFailureRecoveryConfig</em>,
<em>beamFailureRecoverySpCellConfig</em>,
<em>beamFailureRecoverySCellConfig</em> and the
<em>radioLinkMonitoringConfig</em> for the Beam Failure Detection and
Recovery procedure:</p>
<p>- <em>beamFailureInstanceMaxCount</em> for the beam failure detection
(per Serving Cell or per BFD-RS set of Serving Cell configured with two
BFD-RS sets);</p>
<p>- <em>beamFailureDetectionTimer</em> for the beam failure detection
(per Serving Cell or per BFD-RS set of Serving Cell configured with two
BFD-RS sets);</p>
<p>- <em>beamFailureRecoveryTimer</em> for the beam failure recovery
procedure for SpCell;</p>
<p>- <em>rsrp-ThresholdSSB</em>: an RSRP threshold for the SpCell beam
failure recovery;</p>
<p>- <em>rsrp-ThresholdBFR</em>: an RSRP threshold for the SCell beam
failure recovery or for the beam failure recovery of BFD-RS set of
Serving Cell;</p>
<p>- <em>powerRampingStep</em>: <em>powerRampingStep</em> for the SpCell
beam failure recovery;</p>
<p>- <em>powerRampingStepHighPriority</em>:
<em>powerRampingStepHighPriority</em> for the SpCell beam failure
recovery;</p>
<p>- <em>preambleReceivedTargetPower</em>:
<em>preambleReceivedTargetPower</em> for the SpCell beam failure
recovery;</p>
<p>- <em>preambleTransMax</em>: <em>preambleTransMax</em> for the SpCell
beam failure recovery;</p>
<p>- <em>scalingFactorBI</em>: <em>scalingFactorBI</em> for the SpCell
beam failure recovery;</p>
<p>- <em>ssb-perRACH-Occasion</em>: <em>ssb-perRACH-Occasion</em> for
the SpCell beam failure recovery using contention-free Random Access
Resources;</p>
<p>- <em>ra-ResponseWindow</em>: the time window to monitor response(s)
for the SpCell beam failure recovery using contention-free Random Access
Resources;</p>
<p>- <em>prach-ConfigurationIndex</em>:
<em>prach-ConfigurationIndex</em> for the SpCell beam failure recovery
using contention-free Random Access Resources;</p>
<p>- <em>ra-ssb-OccasionMaskIndex</em>:
<em>ra-ssb-OccasionMaskIndex</em> for the SpCell beam failure recovery
using contention-free Random Access Resources;</p>
<p>- <em>ra-OccasionList</em>: <em>ra-OccasionList</em> for the SpCell
beam failure recovery using contention-free Random Access Resources;</p>
<p>- <em>candidateBeamRSList</em>: list of candidate beams for SpCell
beam failure recovery;</p>
<p>- <em>candidateBeamRS-List-r16</em>: list of candidate beams for
SCell beam failure recovery or list of candidate beams for beam failure
recovery of a Serving Cell for BFD-RS set one;</p>
<p>- <em>candidateBeamRS-List2-r17</em>: list of candidate beams for
beam failure recovery of a Serving Cell for BFD-RS set two.</p>
<p>The following UE variables are used for the beam failure detection
procedure:</p>
<p>- <em>BFI_COUNTER</em> (per Serving Cell or per BFD-RS set of Serving
Cell configured with two BFD-RS sets): counter for beam failure instance
indication which is initially set to 0.</p>
<p>The MAC entity shall for each Serving Cell configured for beam
failure detection:</p>
<p>1&gt; if the Serving Cell is configured with two BFD-RS sets:</p>
<p>2&gt; if beam failure instance indication for a BFD-RS set has been
received from lower layers:</p>
<p>3&gt; start or restart the <em>beamFailureDetectionTimer</em> of the
BFD-RS set;</p>
<p>3&gt; increment <em>BFI_COUNTER</em> of the BFD-RS set by 1;</p>
<p>3&gt; if <em>BFI_COUNTER</em> of the BFD-RS set &gt;=
<em>beamFailureInstanceMaxCount</em>:</p>
<p>4&gt; trigger a BFR for this BFD-RS set of the Serving Cell;</p>
<p>2&gt; if BFR is triggered for both BFD-RS sets of the SpCell and the
Beam Failure Recovery procedure is not successfully completed for any of
the BFD-RS sets:</p>
<p>3&gt; initiate a Random Access procedure (see clause 5.1) on the
SpCell;</p>
<p>2&gt; if the Serving Cell is SpCell and the Random Access procedure
initiated for beam failure recovery of both BFD-RS sets of SpCell is
successfully completed (see clause 5.1):</p>
<p>3&gt; set <em>BFI_COUNTER</em> of each BFD-RS set of SpCell to 0.</p>
<p>3&gt; consider the Beam Failure Recovery procedure successfully
completed.</p>
<p>2&gt; if the <em>beamFailureDetectionTimer</em> of this BFD-RS set
expires; or</p>
<p>2&gt; if <em>beamFailureDetectionTimer</em>,
<em>beamFailureInstanceMaxCount</em>, or any of the reference signals
used for beam failure detection is reconfigured by upper layers or by
the BFD-RS Indication MAC CE associated with a BFD-RS set of the Serving
Cell; or</p>
<p>2&gt; if the reference signal(s) associated with a BFD-RS set of the
Serving Cell used for beam failure detection is changed:</p>
<p>3&gt; set <em>BFI_COUNTER</em> of the BFD-RS set to 0.</p>
<p>2&gt; if a PDCCH addressed to C-RNTI indicating uplink grant for a
new transmission is received for the HARQ process used for the
transmission of the Enhanced BFR MAC CE or Truncated Enhanced BFR MAC CE
which contains beam failure recovery information of this BFD-RS set of
the Serving Cell:</p>
<p>3&gt; set <em>BFI_COUNTER</em> of the BFD-RS set to 0;</p>
<p>3&gt; consider the Beam Failure Recovery procedure successfully
completed for this BFD-RS set and cancel all the triggered BFRs of this
BFD-RS set of the Serving Cell.</p>
<p>2&gt; if the Serving Cell is SCell and the SCell is deactivated as
specified in clause 5.9:</p>
<p>3&gt; set <em>BFI_COUNTER</em> of each BFD-RS set of SCell to 0;</p>
<p>3&gt; consider the Beam Failure Recovery procedure successfully
completed and cancel all the triggered BFRs of all BFD-RS sets of the
Serving Cell.</p>
<p>1&gt; else:</p>
<p>2&gt; if beam failure instance indication has been received from
lower layers:</p>
<p>3&gt; start or restart the <em>beamFailureDetectionTimer</em>;</p>
<p>3&gt; increment <em>BFI_COUNTER</em> by 1;</p>
<p>3&gt; if <em>BFI_COUNTER</em> &gt;=
<em>beamFailureInstanceMaxCount</em>:</p>
<p>4&gt; if the Serving Cell is SCell:</p>
<p>5&gt; trigger a BFR for this Serving Cell;</p>
<p>4&gt; else if the Serving Cell is PSCell and, the SCG is
deactivated:</p>
<p>5&gt; if beam failure of the PSCell has not been indicated to upper
layers since the SCG was deactivated or since the deactivated SCG was
last reconfigured with BFD-RS:</p>
<p>6&gt; indicate beam failure of the PSCell to upper layers.</p>
<p>NOTE: After beam failure is indicated to upper layers, the UE may
stop the <em>beamFailureDetectionTimer</em> and lower layer beam failure
indication while <em>BFI_COUNTER</em> &gt;=
<em>beamFailureInstanceMaxCount</em> for the deactivated SCG.</p>
<p>4&gt; else:</p>
<p>5&gt; initiate a Random Access procedure (see clause 5.1) on the
SpCell.</p>
<p>2&gt; if the <em>beamFailureDetectionTimer</em> expires; or</p>
<blockquote>
<p>2&gt; if <em>beamFailureDetectionTimer</em>,
<em>beamFailureInstanceMaxCount</em>, or any of the reference signals
used for beam failure detection is reconfigured by upper layers
associated with this Serving Cell; or</p>
</blockquote>
<p>2&gt; if the reference signal(s) associated with this Serving
Cell used for beam failure detection is changed:</p>
<p>3&gt; set <em>BFI_COUNTER</em> to 0.</p>
<p>2&gt; if the Serving Cell is SpCell and the Random Access procedure
initiated for SpCell beam failure recovery is successfully completed
(see clause 5.1):</p>
<p>3&gt; set <em>BFI_COUNTER</em> to 0;</p>
<p>3&gt; stop the <em>beamFailureRecoveryTimer</em>, if configured;</p>
<p>3&gt; consider the Beam Failure Recovery procedure successfully
completed.</p>
<p>2&gt; else if the Serving Cell is SCell, and a PDCCH addressed to
C-RNTI indicating uplink grant for a new transmission is received for
the HARQ process used for the transmission of the MAC CE for BFR which
contains beam failure recovery information of this Serving Cell; or</p>
<p>2&gt; if the SCell is deactivated as specified in clause 5.9:</p>
<p>3&gt; set <em>BFI_COUNTER</em> to 0;</p>
<p>3&gt; consider the Beam Failure Recovery procedure successfully
completed and cancel all the triggered BFRs for this Serving Cell.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the Beam Failure Recovery procedure determines that at least
one BFR has been triggered and not cancelled for an SCell for which
evaluation of the candidate beams according to the requirements as
specified in TS 38.133 [11] has been completed and if none of the
Serving Cell(s) of this MAC entity are configured with two BFD-RS
sets:</p>
<p>2&gt; if UL-SCH resources are available for a new transmission and if
the UL-SCH resources can accommodate the BFR MAC CE plus its subheader
as a result of LCP:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the BFR MAC CE.</p>
<p>2&gt; else if UL-SCH resources are available for a new transmission
and if the UL-SCH resources can accommodate the Truncated BFR MAC CE
plus its subheader as a result of LCP:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the Truncated BFR MAC CE.</p>
<p>2&gt; else:</p>
<p>3&gt; trigger the SR for SCell beam failure recovery for each SCell
for which BFR has been triggered, not cancelled, and for which
evaluation of the candidate beams according to the requirements as
specified in TS 38.133 [11] has been completed.</p>
<p>1&gt; if the Beam Failure Recovery procedure determines that at least
one BFR for any BFD-RS set has been triggered and not cancelled for an
SCell for which evaluation of the candidate beams according to the
requirements as specified in TS 38.133 [11] has been completed; or</p>
<p>1&gt; if the Beam Failure Recovery procedure determines that at least
one BFR for only one BFD-RS set has been triggered and not cancelled for
an SpCell for which evaluation of the candidate beams according to the
requirements as specified in TS 38.133 [11] has been completed; or</p>
<p>1&gt; if the Beam Failure Recovery procedure determines that at least
one BFR has been triggered and not cancelled for an SCell for which
evaluation of the candidate beams according to the requirements as
specified in TS 38.133 [11] has been completed and if at least one
Serving Cell of this MAC entity is configured with two BFD-RS sets:</p>
<p>2&gt; if UL-SCH resources are available for a new transmission and if
the UL-SCH resources can accommodate the Enhanced BFR MAC CE plus its
subheader as a result of LCP:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the Enhanced BFR MAC CE.</p>
<p>2&gt; else if UL-SCH resources are available for a new transmission
and if the UL-SCH resources can accommodate the Truncated Enhanced BFR
MAC CE plus its subheader as a result of LCP:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the Truncated Enhanced BFR MAC CE.</p>
<p>2&gt; else:</p>
<p>3&gt; trigger the SR for beam failure recovery of each BFD-RS set for
which BFR has been triggered, not cancelled, and for which evaluation of
the candidate beams according to the requirements as specified in TS
38.133 [11] has been completed;</p>
<p>3&gt; trigger the SR for SCell beam failure recovery for each SCell
for which BFR has been triggered, not cancelled, and for which
evaluation of the candidate beams according to the requirements as
specified in TS 38.133 [11] has been completed.</p>
<p>All BFRs triggered for an SCell shall be cancelled when a MAC PDU is
transmitted and this PDU includes a MAC CE for BFR which contains beam
failure information of that SCell. All BFRs triggered for a BFD-RS set
of a Serving Cell shall be cancelled when a MAC PDU is transmitted and
this PDU includes an Enhanced BFR MAC CE or Truncated Enhanced BFR MAC
CE which contains beam failure recovery information of that BFD-RS set
of the Serving Cell.</p>
<h2 id="handling-of-mac-ces">5.18 Handling of MAC CEs</h2>
<h3 id="general-5">5.18.1 General</h3>
<p>This clause specifies the requirements upon reception or transmission
of the following MAC CEs:</p>
<p>- SP CSI-RS/CSI-IM Resource Set Activation/Deactivation MAC CE;</p>
<p>- Aperiodic CSI Trigger State Subselection MAC CE;</p>
<p>- TCI States Activation/Deactivation for UE-specific PDSCH MAC
CE;</p>
<p>- TCI State Indication for UE-specific PDCCH MAC CE;</p>
<p>- SP CSI reporting on PUCCH Activation/Deactivation MAC CE;</p>
<p>- SP SRS Activation/Deactivation MAC CE;</p>
<p>- PUCCH spatial relation Activation/Deactivation MAC CE;</p>
<p>- Enhanced PUCCH spatial relation Activation/Deactivation MAC CE;</p>
<p>- SP ZP CSI-RS Resource Set Activation/Deactivation MAC CE;</p>
<p>- Recommended Bit Rate MAC CE;</p>
<p>- Enhanced SP/AP SRS Spatial Relation Indication MAC CE;</p>
<p>- SRS Pathloss Reference RS Update MAC CE;</p>
<p>- PUSCH Pathloss Reference RS Update MAC CE;</p>
<p>- Serving Cell set based SRS Spatial Relation Indication MAC CE;</p>
<p>- SP Positioning SRS Activation/Deactivation MAC CE;</p>
<p>- Timing Delta MAC CE;</p>
<p>- Guard Symbols MAC CEs;</p>
<p>- Positioning Measurement Gap Activation/Deactivation Command MAC
CE;</p>
<p>- PPW Activation/Deactivation Command MAC CE;</p>
<p>- PUCCH spatial relation Activation/Deactivation for multiple TRP
PUCCH repetition MAC CE;</p>
<p>- PUCCH Power Control Set Update for multiple TRP PUCCH repetition
MAC CE;</p>
<p>- Unified TCI States Activation/Deactivation MAC CE;</p>
<p>- Differential Koffset MAC CE;</p>
<p>- Case-7 Timing advance offset MAC CE;</p>
<p>- DL TX Power Adjustment MAC CEs;</p>
<p>- Child IAB-DU Restricted Beam Indication MAC CE;</p>
<p>- Timing Case Indication MAC CE;</p>
<p>- BFD-RS Indication MAC CE;</p>
<p>- IAB-MT Recommended Beam Indication MAC CE;</p>
<p>- UL PSD range adjustment for IAB MAC CE;</p>
<p>- Case-6 Timing Request MAC CE.</p>
<h3
id="activationdeactivation-of-semi-persistent-csi-rscsi-im-resource-set">5.18.2
Activation/Deactivation of Semi-persistent CSI-RS/CSI-IM resource
set</h3>
<p>The network may activate and deactivate the configured
Semi-persistent CSI-RS/CSI-IM resource sets of a Serving Cell by sending
the SP CSI-RS/CSI-IM Resource Set Activation/Deactivation MAC CE
described in clause 6.1.3.12. The configured Semi-persistent
CSI-RS/CSI-IM resource sets are initially deactivated upon
(re-)configuration by upper layers and after reconfiguration with
sync.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives an SP CSI-RS/CSI-IM Resource Set
Activation/Deactivation MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the SP
CSI-RS/CSI-IM Resource Set Activation/Deactivation MAC CE.</p>
<h3 id="aperiodic-csi-trigger-state-subselection">5.18.3 Aperiodic CSI
Trigger State Subselection</h3>
<p>The network may select among the configured aperiodic CSI trigger
states of a Serving Cell by sending the Aperiodic CSI Trigger State
Subselection MAC CE described in clause 6.1.3.13.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives an Aperiodic CSI trigger State
Subselection MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding Aperiodic
CSI trigger State Subselection MAC CE.</p>
<h3 id="activationdeactivation-of-ue-specific-pdsch-tci-state">5.18.4
Activation/Deactivation of UE-specific PDSCH TCI state</h3>
<p>The network may activate and deactivate the configured TCI states for
PDSCH of a Serving Cell or a set of Serving Cells configured in
<em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em> by sending the TCI States
Activation/Deactivation for UE-specific PDSCH MAC CE described in clause
6.1.3.14. The network may activate and deactivate the configured TCI
states for a codepoint of the DCI <em>Transmission configuration
indication</em> field as specified in TS 38.212 [9] for PDSCH of a
Serving Cell by sending the Enhanced TCI States Activation/Deactivation
for UE-specific PDSCH MAC CE described in clause 6.1.3.24. The
configured TCI states for PDSCH are initially deactivated upon
(re-)configuration by upper layers and after reconfiguration with
sync.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives a TCI States Activation/Deactivation
for UE-specific PDSCH MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the TCI
States Activation/Deactivation for UE-specific PDSCH MAC CE.</p>
<p>1&gt; if the MAC entity receives an Enhanced TCI States
Activation/Deactivation for UE-specific PDSCH MAC CE on a Serving
Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the Enhanced
TCI States Activation/Deactivation for UE-specific PDSCH MAC CE.</p>
<h3 id="indication-of-tci-state-for-ue-specific-pdcch">5.18.5 Indication
of TCI state for UE-specific PDCCH</h3>
<p>The network may indicate a TCI state for PDCCH reception for a
CORESET of a Serving Cell or a set of Serving Cells configured in
<em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em> by sending the TCI State Indication
for UE-specific PDCCH MAC CE described in clause 6.1.3.15. The network
may also indicate two TCI states for PDCCH reception for a CORESET of a
Serving Cell or a set of Serving Cells configured in
<em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em> by sending the Enhanced TCI States
Indication for UE-specific PDCCH MAC CE described in clause
6.1.3.44.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives a TCI State Indication for
UE-specific PDCCH MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the TCI
State Indication for UE-specific PDCCH MAC CE.</p>
<p>1&gt; if the MAC entity receives an Enhanced TCI States Indication
for UE-specific PDCCH MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the Enhanced
TCI States Indication for UE-specific PDCCH MAC CE.</p>
<h3
id="activationdeactivation-of-semi-persistent-csi-reporting-on-pucch">5.18.6
Activation/Deactivation of Semi-persistent CSI reporting on PUCCH</h3>
<p>The network may activate and deactivate the configured
Semi-persistent CSI reporting on PUCCH of a Serving Cell by sending the
SP CSI reporting on PUCCH Activation/Deactivation MAC CE described in
clause 6.1.3.16. The configured Semi-persistent CSI reporting on PUCCH
is initially deactivated upon (re-)configuration by upper layers and
after reconfiguration with sync.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives an SP CSI reporting on PUCCH
Activation/Deactivation MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the SP CSI
reporting on PUCCH Activation/Deactivation MAC CE.</p>
<h3
id="activationdeactivation-of-semi-persistent-srs-and-indication-of-spatial-relation-of-spap-srs">5.18.7
Activation/Deactivation of Semi-persistent SRS and Indication of spatial
relation of SP/AP SRS</h3>
<p>The network may activate and deactivate the configured
Semi-persistent SRS resource sets of a Serving Cell by sending the SP
SRS Activation/Deactivation MAC CE described in clause 6.1.3.17. The
network may also activate and deactivate the configured Semi-persistent
SRS resource sets of a Serving Cell by sending the Enhanced SP/AP SRS
Spatial Relation Indication MAC CE described in clause 6.1.3.26. The
network may also activate and deactivate the configured Semi-persistent
SRS resource sets of a Serving Cell by sending the SP/AP SRS TCI State
Indication MAC CE described in clause 6.1.3.59. The configured
Semi-persistent SRS resource sets are initially deactivated upon
(re-)configuration by upper layers and after reconfiguration with sync.
The network may indicate the spatial relation info of SP/AP SRS resource
sets of a Serving Cell by sending the Enhanced SP/AP SRS spatial
relation Indication MAC CE described in clause 6.1.3.26.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives an SP SRS Activation/Deactivation
MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the SP SRS
Activation/Deactivation MAC CE.</p>
<p>1&gt; if the MAC entity receives an Enhanced SP/AP SRS Spatial
Relation Indication MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the Enhanced
SP/AP SRS Spatial Relation Indication MAC CE.</p>
<p>1&gt; if the MAC entity receives an SP/AP SRS TCI State Indication
MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the SP/AP
SRS TCI State Indication MAC CE.</p>
<h3
id="activationdeactivation-of-spatial-relation-of-pucch-resource">5.18.8
Activation/Deactivation of spatial relation of PUCCH resource</h3>
<p>The network may activate and deactivate a spatial relation for a
PUCCH resource of a Serving Cell by sending the PUCCH spatial relation
Activation/Deactivation MAC CE described in clause 6.1.3.18. The network
may also activate and deactivate a spatial relation for a PUCCH resource
or a PUCCH resource group of a Serving Cell by sending the Enhanced
PUCCH spatial relation Activation/Deactivation MAC CE described in
clause 6.1.3.25. The configured spatial relation for a PUCCH resource is
initially deactivated upon (re-)configuration by upper layers and after
reconfiguration with sync. The network may also activate and deactivate
the two spatial relations for a PUCCH resource or a PUCCH resource group
of a Serving Cell by sending the PUCCH spatial relation
Activation/Deactivation for multiple TRP PUCCH repetition MAC CE
described in clause 6.1.3.45.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives a PUCCH spatial relation
Activation/Deactivation MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the PUCCH
spatial relation Activation/Deactivation MAC CE.</p>
<p>1&gt; if the MAC entity receives an Enhanced PUCCH spatial relation
Activation/Deactivation MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the Enhanced
PUCCH spatial relation Activation/Deactivation MAC CE.</p>
<p>1&gt; if the MAC entity receives a PUCCH spatial relation
Activation/Deactivation for multiple TRP PUCCH repetition MAC CE on a
Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the PUCCH
spatial relation Activation/Deactivation for multiple TRP PUCCH
repetition MAC CE.</p>
<h3
id="activationdeactivation-of-semi-persistent-zp-csi-rs-resource-set">5.18.9
Activation/Deactivation of semi-persistent ZP CSI-RS resource set</h3>
<p>The network may activate and deactivate the configured
Semi-persistent ZP CSI-RS resource set of a Serving Cell by sending the
SP ZP CSI-RS Resource Set Activation/Deactivation MAC CE described in
clause 6.1.3.19. The configured Semi-persistent ZP CSI-RS resource sets
are initially deactivated upon (re-)configuration by upper layers and
after reconfiguration with sync.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives an SP ZP CSI-RS Resource Set
Activation/Deactivation MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the SP ZP
CSI-RS Resource Set Activation/Deactivation MAC CE.</p>
<h3 id="recommended-bit-rate">5.18.10 Recommended Bit Rate</h3>
<p>The recommended bit rate procedure is used to provide the MAC entity
with information about the bit rate which the gNB recommends. The bit
rate is the recommended bit rate of the physical layer. Averaging window
of default value 2000 ms will apply as specified in TS 26.114 [13].</p>
<p>The gNB may transmit the Recommended bit rate MAC CE to the MAC
entity to indicate the recommended bit rate for the UE for a specific
logical channel and a specific direction (either uplink or downlink).
Upon reception of a Recommended bit rate MAC CE the MAC entity
shall:</p>
<p>- indicate to upper layers the recommended bit rate for the indicated
logical channel and direction.</p>
<p>The MAC entity may request the gNB to indicate the recommended bit
rate for a specific logical channel and a specific direction. If the MAC
entity is requested by upper layers to query the gNB for the recommended
bit rate for a logical channel and for a direction (i.e. for uplink or
downlink), the MAC entity shall:</p>
<p>1&gt; if a Recommended bit rate query for this logical channel and
this direction has not been triggered:</p>
<p>2&gt; trigger a Recommended bit rate query for this logical channel,
direction, and desired bit rate.</p>
<p>If the MAC entity has UL resources allocated for new transmission the
MAC entity shall:</p>
<p>1&gt; for each Recommended bit rate query that the Recommended Bit
Rate procedure determines has been triggered and not cancelled:</p>
<p>2&gt; if <em>bitRateQueryProhibitTimer</em> for the logical channel
and the direction of this Recommended bit rate query is configured, and
it is not running; and</p>
<p>2&gt; if the MAC entity has UL resources allocated for new
transmission and the allocated UL resources can accommodate a
Recommended bit rate MAC CE plus its subheader as a result of LCP as
defined in clause 5.4.3.1:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the Recommended bit rate MAC CE for the logical channel and the
direction of this Recommended bit rate query;</p>
<p>3&gt; start the <em>bitRateQueryProhibitTimer</em> for the logical
channel and the direction of this Recommended bit rate query;</p>
<p>3&gt; cancel this Recommended bit rate query.</p>
<h3 id="void">5.18.11 Void</h3>
<h3 id="void-1">5.18.12 Void</h3>
<h3 id="void-2">5.18.13 Void</h3>
<h3 id="update-of-pathloss-reference-rs-of-srs">5.18.14 Update of
Pathloss Reference RS of SRS</h3>
<p>The network may activate and update a pathloss reference RS for an
SRS resource of a Serving Cell by sending the SRS Pathloss Reference RS
Update MAC CE described in clause 6.1.3.27.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives an SRS Pathloss Reference RS Update
MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the SRS
Pathloss Reference RS Update MAC CE.</p>
<h3 id="update-of-pathloss-reference-rs-of-pusch">5.18.15 Update of
Pathloss Reference RS of PUSCH</h3>
<p>The network may activate and update a pathloss reference RS for PUSCH
of a Serving Cell by sending the PUSCH Pathloss Reference RS Update MAC
CE described in clause 6.1.3.28.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives a PUSCH Pathloss Reference RS Update
MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the PUSCH
Pathloss Reference RS Update MAC CE.</p>
<h3
id="indication-of-spatial-relation-of-srs-resource-for-a-serving-cell-set">5.18.16
Indication of spatial relation of SRS resource for a Serving Cell
set</h3>
<p>The network may indicate the spatial relation info of SRS resource of
a set of Serving Cells configured in
<em>simultaneousSpatial-UpdatedList1</em> or
<em>simultaneousSpatial-UpdatedList2</em> by sending the Serving Cell
set based SRS Spatial Relation Indication MAC CE and the Serving Cell
Set based SRS TCI State Indication MAC CE described in clause 6.1.3.29
and 6.1.3.60, respectively.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives a Serving Cell set based SRS Spatial
Relation Indication MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the Serving
Cell set based SRS Spatial Relation Indication MAC CE.</p>
<p>1&gt; if the MAC entity receives a Serving Cell Set based SRS TCI
State Indication MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the Serving
Cell Set based SRS TCI State Indication MAC CE.</p>
<h3
id="activationdeactivation-of-semi-persistent-positioning-srs">5.18.17
Activation/Deactivation of Semi-Persistent Positioning SRS</h3>
<p>The network may activate and deactivate the configured resource sets
of Semi-Persistent Positioning SRS of a Serving Cell by sending the SP
Positioning SRS Activation/Deactivation MAC CE described in clause
6.1.3.36. The configured resource sets Semi-Persistent Positioning SRS
are initially deactivated upon (re-)configuration by upper layers and
after reconfiguration with sync.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives an SP Positioning SRS
Activation/Deactivation MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the SP
Positioning SRS Activation/Deactivation MAC CE.</p>
<h3 id="timing-offset-adjustments-for-iab">5.18.18 Timing offset
adjustments for IAB</h3>
<p>For IAB operation, in order to achieve time-domain synchronization
across multiple backhaul hops, a timing adjustment may be provided to an
IAB node by its parent node. Two different values may be provided,
related to Case-1/Case-6, and Case-7 timing modes respectively. The
Timing Delta MAC CE carries T<sub>delta</sub> which is used to determine
the IAB-DU DL Tx timing adjustment for the Case-1 timing mode, and to
determine the IAB-DU DL Tx and IAB-MT UL Tx timing adjustment for the
Case-6 timing mode. The Case-7 Timing advance offset MAC CE carries
T<sub>offset,2</sub> which is used to determine the IAB-MT UL Tx timing
adjustment for the Case-7 timing mode.</p>
<p>Upon reception of a Timing Delta MAC CE the IAB node shall:</p>
<p>- apply the value of T<sub>delta</sub> as specified in TS 38.213
[6].</p>
<p>Upon reception of a Case-7 Timing advance offset MAC CE the IAB node
shall:</p>
<p>- apply the value of T<sub>offset,2</sub> as specified in TS 38.213
[6].</p>
<h3 id="guard-symbols-for-iab">5.18.19 Guard symbols for IAB</h3>
<p>For IAB operation, the MAC entity on the IAB-DU or IAB-donor-DU
reserves a sufficient number of symbols at the beginning and/or the end
of slots where the child IAB-node switches operation from its IAB-DU to
its IAB-MT function and operation from its IAB-MT to its IAB-DU
function. The MAC entity on the IAB-DU or IAB-donor-DU informs the child
node about the number of guard symbols it provides via the Provided
Guard Symbols MAC CE. The IAB-MT on the child node may inform the parent
IAB-DU or IAB-donor-DU about the number of guard symbols desired via the
Desired Guard Symbols MAC CE. IAB-MT transmission timing modes are
specified in clause 14 of TS 38.213 [6].</p>
<p>Upon reception of a Provided Guard Symbols MAC CE the MAC entity
shall:</p>
<p>- indicate to lower layers the number of provided guard symbols and
the SCS configuration for the indicated Serving Cell.</p>
<p>The MAC entity may:</p>
<p>1&gt; if a Desired Guard Symbol query has not been triggered:</p>
<p>2&gt; trigger a Desired Guard Symbol query for this Serving Cell.</p>
<p>If the MAC entity has UL resources allocated for new transmission the
MAC entity shall:</p>
<p>1&gt; for each Desired Guard Symbol query that has been triggered and
not cancelled:</p>
<p>2&gt; if the allocated UL resources can accommodate a Desired Guard
Symbols MAC CE plus its subheader as a result of LCP as defined in
clause 5.4.3.1:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the Desired Guard Symbols MAC CE;</p>
<p>3&gt; cancel this Desired Guard Symbol query.</p>
<p>For Case-1 timing mode, a separate value for the number of guard
symbols is specified for each of the following eight switching scenarios
(see Table 5.18.19-1).</p>
<p>Table 5.18.19-1: Switching scenarios and relevant guard symbols for
Case-1 timing mode</p>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 41%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Switching scenario</th>
<th>Field for number of guard symbols in MAC CE</th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="4">IAB-MT operation to IAB-DU operation</td>
<td>MT Rx to DU Tx</td>
<td>NmbGS<sub>1</sub></td>
</tr>
<tr>
<td>MT Rx to DU Rx</td>
<td>NmbGS<sub>2</sub></td>
</tr>
<tr>
<td>MT Tx to DU Tx</td>
<td>NmbGS<sub>3</sub></td>
</tr>
<tr>
<td>MT Tx to DU Rx</td>
<td>NmbGS<sub>4</sub></td>
</tr>
<tr>
<td rowspan="4">IAB-DU operation to IAB-MT operation</td>
<td>DU Rx to MT Tx</td>
<td>NmbGS<sub>5</sub></td>
</tr>
<tr>
<td>DU Rx to MT Rx</td>
<td>NmbGS<sub>6</sub></td>
</tr>
<tr>
<td>DU Tx to MT Tx</td>
<td>NmbGS<sub>7</sub></td>
</tr>
<tr>
<td>DU Tx to MT Rx</td>
<td>NmbGS<sub>8</sub></td>
</tr>
</tbody>
</table>
<p>For Case-6 and Case-7 timing modes, a separate value for the number
of guard symbols is specified for each of the following eight switching
scenarios (see Table 5.18.19-2):</p>
<p>Table 5.18.19-2: Switching scenarios and relevant guard symbols for
Case-6 and Case-7 timing modes</p>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 41%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Switching scenario</th>
<th>Field for number of guard symbols in MAC CE</th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="4">IAB-MT operation to IAB-DU operation</td>
<td>MT Tx (Case-6) to DU Tx (Case-1)</td>
<td>NmbGS<sub>9</sub></td>
</tr>
<tr>
<td>MT Tx (Case-6) to DU Rx (Case-1)</td>
<td>NmbGS<sub>10</sub></td>
</tr>
<tr>
<td>MT Tx (Case-7) to DU Tx (Case-1)</td>
<td>NmbGS<sub>11</sub></td>
</tr>
<tr>
<td>MT Tx (Case-7) to DU Rx (Case-1)</td>
<td>NmbGS<sub>12</sub></td>
</tr>
<tr>
<td rowspan="4">IAB-DU operation to IAB-MT operation</td>
<td>DU Tx (Case-1) to MT Tx (Case-6)</td>
<td>NmbGS<sub>13</sub></td>
</tr>
<tr>
<td>DU Rx (Case-1) to MT Tx (Case-6)</td>
<td>NmbGS<sub>14</sub></td>
</tr>
<tr>
<td>DU Tx (Case-1) to MT Tx (Case-7)</td>
<td>NmbGS<sub>15</sub></td>
</tr>
<tr>
<td>DU Rx (Case-1) to MT Tx (Case-7)</td>
<td>NmbGS<sub>16</sub></td>
</tr>
</tbody>
</table>
<h3
id="positioning-measurement-gap-activationdeactivation-command">5.18.20
Positioning Measurement Gap Activation/Deactivation Command</h3>
<p>If the UE is configured with pre-configured measurement gaps, the
network may send DL MAC CE for Positioning Measurement Gap
Activation/Deactivation Command to the UE as in clause 6.1.3.41. For the
activated measurement gap, the UE shall follow the specified UE
behaviour in clause 5.14.</p>
<p>Upon the reception of the MAC CE for Positioning Measurement Gap
Activation/Deactivation Command, the MAC entity shall:</p>
<p>1&gt; if the Measurement Gap Activation/Deactivation Command MAC CE
indicates the deactivation of a pre-configured positioning measurement
gap:</p>
<p>2&gt; deactivate the positioning measurement gap.</p>
<p>1&gt; else if the Positioning Measurement Gap Activation/Deactivation
Command MAC CE indicates the activation of a pre-configured measurement
gap:</p>
<p>2&gt; activate the positioning measurement gap and perform the
procedure specified in clause 5.14.</p>
<h3 id="ppw-activationdeactivation-command">5.18.21 PPW
Activation/Deactivation Command</h3>
<p>If the UE is configured with pre-configured PPW, the network may send
DL MAC CE for PPW Activation/Deactivation Command to the UE as in clause
6.1.3.42. For the activated PPW, the UE shall follow the specified UE
behaviour in clause 5.24.</p>
<p>Upon activation of DL BWP, the PPW(s) configured for that BWP are
considered deactivated. Upon reconfiguration of PPW(s) of the active DL
BWP, all the PPW(s) for that BWP are considered deactivated.</p>
<p>Upon the reception of the MAC CE for PPW Activation/Deactivation
Command, the MAC entity shall:</p>
<p>1&gt; if the DL MAC CE for PPW Activation/Deactivation Command
indicates the deactivation of a pre-configured PPW:</p>
<p>2&gt; deactivate the PPW.</p>
<p>1&gt; else if the DL MAC CE for PPW Activation/Deactivation Command
indicates the activation of a pre-configured PPW:</p>
<p>2&gt; activate the PPW according to the procedure specified in clause
5.24.</p>
<h3
id="update-of-pucch-power-control-set-for-multiple-trp-pucch-repetition">5.18.22
Update of PUCCH Power Control Set for multiple TRP PUCCH repetition</h3>
<p>The network may activate and deactivate PUCCH power control set(s)
for multiple TRP PUCCH repetition for a PUCCH resource or a PUCCH
resource group of a Serving Cell by sending the PUCCH Power Control Set
Update for multiple TRP PUCCH repetition MAC CE described in clause
6.1.3.46.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives a PUCCH Power Control Set Update for
multiple TRP PUCCH repetition MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the PUCCH
power control set update for multiple TRP PUCCH repetition MAC CE.</p>
<h3 id="unified-tci-states-activationdeactivation-mac-ce">5.18.23
Unified TCI States Activation/Deactivation MAC CE</h3>
<p>The network may activate and deactivate the configured unified TCI
states of a Serving Cell or a set of Serving Cells configured in
<em>simultaneousU-TCI-UpdateList1</em>,
<em>simultaneousU-TCI-UpdateList2</em>,
<em>simultaneousU-TCI-UpdateList3</em> or
<em>simultaneousU-TCI-UpdateList4</em> by sending the Unified TCI States
Activation/Deactivation MAC CE described in clause 6.1.3.47. The
configured unified TCI states are initially deactivated upon
(re-)configuration by upper layers and after reconfiguration with
sync.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives a Unified TCI States
Activation/Deactivation MAC CE on a Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the Unified
TCI States Activation/Deactivation MAC CE.</p>
<h3 id="update-of-differential-koffset">5.18.24 Update of Differential
Koffset</h3>
<p>The network may provide and update the Differential Koffset of a
Serving Cell in a non-terrestrial network by sending the Differential
Koffset MAC CE described in clause 6.1.3.57.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives a Differential Koffset MAC CE on a
Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the
Differential Koffset MAC CE.</p>
<h3 id="bfd-rs-indication-mac-ce">5.18.25 BFD-RS Indication MAC CE</h3>
<p>The network may activate and deactivate the configured beam failure
detection resources of a Serving Cell by sending the BFD-RS indication
MAC CE described in clause 6.1.3.58.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the MAC entity receives a BFD-RS indication MAC CE on a
Serving Cell:</p>
<p>2&gt; indicate to lower layers the information regarding the BFD-RS
Indication MAC CE.</p>
<h3 id="restricted-and-recommended-beam-indication-for-iab">5.18.26
Restricted and recommended beam indication for IAB</h3>
<p>Child IAB-DU Restricted Beam Indication MAC CE is used by an IAB-node
to indicate to its child node spatial resources and associated frequency
information where simultaneous transmission/reception from the IAB-MT
and transmission from the IAB-DU cells is restricted. IAB-MT Recommended
Beam Indication MAC CE is used by an IAB-node to indicate to its parent
node recommendations for such a restriction. Time resources where these
restrictions/recommendations can apply are indicated via RRC, while the
MAC CE further selects from these time resources the specific time
resource configuration (comprising a list of slot indices) to which
information provided in the MAC CE applies.</p>
<p>Upon reception of a Child IAB-DU Restricted Beam Indication MAC CE
the IAB-node shall:</p>
<p>- apply the configuration signalled in the MAC CE to the time slots
indicated in <em>IAB-ResourceConfig</em> (as specified in TS 38.331 [5])
which contains <em>iab-ResourceConfigID</em> parameter which matches the
Resource Configuration ID field of the MAC CE.</p>
<p>The MAC entity may:</p>
<p>1&gt; if an IAB-MT Recommended Beam Indication query has not been
triggered:</p>
<p>2&gt; trigger an IAB-MT Recommended Beam Indication query for this
Serving Cell.</p>
<p>If the MAC entity has UL resources allocated for new transmission the
MAC entity shall:</p>
<p>1&gt; for each IAB-MT Recommended Beam Indication query that has been
triggered and not cancelled:</p>
<p>2&gt; if the allocated UL resources can accommodate a IAB-MT
Recommended Beam Indication MAC CE plus its subheader as a result of LCP
as defined in clause 5.4.3.1:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the IAB-MT Recommended Beam Indication MAC CE;</p>
<p>3&gt; cancel this IAB-MT Recommended Beam Indication query.</p>
<h3 id="dl-tx-power-adjustment-for-iab">5.18.27 DL TX power adjustment
for IAB</h3>
<p>DL TX Power Adjustment MAC CE is used by an IAB-node to indicate to
its child node spatial resources and associated frequency information
where the DL TX power adjustment contained in the MAC CE applies.
Desired DL TX Power Adjustment MAC CE is used by an IAB-node to indicate
to its parent node recommendations for such a restriction. Time
resources where these restrictions/recommendations can apply are
indicated via RRC, while the MAC CE further selects from these time
resources the specific time resource configuration (comprising a list of
slot indices) to which information provided in the MAC CE applies.</p>
<p>Upon reception of a DL TX Power Adjustment MAC CE the IAB-node
shall:</p>
<p>- apply the configuration signalled in the MAC CE to the time slots
indicated in <em>IAB-ResourceConfig</em> (as specified in TS 38.331 [5])
which contains <em>iab-ResourceConfigID</em> parameter which matches the
Resource Configuration ID field of the MAC CE.</p>
<p>The MAC entity may:</p>
<p>1&gt; if a Desired DL TX Power Adjustment query has not been
triggered:</p>
<p>2&gt; trigger a Desired DL TX Power Adjustment query for this Serving
Cell.</p>
<p>If the MAC entity has UL resources allocated for new transmission the
MAC entity shall:</p>
<p>1&gt; for each Desired DL TX Power Adjustment query that has been
triggered and not cancelled:</p>
<p>2&gt; if the allocated UL resources can accommodate a Desired DL TX
Power Adjustment MAC CE plus its subheader as a result of LCP as defined
in clause 5.4.3.1:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the Desired DL TX Power Adjustment MAC CE;</p>
<p>3&gt; cancel this Desired DL TX Power Adjustment query.</p>
<h3 id="ul-psd-range-adjustment-for-iab">5.18.28 UL PSD range adjustment
for IAB</h3>
<p>Desired IAB-MT PSD range MAC CE is used by an IAB-node to indicate to
its parent node a recommendation of spatial resources and associated
frequency information where the desired PSD range, contained in the MAC
CE (and provided to help with the node's UL TX power control) could
apply. Time resources where these recommendations can apply are
indicated via RRC, while the MAC CE further selects from these time
resources the specific time resource configuration (comprising a list of
slot indices) to which information provided in the MAC CE applies.</p>
<p>The MAC entity may:</p>
<p>1&gt; if a Desired IAB-MT PSD range query has not been triggered:</p>
<p>2&gt; trigger a Desired IAB-MT PSD range query for this Serving
Cell.</p>
<p>If the MAC entity has UL resources allocated for new transmission the
MAC entity shall:</p>
<p>1&gt; for each Desired IAB-MT PSD range query that has been triggered
and not cancelled:</p>
<p>2&gt; if the allocated UL resources can accommodate a Desired IAB-MT
PSD range MAC CE plus its subheader as a result of LCP as defined in
clause 5.4.3.1:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the Desired IAB-MT PSD range MAC CE;</p>
<p>3&gt; cancel this Desired IAB-MT PSD range query.</p>
<h3 id="timing-case-indication-for-iab">5.18.29 Timing case indication
for IAB</h3>
<p>Timing Case Indication MAC CE is used by an IAB-node to indicate to
its child node timing modes which should apply to time resources
indicated via RRC.</p>
<p>Upon reception of a Timing Case Indication MAC CE the IAB-node
shall:</p>
<p>- apply the configuration signalled in the MAC CE to the time slots
indicated in <em>IAB-ResourceConfig</em> which contains
<em>iab-ResourceConfigID</em> parameter (as specified in TS 38.331 [5])
which matches the Resource Configuration ID field of the MAC CE.</p>
<h3 id="case-6-timing-request">5.18.30 Case-6 Timing Request</h3>
<p>The Case-6 Timing Request MAC CE is used by the IAB-MT to inform its
parent node whether Case-6 timing is required for simultaneous
operation.</p>
<p>The MAC entity may:</p>
<p>1&gt; if a Case-6 Timing Request query has not been triggered:</p>
<p>2&gt; trigger a Case-6 Timing Request query for this Serving
Cell.</p>
<p>If the MAC entity has UL resources allocated for new transmission the
MAC entity shall:</p>
<p>1&gt; for each Case-6 Timing Request query that has been triggered
and not cancelled:</p>
<p>2&gt; if the allocated UL resources can accommodate a Case-6 Timing
Request MAC CE plus its subheader as a result of LCP as defined in
clause 5.4.3.1:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the Case-6 Timing Request MAC CE;</p>
<p>3&gt; cancel this Case-6 Timing Request range query.</p>
<h2 id="data-inactivity-monitoring">5.19 Data inactivity monitoring</h2>
<p>The UE may be configured by RRC with a Data inactivity monitoring
functionality, when in RRC_CONNECTED. RRC controls Data inactivity
operation by configuring the timer <em>dataInactivityTimer</em>.</p>
<p>When <em>dataInactivityTimer</em> is configured, the UE shall:</p>
<p>1&gt; if any MAC entity receives a MAC SDU for DTCH logical channel,
DCCH logical channel, or CCCH logical channel, or multicast MTCH logical
channel; or</p>
<p>1&gt; if any MAC entity transmits a MAC SDU for DTCH logical channel,
or DCCH logical channel:</p>
<p>2&gt; start or restart <em>dataInactivityTimer</em>.</p>
<p>1&gt; if the <em>dataInactivityTimer</em> expires:</p>
<p>2&gt; indicate the expiry of the <em>dataInactivityTimer</em> to
upper layers.</p>
<h2 id="void-3">5.20 Void</h2>
<h2 id="lbt-operation">5.21 LBT operation</h2>
<h3 id="general-6">5.21.1 General</h3>
<p>The lower layer may perform an LBT procedure, see TS 37.213 [18],
according to which a transmission is not performed by lower layers if
the channel is identified as being occupied. When lower layer performs
an LBT procedure before a transmission and the transmission is not
performed, an LBT failure indication is sent to the MAC entity from
lower layers. Unless otherwise specified, when LBT procedure is
performed for a transmission, actions as specified in this specification
are performed regardless of if an LBT failure indication is received
from lower layers. When LBT is not performed by the lower layers, LBT
failure indication is not received from lower layers.</p>
<h3 id="lbt-failure-detection-and-recovery-procedure">5.21.2 LBT failure
detection and recovery procedure</h3>
<p>The MAC entity may be configured by RRC with a consistent LBT failure
recovery procedure. Consistent LBT failure is detected per UL BWP by
counting LBT failure indications, for all UL transmissions, from the
lower layers to the MAC entity.</p>
<p>RRC configures the following parameters in the
<em>lbt-FailureRecoveryConfig</em>:</p>
<p>- <em>lbt-FailureInstanceMaxCount</em> for the consistent LBT failure
detection;</p>
<p>- <em>lbt-FailureDetectionTimer</em> for the consistent LBT failure
detection;</p>
<p>The following UE variable is used for the consistent LBT failure
detection procedure:</p>
<p>- <em>LBT_COUNTER</em> (per Serving Cell): counter for LBT failure
indication which is initially set to 0.</p>
<p>For each activated Serving Cell configured with
<em>lbt-FailureRecoveryConfig</em>, the MAC entity shall:</p>
<p>1&gt; if LBT failure indication has been received from lower
layers:</p>
<p>2&gt; start or restart the <em>lbt-FailureDetectionTimer</em>;</p>
<p>2&gt; increment <em>LBT_COUNTER</em> by 1;</p>
<p>2&gt; if <em>LBT_COUNTER</em> &gt;=
<em>lbt-FailureInstanceMaxCount</em>:</p>
<p>3&gt; trigger consistent LBT failure for the active UL BWP in this
Serving Cell;</p>
<p>3&gt; if this Serving Cell is the SpCell:</p>
<p>4&gt; if consistent LBT failure has been triggered in all UL BWPs
configured with PRACH occasions on same carrier in this Serving
Cell:</p>
<p>5&gt; indicate consistent LBT failure to upper layers.</p>
<p>4&gt; else:</p>
<p>5&gt; stop any ongoing Random Access procedure in this Serving
Cell;</p>
<p>5&gt; switch the active UL BWP to a UL BWP, on same carrier in this
Serving Cell, configured with PRACH occasion and for which consistent
LBT failure has not been triggered;</p>
<p>5&gt; initiate a Random Access Procedure (as specified in clause
5.1.1).</p>
<p>1&gt; if all triggered consistent LBT failures are cancelled in this
Serving Cell; or</p>
<p>1&gt; if the <em>lbt-FailureDetectionTimer</em> expires; or</p>
<p>1&gt; if <em>lbt-FailureDetectionTimer</em> or
<em>lbt-FailureInstanceMaxCount</em> is reconfigured by upper
layers:</p>
<p>2&gt; set <em>LBT_COUNTER</em> to 0.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if consistent LBT failure has been triggered, and not
cancelled, in the SpCell; and</p>
<p>1&gt; if UL-SCH resources are available for a new transmission in the
SpCell and these UL-SCH resources can accommodate the LBT failure MAC CE
plus its subheader as a result of logical channel prioritization:</p>
<p>2&gt; instruct the Multiplexing and Assembly procedure to generate
the LBT failure MAC CE.</p>
<p>1&gt; else if consistent LBT failure has been triggered, and not
cancelled, in at least one SCell:</p>
<p>2&gt; if UL-SCH resources are available for a new transmission in a
Serving Cell for which consistent LBT failure has not been triggered and
these UL-SCH resources can accommodate the LBT failure MAC CE plus its
subheader as a result of logical channel prioritization:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the LBT failure MAC CE.</p>
<p>2&gt; else:</p>
<p>3&gt; trigger a Scheduling Request for LBT failure MAC CE.</p>
<p>1&gt; if a MAC PDU is transmitted and LBT failure indication is not
received from lower layers and this PDU includes the LBT failure MAC
CE:</p>
<p>2&gt; cancel all the triggered consistent LBT failure(s) in SCell(s)
for which consistent LBT failure was indicated in the transmitted LBT
failure MAC CE.</p>
<p>1&gt; if consistent LBT failure is triggered and not cancelled in the
SpCell; and</p>
<p>1&gt; if the Random Access procedure is considered successfully
completed (see clause 5.1) in the SpCell:</p>
<p>2&gt; cancel all the triggered consistent LBT failure(s) in the
SpCell.</p>
<p>1&gt; if <em>lbt-FailureRecoveryConfig</em> is reconfigured by upper
layers for a Serving Cell:</p>
<p>2&gt; cancel all the triggered consistent LBT failure(s) in this
Serving Cell.</p>
<h2 id="sl-sch-data-transfer">5.22 SL-SCH Data transfer</h2>
<h3 id="sl-sch-data-transmission">5.22.1 SL-SCH Data transmission</h3>
<h4 id="sl-grant-reception-and-sci-transmission">5.22.1.1 SL Grant
reception and SCI transmission</h4>
<p>Sidelink grant is received dynamically on the PDCCH, configured
semi-persistently by RRC or autonomously selected by the MAC entity. The
MAC entity shall have a sidelink grant on an active SL BWP to determine
a set of PSCCH duration(s) in which transmission of SCI occurs and a set
of PSSCH duration(s) in which transmission of SL-SCH associated with the
SCI occurs. A sidelink grant addressed to SL-CS-RNTI with NDI = 1 is
considered as a dynamic sidelink grant.</p>
<p>If the MAC entity has been configured with Sidelink resource
allocation mode 1 as indicated in TS 38.331 [5], the MAC entity shall
for each PDCCH occasion and for each grant received for this PDCCH
occasion:</p>
<p>1&gt; if a sidelink grant has been received on the PDCCH for the MAC
entity's SL-RNTI:</p>
<p>2&gt; if the NDI received on the PDCCH has not been toggled compared
to the value in the previously received HARQ information for the HARQ
Process ID:</p>
<p>3&gt; use the received sidelink grant to determine PSCCH duration(s)
and PSSCH duration(s) for one or more retransmissions of a single MAC
PDU for the corresponding Sidelink process according to clause 8.1.2 of
TS 38.214 [7].</p>
<p>2&gt; else:</p>
<p>3&gt; use the received sidelink grant to determine PSCCH duration(s)
and PSSCH duration(s) for initial transmission and, if available,
retransmission(s) of a single MAC PDU according to clause 8.1.2 of TS
38.214 [7].</p>
<p>1&gt; else if a sidelink grant has been received on the PDCCH for the
MAC entity's SL-CS-RNTI:</p>
<p>2&gt; if PDCCH contents indicate retransmission(s) for the identified
HARQ process ID that has been set for an activated configured sidelink
grant identified by <em>sl-ConfigIndexCG</em>:</p>
<p>3&gt; use the received sidelink grant to determine PSCCH duration(s)
and PSSCH duration(s) for one or more retransmissions of a single MAC
PDU according to clause 8.1.2 of TS 38.214 [7].</p>
<p>2&gt; else if PDCCH contents indicate configured grant Type 2
deactivation for a configured sidelink grant:</p>
<p>3&gt; trigger configured sidelink grant confirmation for the
configured sidelink grant.</p>
<p>2&gt; else if PDCCH contents indicate configured grant Type 2
activation for a configured sidelink grant:</p>
<p>3&gt; trigger configured sidelink grant confirmation for the
configured sidelink grant;</p>
<p>3&gt; store the configured sidelink grant;</p>
<p>3&gt; initialise or re-initialise the configured sidelink grant to
determine the set of PSCCH durations and the set of PSSCH durations for
transmissions of multiple MAC PDUs according to clause 8.1.2 of TS
38.214 [7].</p>
<p>1&gt; if a dynamic sidelink grant is available for retransmission(s)
of a MAC PDU which has been positively acknowledged as specified in
clause 5.22.1.3.1a:</p>
<p>2&gt; clear the PSCCH duration(s) and PSSCH duration(s) corresponding
to retransmission(s) of the MAC PDU from the sidelink grant.</p>
<p>If the MAC entity has been configured with Sidelink resource
allocation mode 2 to transmit using pool(s) of resources in a carrier as
indicated in TS 38.331 [5] or TS 36.331 [21] based on full sensing, or
partial sensing, or random selection or any combination(s), the MAC
entity shall for each Sidelink process:</p>
<p>NOTE 1: If the MAC entity is configured with Sidelink resource
allocation mode 2 to transmit using a pool of resources in a carrier as
indicated in TS 38.331 [5] or TS 36.331 [21], the MAC entity can create
a selected sidelink grant on the pool of resources based on random
selection, or partial sensing, or full sensing only after releasing
configured sidelink grant(s), if any.</p>
<p>NOTE 2: The MAC entity expects that PSFCH is always configured by RRC
for at least one pool of resources in <em>sl-TxPoolSelectedNormal</em>
and for the resource pool in <em>sl-TxPoolExceptional</em> in case that
at least a logical channel configured with
<em>sl-HARQ-FeedbackEnabled</em> is set to <em>enabled</em>.</p>
<p>NOTE 2A: For the transmission of Sidelink Inter-UE Coordination
Request MAC CE, the MAC entity selects the TX pool of resource where the
IUC resource set is required. For the transmission of Sidelink Inter-UE
Coordination Information MAC CE, the MAC entity selects the TX pool of
resource where the IUC resource set is located.</p>
<p>1&gt; if the MAC entity has selected to create a selected sidelink
grant corresponding to transmissions of multiple MAC PDUs, and SL data
is available in a logical channel:</p>
<p>2&gt; if the MAC entity has not selected a pool of resources allowed
for the logical channel:</p>
<p>3&gt; if SL data is available in the logical channel for NR sidelink
discovery:</p>
<p>4&gt; if <em>sl-BWP-DiscPoolConfig</em> or
<em>sl-BWP-DiscPoolConfigCommon</em> is configured according to TS
38.331 [5]:</p>
<p>5&gt; select the <em>sl-DiscTxPoolSelected</em> configured in
<em>sl-BWP-DiscPoolConfig</em> or <em>sl-BWP-DiscPoolConfigCommon</em>
for the transmission of NR sidelink discovery message.</p>
<p>4&gt; else:</p>
<p>5&gt; select any pool of resources among the configured pools of
resources.</p>
<p>3&gt; else if <em>sl-HARQ-FeedbackEnabled</em> is set to
<em>enabled</em> for the logical channel:</p>
<p>4&gt; select any pool of resources configured with PSFCH resources
among the pools of resources except the pool(s) in
<em>sl-BWP-DiscPoolConfig</em> or <em>sl-BWP-DiscPoolConfigCommon</em>,
if configured.</p>
<p>3&gt; else:</p>
<p>4&gt; select any pool of resources among the pools of resources
except the pool(s) in <em>sl-BWP-DiscPoolConfig</em> or
<em>sl-BWP-DiscPoolConfigCommon</em>, if configured.</p>
<p>2&gt; perform the TX resource (re-)selection check on the selected
pool of resources as specified in clause 5.22.1.2;</p>
<p>NOTE 3: The MAC entity continuously performs the TX resource
(re-)selection check until the corresponding pool of resources is
released by RRC or the MAC entity decides to cancel creating a selected
sidelink grant corresponding to transmissions of multiple MAC PDUs.</p>
<p>2&gt; if the TX resource (re-)selection is triggered as the result of
the TX resource (re-)selection check:</p>
<p>3&gt; if one or multiple SL DRX(s) is configured in the destination
UE(s) receiving SL-SCH data:</p>
<p>4&gt; indicate to the physical layer SL DRX Active time in the
destination UE(s) receiving SL-SCH data, as specified in clause
5.28.2.</p>
<p>3&gt; select one of the allowed values configured by RRC in
<em>sl-ResourceReservePeriodList</em> and set the resource reservation
interval, <span class="math inline">\(P_{\text{rsvp\_TX}}\)</span>, with
the selected value;</p>
<p>NOTE 3A: The MAC entity selects a value for the resource reservation
interval which is larger than the remaining PDB of SL data available in
the logical channel.</p>
<p>3&gt; randomly select, with equal probability, an integer value in
the interval [5, 15] for the resource reservation interval higher than
or equal to 100ms or in the interval <span
class="math inline">\(\left\lbrack 5 \times \left\lceil
\frac{100}{\max\left( 20,{\ P}_{rsvp\_ TX} \right)} \right\rceil,15
\times \left\lceil \frac{100}{\max\left( 20,{\ P}_{rsvp\_ TX} \right)}
\right\rceil \right\rbrack\ \)</span>for the resource reservation
interval lower than 100ms and set
<em>SL_RESOURCE_RESELECTION_COUNTER</em> to the selected value;</p>
<p>3&gt; select the number of HARQ retransmissions from the allowed
numbers, if configured by RRC, in <em>sl-MaxTxTransNumPSSCH</em>
included in <em>sl-PSSCH-TxConfigList</em> and, if configured by RRC,
overlapped in <em>sl-MaxTxTransNumPSSCH</em> indicated in
<em>sl-CBR-PriorityTxConfigList</em> for the highest priority of the
logical channel(s) allowed on the carrier and the CBR measured by lower
layers according to clause 5.1.27 of TS 38.215 [24] if CBR measurement
results are available or the corresponding
<em>sl-defaultTxConfigIndex</em> configured by RRC if CBR measurement
results are not available or the corresponding
<em>sl-DefaultCBR-PartialSensing</em> configured by RRC if partial
sensing is selected and CBR measurement results are not available, or
the corresponding <em>sl-DefaultCBR-RandomSelection</em> configured by
RRC if random selection is selected and CBR measurement results are not
available in case the <em>sl-TxPoolExceptional</em> is not used;</p>
<p>3&gt; select an amount of frequency resources within the range, if
configured by RRC, between <em>sl-MinSubChannelNumPSSCH</em> and
<em>sl-MaxSubchannelNumPSSCH</em> included in
<em>sl-PSSCH-TxConfigList</em> and, if configured by RRC, overlapped
between <em>sl-MinSubChannelNumPSSCH</em> and
<em>sl-MaxSubchannelNumPSSCH</em> indicated in
<em>sl-CBR-PriorityTxConfigList</em> for the highest priority of the
logical channel(s) allowed on the carrier and the CBR measured by lower
layers according to clause 5.1.27 of TS 38.215 [24] if CBR measurement
results are available or the corresponding
<em>sl-defaultTxConfigIndex</em> configured by RRC if CBR measurement
results are not available or the corresponding
<em>sl-DefaultCBR-PartialSensing</em> configured by RRC if partial
sensing is selected and CBR measurement results are not available, or
the corresponding <em>sl-DefaultCBR-RandomSelection</em> configured by
RRC if random selection is selected and CBR measurement results are not
available in case the <em>sl-TxPoolExceptional</em> is not used;</p>
<p>3&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is not configured by RRC:</p>
<p>4&gt; if transmission based on random selection is configured by
upper layers:</p>
<p>5&gt; randomly select the time and frequency resources for one
transmission opportunity from the resource pool which occur within the
SL DRX Active time, if configured, as specified in clause 5.28.2 of the
destination UE selected for indicating to the physical layer the SL DRX
Active time above, according to the amount of selected frequency
resources and the remaining PDB of SL data available in the logical
channel(s) allowed on the carrier.</p>
<p>4&gt; else:</p>
<p>5&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources indicated by the physical
layer as specified in clause 8.1.4 of TS 38.214 [7] which occur within
the SL DRX Active time, if configured, as specified in clause 5.28.2 of
the destination UE selected for indicating to the physical layer the SL
DRX Active time above, according to the amount of selected frequency
resources and the remaining PDB of SL data available in the logical
channel(s) allowed on the carrier.</p>
<p>3&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and preferred resource set is not
received from a UE:</p>
<p>4&gt; if transmission based on random selection is configured by
upper layers:</p>
<p>5&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources pool, according to the
amount of selected frequency resources and the remaining PDB of SL data
available in the logical channel(s) allowed on the carrier.</p>
<p>4&gt; else:</p>
<p>5&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources indicated by the physical
layer as specified in clause 8.1.4 of TS 38.214 [7] , according to the
amount of selected frequency resources and the remaining PDB of SL data
available in the logical channel(s) allowed on the carrier.</p>
<p>3&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and when the UE does not have its own
sensing result as specified in clause 8.1.4 of TS 38.214 [7] and if a
preferred resource set is received from a UE:</p>
<p>4&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources belonging to the received
preferred resource set for SL-SCH data to be transmitted to the UE
providing the preferred resource set, according to the amount of
selected frequency resources and the remaining PDB of SL data available
in the logical channel(s) allowed on the carrier.</p>
<p>3&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and when the UE has its own sensing
result as specified in clause 8.1.4 of TS 38.214 [7] and if a preferred
resource set is received from a UE:</p>
<p>4&gt; randomly select the time and frequency resources for one
transmission opportunity within the intersection of the received
preferred resource set and the resources indicated by the physical layer
as specified in clause 8.1.4 of TS 38.214 [7] for an SL-SCH data to be
transmitted to the UE providing the preferred resource set, according to
the amount of selected frequency resources and the remaining PDB of SL
data available in the logical channel(s) allowed on the carrier.</p>
<p>4&gt; if there are no resources within the intersection that can be
selected as the time and frequency resources for the one transmission
opportunity according to the amount of selected frequency resources and
the remaining PDB of SL data available in the logical channel(s) allowed
on the carrier.</p>
<p>5&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources indicated by the physical
layer as specified in clause 8.1.4 of TS 38.214 [7], according to the
amount of selected frequency resources and the remaining PDB of SL data
available in the logical channel(s) allowed on the carrier.</p>
<p>3&gt; use the randomly selected resource to select a set of periodic
resources spaced by the resource reservation interval for transmissions
of PSCCH and PSSCH corresponding to the number of transmission
opportunities of MAC PDUs determined in TS 38.214 [7].</p>
<p>3&gt; if one or more HARQ retransmissions are selected:</p>
<p>4&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is not configured by RRC:</p>
<p>5&gt; if transmission based on full sensing or partial sensing is
configured by upper layers and there are available resources left in the
resources indicated by the physical layer according to clause 8.1.4 of
TS 38.214 [7] for more transmission opportunities; or</p>
<p>5&gt; if transmission based on random selection is configured by
upper layers and there are available resources left in the resource pool
for more transmission opportunities:</p>
<p>6&gt; randomly select the time and frequency resources for one or
more transmission opportunities from the available resources which occur
within the SL DRX Active time, if configured, as specified in clause
5.28.2 of the destination UE selected for indicating to the physical
layer the SL DRX Active time above, according to the amount of selected
frequency resources, the selected number of HARQ retransmissions and the
remaining PDB of SL data available in the logical channel(s) allowed on
the carrier by ensuring the minimum time gap between any two selected
resources in case that PSFCH is configured for this pool of resources
and that a retransmission resource can be indicated by the time resource
assignment of a prior SCI according to clause 8.3.1.1 of TS 38.212
[9].</p>
<p>4&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and preferred resource set is not
received from a UE:</p>
<p>5&gt; if transmission based on full sensing or partial sensing is
configured by upper layers and there are available resources left in the
resources indicated by the physical layer according to clause 8.1.4 of
TS 38.214 [7] for more transmission opportunities; or</p>
<p>5&gt; if transmission based on random selection is configured by
upper layers and there are available resources left in the resource pool
for more transmission opportunities:</p>
<p>6&gt; randomly select the time and frequency resources for one or
more transmission opportunities from the available resources, according
to the amount of selected frequency resources, the selected number of
HARQ retransmissions and the remaining PDB of SL data available in the
logical channel(s) allowed on the carrier by ensuring the minimum time
gap between any two selected resources in case that PSFCH is configured
for this pool of resources and that a retransmission resource can be
indicated by the time resource assignment of a prior SCI according to
clause 8.3.1.1 of TS 38.212 [9].</p>
<p>4&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and when the UE has own sensing result
as specified in clause 8.1.4 of TS 38.214 [7] and if a preferred
resource set is received from a UE:</p>
<p>5&gt; if there are available resources left in the intersection of
the received preferred resource set and the resources indicated by the
physical layer as specified in clause 8.1.4 of TS 38.214 [7] for more
transmission opportunities:</p>
<p>6&gt; randomly select the time and frequency resources for one or
more transmission opportunities from the available resources within the
intersection for SL-SCH data to be transmitted to the UE providing the
preferred resource set, according to the amount of selected frequency
resources, the selected number of HARQ retransmissions and the remaining
PDB of SL data available in the logical channel(s) allowed on the
carrier by ensuring the minimum time gap between any two selected
resources in case that PSFCH is configured for this pool of resources
and that a retransmission resource can be indicated by the time resource
assignment of a prior SCI according to clause 8.3.1.1 of TS 38.212
[9].</p>
<p>5&gt; if the number of time and frequency resources that has been
maximally selected for one or more transmission opportunities from the
available resources within the intersection is smaller than the selected
number of HARQ retransmissions and there are available resources left in
the resources indicated by the physical layer for more transmission
opportunities:</p>
<p>6&gt; randomly select the time and frequency resources for the
remaining transmission opportunities except for the selected resources
within the intersection from the available resources outside the
intersection but left in the resources indicated by the physical layer
according to clause 8.1.4 of TS 38.214 [7], according to the amount of
selected frequency resources, the selected number of HARQ
retransmissions and the remaining PDB of SL data available in the
logical channel(s) allowed on the carrier by ensuring the minimum time
gap between any two selected resources in case that PSFCH is configured
for this pool of resources and that a retransmission resource can be
indicated by the time resource assignment of a prior SCI according to
clause 8.3.1.1 of TS 38.212 [9].</p>
<p>4&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and when the UE does not have own
sensing result as specified in clause 8.1.4 of TS 38.214 [7] and if a
preferred resource set is received from a UE; and</p>
<p>4&gt; if there are available resources left in the received preferred
resource set for more transmission opportunities:</p>
<p>5&gt; randomly select the time and frequency resources for one or
more transmission opportunities from the available resources belonging
to the received preferred resource set for SL-SCH data to be transmitted
to the UE providing the preferred resource set, according to the amount
of selected frequency resources, the selected number of HARQ
retransmissions and the remaining PDB of SL data available in the
logical channel(s) allowed on the carrier by ensuring the minimum time
gap between any two selected resources in case that PSFCH is configured
for this pool of resources and that a retransmission resource can be
indicated by the time resource assignment of a prior SCI according to
clause 8.3.1.1 of TS 38.212 [9].</p>
<p>4&gt; use the randomly selected resource to select a set of periodic
resources spaced by the resource reservation interval for transmissions
of PSCCH and PSSCH corresponding to the number of retransmission
opportunities of the MAC PDUs determined in TS 38.214 [7];</p>
<p>4&gt; consider the first set of transmission opportunities as the
initial transmission opportunities and the other set(s) of transmission
opportunities as the retransmission opportunities;</p>
<p>4&gt; consider the sets of initial transmission opportunities and
retransmission opportunities as the selected sidelink grant.</p>
<p>3&gt; else:</p>
<p>4&gt; consider the set as the selected sidelink grant.</p>
<p>3&gt; use the selected sidelink grant to determine the set of PSCCH
durations and the set of PSSCH durations according to TS 38.214 [7].</p>
<p>2&gt; else if <em>SL_RESOURCE_RESELECTION_COUNTER</em> = 0 and when
<em>SL_RESOURCE_RESELECTION_COUNTER</em> was equal to 1 the MAC entity
randomly selected, with equal probability, a value in the interval [0,
1] which is less than or equal to the probability configured by RRC in
<em>sl-ProbResourceKeep</em>:</p>
<p>3&gt; clear the selected sidelink grant, if available;</p>
<p>3&gt; randomly select, with equal probability, an integer value in
the interval [5, 15] for the resource reservation interval higher than
or equal to 100ms or in the interval <span
class="math inline">\(\left\lbrack 5 \times \left\lceil
\frac{100}{\max\left( 20,{\ P}_{rsvp\_ TX} \right)} \right\rceil,15
\times \left\lceil \frac{100}{\max\left( 20,{\ P}_{rsvp\_ TX} \right)}
\right\rceil \right\rbrack\ \)</span>for the resource reservation
interval lower than 100ms and set
<em>SL_RESOURCE_RESELECTION_COUNTER</em> to the selected value;</p>
<p>3&gt; reuse the previously selected sidelink grant for the number of
transmissions of the MAC PDUs determined in TS 38.214 [7] with the
resource reservation interval to determine the set of PSCCH durations
and the set of PSSCH durations according to TS 38.214 [7].</p>
<p>1&gt; if the MAC entity has selected to create a selected sidelink
grant corresponding to transmission(s) of a single MAC PDU, and if SL
data is available in a logical channel, or an SL-CSI reporting is
triggered, or a Sidelink DRX Command indication is triggered or a
Sidelink Inter-UE Coordination Information reporting is triggered, or a
Sidelink Inter-UE Coordination Request is triggered:</p>
<p>2&gt; if SL data is available in the logical channel for NR sidelink
discovery:</p>
<p>3&gt; if <em>sl-BWP-DiscPoolConfig</em> or
<em>sl-BWP-DiscPoolConfigCommon</em> is configured according to TS
38.331 [5]:</p>
<p>4&gt; select the <em>sl-DiscTxPoolSelected</em> configured in
<em>sl-BWP-DiscPoolConfig</em> or <em>sl-BWP-DiscPoolConfigCommon</em>
for the transmission of NR sidelink discovery message.</p>
<p>3&gt; else:</p>
<p>4&gt; select any pool of resources among the configured pools of
resources.</p>
<p>2&gt; else if SL data for NR sidelink communication is available in
the logical channel:</p>
<p>3&gt; if <em>sl-HARQ-FeedbackEnabled</em> is set to <em>enabled</em>
for the logical channel:</p>
<p>4&gt; select any pool of resources configured with PSFCH resources
among the pools of resources except the pool(s) in
<em>sl-BWP-DiscPoolConfig</em> or <em>sl-BWP-DiscPoolConfigCommon</em>,
if configured.</p>
<p>3&gt; else:</p>
<p>4&gt; select any pool of resources among the pools of resources
except the pool(s) in <em>sl-BWP-DiscPoolConfig</em> or
<em>sl-BWP-DiscPoolConfigCommon</em>, if configured.</p>
<p>2&gt; else if an SL-CSI reporting or a Sidelink DRX Command or a
Sidelink Inter-UE Coordination Request or a Sidelink Inter-UE
Coordination Information is triggered:</p>
<p>3&gt; select any pool of resources among the pools of resources
except the pool(s) in <em>sl-BWP-DiscPoolConfig</em> or
<em>sl-BWP-DiscPoolConfigCommon</em>, if configured.</p>
<p>2&gt; perform the TX resource (re-)selection check on the selected
pool of resources as specified in clause 5.22.1.2;</p>
<p>2&gt; if the TX resource (re-)selection is triggered as the result of
the TX resource (re-)selection check:</p>
<p>3&gt; if one or multiple SL DRX(s) is configured in the destination
UE(s) receiving SL-SCH data:</p>
<p>4&gt; indicate to the physical layer SL DRX Active time in the
destination UE(s) receiving SL-SCH data, as specified in clause
5.28.2.</p>
<p>3&gt; select the number of HARQ retransmissions from the allowed
numbers, if configured by RRC, in <em>sl-MaxTxTransNumPSSCH</em>
included in <em>sl-PSSCH-TxConfigList</em> and, if configured by RRC,
overlapped in <em>sl-MaxTxTransNumPSSCH</em> indicated in
<em>sl-CBR-PriorityTxConfigList</em> for the highest priority of the
logical channel(s) allowed on the carrier and the CBR measured by lower
layers according to clause 5.1.27 of TS 38.215 [24] if CBR measurement
results are available or the corresponding
<em>sl-defaultTxConfigIndex</em> configured by RRC if CBR measurement
results are not available or the corresponding
<em>sl-DefaultCBR-PartialSensing</em> configured by RRC if partial
sensing is selected and CBR measurement results are not available, or
the corresponding <em>sl-DefaultCBR-RandomSelection</em> configured by
RRC if random selection is selected and CBR measurement results are not
available in case the <em>sl-TxPoolExceptional</em> is not used;</p>
<p>3&gt; select an amount of frequency resources within the range, if
configured by RRC, between <em>sl-MinSubChannelNumPSSCH</em> and
<em>sl-MaxSubChannelNumPSSCH</em> included in
<em>sl-PSSCH-TxConfigList</em> and, if configured by RRC, overlapped
between <em>sl-MinSubChannelNumPSSCH</em> and
<em>sl-MaxSubChannelNumPSSCH</em> indicated in
<em>sl-CBR-PriorityTxConfigList</em> for the highest priority of the
logical channel(s) allowed on the carrier and the CBR measured by lower
layers according to clause 5.1.27 of TS 38.215 [24] if CBR measurement
results are available or the corresponding
<em>sl-defaultTxConfigIndex</em> configured by RRC if CBR measurement
results are not available or the corresponding
<em>sl-DefaultCBR-PartialSensing</em> configured by RRC if partial
sensing is selected and CBR measurement results are not available, or
the corresponding <em>sl-DefaultCBR-RandomSelection</em> configured by
RRC if random selection is selected and CBR measurement results are not
available in case the <em>sl-TxPoolExceptional</em> is not used;</p>
<p>3&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is not configured by RRC:</p>
<p>4&gt; if transmission based on random selection is configured by
upper layers:</p>
<blockquote>
<p>5&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources pool which occur within the
SL DRX Active time, if configured, as specified in clause 5.28.2 of the
destination UE selected for indicating to the physical layer the SL DRX
Active time above, according to the amount of selected frequency
resources and the remaining PDB of SL data available in the logical
channel(s) allowed on the carrier, and the latency requirement of the
triggered SL CSI reporting.</p>
</blockquote>
<p>4&gt; else:</p>
<p>5&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources indicated by the physical
layer as specified in clause 8.1.4 of TS 38.214 [7] which occur within
the SL DRX Active time, if configured, as specified in clause 5.28.2 of
the destination UE selected for indicating to the physical layer the SL
DRX Active time above, according to the amount of selected frequency
resources and the remaining PDB of SL data available in the logical
channel(s) allowed on the carrier, and/or the latency requirement of the
triggered SL-CSI reporting.</p>
<p>3&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and preferred resource set is not
received from a UE:</p>
<p>4&gt; if transmission based on random selection is configured by
upper layers:</p>
<p>5&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources pool, according to the
amount of selected frequency resources and the remaining PDB of SL data
available in the logical channel(s) allowed on the carrier, and/or the
latency requirement of the triggered SL CSI reporting.</p>
<p>4&gt; else:</p>
<p>5&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources indicated by the physical
layer as specified in clause 8.1.4 of TS 38.214 [7], according to the
amount of selected frequency resources and the remaining PDB of SL data
available in the logical channel(s) allowed on the carrier, and/or the
latency requirement of the triggered SL CSI reporting.</p>
<p>3&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and when the UE does not have own
sensing result as specified in clause 8.1.4 of TS 38.214 [7] and if a
preferred resource set is received from a UE:</p>
<p>4&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources belonging to the received
preferred resource set for a MAC PDU to be transmitted to the UE
providing the preferred resource set, according to the amount of
selected frequency resources and the remaining PDB of SL data available
in the logical channel(s) allowed on the carrier, and/or the latency
requirement of the triggered SL CSI reporting.</p>
<p>3&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and when the UE has own sensing result
as specified in clause 8.1.4 of TS 38.214 [7] and if a preferred
resource set is received from a UE:</p>
<p>4&gt; randomly select the time and frequency resources for one
transmission opportunity within the intersection of the received
preferred resource set and the resources indicated by the physical layer
as specified in clause 8.1.4 of TS 38.214 [7] for a MAC PDU to be
transmitted to the UE providing the preferred resource set, according to
the amount of selected frequency resources and the remaining PDB of SL
data available in the logical channel(s) allowed on the carrier, and/or
the latency requirement of the triggered SL CSI reporting;</p>
<p>4&gt; if there are no resources within the intersection that can be
selected as the time and frequency resources for the one transmission
opportunity according to the amount of selected frequency resources and
the remaining PDB of SL data available in the logical channel(s) allowed
on the carrier.</p>
<blockquote>
<p>5&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources indicated by the physical
layer as specified in clause 8.1.4 of TS 38.214 [7], according to the
amount of selected frequency resources and the remaining PDB of SL data
available in the logical channel(s) allowed on the carrier, and/or the
latency requirement of the triggered SL CSI reporting.</p>
</blockquote>
<p>3&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and when the UE determines the
resources for Sidelink Inter-UE Coordination Information transmission
upon explicit request from a UE:</p>
<p>4&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources indicated by the physical
layer as specified in clause 8.1.4 of TS 38.214 [7], according to the
amount of selected frequency resources, the remaining PDB of SL data
available in the logical channel(s) allowed on the carrier, and/or the
latency requirement of the triggered SL-CSI reporting and the latency
requirement of the Sidelink Inter-UE Coordination Information
transmission.</p>
<p>3&gt; if one or more HARQ retransmissions are selected:</p>
<p>4&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is not configured by RRC:</p>
<p>5&gt; if transmission based on full sensing or partial sensing is
configured by upper layers and there are available resources left in the
resources indicated by the physical layer according to clause 8.1.4 of
TS 38.214 [7] for more transmission opportunities; or</p>
<p>5&gt; if transmission based on random selection is configured by
upper layers and there are available resources left in the resources
pool for more transmission opportunities:</p>
<p>6&gt; randomly select the time and frequency resources for one or
more transmission opportunities from the available resources which occur
within the SL DRX Active time, if configured, as specified in clause
5.28.2 of the destination UE selected for indicating to the physical
layer the SL DRX Active time above, according to the amount of selected
frequency resources, the selected number of HARQ retransmissions and the
remaining PDB of SL data available in the logical channel(s) allowed on
the carrier, and/or the latency requirement of the triggered SL-CSI
reporting by ensuring the minimum time gap between any two selected
resources in case that PSFCH is configured for this pool of resources,
and that a retransmission resource can be indicated by the time resource
assignment of a prior SCI according to clause 8.3.1.1 of TS 38.212
[9];</p>
<p>4&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and preferred resource set is not
received from a UE:</p>
<p>5&gt; if transmission based on sensing is configured by upper layers
and there are available resources left in the resources indicated by the
physical layer according to clause 8.1.4 of TS 38.214 [7] for more
transmission opportunities; or</p>
<p>5&gt; if transmission based on random selection is configured by
upper layers and there are available resources left in the resource pool
for more transmission opportunities:</p>
<p>6&gt; randomly select the time and frequency resources for one or
more transmission opportunities from the available resources, according
to the amount of selected frequency resources, the selected number of
HARQ retransmissions and the remaining PDB of SL data available in the
logical channel(s) allowed on the carrier, and/or the latency
requirement of the triggered SL-CSI reporting by ensuring the minimum
time gap between any two selected resources in case that PSFCH is
configured for this pool of resources and that a retransmission resource
can be indicated by the time resource assignment of a prior SCI
according to clause 8.3.1.1 of TS 38.212 [9].</p>
<p>4&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and when the UE has own sensing result
as specified in clause 8.1.4 of TS 38.214 [7] and if a preferred
resource set is received from a UE:</p>
<p>5&gt; if there are available resources left in the intersection of
the received preferred resource set and the resources indicated by the
physical layer as specified in clause 8.1.4 of TS 38.214 [7] for more
transmission opportunities:</p>
<p>6&gt; randomly select the time and frequency resources for one or
more transmission opportunities from the available resources within the
intersection for a MAC PDU to be transmitted to the UE providing the
preferred resource set, according to the amount of selected frequency
resources, the selected number of HARQ retransmissions and the remaining
PDB of SL data available in the logical channel(s) allowed on the
carrier, and/or the latency requirement of the triggered SL-CSI
reporting by ensuring the minimum time gap between any two selected
resources in case that PSFCH is configured for this pool of resources
and that a retransmission resource can be indicated by the time resource
assignment of a prior SCI according to clause 8.3.1.1 of TS 38.212
[9].</p>
<p>5&gt; if the number of time and frequency resources that has been
maximally selected for one or more transmission opportunities from the
available resources within the intersection is smaller than the selected
number of HARQ retransmissions and there are available resources left in
the resources indicated by the physical layer for more transmission
opportunities:</p>
<p>6&gt; randomly select the time and frequency resources for the
remaining transmission opportunities except for the selected resources
within the intersection from the available resources outside the
intersection but left in the resources indicated by the physical layer
according to clause 8.1.4 of TS 38.214 [7], according to the amount of
selected frequency resources, the selected number of HARQ
retransmissions and the remaining PDB of SL data available in the
logical channel(s) allowed on the carrier, and/or the latency
requirement of the triggered SL-CSI reporting by ensuring the minimum
time gap between any two selected resources in case that PSFCH is
configured for this pool of resources and that a retransmission resource
can be indicated by the time resource assignment of a prior SCI
according to clause 8.3.1.1 of TS 38.212 [9].</p>
<p>4&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and when the UE does not have own
sensing result as specified in clause 8.1.4 of TS 38.214 [7] and if a
preferred resource set is received from a UE; and</p>
<p>4&gt; if there are available resources left in the received preferred
resource set for more transmission opportunities:</p>
<p>5&gt; randomly select the time and frequency resources for one or
more transmission opportunities from the available resources belonging
to the received preferred resource set for a MAC PDU to be transmitted
to the UE providing the preferred resource set, according to the amount
of selected frequency resources, the selected number of HARQ
retransmissions and the remaining PDB of SL data available in the
logical channel(s) allowed on the carrier, and/or the latency
requirement of the triggered SL-CSI reporting by ensuring the minimum
time gap between any two selected resources in case that PSFCH is
configured for this pool of resources and that a retransmission resource
can be indicated by the time resource assignment of a prior SCI
according to clause 8.3.1.1 of TS 38.212 [9].</p>
<p>4&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and when the UE determines the
resources for Sidelink Inter-UE Coordination Information transmission
upon explicit request from a UE:</p>
<p>5&gt; randomly select the time and frequency resources for one
transmission opportunity from the resources indicated by the physical
layer as specified in clause 8.1.4 of TS 38.214 [7], according to the
amount of selected frequency resources, the remaining PDB of SL data
available in the logical channel(s) allowed on the carrier, and/or the
latency requirement of the triggered SL-CSI reporting and the latency
requirement of the Sidelink Inter-UE Coordination Information
transmission.</p>
<p>4&gt; consider a transmission opportunity which comes first in time
as the initial transmission opportunity and other transmission
opportunities as the retransmission opportunities;</p>
<p>4&gt; consider all the transmission opportunities as the selected
sidelink grant.</p>
<p>3&gt; else:</p>
<p>4&gt; consider the set as the selected sidelink grant.</p>
<p>3&gt; use the selected sidelink grant to determine PSCCH duration(s)
and PSSCH duration(s) according to TS 38.214 [7].</p>
<p>NOTE 3A1: If <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC and if multiple preferred resource
sets are received from the same UE, it is up to UE implementation to use
one or multiple of them in its resource (re)selection.</p>
<p>NOTE 3B1: If retransmission resource(s) cannot be selected by
ensuring that the resource(s) can be indicated by the time resource
assignment of a prior SCI, how to select the time and frequency
resources for one or more transmission opportunities from the available
resources is left for UE implementation by ensuring the minimum time gap
between any two selected ‎resources in case that PSFCH is configured for
this pool of ‎resources.</p>
<p>NOTE 3B2: When the UE receives both a single preferred resource set
and a single non-preferred resource set from the same peer UE or
different peer UEs, when the UE has own sensing results, it is up to the
UE implementation to use the preferred resource set in its resource
(re)selection for transmissions to the peer UE providing the preferred
resource set.</p>
<p>NOTE 3B3: The UE is not required to use any resource from the
preferred resource set in its resource (re-)selection if that resource
is earlier than (<span
class="math inline">\(T_{proc,0}^{SL}\)</span>+<span
class="math inline">\(T_{proc,1}^{SL}\)</span>+<span
class="math inline">\(T_{proc,2}^{SL}\)</span>) after the resource of
Inter-UE Coordination Information transmission, where <span
class="math inline">\(T_{proc,2}^{SL}\)</span> is equal to (<span
class="math inline">\(T_{proc,0}^{SL}\)</span>+<span
class="math inline">\(T_{proc,1}^{SL}\)</span>) when only MAC CE is used
for inter-UE Coordination Information transmission, or <span
class="math inline">\(T_{proc,2}^{SL}\)</span> is equal to <span
class="math inline">\(T_{proc,0}^{SL}\)</span> when MAC CE and SCI
format 2-C are both used for Inter-UE Coordination Information
transmission. The case when <span
class="math inline">\(T_{proc,2}^{SL}\)</span> is equal to <span
class="math inline">\(T_{proc,0}^{SL}\)</span> is assuming that SCI
format 2-C is received. <span class="math inline">\({\
T}_{proc,0}^{SL}\)</span> and <span
class="math inline">\(T_{proc,1}^{SL}\)</span> are specified in clause
8.1.4 of TS 38.214 [7].</p>
<p>NOTE 3B4: For Inter-UE Coordination Information triggered by an
explicit Inter-UE Coordination Request in Scheme 1, whether or not to
transmit the Inter-UE Coordination Information upon the Inter-UE
Coordination Request reception is determined by UE implementation
subject to Release-16 procedure of UL/SL prioritization, LTE SL/NR SL
prioritization, and congestion control.</p>
<p>NOTE 3B5<strong>:</strong> If configured by RRC,
<em>sl-IUC-Explicit</em> set to <em>enabled</em> and an SL-IUC request
is received for the Source Layer-2 ID and Destination Layer-2 ID pair of
a unicast, MAC layer indicates to physical layer the resource selection
window, resource set type (i.e., preferred resource set), L1 priority,
the number of sub-channels to be used for the PSSCH/PSCCH transmission
and the resource reservation period for preferred resource set. If
configured by RRC, <em>sl-IUC-Explicit</em> set to <em>enabled</em> and
an SL-IUC request is received for the Source Layer-2 ID and Destination
Layer-2 ID pair of a unicast, MAC layer indicates to physical layer
resource set type (i.e., non-preferred resource set) and the resource
selection window for non-preferred resource set.</p>
<p>NOTE 3B6<strong>:</strong> If either <em>sl-IUC-Explicit</em> or
<em>sl-IUC-Condition</em> is configured as <em>enabled</em>, UE
considers the reception of preferred and non-preferred resource is
enabled.</p>
<p>NOTE 3B7: When <em>sl-TriggerConditionCoordInfo</em> is set to value
0, for groupcast or broadcast of Inter-UE Coordination Information
triggered by a condition in Scheme 1, which Destination Layer-2 ID (and
the corresponding cast-type) a UE selects among Destination Layer-2 IDs
that are already used or interested in NR sidelink transmission is up to
the UE implementation.</p>
<p>1&gt; if a selected sidelink grant is available for retransmission(s)
of a MAC PDU which has been positively acknowledged as specified in
clause 5.22.1.3.1a:</p>
<p>2&gt; clear the PSCCH duration(s) and PSSCH duration(s) corresponding
to retransmission(s) of the MAC PDU from the selected sidelink
grant.</p>
<p>NOTE 3C: How the MAC entity determines the remaining PDB of SL data
is left to UE implementation.</p>
<p>For a selected sidelink grant, the minimum time gap between any two
selected resources comprises:</p>
<p>- a time gap between the end of the last symbol of a PSSCH
transmission of the first resource and the start of the first symbol of
the corresponding PSFCH reception determined by
<em>sl-MinTimeGapPSFCH</em> and <em>sl-PSFCH-Period</em> for the pool of
resources; and</p>
<p>- a time required for PSFCH reception and processing plus sidelink
retransmission preparation including multiplexing of necessary physical
channels and any TX-RX/RX-TX switching time.</p>
<p>NOTE 4: How to determine the time required for PSFCH reception and
processing plus sidelink retransmission preparation is left to UE
implementation.</p>
<p>The MAC entity shall for each PSSCH duration:</p>
<p>1&gt; for each sidelink grant occurring in this PSSCH duration:</p>
<p>2&gt; select a MCS table allowed in the pool of resource which is
associated with the sidelink grant;</p>
<p>NOTE 4a: MCS table selection is up to UE implementation if more than
one MCS table is configured.</p>
<p>2&gt; if the MAC entity has been configured with Sidelink resource
allocation mode 1:</p>
<p>3&gt; select a MCS which is, if configured, within the range that is
configured by RRC between <em>sl-MinMCS-PSSCH</em> and
<em>sl-MaxMCS-PSSCH</em> associated with the selected MCS table included
in <em>sl-ConfigDedicatedNR</em>;</p>
<p>3&gt; set the resource reservation interval to 0ms.</p>
<p>2&gt; else:</p>
<p>3&gt; select a MCS which is, if configured, within the range, if
configured by RRC, between <em>sl-MinMCS-PSSCH</em> and
<em>sl-MaxMCS-PSSCH</em> associated with the selected MCS table included
in <em>sl-PSSCH-TxConfigList</em> and, if configured by RRC, overlapped
between <em>sl-MinMCS-PSSCH</em> and <em>sl-MaxMCS-PSSCH</em> associated
with the selected MCS table indicated in
<em>sl-CBR-PriorityTxConfigList</em> for the highest priority of the
sidelink logical channel(s) in the MAC PDU and the CBR measured by lower
layers according to clause 5.1.27 of TS 38.215 [24] if CBR measurement
results are available or the corresponding
<em>sl-defaultTxConfigIndex</em> configured by RRC if CBR measurement
results are not available or the corresponding
<em>sl-DefaultCBR-PartialSensing</em> configured by RRC if partial
sensing is selected and CBR measurement results are not available, or
the corresponding <em>sl-DefaultCBR-RandomSelection</em> configured by
RRC if random selection is selected and CBR measurement results are not
available in case the <em>sl-TxPoolExceptional</em> is not used;</p>
<p>3&gt; if the MAC entity decides not to use the selected sidelink
grant for the next PSSCH duration corresponding to an initial
transmission opportunity:</p>
<p>4&gt; set the resource reservation interval to 0ms.</p>
<p>3&gt; else:</p>
<p>4&gt; set the resource reservation interval to the selected
value.</p>
<p>NOTE 5: MCS selection is up to UE implementation if the MCS or the
corresponding range is not configured by RRC.</p>
<p>2&gt; if the configured sidelink grant has been activated and this
PSSCH duration corresponds to the first PSSCH transmission opportunity
within this <em>sl-PeriodCG</em> of the configured sidelink grant:</p>
<p>3&gt; set the HARQ Process ID to the HARQ Process ID associated with
this PSSCH duration and, if available, all subsequent PSSCH duration(s)
occuring in this <em>sl-PeriodCG</em> for the configured sidelink
grant;</p>
<p>3&gt; determine that this PSSCH duration is used for initial
transmission;</p>
<p>3&gt; flush the HARQ buffer of Sidelink process associated with the
HARQ Process ID.</p>
<p>2&gt; deliver the sidelink grant, the selected MCS, and the
associated HARQ information to the Sidelink HARQ Entity for this PSSCH
duration.</p>
<p>For configured sidelink grants, the HARQ Process ID associated with
the first slot of an SL transmission is derived from the following
equation:</p>
<p>HARQ Process ID = [floor(CURRENT_slot / <em>PeriodicitySL</em>)]
modulo <em>sl-NrOfHARQ-Processes</em><br />
+ <em>sl-HARQ-ProcID-offset</em></p>
<p>where CURRENT_slot refers to current logical slot in the associated
resource pool, and <em>PeriodicitySL</em> is defined in clause
5.8.3.</p>
<h4 id="tx-resource-re-selection-check">5.22.1.2 TX resource
(re-)selection check</h4>
<p>If the TX resource (re-)selection check procedure is triggered on the
selected pool of resources for a Sidelink process according to clause
5.22.1.1, the MAC entity shall for the Sidelink process:</p>
<p>1&gt; if PSCCH duration(s) and 2<sup>nd</sup> stage SCI on PSSCH for
all transmissions of a MAC PDU of any selected sidelink grant(s) are not
in SL DRX Active time as specified in clause 5.28.3 of the destination
that has data to be sent; or</p>
<p>1&gt; if <em>SL_RESOURCE_RESELECTION_COUNTER</em> = 0 and when
<em>SL_RESOURCE_RESELECTION_COUNTER</em> was equal to 1 the MAC entity
randomly selected, with equal probability, a value in the interval [0,
1] which is above the probability configured by RRC in
<em>sl-ProbResourceKeep</em>; or</p>
<p>1&gt; if the pool of resources is configured or reconfigured by RRC;
or</p>
<p>1&gt; if there is no selected sidelink grant on the selected pool of
resources; or</p>
<p>1&gt; if neither transmission nor retransmission has been performed
by the MAC entity on any resource indicated in the selected sidelink
grant during the last second; or</p>
<p>1&gt; if <em>sl-ReselectAfter</em> is configured and the number of
consecutive unused transmission opportunities on resources indicated in
the selected sidelink grant, which is incremented by 1 when none of the
resources of the selected sidelink grant within a resource reservation
interval is used, is equal to <em>sl-ReselectAfter</em>; or</p>
<p>1&gt; if the selected sidelink grant cannot accommodate a RLC SDU by
using the maximum allowed MCS configured by RRC in
<em>sl-MaxMCS-PSSCH</em> associated with the selected MCS table and the
UE selects not to segment the RLC SDU; or</p>
<p>NOTE 1: If the selected sidelink grant cannot accommodate the RLC
SDU, it is left for UE implementation whether to perform segmentation or
sidelink resource reselection.</p>
<p>1&gt; if transmission(s) with the selected sidelink grant cannot
fulfil the remaining PDB of the data in a logical channel, and the MAC
entity selects not to perform transmission(s) corresponding to a single
MAC PDU:</p>
<p>NOTE 2: If the remaining PDB is not met, it is left for UE
implementation whether to perform transmission(s) corresponding to
single MAC PDU or sidelink resource reselection.</p>
<p>NOTE 3: It is left for UE implementation whether to trigger the TX
resource (re-)selection due to the latency requirement of the MAC CEs
triggered according to clause 5.22.1.7 and clause 5.22.1.10.1.</p>
<p>2&gt; clear the selected sidelink grant associated to the Sidelink
process, if available;</p>
<p>2&gt; trigger the TX resource (re-)selection.</p>
<p>NOTE 4: Void.</p>
<p>NOTE 5: Void.</p>
<h4 id="a-re-evaluation-and-pre-emption">5.22.1.2a Re-evaluation and
Pre-emption</h4>
<p>A resource(s) of the selected sidelink grant for a MAC PDU to
transmit from multiplexing and assembly entity is re-evaluated by
physical layer at <em>T<sub>3</sub></em> before the slot where the SCI
indicating the resource(s) is signalled at first time as specified in
clause 8.1.4 of TS 38.214 [7].</p>
<p>A resource(s) of the selected sidelink grant which has been indicated
by a prior SCI for a MAC PDU to transmit from multiplexing and assembly
entity could be checked for pre-emption by physical layer at
<em>T<sub>3</sub></em> before the slot where the resource(s) is located
as specified in clause 8.1.4 of TS 38.214 [7].</p>
<p>NOTE 1: It is up to UE implementation to re-evaluate or pre-empt
before 'm – <em>T<sub>3</sub></em>' or after 'm –
<em>T<sub>3</sub></em>' but before 'm'. For re-evaluation, m is the slot
where the SCI indicating the resource(s) is signalled at first time as
specified in clause 8.1.4 of TS 38.214. For pre-emption, m is the slot
where the resource(s) is located as specified in clause 8.1.4 of TS
38.214.</p>
<p>If the MAC entity has been configured with Sidelink resource
allocation mode 2 to transmit using pool(s) of resources in a carrier as
indicated in TS 38.331 [5] or TS 36.331 [21] based on sensing or random
selection the MAC entity shall for each Sidelink process:</p>
<p>1&gt; if a resource(s) of the selected sidelink grant which has not
been identified by a prior SCI is indicated for re-evaluation by the
physical layer as specified in clause 8.1.4 of TS 38.214 [7];</p>
<p>2&gt; remove the resource(s) from the selected sidelink grant
associated to the Sidelink process;</p>
<p>2&gt; randomly select the time and frequency resource from the
resources indicated by the physical layer as specified in clause 8.1.4
of TS 38.214 [7] for either the removed resource or the dropped
resource, according to the amount of selected frequency resources, the
selected number of HARQ retransmissions and the remaining PDB of either
SL data available in the logical channel(s) by ensuring the minimum time
gap between any two selected resources of the selected sidelink grant in
case that PSFCH is configured for this pool of resources, and that a
resource can be indicated by the time resource assignment of an SCI for
a retransmission according to clause 8.3.1.1 of TS 38.212 [9];</p>
<p>2&gt; replace the removed or dropped resource(s) by the selected
resource(s) for the selected sidelink grant.</p>
<p>1&gt; if any resource(s) of the selected sidelink grant which has
been indicated by a prior SCI is indicated for pre-emption by the
physical layer as specified in clause 8.1.4 of TS 38.214 [7]:</p>
<p>2&gt; remove the resource(s) from the selected sidelink grant
associated to the Sidelink process;</p>
<p>2&gt; if one or multiple SL DRX is configured:</p>
<p>3&gt; randomly select the time and frequency resource from the
resources later than the resources for either the removed resource or
the dropped resource indicated by a prior SCI, from the resource
indicated by the physical layer as specified in clause 8.1.4 of TS
38.214 [7] which occur within the SL DRX active time as specified in
clause 5.28.3 of the destination UE selected for indicating to the
physical layer the SL DRX active time above, according to the amount of
selected frequency resources, the selected number of HARQ
retransmissions and the remaining PDB of either SL data available in the
logical channel(s) by ensuring the minimum time gap between any two
selected resources of the selected sidelink grant in case that PSFCH is
configured for this pool of resources, and that a resource can be
indicated by the time resource assignment of an SCI for a retransmission
according to clause 8.3.1.1 of TS 38.212 [9].</p>
<p>2&gt; else:</p>
<p>3&gt; randomly select the time and frequency resource from the
resources indicated by the physical layer as specified in clause 8.1.4
of TS 38.214 [7] for either the removed resource or the dropped
resource, according to the amount of selected frequency resources, the
selected number of HARQ retransmissions and the remaining PDB of either
SL data available in the logical channel(s) by ensuring the minimum time
gap between any two selected resources of the selected sidelink grant in
case that PSFCH is configured for this pool of resources, and that a
resource can be indicated by the time resource assignment of an SCI for
a retransmission according to clause 8.3.1.1 of TS 38.212 [9].</p>
<p>NOTE 2: If retransmission resource(s) cannot be selected by ensuring
that the resource(s) can be indicated by the time resource assignment of
a prior SCI, how to select the time and frequency resources for one or
more transmission opportunities from the available resources is left for
UE implementation by ensuring the minimum time gap between any two
selected ‎resources in case that PSFCH is configured for this pool of
‎resources.</p>
<p>2&gt; replace the removed or dropped resource(s) by the selected
resource(s) for the selected sidelink grant.</p>
<p>NOTE 3: It is left for UE implementation to reselect any pre-selected
but not reserved resource(s) other than the resource(s) indicated for
pre-emption or re-evaluation by the physical layer during reselection
triggered by re-evaluation or pre-emption indicated by the physical
layer.</p>
<p>NOTE 4: It is up to UE implementation whether to set the resource
reservation interval in the re-selected resource to replace pre-empted
resource.</p>
<p>NOTE 5: It is up to UE implementation whether to trigger resource
reselection due to de-prioritization as specified in clause 16.2.4 of TS
38.213 [6], clause 5.14.1.2.2 of TS 36.321 [22] and clause
5.22.1.3.1a.</p>
<p>NOTE 6: For the selected sidelink grant corresponds to transmissions
of multiple MAC PDU, it is up to UE implementation whether to apply
re-evaluation check to the resources in non-initial reservation period
that have been signalled neither in the immediate last nor in the
current period.</p>
<h4
id="b-re-selection-for-using-a-received-resource-conflict-indication">5.22.1.2b
Re-selection for using a received resource conflict indication</h4>
<p>If the MAC entity has been configured with Sidelink resource
allocation mode 2 to transmit using pool(s) of resources in a carrier as
indicated in TS 38.331 [5] based on full sensing, or partial sensing or
random selection or any combination(s), the MAC entity shall for each
Sidelink process:</p>
<p>1&gt; if <em>sl-interUECoordinationScheme2</em> enabling
reception/transmission of a resource conflict indication is configured
by RRC; and</p>
<p>1&gt; if the next resource of the selected sidelink grant which has
been indicated by a prior SCI is overlapped with conflict resource(s)
indicated by the physical layer as specified in clause 16.3.1 of TS
38.213 [6]:</p>
<p>2&gt; remove the resource from the selected sidelink grant associated
to the Sidelink process;</p>
<p>2&gt; randomly select the time and frequency resource from the
resources indicated by the physical layer as specified in clause 8.1.4
of TS 38.214 [7] excluding the conflict resource(s) for the removed
resource, according to the amount of selected frequency resources, the
selected number of HARQ retransmissions and the remaining PDB of either
SL data available in the logical channel(s) by ensuring the minimum time
gap between any two selected resources of the selected sidelink grant in
case that PSFCH is configured for this pool of resources, and that a
resource can be indicated by the time resource assignment of an SCI for
a retransmission according to clause 8.3.1.1 of TS 38.212 [9];</p>
<p>NOTE 1: If retransmission resource cannot be selected by ensuring
that the resource can be indicated by the time resource assignment of a
prior SCI, how to select the time and frequency resource for more
transmission opportunities from the available resources is left for UE
implementation by ensuring the minimum time gap between any two selected
‎resources in case that PSFCH is configured for this pool of
‎resources.</p>
<p>2&gt; replace the removed resource by the selected resource for the
selected sidelink grant.</p>
<p>NOTE 2: It is left for UE implementation to reselect any pre-selected
but not reserved resource(s) other than the resource overlapping with
the conflict resource(s) indicated by the physical layer during
reselection triggered by the conflict resource(s) indicated by the
physical layer.</p>
<p>NOTE 3: It is up to UE implementation whether and how to set the
resource reservation interval in the re-selected resource to replace the
resource overlapping with the conflict resource(s) indicated by the
physical layer.</p>
<h4 id="sidelink-harq-operation">5.22.1.3 Sidelink HARQ operation</h4>
<h5 id="sidelink-harq-entity">5.22.1.3.1 Sidelink HARQ Entity</h5>
<p>The MAC entity includes at most one Sidelink HARQ entity for
transmission on SL-SCH, which maintains a number of parallel Sidelink
processes.</p>
<p>The maximum number of transmitting Sidelink processes associated with
the Sidelink HARQ Entity is 16. A sidelink process may be configured for
transmissions of multiple MAC PDUs. For transmissions of multiple MAC
PDUs with Sidelink resource allocation mode 2, the maximum number of
transmitting Sidelink processes associated with the Sidelink HARQ Entity
is 4.</p>
<p>A delivered sidelink grant and its associated Sidelink transmission
information are associated with a Sidelink process. Each Sidelink
process supports one TB.</p>
<p>For each sidelink grant, the Sidelink HARQ Entity shall:</p>
<p>1&gt; if the MAC entity determines that the sidelink grant is used
for initial transmission as specified in clause 5.22.1.1; or</p>
<p>1&gt; if the sidelink grant is a configured sidelink grant and no MAC
PDU has been obtained in an <em>sl-PeriodCG</em> of the configured
sidelink grant; or</p>
<p>1&gt; if the sidelink grant is a dynamic sidelink grant or selected
sidelink grant and no MAC PDU has been obtained in the previous sidelink
grant when PSCCH duration(s) and 2<sup>nd</sup> stage SCI on PSSCH of
the previous sidelink grant is not in SL DRX Active time as specified in
clause 5.28.3 of any destination that has data to be sent:</p>
<p>NOTE 1: Void.</p>
<p>2&gt; (re-)associate a Sidelink process to this grant, and for the
associated Sidelink process:</p>
<p>2&gt; if all PSCCH duration(s) and PSSCH duration(s) for initial
transmission of a MAC PDU of the dynamic sidelink grant or the
configured sidelink grant is not in SL DRX Active time as specified in
clause 5.28.3 of the destination that has data to be sent:</p>
<p>3&gt; ignore the sidelink grant.</p>
<p>NOTE 1A: The Sidelink HARQ Entity will associate the selected
sidelink grant to the Sidelink process determined by the MAC entity.</p>
<p>2&gt; else:</p>
<p>3&gt; obtain the MAC PDU to transmit from the Multiplexing and
assembly entity, if any;</p>
<p>3&gt; if a MAC PDU to transmit has been obtained:</p>
<p>4&gt; if a HARQ Process ID has been set for the sidelink grant:</p>
<p>5&gt; (re-)associate the HARQ Process ID corresponding to the
sidelink grant to the Sidelink process.</p>
<p>NOTE 1a: There is one-to-one mapping between a HARQ Process ID and a
Sidelink process in the MAC entity configured with Sidelink resource
allocation mode 1.</p>
<p>4&gt; determines Sidelink transmission information of the TB for the
source and destination pair of the MAC PDU as follows:</p>
<p>5&gt; set the Source Layer-1 ID to the 8 LSB of the Source Layer-2 ID
of the MAC PDU;</p>
<p>5&gt; set the Destination Layer-1 ID to the 16 LSB of the Destination
Layer-2 ID of the MAC PDU;</p>
<p>5&gt; (re-)associate the Sidelink process to a Sidelink process
ID;</p>
<p>NOTE 1b: How UE determine Sidelink process ID in SCI is left to UE
implementation for NR sidelink.</p>
<p>5&gt; consider the NDI to have been toggled compared to the value of
the previous transmission corresponding to the Sidelink identification
information and the Sidelink process ID of the MAC PDU and set the NDI
to the toggled value;</p>
<p>NOTE 2: The initial value of the NDI set to the very first
transmission for the associated Sidelink process is left to UE
implementation.</p>
<p>NOTE 3: Void.</p>
<p>5&gt; if the MAC PDU is for NR sidelink discovery:</p>
<p>6&gt; set the cast type indicator to broadcast.</p>
<p>5&gt; else:</p>
<p>6&gt; if the MAC PDU includes only Sidelink MAC CE(s):</p>
<p>7&gt; if the MAC PDU includes only Sidelink Inter-UE Coordination
Information MAC CE indicating non-preferred resource set and triggered
by a condition other than the explicit request:</p>
<p>8&gt; set the cast type indicator to one of broadcast, groupcast and
unicast.</p>
<p>7&gt; else:</p>
<p>8&gt; set the cast type indicator to unicast.</p>
<p>6&gt; else:</p>
<p>7&gt; set the cast type indicator to one of broadcast, groupcast and
unicast as indicated by upper layers.</p>
<p>5&gt; if HARQ feedback has been enabled for the MAC PDU according to
clause 5.22.1.4.2;</p>
<p>6&gt; set the HARQ feedback enabled/disabled indicator to
<em>enabled</em>.</p>
<p>5&gt; else:</p>
<p>6&gt; set the HARQ feedback enabled/disabled indicator to
<em>disabled</em>.</p>
<p>5&gt; set the priority to the value of the highest priority of the
logical channel(s), if any, and MAC CE(s), if included, in the MAC
PDU;</p>
<p>NOTE 3A: When determining Sidelink transmission information, the
priority of the Sidelink Inter-UE Coordination Information MAC CE is the
value configured in RRC parameters
<em>sl-PriorityCoordInfoCondition</em> when triggered by a condition, or
<em>sl-PriorityCoordInfoExplicit</em> when triggered by an explicit
request. When determining Sidelink transmission information, the
priority of the Sidelink Inter-UE Coordination Request MAC CE is the
value configured in RRC parameter <em>sl-PriorityRequest</em>. When
determining Sidelink transmission information, the priority of the
Sidelink Inter-UE Coordination Information MAC CE is the value indicated
in Priority field in the Sidelink Inter-UE Coordination Request MAC CE
provided by the UE when triggered by an explicit request, if
<em>sl-PriorityCoordInfoExplicit-r17</em> is not configured. When
determining Sidelink transmission information for performing sensing and
candidate resource selections in PHY, the priority value of the Sidelink
Inter-UE Coordination Information MAC CE triggered under a condition is
up to UE implementation, if <em>sl-PriorityCoordInfoCondition-r17</em>
is not configured. When determining Sidelink transmission information
for performing sensing and candidate resource selections in PHY, the
priority value of Sidelink Inter-UE Coordination Request MAC CE is the
same as that of a TB to be transmitted by the UE, if
<em>sl-PriorityRequest-r17</em> is not configured.</p>
<p>5&gt; if HARQ feedback is enabled for groupcast:</p>
<p>6&gt; if both a group size and a member ID are provided by upper
layers and the group size is not greater than the number of candidate
PSFCH resources associated with this sidelink grant:</p>
<p>7&gt; select either positive-negative acknowledgement or
negative-only acknowledgement.</p>
<p>NOTE 4: Selection of positive-negative acknowledgement or
negative-only acknowledgement is up to UE implementation.</p>
<p>6&gt; else:</p>
<p>7&gt; select negative-only acknowledgement.</p>
<p>6&gt; if negative-only acknowledgement is selected, UE's location
information is available, and <em>sl-TransRange</em> has been configured
for a logical channel in the MAC PDU, and <em>sl-ZoneConfig</em> is
configured as specified in TS 38.331 [5]:</p>
<p>7&gt; set the communication range requirement to the value of the
longest communication range of the logical channel(s) in the MAC
PDU;</p>
<p>7&gt; determine the value of <em>sl-ZoneLength</em> corresponding to
the communication range requirement and set Zone_id to the value of
Zone_id calculated using the determined value of <em>sl-ZoneLength</em>
as specified in TS 38.331 [5].</p>
<p>5&gt; set the Redundancy version to the selected value.</p>
<p>4&gt; deliver the MAC PDU, the sidelink grant and the Sidelink
transmission information of the TB to the associated Sidelink
process;</p>
<p>4&gt; instruct the associated Sidelink process to trigger a new
transmission.</p>
<p>3&gt; else:</p>
<p>4&gt; flush the HARQ buffer of the associated Sidelink process.</p>
<p>1&gt; else (i.e. retransmission):</p>
<p>2&gt; if the HARQ Process ID corresponding to the sidelink grant
received on PDCCH, the configured sidelink grant or the selected
sidelink grant is associated to a Sidelink process of which HARQ buffer
is empty; or</p>
<p>2&gt; if the HARQ Process ID corresponding to the sidelink grant
received on PDCCH is not associated to any Sidelink process; or</p>
<p>2&gt; if PSCCH duration(s) and PSSCH duration(s) for one or more
retransmissions of a MAC PDU of the dynamic sidelink grant or the
configured sidelink grant is not in SL DRX Active time as specified in
clause 5.28.3 of the destination that has data to be sent:</p>
<p>3&gt; ignore the sidelink grant.</p>
<p>2&gt; else:</p>
<p>3&gt; identify the Sidelink process associated with this grant, and
for the associated Sidelink process:</p>
<p>4&gt; deliver the sidelink grant of the MAC PDU to the associated
Sidelink process;</p>
<p>4&gt; instruct the associated Sidelink process to trigger a
retransmission.</p>
<h5 id="a-sidelink-process">5.22.1.3.1a Sidelink process</h5>
<p>The Sidelink process is associated with a HARQ buffer.</p>
<p>New transmissions and retransmissions are performed on the resource
indicated in the sidelink grant as specified in clause 5.22.1.1 and with
the MCS selected as specified in clause 8.1.3.1 of TS 38.214 [7] and
clause 5.22.1.1.</p>
<p>If the Sidelink process is configured to perform transmissions of
multiple MAC PDUs with Sidelink resource allocation mode 2, the process
maintains a counter <em>SL_RESOURCE_RESELECTION_COUNTER</em>. For other
configurations of the Sidelink process, this counter is not
available.</p>
<p>Priority of a MAC PDU is determined by the highest priority of the
logical channel(s) or MAC CE(s) in the MAC PDU.</p>
<p>If the Sidelink HARQ Entity requests a new transmission, the Sidelink
process shall:</p>
<p>1&gt; store the MAC PDU in the associated HARQ buffer;</p>
<p>1&gt; store the sidelink grant received from the Sidelink HARQ
Entity;</p>
<p>1&gt; generate a transmission as described below.</p>
<p>If the Sidelink HARQ Entity requests a retransmission, the Sidelink
process shall:</p>
<p>1&gt; store the sidelink grant received from the Sidelink HARQ
Entity;</p>
<p>1&gt; generate a transmission as described below.</p>
<p>To generate a transmission, the Sidelink process shall:</p>
<p>1&gt; if there is no uplink transmission; or</p>
<p>1&gt; if the MAC entity is able to simultaneously perform uplink
transmission(s) and sidelink transmission at the time of the
transmission; or</p>
<p>1&gt; if the other MAC entity and the MAC entity are able to
simultaneously perform uplink transmission(s) and sidelink transmission
at the time of the transmission respectively; or</p>
<p>1&gt; if there is a MAC PDU to be transmitted for this duration in
uplink, except a MAC PDU obtained from the Msg3 buffer, the MSGA buffer,
or prioritized as specified in clause 5.4.2.2, and the sidelink
transmission is prioritized over uplink transmission:</p>
<p>2&gt; instruct the physical layer to transmit SCI according to the
stored sidelink grant with the associated Sidelink transmission
information;</p>
<p>2&gt; instruct the physical layer to generate a transmission
according to the stored sidelink grant;</p>
<p>2&gt; if HARQ feedback has been enabled for the MAC PDU according to
clause 5.22.1.4.2:</p>
<p>3&gt; instruct the physical layer to monitor PSFCH for the
transmission and perform PSFCH reception as specified in clause
5.22.1.3.2.</p>
<p>2&gt; if <em>sl-PUCCH-Config</em> is configured by RRC for the stored
sidelink grant:</p>
<p>3&gt; determine transmission of an acknowledgement on the PUCCH as
specified in clause 5.22.1.3.2.</p>
<p>1&gt; if this transmission corresponds to the last transmission of
the MAC PDU:</p>
<p>2&gt; decrement <em>SL_RESOURCE_RESELECTION_COUNTER</em> by 1, if
available.</p>
<p>NOTE 1: If the number of HARQ retransmissions selected by the MAC
entity has been reached, or if a positive acknowledgement to a
transmission of the MAC PDU has been received, or if a negative-only
acknowledgement was enabled in the SCI and no negative acknowledgement
was received for the transmission of the MAC PDU, the MAC entity
determines this transmission corresponds to the last transmission of the
MAC PDU for Sidelink resource allocation mode 2. How to determine the
last transmission in other cases is up to UE implementation.</p>
<p>1&gt; if <em>sl-MaxTransNum</em> corresponding to the highest
priority of the logical channel(s) in the MAC PDU has been configured in
<em>sl-CG-MaxTransNumList</em> for the sidelink grant by RRC and the
number of transmissions of the MAC PDU has been reached to
<em>sl-MaxTransNum</em>; or</p>
<p>1&gt; if a positive acknowledgement to this transmission of the MAC
PDU was received according to clause 5.22.1.3.2; or</p>
<p>1&gt; if negative-only acknowledgement was enabled in the SCI and no
negative acknowledgement was received for this transmission of the MAC
PDU according to clause 5.22.1.3.2:</p>
<p>2&gt; flush the HARQ buffer of the associated Sidelink process.</p>
<p>The transmission of the MAC PDU is prioritized over uplink
transmission(s) of the MAC entity or the other MAC entity if the
following conditions are met:</p>
<p>1&gt; if the MAC entity is not able to perform this sidelink
transmission simultaneously with all uplink transmission(s) at the time
of the transmission, and</p>
<p>1&gt; if none of the uplink transmission(s) is prioritized by upper
layer according to TS 23.287 [19], and</p>
<p>1&gt; if none of the NR uplink MAC PDU(s) includes any MAC CE
prioritized as described in clause 5.4.3.1.3, and</p>
<p>1&gt; if <em>ul-PrioritizationThres</em> is configured and if the
value of the highest priority of logical channel(s) of all the NR uplink
transmission(s) is not lower than <em>ul-PrioritizationThres</em>,
and</p>
<p>1&gt; if <em>sl-PrioritizationThres</em> is configured and if the
value of the highest priority of logical channel(s) or MAC CE(s) in the
MAC PDU is lower than <em>sl-PrioritizationThres</em>.</p>
<p>NOTE 2: If the MAC entity is not able to perform this sidelink
transmission simultaneously with all uplink transmissions as specified
in clause 5.4.2.2 of TS 36.321 [22] at the time of the transmission, and
prioritization-related information is not available prior to the time of
this sidelink transmission due to processing time restriction, it is up
to UE implementation whether this sidelink transmission is
performed.</p>
<h5 id="psfch-reception">5.22.1.3.2 PSFCH reception</h5>
<p>The MAC entity shall for each PSSCH transmission:</p>
<p>1&gt; if an acknowledgement corresponding to the PSSCH transmission
in clause 5.22.1.3.1a is obtained from the physical layer:</p>
<p>2&gt; deliver the acknowledgement to the corresponding Sidelink HARQ
entity for the Sidelink process;</p>
<p>1&gt; else:</p>
<p>2&gt; deliver a negative acknowledgement to the corresponding
Sidelink HARQ entity for the Sidelink process;</p>
<p>1&gt; if the PSSCH transmission occurs for a pair of Source Layer-2
ID and Destination Layer-2 ID corresponding to a PC5-RRC connection
which has been established by upper layers:</p>
<p>2&gt; perform the HARQ-Based Sidelink RLF Detection procedure as
specified in clause 5.22.1.3.3.</p>
<p>If <em>sl-PUCCH-Config</em> is configured by RRC, the MAC entity
shall for a PUCCH transmission occasion:</p>
<p>1&gt; if the <em>timeAlignmentTimer</em>, associated with the TAG
containing the Serving Cell on which the HARQ feedback is to be
transmitted, is stopped or expired:</p>
<p>2&gt; not instruct the physical layer to generate acknowledgement(s)
of the data in this TB.</p>
<p>1&gt; else if all PSCCH duration(s) and PSSCH duration(s) for initial
transmission of a MAC PDU of the dynamic sidelink grant or the
configured sidelink grant is not in SL DRX Active time as specified in
clause 5.28.3 of the destination that has data to be sent and the
sidelink grant is ignored according to clause 5.22.1.3.1:</p>
<p>2&gt; instruct the physical layer to signal a positive
acknowledgement corresponding to the transmission on the PUCCH according
to clause 16.5 of TS 38.213 [6].</p>
<p>1&gt; else if a MAC PDU has been obtained for a sidelink grant
associated to the PUCCH transmission occasion in clause 5.22.1.3.1, the
MAC entity shall:</p>
<p>2&gt; if the most recent transmission of the MAC PDU was not
prioritized as specified in clause 5.22.1.3.1a:</p>
<p>3&gt; instruct the physical layer to signal a negative
acknowledgement on the PUCCH according to clause 16.5 of TS 38.213
[6].</p>
<p>2&gt; else if HARQ feedback has been disabled for the MAC PDU and
next retransmission(s) of the MAC PDU is not required:</p>
<p>3&gt; instruct the physical layer to signal a positive
acknowledgement corresponding to the transmission on the PUCCH according
to clause 16.5 of TS 38.213 [6].</p>
<p>2&gt; else if HARQ feedback has been disabled for the MAC PDU, and no
sidelink grant is available for next retransmission(s) of the MAC PDU
(including immediately after all PSSCH duration(s) in an
<em>sl-PeriodCG</em> for the sidelink grant, the number of transmissions
of the MAC PDU has not reached <em>sl-MaxTransNum</em> corresponding to
the highest priority of the logical channel(s) in the MAC PDU, if
configured in <em>sl-CG-MaxTransNumList</em> for the sidelink grant by
RRC), if any; or</p>
<p>2&gt; else if PSCCH duration(s) and PSSCH duration(s) for one or more
retransmissions of a MAC PDU of the dynamic sidelink grant or the
configured sidelink grant is not in SL DRX Active time as specified in
clause 5.28.3 of the destination that has data to be sent:</p>
<p>3&gt; instruct the physical layer to signal a negative
acknowledgement corresponding to the transmission on the PUCCH according
to clause 16.5 of TS 38.213 [6].</p>
<p>2&gt; else:</p>
<p>3&gt; instruct the physical layer to signal an acknowledgement
corresponding to the transmission on the PUCCH according to clause 16.5
of TS 38.213 [6]</p>
<p>1&gt; else:</p>
<p>2&gt; instruct the physical layer to signal a positive
acknowledgement on the PUCCH according to clause 16.5 of TS 38.213
[6].</p>
<h5 id="harq-based-sidelink-rlf-detection">5.22.1.3.3 HARQ-based
Sidelink RLF detection</h5>
<p>The HARQ-based Sidelink RLF detection procedure is used to detect
Sidelink RLF based on a number of consecutive DTX on PSFCH reception
occasions for a PC5-RRC connection.</p>
<p>RRC configures the following parameter to control HARQ-based Sidelink
RLF detection:</p>
<p>- <em>sl-maxNumConsecutiveDTX</em>.</p>
<p>The following UE variable is used for HARQ-based Sidelink RLF
detection.</p>
<p>- <em>numConsecutiveDTX</em>, which is maintained for each PC5-RRC
connection.</p>
<p>The Sidelink HARQ Entity shall (re-)initialize
<em>numConsecutiveDTX</em> to zero for each PC5-RRC connection which has
been established by upper layers, if any, upon establishment of the
PC5-RRC connection or (re)configuration of
<em>sl-maxNumConsecutiveDTX</em>.</p>
<p>The Sidelink HARQ Entity shall for each PSFCH reception occasion
associated to the PSSCH transmission:</p>
<p>1&gt; if PSFCH reception is absent on the PSFCH reception
occasion:</p>
<p>2&gt; increment <em>numConsecutiveDTX</em> by 1;</p>
<p>2&gt; if <em>numConsecutiveDTX</em> reaches
<em>sl-maxNumConsecutiveDTX</em>:</p>
<p>3&gt; indicate HARQ-based Sidelink RLF detection to RRC.</p>
<p>1&gt; else:</p>
<p>2&gt; re-initialize <em>numConsecutiveDTX</em> to zero.</p>
<h4 id="multiplexing-and-assembly-1">5.22.1.4 Multiplexing and
assembly</h4>
<h5 id="general-7">5.22.1.4.0 General</h5>
<p>For PDU(s) associated with one SCI, MAC shall consider only logical
channels with the same Source Layer-2 ID-Destination Layer-2 ID pair for
one of unicast, groupcast and broadcast which is associated with the
pair. Multiple transmissions for different Sidelink processes are
allowed to be independently performed in different PSSCH durations.</p>
<blockquote>
<p>NOTE: Sidelink data for discovery and sidelink data for non-discovery
transmitted by a UE cannot be multiplexed into the same TB because they
are always associated with different destination L2 IDs (see TS 23.304
[26]).</p>
</blockquote>
<h5 id="logical-channel-prioritization-1">5.22.1.4.1 Logical channel
prioritization</h5>
<h6 id="general-8">5.22.1.4.1.1 General</h6>
<p>The sidelink Logical Channel Prioritization procedure is applied
whenever a new transmission is performed.</p>
<p>RRC controls the scheduling of sidelink data by signalling for each
logical channel:</p>
<p>- <em>sl-Priority</em> where an increasing priority value indicates a
lower priority level;</p>
<p>- <em>sl-PrioritisedBitRate</em> which sets the sidelink Prioritized
Bit Rate (sPBR);</p>
<p>- <em>sl-BucketSizeDuration</em> which sets the sidelink Bucket Size
Duration (sBSD).</p>
<p>RRC additionally controls the LCP procedure by configuring mapping
restrictions for each logical channel:</p>
<p>- <em>sl-configuredGrantType1Allowed</em> which sets whether a
configured grant Type 1 can be used for sidelink transmission;</p>
<p>- <em>sl-AllowedCG-List</em> which sets the allowed configured
grant(s) for sidelink transmission;</p>
<p>- <em>sl-HARQ-FeedbackEnabled</em> which sets whether the logical
channel is allowed to be multiplexed with logical channel(s) with
<em>sl-HARQ-FeedbackEnabled</em> set to <em>enabled</em> or
<em>disabled</em>.</p>
<p>The following UE variable is used for the Logical channel
prioritization procedure:</p>
<p>- <em>SBj</em> which is maintained for each logical channel
<em>j</em>.</p>
<p>The MAC entity shall initialize <em>SBj</em> of the logical channel
to zero when the logical channel is established.</p>
<p>For each logical channel <em>j</em>, the MAC entity shall:</p>
<p>1&gt; increment <em>SBj</em> by the product sPBR × T before every
instance of the LCP procedure, where T is the time elapsed since
<em>SBj</em> was last incremented;</p>
<p>1&gt; if the value of <em>SBj</em> is greater than the sidelink
bucket size (i.e. sPBR × sBSD):</p>
<p>2&gt; set <em>SBj</em> to the sidelink bucket size.</p>
<p>NOTE: The exact moment(s) when the UE updates <em>SBj</em> between
LCP procedures is up to UE implementation, as long as <em>SBj</em> is up
to date at the time when a grant is processed by LCP.</p>
<h6 id="selection-of-logical-channels-1">5.22.1.4.1.2 Selection of
logical channels</h6>
<p>The MAC entity shall for each SCI corresponding to a new
transmission:</p>
<p>1&gt; if <em>sl-BWP-DiscPoolConfig</em> or
<em>sl-BWP-DiscPoolConfigCommon</em> is configured according to TS
38.331 [5]:</p>
<p>2&gt; if the new transmission is associated to a sidelink grant in
<em>sl-DiscTxPoolSelected</em> or <em>sl-DiscTxPoolScheduling</em>
configured in <em>sl-BWP-DiscPoolConfig</em> or
<em>sl-BWP-DiscPoolConfigCommon</em>:</p>
<p>3&gt; select a Destination associated with NR sidelink discovery as
specified in TS 23.304 [26], that is in the SL Active time for the SL
transmission occasion if SL DRX is applied for the destination, and
among the logical channels that satisfy all the following conditions for
the SL grant associated to the SCI:</p>
<p>4&gt; SL data for NR sidelink discovery is available for
transmission; and</p>
<p>4&gt; <em>SBj</em> &gt; 0, in case there is any logical channel
having <em>SBj</em> &gt; 0; and</p>
<p>4&gt; <em>sl-configuredGrantType1Allowed</em>, if configured, is set
to <em>true</em> in case the SL grant is a Configured Grant Type 1;
and</p>
<p>4&gt; <em>sl-AllowedCG-List</em>, if configured, includes the
configured grant index associated to the SL grant.</p>
<p>2&gt; else:</p>
<p>3&gt; select a Destination associated to one of unicast, groupcast
and broadcast (excluding the Destination(s) associated with NR sidelink
discovery as specified in TS 23.304 [26]), that is in the SL Active time
for the SL transmission occasion if SL DRX is applied for the
destination, and having at least one of the MAC CE and the logical
channel with the highest priority, among the logical channels that
satisfy all the following conditions and MAC CE(s), if any, for the SL
grant associated to the SCI:</p>
<p>4&gt; SL data for NR sidelink communication is available for
transmission; and</p>
<p>4&gt; <em>SBj</em> &gt; 0, in case there is any logical channel
having <em>SBj</em> &gt; 0; and</p>
<p>4&gt; <em>sl-configuredGrantType1Allowed</em>, if configured, is set
to <em>true</em> in case the SL grant is a Configured Grant Type 1;
and</p>
<p>4&gt; <em>sl-AllowedCG-List</em>, if configured, includes the
configured grant index associated to the SL grant; and</p>
<p>4&gt; <em>sl-HARQ-FeedbackEnabled</em> is set to <em>disabled</em>,
if PSFCH is not configured for the SL grant associated to the SCI.</p>
<p>1&gt; else:</p>
<p>2&gt; select a Destination associated to one of unicast, groupcast
and broadcast, that is in the SL Active time for the SL transmission
occasion if SL DRX is applied for the destination, and having at least
one of the MAC CE and the logical channel with the highest priority,
among the logical channels that satisfy all the following conditions and
MAC CE(s), if any, for the SL grant associated to the SCI:</p>
<p>3&gt; SL data is available for transmission; and</p>
<p>3&gt; <em>SBj</em> &gt; 0, in case there is any logical channel
having <em>SBj</em> &gt; 0; and</p>
<p>3&gt; <em>sl-configuredGrantType1Allowed</em>, if configured, is set
to <em>true</em> in case the SL grant is a Configured Grant Type 1;
and</p>
<p>3&gt; <em>sl-AllowedCG-List</em>, if configured, includes the
configured grant index associated to the SL grant; and</p>
<p>3&gt; <em>sl-HARQ-FeedbackEnabled</em> is set to <em>disabled</em>,
if PSFCH is not configured for the SL grant associated to the SCI.</p>
<p>NOTE 1: If multiple Destinations have the logical channels satisfying
all conditions above with the same highest priority or if multiple
Destinations have either the MAC CE and/or the logical channels
satisfying all conditions above with the same priority as the MAC CE,
which Destination is selected among them is up to UE implementation.</p>
<p>1&gt; select the logical channels satisfying all the following
conditions among the logical channels belonging to the selected
Destination:</p>
<p>2&gt; SL data is available for transmission; and</p>
<p>2&gt; <em>sl-configuredGrantType1Allowed</em>, if configured, is set
to <em>true</em> in case the SL grant is a Configured Grant Type 1;
and.</p>
<p>2&gt; <em>sl-AllowedCG-List</em>, if configured, includes the
configured grant index associated to the SL grant; and</p>
<p>2&gt; <em>sl-HARQ-FeedbackEnabled</em> is set to the value that
satisfies the following conditions:</p>
<p>3&gt; if PSFCH is configured for the sidelink grant associated to the
SCI and the UE is capable of PSFCH reception:</p>
<p>4&gt; <em>sl-HARQ-FeedbackEnabled</em> is set to <em>enabled</em>, if
<em>sl-HARQ-FeedbackEnabled</em> is set to <em>enabled</em> for the
highest priority logical channel satisfying the above conditions; or</p>
<p>4&gt; <em>sl-HARQ-FeedbackEnabled</em> is set to <em>disabled</em>,
if <em>sl-HARQ-FeedbackEnabled</em> is set to <em>disabled</em> for the
highest priority logical channel satisfying the above conditions.</p>
<p>3&gt; else:</p>
<p>4&gt; <em>sl-HARQ-FeedbackEnabled</em> is set to disabled.</p>
<p>NOTE 2: HARQ feedback enabled/disabled indicator is set to disabled
for the transmission of a MAC PDU only carrying CSI reporting MAC CE or
Sidelink DRX Command MAC CE or Sidelink Inter-UE Coordination Request
MAC CE or Sidelink Inter-UE Coordination Information MAC CE.</p>
<h6 id="allocation-of-sidelink-resources">5.22.1.4.1.3 Allocation of
sidelink resources</h6>
<p>The MAC entity shall for each SCI corresponding to a new
transmission:</p>
<p>1&gt; allocate resources to the logical channels as follows:</p>
<p>2&gt; logical channels selected in clause 5.22.1.4.1.2 for the SL
grant with <em>SBj</em> &gt; 0 are allocated resources in a decreasing
priority order. If the sPBR of a logical channel is set to
<em>infinity</em>, the MAC entity shall allocate resources for all the
data that is available for transmission on the logical channel before
meeting the sPBR of the lower priority logical channel(s);</p>
<p>2&gt; decrement <em>SBj</em> by the total size of MAC SDUs served to
logical channel <em>j</em> above;</p>
<p>2&gt; if any resources remain, all the logical channels selected in
clause 5.22.1.4.1.2 are served in a strict decreasing priority order
(regardless of the value of <em>SBj</em>) until either the data for that
logical channel or the SL grant is exhausted, whichever comes first.
Logical channels configured with equal priority should be served
equally.</p>
<p>NOTE 1: The value of <em>SBj</em> can be negative.</p>
<p>The UE shall also follow the rules below during the SL scheduling
procedures above:</p>
<p>- the UE should not segment an RLC SDU (or partially transmitted SDU
or retransmitted RLC PDU) if the whole SDU (or partially transmitted SDU
or retransmitted RLC PDU) fits into the remaining resources of the
associated MAC entity;</p>
<p>- if the UE segments an RLC SDU from the logical channel, it shall
maximize the size of the segment to fill the grant of the associated MAC
entity as much as possible;</p>
<p>- the UE should maximise the transmission of data;</p>
<p>- if the MAC entity is given a sidelink grant size that is equal to
or larger than 12 bytes while having data available and allowed
(according to clause 5.22.1.4.1) for transmission, the MAC entity shall
not transmit only padding;</p>
<p>- A logical channel configured with <em>sl-HARQ-FeedbackEnabled</em>
set to <em>enabled</em> and a logical channel configured with
<em>sl-HARQ-FeedbackEnabled</em> set to <em>disabled</em> cannot be
multiplexed into the same MAC PDU.</p>
<p>The MAC entity shall not generate a MAC PDU for the HARQ entity if
the following conditions are satisfied:</p>
<p>- there is no Sidelink CSI Reporting MAC CE generated for this PSSCH
transmission as specified in clause 5.22.1.7; and</p>
<p>- there is no Sidelink DRX Command MAC CE generated for this PSSCH
transmission as specified in clause 5.22.1.8; and</p>
<p>- there is no Sidelink Inter-UE Coordination Request MAC CE generated
for this PSSCH transmission as specified in clause 5.22.1.9; and</p>
<p>- there is no Sidelink Inter-UE Coordination Information MAC CE
generated for this PSSCH transmission as specified in clause 5.22.1.10;
and</p>
<p>- the MAC PDU includes zero MAC SDUs.</p>
<p>Logical channels shall be prioritised in accordance with the
following order (highest priority listed first):</p>
<p>- data from SCCH;</p>
<p>- Sidelink CSI Reporting MAC CE;</p>
<p>- Sidelink Inter-UE Coordination Request MAC CE and Sidelink Inter-UE
Coordination Information MAC CE;</p>
<p>- Sidelink DRX Command MAC CE;</p>
<p>- data from any STCH.</p>
<p>NOTE 2: The priority order between Sidelink Inter-UE Coordination
Request MAC CE and Sidelink Inter-UE Coordination Information MAC CE is
up to UE implementation.</p>
<h5 id="multiplexing-of-mac-control-elements-and-mac-sdus-1">5.22.1.4.2
Multiplexing of MAC Control Elements and MAC SDUs</h5>
<p>The MAC entity shall multiplex MAC CEs and MAC SDUs in a MAC PDU
according to clauses 5.22.1.4.1 and 6.1.6.</p>
<h4 id="scheduling-request-1">5.22.1.5 Scheduling Request</h4>
<p>In addition to clause 5.4.4, the Scheduling Request (SR) is also used
for requesting SL-SCH resources for new transmission when triggered by
the Sidelink BSR (clause 5.22.1.6) or the SL-CSI reporting (clause
5.22.1.7) or SL-DRX Command indication. If configured, the MAC entity
performs the SR procedure as specified in this clause unless otherwise
specified in clause 5.4.4. For a sidelink logical channel or for SL-CSI
reporting or for SL-DRX Command indication, at most one PUCCH resource
for SR is configured per UL BWP.</p>
<p>The SR configuration of the logical channel that triggered the
Sidelink BSR (clause 5.22.1.6) is also considered as corresponding SR
configuration for the triggered SR (clause 5.4.4). The value of the
priority of the triggered SR corresponds to the value of priority of the
logical channel that triggered the SR.</p>
<p>Each sidelink logical channel may be mapped to zero or one SR
configuration, which is configured by RRC. If the SL-CSI reporting
procedure is enabled by RRC, the SL-CSI reporting is mapped to one SR
configuration for all PC5-RRC connections. The SR configuration of the
SL-CSI reporting triggered according to 5.22.1.7 is considered as
corresponding SR configuration for the triggered SR (clause 5.4.4). The
value of the priority of the triggered SR triggered by SL-CSI reporting
corresponds to the value of the priority of the Sidelink CSI Reporting
MAC CE. The SR configuration of the SL-CSI reporting is considered as
corresponding SR configuration for the triggered SR of SL-DRX Command
indication triggered according to 5.28.3. The value of the priority of
the triggered SR triggered by SL-DRX Command indication corresponds to
the value of the priority of the Sidelink DRX Command MAC CE.</p>
<p>All pending SR(s) triggered according to the Sidelink BSR procedure
(clause 5.22.1.6) prior to the MAC PDU assembly shall be cancelled and
each respective <em>sr-ProhibitTimer</em> shall be stopped when the MAC
PDU is transmitted and this PDU includes an SL-BSR MAC CE which contains
buffer status up to (and including) the last event that triggered a
Sidelink BSR (see clause 5.22.1.4) prior to the MAC PDU assembly.</p>
<p>All pending SR(s) triggered according to the Sidelink BSR procedure
(clause 5.22.1.6) shall be cancelled and each respective
<em>sr-ProhibitTimer</em> shall be stopped when the SL grant(s) can
accommodate all pending data available for transmission in sidelink.</p>
<p>The pending SR triggered according to the SL-CSI reporting for a
destination shall be cancelled and each respective
<em>sr-ProhibitTimer</em> shall be stopped when the SL grant(s) can
accommodate the Sidelink CSI Reporting MAC CE when the SL-CSI reporting
that has been triggered but not cancelled or when the triggered SL-CSI
reporting is cancelled due to latency non-fulfilment as specified in
5.22.1.7. The pending SR triggered according to the SL-DRX Command
indication for a destination shall be cancelled and each respective
<em>sr-ProhibitTimer</em> shall be stopped when the SL grant(s) can
accommodate the Sidelink DRX Command MAC CE when the SL-DRX Command
indication that has been triggered but not cancelled. All pending SR(s)
triggered by either Sidelink BSR or Sidelink CSI report or Sidelink DRX
Command indication shall be cancelled, when RRC configures Sidelink
resource allocation mode 2.</p>
<h4 id="buffer-status-reporting-1">5.22.1.6 Buffer Status Reporting</h4>
<p>The Sidelink Buffer Status reporting (SL-BSR) procedure is used to
provide the serving gNB with information about SL data volume in the MAC
entity.</p>
<p>RRC configures the following parameters to control the SL-BSR:</p>
<p>- <em>sl-periodicBSR-Timer</em>, configured by
<em>periodicBSR-Timer</em> in <em>sl-BSR-Config</em>;</p>
<p>- <em>sl-retxBSR-Timer</em>, configured by <em>retxBSR-Timer</em> in
<em>sl-BSR-Config</em>;</p>
<p>- <em>sl-logicalChannelSR-DelayTimerApplied</em>;</p>
<p>- <em>sl-logicalChannelSR-DelayTimer</em>, configured by
<em>logicalChannelSR-DelayTimer</em> in <em>sl-BSR-Config</em>;</p>
<p>- <em>sl-logicalChannelGroup</em>.</p>
<p>Each logical channel which belongs to a Destination is allocated to
an LCG as specified in TS 38.331 [5]. The maximum number of LCGs is
eight.</p>
<p>The MAC entity determines the amount of SL data available for a
logical channel according to the data volume calculation procedure in
TSs 38.322 [3] and 38.323 [4].</p>
<p>An SL-BSR shall be triggered if any of the following events
occur:</p>
<p>1&gt; if the MAC entity has been configured with Sidelink resource
allocation mode 1:</p>
<p>2&gt; SL data, for a logical channel which belongs to an LCG of a
Destination, becomes available to the MAC entity; and either</p>
<p>3&gt; this SL data belongs to a logical channel with higher priority
than the priorities of the logical channels containing available SL data
which belong to any LCG belonging to the same Destination; or</p>
<p>3&gt; none of the logical channels which belong to an LCG belonging
to the same Destination contains any available SL data.</p>
<p>in which case the SL-BSR is referred below to as 'Regular
SL-BSR';</p>
<p>2&gt; UL resources are allocated and number of padding bits remaining
after a Padding BSR has been triggered is equal to or larger than the
size of the SL-BSR MAC CE plus its subheader, in which case the SL-BSR
is referred below to as 'Padding SL-BSR';</p>
<p>2&gt; <em>sl-retxBSR-Timer</em> expires, and at least one of the
logical channels which belong to an LCG contains SL data, in which case
the SL-BSR is referred below to as 'Regular SL-BSR';</p>
<p>2&gt; <em>sl-periodicBSR-Timer</em> expires, in which case the SL-BSR
is referred below to as 'Periodic SL-BSR'.</p>
<p>1&gt; else:</p>
<p>2&gt; Sidelink resource allocation mode 1 is configured by RRC and SL
data is available for transmission in the RLC entity or in the PDCP
entity, in which case the Sidelink BSR is referred below to as 'Regular
SL-BSR'.</p>
<p>For Regular SL-BSR, the MAC entity shall:</p>
<p>1&gt; if the SL-BSR is triggered for a logical channel for which
<em>sl-logicalChannelSR-DelayTimerApplied</em> with value <em>true</em>
is configured by RRC:</p>
<p>2&gt; start or restart the
<em>sl-logicalChannelSR-DelayTimer</em>.</p>
<p>1&gt; else:</p>
<p>2&gt; if running, stop the
<em>sl-logicalChannelSR-DelayTimer</em>.</p>
<p>For Regular and Periodic SL-BSR, the MAC entity shall:</p>
<p>1&gt; if <em>sl-PrioritizationThres</em> is configured and the value
of the highest priority of the logical channels that belong to any LCG
and contain SL data for any Destination is lower than
<em>sl-PrioritizationThres</em>; and</p>
<p>1&gt; if <em>ul-PrioritizationThres</em> is configured and the value
of the highest priority of the logical channels that belong to any LCG
and contain UL data is equal to or higher than
<em>ul-PrioritizationThres</em> according to clause 5.4.5:</p>
<p>2&gt; prioritize the LCG(s) for the Destination(s).</p>
<p>1&gt; if the Buffer Status reporting procedure determines that at
least one BSR has been triggered and not cancelled according to clause
5.4.5 and the UL grant cannot accommodate an SL-BSR MAC CE containing
buffer status only for all prioritized LCGs having data available for
transmission plus the subheader of the SL-BSR according to clause
5.4.3.1.3, in case the SL-BSR is considered as not prioritized:</p>
<p>2&gt; prioritize the SL-BSR for logical channel prioritization
specified in clause 5.4.3.1;</p>
<p>2&gt; report Truncated SL-BSR containing buffer status for as many
prioritized LCGs having data available for transmission as possible,
taking the number of bits in the UL grant into consideration.</p>
<p>1&gt; else if the number of bits in the UL grant is expected to be
equal to or larger than the size of an SL-BSR containing buffer status
for all LCGs having data available for transmission plus the subheader
of the SL-BSR according to clause 5.4.3.1.3:</p>
<p>2&gt; report SL-BSR containing buffer status for all LCGs having data
available for transmission.</p>
<p>1&gt; else:</p>
<p>2&gt; report Truncated SL-BSR containing buffer status for as many
LCGs having data available for transmission as possible, taking the
number of bits in the UL grant into consideration.</p>
<p>For Padding SL-BSR:</p>
<p>1&gt; if the number of padding bits remaining after a Padding BSR has
been triggered is equal to or larger than the size of an SL-BSR
containing buffer status for all LCGs having data available for
transmission plus its subheader:</p>
<p>2&gt; report SL-BSR containing buffer status for all LCGs having data
available for transmission;</p>
<p>1&gt; else:</p>
<p>2&gt; report Truncated SL-BSR containing buffer status for as many
LCGs having data available for transmission as possible, taking the
number of bits in the UL grant into consideration.</p>
<p>For SL-BSR triggered by <em>sl-retxBSR-Timer</em> expiry, the MAC
entity considers that the logical channel that triggered the SL-BSR is
the highest priority logical channel that has data available for
transmission at the time the SL-BSR is triggered.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the sidelink Buffer Status reporting procedure determines
that at least one SL-BSR has been triggered and not cancelled:</p>
<p>2&gt; if UL-SCH resources are available for a new transmission and
the UL-SCH resources can accommodate the SL-BSR MAC CE plus its
subheader as a result of logical channel prioritization according to
clause 5.4.3.1:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure in clause
5.4.3 to generate the SL-BSR MAC CE(s);</p>
<p>3&gt; start or restart <em>sl-periodicBSR-Timer</em> except when all
the generated SL-BSRs are Truncated SL-BSRs;</p>
<p>3&gt; start or restart <em>sl-retxBSR-Timer</em>.</p>
<p>2&gt; if a Regular SL-BSR has been triggered and
<em>sl-logicalChannelSR-DelayTimer</em> is not running:</p>
<p>3&gt; if there is no UL-SCH resource available for a new
transmission; or</p>
<p>3&gt; if UL-SCH resources are available for a new transmission and
the UL-SCH resources cannot accommodate the SL-BSR MAC CE plus its
subheader as a result of logical channel prioritization according to
clause 5.4.3.1; or</p>
<p>3&gt; if the set of Subcarrier Spacing index values in
<em>sl-AllowedSCS-List</em>, if configured for the logical channel that
triggered the SL-BSR, does not include the Subcarrier Spacing index
associated to the UL-SCH resources available for a new transmission;
or</p>
<p>3&gt; if <em>sl-MaxPUSCH-Duration</em>, if configured for the logical
channel that triggered the SL-BSR, is smaller than the PUSCH
transmission duration associated to the UL-SCH resources available for a
new transmission:</p>
<p>4&gt; trigger a Scheduling Request.</p>
<p>NOTE 1: UL-SCH resources are considered available if the MAC entity
has been configured with, receives, or determines an uplink grant. If
the MAC entity has determined at a given point in time that UL-SCH
resources are available, this need not imply that UL-SCH resources are
available for use at that point in time.</p>
<p>A MAC PDU shall contain at most one SL-BSR MAC CE, even when multiple
events have triggered an SL-BSR. The Regular SL-BSR and the Periodic
SL-BSR shall have precedence over the padding SL-BSR.</p>
<p>The MAC entity shall restart <em>sl-retxBSR-Timer</em> upon reception
of an SL grant for transmission of new data on any SL-SCH.</p>
<p>All triggered SL-BSRs may be cancelled when the SL grant(s) can
accommodate all pending data available for transmission. All BSRs
triggered prior to MAC PDU assembly shall be cancelled when a MAC PDU is
transmitted and this PDU includes an SL-BSR MAC CE which contains buffer
status up to (and including) the last event that triggered an SL-BSR
prior to the MAC PDU assembly. All triggered SL-BSRs shall be cancelled,
and <em>sl-retx-BSR-Timer</em> and <em>sl-periodic-BSR-Timer</em> shall
be stopped, when RRC configures Sidelink resource allocation mode 2.</p>
<p>NOTE 2: MAC PDU assembly can happen at any point in time between
uplink grant reception and actual transmission of the corresponding MAC
PDU. SL-BSR and SR can be triggered after the assembly of a MAC PDU
which contains an SL-BSR MAC CE, but before the transmission of this MAC
PDU. In addition, SL-BSR and SR can be triggered during MAC PDU
assembly.</p>
<h4 id="csi-reporting">5.22.1.7 CSI Reporting</h4>
<p>The Sidelink Channel State Information (SL-CSI) reporting procedure
is used to provide a peer UE with sidelink channel state information as
specified in clause 8.5 of TS 38.214 [7].</p>
<p>RRC configures the following parameters to control the SL-CSI
reporting procedure:</p>
<p>- <em>sl-LatencyBoundCSI-Report</em>, which is maintained for each
PC5-RRC connection.</p>
<p>The MAC entity maintains an <em>sl-CSI-ReportTimer</em> for each pair
of the Source Layer-2 ID and the Destination Layer-2 ID corresponding to
a PC5-RRC connection. <em>sl-CSI-ReportTimer</em> is used for an SL-CSI
reporting UE to follow the latency requirement signalled from a CSI
triggering UE. The value of <em>sl-CSI-ReportTimer</em> is the same as
the‎ latency requirement of the SL-CSI reporting in
<em>sl-LatencyBoundCSI-Report</em> configured by RRC.</p>
<p>The MAC entity shall for each pair of the Source Layer-2 ID and the
Destination Layer-2 ID corresponding to a PC5-RRC connection which has
been established by upper layers:</p>
<p>1&gt; if the SL-CSI reporting has been triggered by an SCI and not
cancelled:</p>
<p>2&gt; if the <em>sl-CSI-ReportTimer</em> for the triggered SL-CSI
reporting is not running:</p>
<p>3&gt; start the <em>sl-CSI-ReportTimer</em>.</p>
<p>2&gt; if the <em>sl-CSI-ReportTimer</em> for the triggered SL-CSI
reporting expires:</p>
<p>3&gt; cancel the triggered SL-CSI reporting.</p>
<p>2&gt; else if the MAC entity has SL resources allocated for new
transmission and the SL-SCH resources can accommodate the SL-CSI
reporting MAC CE and its subheader as a result of logical channel
prioritization:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate a
Sidelink CSI Reporting MAC CE as defined in clause 6.1.3.35;</p>
<p>3&gt; stop the <em>sl-CSI-ReportTimer</em> for the triggered SL-CSI
reporting;</p>
<p>3&gt; cancel the triggered SL-CSI reporting.</p>
<p>2&gt; else if the MAC entity has been configured with Sidelink
resource allocation mode 1:</p>
<p>3&gt; trigger a Scheduling Request.</p>
<p>NOTE: The MAC entity configured with Sidelink resource allocation
mode 1 may trigger a Scheduling Request if transmission of a pending
SL-CSI reporting with the sidelink grant(s) cannot fulfil the latency
requirement associated to the SL-CSI reporting.</p>
<h4 id="void-4">5.22.1.8 Void</h4>
<h4 id="iuc-request-transmission">5.22.1.9 IUC-Request transmission</h4>
<p>The Sidelink Inter-UE Coordination Request transmission procedure is
used to trigger a peer UE to transmit Sidelink Inter-UE Coordination
Information.</p>
<h4 id="iuc-information-reporting">5.22.1.10 IUC-Information
Reporting</h4>
<h5 id="general-9">5.22.1.10.1 General</h5>
<p>The Sidelink Inter-UE Coordination Information reporting procedure is
used to provide a peer UE with inter-UE coordination information as
specified in clause 8.1.4 of TS 38.214 [7]. The Sidelink Inter-UE
Coordination Information reporting procedure can be triggered by
Sidelink Inter-UE Coordination Request MAC CE or condition (See TS
38.331 [5] and TS 38.214 [7]). Unicast for preferred resource set and
non-preferred resource set and Groupcast/Broadcast for non-preferred
resource set are supported for inter-UE coordination information
transmission triggered by a condition other than explicit request
reception. Unicast for preferred resource set and non-preferred resource
set is supported for inter-UE coordination information transmission
triggered by an explicit request.</p>
<p>RRC configures the following parameter to control the SL-IUC
Information reporting procedure:</p>
<p>- <em>sl-LatencyBoundIUC-Report</em>, which is maintained for each
PC5-RRC connection.</p>
<p>The MAC entity maintains an <em>sl-IUC-ReportTimer</em> for each pair
of the Source Layer-2 ID and the Destination Layer-2 ID corresponding to
a PC5-RRC connection. <em>sl-IUC-ReportTimer</em> is used for an SL-IUC
Information reporting UE to follow the latency requirement signalled
from an IUC-Information triggering UE. The value of
<em>sl-IUC-ReportTimer</em> is the same as the‎ latency requirement of
the SL-IUC Information in <em>sl-LatencyBoundIUC-Report</em> configured
by RRC.</p>
<p>The MAC entity shall for each pair of the Source Layer-2 ID and the
Destination Layer-2 ID corresponding to a PC5-RRC connection which has
been established by upper layers:</p>
<p>1&gt; if the SL-IUC Information reporting has been triggered by an
SL-IUC Request MAC CE (and/or an SCI) and not cancelled:</p>
<p>2&gt; if the <em>sl-IUC-ReportTimer</em> for the triggered SL-IUC
Information reporting is not running:</p>
<p>3&gt; start the <em>sl-IUC-ReportTimer</em>.</p>
<p>2&gt; if the <em>sl-IUC-ReportTimer</em> for the triggered SL-IUC
Information reporting expires:</p>
<p>3&gt; cancel the triggered SL-IUC Information reporting.</p>
<p>2&gt; else if the MAC entity has SL resources allocated for new
transmission and the SL-SCH resources can accommodate the SL-IUC
Information MAC CE and its subheader as a result of logical channel
prioritization:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate a
Sidelink Inter-UE Coordination Information MAC CE as defined in clause
6.1.3.53;</p>
<p>3&gt; stop the <em>sl-IUC-ReportTimer</em> for the triggered SL-IUC
Information reporting;</p>
<p>3&gt; cancel the triggered SL-IUC Information reporting.</p>
<h5 id="reception-of-iuc-information-reporting">5.22.1.10.2 Reception of
IUC-Information Reporting</h5>
<p>Upon the reception of SL-IUC Information MAC CE from another UE, the
MAC entity shall:</p>
<p>1&gt; if <em>sl-InterUE-CoordinationScheme1</em> enabling
reception/transmission of preferred resource set and non-preferred
resource set is configured by RRC:</p>
<p>2&gt; if the SL-IUC Information MAC CE contains a non-preferred
resource set and if the UE is configured to use full sensing or partial
sensing in the resource pool where the non-preferred resource set is
located:</p>
<p>3&gt; indicate the received non-preferred resource set to physical
layer.</p>
<h3 id="sl-sch-data-reception">5.22.2 SL-SCH Data reception</h3>
<h4 id="sci-reception">5.22.2.1 SCI reception</h4>
<p>SCI indicates if there is a transmission on SL-SCH and provide the
relevant HARQ information. An SCI consists of two parts: the
1<sup>st</sup> stage SCI on PSCCH and the 2<sup>nd</sup> stage SCI on
PSSCH as specified in clause 8.1 of TS 38.214 [7].</p>
<p>The MAC entity shall:</p>
<p>1&gt; for each PSCCH duration during which the MAC entity monitors
PSCCH:</p>
<p>2&gt; if a 1<sup>st</sup> stage SCI has been received on the
PSCCH:</p>
<p>3&gt; determine the set of PSSCH durations in which reception of a
2<sup>nd</sup> stage SCI and the transport block occur using the
received part of the SCI;</p>
<p>3&gt; if the 2<sup>nd</sup> stage SCI for this PSSCH duration has
been received on the PSSCH:</p>
<p>4&gt; store the SCI as a valid SCI for the PSSCH durations
corresponding to transmission(s) of the transport block and the
associated HARQ information and QoS information;</p>
<p>1&gt; for each PSSCH duration for which the MAC entity has a valid
SCI:</p>
<p>2&gt; deliver the SCI and the associated Sidelink transmission
information to the Sidelink HARQ Entity.</p>
<h4 id="sidelink-harq-operation-1">5.22.2.2 Sidelink HARQ operation</h4>
<h5 id="sidelink-harq-entity-1">5.22.2.2.1 Sidelink HARQ Entity</h5>
<p>There is at most one Sidelink HARQ Entity at the MAC entity for
reception of the SL-SCH, which maintains a number of parallel Sidelink
processes.</p>
<p>Each Sidelink process is associated with SCI in which the MAC entity
is interested. This interest is determined by the Sidelink
identification information of the SCI. The Sidelink HARQ Entity directs
Sidelink transmission information and associated TBs received on the
SL-SCH to the corresponding Sidelink processes.</p>
<p>The number of Receiving Sidelink processes associated with the
Sidelink HARQ Entity is defined in TS 38.306 [5].</p>
<p>For each PSSCH duration, the Sidelink HARQ Entity shall:</p>
<p>1&gt; for each SCI valid for this PSSCH duration:</p>
<p>2&gt; if the NDI has been toggled compared to the value of the
previous received transmission corresponding to the Sidelink
identification information and the Sidelink process ID of the SCI or
this is the very first received transmission for the pair of the
Sidelink identification information and the Sidelink process ID of the
SCI:</p>
<p>3&gt; if there is a Sidelink process associated with the Sidelink
identification information and the Sidelink process ID of the SCI:</p>
<p>4&gt; consider the Sidelink process as unoccupied;</p>
<p>4&gt; flush the soft buffer for the Sidelink process.</p>
<p>3&gt; allocate the TB received from the physical layer and the
associated Sidelink identification information and Sidelink process ID
to an unoccupied Sidelink process;</p>
<p>3&gt; associate the Sidelink process with the Sidelink identification
information and the Sidelink process ID of this SCI and consider this
transmission to be a new transmission.</p>
<p>NOTE 1: When a new TB arrives, the Sidelink HARQ Entity allocates the
TB to any unoccupied Sidelink process. If there is no unoccupied
Sidelink process in the Sidelink HARQ entity, how to manage receiving
Sidelink processes is up to UE implementation.</p>
<p>NOTE 1a: If the NDI has not been toggled compared to the value of the
previous received transmission corresponding to the Sidelink
identification information and the Sidelink process ID of the SCI, and
if there is no Sidelink process associated with the Sidelink
identification information and the Sidelink process ID of the SCI, it is
up to UE implementation to handle the corresponding TB.</p>
<p>1&gt; for each Sidelink process:</p>
<p>2&gt; if the NDI has not been toggled compared to the value of the
previous received transmission corresponding to the Sidelink
identification information and the Sidelink process ID of the SCI for
the Sidelink process according to its associated SCI:</p>
<p>3&gt; allocate the TB received from the physical layer to the
Sidelink process and consider this transmission to be a
retransmission.</p>
<p>NOTE 2: A single sidelink process can only be (re-)associated to a
single combination of Sidelink identification information and Sidelink
process ID at a time and a single combination of Sidelink identification
information and Sidelink process ID can only be (re-)associated to a
single sidelink process at a time.</p>
<h5 id="sidelink-process">5.22.2.2.2 Sidelink process</h5>
<p>For each PSSCH duration where a transmission takes place for the
Sidelink process, one TB and the associated HARQ information is received
from the Sidelink HARQ Entity.</p>
<p>For each received TB and associated Sidelink transmission
information, the Sidelink process shall:</p>
<p>1&gt; if this is a new transmission:</p>
<p>2&gt; attempt to decode the received data.</p>
<p>1&gt; else if this is a retransmission:</p>
<p>2&gt; if the data for this TB has not yet been successfully
decoded:</p>
<p>3&gt; instruct the physical layer to combine the received data with
the data currently in the soft buffer for this TB and attempt to decode
the combined data.</p>
<p>1&gt; if the data which the MAC entity attempted to decode was
successfully decoded for this TB; or</p>
<p>1&gt; if the data for this TB was successfully decoded before:</p>
<p>2&gt; if this is the first successful decoding of the data for this
TB:</p>
<p>3&gt; if this TB is associated to unicast and the DST field of the
decoded MAC PDU subheader is equal to the 8 MSB of any of the Source
Layer-2 ID(s) of the UE for which the 16 LSB are equal to the
Destination ID in the corresponding SCI:</p>
<p>4&gt; if the SRC field of the decoded MAC PDU subheader is equal to
the 16 MSB of any of the Destination Layer-2 ID(s) of the UE for which
the 8 LSB are equal to the Source ID in the corresponding SCI; or</p>
<p>4&gt; if this TB is corresponding to the logical channel with LCID
equal to 0 or 1 and determined to be the first TB:</p>
<p>5&gt; deliver the decoded MAC PDU to the disassembly and
demultiplexing entity.</p>
<p>3&gt; if this TB is associated to groupcast or broadcast:</p>
<p>4&gt; if the DST field of the decoded MAC PDU subheader is equal to
the 8 MSB of any of the Destination Layer-2 ID(s) of the UE for which
the 16 LSB are equal to the Destination ID in the corresponding SCI;
or</p>
<p>4&gt; if this TB is corresponding to the logical channel with LCID
equal to 58, and the DST field of the decoded MAC PDU subheader is equal
to the 8 MSB of any of the Source Layer-2 ID(s) of the UE for which the
16 LSB are equal to the Destination ID in the corresponding SCI:</p>
<p>5&gt; deliver the decoded MAC PDU to the disassembly and
demultiplexing entity.</p>
<p>NOTE: Whether the TB is the first TB can be determined based on the
Source Layer-2 ID and Destination Layer-2 ID pair.</p>
<p>2&gt; consider the Sidelink process as unoccupied.</p>
<p>1&gt; else:</p>
<p>2&gt; instruct the physical layer to replace the data in the soft
buffer for this TB with the data which the MAC entity attempted to
decode.</p>
<p>1&gt; if HARQ feedback is enabled by the SCI:</p>
<p>2&gt; if negative-only acknowledgement is indicated by the SCI
according to clause 8.4.1 of TS 38.212 [9]:</p>
<p>3&gt; if UE's location information is available and distance beteween
UE's location and the central location of the nearest zone that is
calculated based on the <em>Zone_id</em> in the SCI and the value of
<em>sl-ZoneLength</em> corresponding to the communication range
requirement in the SCI as specified in TS 38.331 [5] is smaller or equal
to the communication range requirement in the SCI; or</p>
<p>3&gt; if none of <em>Zone_id</em> and communication range requirement
is indicated by the SCI; or</p>
<p>3&gt; if UE's location information is not available:</p>
<p>4&gt; if the data which the MAC entity attempted to decode was not
successfully decoded for this TB and the data for this TB was not
successfully decoded before:</p>
<p>5&gt; instruct the physical layer to generate a negative
acknowledgement of the data in this TB.</p>
<p>2&gt; if negative-positive acknowledgement or unicast is indicated by
the SCI according to clause 8.4.1 of TS 38.212 [9]:</p>
<p>3&gt; if the data which the MAC entity attempted to decode was
successfully decoded for this TB or the data for this TB was
successfully decoded before:</p>
<p>4&gt; instruct the physical layer to generate a positive
acknowledgement of the data in this TB.</p>
<p>3&gt; else:</p>
<p>4&gt; instruct the physical layer to generate a negative
acknowledgement of the data in this TB.</p>
<h4 id="disassembly-and-demultiplexing-1">5.22.2.3 Disassembly and
demultiplexing</h4>
<p>The MAC entity shall disassemble and demultiplex a MAC PDU as defined
in clause 6.1.6.</p>
<h2 id="sl-bch-data-transfer">5.23 SL-BCH data transfer</h2>
<h3 id="sl-bch-data-transmission">5.23.1 SL-BCH data transmission</h3>
<p>When instructed to send SL-BCH, the MAC entity shall:</p>
<p>1&gt; obtain the MAC PDU to transmit from SBCCH;</p>
<p>1&gt; deliver the MAC PDU to the physical layer and instruct it to
generate a transmission.</p>
<h3 id="sl-bch-data-reception">5.23.2 SL-BCH data reception</h3>
<p>When the MAC entity needs to receive SL-BCH, the MAC entity
shall:</p>
<p>1&gt; receive and attempt to decode the SL-BCH;</p>
<p>1&gt; if a TB on the SL-BCH has been successfully decoded:</p>
<p>2&gt; deliver the decoded MAC PDU to upper layers.</p>
<h2 id="handling-of-prs-processing-window">5.24 Handling of PRS
Processing Window</h2>
<p>When PPW is activated and PRS has higher priority than DL channel and
signals, for the affected symbols within the PPW according to clause
5.1.6.5 in TS 38.214 [7], the MAC entity shall:</p>
<p>1&gt; if the <em>ra-ResponseWindow</em> or the
<em>ra-ContentionResolutionTimer</em> or the
<em>msgB-ResponseWindow</em> is running:</p>
<p>2&gt; monitor the PDCCH as specified in clauses 5.1.4 and 5.1.5.</p>
<p>1&gt; else:</p>
<p>2&gt; not receive DL-SCH;</p>
<p>2&gt; not receive PDCCH.</p>
<h2 id="positioning-measurement-gap-activationdeactivation-request">5.25
Positioning Measurement Gap Activation/Deactivation Request</h2>
<p>If the UE is configured with pre-configured positioning measurement
gap and the request of the activation/deactivation of the positioning
measurement gap by UL MAC CE, the UE may request the network to activate
or deactivate the Positioning measurement gap with UL MAC CE for
Positioning Measurement Gap Activation/Deactivation Request in clause
6.1.3.40.</p>
<p>The MAC entity shall, when triggered by the upper layer to send
Positioning Measurement Gap Activation/Deactivation Request, cancel the
triggered Positioning Measurement Gap Activation/Deactivation Request,
if any and trigger another Positioning Measurement Gap
Activation/Deactivation Request according to the upper layer's
request.</p>
<p>The MAC entity shall,</p>
<p>1&gt;if Positioning Measurement Gap Activation/Deactivation Request
MAC CE has been triggered, and not cancelled:</p>
<p>2&gt; if indication from upper layer has been received that the
triggered Positioning Measurement Gap Activation/Deactivation Request
MAC CE should be cancelled; or</p>
<p>2&gt; if the pre-configured measurement gap indicated in the
Positioning Measurement Gap Activation/Deactivation Request MAC CE has
already been activated/deactivated according to clause 5.18.20:</p>
<p>3&gt; cancel the triggered Positioning Measurement Gap
Activation/Deactivation Request MAC CE.</p>
<p>2&gt; if UL-SCH resources are available for a new transmission and
these UL-SCH resources can accommodate the Positioning Measurement Gap
Activation/Deactivation Request MAC CE plus its subheader as a result of
logical channel prioritization:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate
the Positioning Measurement Gap Activation/Deactivation Request MAC CE
according to the upper layer's request;</p>
<p>3&gt; cancel triggered Positioning Measurement Gap
Activation/Deactivation Request MAC CE.</p>
<p>2&gt; else:</p>
<p>3&gt; trigger a Scheduling Request for Positioning Measurement Gap
Activation/Deactivation Request MAC CE as specified in clause 5.4.4.</p>
<h2 id="positioning-srs-transmission-in-rrc_inactive">5.26 Positioning
SRS transmission in RRC_INACTIVE</h2>
<h3 id="general-10">5.26.1 General</h3>
<p>Periodic and semi-persistent Positioning SRS can be configured for
Positioning SRS transmission in RRC_INACTIVE.</p>
<p>The MAC entity shall, if the TA of the configured Positioning SRS is
valid according to clause 5.26.2, and the conditions for positioning SRS
transmission in clause 7.3.1 of TS 38.213 [6] and clause 6.2.1.4 of TS
38.214 [7] are satisfied:</p>
<p>- instruct to the lower layer according to TS 38.214 [7] to transmit
Positioning Periodic SRS or Semi-Persistent SRS that is activated
according to clause 5.18.17.</p>
<h3 id="ta-validation-for-srs-transmission-in-rrc_inactive">5.26.2 TA
validation for SRS transmission in RRC_INACTIVE</h3>
<p>RRC configures the following parameters for validation for SRS
transmission in RRC_INACTIVE:</p>
<p>- <em>inactivePosSRS-RSRP-ChangeThreshold</em>: RSRP threshold for
the increase/decrease of RSRP for time alignment validation.</p>
<p>The MAC entity shall:</p>
<p>1&gt; if the UE receives configuration for SRS transmission in
RRC_INACTIVE:</p>
<p>2&gt; store the RSRP of the downlink pathloss reference with the
current RSRP value of the downlink pathloss reference as in TS 38.331
[5].</p>
<p>1&gt; else if the UE is configured with SRS transmission in
RRC_INACTIVE:</p>
<p>2&gt; if Timing Advance Command MAC CE is received as in clause 5.2,
or;</p>
<p>2&gt; if Timing Advance Command or Absolute Timing Advance Command is
received for Random Access procedure that is successfully completed:</p>
<p>3&gt; update the stored the RSRP of the downlink pathloss reference
with the current RSRP value of the downlink pathloss reference.</p>
<p>The MAC entity shall consider the TA to be valid when the following
conditions are fulfilled:</p>
<p>1&gt; compared to the stored downlink pathloss reference RSRP value,
the current RSRP value of the downlink pathloss reference has not
increased/decreased by more than
<em>inactivePosSRS-RSRP-ChangeThreshold</em>, if configured; and</p>
<p>1&gt; <em>inactivePosSRS-TimeAlignmentTimer</em> is running.</p>
<h2 id="small-data-transmission">5.27 Small Data Transmission</h2>
<h3 id="general-11">5.27.1 General</h3>
<p>The MAC entity may be configured by RRC with SDT and the SDT
procedure may be initiated by RRC layer. The SDT procedure can be
performed either by Random Access procedure with 2-step RA type or
4-step RA type (i.e., RA-SDT) or by configured grant Type 1 (i.e.,
CG-SDT).</p>
<p>RRC configures the following parameters for SDT procedure:</p>
<p>- <em>sdt-DataVolumeThreshold</em>: data volume threshold for the UE
to determine whether to perform SDT procedure;</p>
<p>- <em>sdt-RSRP-Threshold</em>: RSRP threshold for UE to determine
whether to perform SDT procedure;</p>
<p>- <em>cg-SDT-RSRP-ThresholdSSB</em>: an RSRP threshold configured for
SSB selection for CG-SDT.</p>
<p>The MAC entity shall, if initiated by the upper layers for SDT
procedure:</p>
<p>1&gt; if the data volume of the pending UL data across all RBs
configured for SDT is less than or equal to
<em>sdt-DataVolumeThreshold</em>; and</p>
<p>NOTE 1: For SDT procedure, the MAC entity also considers the
suspended RBs configured with SDT for data volume calculation. It is up
to the UE's implementation how the UE calculates the data volume for the
suspended RBs. Size of the CCCH message is not considered for data
volume calculation</p>
<p>1&gt; if the RSRP of the downlink pathloss reference is higher than
<em>sdt-RSRP-Threshold</em> or if <em>sdt-RSRP-Threshold</em> is not
configured:</p>
<p>2&gt; if the Serving Cell is configured with supplementary uplink as
specified in TS 38.331 [5]; and</p>
<p>2&gt; if the RSRP of the downlink pathloss reference is less than
<em>rsrp-ThresholdSSB-SUL</em>:</p>
<p>3&gt; select the SUL carrier.</p>
<p>2&gt; else:</p>
<p>3&gt; select the NUL carrier.</p>
<p>2&gt; if CG-SDT is configured on the selected UL carrier, and TA for
CG-SDT is valid according to clause 5.27.2 in the first available CG
occasion for initial CG-SDT transmission with CCCH message according to
clause 5.8.2; and</p>
<p>2&gt; if, for each RB having data available for transmission,
<em>configuredGrantType1Allowed</em>, if configured for CG-SDT, is
configured with value <em>true</em> for the corresponding logical
channel; and</p>
<p>2&gt; if at least one SSB configured for CG-SDT with SS-RSRP above
<em>cg-SDT-RSRP-ThresholdSSB</em> is available:</p>
<p>3&gt; indicate to the upper layers that the conditions for initiating
SDT procedure are fulfilled;</p>
<p>3&gt; perform CG-SDT procedure on the selected UL carrier according
to clause 5.8.2.</p>
<p>2&gt; else if a set of Random Access resources for RA-SDT is
configured and can be selected according to clause 5.1.1b on the
selected UL carrier on the BWP configured by
<em>initialUplinkBWP-RedCap</em>, if configured for a RedCap UE;
otherwise, on the BWP configured by <em>initialUplinkBWP</em>:</p>
<p>3&gt; if <em>cg-SDT-TimeAlignmentTimer</em> is running, consider
<em>cg-SDT-TimeAlignmentTimer</em> as expired and perform the
corresponding actions in clause 5.2;</p>
<p>3&gt; indicate to the upper layers that the conditions for initiating
SDT procedure are fulfilled.</p>
<p>2&gt; else:</p>
<p>3&gt; indicate to the upper layers that the conditions for initiating
SDT procedure are not fulfilled.</p>
<p>1&gt; else:</p>
<p>2&gt; indicate to the upper layers that the conditions for initiating
SDT procedure are not fulfilled.</p>
<p>If RA-SDT is selected above and after the Random Access procedure is
successfully completed (see clause 5.1.6), the UE monitors PDCCH
addressed to C-RNTI received in random access response until the RA-SDT
procedure is terminated. If CG-SDT is selected above and after the
initial transmission for CG-SDT is performed, the UE monitors PDCCH
addressed to C-RNTI as stored in UE Inactive AS context as specified in
TS 38.331 [5] and CS-RNTI until the CG-SDT procedure is terminated.</p>
<p>NOTE 2: When the UE determines if there is an SSB with SS-RSRP above
<em>cg-SDT-RSRP-ThresholdSSB</em>, the UE uses the latest unfiltered
L1-RSRP measurement.</p>
<h3 id="ta-validation-for-cg-sdt">5.27.2 TA Validation for CG-SDT</h3>
<p>RRC configures the following parameters for TA validation for
CG-SDT:</p>
<p><em>- cg-SDT-RSRP-ChangeThreshold</em>: RSRP threshold for the
increase/decrease of RSRP for time alignment validation.</p>
<p>The MAC entity shall, upon the reception of CG-SDT configuration:</p>
<p>1&gt; store the current RSRP of the downlink pathloss reference for
TA validation as defined in TS 38.331 [5] clause 5.7.17.</p>
<p>The MAC entity shall consider the TA of the initial CG-SDT
transmission with CCCH message to be valid when the following conditions
are fulfilled:</p>
<p>1&gt; The RSRP values for the stored downlink pathloss reference and
the current downlink pathloss reference are valid according to TS 38.133
[11]; and</p>
<p>1&gt; Compared to the stored downlink pathloss reference RSRP value,
the current RSRP value of the downlink pathloss reference calculated as
specified in TS 38.133 [11] has not increased/decreased by more than
<em>cg-SDT-RSRP-ChangeThreshold</em>, if configured; and</p>
<p>1&gt; <em>cg-SDT-TimeAlignmentTimer</em> is running.</p>
<h2 id="sidelink-discontinuous-reception-drx">5.28 Sidelink
Discontinuous Reception (DRX)</h2>
<h3 id="general-12">5.28.1 General</h3>
<p>The MAC entity may be configured by RRC with an SL DRX functionality
that controls the UE's SCI (i.e., 1<sup>st</sup> stage SCI and
2<sup>nd</sup> stage SCI) monitoring activity for unicast, groupcast and
broadcast. When using SL DRX operation, the MAC entity shall also
monitor SCI (i.e., 1<sup>st</sup> stage SCI and 2<sup>nd</sup> stage
SCI) according to requirements found in other clauses of this
specification.</p>
<p>RRC controls Sidelink DRX operation by configuring the following
parameters:</p>
<p>-
<em>sl-drx-onDurationTimer</em>/<em>sl-DRX-GC-BC-OnDurationTimer</em>:
the duration at the beginning of an SL DRX cycle;</p>
<p>- <em>sl-drx-SlotOffset</em>: the delay before starting the
<em>sl-drx-onDurationTimer</em>/<em>sl-DRX-GC-BC-OnDurationTimer</em>;</p>
<p>- <em>sl-drx-InactivityTimer</em>/<em>sl-DRX-GC-InactivityTimer</em>
(except for the SL broadcast communication): the duration after the
first slot of SCI (i.e., 1<sup>st</sup> stage SCI and 2<sup>nd</sup>
stage SCI) reception in which an SCI indicates a new SL transmission for
the MAC entity;</p>
<p>-
<em>sl-drx-RetransmissionTimer</em>/<em>sl-DRX-GC-RetransmissionTimer</em>
(per Sidelink process except for the SL broadcast process): the maximum
duration until an SL retransmission is received;</p>
<p>- <em>sl-drx-StartOffset</em>: the slot where the SL DRX cycle
starts;</p>
<p>- <em>sl-drx-Cycle</em>/<em>sl-DRX-GC-BC-Cycle</em>: the Sidelink DRX
cycle;</p>
<p>- <em>sl-drx-HARQ-RTT-Timer</em>/<em>sl-DRX-GC-HARQ-RTT-Timer</em>
(per Sidelink process except for the SL broadcast process): the minimum
duration before an SL HARQ retransmission is expected by the MAC
entity.</p>
<h3 id="behaviour-of-ue-receiving-sl-sch-data">5.28.2 Behaviour of UE
receiving SL-SCH Data</h3>
<p>When SL DRX is configured, the Active Time includes the time
while:</p>
<p>-
<em>sl-drx-onDurationTimer</em>/<em>sl-DRX-GC-BC-OnDurationTimer</em> or
<em>sl-drx-InactivityTimer</em>/<em>sl-DRX-GC-InactivityTimer</em> is
running; or</p>
<p>-
<em>sl-drx-RetransmissionTimer</em>/<em>sl-DRX-GC-RetransmissionTimer</em>
is running; or</p>
<p>- period of <em>sl-LatencyBoundCSI-Report</em> configured by RRC in
case SL-CSI reporting MAC CE is not received; or</p>
<p>- the time between the transmission of the request of SL-CSI
reporting and the reception of the SL-CSI reporting MAC CE in case
SL-CSI reporting MAC CE is received; or</p>
<p>- Slot(s) associated with the announced periodic transmission(s) by
the UE transmitting SL-SCH Data; or</p>
<p>- the time between transmission/reception of Direct Link
Establishment Request message (TS 24.587 [28]) or ProSe Direct Link
Establishment Request message (TS 24.554 [29]) and reception of
<em>RRCReconfigurationSidelink</em> message including initial DRX
configuration or the link establishment procedure being aborted by upper
layer; or</p>
<p>- the time between transmission of
<em>RRCReconfigurationSidelink</em> message including initial DRX
configuration and reception of corresponding
<em>RRCReconfigurationCompleteSidelink</em> or
<em>RRCReconfigurationFailureSidelink</em> message.</p>
<p>When one or multiple SL DRX is configured, the MAC entity shall:</p>
<p>1&gt; if a single <em>sl-DRX-GC-BC-Cycle</em> that is mapped with one
or multiple <em>SL-QoS-Profile</em> in <em>sl-DRX-GC-BC-PerQoS-List</em>
or a single <em>sl-DRX-GC-BC-Cycle</em> that is configured in
<em>sl-DefaultDRX-GC-BC</em> and cannot be mapped with any
<em>SL-QoS-Profile</em> in <em>sl-DRX-GC-BC-PerQoS-List</em> is
associated to a Destination and the associated cast type is groupcast or
broadcast:</p>
<p>2&gt; select the <em>sl-DRX-GC-BC-Cycle</em> that is mapped with one
or multiple <em>SL-QoS-Profile</em> in <em>sl-DRX-GC-BC-PerQoS-List</em>
or the <em>sl-DRX-GC-BC-Cycle</em> configured in
<em>sl-DefaultDRX-GC-BC</em> associated with the Destination.</p>
<p>1&gt; else if multiple <em>sl-DRX-GC-BC-Cycle</em> that include one
or multiple <em>sl-DRX-GC-BC-Cycle</em> that are mapped with one or
multiple <em>SL-QoS-Profile</em> in <em>sl-DRX-GC-BC-PerQoS-List</em>
and, if applicable, one <em>sl-DRX-GC-BC-Cycle</em> that is configured
in <em>sl-DefaultDRX-GC-BC</em> and cannot be mapped with any
<em>SL-QoS-Profile</em> in <em>sl-DRX-GC-BC-PerQoS-List</em> are
associated to a Destination Layer-2 ID and the associated cast type
groupcast or broadcast:</p>
<p>2&gt; select the <em>sl-DRX-GC-BC-Cycle</em> whose length is the
shortest one among multiple <em>sl-DRX-GC-BC-Cycle</em> that are mapped
with one or multiple <em>SL-QoS-Profile</em> in
<em>sl-DRX-GC-BC-PerQoS-List</em> and <em>sl-DRX-GC-BC-Cycle</em>
configured in <em>sl-DefaultDRX-GC-BC</em> associated with the
Destination Layer-2 ID.</p>
<p>1&gt; if a single <em>sl-DRX-GC-BC-OnDurationTimer</em> that is
mapped with one or multiple <em>SL-QoS-Profile</em> in
<em>sl-DRX-GC-BC-PerQoS-List</em> or a single
<em>sl-DRX-GC-BC-OnDurationTimer</em> that is configured in
<em>sl-DefaultDRX-GC-BC</em> and cannot be mapped with any
<em>SL-QoS-Profile</em> in <em>sl-DRX-GC-BC-PerQoS-List</em> is
associated to a Destination and the associated cast type is groupcast or
broadcast:</p>
<p>2&gt; select the <em>sl-DRX-GC-BC-OnDurationTimer</em> that is mapped
with one or multiple <em>SL-QoS-Profile</em> in
<em>sl-DRX-GC-BC-PerQoS-List</em> or the
<em>sl-DRX-GC-BC-OnDurationTimer</em> configured in
<em>sl-DefaultDRX-GC-BC</em> associated with the Destination.</p>
<p>1&gt; else if multiple <em>sl-DRX-GC-BC-OnDurationTimer</em> that
include one or multiple <em>sl-DRX-GC-BC-OnDurationTimer</em> that are
mapped with one or multiple <em>SL-QoS-Profile</em> in
<em>sl-DRX-GC-BC-PerQoS-List</em> and, if applicable, one
<em>sl-DRX-GC-BC-OnDurationTimer</em> that is configured in
<em>sl-DefaultDRX-GC-BC</em> and cannot be mapped with any
<em>SL-QoS-Profile</em> in <em>sl-DRX-GC-BC-PerQoS-List</em> are
associated to a Destination Layer-2 ID and the associated cast type is
groupcast or broadcast:</p>
<p>2&gt; select the <em>sl-DRX-GC-BC-OnDurationTimer</em> whose length
is the longest one among multiple <em>sl-DRX-GC-BC-OnDurationTimer</em>
that are mapped with one or multiple <em>SL-QoS-Profile</em> in
<em>sl-DRX-GC-BC-PerQoS-List</em> and <em>sl-DRX-GC-BC-Cycle</em>
configured in <em>sl-DefaultDRX-GC-BC</em> associated with the
Destination Layer-2 ID.</p>
<p>1&gt; if a single <em>sl-DRX-GC-InactivityTimer</em> that is mapped
with one or multiple <em>SL-QoS-Profile</em> in
<em>sl-DRX-GC-BC-PerQoS-List</em> or a single
<em>sl-DRX-GC-InactivityTimer</em> that is configured in
<em>sl-DefaultDRX-GC-BC</em> and cannot be mapped with any
<em>SL-QoS-Profile</em> in <em>sl-DRX-GC-BC-PerQoS-List</em> is
associated to a Destination and the associated cast type is
groupcast:</p>
<p>2&gt; select the <em>sl-DRX-GC-InactivityTimer</em> that is mapped
with one or multiple <em>SL-QoS-Profile</em> in
<em>sl-DRX-GC-BC-PerQoS-List</em> or the
<em>sl-DRX-GC-InactivityTimer</em> configured in
<em>sl-DefaultDRX-GC-BC</em> associated with the Destination:</p>
<p>1&gt; else if multiple <em>sl-DRX-GC-InactivityTimer</em> that
include one or multiple <em>sl-DRX-GC-InactivityTimer</em> that are
mapped with one or multiple <em>SL-QoS-Profile</em> in
<em>sl-DRX-GC-BC-PerQoS-List</em> and, if applicable, one
<em>sl-DRX-GC-InactivityTimer</em> that is configured in
<em>sl-DefaultDRX-GC-BC</em> and cannot be mapped with any
<em>SL-QoS-Profile</em> in <em>sl-DRX-GC-BC-PerQoS-List</em> of a
Destination Layer-2 ID and the associated cast type is groupcast:</p>
<p>2&gt; select <em>sl-DRX-GC-InactivityTimer</em> whose length is the
longest one among multiple <em>sl-DRX-GC-InactivityTimer</em> that are
mapped with one or multiple <em>SL-QoS-Profile</em> in
<em>sl-DRX-GC-BC-PerQoS-List</em> and <em>sl-DRX-GC-InactivityTimer</em>
configured in <em>sl-DefaultDRX-GC-BC</em> associated with the
Destination Layer-2 ID.</p>
<p>1&gt; if an <em>sl-drx-HARQ-RTT-Timer</em> expires:</p>
<p>2&gt; if the data of the corresponding Sidelink process was not
successfully decoded or if the HARQ feedback (i.e., negative
acknowledgement) is not transmitted for unicast due to UL/SL
prioritization:</p>
<blockquote>
<p>3&gt; start the
<em>sl-drx-RetransmissionTimer</em>/<em>sl-DRX-GC-RetransmissionTimer</em>
for the corresponding Sidelink process in the first slot after the
expiry of <em>sl-drx-HARQ-RTT-Timer</em>.</p>
</blockquote>
<p>When the cast type is groupcast or broadcast as indicated by upper
layer, or the cast type is unicast for the reception of Direct Link
Establishment Request message [28] or ProSe Direct Link Establishment
Request message [29] as indicated by upper layer, or for the reception
of discovery message [26], the <em>sl-drx-StartOffset</em> and
<em>sl-drx-SlotOffset</em> are derived from the following equations:</p>
<blockquote>
<p><em>sl-drx-StartOffset</em> (ms) = Destination Layer-2 ID modulo
<em>sl-DRX-GC-BC-Cycle</em> (ms).</p>
<p><em>sl-drx-SlotOffset</em> (ms) = (Destination Layer-2 ID modulo the
number of slots in one subframe)<br />
/ (the number of slots in one subframe) (ms).</p>
</blockquote>
<p>1&gt; if the SL DRX cycle is used, and [(DFN × 10) + subframe number]
modulo (<em>sl-drx-Cycle</em> or <em>sl-DRX-GC-BC-Cycle</em>) =
<em>sl-drx-StartOffset</em>:</p>
<p>2&gt; start
<em>sl-drx-onDurationTimer</em>/<em>sl-DRX-GC-BC-OnDurationTimer</em>
after <em>sl-drx-SlotOffset</em> from the beginning of the subframe.</p>
<p>1&gt; if an SL DRX is in Active Time:</p>
<p>2&gt; monitor the SCI (i.e., 1<sup>st</sup> stage SCI and
2<sup>nd</sup> stage SCI).</p>
<p>2&gt; if the SCI indicates a new SL transmission:</p>
<p>3&gt; if Source Layer-1 ID of the SCI is equal to the 8 LSB of the
intended Destination Layer-2 ID and Destination Layer-1 ID of the SCI is
equal to the 16 LSB of the intended Source Layer-2 ID and the cast type
indicator in the SCI is set to unicast:</p>
<p>4&gt; start or restart <em>sl-drx-InactivityTimer</em> for the
corresponding Source Layer-2 ID and Destination Layer-2 ID pair in the
first slot after SCI reception.</p>
<p>3&gt; if Destination Layer-1 ID of the SCI (i.e., 2<sup>nd</sup>
stage SCI) is equal to the 16 LSB of the intended Destination Layer-2 ID
and the cast type indicator in the SCI is set to groupcast:</p>
<p>4&gt; start or restart <em>sl-DRX-GC-InactivityTimer</em> for the
corresponding Destination Layer-2 ID in the first slot after SCI
reception.</p>
<p>2&gt; if the SCI indicates an SL transmission:</p>
<p>3&gt; if a next retransmission opportunity is indicated in the
SCI:</p>
<p>4&gt; derive the <em>sl-drx-HARQ-RTT-Timer</em> from the
retransmission resource timing of the next retransmission resource in
the SCI.</p>
<p>3&gt; else if PSFCH resource is configured for the SL grant
associated to the SCI:</p>
<p>4&gt; set the <em>sl-drx-HARQ-RTT-Timer</em> based on
<em>sl-drx-HARQ-RTT-Timer1</em> configured by upper layer if the cast
type associated with the SCI is unicast or
<em>sl-DRX-GC-HARQ-RTT-Timer1</em> configured by upper layer if the cast
type associated with the SCI is groupcast when HARQ feedback is enabled,
or based on <em>sl-drx-HARQ-RTT-Timer2</em> configured by upper layer if
the cast type associated with the SCI is unicast or
<em>sl-DRX-GC-HARQ-RTT-Timer2</em> configured by upper layer if the cast
type associated with the SCI is groupcast when HARQ feedback is
disabled, for resource pool configured with PSFCH.</p>
<p>3&gt; else (i.e., if PSFCH resource is not configured for the SL
grant associated to the SCI):</p>
<p>4&gt; set the <em>sl-drx-HARQ-RTT-Timer</em> as 0 slots.</p>
<blockquote>
<p>3&gt; if PSFCH resource is not configured for the SL grant associated
to the SCI:</p>
</blockquote>
<p>4&gt; start the <em>sl-drx-HARQ-RTT-Timer</em> for the corresponding
Sidelink process in the slot following the end of PSSCH transmission
(i.e., currently received PSSCH).</p>
<blockquote>
<p>3&gt; if PSFCH resource is configured for the SL grant associated to
the SCI:</p>
</blockquote>
<p>4&gt; if HARQ feedback is enabled by the SCI and the cast type
associated with the SCI is unicast; or</p>
<p>4&gt; if HARQ feedback is enabled by the SCI and the cast type
associated with the SCI is groupcast and positive-negative
acknowledgement is selected;</p>
<p>5&gt; start the <em>sl-drx-HARQ-RTT-Timer</em> for the corresponding
Sidelink process in the first slot after the end of the corresponding
PSFCH transmission carrying the SL HARQ feedback; or</p>
<p>5&gt; start the <em>sl-drx-HARQ-RTT-Timer</em> for the corresponding
Sidelink process in the first slot after the end of the corresponding
PSFCH resource for the SL HARQ feedback when the SL HARQ feedback is not
transmitted due to UL/SL prioritization.</p>
<p>4&gt; if HARQ feedback is enabled by the SCI and the cast type
associated with the SCI is groupcast and negative-only acknowledgement
is selected;</p>
<p>5&gt; start the <em>sl-drx-HARQ-RTT-Timer</em> for the corresponding
Sidelink process in the first slot after the end of the corresponding
PSFCH transmission carrying the SL HARQ feedback; or</p>
<p>5&gt; start the <em>sl-drx-HARQ-RTT-Timer</em> for the corresponding
Sidelink process in the first slot after the end of the corresponding
PSFCH resource for the SL HARQ feedback when the SL HARQ feedback is not
transmitted due to UL/SL prioritization; or</p>
<p>5&gt; start the <em>sl-drx-HARQ-RTT-Timer</em> for the corresponding
Sidelink process in the first slot after the end of the corresponding
PSFCH resource for the SL HARQ feedback when the SL HARQ feedback is a
positive acknowledgement.</p>
<p>4&gt; if HARQ feedback is disabled by the SCI and the resource(s) for
one or more retransmission opportunities is not scheduled in the
SCI:</p>
<p>5&gt; start the <em>sl-drx-HARQ-RTT-Timer</em> for the corresponding
Sidelink process in the slot following the end of PSFCH resource.</p>
<p>4&gt; if HARQ feedback is disabled by the SCI and the resource(s) for
one or more retransmission opportunities is scheduled in the SCI:</p>
<p>5&gt; start the <em>sl-drx-HARQ-RTT-Timer</em> for the corresponding
Sidelink process in the slot following the end of PSSCH transmission
(i.e., currently received PSSCH).</p>
<p>NOTE: Void.</p>
<blockquote>
<p>3&gt; stop the
<em>sl-drx-RetransmissionTimer</em>/<em>sl-DRX-GC-RetransmissionTimer</em>
for the corresponding Sidelink process.</p>
</blockquote>
<p>1&gt; if an SL DRX Command MAC CE is received for the Source Layer-2
ID and Destination Layer-2 ID pair of a unicast:</p>
<p>2&gt; stop <em>sl-drx-onDurationTimer</em> for the Source Layer-2 ID
and Destination Layer-2 ID pair of a unicast;</p>
<p>2&gt; stop <em>sl-drx-InactivityTimer</em> for the Source Layer-2 ID
and Destination Layer-2 ID pair of a unicast.</p>
<h3 id="behaviour-of-ue-transmitting-sl-sch-data">5.28.3 Behaviour of UE
transmitting SL-SCH Data</h3>
<p>The UE transmitting SL-SCH Data should keep aligned with its intended
UE receiving the SL-SCH Data regarding the SL DRX Active time as
specified in clause 5.28.2.</p>
<p>Furthermore, the UE transmitting SL-SCH Data determines the SL DRX
Active time based on SL DRX timers that are running (e.g.,
<em>sl-drx-onDurationTimer</em>/<em>sl-DRX-GC-BC-OnDurationTimer</em>,
<em>sl-drx-InactivityTimer</em>/<em>sl-DRX-GC-InactivityTimer</em>,
<em>sl-drx-RetransmissionTimer</em>/<em>sl-DRX-GC-RetransmissionTimer</em>)
or will be running in the future (e.g.,
<em>sl-drx-onDurationTimer</em>/<em>sl-DRX-GC-BC-OnDurationTimer</em>,
<em>sl-drx-InactivityTimer</em>/<em>sl-DRX-GC-InactivityTimer</em>,
<em>sl-drx-RetransmissionTimer</em>/<em>sl-DRX-GC-RetransmissionTimer</em>)
at the UE(s) receiving SL-SCH data. The UE may select resource for the
initial transmission of groupcast within the time when
<em>sl-DRX-GC-BC-OnDurationTimer</em> or
<em>sl-DRX-GC-InactivityTimer</em> of the destination is running.</p>
<p>NOTE 1: A UE may assume that a resource for retransmission is in the
Active time if an initial transmission causes the
<em>sl-drx-RetransmissionTimer</em>/<em>sl-DRX-GC-RetransmissionTimer</em>
to be started at the receiving UE.</p>
<p>NOTE 2: A UE may send SL DRX Command MAC CE to receiving UE for
unicast and when to send SL DRX Command MAC CE is up to UE
implementation.</p>
<p>The MAC entity shall for each Destination Layer-2 ID associated with
groupcast that is interested in NR sidelink transmision:</p>
<p>1&gt; if the SCI indicates a new transmission where the cast type is
set to groupcast is transmitted:</p>
<p>2&gt; start or restart <em>sl-DRX-GC-InactivityTimer</em> for the
corresponding Destination Layer-2 ID in the first slot after SCI
transmission.</p>
<p>The MAC entity shall for each pair of the Source Layer-2 ID and the
Destination Layer-2 ID corresponding to each PC5-RRC connection which
has been established by upper layers:</p>
<p>1&gt; if the SL DRX Command indication has been triggered by the
UE:</p>
<p>2&gt; if the MAC entity has SL resources allocated for new
transmission and the SL-SCH resources can accommodate the SL DRX Command
MAC CE and its subheader as a result of logical channel
prioritization:</p>
<p>3&gt; instruct the Multiplexing and Assembly procedure to generate a
Sidelink DRX Command MAC CE as defined in clause 6.1.3.52;</p>
<p>3&gt; cancel the triggered SL DRX Command indication.</p>
<p>2&gt; else if the MAC entity has been configured with Sidelink
resource allocation mode 1:</p>
<p>3&gt; trigger a Scheduling Request.</p>
<h2 id="activationdeactivation-of-scg">5.29 Activation/Deactivation of
SCG</h2>
<p>The network may activate and deactivate the configured SCG.</p>
<p>The MAC entity shall for the configured SCG:</p>
<p>1&gt; if upper layers indicate that SCG is activated:</p>
<p>2&gt; if <em>BFI_COUNTER</em> &gt;=
<em>beamFailureInstanceMaxCount</em> for the PSCell or the
<em>timeAlignmentTimer</em> associated with PTAG is not running:</p>
<p>3&gt; indicate to upper layers that a Random Access Procedure (as
specified in clause 5.1.1) is needed for SCG activation.</p>
<p>2&gt; activate the SCG according to the timing defined in TS 38.133
[11].</p>
<p>2&gt; (re-)initialize any suspended configured uplink grants of
configured grant Type 1 associated with this PSCell according to the
stored configuration, if any, and to start in the symbol according to
rules in clause 5.8.2.2;</p>
<p>2&gt; apply normal SCG operation including:</p>
<p>3&gt; SRS transmissions on the PSCell;</p>
<p>3&gt; CSI reporting for the PSCell;</p>
<p>3&gt; PDCCH monitoring on the PSCell;</p>
<p>3&gt; PUCCH transmissions on the PSCell;</p>
<p>3&gt; transmit on RACH on the PSCell;</p>
<p>3&gt; initialize <em>Bj</em> for each logical channel to zero.</p>
<p>1&gt; else if upper layers indicate that the SCG is deactivated:</p>
<p>2&gt; deactivate all the SCells of the SCG according to clause
5.9;</p>
<p>2&gt; deactivate SCG according to the timing defined in TS 38.133
[11];</p>
<p>2&gt; clear any configured downlink assignment and any configured
uplink grant Type 2 associated with the PSCell respectively;</p>
<p>2&gt; suspend any configured uplink grant Type 1 associated with the
PSCell;</p>
<p>2&gt; reset MAC according to clause 5.12.</p>
<p>1&gt; if the SCG is deactivated:</p>
<p>2&gt; not transmit SRS on the PSCell;</p>
<p>2&gt; not report CSI for the PSCell;</p>
<p>2&gt; not transmit on UL-SCH on the PSCell;</p>
<p>2&gt; not transmit PUCCH on the PSCell;</p>
<p>2&gt; not transmit on RACH on the PSCell;</p>
<p>2&gt; not monitor the PDCCH on the PSCell.</p>
<h2 id="handling-of-fr2-ul-gap">5.30 Handling of FR2 UL gap</h2>
<p>During the FR2 UL gap configured by <em>ul-GapFR2-Config</em> as
specified in TS 38.331 [5], the MAC entity shall, on the Serving Cell(s)
of FR2 single CC and intra-band CA, or on the Serving Cell(s) of FR2
inter-band CA where UE does not support
<em>tx-Support-UL-GapFR2</em>:</p>
<p>1&gt; only perform transmission of:</p>
<p>2&gt; PRACH preamble as specified in clause 5.1.2 and 5.1.2a;</p>
<p>2&gt; UL-SCH for Msg3 or the MSGA payload as specified in clause
5.4.2.2;</p>
<p>2&gt; UL-SCH for configured grant;</p>
<p>2&gt; the valid CSI report during SCell activation procedure where
the valid CSI report is valid CQI with non-zero CQI index defined in TS
38.214 [7], clause 5.2.2.1, when the time period between UL gap
colliding with CSI report of non-zero CQI and the slot where the SCell
activation MAC CE or CSI report activation command is received is no
less than 10 ms;</p>
<p>2&gt; the valid L1 RSRP report during SCell activation procedure,
where the valid L1 RSRP report is non lowest L1 RSRP defined in TS
38.133 [11], clause 10.1.6, when the time period between UL gap
colliding with L1 RSRP reporting and the slot where the SCell activation
MAC CE or CSI report activation command is received is no less than 10
ms;</p>
<p>2&gt; the PUCCH transmission for SR, and link recovery request (LRR)
defined in TS 38.133 [11], clause 8.5.</p>
<h1 id="protocol-data-units-formats-and-parameters">6 Protocol Data
Units, formats and parameters</h1>
<h2 id="protocol-data-units">6.1 Protocol Data Units</h2>
<h3 id="general-13">6.1.1 General</h3>
<p>A MAC PDU is a bit string that is byte aligned (i.e. multiple of 8
bits) in length. In the figures in clause 6, bit strings are represented
by tables in which the most significant bit is the leftmost bit of the
first line of the table, the least significant bit is the rightmost bit
on the last line of the table, and more generally the bit string is to
be read from left to right and then in the reading order of the lines.
The bit order of each parameter field within a MAC PDU is represented
with the first and most significant bit in the leftmost bit and the last
and least significant bit in the rightmost bit.</p>
<p>A MAC SDU is a bit string that is byte aligned (i.e. multiple of 8
bits) in length. A MAC SDU is included into a MAC PDU from the first bit
onward.</p>
<p>A MAC CE is a bit string that is byte aligned (i.e. multiple of 8
bits) in length.</p>
<p>A MAC subheader is a bit string that is byte aligned (i.e. multiple
of 8 bits) in length. Each MAC subheader is placed immediately in front
of the corresponding MAC SDU, MAC CE, or padding.</p>
<p>The MAC entity shall ignore the value of the Reserved bits in
downlink MAC PDUs.</p>
<h3
id="mac-pdu-dl-sch-and-ul-sch-except-transparent-mac-and-random-access-response">6.1.2
MAC PDU (DL-SCH and UL-SCH except transparent MAC and Random Access
Response)</h3>
<p>A MAC PDU consists of one or more MAC subPDUs. Each MAC subPDU
consists of one of the following:</p>
<p>- A MAC subheader only (including padding);</p>
<p>- A MAC subheader and a MAC SDU;</p>
<p>- A MAC subheader and a MAC CE;</p>
<p>- A MAC subheader and padding.</p>
<p>The MAC SDUs are of variable sizes.</p>
<p>Each MAC subheader corresponds to either a MAC SDU, a MAC CE, or
padding.</p>
<p>A MAC subheader except for fixed sized MAC CE, padding, and a MAC SDU
containing UL CCCH consists of the header fields R/F/LCID/(eLCID)/L. A
MAC subheader for fixed sized MAC CE, padding, and a MAC SDU containing
UL CCCH consists of the two header fields R/LCID/(eLCID).</p>
<p><img src="media/image6.svg" /></p>
<p><img src="media/image7.svg" /></p>
<p><img src="media/image8.svg" /></p>
<p>Figure 6.1.2-1: R/F/LCID/(eLCID)/L MAC subheader with 8-bit L
field</p>
<p><img src="media/image9.svg" /></p>
<p><img src="media/image10.svg" /></p>
<p><img src="media/image11.svg" /></p>
<p>Figure 6.1.2-2: R/F/LCID/(eLCID)/L MAC subheader with 16-bit L
field</p>
<p><img src="media/image12.svg" /></p>
<p><img src="media/image13.svg" /></p>
<p>Figure 6.1.2-3: R/LCID/(eLCID) MAC subheader</p>
<p>MAC CEs are placed together. DL MAC subPDU(s) with MAC CE(s) is
placed before any MAC subPDU with MAC SDU and MAC subPDU with padding as
depicted in Figure 6.1.2-4. UL MAC subPDU(s) with MAC CE(s) is placed
after all the MAC subPDU(s) with MAC SDU and before the MAC subPDU with
padding in the MAC PDU as depicted in Figure 6.1.2-5. The size of
padding can be zero.</p>
<p><img src="media/image14.svg" /></p>
<p>Figure 6.1.2-4: Example of a DL MAC PDU</p>
<p><img src="media/image15.svg" /></p>
<p>Figure 6.1.2-5: Example of a UL MAC PDU</p>
<p>A maximum of one MAC PDU can be transmitted per TB per MAC
entity.</p>
<h3 id="mac-control-elements-ces">6.1.3 MAC Control Elements (CEs)</h3>
<h4 id="buffer-status-report-mac-ces">6.1.3.1 Buffer Status Report MAC
CEs</h4>
<p>Buffer Status Report (BSR) MAC CEs consist of either:</p>
<p>- Short BSR format (fixed size); or</p>
<p>- Extended Short BSR format (fixed size); or</p>
<p>- Long BSR format (variable size); or</p>
<p>- Extended Long BSR format (variable size); or</p>
<p>- Short Truncated BSR format (fixed size); or</p>
<p>- Extended Short Truncated BSR format (fixed size); or</p>
<p>- Long Truncated BSR format (variable size); or</p>
<p>- Extended Long Truncated BSR format (variable size).</p>
<p>Pre-emptive BSR MAC CE consists of:</p>
<p>- Pre-emptive BSR format (variable size); or</p>
<p>- Extended Pre-emptive BSR format (variable size).</p>
<p>The BSR formats are identified by MAC subheaders with LCIDs as
specified in Table 6.2.1-2.</p>
<p>The Extended BSR formats and Pre-emptive BSR format are identified by
MAC subheaders with eLCIDs as specified in Table 6.2.1-2b.</p>
<p>The fields in the BSR MAC CE are defined as follows:</p>
<p>- LCG ID: The Logical Channel Group ID field identifies the group of
logical channel(s) whose buffer status is being reported. The length of
the field is 3 bits for the case of Short BSR and Short Truncated BSR
formats, and 8 bits for the case of Extended Short BSR and Extended
Short Truncated BSR formats;</p>
<p>- LCG<sub>i</sub>: For the Long BSR format, Extended Long BSR format,
Pre-emptive BSR format, and Extended Pre-emptive BSR format, this field
indicates the presence of the Buffer Size field for the logical channel
group i. The LCG<sub>i</sub> field set to 1 indicates that the Buffer
Size field for the logical channel group i is reported. The
LCG<sub>i</sub> field set to 0 indicates that the Buffer Size field for
the logical channel group i is not reported. For the Long Truncated BSR
format and the Extended Long Truncated BSR format, this field indicates
whether logical channel group i has data available. The LCG<sub>i</sub>
field set to 1 indicates that logical channel group i has data
available. The LCG<sub>i</sub> field set to 0 indicates that logical
channel group i does not have data available;</p>
<p>- Buffer Size: The Buffer Size field identifies the total amount of
data available according to the data volume calculation procedure in TSs
38.322 [3] and 38.323 [4] across all logical channels of a logical
channel group after the MAC PDU has been built (i.e. after the logical
channel prioritization procedure, which may result the value of the
Buffer Size field to zero). The amount of data is indicated in number of
bytes. The size of the RLC headers and MAC subheaders are not considered
in the buffer size computation. The length of this field for the Short
BSR format and the Short Truncated BSR format is 5 bits. The length of
this field for the Extended Short BSR format and the Extended Short
Truncated BSR format is 8 bits. The length of this field for the Long
BSR format, the Long Truncated BSR format, the Extended Long BSR format,
and the Extended Long Truncated format is 8 bits. The values for the
5-bit and 8-bit Buffer Size fields are shown in Tables 6.1.3.1-1 and
6.1.3.1-2, respectively. For the Long BSR format, the Long Truncated BSR
format, the Extended Long BSR format, and the Extended Long Truncated
format, the Buffer Size fields are included in ascending order based on
the LCG<sub>i</sub>. For the Long Truncated BSR format and the Extended
Long Truncated format the number of Buffer Size fields included is
maximised, while not exceeding the number of padding bits. For the
Pre-emptive BSR format and the Extended Pre-emptive BSR format, the
Buffer Size field identifies the total amount of the data expected to
arrive at the IAB-MT of the node where the Pre-emptive BSR/Extended
Pre-emptive BSR is triggered and does not include the volume of data
currently available in the IAB-MT. Pre-emptive BSR format is identical
to the Long BSR format. Extended Pre-emptive BSR format is identical to
the Extended Long BSR format.</p>
<p>NOTE 1: For the Pre-emptive BSR, if configured, the LCGs to be
reported, the expected data volume calculation, the exact time to report
Pre-emptive BSR and the associated LCH are left to implementation.</p>
<p>NOTE 2: The mapping of LCGs between the ingress and egress links of
an IAB node for purposes of determining expected change in occupancy of
IAB-MT buffers (to be reported as Pre-emptive BSR) is left to
implementation.</p>
<p>NOTE 3: The number of the Buffer Size fields in the Long BSR,
Extended Long BSR, Long Truncated BSR, and Extended Long Truncated BSR
format can be zero.</p>
<p>NOTE 4: The Extended versions of the BSR formats can only be used by
IAB nodes.</p>
<p><img src="media/image16.svg" /></p>
<p>Figure 6.1.3.1-1: Short BSR and Short Truncated BSR MAC CE</p>
<p><img src="media/image17.svg" /></p>
<p>Figure 6.1.3.1-2: Long BSR, Long Truncated BSR, and Pre-emptive BSR
MAC CE</p>
<p><img src="media/image18.svg" /></p>
<p>Figure 6.1.3.1-3: Extended Short BSR and Extended Short Truncated BSR
MAC CE</p>
<p><img src="media/image19.svg" /></p>
<p>Figure 6.1.3.1-4: Extended Long BSR, Extended Long Truncated BSR, and
Extended Pre-emptive BSR MAC CE</p>
<p>Table 6.1.3.1-1: Buffer size levels (in bytes) for 5-bit Buffer Size
field</p>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 14%" />
<col style="width: 10%" />
<col style="width: 14%" />
<col style="width: 10%" />
<col style="width: 14%" />
<col style="width: 10%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>BS value</th>
<th>Index</th>
<th>BS value</th>
<th>Index</th>
<th>BS value</th>
<th>Index</th>
<th>BS value</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>8</td>
<td>≤ 102</td>
<td>16</td>
<td>≤ 1446</td>
<td>24</td>
<td>≤ 20516</td>
</tr>
<tr>
<td>1</td>
<td>≤ 10</td>
<td>9</td>
<td>≤ 142</td>
<td>17</td>
<td>≤ 2014</td>
<td>25</td>
<td>≤ 28581</td>
</tr>
<tr>
<td>2</td>
<td>≤ 14</td>
<td>10</td>
<td>≤ 198</td>
<td>18</td>
<td>≤ 2806</td>
<td>26</td>
<td>≤ 39818</td>
</tr>
<tr>
<td>3</td>
<td>≤ 20</td>
<td>11</td>
<td>≤ 276</td>
<td>19</td>
<td>≤ 3909</td>
<td>27</td>
<td>≤ 55474</td>
</tr>
<tr>
<td>4</td>
<td>≤ 28</td>
<td>12</td>
<td>≤ 384</td>
<td>20</td>
<td>≤ 5446</td>
<td>28</td>
<td>≤ 77284</td>
</tr>
<tr>
<td>5</td>
<td>≤ 38</td>
<td>13</td>
<td>≤ 535</td>
<td>21</td>
<td>≤ 7587</td>
<td>29</td>
<td>≤ 107669</td>
</tr>
<tr>
<td>6</td>
<td>≤ 53</td>
<td>14</td>
<td>≤ 745</td>
<td>22</td>
<td>≤ 10570</td>
<td>30</td>
<td>≤ 150000</td>
</tr>
<tr>
<td>7</td>
<td>≤ 74</td>
<td>15</td>
<td>≤ 1038</td>
<td>23</td>
<td>≤ 14726</td>
<td>31</td>
<td>&gt; 150000</td>
</tr>
</tbody>
</table>
<p>Table 6.1.3.1-2: Buffer size levels (in bytes) for 8-bit Buffer Size
field</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 12%" />
<col style="width: 9%" />
<col style="width: 12%" />
<col style="width: 9%" />
<col style="width: 15%" />
<col style="width: 9%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>BS value</th>
<th>Index</th>
<th>BS value</th>
<th>Index</th>
<th>BS value</th>
<th>Index</th>
<th>BS value</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>64</td>
<td>≤ 560</td>
<td>128</td>
<td>≤ 31342</td>
<td>192</td>
<td>≤ 1754595</td>
</tr>
<tr>
<td>1</td>
<td>≤ 10</td>
<td>65</td>
<td>≤ 597</td>
<td>129</td>
<td>≤ 33376</td>
<td>193</td>
<td>≤ 1868488</td>
</tr>
<tr>
<td>2</td>
<td>≤ 11</td>
<td>66</td>
<td>≤ 635</td>
<td>130</td>
<td>≤ 35543</td>
<td>194</td>
<td>≤ 1989774</td>
</tr>
<tr>
<td>3</td>
<td>≤ 12</td>
<td>67</td>
<td>≤ 677</td>
<td>131</td>
<td>≤ 37850</td>
<td>195</td>
<td>≤ 2118933</td>
</tr>
<tr>
<td>4</td>
<td>≤ 13</td>
<td>68</td>
<td>≤ 720</td>
<td>132</td>
<td>≤ 40307</td>
<td>196</td>
<td>≤ 2256475</td>
</tr>
<tr>
<td>5</td>
<td>≤ 14</td>
<td>69</td>
<td>≤ 767</td>
<td>133</td>
<td>≤ 42923</td>
<td>197</td>
<td>≤ 2402946</td>
</tr>
<tr>
<td>6</td>
<td>≤ 15</td>
<td>70</td>
<td>≤ 817</td>
<td>134</td>
<td>≤ 45709</td>
<td>198</td>
<td>≤ 2558924</td>
</tr>
<tr>
<td>7</td>
<td>≤ 16</td>
<td>71</td>
<td>≤ 870</td>
<td>135</td>
<td>≤ 48676</td>
<td>199</td>
<td>≤ 2725027</td>
</tr>
<tr>
<td>8</td>
<td>≤ 17</td>
<td>72</td>
<td>≤ 926</td>
<td>136</td>
<td>≤ 51836</td>
<td>200</td>
<td>≤ 2901912</td>
</tr>
<tr>
<td>9</td>
<td>≤ 18</td>
<td>73</td>
<td>≤ 987</td>
<td>137</td>
<td>≤ 55200</td>
<td>201</td>
<td>≤ 3090279</td>
</tr>
<tr>
<td>10</td>
<td>≤ 19</td>
<td>74</td>
<td>≤ 1051</td>
<td>138</td>
<td>≤ 58784</td>
<td>202</td>
<td>≤ 3290873</td>
</tr>
<tr>
<td>11</td>
<td>≤ 20</td>
<td>75</td>
<td>≤ 1119</td>
<td>139</td>
<td>≤ 62599</td>
<td>203</td>
<td>≤ 3504487</td>
</tr>
<tr>
<td>12</td>
<td>≤ 22</td>
<td>76</td>
<td>≤ 1191</td>
<td>140</td>
<td>≤ 66663</td>
<td>204</td>
<td>≤ 3731968</td>
</tr>
<tr>
<td>13</td>
<td>≤ 23</td>
<td>77</td>
<td>≤ 1269</td>
<td>141</td>
<td>≤ 70990</td>
<td>205</td>
<td>≤ 3974215</td>
</tr>
<tr>
<td>14</td>
<td>≤ 25</td>
<td>78</td>
<td>≤ 1351</td>
<td>142</td>
<td>≤ 75598</td>
<td>206</td>
<td>≤ 4232186</td>
</tr>
<tr>
<td>15</td>
<td>≤ 26</td>
<td>79</td>
<td>≤ 1439</td>
<td>143</td>
<td>≤ 80505</td>
<td>207</td>
<td>≤ 4506902</td>
</tr>
<tr>
<td>16</td>
<td>≤ 28</td>
<td>80</td>
<td>≤ 1532</td>
<td>144</td>
<td>≤ 85730</td>
<td>208</td>
<td>≤ 4799451</td>
</tr>
<tr>
<td>17</td>
<td>≤ 30</td>
<td>81</td>
<td>≤ 1631</td>
<td>145</td>
<td>≤ 91295</td>
<td>209</td>
<td>≤ 5110989</td>
</tr>
<tr>
<td>18</td>
<td>≤ 32</td>
<td>82</td>
<td>≤ 1737</td>
<td>146</td>
<td>≤ 97221</td>
<td>210</td>
<td>≤ 5442750</td>
</tr>
<tr>
<td>19</td>
<td>≤ 34</td>
<td>83</td>
<td>≤ 1850</td>
<td>147</td>
<td>≤ 103532</td>
<td>211</td>
<td>≤ 5796046</td>
</tr>
<tr>
<td>20</td>
<td>≤ 36</td>
<td>84</td>
<td>≤ 1970</td>
<td>148</td>
<td>≤ 110252</td>
<td>212</td>
<td>≤ 6172275</td>
</tr>
<tr>
<td>21</td>
<td>≤ 38</td>
<td>85</td>
<td>≤ 2098</td>
<td>149</td>
<td>≤ 117409</td>
<td>213</td>
<td>≤ 6572925</td>
</tr>
<tr>
<td>22</td>
<td>≤ 40</td>
<td>86</td>
<td>≤ 2234</td>
<td>150</td>
<td>≤ 125030</td>
<td>214</td>
<td>≤ 6999582</td>
</tr>
<tr>
<td>23</td>
<td>≤ 43</td>
<td>87</td>
<td>≤ 2379</td>
<td>151</td>
<td>≤ 133146</td>
<td>215</td>
<td>≤ 7453933</td>
</tr>
<tr>
<td>24</td>
<td>≤ 46</td>
<td>88</td>
<td>≤ 2533</td>
<td>152</td>
<td>≤ 141789</td>
<td>216</td>
<td>≤ 7937777</td>
</tr>
<tr>
<td>25</td>
<td>≤ 49</td>
<td>89</td>
<td>≤ 2698</td>
<td>153</td>
<td>≤ 150992</td>
<td>217</td>
<td>≤ 8453028</td>
</tr>
<tr>
<td>26</td>
<td>≤ 52</td>
<td>90</td>
<td>≤ 2873</td>
<td>154</td>
<td>≤ 160793</td>
<td>218</td>
<td>≤ 9001725</td>
</tr>
<tr>
<td>27</td>
<td>≤ 55</td>
<td>91</td>
<td>≤ 3059</td>
<td>155</td>
<td>≤ 171231</td>
<td>219</td>
<td>≤ 9586039</td>
</tr>
<tr>
<td>28</td>
<td>≤ 59</td>
<td>92</td>
<td>≤ 3258</td>
<td>156</td>
<td>≤ 182345</td>
<td>220</td>
<td>≤ 10208280</td>
</tr>
<tr>
<td>29</td>
<td>≤ 62</td>
<td>93</td>
<td>≤ 3469</td>
<td>157</td>
<td>≤ 194182</td>
<td>221</td>
<td>≤ 10870913</td>
</tr>
<tr>
<td>30</td>
<td>≤ 66</td>
<td>94</td>
<td>≤ 3694</td>
<td>158</td>
<td>≤ 206786</td>
<td>222</td>
<td>≤ 11576557</td>
</tr>
<tr>
<td>31</td>
<td>≤ 71</td>
<td>95</td>
<td>≤ 3934</td>
<td>159</td>
<td>≤ 220209</td>
<td>223</td>
<td>≤ 12328006</td>
</tr>
<tr>
<td>32</td>
<td>≤ 75</td>
<td>96</td>
<td>≤ 4189</td>
<td>160</td>
<td>≤ 234503</td>
<td>224</td>
<td>≤ 13128233</td>
</tr>
<tr>
<td>33</td>
<td>≤ 80</td>
<td>97</td>
<td>≤ 4461</td>
<td>161</td>
<td>≤ 249725</td>
<td>225</td>
<td>≤ 13980403</td>
</tr>
<tr>
<td>34</td>
<td>≤ 85</td>
<td>98</td>
<td>≤ 4751</td>
<td>162</td>
<td>≤ 265935</td>
<td>226</td>
<td>≤ 14887889</td>
</tr>
<tr>
<td>35</td>
<td>≤ 91</td>
<td>99</td>
<td>≤ 5059</td>
<td>163</td>
<td>≤ 283197</td>
<td>227</td>
<td>≤ 15854280</td>
</tr>
<tr>
<td>36</td>
<td>≤ 97</td>
<td>100</td>
<td>≤ 5387</td>
<td>164</td>
<td>≤ 301579</td>
<td>228</td>
<td>≤ 16883401</td>
</tr>
<tr>
<td>37</td>
<td>≤ 103</td>
<td>101</td>
<td>≤ 5737</td>
<td>165</td>
<td>≤ 321155</td>
<td>229</td>
<td>≤ 17979324</td>
</tr>
<tr>
<td>38</td>
<td>≤ 110</td>
<td>102</td>
<td>≤ 6109</td>
<td>166</td>
<td>≤ 342002</td>
<td>230</td>
<td>≤ 19146385</td>
</tr>
<tr>
<td>39</td>
<td>≤ 117</td>
<td>103</td>
<td>≤ 6506</td>
<td>167</td>
<td>≤ 364202</td>
<td>231</td>
<td>≤ 20389201</td>
</tr>
<tr>
<td>40</td>
<td>≤ 124</td>
<td>104</td>
<td>≤ 6928</td>
<td>168</td>
<td>≤ 387842</td>
<td>232</td>
<td>≤ 21712690</td>
</tr>
<tr>
<td>41</td>
<td>≤ 132</td>
<td>105</td>
<td>≤ 7378</td>
<td>169</td>
<td>≤ 413018</td>
<td>233</td>
<td>≤ 23122088</td>
</tr>
<tr>
<td>42</td>
<td>≤ 141</td>
<td>106</td>
<td>≤ 7857</td>
<td>170</td>
<td>≤ 439827</td>
<td>234</td>
<td>≤ 24622972</td>
</tr>
<tr>
<td>43</td>
<td>≤ 150</td>
<td>107</td>
<td>≤ 8367</td>
<td>171</td>
<td>≤ 468377</td>
<td>235</td>
<td>≤ 26221280</td>
</tr>
<tr>
<td>44</td>
<td>≤ 160</td>
<td>108</td>
<td>≤ 8910</td>
<td>172</td>
<td>≤ 498780</td>
<td>236</td>
<td>≤ 27923336</td>
</tr>
<tr>
<td>45</td>
<td>≤ 170</td>
<td>109</td>
<td>≤ 9488</td>
<td>173</td>
<td>≤ 531156</td>
<td>237</td>
<td>≤ 29735875</td>
</tr>
<tr>
<td>46</td>
<td>≤ 181</td>
<td>110</td>
<td>≤ 10104</td>
<td>174</td>
<td>≤ 565634</td>
<td>238</td>
<td>≤ 31666069</td>
</tr>
<tr>
<td>47</td>
<td>≤ 193</td>
<td>111</td>
<td>≤ 10760</td>
<td>175</td>
<td>≤ 602350</td>
<td>239</td>
<td>≤ 33721553</td>
</tr>
<tr>
<td>48</td>
<td>≤ 205</td>
<td>112</td>
<td>≤ 11458</td>
<td>176</td>
<td>≤ 641449</td>
<td>240</td>
<td>≤ 35910462</td>
</tr>
<tr>
<td>49</td>
<td>≤ 218</td>
<td>113</td>
<td>≤ 12202</td>
<td>177</td>
<td>≤ 683087</td>
<td>241</td>
<td>≤ 38241455</td>
</tr>
<tr>
<td>50</td>
<td>≤ 233</td>
<td>114</td>
<td>≤ 12994</td>
<td>178</td>
<td>≤ 727427</td>
<td>242</td>
<td>≤ 40723756</td>
</tr>
<tr>
<td>51</td>
<td>≤ 248</td>
<td>115</td>
<td>≤ 13838</td>
<td>179</td>
<td>≤ 774645</td>
<td>243</td>
<td>≤ 43367187</td>
</tr>
<tr>
<td>52</td>
<td>≤ 264</td>
<td>116</td>
<td>≤ 14736</td>
<td>180</td>
<td>≤ 824928</td>
<td>244</td>
<td>≤ 46182206</td>
</tr>
<tr>
<td>53</td>
<td>≤ 281</td>
<td>117</td>
<td>≤ 15692</td>
<td>181</td>
<td>≤ 878475</td>
<td>245</td>
<td>≤ 49179951</td>
</tr>
<tr>
<td>54</td>
<td>≤ 299</td>
<td>118</td>
<td>≤ 16711</td>
<td>182</td>
<td>≤ 935498</td>
<td>246</td>
<td>≤ 52372284</td>
</tr>
<tr>
<td>55</td>
<td>≤ 318</td>
<td>119</td>
<td>≤ 17795</td>
<td>183</td>
<td>≤ 996222</td>
<td>247</td>
<td>≤ 55771835</td>
</tr>
<tr>
<td>56</td>
<td>≤ 339</td>
<td>120</td>
<td>≤ 18951</td>
<td>184</td>
<td>≤ 1060888</td>
<td>248</td>
<td>≤ 59392055</td>
</tr>
<tr>
<td>57</td>
<td>≤ 361</td>
<td>121</td>
<td>≤ 20181</td>
<td>185</td>
<td>≤ 1129752</td>
<td>249</td>
<td>≤ 63247269</td>
</tr>
<tr>
<td>58</td>
<td>≤ 384</td>
<td>122</td>
<td>≤ 21491</td>
<td>186</td>
<td>≤ 1203085</td>
<td>250</td>
<td>≤ 67352729</td>
</tr>
<tr>
<td>59</td>
<td>≤ 409</td>
<td>123</td>
<td>≤ 22885</td>
<td>187</td>
<td>≤ 1281179</td>
<td>251</td>
<td>≤ 71724679</td>
</tr>
<tr>
<td>60</td>
<td>≤ 436</td>
<td>124</td>
<td>≤ 24371</td>
<td>188</td>
<td>≤ 1364342</td>
<td>252</td>
<td>≤ 76380419</td>
</tr>
<tr>
<td>61</td>
<td>≤ 464</td>
<td>125</td>
<td>≤ 25953</td>
<td>189</td>
<td>≤ 1452903</td>
<td>253</td>
<td>≤ 81338368</td>
</tr>
<tr>
<td>62</td>
<td>≤ 494</td>
<td>126</td>
<td>≤ 27638</td>
<td>190</td>
<td>≤ 1547213</td>
<td>254</td>
<td>&gt; 81338368</td>
</tr>
<tr>
<td>63</td>
<td>≤ 526</td>
<td>127</td>
<td>≤ 29431</td>
<td>191</td>
<td>≤ 1647644</td>
<td>255</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<h4 id="c-rnti-mac-ce">6.1.3.2 C-RNTI MAC CE</h4>
<p>The C-RNTI MAC CE is identified by MAC subheader with LCID as
specified in Table 6.2.1-2.</p>
<p>It has a fixed size and consists of a single field defined as follows
(Figure 6.1.3.2-1):</p>
<p>- C-RNTI: This field contains the C-RNTI of the MAC entity. The
length of the field is 16 bits.</p>
<p><img src="media/image20.svg" /></p>
<p>Figure 6.1.3.2-1: C-RNTI MAC CE</p>
<h4 id="ue-contention-resolution-identity-mac-ce">6.1.3.3 UE Contention
Resolution Identity MAC CE</h4>
<p>The UE Contention Resolution Identity MAC CE is identified by MAC
subheader with LCID as specified in Table 6.2.1-1.</p>
<p>It has a fixed 48-bit size and consists of a single field defined as
follows (Figure 6.1.3.3-1):</p>
<p>- UE Contention Resolution Identity: This field contains the UL CCCH
SDU. If the UL CCCH SDU is longer than 48 bits, this field contains the
first 48 bits of the UL CCCH SDU.</p>
<p><img src="media/image21.svg" /></p>
<p>Figure 6.1.3.3-1: UE Contention Resolution Identity MAC CE</p>
<h4 id="timing-advance-command-mac-ce">6.1.3.4 Timing Advance Command
MAC CE</h4>
<p>The Timing Advance Command MAC CE is identified by MAC subheader with
LCID as specified in Table 6.2.1-1.</p>
<p>It has a fixed size and consists of a single octet defined as follows
(Figure 6.1.3.4-1):</p>
<p>- TAG Identity (TAG ID): This field indicates the TAG Identity of the
addressed TAG. The TAG containing the SpCell has the TAG Identity 0. The
length of the field is 2 bits;</p>
<p>- Timing Advance Command: This field indicates the index value
<em>T<sub>A</sub></em> (0, 1, 2… 63) used to control the amount of
timing adjustment that MAC entity has to apply (as specified in TS
38.213 [6]). The length of the field is 6 bits.</p>
<p><img src="media/image22.svg" /></p>
<p>Figure 6.1.3.4-1: Timing Advance Command MAC CE</p>
<h4 id="a-absolute-timing-advance-command-mac-ce">6.1.3.4a Absolute
Timing Advance Command MAC CE</h4>
<p>The Absolute Timing Advance Command MAC CE is identified by MAC
subheader with eLCID as specified in Table 6.2.1-1b.</p>
<p>It has a fixed size and consists of two octets defined as follows
(Figure 6.1.3.4a-1):</p>
<p>- Timing Advance Command: This field indicates the index value TA
used to control the amount of timing adjustment that the MAC entity has
to apply in TS 38.213 [6]. The size of the field is 12 bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image23.svg" /></p>
<p>Figure 6.1.3.4a-1: Absolute Timing Advance Command MAC CE</p>
<h4 id="drx-command-mac-ce">6.1.3.5 DRX Command MAC CE</h4>
<p>The DRX Command MAC CE is identified by a MAC subheader with LCID as
specified in Table 6.2.1-1.</p>
<p>It has a fixed size of zero bits.</p>
<h4 id="long-drx-command-mac-ce">6.1.3.6 Long DRX Command MAC CE</h4>
<p>The Long DRX Command MAC CE is identified by a MAC subheader with
LCID as specified in Table 6.2.1-1.</p>
<p>It has a fixed size of zero bits.</p>
<h4 id="configured-grant-confirmation-mac-ce">6.1.3.7 Configured Grant
Confirmation MAC CE</h4>
<p>The Configured Grant Confirmation MAC CE is identified by a MAC
subheader with LCID as specified in Table 6.2.1-2.</p>
<p>It has a fixed size of zero bits.</p>
<h4 id="single-entry-phr-mac-ce">6.1.3.8 Single Entry PHR MAC CE</h4>
<p>The Single Entry PHR MAC CE is identified by a MAC subheader with
LCID as specified in Table 6.2.1-2.</p>
<p>It has a fixed size and consists of two octets defined as follows
(figure 6.1.3.8-1):</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Power Headroom (PH): This field indicates the power headroom level.
The length of the field is 6 bits. The reported PH and the corresponding
power headroom levels are shown in Table 6.1.3.8-1 below (the
corresponding measured values in dB are specified in TS 38.133
[11]);</p>
<p>- P: If <em>mpe-Reporting-FR2</em> is configured and the Serving Cell
operates on FR2, the MAC entity shall set this field to 0 if the applied
P-MPR value, to meet MPE requirements, as specified in TS 38.101-2 [15],
is less than P-MPR_00 as specified in TS 38.133 [11] and to 1 otherwise.
If <em>mpe-Reporting-FR2</em> is not configured or the Serving Cell
operates on FR1, this field indicates whether power backoff is applied
due to power management (as allowed by P-MPR<sub>c</sub> as specified in
TS 38.101-1 [14], TS 38.101-2 [15], and TS 38.101-3 [16]). The MAC
entity shall set the P field to 1 if the corresponding
P<sub>CMAX,f,c</sub> field would have had a different value if no power
backoff due to power management had been applied;</p>
<p>- P<sub>CMAX,f,c</sub>: This field indicates the P<sub>CMAX,f,c</sub>
(as specified in TS 38.213 [6]) used for calculation of the preceding PH
field. The reported P<sub>CMAX,f,c</sub> and the corresponding nominal
UE transmit power levels are shown in Table 6.1.3.8-2 (the corresponding
measured values in dBm are specified in TS 38.133 [11]);</p>
<p>- MPE: If <em>mpe-Reporting-FR2</em> is configured, and the Serving
Cell operates on FR2, and if the P field is set to 1, this field
indicates the applied power backoff to meet MPE requirements, as
specified in TS 38.101-2 [15]. This field indicates an index to Table
6.1.3.8-3 and the corresponding measured values of P-MPR levels in dB
are specified in TS 38.133 [11]. The length of the field is 2 bits. If
<em>mpe-Reporting-FR2</em> is not configured, or if the Serving Cell
operates on FR1, or if the P field is set to 0, R bits are present
instead.</p>
<p><img src="media/image24.svg" /></p>
<p>Figure 6.1.3.8-1: Single Entry PHR MAC CE</p>
<p>Table 6.1.3.8-1: Power Headroom levels for PHR</p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<tbody>
<tr>
<td>PH</td>
<td>Power Headroom Level</td>
</tr>
<tr>
<td>0</td>
<td>POWER_HEADROOM_0</td>
</tr>
<tr>
<td>1</td>
<td>POWER_HEADROOM_1</td>
</tr>
<tr>
<td>2</td>
<td>POWER_HEADROOM_2</td>
</tr>
<tr>
<td>3</td>
<td>POWER_HEADROOM_3</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td>60</td>
<td>POWER_HEADROOM_60</td>
</tr>
<tr>
<td>61</td>
<td>POWER_HEADROOM_61</td>
</tr>
<tr>
<td>62</td>
<td>POWER_HEADROOM_62</td>
</tr>
<tr>
<td>63</td>
<td>POWER_HEADROOM_63</td>
</tr>
</tbody>
</table>
<p>Table 6.1.3.8-2: Nominal UE transmit power level for PHR</p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<tbody>
<tr>
<td>P<sub>CMAX,f,c</sub></td>
<td>Nominal UE transmit power level</td>
</tr>
<tr>
<td>0</td>
<td><blockquote>
<p>PCMAX_C_00</p>
</blockquote></td>
</tr>
<tr>
<td>1</td>
<td><blockquote>
<p>PCMAX_C_01</p>
</blockquote></td>
</tr>
<tr>
<td>2</td>
<td><blockquote>
<p>PCMAX_C_02</p>
</blockquote></td>
</tr>
<tr>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td>61</td>
<td><blockquote>
<p>PCMAX_C_61</p>
</blockquote></td>
</tr>
<tr>
<td>62</td>
<td><blockquote>
<p>PCMAX_C_62</p>
</blockquote></td>
</tr>
<tr>
<td>63</td>
<td><blockquote>
<p>PCMAX_C_63</p>
</blockquote></td>
</tr>
</tbody>
</table>
<p>Table 6.1.3.8-3: Effective power reduction for MPE P-MPR</p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">MPE</th>
<th style="text-align: center;">Measured P-MPR value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">P-MPR_00</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">P-MPR_01</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">P-MPR_02</td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;">P-MPR_03</td>
</tr>
</tbody>
</table>
<h4 id="multiple-entry-phr-mac-ce">6.1.3.9 Multiple Entry PHR MAC
CE</h4>
<p>The Multiple Entry PHR MAC CE is identified by a MAC subheader with
LCID as specified in Table 6.2.1-2.</p>
<p>It has a variable size, and includes the bitmap, a Type 2 PH field
and an octet containing the associated P<sub>CMAX,f,c</sub> field (if
reported) for SpCell of the other MAC entity, a Type 1 PH field and an
octet containing the associated P<sub>CMAX,f,c</sub> field (if reported)
for the PCell. It further includes, in ascending order based on the
<em>ServCellIndex</em>, one or multiple of Type X PH fields and octets
containing the associated P<sub>CMAX,f,c</sub> fields (if reported) for
Serving Cells other than PCell indicated in the bitmap. X is either 1 or
3 according to TS 38.213 [6] and TS 36.213 [17].</p>
<p>The presence of Type 2 PH field for SpCell of the other MAC entity is
configured by <em>phr-Type2OtherCell</em> with value <em>true</em>.</p>
<p>A single octet bitmap is used for indicating the presence of PH per
Serving Cell when the highest <em>ServCellIndex</em> of Serving Cell
with configured uplink is less than 8, otherwise four octets are
used.</p>
<p>The MAC entity determines whether PH value for an activated Serving
Cell is based on real transmission or a reference format by considering
the configured grant(s) and downlink control information which has been
received until and including the PDCCH occasion in which the first UL
grant for a new transmission that can accommodate the MAC CE for PHR as
a result of LCP as defined in clause 5.4.3.1 is received since a PHR has
been triggered if the PHR MAC CE is reported on an uplink grant received
on the PDCCH or until the first uplink symbol of PUSCH transmission
minus PUSCH preparation time as defined in clause 7.7 of TS 38.213 [6]
if the PHR MAC CE is reported on a configured grant.</p>
<p>For a band combination in which the UE does not support dynamic power
sharing, the UE may omit the octets containing Power Headroom field and
P<sub>CMAX,f,c</sub> field for Serving Cells in the other MAC entity
except for the PCell in the other MAC entity and the reported values of
Power Headroom and P<sub>CMAX,f,c</sub> for the PCell are up to UE
implementation.</p>
<p>The PHR MAC CEs are defined as follows:</p>
<p>- C<sub>i</sub>: This field indicates the presence of a PH field for
the Serving Cell with <em>ServCellIndex</em> i as specified in TS 38.331
[5]. The C<sub>i</sub> field set to 1 indicates that a PH field for the
Serving Cell with <em>ServCellIndex</em> i is reported. The
C<sub>i</sub> field set to 0 indicates that a PH field for the Serving
Cell with <em>ServCellIndex</em> i is not reported;</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- V: This field indicates if the PH value is based on a real
transmission or a reference format. For Type 1 PH, the V field set to 0
indicates real transmission on PUSCH and the V field set to 1 indicates
that a PUSCH reference format is used. For Type 2 PH, the V field set to
0 indicates real transmission on PUCCH and the V field set to 1
indicates that a PUCCH reference format is used. For Type 3 PH, the V
field set to 0 indicates real transmission on SRS and the V field set to
1 indicates that an SRS reference format is used. Furthermore, for Type
1, Type 2, and Type 3 PH, the V field set to 0 indicates the presence of
the octet containing the associated P<sub>CMAX,f,c</sub> field and the
MPE field, and the V field set to 1 indicates that the octet containing
the associated P<sub>CMAX,f,c</sub> field and the MPE field is
omitted;</p>
<p>- Power Headroom (PH): This field indicates the power headroom level.
The length of the field is 6 bits. The reported PH and the corresponding
power headroom levels are shown in Table 6.1.3.8-1 (the corresponding
measured values in dB for the NR Serving Cell are specified in TS 38.133
[11] while the corresponding measured values in dB for the E-UTRA
Serving Cell are specified in TS 36.133 [12]);</p>
<p>- P: If <em>mpe-Reporting-FR2</em> is configured and the Serving Cell
operates on FR2, the MAC entity shall set this field to 0 if the applied
P-MPR value, to meet MPE requirements, as specified in TS 38.101-2 [15],
is less than P-MPR_00 as specified in TS 38.133 [11] and to 1 otherwise.
If <em>mpe-Reporting-FR2</em> is not configured or the Serving Cell
operates on FR1, this field indicates whether power backoff is applied
due to power management (as allowed by P-MPR<sub>c</sub> as specified in
TS 38.101-1 [14], TS 38.101-2 [15], and TS 38.101-3 [16]). The MAC
entity shall set the P field to 1 if the corresponding
P<sub>CMAX,f,c</sub> field would have had a different value if no power
backoff due to power management had been applied;</p>
<p>- P<sub>CMAX,f,c</sub>: If present, this field indicates the
P<sub>CMAX,f,c</sub> (as specified in TS 38.213 [6]) for the NR Serving
Cell and the P<sub>CMAX,c</sub> or P̃<sub>CMAX,c</sub> (as specified in
TS 36.213 [17]) for the E-UTRA Serving Cell used for calculation of the
preceding PH field. The reported P<sub>CMAX,f,c</sub> and the
corresponding nominal UE transmit power levels are shown in Table
6.1.3.8-2 (the corresponding measured values in dBm for the NR Serving
Cell are specified in TS 38.133 [11] while the corresponding measured
values in dBm for the E-UTRA Serving Cell are specified in TS 36.133
[12]);</p>
<p>- MPE: If <em>mpe-Reporting-FR2</em> is configured, and the Serving
Cell operates on FR2, and if the P field is set to 1, this field
indicates the applied power backoff to meet MPE requirements, as
specified in TS 38.101-2 [15]. This field indicates an index to Table
6.1.3.8-3 and the corresponding measured values of P-MPR levels in dB
are specified in TS 38.133 [11]. The length of the field is 2 bits. If
<em>mpe-Reporting-FR2</em> is not configured, or if the Serving Cell
operates on FR1, or if the P field is set to 0, R bits are present
instead.</p>
<p><img src="media/image25.svg" /></p>
<p>Figure 6.1.3.9-1: Multiple Entry PHR MAC CE with the highest
<em>ServCellIndex</em> of Serving Cell with configured uplink is less
than 8</p>
<p><img src="media/image26.svg" /></p>
<p>Figure 6.1.3.9-2: Multiple Entry PHR MAC CE with the highest
ServCellIndex of Serving Cell with configured uplink is equal to or
higher than 8</p>
<h4 id="scell-activationdeactivation-mac-ces">6.1.3.10 SCell
Activation/Deactivation MAC CEs</h4>
<p>The SCell Activation/Deactivation MAC CE of one octet is identified
by a MAC subheader with LCID as specified in Table 6.2.1-1. It has a
fixed size and consists of a single octet containing seven C-fields and
one R-field. The SCell Activation/Deactivation MAC CE with one octet is
defined as follows (Figure 6.1.3.10-1).</p>
<p>The SCell Activation/Deactivation MAC CE of four octets is identified
by a MAC subheader with LCID as specified in Table 6.2.1-1. It has a
fixed size and consists of four octets containing 31 C-fields and one
R-field. The SCell Activation/Deactivation MAC CE of four octets is
defined as follows (Figure 6.1.3.10-2).</p>
<p>- C<sub>i</sub>: If there is an SCell configured for the MAC entity
with <em>SCellIndex</em> i as specified in TS 38.331 [5], this field
indicates the activation/deactivation status of the SCell with
<em>SCellIndex</em> i, else the MAC entity shall ignore the
C<sub>i</sub> field. The C<sub>i</sub> field is set to 1 to indicate
that the SCell with <em>SCellIndex</em> i shall be activated. The
C<sub>i</sub> field is set to 0 to indicate that the SCell with
<em>SCellIndex</em> i shall be deactivated;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image27.svg" /></p>
<p>Figure 6.1.3.10-1: SCell Activation/Deactivation MAC CE of one
octet</p>
<p><img src="media/image28.svg" /></p>
<p>Figure 6.1.3.10-2: SCell Activation/Deactivation MAC CE of four
octets</p>
<p>NOTE: If UE receives the SCell Activation/Deactivation MAC CE for an
SCell configured with TRS for fast activation of the SCell, such TRS is
not used for the corresponding SCell.</p>
<h4 id="duplication-activationdeactivation-mac-ce">6.1.3.11 Duplication
Activation/Deactivation MAC CE</h4>
<p>The Duplication Activation/Deactivation MAC CE of one octet is
identified by a MAC subheader with LCID as specified in Table 6.2.1-1.
It has a fixed size and consists of a single octet containing eight
D-fields. The Duplication Activation/Deactivation MAC CE is defined, for
a MAC entity, as follows (Figure 6.1.3.11-1).</p>
<p>- D<sub>i</sub>: This field indicates the activation/deactivation
status of the PDCP duplication of DRB i where i is the ascending order
of the DRB ID among the DRBs configured with PDCP duplication and with
RLC entity(ies) associated with this MAC entity. The D<sub>i</sub> field
is set to 1 to indicate that the PDCP duplication of DRB i shall be
activated. The D<sub>i</sub> field is set to 0 to indicate that the PDCP
duplication of DRB i shall be deactivated.</p>
<p><img src="media/image29.svg" /></p>
<p>Figure 6.1.3.11-1: Duplication Activation/Deactivation MAC CE</p>
<p>NOTE: The Duplication Activation/Deactivation MAC CE is not used if a
DRB is configured with more than two RLC entities, i.e. with
<em>moreThanTwoRLC-DRB</em>.</p>
<h4
id="sp-csi-rscsi-im-resource-set-activationdeactivation-mac-ce">6.1.3.12
SP CSI-RS/CSI-IM Resource Set Activation/Deactivation MAC CE</h4>
<p>The SP CSI-RS/CSI-IM Resource Set Activation/Deactivation MAC CE is
identified by a MAC subheader with LCID as specified in Table 6.2.1-1.
It has a variable size and consists of the following fields:</p>
<p>- A/D: This field indicates whether to activate or deactivate
indicated SP CSI-RS and CSI-IM resource set(s). The field is set to 1 to
indicate activation, otherwise it indicates deactivation;</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- BWP ID: This field indicates a DL BWP for which the MAC CE applies
as the codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9]. The length of the BWP ID field is 2
bits;</p>
<p>- SP CSI-RS resource set ID: This field contains an index of
<em>NZP-CSI-RS-ResourceSet</em> containing Semi Persistent NZP CSI-RS
resources, as specified in TS 38.331 [5], indicating the Semi Persistent
NZP CSI-RS resource set, which shall be activated or deactivated. The
length of the field is 6 bits;</p>
<p>- IM: This field indicates the presence of the octet containing SP
CSI-IM resource set ID field. If the IM field is set to 1, the octet
containing SP CSI-IM resource set ID field is present. If IM field is
set to 0, the octet containing SP CSI-IM resource set ID field is not
present;</p>
<p>- SP CSI-IM resource set ID: This field contains an index of
<em>CSI-IM-ResourceSet</em> containing Semi Persistent CSI-IM resources,
as specified in TS 38.331 [5], indicating the Semi Persistent CSI-IM
resource set, which shall be activated or deactivated. The length of the
field is 6 bits;</p>
<p>- TCI State ID<sub>i</sub>: This field contains <em>TCI-StateId</em>,
as specified in TS 38.331 [5], of a TCI State, which is used as QCL
source for the resource within the Semi Persistent NZP CSI-RS resource
set indicated by SP CSI-RS resource set ID field. TCI State
ID<sub>0</sub> indicates TCI State for the first resource within the
set, TCI State ID<sub>1</sub> for the second one and so on. The length
of the field is 7 bits. If the A/D field is set to 0, the octets
containing TCI State ID field(s) are not present;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image30.svg" /></p>
<p>Figure 6.1.3.12-1: SP CSI-RS/CSI-IM Resource Set
Activation/Deactivation MAC CE</p>
<h4 id="aperiodic-csi-trigger-state-subselection-mac-ce">6.1.3.13
Aperiodic CSI Trigger State Subselection MAC CE</h4>
<p>The Aperiodic CSI Trigger State Subselection MAC CE is identified by
a MAC subheader with LCID as specified in Table 6.2.1-1. It has a
variable size consisting of following fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- BWP ID: This field indicates a DL BWP for which the MAC CE applies
as the codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9]. The length of the BWP ID field is 2
bits;</p>
<p>- T<sub>i</sub>: This field indicates the selection status of the
Aperiodic Trigger States configured within
<em>aperiodicTriggerStateList</em>, as specified in TS 38.331 [5].
T<sub>0</sub> refers to the first trigger state within the list,
T<sub>1</sub> to the second one and so on. If the list does not contain
entry with index i, MAC entity shall ignore the T<sub>i</sub> field. The
T<sub>i</sub> field is set to 1 to indicate that the Aperiodic Trigger
State i shall be mapped to the codepoint of the DCI <em>CSI request</em>
field, as specified in TS 38.214 [7]. The codepoint to which the
Aperiodic Trigger State is mapped is determined by its ordinal position
among all the Aperiodic Trigger States with T<sub>i</sub> field set to
1, i.e. the first Aperiodic Trigger State with T<sub>i</sub> field set
to 1 shall be mapped to the codepoint value 1, second Aperiodic Trigger
State with T<sub>i</sub> field set to 1 shall be mapped to the codepoint
value 2 and so on. The maximum number of mapped Aperiodic Trigger States
is 63;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image31.svg" /></p>
<p>Figure 6.1.3.13-1: Aperiodic CSI Trigger State Subselection MAC
CE</p>
<h4
id="tci-states-activationdeactivation-for-ue-specific-pdsch-mac-ce">6.1.3.14
TCI States Activation/Deactivation for UE-specific PDSCH MAC CE</h4>
<p>The TCI States Activation/Deactivation for UE-specific PDSCH MAC CE
is identified by a MAC subheader with LCID as specified in Table
6.2.1-1. It has a variable size consisting of following fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5 bits. If
the indicated Serving Cell is configured as part of a
<em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em> as specified in TS 38.331 [5], this
MAC CE applies to all the Serving Cells configured in the set
<em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em>, respectively;</p>
<p>- BWP ID: This field indicates a DL BWP for which the MAC CE applies
as the codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9]. The length of the BWP ID field is 2 bits.
This field is ignored if this MAC CE applies to a set of Serving
Cells;</p>
<p>- T<sub>i</sub>: If there is a TCI state with <em>TCI-StateId</em> i
as specified in TS 38.331 [5], this field indicates the
activation/deactivation status of the TCI state with
<em>TCI-StateId</em> i, otherwise MAC entity shall ignore the
T<sub>i</sub> field. The T<sub>i</sub> field is set to 1 to indicate
that the TCI state with <em>TCI-StateId</em> i shall be activated and
mapped to the codepoint of the DCI <em>Transmission Configuration
Indication</em> field, as specified in TS 38.214 [7]. The T<sub>i</sub>
field is set to 0 to indicate that the TCI state with
<em>TCI-StateId</em> i shall be deactivated and is not mapped to the
codepoint of the DCI <em>Transmission Configuration Indication</em>
field. The codepoint to which the TCI State is mapped is determined by
its ordinal position among all the TCI States with T<sub>i</sub> field
set to 1, i.e. the first TCI State with T<sub>i</sub> field set to 1
shall be mapped to the codepoint value 0, second TCI State with
T<sub>i</sub> field set to 1 shall be mapped to the codepoint value 1
and so on. The maximum number of activated TCI states is 8. The
activated TCI states can be associated with at most one PCI different
from the Serving Cell PCI at a time;</p>
<p>- CORESET Pool ID: This field indicates that mapping between the
activated TCI states and the codepoint of the DCI <em>Transmission
Configuration Indication</em> set by field T<sub>i</sub> is specific to
the <em>ControlResourceSetId</em> configured with CORESET Pool ID as
specified in TS 38.331 [5]. This field set to 1 indicates that this MAC
CE shall be applied for the DL transmission scheduled by CORESET with
the CORESET pool ID equal to 1, otherwise, this MAC CE shall be applied
for the DL transmission scheduled by CORESET pool ID equal to 0. If the
<em>coresetPoolIndex</em> is not configured for any CORESET, MAC entity
shall ignore the CORESET Pool ID field in this MAC CE when receiving the
MAC CE. If the Serving Cell in the MAC CE is configured in a cell list
that contains more than one Serving Cell, the CORSET Pool ID field shall
be ignored when receiving the MAC CE.</p>
<p><img src="media/image32.svg" /></p>
<p>Figure 6.1.3.14-1: TCI States Activation/Deactivation for UE-specific
PDSCH MAC CE</p>
<h4 id="tci-state-indication-for-ue-specific-pdcch-mac-ce">6.1.3.15 TCI
State Indication for UE-specific PDCCH MAC CE</h4>
<p>The TCI State Indication for UE-specific PDCCH MAC CE is identified
by a MAC subheader with LCID as specified in Table 6.2.1-1. It has a
fixed size of 16 bits with following fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5 bits. If
the indicated Serving Cell is configured as part of a
<em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em> as specified in TS 38.331 [5], this
MAC CE applies to all theServing Cells in the set
<em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em>, respectively;</p>
<p>- CORESET ID: This field indicates a Control Resource Set identified
with <em>ControlResourceSetId</em> as specified in TS 38.331 [5], for
which the TCI State is being indicated. In case the value of the field
is 0, the field refers to the Control Resource Set configured by
<em>controlResourceSetZero</em> as specified in TS 38.331 [5]. The
length of the field is 4 bits;</p>
<p>- TCI State ID: This field indicates the TCI state identified by
<em>TCI-StateId</em> as specified in TS 38.331 [5] applicable to the
Control Resource Set identified by CORESET ID field. If the field of
CORESET ID is set to 0, this field indicates a <em>TCI-StateId</em> for
a TCI state of the first 64 TCI-states configured by
<em>tci-StatesToAddModList</em> and <em>tci-StatesToReleaseList</em> in
the <em>PDSCH-Config</em> in the active BWP or by
<em>dl-OrJoint-TCI-State-ToAddModList</em> and
<em>dl-OrJoint-TCI-State-ToReleaseList</em> in the <em>PDSCH-Config</em>
in the active BWP or the reference BWP. If the field of CORESET ID is
set to the other value than 0, this field indicates a
<em>TCI-StateId</em> configured by <em>tci-StatesPDCCH-ToAddList</em>
and <em>tci-StatesPDCCH-ToReleaseList</em> in the
<em>controlResourceSet</em> identified by the indicated CORESET ID. The
length of the field is 7 bits.</p>
<p><img src="media/image33.svg" /></p>
<p>Figure 6.1.3.15-1: TCI State Indication for UE-specific PDCCH MAC
CE</p>
<h4
id="sp-csi-reporting-on-pucch-activationdeactivation-mac-ce">6.1.3.16 SP
CSI reporting on PUCCH Activation/Deactivation MAC CE</h4>
<p>The SP CSI reporting on PUCCH Activation/Deactivation MAC CE is
identified by a MAC subheader with LCID as specified in Table 6.2.1-1.
It has a fixed size of 16 bits with following fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- BWP ID: This field indicates a UL BWP for which the MAC CE applies
as the codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9]. The length of the BWP ID field is 2
bits;</p>
<p>- S<sub>i</sub>: This field indicates the activation/deactivation
status of the Semi-Persistent CSI report configuration within
<em>csi-ReportConfigToAddModList</em>, as specified in TS 38.331 [5].
S<sub>0</sub> refers to the report configuration which includes PUCCH
resources for SP CSI reporting in the indicated BWP and has the lowest
<em>CSI-ReportConfigId</em> within the list with type set to
<em>semiPersistentOnPUCCH</em>, S<sub>1</sub> to the report
configuration which includes PUCCH resources for SP CSI reporting in the
indicated BWP and has the second lowest <em>CSI-ReportConfigId</em> and
so on. If the number of report configurations within the list with type
set to <em>semiPersistentOnPUCCH</em> in the indicated BWP is less than
i + 1, MAC entity shall ignore the S<sub>i</sub> field. The
S<sub>i</sub> field is set to 1 to indicate that the corresponding
Semi-Persistent CSI report configuration shall be activated. The
S<sub>i</sub> field is set to 0 to indicate that the corresponding
Semi-Persistent CSI report configuration i shall be deactivated;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image34.svg" /></p>
<p>Figure 6.1.3.16-1: SP CSI reporting on PUCCH Activation/Deactivation
MAC CE</p>
<h4 id="sp-srs-activationdeactivation-mac-ce">6.1.3.17 SP SRS
Activation/Deactivation MAC CE</h4>
<p>The SP SRS Activation/Deactivation MAC CE is identified by a MAC
subheader with LCID as specified in Table 6.2.1-1. It has a variable
size with following fields:</p>
<p>- A/D: This field indicates whether to activate or deactivate
indicated SP SRS resource set. The field is set to 1 to indicate
activation, otherwise it indicates deactivation;</p>
<p>- SRS Resource Set's Cell ID: This field indicates the identity of
the Serving Cell, which contains activated/deactivated SP SRS Resource
Set. If the C field is set to 0, this field also indicates the identity
of the Serving Cell which contains all resources indicated by the
Resource ID<sub>i</sub> fields. The length of the field is 5 bits;</p>
<p>- SRS Resource Set's BWP ID: This field indicates a UL BWP as the
codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9], which contains activated/deactivated SP SRS
Resource Set. If the C field is set to 0, this field also indicates the
identity of the BWP which contains all resources indicated by the
Resource ID<sub>i</sub> fields. The length of the field is 2 bits;</p>
<p>- C: This field indicates whether the octets containing Resource
Serving Cell ID field(s) and Resource BWP ID field(s) are present. If
this field is set to 1, the octets containing Resource Serving Cell ID
field(s) and Resource BWP ID field(s) are present, otherwise they are
not present;</p>
<p>- SUL: This field indicates whether the MAC CE applies to the NUL
carrier or SUL carrier configuration. This field is set to 1 to indicate
that it applies to the SUL carrier configuration, and it is set to 0 to
indicate that it applies to the NUL carrier configuration;</p>
<p>- SP SRS Resource Set ID: This field indicates the SP SRS Resource
Set ID identified by <em>SRS-ResourceSetId</em> as specified in TS
38.331 [5], which is to be activated or deactivated. The length of the
field is 4 bits;</p>
<p>- F<sub>i</sub>: This field indicates the type of a resource used as
a spatial relationship for SRS resource within SP SRS Resource Set
indicated with SP SRS Resource Set ID field. F<sub>0</sub> refers to the
first SRS resource within the resource set, F<sub>1</sub> to the second
one and so on. The field is set to 1 to indicate NZP CSI-RS resource
index is used, and it is set to 0 to indicate either SSB index or SRS
resource index is used. The length of the field is 1 bit. This field is
only present if MAC CE is used for activation, i.e. the A/D field is set
to 1;</p>
<p>- Resource ID<sub>i</sub>: This field contains an identifier of the
resource used for spatial relationship derivation for SRS resource i.
Resource ID<sub>0</sub> refers to the first SRS resource within the
resource set, Resource ID<sub>1</sub> to the second one and so on. If
F<sub>i</sub> is set to 0, and the first bit of this field is set to 1,
the remainder of this field contains <em>SSB-Index</em> as specified in
TS 38.331 [5]. If F<sub>i</sub> is set to 0, and the first bit of this
field is set to 0, the remainder of this field contains
<em>SRS-ResourceId</em> as specified in TS 38.331 [5]. The length of the
field is 7 bits. This field is only present if MAC CE is used for
activation, i.e. the A/D field is set to 1;</p>
<p>- Resource Serving Cell ID<sub>i</sub>: This field indicates the
identity of the Serving Cell on which the resource used for spatial
relationship derivation for SRS resource i is located. The length of the
field is 5 bits;</p>
<p>- Resource BWP ID<sub>i</sub>: This field indicates a UL BWP as the
codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9], on which the resource used for spatial
relationship derivation for SRS resource i is located. The length of the
field is 2 bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image35.svg" /></p>
<p>Figure 6.1.3.17-1: SP SRS Activation/Deactivation MAC CE</p>
<h4 id="pucch-spatial-relation-activationdeactivation-mac-ce">6.1.3.18
PUCCH spatial relation Activation/Deactivation MAC CE</h4>
<p>The PUCCH spatial relation Activation/Deactivation MAC CE is
identified by a MAC subheader with LCID as specified in Table 6.2.1-1.
It has a fixed size of 24 bits with following fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- BWP ID: This field indicates a UL BWP for which the MAC CE applies
as the codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9]. The length of the BWP ID field is 2
bits;</p>
<p>- PUCCH Resource ID: This field contains an identifier of the PUCCH
resource ID identified by <em>PUCCH-ResourceId</em> as specified in TS
38.331 [5]. The length of the field is 7 bits;</p>
<p>- S<sub>i</sub>: If, in <em>PUCCH-Config</em> in which the PUCCH
Resource ID is configured, there is a PUCCH Spatial Relation Info with
<em>PUCCH-SpatialRelationInfoId</em> as specified in TS 38.331 [5],
configured for the uplink bandwidth part indicated by BWP ID field,
S<sub>i</sub> indicates the activation status of PUCCH Spatial Relation
Info with <em>PUCCH-SpatialRelationInfoId</em> equal to i + 1, otherwise
MAC entity shall ignore this field. The S<sub>i</sub> field is set to 1
to indicate PUCCH Spatial Relation Info with
<em>PUCCH-SpatialRelationInfoId</em> equal to i + 1 shall be activated.
The S<sub>i</sub> field is set to 0 to indicate PUCCH Spatial Relation
Info with <em>PUCCH-SpatialRelationInfoId</em> equal to i + 1 shall be
deactivated. Only a single PUCCH Spatial Relation Info can be active for
a PUCCH Resource at a time;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image36.svg" /></p>
<p>Figure 6.1.3.18-1: PUCCH spatial relation Activation/Deactivation MAC
CE</p>
<h4
id="sp-zp-csi-rs-resource-set-activationdeactivation-mac-ce">6.1.3.19 SP
ZP CSI-RS Resource Set Activation/Deactivation MAC CE</h4>
<p>The SP ZP CSI-RS Resource Set Activation/Deactivation MAC CE is
identified by a MAC subheader with LCID as specified in Table 6.2.1-1.
It has a fixed size of 16 bits with following fields:</p>
<p>- A/D: This field indicates whether to activate or deactivate
indicated SP ZP CSI-RS resource set. The field is set to 1 to indicate
activation, otherwise it indicates deactivation;</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- BWP ID: This field indicates a DL BWP for which the MAC CE applies
as the codepoint value of the DCI <em>bandwidth part indicator</em>
field as specified in TS 38.212 [9]. The length of the BWP ID field is 2
bits;</p>
<p>- SP ZP CSI-RS resource set ID: This field contains an index of
<em>sp-ZP-CSI-RS-ResourceSetsToAddModList</em>, as specified in TS
38.331 [5], indicating the Semi Persistent ZP CSI-RS resource set, which
shall be activated or deactivated. The length of the field is 4
bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image37.svg" /></p>
<p>Figure 6.1.3.19-1: SP ZP CSI-RS Resource Set Activation/Deactivation
MAC CE</p>
<h4 id="recommended-bit-rate-mac-ce">6.1.3.20 Recommended bit rate MAC
CE</h4>
<p>The Recommended bit rate MAC CE is identified by a MAC subheader with
LCID as specified in Tables 6.2.1-1 and 6.2.1-2 for bit rate
recommendation message from the gNB to the UE and bit rate
recommendation query message from the UE to the gNB, respectively. It
has a fixed size and consists of two octets defined as follows (Figure
6.1.3.20-1):</p>
<p>- LCID: This field indicates the identity of the logical channel for
which the recommended bit rate or the recommended bit rate query is
applicable. The length of the field is 6 bits;</p>
<p>- Uplink/Downlink (UL/DL): This field indicates whether the
recommended bit rate or the recommended bit rate query applies to uplink
or downlink. The length of the field is 1 bit. The UL/DL field set to 0
indicates downlink. The UL/DL field set to 1 indicates uplink;</p>
<p>- Bit Rate: This field indicates an index to Table 6.1.3.20-1. The
length of the field is 6 bits. For bit rate recommendation the value
indicates the recommended bit rate. For bit rate recommendation query
the value indicates the desired bit rate;</p>
<p>- X: Bit rate multiplier. For UEs supporting recommended bit rate
multiplier, when <em>bitRateMultiplier</em> is configured for the
logical channel indicated by LCID field, X field set to 1 indicates the
actual value of bit rate is the value corresponding to the index
indicated by the Bit Rate field multiplied by <em>bitRateMultiplier</em>
as specified in TS 38.331 [5].</p>
<p>- R: reserved bit, set to 0.</p>
<p><img src="media/image38.svg" /></p>
<p>Figure 6.1.3.20-1: Recommended bit rate MAC CE</p>
<p>Table 6.1.3.20-1: Values (kbit/s) for Bit Rate field</p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 33%" />
<col style="width: 17%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>NR Recommended Bit Rate value [kbit/s]</th>
<th>Index</th>
<th>NR Recommended Bit Rate value [kbit/s]</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Note 1</td>
<td>32</td>
<td>700</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>33</td>
<td>800</td>
</tr>
<tr>
<td>2</td>
<td>9</td>
<td>34</td>
<td>900</td>
</tr>
<tr>
<td>3</td>
<td>11</td>
<td>35</td>
<td>1000</td>
</tr>
<tr>
<td>4</td>
<td>13</td>
<td>36</td>
<td>1100</td>
</tr>
<tr>
<td>5</td>
<td>17</td>
<td>37</td>
<td>1200</td>
</tr>
<tr>
<td>6</td>
<td>21</td>
<td>38</td>
<td>1300</td>
</tr>
<tr>
<td>7</td>
<td>25</td>
<td>39</td>
<td>1400</td>
</tr>
<tr>
<td>8</td>
<td>29</td>
<td>40</td>
<td>1500</td>
</tr>
<tr>
<td>9</td>
<td>32</td>
<td>41</td>
<td>1750</td>
</tr>
<tr>
<td>10</td>
<td>36</td>
<td>42</td>
<td>2000</td>
</tr>
<tr>
<td>11</td>
<td>40</td>
<td>43</td>
<td>2250</td>
</tr>
<tr>
<td>12</td>
<td>48</td>
<td>44</td>
<td>2500</td>
</tr>
<tr>
<td>13</td>
<td>56</td>
<td>45</td>
<td>2750</td>
</tr>
<tr>
<td>14</td>
<td>72</td>
<td>46</td>
<td>3000</td>
</tr>
<tr>
<td>15</td>
<td>88</td>
<td>47</td>
<td>3500</td>
</tr>
<tr>
<td>16</td>
<td>104</td>
<td>48</td>
<td>4000</td>
</tr>
<tr>
<td>17</td>
<td>120</td>
<td>49</td>
<td>4500</td>
</tr>
<tr>
<td>18</td>
<td>140</td>
<td>50</td>
<td>5000</td>
</tr>
<tr>
<td>19</td>
<td>160</td>
<td>51</td>
<td>5500</td>
</tr>
<tr>
<td>20</td>
<td>180</td>
<td>52</td>
<td>6000</td>
</tr>
<tr>
<td>21</td>
<td>200</td>
<td>53</td>
<td>6500</td>
</tr>
<tr>
<td>22</td>
<td>220</td>
<td>54</td>
<td>7000</td>
</tr>
<tr>
<td>23</td>
<td>240</td>
<td>55</td>
<td>7500</td>
</tr>
<tr>
<td>24</td>
<td>260</td>
<td>56</td>
<td>8000</td>
</tr>
<tr>
<td>25</td>
<td>280</td>
<td>57</td>
<td>Reserved</td>
</tr>
<tr>
<td>26</td>
<td>300</td>
<td>58</td>
<td>Reserved</td>
</tr>
<tr>
<td>27</td>
<td>350</td>
<td>59</td>
<td>Reserved</td>
</tr>
<tr>
<td>28</td>
<td>400</td>
<td>60</td>
<td>Reserved</td>
</tr>
<tr>
<td>29</td>
<td>450</td>
<td>61</td>
<td>Reserved</td>
</tr>
<tr>
<td>30</td>
<td>500</td>
<td>62</td>
<td>Reserved</td>
</tr>
<tr>
<td>31</td>
<td>600</td>
<td>63</td>
<td>Reserved</td>
</tr>
<tr>
<td colspan="4">Note 1: For bit rate recommendation message this index
is used for indicating that no new recommendation on bit rate is
given.</td>
</tr>
</tbody>
</table>
<h4 id="timing-delta-mac-ce">6.1.3.21 Timing Delta MAC CE</h4>
<p>The Timing Delta MAC CE is identified by MAC subheader with eLCID as
specified in Table 6.2.1-1b.</p>
<p>It has a fixed size and consists of two octets defined as follows
(Figure 6.1.3.21-1):</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- T<sub>delta</sub>: This field indicates the value (0, 1, …, 2047)
used to control the amount of timing adjustment that MAC entity
indicates (as specified in TS 38.213 [6]). The length of the field is 11
bits.</p>
<p><img src="media/image39.svg" /></p>
<p>Figure 6.1.3.21-1: Timing Delta MAC CE</p>
<h4 id="guard-symbols-mac-ces">6.1.3.22 Guard Symbols MAC CEs</h4>
<p>The Guard Symbols MAC CEs (i.e. Provided Guard Symbols MAC CE and
Desired Guard Symbols MAC CE) for Case-1 timing mode are identified by
the MAC subheader with eLCID as specified in Table 6.2.1-1b for DL-SCH
and in Table 6.2.1-2b for UL-SCH.</p>
<p>It has fixed size and consists of four octets defined as follows
(Figure 6.1.3.22-1):</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- Sub-carrier spacing (SCS): This field indicates the subcarrier
spacing used as reference for the guard spacing. The length of this
field is 2bits. The values for the SCS field are shown in Table
6.1.3.22-2;</p>
<p>- Number of Guard Symbols (NmbGS<sub>i</sub>): This field indicates
the number of guard symbols for the switching scenarios shown in Table
5.18.19-1. The number of guard symbols can take values within the range
of 0 to 4. Higher values 5 to 7 are reserved.</p>
<p><img src="media/image40.svg" /></p>
<p>Figure 6.1.3.22-1: Guard Symbols MAC CEs</p>
<p>Table 6.1.3.22-2: Subcarrier spacing for Guard Symbols MAC CEs</p>
<table>
<colgroup>
<col style="width: 51%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr>
<th>Subcarrier spacing</th>
<th>SCS value</th>
</tr>
</thead>
<tbody>
<tr>
<td>15kHz</td>
<td>00</td>
</tr>
<tr>
<td>30kHz</td>
<td>01</td>
</tr>
<tr>
<td>60kHz</td>
<td>10</td>
</tr>
<tr>
<td>120kHz</td>
<td>11</td>
</tr>
</tbody>
</table>
<h4 id="bfr-mac-ces">6.1.3.23 BFR MAC CEs</h4>
<p>The MAC CEs for BFR consists of either:</p>
<p>- BFR MAC CE; or</p>
<p>- Truncated BFR MAC CE.</p>
<p>The BFR MAC CE and Truncated BFR MAC CE are identified by a MAC
subheader with LCID/eLCID as specified in Table 6.2.1-2 and Table
6.2.1-2b.</p>
<p>The BFR MAC CE and Truncated BFR MAC CE have a variable size. They
include a bitmap and in ascending order based on the
<em>ServCellIndex</em>, beam failure recovery information i.e. octets
containing candidate beam availability indication (AC) for SCells
indicated in the bitmap. For BFR MAC CE, a single octet bitmap is used
when the highest <em>ServCellIndex</em> of this MAC entity's SCell for
which beam failure is detected and the evaluation of the candidate beams
according to the requirements as specified in TS 38.133 [11] has been
completed is less than 8, otherwise four octets are used. A MAC PDU
shall contain at most one BFR MAC CE.</p>
<p>For Truncated BFR MAC CE, a single octet bitmap is used for the
following cases, otherwise four octets are used:</p>
<p>- the highest <em>ServCellIndex</em> of this MAC entity's SCell for
which beam failure is detected and the evaluation of the candidate beams
according to the requirements as specified in TS 38.133 [11] has been
completed is less than 8; or</p>
<p>- beam failure is detected for SpCell (as specified in Clause 5.17)
and the SpCell is to be indicated in a Truncated BFR MAC CE and the
UL-SCH resources available for transmission cannot accommodate the
Truncated BFR MAC CE with the four octets bitmap plus its subheader as a
result of LCP.</p>
<p>The fields in the BFR MAC CEs are defined as follows:</p>
<p>- SP: This field indicates beam failure detection (as specified in
clause 5.17) for the SpCell of this MAC entity. The SP field is set to 1
to indicate that beam failure is detected for SpCell only when BFR MAC
CE or Truncated BFR MAC CE is to be included into a MAC PDU as part of
Random Access Procedure (as specified in 5.1.3a and 5.1.4), otherwise,
it is set to 0;</p>
<p>- C<sub>i</sub> (BFR MAC CE): This field indicates beam failure
detection (as specified in clause 5.17) and the presence of an octet
containing the AC field for the SCell with <em>ServCellIndex</em> i as
specified in TS 38.331 [5]. The C<sub>i</sub> field set to 1 indicates
that beam failure is detected, the evaluation of the candidate beams
according to the requirements as specified in TS 38.133 [11] has been
completed, and the octet containing the AC field is present for the
SCell with <em>ServCellIndex</em> i. The C<sub>i</sub> field set to 0
indicates that the beam failure is either not detected or the beam
failure is detected but the evaluation of the candidate beams according
to the requirements as specified in TS 38.133 [11] has not been
completed, and the octet containing the AC field is not present for the
SCell with <em>ServCellIndex</em> i. The octets containing the AC field
are present in ascending order based on the <em>ServCellIndex</em>;</p>
<p>- C<sub>i</sub> (Truncated BFR MAC CE): This field indicates beam
failure detection (as specified in clause 5.17) for the SCell with
<em>ServCellIndex</em> i as specified in TS 38.331 [5]. The
C<sub>i</sub> field set to 1 indicates that beam failure is detected,
the evaluation of the candidate beams according to the requirements as
specified in TS 38.133 [11] has been completed, and the octet containing
the AC field for the SCell with <em>ServCellIndex</em> i may be present.
The C<sub>i</sub> field set to 0 indicates that the beam failure is
either not detected or the beam failure is detected but the evaluation
of the candidate beams according to the requirements as specified in TS
38.133 [11] has not been completed, and the octet containing the AC
field is not present for the SCell with <em>ServCellIndex</em> i. The
octets containing the AC field, if present, are included in ascending
order based on the <em>ServCellIndex</em>. The number of octets
containing the AC field included is maximised, while not exceeding the
available grant size;</p>
<p>NOTE: The number of the octets containing the AC field in the
Truncated BFR MAC CE can be zero.</p>
<p>- AC: This field indicates the presence of the Candidate RS ID field
in this octet. If at least one of the SSBs with SS-RSRP above
<em>rsrp-ThresholdBFR</em> amongst the SSBs in
<em>candidateBeamRSSCellList</em> or the CSI-RSs with CSI-RSRP above
<em>rsrp-ThresholdBFR</em> amongst the CSI-RSs in
<em>candidateBeamRSSCellList</em> is available, the AC field is set to
1; otherwise, it is set to 0. If the AC field set to 1, the Candidate RS
ID field is present. If the AC field set to 0, R bits are present
instead;</p>
<p>- Candidate RS ID: This field is set to the index of an SSB with
SS-RSRP above <em>rsrp-ThresholdBFR</em> amongst the SSBs in
<em>candidateBeamRSSCellLis</em>t or to the index of a CSI-RS with
CSI-RSRP above <em>rsrp-ThresholdBFR</em> amongst the CSI-RSs in
<em>candidateBeamRSSCellLis</em>t. Index of an SSB or CSI-RS is the
index of an entry in <em>candidateBeamRSSCellLis</em>t corresponding to
the SSB or CSI-RS. Index 0 corresponds to the first entry in the
<em>candidateBeamRSSCellLis</em>t, index 1 corresponds to the second
entry in the list and so on. The length of this field is 6 bits.</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image41.svg" /></p>
<p>Figure 6.1.3.23-1: BFR and Truncated BFR MAC CE with one octet
C<sub>i</sub> field</p>
<p><img src="media/image42.svg" /></p>
<p>Figure 6.1.3.23-2: BFR and Truncated BFR MAC CE with four octets
C<sub>i</sub> field</p>
<h4
id="enhanced-tci-states-activationdeactivation-for-ue-specific-pdsch-mac-ce">6.1.3.24
Enhanced TCI States Activation/Deactivation for UE-specific PDSCH MAC
CE</h4>
<p>The Enhanced TCI States Activation/Deactivation for UE-specific PDSCH
MAC CE is identified by a MAC PDU subheader with eLCID as specified in
Table 6.2.1-1b. It has a variable size consisting of following
fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5 bits. If
the indicated Serving Cell is configured as part of a
<em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em> as specified in TS 38.331 [5], this
MAC CE applies to all the Serving Cells configured in the set
<em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em>, respectively;</p>
<p>- BWP ID: This field indicates a DL BWP for which the MAC CE applies
as the codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9]. The length of the BWP ID field is 2
bits;</p>
<p>- C<sub>i</sub>: This field indicates whether the octet containing
TCI state ID<sub>i,2</sub> is present. If this field is set to 1, the
octet containing TCI state ID<sub>i,2</sub> is present. If this field is
set to 0, the octet containing TCI state ID<sub>i,2</sub> is not
present;</p>
<p>- TCI state ID<sub>i,j</sub>: This field indicates the TCI state
identified by <em>TCI-StateId</em> as specified in TS 38.331 [5], where
i is the index of the codepoint of the DCI <em>Transmission
configuration indication</em> field as specified in TS 38.212 [9] and
TCI state ID<sub>i,j</sub> denotes the j<sup>th</sup> TCI state
indicated for the i<sup>th</sup> codepoint in the DCI <em>Transmission
Configuration Indication</em> field. The TCI codepoint to which the TCI
States are mapped is determined by its ordinal position among all the
TCI codepoints with sets of TCI state ID<sub>i,j</sub> fields, i.e. the
first TCI codepoint with TCI state ID<sub>0,1</sub> and TCI state
ID<sub>0,2</sub> shall be mapped to the codepoint value 0, the second
TCI codepoint with TCI state ID<sub>1,1</sub> and TCI state
ID<sub>1,2</sub> shall be mapped to the codepoint value 1 and so on. The
TCI state ID<sub>i,2</sub> is optional based on the indication of the
C<sub>i</sub> field. The maximum number of activated TCI codepoint is 8
and the maximum number of TCI states mapped to a TCI codepoint is 2.</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image43.svg" /></p>
<p>Figure 6.1.3.24-1: Enhanced TCI States Activation/Deactivation for
UE-specific PDSCH MAC CE</p>
<h4
id="enhanced-pucch-spatial-relation-activationdeactivation-mac-ce">6.1.3.25
Enhanced PUCCH Spatial Relation Activation/Deactivation MAC CE</h4>
<p>The Enhanced PUCCH Spatial Relation Activation/Deactivation MAC CE is
identified by a MAC subheader with eLCID as specified in Table 6.2.1-1b.
It has a variable size with following fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- BWP ID: This field indicates a UL BWP for which the MAC CE applies
as the codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9]. The length of the BWP ID field is 2
bits;</p>
<p>- PUCCH Resource ID: This field contains an identifier of the PUCCH
resource ID identified by <em>PUCCH-ResourceId</em> as specified in TS
38.331 [5], which is to be activated with a spatial relation indicated
by Spatial Relation Info ID field in the subsequent octet. The length of
the field is 7 bits. If the indicated PUCCH Resource ID is included in a
PUCCH Resource Group (configured via <em>resourceGroupToAddModList</em>
as specified in TS 38.331 [5]) of the indicated UL BWP, no other PUCCH
Resources within the same PUCCH Resource group are indicated in the MAC
CE, and this MAC CE applies to all the PUCCH Resources in the PUCCH
Resource group;</p>
<p>- Spatial Relation Info ID: This field contains
<em>PUCCH-SpatialRelationInfoId</em> – 1 where
<em>PUCCH-SpatialRelationInfoId</em> is the identifier of the PUCCH
Spatial Relation Info in <em>PUCCH-Config</em> in which the PUCCH
Resource ID is configured, as specified in TS 38.331 [5]. The length of
the field is 6 bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image44.svg" /></p>
<p>Figure 6.1.3.25-1: Enhanced PUCCH spatial relation
Activation/Deactivation MAC CE</p>
<h4 id="enhanced-spap-srs-spatial-relation-indication-mac-ce">6.1.3.26
Enhanced SP/AP SRS Spatial Relation Indication MAC CE</h4>
<p>The Enhanced SP/AP SRS Spatial Relation Indication MAC CE is
identified by a MAC subheader with eLCID as specified in Table 6.2.1-1b.
It has a variable size with following fields:</p>
<p>- A/D: This field indicates whether to activate or deactivate
indicated SP SRS resource set. The field is set to 1 to indicate
activation, otherwise it indicates deactivation. If the indicated SRS
resource set ID is for the AP SRS resource set, MAC entity shall ignore
this field;</p>
<p>- SRS Resource Set's Cell ID: This field indicates the identity of
the Serving Cell, which contains the indicated SP/AP SRS Resource Set.
If the C field is set to 0, this field also indicates the identity of
the Serving Cell which contains all resources indicated by the Resource
ID<sub>i</sub> fields. The length of the field is 5 bits;</p>
<p>- SRS Resource Set's BWP ID: This field indicates a UL BWP as the
codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9], which contains the indicated SP/AP SRS
Resource Set. If the C field is set to 0, this field also indicates the
identity of the BWP which contains all resources indicated by the
Resource ID<sub>i</sub> fields. The length of the field is 2 bits;</p>
<p>- C: This field indicates whether the octets containing Resource
Serving Cell ID field(s) and Resource BWP ID field(s) are present. If
this field is set to 1, Resource Serving Cell ID field(s) and Resource
BWP ID field(s) are present, otherwise they are not present so MAC
entity shall ignore Resource Serving Cell ID field(s) and Resource BWP
ID field(s);</p>
<p>- SUL: This field indicates whether the MAC CE applies to the NUL
carrier or SUL carrier configuration. This field is set to 1 to indicate
that it applies to the SUL carrier configuration, and it is set to 0 to
indicate that it applies to the NUL carrier configuration;</p>
<p>- SRS Resource Set ID: This field indicates the SP/AP SRS Resource
Set ID identified by <em>SRS-ResourceSetId</em> as specified in TS
38.331 [5]. The length of the field is 4 bits;</p>
<p>- F<sub>i</sub>: This field indicates the type of a resource used as
a spatial relationship for SRS resource within SP/AP SRS Resource Set
indicated with SP/AP SRS Resource Set ID field. F<sub>0</sub> refers to
the first SRS resource within the resource set, F<sub>1</sub> to the
second one and so on. The field is set to 1 to indicate NZP CSI-RS
resource index is used, and it is set to 0 to indicate either SSB index
or SRS resource index is used. The length of the field is 1 bit. This
field is only present if MAC CE is used for activation of SP SRS
resource set, i.e. the A/D field is set to 1, or for AP SRS resource
set;</p>
<p>- Resource Serving Cell ID<sub>i</sub>: This field indicates the
identity of the Serving Cell on which the resource used for spatial
relationship derivation for SRS resource i is located. The length of the
field is 5 bits;</p>
<p>- Resource BWP ID<sub>i</sub>: This field indicates a UL BWP as the
codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9], on which the resource used for spatial
relationship derivation for SRS resource i is located. The length of the
field is 2 bits;</p>
<p>- Resource ID<sub>i</sub>: This field contains an identifier of the
resource used for spatial relationship derivation for SRS resource i.
Resource ID<sub>0</sub> refers to the first SRS resource within the
resource set, Resource ID<sub>1</sub> to the second one and so on. If
F<sub>i</sub> is set to 0, the first bit of this field is always set to
0. If F<sub>i</sub> is set to 0, and the second bit of this field is set
to 1, the remainder of this field contains <em>SSB-Index</em> as
specified in TS 38.331 [5]. If F<sub>i</sub> is set to 0, and the second
bit of this field is set to 0, the remainder of this field contains
<em>SRS-ResourceId</em> as specified in TS 38.331 [5]. The length of the
field is 8 bits. This field is only present if MAC CE is used for
activation of SP SRS resource set, i.e. the A/D field is set to 1, or
for AP SRS resource set;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image45.svg" /></p>
<p>Figure 6.1.3.26-1: Enhanced SP/AP SRS spatial relation Indication MAC
CE</p>
<h4 id="srs-pathloss-reference-rs-update-mac-ce">6.1.3.27 SRS Pathloss
Reference RS Update MAC CE</h4>
<p>The SRS Pathloss Reference RS Update MAC CE is identified by a MAC
subheader with eLCID as specified in Table 6.2.1-1b. It has a fixed size
of 24 bits:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell, which contains activated SRS Resource Set. The length of the field
is 5 bits;</p>
<p>- BWP ID: This field indicates a UL BWP as the codepoint of the DCI
<em>bandwidth part indicator</em> field as specified in TS 38.212 [9],
which contains activated SRS Resource Set. The length of the field is 2
bits;</p>
<p>- SRS Resource Set ID: This field indicates the SRS Resource Set ID
identified by <em>SRS-ResourceSetId</em> as specified in TS 38.331 [5].
The length of the field is 4 bits;</p>
<p>- Pathloss Reference RS ID: This field indicates the Pathloss
Reference RS ID identified by <em>srs-PathlossReferenceRS-Id</em> as
specified in TS 38.331 [5]. It updates the pathloss reference RS for an
SRS-resource set indicated by SRS Resource Set ID field. The length of
the field is 6 bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image46.svg" /></p>
<p>Figure 6.1.3.27-1: SRS Pathloss Reference RS Update MAC CE</p>
<h4 id="pusch-pathloss-reference-rs-update-mac-ce">6.1.3.28 PUSCH
Pathloss Reference RS Update MAC CE</h4>
<p>The PUSCH Pathloss Reference RS Update MAC CE is identified by a MAC
subheader with eLCID as specified in Table 6.2.1-1b. It has a variable
size and consists of the following fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell, which contains activated PUSCH Pathloss Reference RS. The length
of the field is 5 bits;</p>
<p>- BWP ID: This field indicates a UL BWP as the codepoint of the DCI
<em>bandwidth part indicator</em> field as specified in TS 38.212 [9],
which contains activated PUSCH Pathloss Reference RS. The length of the
field is 2 bits;</p>
<p>- T: If the UE is configured with two SRS resources sets for codebook
or non-codebook, as specified in TS 38.331 [5], in the indicated
bandwidth part of the indicated Serving Cell, if this field is set to 0,
SRI ID(s) to be updated are the ones associated with the first SRS
resource set, and if is set to 1 the SRI ID(s) to be updated are the
ones associated with the second SRS resource set. Otherwise, this field
is a reserved bit set to 0;</p>
<p>- PUSCH Pathloss Reference RS ID: This field indicates the PUSCH
Pathloss Reference RS ID identified by
<em>PUSCH-PathlossReferenceRS-Id</em> as specified in TS 38.331 [5],
which is to be updated in the SRI PUSCH power control mappings indicated
by SRI ID fields indicated in the same MAC CE. The length of the field
is 6 bits;</p>
<p>- C: This field indicates the presence of the additional SRI ID in
the last octet of this MAC CE. If this field is set to 1, two SRI ID(s)
are present in the last octet. Otherwise only one SRI ID (i.e. the first
SRI ID) is present in the last octet;</p>
<p>- SRI ID: This field indicates the SRI PUSCH power control ID
identified by <em>sri-PUSCH-PowerControlId</em> as specified in TS
38.331 [5]. The length of the field is 4 bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image47.svg" /></p>
<p>Figure 6.1.3.28-1: PUSCH Pathloss Reference RS Update MAC CE</p>
<h4
id="serving-cell-set-based-srs-spatial-relation-indication-mac-ce">6.1.3.29
Serving Cell Set based SRS Spatial Relation Indication MAC CE</h4>
<p>The Serving Cell Set based SRS Spatial Relation indication MAC CE is
identified by a MAC subheader with eLCID as specified in Table 6.2.1-1b.
It has a variable size and consists of the following fields:</p>
<p>- SRS Resource's Cell ID: This field indicates the identity of the
Serving Cell, which contains the indicated SP/AP SRS Resource. If the C
field is set to 0, this field also indicates the identity of the Serving
Cell which contains all resources indicated by the Resource IDi fields.
The length of the field is 5 bits. The indicated Serving Cell is
configured as part of a <em>simultaneousSpatial-UpdatedList1</em> or
<em>simultaneousSpatial-UpdatedList2</em> as specified in TS 38.331 [5],
and this MAC CE applies to all the Serving Cells configured in the set
<em>simultaneousSpatial-UpdatedList1</em> or
<em>simultaneousSpatial-UpdatedList2</em>, respectively;</p>
<p>- SRS Resource's BWP ID: This field indicates a UL BWP as the
codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9], which contains the indicated AP/SP SRS
Resource. If the C field is set to 0, this field also indicates the
identity of the BWP which contains all resources indicated by the
Resource ID<sub>i</sub> fields. The length of the field is 2 bits;</p>
<p>- C: This field indicates whether the octets containing Resource
Serving Cell ID field(s) and Resource BWP ID field(s) are present. If
this field is set to 1, the Resource Serving Cell ID field(s) and
Resource BWP ID field(s) are present, otherwise they are not present so
MAC entity shall ignore Resource Serving Cell ID field(s) and Resource
BWP ID field(s);</p>
<p>- SRS Resource ID<sub>i</sub>: This field indicates the SP/AP SRS
Resource ID identified by <em>SRS-ResourceId</em> as specified in TS
38.331 [5]. The length of the field is 6 bits;</p>
<p>- F<sub>i</sub>: This field indicates the type of a resource used as
a spatial relationship for SRS resource indicated with SRS Resource
ID<sub>i</sub> field. F<sub>0</sub> refers to the first SRS resource
which is indicated SRS Resource ID<sub>1</sub>, F<sub>1</sub> to the
second one and so on. The field is set to 1 to indicate NZP CSI-RS
resource index is used, and it is set to 0 to indicate either SSB index
or SRS resource index is used. The length of the field is 1 bit;</p>
<p>- Resource Serving Cell ID<sub>i</sub>: This field indicates the
identity of the Serving Cell on which the resource used for spatial
relationship derivation for SRS Resource ID<sub>i</sub> is located. The
length of the field is 5 bits;</p>
<p>- Resource BWP ID<sub>i</sub>: This field indicates a UL BWP as the
codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9], on which the resource used for spatial
relationship derivation for SRS Resource ID<sub>i</sub> is located. The
length of the field is 2 bits;</p>
<p>- Resource ID<sub>i</sub>: This field contains an identifier of the
resource used for spatial relationship derivation for SRS resource i.
Resource ID<sub>0</sub> refers to the first SRS resource which is
indicated SRS Resource ID<sub>0</sub>, Resource ID<sub>1</sub> to the
second one and so on. If F<sub>i</sub> is set to 0, the first bit of
this field is always set to 0. If F<sub>i</sub> is set to 0, and the
second bit of this field is set to 1, the remainder of this field
contains <em>SSB-Index</em> as specified in TS 38.331 [5]. If
F<sub>i</sub> is set to 0, and the second bit of this field is set to 0,
the remainder of this field contains <em>SRS-ResourceId</em> as
specified in TS 38.331 [5]. The length of the field is 8 bits.</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image48.svg" /></p>
<p>Figure 6.1.3.29-1: Serving Cell set based SRS Spatial Relation
Indication MAC CE</p>
<h4 id="lbt-failure-mac-ces">6.1.3.30 LBT failure MAC CEs</h4>
<p>The LBT failure MAC CE of one octet is identified by a MAC subheader
with LCID as specified in Table 6.2.1-2. It has a fixed size and
consists of a single octet containing 8 C-fields as follows (Figure
6.1.3.30-1).</p>
<p>The LBT failure MAC CE of four octets is identified by a MAC
subheader with LCID as specified in Table 6.2.1-2. It has a fixed size
and consists of four octets containing 32 C-fields as follows (Figure
6.1.3.30-2).</p>
<p>A single octet format is used when the highest <em>ServCellIndex</em>
of this MAC entity's Serving Cell for which consistent LBT failure is
detected is less than 8, otherwise four octets format is used.</p>
<p>- C<sub>i</sub>: If there is a Serving Cell configured for the MAC
entity with <em>ServCellIndex</em> i as specified in TS 38.331 [5] and
if consistent LBT failure have been triggered and not cancelled in this
Serving Cell, the field is set to 1, otherwise the field is set to
0.</p>
<p><img src="media/image49.svg" /></p>
<p>Figure 6.1.3.30-1: LBT failure MAC CE of one octet</p>
<p><img src="media/image50.svg" /></p>
<p>Figure 6.1.3.30-2: LBT failure MAC CE of four octets</p>
<h4 id="multiple-entry-configured-grant-confirmation-mac-ce">6.1.3.31
Multiple Entry Configured Grant Confirmation MAC CE</h4>
<p>The Multiple Entry Configured Grant Confirmation MAC CE is identified
by a MAC subheader with eLCID as specified in Table 6.2.1-2b. It has a
fixed size and consists of a four octets containing 32 CG-fields. The
Multiple Entry Configured Grant Confirmation MAC CE is defined as
follows (Figure 6.1.3.31-1).</p>
<p>- CG<sub>i</sub>: This field indicates whether PDCCH indicating
activation or deactivation of configured uplink grant with
<em>ConfiguredGrantConfigIndexMAC</em> i has been received. The
CG<sub>i</sub> field is set to 1 to indicate that PDCCH indicating
activation or deactivation of type 2 configured uplink grant with
<em>ConfiguredGrantConfigIndexMAC</em> i has been received. The
CG<sub>i</sub> field is set to 0 to indicate that PDCCH indicating
activation or deactivation of type 2 configured uplink grant with
<em>ConfiguredGrantConfigIndexMAC</em> i has not been received.</p>
<p><img src="media/image51.svg" /></p>
<p>Figure 6.1.3.31-1: Multiple Entry Configured Grant Confirmation MAC
CE</p>
<h4 id="duplication-rlc-activationdeactivation-mac-ce">6.1.3.32
Duplication RLC Activation/Deactivation MAC CE</h4>
<p>The Duplication RLC Activation/Deactivation MAC CE is identified by a
MAC subheader with eLCID as specified in Table 6.2.1-1b. It has a fixed
size and consists of a single octet defined as follows (Figure
6.1.3.32-1).</p>
<p>- DRB ID: This field indicates the identity of DRB for which the MAC
CE applies. The length of the field is 5 bits;</p>
<p>- RLC<sub>i</sub>: This field indicates the activation/deactivation
status of PDCP duplication for the RLC entity i where i is ascending
order of logical channel ID of secondary RLC entities in the order of
MCG and SCG, for the DRB. The RLC<sub>i</sub> field is set to 1 to
indicate that the PDCP duplication for the RLC entity i shall be
activated. The RLC<sub>i</sub> field is set to 0 to indicate that the
PDCP duplication for the RLC entity i shall be deactivated.</p>
<p><img src="media/image52.svg" /></p>
<p>Figure 6.1.3.32-1: Duplication RLC Activation/Deactivation MAC CE</p>
<h4 id="sidelink-buffer-status-report-mac-ces">6.1.3.33 Sidelink Buffer
Status Report MAC CEs</h4>
<p>Sidelink Buffer Status Report (SL-BSR) MAC CEs consist of either:</p>
<p>- SL-BSR format (variable size); or</p>
<p>- Truncated SL-BSR format (variable size).</p>
<p>SL-BSR and Truncated SL-BSR MAC control elements consist of one
Destination Index field, one LCG ID field and one corresponding Buffer
Size field per reported target group.</p>
<p>The SL-BSR formats are identified by MAC subheaders with LCIDs as
specified in in Table 6.2.1-2.</p>
<p>The fields in the SL-BSR MAC CE are defined as follows:</p>
<p>- Destination Index: The Destination Index field identifies the
destination. The length of this field is 5 bits. The value is set to one
index corresponding to SL destination identity associated to same
destination reported in <em>sl-TxResourceReqList</em>,
<em>sl-TxResourceReqListDisc</em> and
<em>sl-TxResourceReqListCommRelay</em>, if present. The value is indexed
sequentially from 0 in the same ascending order of SL destination
identity in <em>sl-TxResourceReqList</em>,
<em>sl-TxResourceReqListDisc</em> and
<em>sl-TxResourceReqListCommRelay</em> as specified in TS 38.331 [5].
When multiple lists are reported, the value is indexed sequentially
across all the lists in the same order as presented in
<em>SidelinkUEInformaitonNR</em> message;</p>
<p>- LCG ID: The Logical Channel Group ID field identifies the group of
logical channel(s) whose SL buffer status is being reported. The length
of the field is 3 bits;</p>
<p>- Buffer Size: The Buffer Size field identifies the total amount of
data available according to the data volume calculation procedure in TSs
38.322 [3] and 38.323 [4] across all logical channels of a logical
channel group of a destination after the MAC PDU has been built (i.e.
after the logical channel prioritization procedure, which may result the
value of the Buffer Size field to zero). The amount of data is indicated
in number of bytes. The size of the RLC headers and MAC subheaders are
not considered in the buffer size computation. The length of this field
is 8 bits. The values for the Buffer Size field are shown in Table
6.1.3.1-2, respectively. For the Truncated SL-BSR format the number of
Buffer Size fields included is maximised, while not exceeding the number
of padding bits.</p>
<blockquote>
<p>Buffer Sizes of LCGs are included in decreasing order of the highest
priority of the sidelink logical channel having data available for
transmission in each of the LCGs irrespective of the value of the
Destination Index field.</p>
</blockquote>
<p>NOTE: Void.</p>
<p><img src="media/image53.svg" /></p>
<p>Figure 6.1.3.33-1: SL-BSR and Truncated SL-BSR MAC control
element</p>
<h4 id="sidelink-configured-grant-confirmation-mac-ce">6.1.3.34 Sidelink
Configured Grant Confirmation MAC CE</h4>
<p>The Sidelink Configured Grant Confirmation MAC CE is identified by a
MAC subheader with eLCID as specified in Table 6.2.1-2b. The Sidelink
Configured Grant Confirmation MAC CE is defined as follows (Figure
6.1.3.34-1):</p>
<p>- C<sub>i</sub>: If there is a configured grant Type 2 with
<em>sl-ConfigIndexCG</em> i configured for the MAC entity as specified
in TS 38.331 [5], this field indicates the confirmation to
activation/deactivation of the configured grant with
<em>sl-ConfigIndexCG</em> i, else the MAC entity shall ignore the
C<sub>i</sub> field. The C<sub>i</sub> field is set to 1 to confirm that
the configured grant with <em>sl-ConfigIndexCG</em> i shall be
activated. The C<sub>i</sub> field is set to 0 to indicate that the
configured grant with <em>sl-ConfigIndexCG</em> i shall be
deactivated.</p>
<p><img src="media/image54.svg" /></p>
<p>Figure 6.1.3.34-1: Sidelink Configured Grant Confirmation MAC CE</p>
<h4 id="sidelink-csi-reporting-mac-ce">6.1.3.35 Sidelink CSI Reporting
MAC CE</h4>
<p>The Sidelink CSI Reporting MAC CE is identified by a MAC subheader
with LCID as specified in Table 6.2.4-1. The priority of the Sidelink
CSI Reporting MAC CE is fixed to '1'. The Sidelink CSI Reporting MAC CE
is defined as follows (Figure 6.1.3.35-1):</p>
<p>- RI: This field indicates the derived value of the Rank Indicator
for sidelink CSI reporting as specified in clause 8.5 of TS 38.214 [7].
The length of the field is 1 bit, the values of the rank indicator field
are mapped to allowed rank indicator values with increasing order, where
'0' is mapped to the smallest allowed rank indicator value;</p>
<p>- CQI: This field indicates the derived value of the Channel Quality
Indicator for sidelink CSI reporting as specified in clause 8.5 of TS
38.214 [7]. The length of the field is 4 bit;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image55.svg" /></p>
<p>Figure 6.1.3.35-1: Sidelink CSI Reporting MAC CE</p>
<h4 id="sp-positioning-srs-activationdeactivation-mac-ce">6.1.3.36 SP
Positioning SRS Activation/Deactivation MAC CE</h4>
<p>The SP Positioning SRS Activation/Deactivation MAC CE is identified
by a MAC subheader with eLCID as specified in Table 6.2.1-1b. It has a
variable size with following fields:</p>
<p>- A/D: This field indicates whether to activate or deactivate
indicated SP Positioning SRS resource set. The field is set to 1 to
indicate activation, otherwise it indicates deactivation;</p>
<p>- Positioning SRS Resource Set's Cell ID: This field indicates the
identity of the Serving Cell, which contains activated/deactivated SP
Positioning SRS Resource Set. If the C field is set to 0, this field
also indicates the identity of the Serving Cell which contains all
resources indicated by the Spatial Relation for Resource ID<sub>i</sub>
fields, if present. The length of the field is 5 bits;</p>
<p>- Positioning SRS Resource Set's BWP ID: This field indicates a UL
BWP as the codepoint of the DCI <em>bandwidth part indicator</em> field
as specified in TS 38.212 [9], which contains activated/deactivated SP
Positioning SRS Resource Set. If the C field is set to 0, this field
also indicates the identity of the BWP which contains all resources
indicated by the Spatial Relation for Resource ID<sub>i</sub> fields, if
present. The length of the field is 2 bits;</p>
<p>- C: This field indicates whether the octets containing Resource
Serving Cell ID field(s) and Resource BWP ID field(s) within the field
Spatial Relation for Resource ID <sub>i</sub> are present, except for
Spatial Relation Resource ID<sub>i</sub> with DL-PRS or SSB. When A/D is
set to 1, if this field is set to 1, the octets containing Resource
Serving Cell ID field(s) and Resource BWP ID field(s) in the field
Spatial Relation for Resource ID<sub>i</sub> are present, otherwise if
this field is set to 0, they are not present. When A/D is set to 0, this
field is always set to 0 that they are not present;</p>
<p>- SUL: This field indicates whether the MAC CE applies to the NUL
carrier or SUL carrier configuration. This field is set to 1 to indicate
that it applies to the SUL carrier configuration, and it is set to 0 to
indicate that it applies to the NUL carrier configuration;</p>
<p>- Positoining SRS Resource Set ID: This field indicates the SP
Positioning SRS Resource Set identified by <em>SRS-PosResourceSetId</em>
as specified in TS 38.331 [5], which is to be activated or deactivated.
The length of the field is 4 bits;</p>
<p>- Spatial Relation for Resource ID<sub>i</sub>: The field Spatial
Relation for Resource ID<sub>i</sub> is only present if MAC CE is used
for activation, i.e. the A/D field is set to 1. M is the total number of
Positioning SRS resource(s) configured under the SP Positioning SRS
resource set indicated by the field Positioning SRS Resource Set ID.
There are 4 types of Spatial Relation for Resource ID<sub>i</sub>, which
is indicated by the F (F<sub>0</sub> and F<sub>1</sub>) field within.
The fields within Spatial Relation for Resource ID<sub>i</sub> are shown
in Figures 6.1.3.36-2 to 6.1.3.36-5 for the 4 types of Spatial Relations
for Resource ID<sub>i</sub>;</p>
<p>- S: This field indicates whether the fields Spatial Relation for
Resource ID<sub>i</sub> for the positioning SRS resource i within the
positioning SRS resource set are present. If the field is set to 1, the
fields Spatial Relation for Resource IDi are present; otherwise, they
are absent;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image56.svg" /></p>
<p>Figure 6.1.3.36-1: SP Positioning SRS Activation/Deactivation MAC
CE</p>
<p><img src="media/image57.svg" /></p>
<p>Figure 6.1.3.36-2: Spatial Relation for Resource ID<sub>i</sub> with
NZP CSI-RS</p>
<p><img src="media/image58.svg" /></p>
<p>Figure 6.1.3.36-3: Spatial Relation for Resource ID<sub>i</sub> with
SSB</p>
<p><img src="media/image59.svg" /></p>
<p>Figure 6.1.3.36-4: Spatial Relation for Resource ID<sub>i</sub> with
SRS</p>
<p><img src="media/image60.svg" /></p>
<p>Figure 6.1.3.36-5: Spatial Relation for Resource ID<sub>i</sub> with
DL-PRS</p>
<p>The field Spatial Relation for Resource ID<sub>i</sub> consists of
the following fields:</p>
<p>- F<sub>0</sub>: This field indicates the type of a resource used as
a spatial relation for the i<sup>th</sup> Positioning SRS resource
within the Positioning SRS Resource Set indicated with the field
Positioning SRS Resource Set ID. The field is set to 00 to indicate NZP
CSI-RS resource index is used; it is set to 01 to indicate SSB index is
used; it is set to 10 to indicate SRS resource index is used; it is set
to 11 to indicate DL-PRS index is used. The length of the field is 2
bits;</p>
<p>- F<sub>1</sub>: This field indicates the type of SRS resource used
as spatial relation for the i<sup>th</sup> Positioning SRS resource
within the SP Positioning SRS Resource Set indicated with the field
Positioning SRS Resource Set ID when F<sub>0</sub> is set to 10. The
field is set to 0 to indicate SRS resource index <em>SRS-ResourceId</em>
as defined in TS 38.331 [5] is used; the field is set to 1 to indicate
Positioning SRS resource index <em>SRS-PosResourceId</em> as defined in
TS 38.331 [5] is used;</p>
<p>- NZP CSI-RS Resource ID: This field contains an index of
<em>NZP-CSI-RS-ResourceID</em>, as specified in TS 38.331 [5],
indicating the NZP CSI-RS resource, which is used to derive the spatial
relation for the positioning SRS. The length of the field is 8 bits;</p>
<p>- SSB index: This field contains an index of SSB <em>SSB-Index</em>
as specified in TS 38.331 [5] and/or TS 37.355 [23]. The length of the
field is 6 bits;</p>
<p>- PCI: This field contains physical cell identity <em>PhysCellId</em>
as specified in TS 38.331 [5] and/or TS 37.355 [23]. The length of the
field is 10 bits;</p>
<p>- SRS resource ID: When F<sub>1</sub> is set to 0, the field
indicates an index for SRS resource <em>SRS-ResourceId</em> as defined
in TS 38.331 [5]; When F<sub>1</sub> is set to 1, the field indicates an
index for Positioning SRS resource <em>SRS-PosResourceId</em> as defined
in TS 38.331 [5]. The length of the field is 5 bits representing the
index from 0 to 31;</p>
<p>- E: This field indicates the extension of SRS resource ID as the MSB
of SRS resource ID. The total length of the extended SRS resource ID is
6 bits. If E bit is set to 1, the SRS resource ID value is 5-bit SRS
resource ID field + 32;</p>
<p>- DL-PRS Resource Set ID: This field contains an index for DL-PRS
Resource Set <em>nr-DL-PRS-ResourceSetId</em> as defined in TS 37.355
[23]. The length of the field is 3 bits;</p>
<p>- DL-PRS Resource ID: This field contains an index for DL-PRS
resource <em>nr-DL-PRS-Resource-Id</em> as defined in TS 37.355 [23].
The length of the field is 6 bits;</p>
<p>- DL-PRS ID: This field contains an identity for DL-PRS resource
<em>dl-PRS-ID</em> as defined in TS 37.355 [23]. The length of the field
is 8 bits;</p>
<p>- PI: This field indicates whether the field DL-PRS resource ID is
present within the Spatial Relation for Resource ID<sub>i</sub> with
DL-PRS. If the field is set to 1, the octet containing the field DL-PRS
resource ID is present; otherwise, the octet is omitted;</p>
<p>- SI: This field indicates whether the field SSB index is present
within the Spatial Relation for Resource ID<sub>i</sub> with SSB. If the
field is set to 1, the octet containing the field SSB index is present;
otherwise, the octet is omitted;</p>
<p>- Resource Serving Cell ID<sub>i</sub>: This field indicates the
identity of the Serving Cell on which the resource used for spatial
relationship derivation for the i<sup>th</sup> Positioning SRS resource
is located. The length of the field is 5 bits;</p>
<p>- Resource BWP ID<sub>i</sub>: This field indicates a UL BWP as the
codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9], on which the resource used for spatial
relationship derivation for the i<sup>th</sup> Positioning SRS resource
is located. The length of the field is 2 bits.</p>
<h4
id="guard-symbols-mac-ces-for-case-6-and-case-7-timing-modes">6.1.3.37
Guard Symbols MAC CEs for Case-6 and Case-7 timing modes</h4>
<p>The Guard Symbols MAC CEs (i.e. Provided Guard Symbols MAC CE and
Desired Guard Symbols MAC CE) for Case-6 and Case-7 timing modes are
identified by the MAC subheader with eLCIDs as specified in Table
6.2.1-1b for DL-SCH and in Table 6.2.1-2b for UL-SCH.</p>
<p>The MAC CEs have fixed size and consist of three octets each, defined
as follows (Figure 6.1.3.37-1 and Figure 6.1.3.37-2):</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- Sub-carrier spacing (SCS): This field indicates the subcarrier
spacing used as reference for the guard spacing. The length of this
field is 2bits. The values for the SCS field are shown in Table
6.1.3.22-2;</p>
<p>- Number of Guard Symbols (NmbGS<sub>i</sub>): This field indicates
the number of guard symbols for the switching scenarios shown in Table
5.18.19-2.</p>
<p><img src="media/image61.svg" /></p>
<p>Figure 6.1.3.37-1: Case-6 timing Guard Symbols MAC CEs</p>
<p><img src="media/image62.svg" /></p>
<p>Figure 6.1.3.37-2: Case-7 timing Guard Symbols MAC CEs</p>
<h4 id="case-7-timing-advance-offset-mac-ce">6.1.3.38 Case-7 Timing
advance offset MAC CE</h4>
<p>The Case-7 Timing advance offset MAC CE is identified by MAC
subheader with eLCID as specified in Table 6.2.1-1b.</p>
<p>The Case-7 Timing advance offset MAC CE is related to the Case-7
timing mode, has a fixed size and consists of two octets defined as
follows (Figure 6.1.3.21-2):</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- T<sub>offset,2</sub>: This field indicates the value (-3072, -3071,
…, 1023) used to control the amount of timing adjustment that MAC entity
indicates (as specified in TS 38.213 [6]). The length of the field is 12
bits.</p>
<p><img src="media/image63.svg" /></p>
<p>Figure 6.1.3.38-1: Case-7 Timing advance offset MAC CE</p>
<h4 id="case-6-timing-request-mac-ce">6.1.3.39 Case-6 Timing Request MAC
CE</h4>
<p>The Case-6 Timing Request MAC CE is identified by MAC subheader with
eLCID as specified in Table 6.2.1-2b. This MAC CE is used by the IAB-MT
node to inform its parent node whether Case-6 timing is required for
simultaneous operation.</p>
<p>It has a fixed size of zero bits.</p>
<h4
id="positioning-measurement-gap-activationdeactivation-request-mac-ce">6.1.3.40
Positioning Measurement Gap Activation/Deactivation Request MAC CE</h4>
<p>The Positioning Measurement Gap Activation/deactivation request MAC
CE is identified by MAC subheader with eLCID as specified in Table
6.2.1-2b.</p>
<p>It has a fixed 8-bit size defined as follows (Figure 6.1.3.40-1):</p>
<p>- Positioning MG ID: This field indicates the identifier for the
pre-configured positioning measurement gap. The length of the field is 4
bits;</p>
<p>- A/D: This field indicates the activation or deactivation of the
Positioning Measurement Gap. The field is set to 1 to indicate
activation, otherwise it indicates deactivation. The length of the field
is 1 bit;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image64.svg" /></p>
<p>Figure 6.1.3.40-1: Positioning Measurement Gap
Activation/Deactivation Request MAC CE</p>
<h4
id="positioning-measurement-gap-activationdeactivation-command-mac-ce">6.1.3.41
Positioning Measurement Gap Activation/Deactivation Command MAC CE</h4>
<p>The Positioning Measurement Gap Activation/Deactivation Command MAC
CE is identified by MAC subheader with eLCID as specified in Table
6.2.1-1b.</p>
<p>It has a fixed 8-bit size defined as follows (Figure 6.1.3.41-1):</p>
<p>- Positioning MG ID: This field indicates the identifier for the
preconfigured positioning measurement gap. The length of the field is 4
bits;</p>
<p>- A/D: This field indicates the activation or deactivation of the
Positioning Measurement Gap. The field is set to 1 to indicate
activation, otherwise it indicates deactivation. The length of the field
is 1 bit;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image65.svg" /></p>
<p>Figure 6.1.3.41-1: Positioning Measurement Gap
Activation/Deactivation Command MAC CE</p>
<h4 id="ppw-activationdeactivation-command-mac-ce">6.1.3.42 PPW
Activation/Deactivation Command MAC CE</h4>
<p>The PPW Activation/Deactivation Command MAC CE is identified by MAC
subheader with eLCID as specified in Table 6.2.1-1b.</p>
<p>It has variable size defined as follows (Figure 6.1.3.42-1):</p>
<p>- numEntry: This field indicates the number of entries N-1 in the MAC
CE. 00 indicates that N equals to 2; 01 indicates that N equals to 3 and
so on. The length of the field is 2 bits;</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- PPW ID: This field indicates the index of the PPW configured on
active DL BWP of the Serving Cell identified by the above Serving Cell
ID. Index 0 corresponds to the first entry within the list of the PPW
configuration by the increasing order of <em>dl-PPW-ID</em> in TS 38.331
[5] in this BWP, index 1 corresponds to the second entry in the list and
so on. The length of the field is 2 bits;</p>
<p>- A/D: This field indicates the activation or deactivation of the
PPW. The field is set to 1 to indicate activation, otherwise it
indicates deactivation. The length of the field is 1 bit;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image66.svg" /></p>
<p>Figure 6.1.3.42-1: PPW Activation/Deactivation Command MAC CE</p>
<h4 id="enhanced-bfr-mac-ces">6.1.3.43 Enhanced BFR MAC CEs</h4>
<p>The Enhanced MAC CEs for BFR consists of either:</p>
<p>- Enhanced BFR MAC CE; or</p>
<p>- Truncated Enhanced BFR MAC CE.</p>
<p>The Enhanced BFR MAC CE and Truncated Enhanced BFR MAC CE are
identified by a MAC subheader with eLCID/LCID as specified in Table
6.2.1-2 and Table 6.2.1-2b.</p>
<p>The Enhanced BFR MAC CE and Truncated Enhanced BFR MAC CE have a
variable size. They include an SP field, C<sub>i</sub> bitmap (single
octet or four octets), S<sub>k</sub> bitmap (0 to 4 octets), beam
failure recovery information i.e. octets containing candidate beam
availability indication (AC) for BFD-RS set(s) of SpCell configured with
two BFD-RS sets, and in ascending order based on <em>ServCellIndex</em>,
beam failure recovery information i.e. octets containing candidate beam
availability indication (AC) for SCells or BFD-RS set(s) of SCells
configured with two BFD-RS sets indicated in the C<sub>i</sub> bitmap.
For Enhanced BFR MAC CE, a single octet C<sub>i</sub> bitmap is used
when the highest <em>ServCellIndex</em> of this MAC entity's SCell for
which beam failure is detected for SCell or for at least one BFD-RS set
of SCell and the evaluation of the candidate beams according to the
requirements as specified in TS 38.133 [11] has been completed is less
than 8, otherwise four octets C<sub>i</sub> bitmap is used. A MAC PDU
shall contain at most one MAC CE for BFR.</p>
<p>For Truncated Enhanced BFR MAC CE, a single octet C<sub>i</sub>
bitmap is used for the following cases, otherwise four octets
C<sub>i</sub> bitmap is used:</p>
<p>- the highest <em>ServCellIndex</em> of this MAC entity's SCell for
which beam failure is detected for SCell or for at least one BFD-RS set
of SCell and the evaluation of the candidate beams according to the
requirements as specified in TS 38.133 [11] has been completed is less
than 8; or</p>
<p>- beam failure is detected for SpCell (as specified in Clause 5.17)
not configured with two BFD-RS sets, and the SpCell is to be indicated
in a Truncated Enhanced BFR MAC CE and the UL-SCH resources available
for transmission cannot accommodate the Truncated Enhanced BFR MAC CE
with the four octets C<sub>i</sub> bitmap plus its subheader as a result
of LCP; or</p>
<p>- Random Access procedure is initiated for beam failure recovery of
both BFD-RS sets of SpCell (as specified in Clause 5.17) configured with
two BFD-RS sets and the SpCell is to be indicated in a Truncated
Enhanced BFR MAC CE and the UL-SCH resources available for transmission
cannot accommodate the Truncated Enhanced BFR MAC CE with the four
octets Ci bitmap plus its subheader as a result of LCP.</p>
<p>For Enhanced BFR MAC CE and Truncated Enhanced BFR MAC CE, a single
octet S<sub>k</sub> bitmap is included if the total number of Serving
Cells configured with two BFD-RS sets for which SP/C<sub>i</sub> field
set to 1 is greater than 0 and less than 9; a two octets S<sub>k</sub>
bitmap is included if the total number of Serving Cells configured with
two BFD-RS sets for which SP/C<sub>i</sub> field set to 1 is greater
than 8 and less than 17; a three octets S<sub>k</sub> bitmap is included
if the total number of Serving Cells configured with two BFD-RS sets for
which SP/C<sub>i</sub> field is set to 1 is greater than 16 and less
than 25; a four octets S<sub>k</sub> bitmap is included if the total
number of Serving Cells configured with two BFD-RS sets for which
SP/C<sub>i</sub> field set to 1 is greater than 24; S<sub>k</sub> bitmap
is not included if the total number of Serving Cells configured with two
BFD-RS sets for which SP/C<sub>i</sub> field is set to 1 is zero.</p>
<p>For Truncated Enhanced BFR MAC CE, octet(s) containing the AC field,
if any, are included for SpCell first, then one octet containing the AC
field is included for SCell(s) (in ascending order of the
<em>ServCellIndex</em>) and then the second octet containing the AC
field, if any, is included for SCell(s) (in ascending order of the
<em>ServCellIndex</em>), while not exceeding the available grant size.
The number of the octets containing the AC field in the Truncated
Enhanced BFR MAC CE can be zero.</p>
<p>The fields in the Enhanced BFR MAC CEs are defined as follows:</p>
<p>- SP (Enhanced BFR MAC CE): This field indicates beam failure
detection (as specified in clause 5.17) for the SpCell of this MAC
entity and the presence of octet(s) containing the AC field if the
SpCell is configured with multiple BFD-RS sets. For the SpCell
configured with two BFD-RS sets, this field set to 1 indicates that beam
failure is detected for at least one BFD-RS set, the evaluation of the
candidate beams according to the requirements as specified in TS 38.133
[11] has been completed, and the octet(s) containing the AC field is
present for the SpCell; otherwise, it is set to 0. The octet(s)
containing the AC field for SpCell are included before those of
SCell(s). For the SpCell not configured with multiple BFD-RS sets, the
SP field is set to 1 to indicate that beam failure is detected for
SpCell when Enhanced BFR MAC CE is to be included into a MAC PDU as part
of Random Access Procedure (as specified in 5.1.3a and 5.1.4);
otherwise, it is set to 0;</p>
<p>- SP (Truncated Enhanced BFR MAC CE): This field indicates beam
failure detection (as specified in clause 5.17) for the SpCell of this
MAC entity. For the SpCell configured with two BFD-RS sets, this field
set to 1 indicates that beam failure is detected for at least one BFD-RS
set, the evaluation of the candidate beams according to the requirements
as specified in TS 38.133 [11] has been completed, and the octet(s)
containing the AC field may be present for the SpCell; otherwise, it is
set to 0. For the SpCell not configured with multiple BFD-RS sets, the
SP field is set to 1 to indicate that beam failure is detected for
SpCell when Truncated Enhanced BFR MAC CE is to be included into a MAC
PDU as part of Random Access Procedure (as specified in 5.1.3a and
5.1.4); otherwise, it is set to 0;</p>
<p>- C<sub>i</sub> (Enhanced BFR MAC CE): This field indicates beam
failure detection (as specified in clause 5.17) and the presence of
octet(s) containing the AC field for the SCell with
<em>ServCellIndex</em> i as specified in TS 38.331 [5]. The
C<sub>i</sub> field set to 1 indicates that beam failure is detected for
the SCell or at least one BFD-RS set of the SCell, the evaluation of the
candidate beams according to the requirements as specified in TS 38.133
[11] has been completed, and the octet(s) containing the AC field is
present for the SCell with <em>ServCellIndex</em> i. The C<sub>i</sub>
field set to 0 indicates either that the beam failure is not detected
for the SCell or any BFD-RS set of the SCell, and the octet(s)
containing the AC field is not present for the SCell with
<em>ServCellIndex</em> i; or that the beam failure is detected for the
SCell or at least one BFD-RS set of the SCell but the evaluation of the
candidate beams according to the requirements as specified in TS 38.133
[11] has not been completed, and the octets containing the AC field is
not present for the SCell with <em>ServCellIndex</em> i. The octets
containing the AC field are present in ascending order based on the
<em>ServCellIndex</em> and are included after the octet(s) containing
the AC field for SpCell, if any;</p>
<p>- C<sub>i</sub> (Truncated Enhanced BFR MAC CE): This field indicates
beam failure detection (as specified in clause 5.17) for the SCell with
<em>ServCellIndex</em> i as specified in TS 38.331 [5]. The
C<sub>i</sub> field set to 1 indicates that beam failure is detected for
the SCell or at least one BFD-RS set of the SCell, the evaluation of the
candidate beams according to the requirements as specified in TS 38.133
[11] has been completed, and the octet(s) containing the AC field for
the SCell with <em>ServCellIndex</em> i may be present. The
C<sub>i</sub> field set to 0 indicates either that the beam failure is
not detected for the SCell or any BFD-RS set of the SCell, and the
octet(s) containing the AC field is not present for the SCell with
<em>ServCellIndex</em> i; or that the beam failure is detected for the
SCell or at least one BFD-RS set of the SCell but the evaluation of the
candidate beams according to the requirements as specified in TS 38.133
[11] has not been completed, and the octet(s) containing the AC field is
not present for the SCell with <em>ServCellIndex</em> i;</p>
<p>- S<sub>k</sub> (Enhanced BFR MAC CE): This field corresponds to the
k<sup>th</sup> Serving Cell for which SP/C<sub>i</sub> field is set to 1
and is configured with two BFD-RS sets. The Serving Cells for which
SP/C<sub>i</sub> field is set to 1 and are configured with two BFD-RS
sets, are indexed sequentially starting with SpCell and followed by
SCells in ascending order of <em>ServCellIndex</em> i. This field
indicates whether beam failure is detected for one or both BFD-RS sets
and presence of one or two octets containing the AC field of the Serving
Cell. The S<sub>k</sub> field set to 1 indicates that beam failure is
detected for both the BFD-RS sets, the evaluation of the candidate beams
according to the requirements as specified in TS 38.133 [11] has been
completed for both the BFD-RS sets, and the octets containing the AC
field are present for both the BFD-RS sets, of the Serving Cell. The
S<sub>k</sub> field set to 0 indicates that beam failure is either
detected for one of the BFD-RS sets and the evaluation of the candidate
beams according to the requirements as specified in TS 38.133 [11] has
been completed or beam failure is detected for both the BFD-RS sets but
the evaluation of the candidate beams according to the requirements as
specified in TS 38.133 [11] has not been completed for both the BFD-RS
sets, and the octet containing the AC field is present for only one
BFD-RS set of the Serving Cell. The S<sub>k</sub> field not mapped to
any Serving Cell is set to 0;</p>
<p>- S<sub>k</sub> (Truncated Enhanced BFR MAC CE): This field
corresponds to the k<sup>th</sup> Serving Cell for which
SP/C<sub>i</sub> field is set to 1 and is configured with two BFD-RS
sets. The Serving Cells for which SP/C<sub>i</sub> field is set to 1 and
are configured with two BFD-RS sets, are indexed sequentially starting
with SpCell and followed by SCells in ascending order of
<em>ServCellIndex</em> i. This field indicates whether beam failure is
detected for one or both BFD-RS sets of the Serving Cell. The
S<sub>k</sub> field set to 1 indicates that beam failure is detected for
both the BFD-RS sets, the evaluation of the candidate beams according to
the requirements as specified in TS 38.133 [11] has been completed for
both the BFD-RS sets, and the octet containing the AC field is present
for zero, one or two BFD-RS sets of the Serving Cell. The S<sub>k</sub>
field set to 0 indicates that beam failure is either detected for one of
the BFD-RS sets and the evaluation of the candidate beams according to
the requirements as specified in TS 38.133 [11] has been completed or
beam failure is detected for both the BFD-RS sets but the evaluation of
the candidate beams according to the requirements as specified in TS
38.133 [11] has not been completed for both the BFD-RS sets, and the
octet containing the AC field is present for zero or one BFD-RS set of
the Serving Cell. The S<sub>k</sub> field not mapped to any Serving Cell
is set to 0;</p>
<p>- AC: This field indicates the presence of the Candidate RS ID field
in this octet. If at least one of the SSBs with SS-RSRP above
<em>rsrp-ThresholdBFR</em> amongst the SSBs in list of candidate beams
(i.e. <em>candidateBeamRS-List-r16</em> for the SCell not configured
with two BFD-RS sets, <em>candidateBeamRS-List-r16</em> or
<em>candidateBeamRS-List2-r17</em> for Serving Cell configured with two
BFD-RS sets) or the CSI-RSs with CSI-RSRP above
<em>rsrp-ThresholdBFR</em> amongst the CSI-RSs in list of candidate
beams is available, the AC field is set to 1; otherwise, it is set to 0.
If the AC field set to 1, the Candidate RS ID field is present. If the
AC field set to 0, R bits are present instead;</p>
<p>- ID: This field indicates the identity of the BFD-RS set. It is set
to 0 if this octet corresponds to BFD-RS set one,
<em>failureDetectionSet1-r17</em>. It is set to 1 if this octet
corresponds to BFD-RS set two, <em>failureDetectionSet2-r17</em>. For
the Serving cell not configured with two BFD-RS sets, this field is set
to 0;</p>
<p>- Candidate RS ID: This field is set to the index of an SSB with
SS-RSRP above <em>rsrp-ThresholdBFR</em> amongst the SSBs in list of
candidate beams (i.e. <em>candidateBeamRS-List-r16</em> for the SCell
not configured with two BFD-RS sets, <em>candidateBeamRS-List-r16</em>
or <em>candidateBeamRS-List2-r17</em> for Serving Cell configured with
two BFD-RS sets) or to the index of a CSI-RS with CSI-RSRP above
<em>rsrp-ThresholdBFR</em> amongst the CSI-RSs in the list of candidate
beams. Index of an SSB or CSI-RS is the index of an entry in the list of
candidate beams corresponding to the SSB or CSI-RS. Index 0 corresponds
to the first entry in the list of candidate beams, index 1 corresponds
to the second entry in the list and so on. The length of this field is 6
bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image67.svg" /></p>
<p>Figure 6.1.3.43-1: Enhanced BFR and Truncated Enhanced BFR MAC CE
with one octet C<sub>i</sub> field</p>
<p><img src="media/image68.svg" /></p>
<p>Figure 6.1.3.43-2: Enhanced BFR and Truncated Enhanced BFR MAC CE
with four octets C<sub>i</sub> field</p>
<h4
id="enhanced-tci-states-indication-for-ue-specific-pdcch-mac-ce">6.1.3.44
Enhanced TCI States Indication for UE-specific PDCCH MAC CE</h4>
<p>The Enhanced TCI States Indication for UE-specific PDCCH MAC CE is
identified by a MAC PDU subheader with eLCID as specified in Table
6.2.1-1b. It has a fixed size of 24 bits with following fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5 bits. If
the indicated Serving Cell is configured as part of a
<em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em> as specified in TS 38.331 [5], this
MAC CE applies to all theServing Cells in the set
<em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em>, respectively;</p>
<p>- CORESET ID: This field indicates a Control Resource Set identified
with <em>ControlResourceSetId</em> as specified in TS 38.331 [5], for
which the TCI State is being indicated. In case the value of the field
is 0, the field refers to the Control Resource Set configured by
<em>controlResourceSetZero</em> as specified in TS 38.331 [5]. The
length of the field is 4 bits;</p>
<p>- TCI state IDi: This field indicates the TCI state identified by
<em>TCI-StateId</em> as specified in TS 38.331 [5] applicable to the
Control Resource Set identified by CORESET ID field. If the field of
CORESET ID is set to the other value than 0, this field indicates a
<em>TCI-StateId</em> configured by <em>tci-StatesPDCCH-ToAddList</em>
and <em>tci-StatesPDCCH-ToReleaseList</em> in the
<em>controlResourceSet</em> identified by the indicated CORESET ID. The
length of the field is 7 bits.</p>
<p>NOTE 1: The Enhanced TCI State Indication for UE specific PDCCH MAC
CE is not applicable to any of the configured CORESETs in a BWP if the
CORESETs are configured with different <em>CORESETPoolindex</em> values
in the BWP.</p>
<p>NOTE 2: The Enhanced TCI State Indication for UE specific PDCCH MAC
CE is applied only if <em>sfnSchemePdcch</em> is configured.</p>
<p>NOTE 3: The Enhanced TCI State Indication for UE specific PDCCH MAC
CE is not applicable to the CORESET configured by
<em>controlResourceSetZero</em> if the CORESET is associated with the
search space configured by <em>pdcch-ConfigSIB1</em> in <em>MIB</em>, or
<em>searchSpaceSIB1</em>, <em>searchSpaceZero</em>,
<em>searchSpaceOtherSystemInformation</em>, or
<em>pagingSearchSpace</em> in <em>PDCCH-ConfigCommon</em>.</p>
<p><img src="media/image69.svg" /></p>
<p>Figure 6.1.3.44-1: Enhanced TCI States Indication for UE-specific
PDCCH MAC CE</p>
<h4
id="pucch-spatial-relation-activationdeactivation-for-multiple-trp-pucch-repetition-mac-ce">6.1.3.45
PUCCH spatial relation Activation/Deactivation for multiple TRP PUCCH
repetition MAC CE</h4>
<p>The PUCCH Spatial Relation Activation/Deactivation for multiple TRP
PUCCH repetition MAC CE is identified by a MAC subheader with eLCID as
specified in Table 6.2.1-1b. It has a variable size with following
fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- BWP ID: This field indicates a UL BWP for which the MAC CE applies
as the codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9]. The length of the BWP ID field is 2
bits;</p>
<p>- C: This field indicates whether single or two spatial relation
info(s) is activated for the indicated PUCCH Resource ID. If this field
is set to 1, octet containing the second spatial relation info for the
indicated PUCCH Resource is present. If this field is set to 0, octet
containing the second spatial relation info for the indicated PUCCH
Resource is not present;</p>
<p>- PUCCH Resource ID: This field contains an identifier of the PUCCH
resource ID identified by <em>PUCCH-ResourceId</em> as specified in TS
38.331 [5], which is to be activated with a spatial relations indicated
by Spatial Relation Info IDi fields in the subsequent octet(s). The
length of the field is 7 bits. If the indicated PUCCH Resource ID is
included in a PUCCH Resource Group (configured via
<em>resourceGroupToAddModList</em> as specified in TS 38.331 [5]) of the
indicated UL BWP, no other PUCCH Resources within the same PUCCH
Resource group are indicated in the MAC CE, and this MAC CE applies to
all the PUCCH Resources in the PUCCH Resource group;</p>
<p>- Spatial Relation Info IDi: This field contains
<em>PUCCH-SpatialRelationInfoId–r16</em> where
<em>PUCCH-SpatialRelationInfoId</em> is the identifier of the PUCCH
Spatial Relation Info in <em>PUCCH-Config</em> in which the PUCCH
Resource ID is configured, as specified in TS 38.331 [5], where i is the
index of the activated spatial relation info ID. The length of the field
is 6 bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image70.svg" /></p>
<p>Figure 6.1.3.45-1: PUCCH spatial relation Activation/Deactivation for
multiple TRP PUCCH repetition MAC CE</p>
<h4
id="pucch-power-control-set-update-for-multiple-trp-pucch-repetition-mac-ce">6.1.3.46
PUCCH Power Control Set Update for multiple TRP PUCCH repetition MAC
CE</h4>
<p>The PUCCH Power Control Set Update for multiple TRP PUCCH repetition
MAC CE is identified by a MAC subheader with eLCID as specified in Table
6.2.1-1b. It has a variable size with following fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- BWP ID: This field indicates a UL BWP for which the MAC CE applies
as the codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9]. The length of the BWP ID field is 2
bits;</p>
<p>- C: This field indicates whether single or two power control set(s)
is activated for the indicated PUCCH Resource ID. If this field is set
to 1, the second power control set index (i.e. Power Control Set ID1)
for the indicated PUCCH Resource is present. If this field is set to 0,
the second power control set index (i.e. Power Control Set ID1) for the
indicated PUCCH Resource is not present;</p>
<p>- PUCCH Resource ID: This field contains an identifier of the PUCCH
resource ID identified by <em>PUCCH-ResourceId</em> as specified in TS
38.331 [5], which is to be activated with a power control set(s)
indicated by Power Control Set IDi fields in the subsequent octet. The
length of the field is 7 bits. If the indicated PUCCH Resource ID is
included in a PUCCH Resource Group (configured via
<em>resourceGroupToAddModList</em> as specified in TS 38.331 [5]) of the
indicated UL BWP, no other PUCCH Resources within the same PUCCH
Resource group are indicated in the MAC CE, and this MAC CE applies to
all the PUCCH Resources in the PUCCH Resource group;</p>
<p>- Power Control Set ID<sub>i</sub>: This field contains
<em>PUCCH-PowerControlSetInfoId</em> where
<em>PUCCH-PowerControlSetInfoId</em> is the identifier of the PUCCH
Power Control Set in <em>PUCCH-Config</em> in which the PUCCH Resource
ID is configured, as specified in TS 38.331 [5], where i is the index of
the power control set ID. The length of the field is 3 bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image71.svg" /></p>
<p>Figure 6.1.3.46-1: PUCCH power control set update for multiple TRP
PUCCH repetition MAC CE</p>
<h4 id="unified-tci-states-activationdeactivation-mac-ce-1">6.1.3.47
Unified TCI States Activation/Deactivation MAC CE</h4>
<p>The Unified TCI States Activation/Deactivation MAC CE is identified
by a MAC subheader with eLCID as specified in Table 6.2.1-1b. It has a
variable size consisting of following fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5 bits. If
the indicated Serving Cell is configured as part of a
<em>simultaneousU-TCI-UpdateList1</em>,
<em>simultaneousU-TCI-UpdateList2</em>,
<em>simultaneousU-TCI-UpdateList3</em> or
<em>simultaneousU-TCI-UpdateList4</em> as specified in TS 38.331 [5],
this MAC CE applies to all theServing Cells in the set
<em>simultaneousU-TCI-UpdateList1</em>,
<em>simultaneousU-TCI-UpdateList2</em>,
<em>simultaneousU-TCI-UpdateList3</em> or
<em>simultaneousU-TCI-UpdateList4</em>, respectively;</p>
<p>- DL BWP ID: This field indicates a DL BWP for which the MAC CE
applies as the codepoint of the DCI <em>bandwidth part indicator</em>
field as specified in TS 38.212 [9]. The length of the BWP ID field is 2
bits;</p>
<p>- UL BWP ID: This field indicates a UL BWP for which the MAC CE
applies as the codepoint of the DCI <em>bandwidth part indicator</em>
field as specified in TS 38.212 [9]. If value of
<em>unifiedTCI-StateType</em> in the Serving Cell indicated by Serving
Cell ID is <em>joint</em>, this field is considered as the reserved
bits. The length of the BWP ID field is 2 bits;</p>
<p>- P<sub>i</sub>: This field indicates whether each TCI codepoint has
multiple TCI states or single TCI state. If P<sub>i</sub> field is set
to 1, it indicates that i<sup>th</sup> TCI codepoint includes the DL TCI
state and the UL TCI state. If P<sub>i</sub> field is set to 0, it
indicates that i<sup>th</sup> TCI codepoint includes only the DL/joint
TCI state or the UL TCI state. The codepoint to which a TCI state is
mapped is determined by its ordinal position among all the TCI state ID
fields;</p>
<p>- D/U: This field indicate whether the TCI state ID in the same octet
is for joint/downlink or uplink TCI state. If this field is set to 1,
the TCI state ID in the same octet is for joint/downlink. If this field
is set to 0, the TCI state ID in the same octet is for uplink;</p>
<p>- TCI state ID: This field indicates the TCI state identified by
<em>TCI-StateId</em> as specified in TS 38.331 [5]. If D/U is set to 1,
7-bits length TCI state ID i.e. <em>TCI-StateId</em> as specified in TS
38.331 [5] is used. If D/U is set to 0, the most significant bit of TCI
state ID is considered as the reserved bit and remainder 6 bits indicate
the <em>TCI-UL-State-Id</em> as specified in TS 38.331 [5]. The maximum
number of activated TCI states is 16;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image72.svg" /></p>
<p>Figure 6.1.3.47-1: Unified TCI state activation/deactivation MAC
CE</p>
<h4 id="enhanced-single-entry-phr-mac-ce">6.1.3.48 Enhanced Single Entry
PHR MAC CE</h4>
<p>The Enhanced Single Entry PHR MAC CE is identified by a MAC subheader
with eLCID as specified in Table 6.2.1-2b. It has a variable size with
following fields:</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Power Headroom (PH): This field indicates the power headroom level.
The length of the field is 6 bits. The reported PH and the corresponding
power headroom levels are shown in Table 6.1.3.8-1 below (the
corresponding measured values in dB are specified in TS 38.133
[11]);</p>
<p>- P: If <em>mpe-Reporting-FR2</em> is configured and the Serving Cell
operates on FR2, the MAC entity shall set this field to 0 if the applied
P-MPR value, to meet MPE requirements, as specified in TS 38.101-2 [15],
is less than P-MPR_00 as specified in TS 38.133 [11] and to 1 otherwise.
If <em>mpe-Reporting-FR2</em> is not configured or the Serving Cell
operates on FR1, this field indicates whether power backoff is applied
due to power management (as allowed by P-MPR<sub>c</sub> as specified in
TS 38.101-1 [14], TS 38.101-2 [15], and TS 38.101-3 [16]). The MAC
entity shall set the P field to 1 if the corresponding
P<sub>CMAX,f,c</sub> field would have had a different value if no power
backoff due to power management had been applied;</p>
<p>- P<sub>CMAX,f,c</sub>: This field indicates the P<sub>CMAX,f,c</sub>
(as specified in TS 38.213 [6]) used for calculation of the preceding PH
field. The reported P<sub>CMAX,f,c</sub> and the corresponding nominal
UE transmit power levels are shown in Table 6.1.3.8-2 (the corresponding
measured values in dBm are specified in TS 38.133 [11]);</p>
<p>- MPE: If <em>mpe-Reporting-FR2</em> is configured, and the Serving
Cell operates on FR2, and if the P field is set to 1, this field
indicates the applied power backoff to meet MPE requirements, as
specified in TS 38.101-2 [15]. This field indicates an index to Table
6.1.3.8-3 and the corresponding measured values of P-MPR levels in dB
are specified in TS 38.133 [11]. The length of the field is 2 bits. If
<em>mpe-Reporting-FR2</em> is not configured, or if the Serving Cell
operates on FR1, or if the P field is set to 0, R bits are present
instead;</p>
<p>- B<sub>i</sub>: This field indicates whether the candidate beam
information identified by Resource<sub>i</sub> is present or not. If the
B<sub>1</sub> field is set to 1, the first octet containing
Resource<sub>1</sub> is present and if the B<sub>2</sub> field is set to
1, the second octet containing Resource<sub>2</sub> is present, and so
on;</p>
<p>- P<sub>i</sub>: If <em>mpe-Reporting-FR2-r17</em> is configured and
the Serving Cell operates on FR2, the MAC entity shall set this field to
0 if the applied P-MPR value, to meet MPE requirements, as specified in
TS 38.101-2 [15], is less than P-MPR_00 as specified in TS 38.133 [11]
and to 1 otherwise;</p>
<p>- MPE<sub>i</sub>: If <em>mpe-Reporting-FR2-r17</em> is configured,
and the Serving Cell operates on FR2, and if the corresponding
P<sub>i</sub> field is set to 1, this field indicates the applied power
backoff to meet MPE requirements, as specified in TS 38.101-2 [15]. This
field indicates an index to Table 6.1.3.8-3 and the corresponding
measured values of P-MPR levels in dB are specified in TS 38.133 [11].
The length of the field is 2 bits. If <em>mpe-Reporting-FR2-r17</em> is
not configured, or if the Serving Cell operates on FR1, or if the
P<sub>i</sub> field is set to 0, R bits are present instead;</p>
<p>- Resource<sub>i</sub>: This field indicates the candidate beam
identified by the number of entries in the corresponding
<em>mpe-ResourcePoolToAddModList</em> as specified in TS 38.331 [5]. The
length of this field 6 bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image73.svg" /></p>
<p>Figure 6.1.3.48-1: Enhanced Single Entry PHR MAC CE</p>
<h4 id="enhanced-multiple-entry-phr-mac-ce">6.1.3.49 Enhanced Multiple
Entry PHR MAC CE</h4>
<p>The Enhanced Multiple Entry PHR MAC CE is identified by a MAC
subheader with eLCID as specified in Table 6.2.1-2b. It has a variable
size with following fields:</p>
<p>- C<sub>i</sub>: This field indicates the presence of PH field(s) for
the Serving Cell with <em>ServCellIndex</em> i as specified in TS 38.331
[5]. The C<sub>i</sub> field set to 1 indicates that PH field(s) for the
Serving Cell with <em>ServCellIndex</em> i is reported. The
C<sub>i</sub> field set to 0 indicates that a PH field for the Serving
Cell with <em>ServCellIndex</em> i is not reported;</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- V: This field indicates if the PH value is based on a real
transmission or a reference format. For Type 1 PH, the V field set to 0
indicates real transmission on PUSCH and the V field set to 1 indicates
that a PUSCH reference format is used. For Type 2 PH, the V field set to
0 indicates real transmission on PUCCH and the V field set to 1
indicates that a PUCCH reference format is used. For Type 3 PH, the V
field set to 0 indicates real transmission on SRS and the V field set to
1 indicates that an SRS reference format is used. Furthermore, for Type
1, Type 2, and Type 3 PH, the V field set to 0 indicates the presence of
the octet containing the associated P<sub>CMAX,f,c</sub> field and the
MPE field, and the V field set to 1 indicates that the octet containing
the associated P<sub>CMAX,f,c</sub> field and the MPE field is
omitted;</p>
<p>- Power Headroom (PH): This field indicates the power headroom level.
The length of the field is 6 bits. The reported PH and the corresponding
power headroom levels are shown in Table 6.1.3.8-1 (the corresponding
measured values in dB for the NR Serving Cell are specified in TS 38.133
[11] while the corresponding measured values in dB for the E-UTRA
Serving Cell are specified in TS 36.133 [12]);</p>
<p>- P: If <em>mpe-Reporting-FR2</em> is configured and the Serving Cell
operates on FR2, the MAC entity shall set this field to 0 if the applied
P-MPR value, to meet MPE requirements, as specified in TS 38.101-2 [15],
is less than P-MPR_00 as specified in TS 38.133 [11] and to 1 otherwise.
If <em>mpe-Reporting-FR2</em> is not configured or the Serving Cell
operates on FR1, this field indicates whether power backoff is applied
due to power management (as allowed by P-MPR<sub>c</sub> as specified in
TS 38.101-1 [14], TS 38.101-2 [15], and TS 38.101-3 [16]). The MAC
entity shall set the P field to 1 if the corresponding
P<sub>CMAX,f,c</sub> field would have had a different value if no power
backoff due to power management had been applied;</p>
<p>- P<sub>CMAX,f,c</sub>: If present, this field indicates the
P<sub>CMAX,f,c</sub> (as specified in TS 38.213 [6]) for the NR Serving
Cell and the P<sub>CMAX,c</sub> or P̃<sub>CMAX,c</sub> (as specified in
TS 36.213 [17]) for the E-UTRA Serving Cell used for calculation of the
preceding PH field. The reported P<sub>CMAX,f,c</sub> and the
corresponding nominal UE transmit power levels are shown in Table
6.1.3.8-2 (the corresponding measured values in dBm for the NR Serving
Cell are specified in TS 38.133 [11] while the corresponding measured
values in dBm for the E-UTRA Serving Cell are specified in TS 36.133
[12]);</p>
<p>- MPE: If <em>mpe-Reporting-FR2</em> is configured, and the Serving
Cell operates on FR2, and if the P field is set to 1, this field
indicates the applied power backoff to meet MPE requirements, as
specified in TS 38.101-2 [15]. This field indicates an index to Table
6.1.3.8-3 and the corresponding measured values of P-MPR levels in dB
are specified in TS 38.133 [11]. The length of the field is 2 bits. If
<em>mpe-Reporting-FR2</em> is not configured, or if the Serving Cell
operates on FR1, or if the P field is set to 0, R bits are present
instead;</p>
<p>- B<sub>i</sub>: This field indicates whether the candidate beam
information identified by either Resource<sub>i</sub> is present or not.
If the B<sub>1</sub> field is set to 1, the first octet containing
Resource<sub>1</sub> is present and if the B<sub>2</sub> field is set to
1, the second octet containing Resource<sub>2</sub> is present, and so
on.</p>
<p>- P<sub>i</sub>: If <em>mpe-Reporting-FR2-r17</em> is configured and
the Serving Cell operates on FR2, the MAC entity shall set this field to
0 if the applied P-MPR value, to meet MPE requirements, as specified in
TS 38.101-2 [15], is less than P-MPR_00 as specified in TS 38.133 [11]
and to 1 otherwise;</p>
<p>- MPE<sub>i</sub>: If <em>mpe-Reporting-FR2-r17</em> is configured,
and the Serving Cell operates on FR2, and if the corresponding P i field
is set to 1, this field indicates the applied power backoff to meet MPE
requirements, as specified in TS 38.101-2 [15]. This field indicates an
index to Table 6.1.3.8-3 and the corresponding measured values of P-MPR
levels in dB are specified in TS 38.133 [11]. The length of the field is
2 bits. If <em>mpe-Reporting-FR2-r17</em> is not configured, or if the
Serving Cell operates on FR1, or if the P <sub>i</sub> field is set to
0, R bits are present instead;</p>
<p>- Resource<sub>i</sub>: This field indicates the candidate beam
identified by by the number of entries in the corresponding
<em>mpe-ResourcePoolToAddModList</em> as specified in TS 38.331 [5]. The
length of this field 6 bits.</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image74.svg" /></p>
<p>Figure 6.1.3.49-1: Enhanced Multiple Entry PHR MAC CE with the
highest ServCellIndex of Serving Cell with configured uplink is less
than 8</p>
<p><img src="media/image75.svg" /></p>
<p>Figure 6.1.3.49-2: Enhanced Multiple Entry PHR MAC CE with the
highest ServCellIndex of Serving Cell with configured uplink is equal to
or higher than 8</p>
<h4 id="enhanced-single-entry-phr-for-multiple-trp-mac-ce">6.1.3.50
Enhanced Single Entry PHR for multiple TRP MAC CE</h4>
<p>The Enhanced Single Entry PHR for multiple TRP MAC CE is identified
by a MAC subheader with eLCID as specified in Table 6.2.1-2b.</p>
<p>The two PHs together with one P<sub>CMAX,f,c</sub> for the Serving
Cell are reported if UE is configured with <em>twoPHRMode</em> with the
multiple TRP PUSCH repetition feature is configured.</p>
<p>It has a fixed size and consists of three octets defined as follows
(Figure 6.1.3.50-1):</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Power Headroom i (PH i): This field indicates the power headroom
level, where PH 1 is associated with the <em>SRS-ResourceSet</em> with a
lower <em>srs-ResourceSetId</em> and PH 2 is associated with the
SRS-ResourceSet with a higher <em>srs-ResourceSetId</em>. PH fields for
a Serving Cell are included in ascending order based on i. The length of
the field is 6 bits. The reported PH and the corresponding power
headroom levels are shown in Table 6.1.3.8-1 (the corresponding measured
values in dB are specified in TS 38.133 [11]);</p>
<p>- P: If <em>mpe-Reporting-FR2</em> is configured and the Serving Cell
operates on FR2, the MAC entity shall set this field to 0 if the applied
P-MPR value, to meet MPE requirements, as specified in TS 38.101-2 [15],
is less than P-MPR_00 as specified in TS 38.133 [11] and to 1 otherwise.
If <em>mpe-Reporting-FR2</em> is not configured or the Serving Cell
operates on FR1, this field indicates whether power backoff is applied
due to power management (as allowed by P-MPRc as specified in TS
38.101-1 [14], TS 38.101-2 [15], and TS 38.101-3 [16]). The MAC entity
shall set the P field to 1 if the corresponding P<sub>CMAX,f,c</sub>
field would have had a different value if no power backoff due to power
management had been applied;</p>
<p>- V: This field indicates if the PH value for the corresponding TRP
is based on a real transmission or a reference format. For Type 1 PH,
the V field set to 0 indicates real transmission on PUSCH and the V
field set to 1 indicates that a PUSCH reference format is used;</p>
<p>- P<sub>CMAX,f,c</sub>: This field indicates the P<sub>CMAX,f,c</sub>
(as specified in TS 38.213 [6]) used for calculation of the preceding PH
fields. The reported P<sub>CMAX,f,c</sub> and the corresponding nominal
UE transmit power levels are shown in Table 6.1.3.8-2 (the corresponding
measured values in dBm are specified in TS 38.133 [11]);</p>
<p>- MPE: If <em>mpe-Reporting-FR2</em> is configured, and the Serving
Cell operates on FR2, and if the P field is set to 1, this field
indicates the applied power backoff to meet MPE requirements, as
specified in TS 38.101-2 [15]. This field indicates an index to Table
6.1.3.8-3 and the corresponding measured values of P-MPR levels in dB
are specified in TS 38.133 [11]. The length of the field is 2 bits. If
<em>mpe-Reporting-FR2</em> is not configured, or if the Serving Cell
operates on FR1, or if the P field is set to 0, R bits are present
instead.</p>
<p><img src="media/image76.svg" /></p>
<p>Figure 6.1.3.50-1: Enhanced Single Entry PHR for multiple TRP MAC
CE</p>
<h4 id="enhanced-multiple-entry-phr-for-multiple-trp-mac-ce">6.1.3.51
Enhanced Multiple Entry PHR for multiple TRP MAC CE</h4>
<p>The Enhanced Multiple Entry PHR for multiple TRP MAC CE is identified
by a MAC subheader with eLCID as specified in Table 6.2.1-2b.</p>
<p>It has a variable size, and includes the bitmaps, a Type 2 PH field
and an octet containing the associated P<sub>CMAX,f,c</sub> field (if
reported) for SpCell of the other MAC entity, a Type 1 PH field and an
octet containing the associated P<sub>CMAX,f,c</sub> field (if reported)
for the PCell. It further includes, in ascending order based on the
<em>ServCellIndex</em>, one or multiple of Type X PH fields and octets
containing the associated P<sub>CMAX,f,c</sub> fields (if reported) for
Serving Cells other than PCell indicated in the bitmap for indicating
the presence of PH(s). X is either 1 or 3 according to TS 38.213 [6] and
TS 36.213 [17].</p>
<p>The presence of Type 2 PH field for SpCell of the other MAC entity is
configured by <em>phr-Type2OtherCell</em> with value <em>true</em>.</p>
<p>A single octet bitmap is used for indicating the presence of PH(s)
per Serving Cell when the highest <em>ServCellIndex</em> of Serving Cell
with configured uplink is less than 8, otherwise four octets are
used.</p>
<p>The MAC entity determines whether PH value for an activated Serving
Cell is based on real transmission or a reference format by considering
the configured grant(s) and downlink control information which has been
received until and including the PDCCH occasion in which the first UL
grant for a new transmission that can accommodate the MAC CE for PHR as
a result of LCP as defined in clause 5.4.3.1 is received since a PHR has
been triggered if the PHR MAC CE is reported on an uplink grant received
on the PDCCH or until the first uplink symbol of PUSCH transmission
minus PUSCH preparation time as defined in clause 7.7 of TS 38.213 [6]
if the PHR MAC CE is reported on a configured grant.</p>
<p>For a band combination in which the UE does not support dynamic power
sharing, the UE may omit the octets containing Power Headroom field and
P<sub>CMAX,f,c</sub> field for Serving Cells in the other MAC entity
except for the PCell in the other MAC entity and the reported values of
Power Headroom and P<sub>CMAX,f,c</sub> for the PCell are up to UE
implementation.</p>
<p>The two PHs together with one P<sub>CMAX,f,c</sub> for the Serving
Cell configured with the multiple TRP PUSCH repetition feature is
configured are reported if the MAC entity is configured with
<em>twoPHRMode</em>.</p>
<p>The Enhanced Multiple Entry PHR for multiple TRP MAC CEs are defined
as follows:</p>
<p>- C<sub>i</sub>: This field indicates the presence of PH field(s) for
the Serving Cell with <em>ServCellIndex</em> i as specified in TS 38.331
[5]. The C<sub>i</sub> field set to 1 indicates that PH field(s) for the
Serving Cell with <em>ServCellIndex</em> i is reported. The
C<sub>i</sub> field set to 0 indicates that a PH field for the Serving
Cell with <em>ServCellIndex</em> i is not reported;</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- V: This field indicates if the PH value is based on a real
transmission or a reference format. For Type 1 PH, the V field set to 0
indicates real transmission on PUSCH and the V field set to 1 indicates
that a PUSCH reference format is used. For Type 2 PH, the V field set to
0 indicates real transmission on PUCCH and the V field set to 1
indicates that a PUCCH reference format is used. For Type 3 PH, the V
field set to 0 indicates real transmission on SRS and the V field set to
1 indicates that an SRS reference format is used. Furthermore, for Type
1, Type 2, and Type 3 PH, the V field set to 0 indicates the presence of
the octet containing the associated P<sub>CMAX,f,c</sub> field and the
MPE field, and all of the V field(s) for the Serving Cell set to 1
indicates that the octet containing the associated P<sub>CMAX,f,c</sub>
field and the MPE field is omitted;</p>
<p>- Power Headroom i (PH i): This field indicates the power headroom
level, where PH 1 is associated with the <em>SRS-ResourceSet</em> with a
lower <em>srs-ResourceSetId</em> and PH 2 is associated with the
SRS-ResourceSet with a higher <em>srs-ResourceSetId</em>. PH fields for
a Serving Cell are included in ascending order based on i. The length of
the field is 6 bits. The reported PH and the corresponding power
headroom levels are shown in Table 6.1.3.8-1 (the corresponding measured
values in dB for the NR Serving Cell are specified in TS 38.133 [11]
while the corresponding measured values in dB for the E-UTRA Serving
Cell are specified in TS 36.133 [12]);</p>
<p>- P: If <em>mpe-Reporting-FR2</em> is configured and the Serving Cell
operates on FR2, the MAC entity shall set this field to 0 if the applied
P-MPR value, to meet MPE requirements, as specified in TS 38.101-2 [15],
is less than P-MPR_00 as specified in TS 38.133 [11] and to 1 otherwise.
If <em>mpe-Reporting-FR2</em> is not configured or the Serving Cell
operates on FR1, this field indicates whether power backoff is applied
due to power management (as allowed by P-MPRc as specified in TS
38.101-1 [14], TS 38.101-2 [15], and TS 38.101-3 [16]). The MAC entity
shall set the P field to 1 if the corresponding P<sub>CMAX,f,c</sub>
field would have had a different value if no power backoff due to power
management had been applied;</p>
<p>- P<sub>CMAX,f,c</sub>: If present, this field indicates the
P<sub>CMAX,f,c</sub> (as specified in TS 38.213 [6]) for the NR Serving
Cell and the P<sub>CMAX,c</sub> or P̃<sub>CMAX,c</sub> (as specified in
TS 36.213 [17]) for the E-UTRA Serving Cell used for calculation of the
preceding PH field. The reported P<sub>CMAX,f,c</sub> and the
corresponding nominal UE transmit power levels are shown in Table
6.1.3.8-2 (the corresponding measured values in dBm for the NR Serving
Cell are specified in TS 38.133 [11] while the corresponding measured
values in dBm for the E-UTRA Serving Cell are specified in TS 36.133
[12]);</p>
<p>- MPE: If <em>mpe-Reporting-FR2</em> is configured, and the Serving
Cell operates on FR2, and if the P field is set to 1, this field
indicates the applied power backoff to meet MPE requirements, as
specified in TS 38.101-2 [15]. This field indicates an index to Table
6.1.3.8-3 and the corresponding measured values of P-MPR levels in dB
are specified in TS 38.133 [11]. The length of the field is 2 bits. If
<em>mpe-Reporting-FR2</em> is not configured, or if the Serving Cell
operates on FR1, or if the P field is set to 0, R bits are present
instead.</p>
<p><img src="media/image77.svg" /></p>
<p>Figure 6.1.3.51-1: Enhanced Multiple Entry PHR for multiple TRP MAC
CE with the highest ServCellIndex of Serving Cell with configured uplink
is less than 8</p>
<p><img src="media/image78.svg" /></p>
<p>Figure 6.1.3.51-2: Enhanced Multiple Entry PHR for multiple TRP MAC
CE with the highest ServCellIndex of Serving Cell with configured uplink
is equal to or higher than 8</p>
<h4 id="sidelink-drx-command-mac-ce">6.1.3.52 Sidelink DRX Command MAC
CE</h4>
<p>The Sidelink DRX Command MAC CE is identified by a MAC subheader with
LCID as specified in Table 6.2.4-1. The priority of the Sidelink DRX
Command MAC CE is fixed to '1'.</p>
<p>It has a fixed size of zero bits.</p>
<p>SL DRX Command MAC CE is only supported in sidelink unicast.</p>
<h4 id="inter-ue-coordination-information-mac-ce">6.1.3.53 Inter-UE
Coordination Information MAC CE</h4>
<p>The Inter-UE Coordination Information MAC CE is identified by a MAC
subheader with LCID as specified in Table 6.2.4-1. The priority of the
Inter-UE Coordination Information MAC CE is fixed to '1' for Logical
Channel Prioritization (LCP) procedure. It has a variable size with
following fields:</p>
<p>- RT: This field indicates the resource set type, i.e., preferred
resource set or non-preferred resource set, as the codepoint value of
the SCI format 2-C <em>Resource set type</em> field as specified in TS
38.212 [9].</p>
<p>- RSL: This field indicates the location of reference slot, as the
codepoint value of the SCI format 2-C <em>Reference slot location</em>
field as specified in TS 38.212 [9]. The length of the field is 17 bits.
If the length of <em>Reference slot location</em> field in SCI format
2-C as specified in TS 38.212 [9] is shorter than 17 bit, this field
contains <em>Reference slot location</em> field using the LSB bits;</p>
<p>- LSI<sub>i</sub>: This field indicates the lowest subchannel indices
for the first resource location of each TRIV, as the codepoint value of
the SCI format 2-C <em>Lowest subChannel indices</em> field as specified
in TS 38.212 [9]. LSI<sub>0</sub> indicates the lowest subchannel
indices for the first resource location of TRIV within the first
resource combination, LSI<sub>1</sub> indicates the lowest subchannel
indices for the first resource location of TRIV within the second
resource combination and so on. The length of the field is 5 bits. If
the length of <em>Lowest subChannel indices</em> field in SCI format 2-C
as specified in TS 38.212 [9] is shorter than 5 bit, this field contains
<em>Lowest subChannel indices</em> field using the LSB bits;</p>
<p>- RC<sub>i</sub>: This field indicates resource combination, as the
codepoint value of the SCI format 2-C <em>Resource combinations</em>
field as specified in TS 38.212 [9]. The number of RC is based on upper
bound of the L field in the MAC subheader as indicated in clause 6.2.1.
RC<sub>0</sub> indicates the first resource combination, RC<sub>1</sub>
indicates the second resource combination and so on. The length of the
field is 26 bits. If the length of <em>Resource combinations</em> field
in SCI format 2-C as specified in TS 38.212 [9] is shorter than 26 bit,
this field contains <em>Resource combinations</em> field using the LSB
bits;</p>
<p>- First resource location<sub>i-1</sub>: This field indicates the
first resource location, as the codepoint value of the SCI format 2-C
<em>First resource location</em> field as specified in TS 38.212 [9].
First resource location<sub>0</sub> indicates the first resource
location for the second resource combination, First resource
location<sub>1</sub> indicates the first resource location for the third
resource combination and so on. The length of the field is 13 bits. If
the length of <em>First resource location</em> field in SCI format 2-C
as specified in TS 38.212 [9] is shorter than 13 bit, this field
contains <em>First resource location</em> field using the LSB bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p>NOTE: It is up to UE implementation to determine whether and how to
select a subset of RCs to be included in the Inter-UE Coordination
Information MAC CE.</p>
<p><img src="media/image79.svg" /></p>
<p>Figure 6.1.3.53-1: Inter-UE Coordination Information MAC CE</p>
<h4 id="inter-ue-coordination-request-mac-ce">6.1.3.54 Inter-UE
Coordination Request MAC CE</h4>
<p>The Inter-UE Coordination request MAC CE is identified by a MAC
subheader with LCID as specified in Table 6.2.4-1. The priority of the
Inter-UE Coordination Request MAC CE is fixed to '1' for Logical Channel
Prioritization (LCP) procedure. It has a fixed size of 48 bits with
following fields:</p>
<p>- RT: If the value of <em>sl-DetermineResourceType</em> (as specified
in TS 38.331 [5] clause 6.3.5) is set to <em>ueb</em>, this field
indicates the resource set type, i.e., preferred resource set or
non-preferred resource set, as the codepoint value of the SCI format 2-C
<em>Resource set type</em> field as specified in TS 38.212 [9]. This
field is ignored if the value of <em>sl-DetermineResourceType</em> is
set to <em>uea</em>;</p>
<p>- RP: This field indicates the resource reservation period, as the
codepoint value of the SCI format 2-C <em>Resource reservation
period</em> field as specified in TS 38.212 [9]. The length of the field
is 4 bits. If the length of <em>Resource reservation period</em> field
in SCI format 2-C as specified in TS 38.212 [9] is shorter than 4 bit,
this field contains <em>Resource reservation period</em> field using the
LSB bits;</p>
<p>- Priority: This field indicates the priority, as the codepoint value
of the SCI format 2-C <em>Priority</em> field as specified in TS 38.212
[9]. The length of the field is 3 bits;</p>
<p>- RSWL: This field indicates resource selection window location, as
the codepoint value of the SCI format 2-C <em>Resource selection window
location</em> field as specified in TS 38.212 [9]. The length of the
field is 34 bits. If the length of <em>Resource selection window
location</em> field in SCI format 2-C as specified in TS 38.212 [9] is
shorter than 34 bit, this field contains <em>Resource selection window
location</em> field using the LSB bits;</p>
<p>- Number of Subchannel: This field indicates the number of
subchannels, as the codepoint value of the SCI format 2-C <em>Number of
subchannels</em> field as specified in TS 38.212 [9]. The length of the
field is 5 bits. If the length of <em>Number of subchannels</em> field
in SCI format 2-C as specified in TS 38.212 [9] is shorter than 5 bit,
this field contains <em>Number of subchannels</em> field using the LSB
bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image80.svg" /></p>
<p>Figure 6.1.3.54-1: Inter-UE Coordination Request MAC CE</p>
<h4 id="enhanced-scell-activationdeactivation-mac-ces">6.1.3.55 Enhanced
SCell Activation/Deactivation MAC CEs</h4>
<p>The Enhanced SCell Activation/Deactivation MAC CE with one octet
C<sub>i</sub> field is identified by a MAC subheader with eLCID as
specified in Table 6.2.1-1b. It has a variable size and consists of
seven C-fields, one R-field and zero or more TRS ID<sub>j</sub> fields
in ascending order based on the <em>ScellIndex</em> for SCells indicated
by the C<sub>i</sub> field(s) to be activated. The Enhanced SCell
Activation/Deactivation MAC CE of with one octet C<sub>i</sub> field is
defined as follows (Figure 6.1.3.55-1).</p>
<p>The Enhanced SCell Activation/Deactivation MAC CE with four octet
C<sub>i</sub> field is identified by a MAC subheader with eLCID as
specified in Table 6.2.1-1b. It has a variable size and consists of 31
C-fields, one R-field and zero or more TRS ID<sub>j</sub> fields in
ascending order based on the <em>ScellIndex</em> for SCells indicated by
the C<sub>i</sub> field(s) to be activated. The Enhanced SCell
Activation/Deactivation MAC CE with four octet C<sub>i</sub> field is
defined as follows (Figure 6.1.3.55-2).</p>
<p>- C<sub>i</sub>: If there is an SCell configured for the MAC entity
with <em>SCellIndex</em> i as specified in TS 38.331 [5], this field
indicates the activation/deactivation status of the SCell with
<em>SCellIndex</em> i, else the MAC entity shall ignore the
C<sub>i</sub> field. The C<sub>i</sub> field is set to 1 to indicate
that the SCell with <em>SCellIndex</em> i shall be activated and that a
TRS ID<sub>j</sub> field is included for the SCell. The C<sub>i</sub>
field is set to 0 to indicate that the SCell with <em>SCellIndex</em> i
shall be deactivated and that no TRS ID field is included for this
SCell;</p>
<p>- TRS ID<sub>j</sub>: If TRS ID<sub>j</sub> is set to a non-zero
value, it indicates the corresponding TRS address by
<em>scellActivationRS-Id</em> as specified in TS 38.331 [5] is
activated. If TRS ID<sub>j</sub> is set to zero, it indicates that no
TRS is used for the corresponding SCell;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image81.svg" /></p>
<p>Figure 6.1.3.55-1: Enhanced SCell Activation/Deactivation MAC CE with
one octet C<sub>i</sub> field</p>
<p><img src="media/image82.svg" /></p>
<p>Figure 6.1.3.55-2: Enhanced SCell Activation/Deactivation MAC CE with
four octet C<sub>i</sub> field</p>
<h4 id="timing-advance-report-mac-ce">6.1.3.56 Timing Advance Report MAC
CE</h4>
<p>The Timing Advance Report MAC CE is identified by MAC subheader with
LCID as specified in Table 6.2.1-2. It has a fixed size and consists of
two octets defined as follows (Figure 6.1.3.56-1):</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Timing Advance: In FR1, the Timing Advance field indicates the
least integer number of slots, using subcarrier spacing of 15 kHz,
greater than or equal to the Timing Advance value (see TS 38.211 [8],
clause 4.3.1). The length of the field is 14 bits.</p>
<p><img src="media/image83.svg" /></p>
<p>Figure 6.1.3.56-1: Timing Advance Report MAC CE</p>
<h4 id="differential-koffset-mac-ce">6.1.3.57 Differential Koffset MAC
CE</h4>
<p>The Differential Koffset MAC CE is identified by a MAC subheader with
eLCID as specified in Table 6.2.1-1b. It has a fixed size and consists
of a single octet defined as follows (Figure 6.1.3.57-1):</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Differential Koffset: This field indicates the differential Koffset
in the number of slots (see clause 4.2 in TS 38.213 [6]), using
subcarrier spacing of 15 kHz. The length of the field is 6 bits.</p>
<p><img src="media/image84.svg" /></p>
<p>Figure 6.1.3.57-1: Differential Koffset MAC CE</p>
<h4 id="bfd-rs-indication-mac-ce-1">6.1.3.58 BFD-RS Indication MAC
CE</h4>
<p>The BFD-RS Indication MAC CE is identified by a MAC subheader with
eLCID as specified in Table 6.2.1-1b. It has a variable size, and
includes a BFD-RS-ID<sub>0</sub> field and a BFD-RS-ID<sub>1</sub> field
(optional) of <em>failureDetectionSet1</em>, and a BFD-RS-ID<sub>0</sub>
field and a BFD-RS-ID<sub>1</sub> field (optional) of
<em>failureDetectionSet2</em>.</p>
<p>It has a variable size consisting of following fields:</p>
<p>- Serving Cell ID: This field indicates the identity of the Serving
Cell for which the MAC CE applies. The length of the field is 5
bits;</p>
<p>- BWP ID: This field indicates a DL BWP for which the MAC CE applies
as the codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.213 [6]. The length of the BWP ID field is 2
bits;</p>
<p>- S: This field indicates the presence of the octet containing the
BFD-RS ID<sub>1</sub> of the same BFD-RS set. The S field set to 1
indicates that the octet containing BFD-RS ID<sub>1</sub> is included.
The S field set to 0 indicates that the octet containing the BFD-RS
ID<sub>1</sub> of the same BFD-RS set is not included;</p>
<p>- BFD-RS ID<sub>i</sub>: This field indicates the BFD-RS resource
from <em>failureDetectionSet1</em> or <em>failureDetectionSet2</em> as
specified in TS 38.331 [5];</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image85.svg" /></p>
<p>Figure 6.1.3.58-1: BFD-RS Indication MAC CE</p>
<h4 id="spap-srs-tci-state-indication-mac-ce">6.1.3.59 SP/AP SRS TCI
State Indication MAC CE</h4>
<p>The SP/AP SRS TCI State Indication MAC CE is identified by a MAC
subheader with eLCID as specified in Table 6.2.1-1b. It has a variable
size with following fields:</p>
<p>- A/D: This field indicates whether to activate or deactivate
indicated SP SRS resource set. The field is set to 1 to indicate
activation, otherwise it indicates deactivation. If the indicated SRS
resource set ID is for the AP SRS resource set, MAC entity shall ignore
this field;</p>
<p>- SRS Resource Set's Cell ID: This field indicates the identity of
the Serving Cell, which contains the indicated SP/AP SRS Resource Set.
If the C field is set to 0, this field also indicates the identity of
the Serving Cell associated with all TCI states indicated by the TCI
State ID<sub>i</sub> fields. The length of the field is 5 bits;</p>
<p>- SRS Resource Set's BWP ID: This field indicates a UL BWP as the
codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9], which contains the indicated SP/AP SRS
Resource Set. If the C field is set to 0, this field also indicates the
identity of the BWP associated with all TCI states indicated by the TCI
State ID<sub>i</sub> fields. The length of the field is 2 bits;</p>
<p>- C: This field indicates whether the octets containing TCI State
Serving Cell ID field(s) and TCI State BWP ID field(s) are present. If
this field is set to 1, TCI State Serving Cell ID field(s) and TCI State
BWP ID field(s) are present, otherwise they are not present so MAC
entity shall ignore TCI State Serving Cell ID field(s) and TCI State BWP
ID field(s);</p>
<p>- SUL: This field indicates whether the MAC CE applies to the NUL
carrier or SUL carrier configuration. This field is set to 1 to indicate
that it applies to the SUL carrier configuration, and it is set to 0 to
indicate that it applies to the NUL carrier configuration;</p>
<p>- SRS Resource Set ID: This field indicates the SP/AP SRS Resource
Set ID identified by <em>SRS-ResourceSetId</em> as specified in TS
38.331 [5]. The length of the field is 4 bits;</p>
<p>- TCI State Serving Cell ID<sub>i</sub>: This field indicates the
identity of the Serving Cell on which the TCI State used for SRS
resource i is located. The length of the field is 5 bits;</p>
<p>- TCI State BWP ID<sub>i</sub>: This field indicates a BWP as the
codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9], on which the TCI State used for SRS resource
i is located. If value of <em>unifiedTCI-StateType</em> in the Serving
Cell indicated by TCI State Serving Cell ID<sub>i</sub> is joint, this
field indicates a DL BWP. If value of <em>unifiedTCI-StateType</em> in
the Serving Cell indicated by TCI State Serving Cell ID<sub>i</sub> is
<em>separate</em>, this field indicates a UL BWP. The length of the
field is 2 bits;</p>
<p>- TCI State ID<sub>i</sub>: This field contains an identifier of the
TCI state used for SRS resource i. TCI State ID<sub>0</sub> refers to
the first SRS resource within the resource set, TCI State ID<sub>1</sub>
refers to the second one and so on. If joint/downlink TCI State is used,
7-bits length TCI state ID i.e. <em>TCI-StateId</em> as specified in TS
38.331 [5] is used. If separate downlink and uplink TCI State is used,
the most significant bit of TCI state ID is considered as a reserved bit
and the remaining 6 bits indicate the <em>TCI-UL-State-Id</em> as
specified in TS 38.331 [5]. The length of the field is 7 bits. This
field is only present if MAC CE is used for activation of SP SRS
resource set, i.e. the A/D field is set to 1, or for AP SRS resource
set;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image86.svg" /></p>
<p>Figure 6.1.3.59-1: SP/AP SRS TCI State Indication MAC CE</p>
<h4 id="serving-cell-set-based-srs-tci-state-indication-mac-ce">6.1.3.60
Serving Cell Set based SRS TCI State Indication MAC CE</h4>
<p>The Serving Cell Set based SRS TCI State Indication MAC CE is
identified by a MAC subheader with eLCID as specified. It has a variable
size with following fields:</p>
<p>- SRS Resource's Cell ID: This field indicates the identity of the
Serving Cell, which contains the indicated SP/AP SRS Resource. If the C
field is set to 0, this field also indicates the identity of the Serving
Cell associated with all TCI States indicated by the TCI State IDi
fields. The length of the field is 5 bits. The indicated Serving Cell is
configured as part of <em>simultaneousSpatial-UpdatedList1</em> or
<em>simultaneousSpatial-UpdatedList2</em> in TS 38.331 [5], and this MAC
CE applies to all the Serving Cells configured in the set
<em>simultaneousSpatial-UpdatedList1</em> or
<em>simultaneousSpatial-UpdatedList2</em>, respectively;</p>
<p>- SRS Resource's BWP ID: This field indicates a UL BWP as the
codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9], which contains the indicated AP/SP SRS
Resource. If the C field is set to 0, this field also indicates the
identity of the BWP associated with all TCI States indicated by the TCI
State IDi fields. The length of the field is 2 bits;</p>
<p>- C: This field indicates whether the octets containing TCI State
Serving Cell ID field(s) and TCI State BWP ID field(s) are present. If
this field is set to 1, the TCI State Serving Cell ID field(s) and TCI
State BWP ID field(s) are present, otherwise they are not present so MAC
entity shall ignore TCI State Serving Cell ID field(s) and TCI State BWP
ID field(s);</p>
<p>- SRS Resource ID<sub>i</sub>: This field indicates the SP/AP SRS
Resource ID identified by <em>SRS-ResourceId</em> as specified in TS
38.331 [5]. The length of the field is 6 bits;</p>
<p>- TCI State Serving Cell ID<sub>i</sub>: This field indicates the
identity of the Serving Cell on which the TCI State used for SRS
Resource ID<sub>i</sub> is located. The length of the field is 5
bits;</p>
<p>- TCI State BWP ID<sub>i</sub>: This field indicates a BWP as the
codepoint of the DCI <em>bandwidth part indicator</em> field as
specified in TS 38.212 [9], on which the TCI State used for SRS Resource
ID<sub>i</sub> is located. If value of <em>unifiedTCI-StateType</em> in
the Serving Cell indicated by TCI State Serving Cell ID<sub>i</sub> is
joint, this field indicates a DL BWP. If value of
<em>unifiedTCI-StateType</em> in the Serving Cell indicated by TCI State
Serving Cell ID<sub>i</sub> is <em>separate</em>, this field indicates a
UL BWP. The length of the field is 2 bits;</p>
<p>- TCI State ID<sub>i</sub>: This field contains an identifier of the
TCI state used for SRS resource i. TCI State ID<sub>0</sub> refers to
the first SRS resource which is indicated SRS Resource ID<sub>0</sub>,
TCI State ID<sub>1</sub> refers to the second one and so on. If
joint/downlink TCI State is used, 7-bits length TCI state ID i.e.
<em>TCI-StateId</em> as specified in TS 38.331 [5] is used. If separate
downlink and uplink TCI State is used, the most significant bit of TCI
state ID is considered as a reserved bit and the remaining 6 bits
indicate the <em>TCI-UL-State-Id</em> as specified in TS 38.331 [5]. The
length of the field is 7 bits;</p>
<p>- R: Reserved bit, set to 0.</p>
<p><img src="media/image87.svg" /></p>
<p>Figure 6.1.3.60-1: Serving Cell Set based SRS TCI State Indication
MAC CE</p>
<h4 id="child-iab-du-restricted-beam-indication-mac-ce">6.1.3.61 Child
IAB-DU Restricted Beam Indication MAC CE</h4>
<p>The Child IAB-DU Restricted Beam Indication MAC CE is identified by
MAC subheader with eLCID as specified in Table 6.2.1-1b. It has a
variable size with following fields (Figure 6.1.3.61-1):</p>
<p>- Resource Configuration ID: This fields indicates the RRC
configuration which applies to this MAC CE and corresponds to
<em>iab-ResourceConfigID</em> parameter in <em>IAB-ResourceConfig</em>
as specified in TS 38.331 [5]. The length of the field is 16 bits;</p>
<p>- Number of child IAB-DU beams: This field indicates the number of
restricted child IAB-DU beams included in the MAC CE. The length of the
field is 8 bits. The number of restricted child IAB-DU beams is
contained in the 3 rightmost bits of the field while the remaining 5
bits are considered as reserved bits;</p>
<p>- IAB-DU restricted beams type ID<sub>i</sub>: This field determines
the type of information used as an indication of a set of child IAB-DU's
restricted beams, indicated with the Child IAB-DU Resource set
ID<sub>i</sub> field. IAB-DU restricted beams type ID<sub>0</sub> refers
to the first restricted beam within the resource set, IAB-DU restricted
beams type ID<sub>1</sub> to the second one and so on. If the value of
the field is 00, SSB index is used (contained in the 6 rightmost bits of
the Child IAB-DU Resource set ID<sub>i</sub> field, with the two
leftmost bits being set to zero). If the value of the field is 01, SSB
index (contained in the 6 rightmost bits of the Child IAB-DU Resource
set ID<sub>i</sub> field) and STC index (contained in the two leftmost
bits of the Child IAB-DU Resource set ID<sub>i</sub> field) are both
used. If the value of the field is set to 11, CSI-RS index, which is the
<em>NZP-CSI-RS-ResourceId</em> as specified in TS 38.331 [5], is used
(comprising all 8 bits of the Child IAB-DU Resource set ID<sub>i</sub>
field). The length of the field is 2 bits;</p>
<p>- C<sub>i1</sub>: This field indicates whether the octet containing
the Number of cell configurations ID<sub>i</sub> field is included or
not. C<sub>01</sub> refers to the first restricted beam within the
resource set, C<sub>11</sub> to the second one and so on. The field is
set to 0 to indicate the octet is not included (and subsequently, that
no cell information is included for the relevant restricted beam). The
field is set to 1 to indicate that Number of cell configurations
ID<sub>i</sub> field is included. The length of the field is 1 bits;</p>
<p>- C<sub>i2</sub>: This field indicates whether the child IAB-DU beam
indicated with the Child IAB-DU Resource set ID<sub>i</sub> field is
associated with one or more uplink or downlink IAB-MT beams, indicated
with the IAB-MT Resource set ID<sub>ij</sub> fields. C<sub>02</sub>
refers to the first restricted beam within the resource set,
C<sub>12</sub> to the second one and so on. The field is set to 1 to
indicate that at least one IAB-MT Resource set ID<sub>ij</sub> field is
included (and that Number of associated IAB-MT beams ID<sub>i</sub> is
included), and it is set to 0 to indicate that no IAB-MT Resource set
ID<sub>ij</sub> field is present (and that the Number of associated
IAB-MT beams ID<sub>i</sub> is absent). The length of the field is 1
bit;</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Child IAB-DU Resource set ID<sub>i:</sub> an indication of the
child IAB-DU's beam in the direction of which simultaneous operation is
restricted. The length of the field is 8 bits;</p>
<p>- Number of cell configurations ID<sub>i</sub>: This field indicates
the number of cell configurations associated with the beam restriction
indicated in Child IAB-DU Resource set ID<sub>i</sub>. Number of cell
configurations ID<sub>0</sub> refers to the first restricted beam within
the resource set, Number of cell configurations ID<sub>1</sub> to the
second one and so on. The length of the field is 8 bits;</p>
<p>- Cell info type ID<sub>ij</sub>: indicates the type of information
included in the Cell info ID<sub>ij</sub> field. If the value of the
field is set to zero, the combination of {MT CC, DU cell} is included in
the Cell info ID<sub>ij</sub> field, by including the IAB-DU cell in the
first nine bits of the field, and the IAB-MT Serving Cell index into the
next 5 bits of the field,. If the value of the field is set to one, only
DU cell is included in the Cell info ID<sub>ij</sub> field, by including
the IAB-DU cell in the first nine bits of the field, and by setting the
remaining five bits to zero. The length of the field is 1 bit;</p>
<p>- M<sub>ij</sub>: This field indicates whether the octet containing
multiplexing mode info (containing the Multiplexing mode info
ID<sub>ij</sub> field) is included or not. M<sub>i0</sub> refers to the
first combination of {MT CC, DU cell} associated with Child IAB-DU
Resource set ID<sub>i</sub>, M<sub>i1</sub> to the second one and so on.
The field is set to 1 to indicate that multiplexing mode info is
included, and it is set to 0 to indicate that multiplexing mode info is
not present. The length of the field is 1 bit;</p>
<p>- Cell info ID<sub>ij</sub>: indicates the cell configuration
associated with beam restriction indicated in Child IAB-DU Resource set
ID<sub>i</sub>. Cell info ID<sub>i0</sub> field refers to the first cell
configuration associated with the beam restriction indicated in Child
IAB-DU Resource set ID<sub>i</sub>, Cell info ID<sub>i1</sub> field
refers to the second cell configuration associated with the beam
restriction indicated in Child IAB-DU Resource set ID<sub>i</sub>, and
so on. The length of the field is 15 bits;</p>
<p>- Multiplexing mode info ID<sub>ij</sub>: The two rightmost bits
indicate which of the four multiplexing modes defined in TS 38.473 [27]
is applicable. The third rightmost bit of this field indicates whether
multiplexing restrictions mode information contained in the two
rightmost bits of the field are applicable to non-overlapping frequency
resources. This bit is set to 1 when multiplexing mode information
contained in the two rightmost bits of the Multiplexing mode info
ID<sub>ij</sub> field is applicable to non-overlapping frequency
resources. This field is set to 0 when multiplexing mode information
contained in the two rightmost bits of the Multiplexing mode info
ID<sub>ij</sub> field is not applicable to non-overlapping frequency
resources. The remaining 5 bits of this field are set to zero. The
length of the field is 8 bits;</p>
<p>- Number of associated IAB-MT beams ID<sub>i</sub>: This field
indicates the number of IAB-MT beams associated with the beam indicated
in Child IAB-DU Resource set ID<sub>i</sub>. Number of associated IAB-MT
beams ID<sub>0</sub> refers to the first restricted beam within the
resource set, Number of associated IAB-MT beams ID<sub>1</sub> to the
second one and so on. The length of the field is 8 bits. The number of
IAB-MT beams associated with the beam indicated in Child IAB-DU Resource
set ID<sub>i</sub> is contained in the 3 rightmost bits of the field
while the remaining 5 bits are considered as reserved bits;</p>
<p>- Associated IAB-MT's beams type ID<sub>ij</sub>: This field
determines the type of information used as an indication of an uplink or
downlink IAB-MT beam associated with the child IAB-DU's restricted
beams, indicated with the IAB-MT Resource set ID<sub>ij</sub>. If the
value of the field is 00, the information included in the IAB-MT
Resource set ID<sub>ij</sub> field is the TCI state ID (contained in the
7 rightmost bits of the field). If the value of the field is 01, the
information included in the IAB-MT Resource set ID<sub>ij</sub> field is
the SSB ID (contained in the 6 rightmost bits of the field). If the
value of the field is 10, the information included in the IAB-MT
Resource set ID<sub>ij</sub> field is the CSI-RS index (comprising all 8
bits), which is the <em>NZP-CSI-RS-ResourceId</em> as specified in TS
38.331 [5]. If the value of the field is 11, the information included in
the 6 rightmost bits in the IAB-MT Resource set ID<sub>ij</sub> field is
the <em>SRS-ResourceID</em>. The length of the field is 2 bits;</p>
<p>- IAB-MT Resource set ID<sub>ij:</sub> an indication of the IAB-MTs
downlink or uplink beams which are associated with the child IAB-DU
restricted beam indicated in Child IAB-DU Resource set ID<sub>i</sub>
field. IAB-MT Resource set ID<sub>i0</sub> field refers to the first
IAB-MT's beam associated with the child IAB-DU's restricted beam
indicated in Child IAB-DU Resource set ID<sub>i</sub> field, IAB-MT
Resource set ID<sub>i1</sub> field refers to the second IAB-MT's beam
associated with the child IAB-DU's restricted beam indicated in Child
IAB-DU Resource set ID<sub>i</sub> field, and so on. The length of the
field is 8 bits.</p>
<p><img src="media/image88.svg" /></p>
<p>Figure 6.1.3.61-1: Child IAB-DU Restricted Beam Indication MAC CE</p>
<h4 id="iab-mt-recommended-beam-indication-mac-ce">6.1.3.62 IAB-MT
Recommended Beam Indication MAC CE</h4>
<p>The IAB-MT Recommended Beam Indication MAC CE is identified by MAC
subheader with eLCID as specified in Table 6.2.1-2b. It has a variable
size with following fields (Figure 6.1.3.62-1):</p>
<p>- Resource Configuration ID: This field indicates the RRC
configuration which applies to this MAC CE and corresponds to
<em>iab-ResourceConfigID</em> parameter in <em>IAB-ResourceConfig</em>
as specified in TS 38.331 [5]. The length of the field is 16 bits;</p>
<p>- Number of IAB-MT beams: This field indicates the number of
recommended IAB-MT beams included in the MAC CE. The length of the field
is 8 bits. The number of recommended IAB-MT beams is contained in the 3
rightmost bits of the field while the remaining 5 bits are considered as
reserved bits;</p>
<p>- IAB-MT beam type ID<sub>i</sub>: This field determines the type of
information used as an indication of an uplink or downlink IAB-MT beam,
indicated with the IAB-MT Resource set ID<sub>i</sub>. If the value of
the field is 00, the information included in the IAB-MT Resource set
ID<sub>i</sub> field is the TCI state ID (contained in the 7 rightmost
bits of the field). If the value of the field is 01, the information
included in the IAB-MT Resource set ID<sub>i</sub> field is the SSB ID
(contained in the 6 rightmost bits of the field). If the value of the
field is 10, the information included in the IAB-MT Resource set
ID<sub>i</sub> field is the CSI-RS index (comprising all 8 bits), which
is the <em>NZP-CSI-RS-ResourceId</em> as specified in TS 38.331 [5]. If
the value of the field is 11, the information included in the 6
rightmost bits in the IAB-MT Resource set ID<sub>i</sub> field is the
<em>SRS-ResourceID</em>. The length of the field is 2 bits;</p>
<p>- IAB-MT Resource set ID<sub>i</sub>: an indication of the IAB-MTs
recommended downlink or uplink beams. IAB-MT Resource set ID<sub>0</sub>
field refers to the first IAB-MT's beam, IAB-MT Resource set
ID<sub>1</sub> field refers to the second IAB-MT's beam, and so on. The
length of the field is 8 bits;</p>
<p>- C<sub>i1</sub>: This field indicates whether the octet containing
the Number of cell configurations ID<sub>i</sub> field is included or
not. C<sub>01</sub> refers to the first recommended beam within the
resource set, C<sub>11</sub> to the second one and so on. The field is
set to 0 to indicate the octet is not included (and subsequently, that
no cell information is included for the relevant recommended beam). The
field is set to 1 to indicate that Number of cell configurations
ID<sub>i</sub> field is included. The length of the field is 1 bits;</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Number of cell configurations ID<sub>i</sub>: This field indicates
the number of cell configurations associated with the beam indicated in
IAB-MT Resource set ID<sub>i</sub>. Number of cell configurations
ID<sub>0</sub> refers to the first recommended beam within the resource
set, Number of cell configurations ID<sub>1</sub> to the second one and
so on. The length of the field is 8 bits;</p>
<p>- Cell info type ID<sub>ij</sub>: indicates the type of information
included in the Cell info ID<sub>ij</sub> field. If the value of the
field is set to zero, the combination of {MT CC, DU cell} is included in
the Cell info ID<sub>ij</sub> field, by including the IAB-DU cell in the
first nine bits of the field, and the IAB-MT Serving Cell index into the
next 5 bits of the field. If the value of the field is set to one, only
MT CC information is included in the Cell info ID<sub>ij</sub> field, by
including the IAB-MT Serving Cell index in the first 5 bits of the
field, and by setting the remaining nine bits to zero. The length of the
field is 1 bit;</p>
<p>- M<sub>ij</sub>: This field indicates whether the octet containing
multiplexing mode info (containing the Multiplexing mode info
ID<sub>ij</sub> field) is included or not. M<sub>i0</sub> refers to the
first combination of {MT CC, DU cell} associated with IAB-MT Resource
set ID<sub>i</sub>, M<sub>i1</sub> to the second one and so on. The
field is set to 1 to indicate that multiplexing mode info is included,
and it is set to 0 to indicate that multiplexing mode info is not
present. The length of the field is 1 bit;</p>
<p>- Cell info ID<sub>ij</sub>: indicates the cell configuration
associated with beam recommendation indicated in IAB-MT Resource set
ID<sub>i</sub>. Cell info ID<sub>i0</sub> field refers to the first cell
configuration associated with the beam recommendation indicated in
IAB-MT Resource set ID<sub>i</sub>, Cell info ID<sub>i1</sub> field
refers to the second cell configuration associated with the beam
recommendation indicated in IAB-MT Resource set ID<sub>i</sub>, and so
on. The length of the field is 14 bits.</p>
<p>- Multiplexing mode info ID<sub>ij</sub>: The two rightmost bits
indicate which of the four multiplexing modes defined in TS 38.473 [27]
is applicable. The third rightmost bit of this field indicates whether
multiplexing restrictions mode information contained in the two
rightmost bits of the field are applicable to non-overlapping frequency
resources. This bit is set to 1 when multiplexing mode information
contained in the two rightmost bits of the Multiplexing mode info
ID<sub>ij</sub> field is applicable to non-overlapping frequency
resources. This field is set to 0 when multiplexing mode information
contained in the two rightmost bits of the Multiplexing mode info
ID<sub>ij</sub> field is not applicable to non-overlapping frequency
resources. The remaining 5 bits of this field are set to zero. The
length of the field is 8 bits.</p>
<p><img src="media/image89.svg" /></p>
<p>Figure 6.1.3.62-1: IAB-MT Recommended Beam Indication MAC CE</p>
<h4
id="dl-tx-power-adjustment-and-desired-dl-tx-power-adjustment-mac-ces">6.1.3.63
DL TX Power Adjustment and Desired DL TX Power Adjustment MAC CEs</h4>
<p>The DL TX Power Adjustment MAC CE and Desired DL TX Power Adjustment
MAC CEs are identified by MAC subheaders with eLCIDs as specified in
Table 6.2.1-1b and Table 6.2.1-1b, respectively. Otherwise the format of
the two MAC CEs is identical. Each has a variable size with following
fields (Figure 6.1.3.63-1):</p>
<p>- Resource Configuration ID: This field indicates the RRC
configuration which applies to this MAC CE and corresponds to
<em>iab-ResourceConfigID</em> parameter in <em>IAB-ResourceConfig</em>
as specified in TS 38.331 [5]. The length of the field is 16 bits;</p>
<p>- DL Tx Power adjustment: For the case of the Desired DL TX Power
Adjustment MAC CE, this field contains desired DL TX power adjustment
sent by an IAB-MT to assist with the parent node's DL TX power
allocation. For the case of the DL TX Power Adjustment MAC CE, this
fields contains adjustment to a node's DL TX power sent by its parent
node. The value of the power adjustment is in both cases contained in
the 5 right-most bits of the field with codepoints (00000, 00001, …,
11101, 11110) indicating the corresponding value (-15dB, -14dB, …, 14dB,
15dB) and the codepoint 11111 not being used, while the remaining 3 bits
are set to zero. The length of the field is 8 bits;</p>
<p>- Reference CSI-RS ID: This field indicates the CSI-RS used as
reference for power adjustment, which is identified by
<em>NZP-CSI-RS-ResourceId</em> as specified in TS 38.331 [5]. The
indicated DL TX power adjustment is in terms of a relative offset to the
CSI-RS TX power of the indicated CSI-RS. The length of this field is
8bits;</p>
<p>- C<sub>0</sub>: This field indicates whether the octet containing
multiplexing mode info (containing the Multiplexing mode info field) is
included or not. The field is set to 1 to indicate that multiplexing
mode info is included, and it is set to 0 to indicate that multiplexing
mode info is not present. The length of the field is 1 bit;</p>
<p>- C<sub>1</sub>: This field indicates whether the two octets
containing the Cell info are included or not. The field is set to 0 to
indicate the two octets are not included (and subsequently, that no cell
information is included). The field is set to 1 to indicate that the two
octets are included. The length of the field is 1 bits;</p>
<p>- C<sub>2</sub>: This field indicates whether any information on
IAB-MT DL beams is included or not. The field is set to 1 to indicate
that at least one IAB-MT Resource set ID<sub>i</sub> field is included,
and it is set to 0 to indicate that no IAB-MT Resource set
ID<sub>i</sub> field is present. The length of the field is 1 bit;</p>
<p>- R: Reserved bit, set to 0.</p>
<p>- Multiplexing mode info: The two rightmost bits indicate which of
the four multiplexing modes defined in TS 38.473 [27] is applicable. The
third rightmost bit of this field indicates whether multiplexing
restrictions mode information contained in the two rightmost bits of the
field are applicable to non-overlapping frequency resources. This bit is
set to 1 when multiplexing mode information contained in the two
rightmost bits of the Multiplexing mode info field is applicable to
non-overlapping frequency resources. This field is set to 0 when
multiplexing mode information contained in the two rightmost bits of the
Multiplexing mode info field is not applicable to non-overlapping
frequency resources. The remaining 5 bits of this field are set to zero.
The length of the field is 8 bits;</p>
<p>- Number of IAB-MT DL beams: This field indicates the number of
IAB-MT beams included in the MAC CE. The length of the field is 8
bits;</p>
<p>- IAB-MT beam type ID<sub>i</sub>: This field determines the type of
information used as an indication of a downlink IAB-MT beam, indicated
with the IAB-MT Resource set ID<sub>i</sub>. If the value of the field
is 00, the information included in the IAB-MT Resource set
ID<sub>i</sub> field is the TCI state ID (contained in the 7 rightmost
bits of the field). If the value of the field is 01, the information
included in the IAB-MT Resource set ID<sub>i</sub> field is the SSB ID
(contained in the 6 rightmost bits of the field). If the value of the
field is 10, the information included in the IAB-MT Resource set
ID<sub>i</sub> field is the CSI-RS index (comprising all 8 bits), which
is the <em>NZP-CSI-RS-ResourceId</em> as specified in TS 38.331 [5]. The
length of the field is 2 bits;</p>
<p>- IAB-MT Resource set ID<sub>i</sub>: an indication of the IAB-MTs
downlink beams. IAB-MT Resource set ID<sub>0</sub> field refers to the
first IAB-MT downlink beam, IAB-MT Resource set ID<sub>1</sub> field
refers to the second IAB-MT downlink beam, and so on. The length of the
field is 8 bits;</p>
<p>- DU resource configuration: when this field is set to 00, the
provided power adjustment is applied on FDM resources where the
simultaneous MT and DU signals are non-overlapping in the
frequency-domain; when this field is set to 01, the provided power
adjustment is applied on non-FDM resources where the simultaneous MT and
DU signals may overlap in the frequency-domain for a given (MT CC, DU
cell); when this field is set to 10, the provided power adjustment is
applied on FDM resources where the simultaneous MT and DU signals are
non-overlapping in the frequency-domain, and on non-FDM resources where
the simultaneous MT and DU signals may overlap in the frequency-domain
for a given (MT CC, DU cell). The length of the field is 2 bits;</p>
<p>- Cell info: indicates the cell configuration associated with the
information contained in the MAC CE. The length of the field is 14 bits.
IAB-DU cell is contained in the first nine bits of the field, while the
Child IAB-MT Serving Cell index into the next 5 bits of the field. The
length of the field is 14 bits.</p>
<p><img src="media/image90.svg" /></p>
<p>Figure 6.1.3.63-1: DL TX Power Adjustment and Desired DL TX Power
Adjustment MAC CEs</p>
<h4 id="desired-iab-mt-psd-range-mac-ce">6.1.3.64 Desired IAB-MT PSD
range MAC CE</h4>
<p>The Desired IAB-MT PSD range MAC CE is identified by MAC subheader
with eLCID as specified in Table 6.2.1-2b. It has a variable size with
following fields (Figure 6.1.3.64-1):</p>
<p>- Resource Configuration ID: This field indicates the RRC
configuration which applies to this MAC CE and corresponds to
<em>iab-ResourceConfigID</em> parameter in <em>IAB-ResourceConfig</em>
as specified in TS 38.331 [5]. The length of the field is 16 bits;</p>
<p>- PSD range: This field contains the desired PSD range a node sends
to its parent node to help with the sending node's MT UL TX power
control. The desired PSD range is indicated by a maximum value (i.e.
Pmax), and an offset relative to the maximum value, i.e. the desired PSD
range is from Pmax - offset to Pmax. The 4 left-most bits of the field
indicate the offset, the offset range is from 0 dB to 10 dB, the value
0000 corresponds to 0 dB, the value 0001 corresponds to 1 dB and so on,
the values from 1011 onwards are reserved. The next 7 left-most bits
indicate the Pmax range, the Pmax range is from -60 dBm to 50 dBm, the
value 0000000 corresponds to -60 dBm, the value 0000001 corresponds to
-59 dBm and so on, the values from 1101111 onwards are reserved. The
remaining 5 bits are set to zero. The length of the field is 16
bits;</p>
<p>- C<sub>0</sub>: This field indicates whether the octet containing
multiplexing mode info (containing the Multiplexing mode info field) is
included or not. The field is set to 1 to indicate that multiplexing
mode info is included, and it is set to 0 to indicate that multiplexing
mode info is not present. The length of the field is 1 bit;</p>
<p>- C<sub>1</sub>: This field indicates whether the two octets
containing the Cell info are included or not. The field is set to 0 to
indicate the two octets are not included (and subsequently, that no cell
information is included). The field is set to 1 to indicate that the two
octets are included. The length of the field is 1 bits;</p>
<p>- C<sub>2</sub>: This field indicates whether any information on
IAB-MT UL beams is included or not. The field is set to 1 to indicate
that at least one IAB-MT Resource set ID<sub>i</sub> field is included,
and it is set to 0 to indicate that no IAB-MT Resource set
ID<sub>i</sub> field is present. The length of the field is 1 bit;</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Multiplexing mode info: The two rightmost bits indicate which of
the four multiplexing modes defined in TS 38.473 [27] is applicable. The
third rightmost bit of this field indicates whether multiplexing
restrictions mode information contained in the two rightmost bits of the
field are applicable to non-overlapping frequency resources. This bit is
set to 1 when multiplexing mode information contained in the two
rightmost bits of the Multiplexing mode info field is applicable to
non-overlapping frequency resources. This field is set to 0 when
multiplexing mode information contained in the two rightmost bits of the
Multiplexing mode info field is not applicable to non-overlapping
frequency resources. The remaining 5 bits of this field are set to zero.
The length of the field is 8 bits;</p>
<p>- Number of IAB-MT UL beams: This field indicates the number N of
IAB-MT UL beams included in the MAC CE. The length of the field is 8
bits;</p>
<p>- IAB-MT Resource set ID<sub>i</sub>: an indication of the IAB-MTs
uplink beams. IAB-MT Resource set ID<sub>0</sub> field refers to the
first IAB-MT uplink beam, IAB-MT Resource set ID<sub>1</sub> field
refers to the second IAB-MT uplink beam, and so on. If the total number
N of beams included in the MAC CE is odd, the 4 right-most bits in the
final octet of the IAB-MT Resource set are disregarded by the UE. The
length of the field is 4 bits;</p>
<p>- DU resource configuration: when this field is set to 00, the
provided power adjustment is applied on FDM resources where the
simultaneous MT and DU signals are non-overlapping in the
frequency-domain; when this field is set to 01, the provided power
adjustment is applied on non-FDM resources where the simultaneous MT and
DU signals may overlap in the frequency-domain for a given (MT CC, DU
cell); when this field is set to 10, the provided power adjustment is
applied on FDM resources where the simultaneous MT and DU signals are
non-overlapping in the frequency-domain, and on non-FDM resources where
the simultaneous MT and DU signals may overlap in the frequency-domain
for a given (MT CC, DU cell). The length of the field is 2 bits;</p>
<p>- Cell info: indicates the cell configuration associated with the
information contained in the MAC CE. IAB-DU cell is contained in the
first nine bits of the field, while the Child IAB-MT Serving Cell index
into the next 5 bits of the field. The length of the field is 14
bits.</p>
<p><img src="media/image91.svg" /></p>
<p>Figure 6.1.3.64-1: Desired IAB-MT PSD range MAC CE</p>
<h4 id="timing-case-indication-mac-ce">6.1.3.65 Timing Case Indication
MAC CE</h4>
<p>The Timing Case Indication MAC CE is identified by MAC subheader with
eLCID as specified in Table 6.2.1-1b. It has a variable size with
following fields (Figure 6.1.3.65-1):</p>
<p>- Resource Configuration ID: This field indicates the RRC
configuration which applies to this MAC CE and corresponds to
<em>iab-ResourceConfigID</em> parameter in <em>IAB-ResourceConfig</em>
as specified in TS 38.331 [5]. The length of the field is 16 bits;</p>
<p>- Timing mode ID<sub>i</sub>: when this field is set to 00, the
timing mode applied to the i<sup>th</sup> slot in the list of slots
<em>slotList</em> provided via RRC in <em>IAB-ResourceConfig</em> is
Case-1; when this field is set to 01, the timing mode applied to the
i<sup>th</sup> slot in the list of slots <em>slotList</em> provided via
RRC in <em>IAB-ResourceConfig</em> is Case-6; when this field is set to
10, the timing mode applied to the i<sup>th</sup> slot in the list of
slots <em>slotList</em> provided via RRC in <em>IAB-ResourceConfig</em>
is Case-7. The total number N of Timing mode ID<sub>i</sub> fields
corresponds to the size of <em>slotList</em> provided via RRC in
<em>IAB-ResourceConfig</em>. If number N is not divisible by 4, (4 - N
mod 4) of the final Timing mode ID<sub>i</sub> fields are disregarded by
the receiving IAB node. The length of the field is 2 bits.</p>
<p><img src="media/image92.svg" /></p>
<p>Figure 6.1.3.65-1: Timing Case Indication MAC CE</p>
<h3 id="mac-pdu-transparent-mac">6.1.4 MAC PDU (transparent MAC)</h3>
<p>A MAC PDU consists solely of a MAC SDU whose size is aligned to a TB;
as described in Figure 6.1.4-1. This MAC PDU is used for transmissions
on PCH, BCH, DL-SCH including BCCH, and SL-BCH.</p>
<p><img src="media/image93.svg" /></p>
<p>Figure 6.1.4-1: Example of MAC PDU (transparent MAC)</p>
<h3 id="mac-pdu-random-access-response">6.1.5 MAC PDU (Random Access
Response)</h3>
<p>A MAC PDU consists of one or more MAC subPDUs and optionally padding.
Each MAC subPDU consists one of the following:</p>
<p>- a MAC subheader with Backoff Indicator only;</p>
<p>- a MAC subheader with RAPID only (i.e. acknowledgment for SI
request);</p>
<p>- a MAC subheader with RAPID and MAC RAR.</p>
<p>A MAC subheader with Backoff Indicator consists of five header fields
E/T/R/R/BI as described in Figure 6.1.5-1. A MAC subPDU with Backoff
Indicator only is placed at the beginning of the MAC PDU, if included.
'MAC subPDU(s) with RAPID only' and 'MAC subPDU(s) with RAPID and MAC
RAR' can be placed anywhere between MAC subPDU with Backoff Indicator
only (if any) and padding (if any).</p>
<p>A MAC subheader with RAPID consists of three header fields E/T/RAPID
as described in Figure 6.1.5-2.</p>
<p>Padding is placed at the end of the MAC PDU if present. Presence and
length of padding is implicit based on TB size, size of MAC
subPDU(s).</p>
<p><img src="media/image94.svg" /></p>
<p>Figure 6.1.5-1: E/T/R/R/BI MAC subheader</p>
<p><img src="media/image95.svg" /></p>
<p>Figure 6.1.5-2: E/T/RAPID MAC subheader</p>
<p><img src="media/image96.svg" /></p>
<p>Figure 6.1.5-3: Example of MAC PDU consisting of MAC RARs</p>
<h3 id="a-mac-pdu-msgb">6.1.5a MAC PDU (MSGB)</h3>
<p>A MAC PDU consists of one or more MAC subPDUs and optionally padding.
Each MAC subPDU consists one of the following:</p>
<p>- a MAC subheader with Backoff Indicator only;</p>
<p>- a MAC subheader and fallbackRAR;</p>
<p>- a MAC subheader and successRAR;</p>
<p>- a MAC subheader and MAC SDU for CCCH, DCCH or DTCH;</p>
<p>- a MAC subheader and padding.</p>
<p>A MAC subheader with Backoff Indicator consists of five header fields
E/T1/T2/R/BI as described in Figure 6.1.5a-1. A MAC subPDU with Backoff
Indicator only is placed at the beginning of the MAC PDU, if
included.</p>
<p>A MAC subheader for fallbackRAR consists of three header fields
E/T1/RAPID as described in Figure 6.1.5a-2. A MAC subheader for
successRAR consists of eight header fields E/T1/T2/S/R/R/R/R as
described in Figure 6.1.5a-3. A MAC subheader for MAC SDU consists of
the four header fields R/F/LCID/L as described in Figure 6.1.2-1 and
Figure 6.1.2-2.</p>
<p>At most one 'MAC subPDU for successRAR' indicating presence of 'MAC
subPDU(s) for MAC SDU' is included in a MAC PDU. MAC subPDU(s) for MAC
SDU are placed immediately after the 'MAC subPDU for successRAR'
indicating presence of 'MAC subPDU(s) for MAC SDU'.</p>
<p>If MAC PDU includes MAC subPDU(s) for MAC SDU, the last MAC subPDU
for MAC SDU is placed before MAC subPDU with padding as depicted in
Figure 6.1.5a-4. Otherwise, the last MAC subPDU in MAC PDU is placed
before padding as depicted in Figure 6.1.5a-5. The MAC subPDU with
padding includes R/R/LCID MAC subheader as described in Figure 6.1.2-3
and padding. The size of padding in the MAC subPDU with padding can be
zero. The length of padding is implicit based on TB size, size of MAC
subPDU(s).</p>
<p><img src="media/image97.svg" /></p>
<p>Figure 6.1.5a-1: BI MAC subheader</p>
<p><img src="media/image98.svg" /></p>
<p>Figure 6.1.5a-2: FallbackRAR MAC subheader</p>
<p><img src="media/image99.svg" /></p>
<p>Figure 6.1.5a-3: SuccessRAR MAC subheader</p>
<p><img src="media/image100.svg" /></p>
<p>Figure 6.1.5a-4: Example of a MSGB MAC PDU with MAC SDU(s)</p>
<p><img src="media/image101.svg" /></p>
<p>Figure 6.1.5a-5: Example of a MSGB MAC PDU without MAC SDU(s)</p>
<h3 id="mac-pdu-sl-sch">6.1.6 MAC PDU (SL-SCH)</h3>
<p>A MAC PDU consists of one SL-SCH subheader and one or more MAC
subPDUs. Each MAC subPDU consists of one of the following:</p>
<p>- A MAC subheader only (including padding);</p>
<p>- A MAC subheader and a MAC SDU;</p>
<p>- A MAC subheader and a MAC CE;</p>
<p>- A MAC subheader and padding.</p>
<p>The MAC SDUs are of variable sizes.</p>
<p>Each MAC subheader except SL-SCH subheader corresponds to either a
MAC SDU, a MAC CE, or padding.</p>
<p>The SL-SCH subheader is of a fixed size and consists of the seven
header fields V/R/R/R/R/SRC/DST.</p>
<p><img src="media/image102.svg" /></p>
<p>Figure 6.1.6-1: SL-SCH MAC subheader</p>
<p>A MAC subheader except for fixed-sized MAC CE and padding consists of
the four header fields R/F/LCID/L as depicted in Figure 6.1.2-1 (with
8-bit L field) and Figure 6.1.2-2 (with 16-bit L field). A MAC subheader
for fixed-sized MAC CE and padding consists of the two header fields
R/LCID as depicted in Figure 6.1.2-3.</p>
<p>SL MAC subPDU(s) with MAC SDU(s) is placed after the SL-SCH subheader
and before the MAC subPDU with a MAC CE and the MAC subPDU with padding
in the MAC PDU as depicted in Figure 6.1.6-2. SL MAC subPDU with a MAC
CE is placed after all the MAC subPDU(s) with MAC SDU and before the MAC
subPDU with padding in the MAC PDU as depicted in Figure 6.1.6-2. The
size of padding can be zero.</p>
<p><img src="media/image103.svg" /></p>
<p>Figure 6.1.6-2: Example of an SL MAC PDU</p>
<p>A maximum of one MAC PDU can be transmitted per TB per MAC
entity.</p>
<h2 id="formats-and-parameters">6.2 Formats and parameters</h2>
<h3 id="mac-subheader-for-dl-sch-and-ul-sch">6.2.1 MAC subheader for
DL-SCH and UL-SCH</h3>
<p>The MAC subheader consists of the following fields:</p>
<p>- LCID: The Logical Channel ID field identifies the logical channel
instance of the corresponding MAC SDU or the type of the corresponding
MAC CE or padding as described in Tables 6.2.1-1, 6.2.1-1c and 6.2.1-2
for the DL-SCH and UL-SCH respectively. There is one LCID field per MAC
subheader. The size of the LCID field is 6 bits. If the LCID field is
set to 34, one additional octet is present in the MAC subheader
containing the eLCID field and follow the octet containing LCID field.
If the LCID field is set to 33, two additional octets are present in the
MAC subheader containing the eLCID field and these two additional octets
follow the octet containing LCID field;</p>
<p>NOTE 1: For MBS broadcast, a logical channel is identified based on
G-RNTI and LCID if the same LCID is allocated for logical channels
corresponding to different G-RNTIs.</p>
<p>- eLCID: The extended Logical Channel ID field identifies the logical
channel instance of the corresponding MAC SDU or the type of the
corresponding MAC CE as described in tables 6.2.1-1a, 6.2.1-1b, 6.2.1-2a
and 6.2.1-2b for the DL-SCH and UL-SCH respectively. The size of the
eLCID field is either 8 bits or 16 bits.</p>
<p>NOTE 2: The extended Logical Channel ID space using two-octet eLCID
and the relevant MAC subheader format is used, only when configured, on
the NR backhaul links between IAB nodes or between IAB node and IAB
Donor, or for multicast MTCHs.</p>
<p>- L: The Length field indicates the length of the corresponding MAC
SDU or variable-sized MAC CE in bytes. There is one L field per MAC
subheader except for subheaders corresponding to fixed-sized MAC CEs,
padding, and MAC SDUs containing UL CCCH. The size of the L field is
indicated by the F field;</p>
<p>- F: The Format field indicates the size of the Length field. There
is one F field per MAC subheader except for subheaders corresponding to
fixed-sized MAC CEs, padding, and MAC SDUs containing UL CCCH. The size
of the F field is 1 bit. The value 0 indicates 8 bits of the Length
field. The value 1 indicates 16 bits of the Length field;</p>
<p>- R: Reserved bit, set to 0.</p>
<p>The MAC subheader is octet aligned.</p>
<p>Table 6.2.1-1 Values of LCID for DL-SCH</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr>
<th>Codepoint/Index</th>
<th>LCID values</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>CCCH</td>
</tr>
<tr>
<td>1–32</td>
<td>Identity of the logical channel of DCCH, DTCH and multicast
MTCH</td>
</tr>
<tr>
<td>33</td>
<td>Extended logical channel ID field (two-octet eLCID field)</td>
</tr>
<tr>
<td>34</td>
<td>Extended logical channel ID field (one-octet eLCID field)</td>
</tr>
<tr>
<td>35–46</td>
<td>Reserved</td>
</tr>
<tr>
<td>47</td>
<td>Recommended bit rate</td>
</tr>
<tr>
<td>48</td>
<td>SP ZP CSI-RS Resource Set Activation/Deactivation</td>
</tr>
<tr>
<td>49</td>
<td>PUCCH spatial relation Activation/Deactivation</td>
</tr>
<tr>
<td>50</td>
<td>SP SRS Activation/Deactivation</td>
</tr>
<tr>
<td>51</td>
<td>SP CSI reporting on PUCCH Activation/Deactivation</td>
</tr>
<tr>
<td>52</td>
<td>TCI State Indication for UE-specific PDCCH</td>
</tr>
<tr>
<td>53</td>
<td>TCI States Activation/Deactivation for UE-specific PDSCH</td>
</tr>
<tr>
<td>54</td>
<td>Aperiodic CSI Trigger State Subselection</td>
</tr>
<tr>
<td>55</td>
<td>SP CSI-RS/CSI-IM Resource Set Activation/Deactivation</td>
</tr>
<tr>
<td>56</td>
<td>Duplication Activation/Deactivation</td>
</tr>
<tr>
<td>57</td>
<td>SCell Activation/Deactivation (four octets)</td>
</tr>
<tr>
<td>58</td>
<td>SCell Activation/Deactivation (one octet)</td>
</tr>
<tr>
<td>59</td>
<td>Long DRX Command</td>
</tr>
<tr>
<td>60</td>
<td>DRX Command</td>
</tr>
<tr>
<td>61</td>
<td>Timing Advance Command</td>
</tr>
<tr>
<td>62</td>
<td>UE Contention Resolution Identity</td>
</tr>
<tr>
<td>63</td>
<td>Padding</td>
</tr>
</tbody>
</table>
<p>Table 6.2.1-1a Values of two-octet eLCID for DL-SCH</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 23%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr>
<th>Codepoint</th>
<th>Index</th>
<th>LCID values</th>
</tr>
</thead>
<tbody>
<tr>
<td>0 to (2<sup>16</sup> – 1)</td>
<td>320 to (2<sup>16</sup> + 319)</td>
<td>Identity of the logical channel</td>
</tr>
</tbody>
</table>
<p>Table 6.2.1-1b Values of one-octet eLCID for DL-SCH</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 23%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr>
<th>Codepoint</th>
<th>Index</th>
<th>LCID values</th>
</tr>
</thead>
<tbody>
<tr>
<td>0 to 226</td>
<td>64 to 290</td>
<td>Reserved</td>
</tr>
<tr>
<td>227</td>
<td>291</td>
<td>Serving Cell Set based SRS TCI State Indication MAC CE</td>
</tr>
<tr>
<td>228</td>
<td>292</td>
<td>SP/AP SRS TCI State Indication MAC CE</td>
</tr>
<tr>
<td>229</td>
<td>293</td>
<td>BFD-RS Indication MAC CE</td>
</tr>
<tr>
<td>230</td>
<td>294</td>
<td>Differential Koffset</td>
</tr>
<tr>
<td>231</td>
<td>295</td>
<td>Enhanced SCell Activation/Deactivation MAC CE with one octet
C<sub>i</sub> field</td>
</tr>
<tr>
<td>232</td>
<td>296</td>
<td>Enhanced SCell Activation/Deactivation MAC CE with four octet
C<sub>i</sub> field</td>
</tr>
<tr>
<td>233</td>
<td>297</td>
<td>Unified TCI States Activation/Deactivation MAC CE</td>
</tr>
<tr>
<td>234</td>
<td>298</td>
<td>PUCCH Power Control Set Update for multiple TRP PUCCH repetition MAC
CE</td>
</tr>
<tr>
<td>235</td>
<td>299</td>
<td>PUCCH spatial relation Activation/Deactivation for multiple TRP
PUCCH repetition MAC CE</td>
</tr>
<tr>
<td>236</td>
<td>300</td>
<td>Enhanced TCI States Indication for UE-specific PDCCH</td>
</tr>
<tr>
<td>237</td>
<td>301</td>
<td>Positioning Measurement Gap Activation/Deactivation Command</td>
</tr>
<tr>
<td>238</td>
<td>302</td>
<td>PPW Activation/Deactivation Command</td>
</tr>
<tr>
<td>239</td>
<td>303</td>
<td>DL Tx Power Adjustment</td>
</tr>
<tr>
<td>240</td>
<td>304</td>
<td>Timing Case Indication</td>
</tr>
<tr>
<td>241</td>
<td>305</td>
<td>Child IAB-DU Restricted Beam Indication</td>
</tr>
<tr>
<td>242</td>
<td>306</td>
<td>Case-7 Timing advance offset</td>
</tr>
<tr>
<td>243</td>
<td>307</td>
<td>Provided Guard Symbols for Case-6 timing</td>
</tr>
<tr>
<td>244</td>
<td>308</td>
<td>Provided Guard Symbols for Case-7 timing</td>
</tr>
<tr>
<td>245</td>
<td>309</td>
<td>Serving Cell Set based SRS Spatial Relation Indication</td>
</tr>
<tr>
<td>246</td>
<td>310</td>
<td>PUSCH Pathloss Reference RS Update</td>
</tr>
<tr>
<td>247</td>
<td>311</td>
<td>SRS Pathloss Reference RS Update</td>
</tr>
<tr>
<td>248</td>
<td>312</td>
<td>Enhanced SP/AP SRS Spatial Relation Indication</td>
</tr>
<tr>
<td>249</td>
<td>313</td>
<td>Enhanced PUCCH Spatial Relation Activation/Deactivation</td>
</tr>
<tr>
<td>250</td>
<td>314</td>
<td>Enhanced TCI States Activation/Deactivation for UE-specific
PDSCH</td>
</tr>
<tr>
<td>251</td>
<td>315</td>
<td>Duplication RLC Activation/Deactivation</td>
</tr>
<tr>
<td>252</td>
<td>316</td>
<td>Absolute Timing Advance Command</td>
</tr>
<tr>
<td>253</td>
<td>317</td>
<td>SP Positioning SRS Activation/Deactivation</td>
</tr>
<tr>
<td>254</td>
<td>318</td>
<td>Provided Guard Symbols</td>
</tr>
<tr>
<td>255</td>
<td>319</td>
<td>Timing Delta</td>
</tr>
</tbody>
</table>
<p>Table 6.2.1-1c Values of LCID for MBS broadcast on DL-SCH</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr>
<th>Codepoint/Index</th>
<th>LCID values</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>MCCH</td>
</tr>
<tr>
<td>1–32</td>
<td>Identity of the logical channel of broadcast MTCH</td>
</tr>
<tr>
<td>33–63</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<p>Table 6.2.1-2 Values of LCID for UL-SCH</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr>
<th>Codepoint/Index</th>
<th>LCID values</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>CCCH of size 64 bits (referred to as "CCCH1" in TS 38.331 [5]),
except for a RedCap UE</td>
</tr>
<tr>
<td>1–32</td>
<td>Identity of the logical channel of DCCH and DTCH</td>
</tr>
<tr>
<td>33</td>
<td>Extended logical channel ID field (two-octet eLCID field)</td>
</tr>
<tr>
<td>34</td>
<td>Extended logical channel ID field (one-octet eLCID field)</td>
</tr>
<tr>
<td>35</td>
<td>CCCH of size 48 bits (referred to as "CCCH" in TS 38.331 [5]) for a
RedCap UE</td>
</tr>
<tr>
<td>36</td>
<td>CCCH of size 64 bits (referred to as "CCCH1" in TS 38.331 [5]) for a
RedCap UE</td>
</tr>
<tr>
<td>37–42</td>
<td>Reserved</td>
</tr>
<tr>
<td>43</td>
<td>Truncated Enhanced BFR (one octet C<sub>i</sub>)</td>
</tr>
<tr>
<td>44</td>
<td>Timing Advance Report</td>
</tr>
<tr>
<td>45</td>
<td>Truncated Sidelink BSR</td>
</tr>
<tr>
<td>46</td>
<td>Sidelink BSR</td>
</tr>
<tr>
<td>47</td>
<td>Reserved</td>
</tr>
<tr>
<td>48</td>
<td>LBT failure (four octets)</td>
</tr>
<tr>
<td>49</td>
<td>LBT failure (one octet)</td>
</tr>
<tr>
<td>50</td>
<td>BFR (one octet C<sub>i</sub>)</td>
</tr>
<tr>
<td>51</td>
<td>Truncated BFR (one octet C<sub>i</sub>)</td>
</tr>
<tr>
<td>52</td>
<td>CCCH of size 48 bits (referred to as "CCCH" in TS 38.331 [5]),
except for a RedCap UE</td>
</tr>
<tr>
<td>53</td>
<td>Recommended bit rate query</td>
</tr>
<tr>
<td>54</td>
<td>Multiple Entry PHR (four octets C<sub>i</sub>)</td>
</tr>
<tr>
<td>55</td>
<td>Configured Grant Confirmation</td>
</tr>
<tr>
<td>56</td>
<td>Multiple Entry PHR (one octet C<sub>i</sub>)</td>
</tr>
<tr>
<td>57</td>
<td>Single Entry PHR</td>
</tr>
<tr>
<td>58</td>
<td>C-RNTI</td>
</tr>
<tr>
<td>59</td>
<td>Short Truncated BSR</td>
</tr>
<tr>
<td>60</td>
<td>Long Truncated BSR</td>
</tr>
<tr>
<td>61</td>
<td>Short BSR</td>
</tr>
<tr>
<td>62</td>
<td>Long BSR</td>
</tr>
<tr>
<td>63</td>
<td>Padding</td>
</tr>
</tbody>
</table>
<p>Table 6.2.1-2a Values of two-octet eLCID for UL-SCH</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 23%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr>
<th>Codepoint</th>
<th>Index</th>
<th>LCID values</th>
</tr>
</thead>
<tbody>
<tr>
<td>0 to (2<sup>16</sup> – 1)</td>
<td>320 to (2<sup>16</sup> + 319)</td>
<td>Identity of the logical channel</td>
</tr>
</tbody>
</table>
<p>Table 6.2.1-2b Values of one-octet eLCID for UL-SCH</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 23%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr>
<th>Codepoint</th>
<th>Index</th>
<th>LCID values</th>
</tr>
</thead>
<tbody>
<tr>
<td>0 to 228</td>
<td>64 to 292</td>
<td>Reserved</td>
</tr>
<tr>
<td>229</td>
<td>293</td>
<td>Enhanced Multiple Entry PHR for multiple TRP (four octets
C<sub>i</sub>)</td>
</tr>
<tr>
<td>230</td>
<td>294</td>
<td>Enhanced Multiple Entry PHR for multiple TRP (one octets
C<sub>i</sub>)</td>
</tr>
<tr>
<td>231</td>
<td>295</td>
<td>Enhanced Single Entry PHR for multiple TRP</td>
</tr>
<tr>
<td>232</td>
<td>296</td>
<td>Enhanced Multiple Entry PHR (four octets C<sub>i</sub>)</td>
</tr>
<tr>
<td>233</td>
<td>297</td>
<td>Enhanced Multiple Entry PHR (one octets C<sub>i</sub>)</td>
</tr>
<tr>
<td>234</td>
<td>298</td>
<td>Enhanced Single Entry PHR</td>
</tr>
<tr>
<td>235</td>
<td>299</td>
<td>Enhanced BFR (one octet C<sub>i</sub>)</td>
</tr>
<tr>
<td>236</td>
<td>300</td>
<td>Enhanced BFR (four octet C<sub>i</sub>)</td>
</tr>
<tr>
<td>237</td>
<td>301</td>
<td>Truncated Enhanced BFR (four octet C<sub>i</sub>)</td>
</tr>
<tr>
<td>238</td>
<td>302</td>
<td>Positioning Measurement Gap Activation/Deactivation Request</td>
</tr>
<tr>
<td>239</td>
<td>303</td>
<td>IAB-MT Recommended Beam Indication</td>
</tr>
<tr>
<td>240</td>
<td>304</td>
<td>Desired IAB-MT PSD range</td>
</tr>
<tr>
<td>241</td>
<td>305</td>
<td>Desired DL Tx Power Adjustment</td>
</tr>
<tr>
<td>242</td>
<td>306</td>
<td>Case-6 Timing Request</td>
</tr>
<tr>
<td>243</td>
<td>307</td>
<td>Desired Guard Symbols for Case 6 timing</td>
</tr>
<tr>
<td>244</td>
<td>308</td>
<td>Desired Guard Symbols for Case 7 timing</td>
</tr>
<tr>
<td>245</td>
<td>309</td>
<td>Extended Short Truncated BSR</td>
</tr>
<tr>
<td>246</td>
<td>310</td>
<td>Extended Long Truncated BSR</td>
</tr>
<tr>
<td>247</td>
<td>311</td>
<td>Extended Short BSR</td>
</tr>
<tr>
<td>248</td>
<td>312</td>
<td>Extended Long BSR</td>
</tr>
<tr>
<td>249</td>
<td>313</td>
<td>Extended Pre-emptive BSR</td>
</tr>
<tr>
<td>250</td>
<td>314</td>
<td>BFR (four octets C<sub>i</sub>)</td>
</tr>
<tr>
<td>251</td>
<td>315</td>
<td>Truncated BFR (four octets C<sub>i</sub>)</td>
</tr>
<tr>
<td>252</td>
<td>316</td>
<td>Multiple Entry Configured Grant Confirmation</td>
</tr>
<tr>
<td>253</td>
<td>317</td>
<td>Sidelink Configured Grant Confirmation</td>
</tr>
<tr>
<td>254</td>
<td>318</td>
<td>Desired Guard Symbols</td>
</tr>
<tr>
<td>255</td>
<td>319</td>
<td>Pre-emptive BSR</td>
</tr>
</tbody>
</table>
<h3 id="mac-subheader-for-random-access-response">6.2.2 MAC subheader
for Random Access Response</h3>
<p>The MAC subheader consists of the following fields:</p>
<p>- E: The Extension field is a flag indicating if the MAC subPDU
including this MAC subheader is the last MAC subPDU or not in the MAC
PDU. The E field is set to 1 to indicate at least another MAC subPDU
follows. The E field is set to 0 to indicate that the MAC subPDU
including this MAC subheader is the last MAC subPDU in the MAC PDU;</p>
<p>- T: The Type field is a flag indicating whether the MAC subheader
contains a Random Access Preamble ID or a Backoff Indicator. The T field
is set to 0 to indicate the presence of a Backoff Indicator field in the
subheader (BI). The T field is set to 1 to indicate the presence of a
Random Access Preamble ID field in the subheader (RAPID);</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- BI: The Backoff Indicator field identifies the overload condition
in the cell. The size of the BI field is 4 bits;</p>
<p>- RAPID: The Random Access Preamble IDentifier field identifies the
transmitted Random Access Preamble (see clause 5.1.3). The size of the
RAPID field is 6 bits. If the RAPID in the MAC subheader of a MAC subPDU
corresponds to one of the Random Access Preambles configured for SI
request, MAC RAR is not included in the MAC subPDU.</p>
<p>The MAC subheader is octet aligned.</p>
<h3 id="a-mac-subheader-for-msgb">6.2.2a MAC subheader for MSGB</h3>
<p>The MAC subheader consists of the following fields:</p>
<p>- E: The Extension field is a flag indicating if the MAC subPDU
including this MAC subheader is the last MAC subPDU (other than MAC
subPDU for MAC SDU) or not in the MAC PDU. The E field is set to 1 to
indicate at least another MAC subPDU (other than MAC subPDU for MAC SDU)
follows. The E field is set to 0 to indicate that the MAC subPDU
including this MAC subheader is the last MAC subPDU (other than MAC
subPDU for MAC SDU) in the MAC PDU;</p>
<p>- T1: The T1 field is a flag indicating whether the MAC subheader
contains a Random Access Preamble ID or T2. The T1 field is set to 1 to
indicate the presence of a Random Access Preamble ID field in the
subheader (RAPID). The T1 field is set to 0 to indicate the presence of
T2 field in the subheader;</p>
<p>- T2: The T2 field is a flag indicating whether the MAC subheader
contains a Backoff Indicator (BI) or a MAC SDU indicator (S). The T2
field is set to 0 to indicate the presence of a Backoff Indicator field
in the subheader. The T2 field is set to 1 to indicate the presence of
the S field in the subheader;</p>
<p>- S: This field indicates whether 'MAC subPDU(s) for MAC SDU' follow
the MAC subPDU including this MAC subheader or not; The S field is set
to 1 to indicate presence of 'MAC subPDU(s) for MAC SDU'. The S field is
set to 0 to indicate absence of 'MAC subPDU(s) for MAC SDU';</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- BI: The Backoff Indicator field identifies the overload condition
in the cell. The size of the BI field is 4 bits;</p>
<p>- RAPID: The Random Access Preamble IDentifier field identifies the
transmitted Random Access Preamble (see clause 5.1.3). The size of the
RAPID field is 6 bits.</p>
<p>The MAC subheader is octet aligned.</p>
<h3 id="mac-payload-for-random-access-response">6.2.3 MAC payload for
Random Access Response</h3>
<p>The MAC RAR is of fixed size as depicted in Figure 6.2.3-1, and
consists of the following fields:</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Timing Advance Command: The Timing Advance Command field indicates
the index value <em>T<sub>A</sub></em> used to control the amount of
timing adjustment that the MAC entity has to apply in TS 38.213 [6]. The
size of the Timing Advance Command field is 12 bits;</p>
<p>- UL Grant: The Uplink Grant field indicates the resources to be used
on the uplink in TS 38.213 [6]. The size of the UL Grant field is 27
bits;</p>
<p>- Temporary C-RNTI: The Temporary C-RNTI field indicates the
temporary identity that is used by the MAC entity during Random Access.
The size of the Temporary C-RNTI field is 16 bits.</p>
<p>The MAC RAR is octet aligned.</p>
<p><img src="media/image104.svg" /></p>
<p>Figure 6.2.3-1: MAC RAR</p>
<h3 id="a-mac-payload-for-msgb">6.2.3a MAC payload for MSGB</h3>
<p>The fallbackRAR is of fixed size as depicted in Figure 6.2.3a-1, and
consists of the following fields:</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- Timing Advance Command: The Timing Advance Command field indicates
the index value <em>T<sub>A</sub></em> used to control the amount of
timing adjustment that the MAC entity has to apply in TS 38.213 [6]. The
size of the Timing Advance Command field is 12 bits;</p>
<p>- UL Grant: The Uplink Grant field indicates the resources to be used
on the uplink in TS 38.213 [6]. The size of the UL Grant field is 27
bits;</p>
<p>- Temporary C-RNTI: The Temporary C-RNTI field indicates the
temporary identity that is used by the MAC entity during Random Access.
The size of the Temporary C-RNTI field is 16 bits.</p>
<p>The fallbackRAR is octet aligned.</p>
<p><img src="media/image105.svg" /></p>
<p>Figure 6.2.3a-1: fallbackRAR</p>
<p>The successRAR is of fixed size as depicted in Figure 6.2.3a-2, and
consists of the following fields:</p>
<p>- UE Contention Resolution Identity: This field contains the UL CCCH
SDU. If the UL CCCH SDU is longer than 48 bits, this field contains the
first 48 bits of the UL CCCH SDU.</p>
<p>- R: Reserved bit, set to 0;</p>
<p>- ChannelAccess-CPext: The channel access type and CP extension for
the PUCCH resource containing the HARQ feedback for MSGB in shared
spectrum channel access as specified in TS 38.213 [6]. The field is only
present when the MSGB HARQ feedback is to be transmitted with shared
spectrum channel access as specified in TS 37.213 [18]. Otherwise, the
field is not present and R bits are present instead. The size of the
ChannelAccess-CPext field is 2 bits;</p>
<p>- TPC: The TPC command for the PUCCH resource containing HARQ
feedback for MSGB, as specified in TS 38.213 [6]. The size of the TPC
field is 2 bits;</p>
<p>- HARQ Feedback Timing Indicator: The PDSCH-to-HARQ feedback timing
indicator field for MSGB HARQ feedback as specified in TS 38.213 [6].
The size of the HARQ Feedback Timing Indicator field is 3 bits;</p>
<p>- PUCCH Resource Indicator: The PUCCH resource indicator for HARQ
feedback for MSGB, as specified in TS 38.213[6]. The size of the PUCCH
resource Indicator field is 4 bits;</p>
<p>- Timing Advance Command: The Timing Advance Command field indicates
the index value <em>T<sub>A</sub></em> used to control the amount of
timing adjustment that the MAC entity has to apply in TS 38.213 [6]. The
size of the Timing Advance Command field is 12 bits;</p>
<p>- C-RNTI: The C-RNTI field indicates the identity that is used by the
MAC entity upon completion of Random Access. The size of the C-RNTI
field is 16 bits.</p>
<p>The successRAR is octet aligned.</p>
<p><img src="media/image106.svg" /></p>
<p>Figure 6.2.3a-2: successRAR</p>
<h3 id="mac-subheader-for-sl-sch">6.2.4 MAC subheader for SL-SCH</h3>
<p>The MAC subheader consists of the following fields:</p>
<p>- V: The MAC PDU format version number field indicates which version
of the SL-SCH subheader is used. In this version of the specification,
the V field is set to 0. The size of the V field is 4 bits;</p>
<p>- SRC: The SRC field carries the 16 most significant bits of the
Source Layer-2 ID set to the identifier provided by upper layers as
defined in TS 23.287 [19] or TS 23.304 [26]. The length of the field is
16 bits;</p>
<p>- DST: The DST field carries the 8 most significant bits of the
Destination Layer-2 ID set to the identifier provided by upper layers as
defined in TS 23.287 [19] or TS 23.304 [26]. The length of the field is
8 bits;</p>
<p>- LCID: The Logical Channel ID field identifies the logical channel
instance of the corresponding MAC SDU or the type of the corresponding
MAC CE within the scope of one Source Layer-2 ID and Destination Layer-2
ID pair or padding as described in Tables 6.2.4-1 for SL-SCH. There is
one LCID field per MAC subheader except for SL-SCH subheader. The size
of the LCID field is 6 bits;</p>
<p>- L: The Length field indicates the length of the corresponding MAC
SDU or variable-sized MAC CE in bytes. There is one L field per MAC
subheader except for SL-SCH subheader and subheaders corresponding to
the fixed-sized MAC CE or padding. The size of the L field is indicated
by the F field;</p>
<p>- F: The Format field indicates the size of the Length field. There
is one F field per MAC subheader except for SL-SCH subheader and
subheaders corresponding to the fixed-sized MAC CE or padding. The size
of the F field is 1 bit. The value 0 indicates 8 bits of the Length
field. The value 1 indicates 16 bits of the Length field;</p>
<p>- R: Reserved bit, set to 0.</p>
<p>The MAC subheader is octet aligned.</p>
<p>Table 6.2.4-1 Values of LCID for SL-SCH</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>LCID values</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>SCCH carrying PC5-S messages that are not protected</td>
</tr>
<tr>
<td>1</td>
<td>SCCH carrying PC5-S messages "Direct Security Mode Command" and
"Direct Security Mode Complete","ProSe direct link security mode
command" and "ProSe direct link security mode complete"</td>
</tr>
<tr>
<td>2</td>
<td>SCCH carrying other PC5-S messages that are protected</td>
</tr>
<tr>
<td>3</td>
<td>SCCH carrying PC5-RRC messages</td>
</tr>
<tr>
<td>4–19</td>
<td>Identity of the logical channel</td>
</tr>
<tr>
<td>20–55</td>
<td>Reserved</td>
</tr>
<tr>
<td>56</td>
<td>SCCH carrying RRC messages delivered via SL-RLC0 as specified in TS
38.331 [5]</td>
</tr>
<tr>
<td>57</td>
<td>SCCH carrying RRC message delivered via SL-RLC1 as specified in TS
38.331 [5]</td>
</tr>
<tr>
<td>58</td>
<td>SCCH for Sidelink Discovery Messages</td>
</tr>
<tr>
<td>59</td>
<td>Sidelink Inter-UE Coordination Request</td>
</tr>
<tr>
<td>60</td>
<td>Sidelink Inter-UE Coordination Information</td>
</tr>
<tr>
<td>61</td>
<td>Sidelink DRX Command</td>
</tr>
<tr>
<td>62</td>
<td>Sidelink CSI Reporting</td>
</tr>
<tr>
<td>63</td>
<td>Padding</td>
</tr>
</tbody>
</table>
<h1 id="variables-and-constants">7 Variables and constants</h1>
<h2 id="rnti-values">7.1 RNTI values</h2>
<p>RNTI values are presented in Table 7.1-1.</p>
<p>Table 7.1-1: RNTI values.</p>
<table>
<colgroup>
<col style="width: 31%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr>
<th>Value (hexa-decimal)</th>
<th>RNTI</th>
</tr>
</thead>
<tbody>
<tr>
<td>0000</td>
<td>N/A</td>
</tr>
<tr>
<td>0001–FFF2</td>
<td style="text-align: center;">RA-RNTI, MSGB-RNTI, Temporary C-RNTI,
C-RNTI, CI-RNTI, MCS-C-RNTI, CS-RNTI, TPC-PUCCH-RNTI, TPC-PUSCH-RNTI,
TPC-SRS-RNTI, INT-RNTI, SFI-RNTI, SP-CSI-RNTI, PS-RNTI, SL-RNTI,
SL-CS-RNTI, SL Semi-Persistent Scheduling V-RNTI, AI-RNTI, G-RNTI,
G-CS-RNTI, and CG-SDT-CS-RNTI</td>
</tr>
<tr>
<td>FFF3–FFFB</td>
<td>Reserved</td>
</tr>
<tr>
<td>FFFC</td>
<td>PEI-RNTI</td>
</tr>
<tr>
<td>FFFD</td>
<td>MCCH-RNTI</td>
</tr>
<tr>
<td>FFFE</td>
<td>P-RNTI</td>
</tr>
<tr>
<td>FFFF</td>
<td>SI-RNTI</td>
</tr>
</tbody>
</table>
<p>Table 7.1-2: RNTI usage.</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 40%" />
<col style="width: 20%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr>
<th>RNTI</th>
<th>Usage</th>
<th>Transport Channel</th>
<th>Logical Channel</th>
</tr>
</thead>
<tbody>
<tr>
<td>P-RNTI</td>
<td>Paging and System Information change notification</td>
<td>PCH</td>
<td>PCCH</td>
</tr>
<tr>
<td>SI-RNTI</td>
<td>Broadcast of System Information</td>
<td>DL-SCH</td>
<td>BCCH</td>
</tr>
<tr>
<td>RA-RNTI</td>
<td>Random Access Response</td>
<td>DL-SCH</td>
<td>N/A</td>
</tr>
<tr>
<td>MSGB-RNTI</td>
<td>Random Access Response for 2-step RA type</td>
<td>DL-SCH</td>
<td>CCCH, DCCH, DTCH</td>
</tr>
<tr>
<td>Temporary C-RNTI</td>
<td>Contention Resolution<br />
(when no valid C-RNTI is available)</td>
<td>DL-SCH</td>
<td>CCCH, DCCH, DTCH</td>
</tr>
<tr>
<td>Temporary C-RNTI</td>
<td>Msg3 transmission</td>
<td>UL-SCH</td>
<td>CCCH, DCCH, DTCH</td>
</tr>
<tr>
<td>C-RNTI, MCS-C-RNTI</td>
<td>Dynamically scheduled unicast transmission</td>
<td>UL-SCH</td>
<td>DCCH, DTCH</td>
</tr>
<tr>
<td>C-RNTI</td>
<td>Dynamically scheduled unicast transmission</td>
<td>DL-SCH</td>
<td>CCCH, DCCH, DTCH</td>
</tr>
<tr>
<td>MCS-C-RNTI</td>
<td>Dynamically scheduled unicast transmission</td>
<td>DL-SCH</td>
<td>DCCH, DTCH</td>
</tr>
<tr>
<td>C-RNTI</td>
<td>Triggering of PDCCH ordered random access</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>C-RNTI</td>
<td>Dynamically scheduled PTP retransmission for initial PTM
transmission for multicast MBS.</td>
<td>DL-SCH</td>
<td>MTCH</td>
</tr>
<tr>
<td>CG-SDT-CS-RNTI</td>
<td><p>Dynamically scheduled unicast transmission</p>
<p>(retransmission)</p></td>
<td>UL-SCH</td>
<td>CCCH, DCCH, DTCH</td>
</tr>
<tr>
<td>CS-RNTI</td>
<td>Configured scheduled unicast transmission<br />
(activation, reactivation and retransmission)</td>
<td>DL-SCH, UL-SCH</td>
<td>DCCH, DTCH</td>
</tr>
<tr>
<td>CS-RNTI</td>
<td>Configured scheduled unicast transmission<br />
(deactivation)</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>CS-RNTI</td>
<td>Configured scheduled unicast transmission<br />
(PTP retransmission for initial PTM transmission)</td>
<td>DL-SCH</td>
<td>MTCH</td>
</tr>
<tr>
<td>CS-RNTI</td>
<td>Configured scheduled unicast transmission<br />
(MBS SPS deactivation)</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>G-CS-RNTI</td>
<td>Configured scheduled multicast transmission<br />
(activation, reactivation and retransmission)</td>
<td>DL-SCH</td>
<td>MTCH</td>
</tr>
<tr>
<td>G-CS-RNTI</td>
<td>Configured scheduled multicast transmission (deactivation)</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>TPC-PUCCH-RNTI</td>
<td>PUCCH power control</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>TPC-PUSCH-RNTI</td>
<td>PUSCH power control</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>TPC-SRS-RNTI</td>
<td>SRS trigger and power control</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>INT-RNTI</td>
<td>Indication pre-emption in DL</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>SFI-RNTI</td>
<td>Slot Format Indication on the given cell</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>SP-CSI-RNTI</td>
<td>Activation of Semi-persistent CSI reporting on PUSCH</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>CI-RNTI</td>
<td>Cancellation indication in UL</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>PS-RNTI</td>
<td>DCP to indicate whether to start <em>drx-onDurationTimer</em> for
associated DRX cycle</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>SL-RNTI</td>
<td>Dynamically scheduled sidelink transmission</td>
<td>SL-SCH</td>
<td>SCCH, STCH</td>
</tr>
<tr>
<td>SL-CS-RNTI</td>
<td>Configured scheduled sidelink transmission<br />
(activation, reactivation and retransmission)</td>
<td>SL-SCH</td>
<td>SCCH, STCH</td>
</tr>
<tr>
<td>SL-CS-RNTI</td>
<td>Configured scheduled sidelink transmission<br />
(deactivation)</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>SL Semi-Persistent Scheduling V-RNTI (NOTE 2)</td>
<td><p>Semi-Persistently scheduled sidelink transmission for V2X
sidelink communication</p>
<p>(activation, reactivation and retransmission)</p></td>
<td>SL-SCH</td>
<td>STCH</td>
</tr>
<tr>
<td><p>SL Semi-Persistent Scheduling V-RNTI</p>
<p>(NOTE 2)</p></td>
<td><p>Semi-Persistently scheduled sidelink transmission for V2X
sidelink communication</p>
<p>(deactivation)</p></td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>AI-RNTI</td>
<td>Availability indication on the given cell</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>G-RNTI</td>
<td>Dynamically scheduled MBS PTM transmission</td>
<td>DL-SCH</td>
<td>MTCH</td>
</tr>
<tr>
<td>MCCH-RNTI</td>
<td>Dynamically scheduled MCCH signalling and MCCH change
notification</td>
<td>DL-SCH</td>
<td>MCCH</td>
</tr>
<tr>
<td>PEI-RNTI</td>
<td>Paging Early Indication</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td colspan="4"><p>NOTE 1: The usage of MCS-C-RNTI is equivalent to that
of C-RNTI in MAC procedures (except for the C-RNTI MAC CE).</p>
<p>NOTE 2: The MAC entity uses SL Semi-Persistent Scheduling V-RNTI to
control semi-persistently scheduled sidelink transmission on SL-SCH for
V2X sidelink communication as specified in clause 5.14.1.1 of TS 36.321
[22].</p>
<p>NOTE 3: The usage of CG-SDT-CS-RNTI is equivalent to that of CS-RNTI
when there is an CG-SDT procedure ongoing.</p></td>
</tr>
</tbody>
</table>
<h2 id="backoff-parameter-values">7.2 Backoff Parameter values</h2>
<p>Backoff Parameter values are presented in Table 7.2-1.</p>
<p>Table 7.2-1: Backoff Parameter values.</p>
<table>
<colgroup>
<col style="width: 41%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>Backoff Parameter value (ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>10</td>
</tr>
<tr>
<td>2</td>
<td>20</td>
</tr>
<tr>
<td>3</td>
<td>30</td>
</tr>
<tr>
<td>4</td>
<td>40</td>
</tr>
<tr>
<td>5</td>
<td>60</td>
</tr>
<tr>
<td>6</td>
<td>80</td>
</tr>
<tr>
<td>7</td>
<td>120</td>
</tr>
<tr>
<td>8</td>
<td>160</td>
</tr>
<tr>
<td>9</td>
<td>240</td>
</tr>
<tr>
<td>10</td>
<td>320</td>
</tr>
<tr>
<td>11</td>
<td>480</td>
</tr>
<tr>
<td>12</td>
<td>960</td>
</tr>
<tr>
<td>13</td>
<td>1920</td>
</tr>
<tr>
<td>14</td>
<td>Reserved</td>
</tr>
<tr>
<td>15</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<h2 id="delta_preamble-values">7.3 DELTA_PREAMBLE values</h2>
<p>The DELTA_PREAMBLE preamble format based power offset values are
presented in Tables 7.3-1 and 7.3-2.</p>
<p>Table 7.3-1: DELTA_PREAMBLE values for long preamble formats.</p>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr>
<th><p>Preamble</p>
<p>Format</p></th>
<th>DELTA_PREAMBLE values</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0 dB</td>
</tr>
<tr>
<td>1</td>
<td>-3 dB</td>
</tr>
<tr>
<td>2</td>
<td>-6 dB</td>
</tr>
<tr>
<td>3</td>
<td>0 dB</td>
</tr>
</tbody>
</table>
<p>Table 7.3-2: DELTA_PREAMBLE values for short preamble formats.</p>
<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th><p>Preamble</p>
<p>Format</p></th>
<th>DELTA_PREAMBLE values (dB)</th>
</tr>
</thead>
<tbody>
<tr>
<td>A1</td>
<td>8 + 3 × <em>μ</em></td>
</tr>
<tr>
<td>A2</td>
<td>5 + 3 × <em>μ</em></td>
</tr>
<tr>
<td>A3</td>
<td>3 + 3 × <em>μ</em></td>
</tr>
<tr>
<td>B1</td>
<td>8 + 3 × <em>μ</em></td>
</tr>
<tr>
<td>B2</td>
<td>5 + 3 × <em>μ</em></td>
</tr>
<tr>
<td>B3</td>
<td>3 + 3 × <em>μ</em></td>
</tr>
<tr>
<td>B4</td>
<td>3 × <em>μ</em></td>
</tr>
<tr>
<td>C0</td>
<td>11 + 3 × <em>μ</em></td>
</tr>
<tr>
<td>C2</td>
<td>5 + 3 × <em>μ</em></td>
</tr>
</tbody>
</table>
<p>where <em>μ</em> is the sub-carrier spacing configuration determined
by <em>msg1-SubcarrierSpacing</em> or <em>msgA-SubcarrierSpacing</em>,
as specified in TS 38.331 [5] and Table 4.2-1 in TS 38.211 [8], and the
preamble formats are given by <em>prach-ConfigurationIndex</em> or
<em>msgA-PRACH-ConfigurationIndex</em>, as specified in TS 38.331 [5]
and Tables 6.3.3.2-2 to 6.3.3.2-4 in TS 38.211 [8].</p>
<h2 id="prach-mask-index-values">7.4 PRACH Mask Index values</h2>
<p>Table 7.4-1: PRACH Mask Index values</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr>
<th>PRACH Mask Index/<br />
<em>msgA-SSB-SharedRO-MaskIndex/</em><br />
<em>ssb-SharedRO-MaskIndex</em></th>
<th>Allowed PRACH occasion(s) of SSB</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>All</td>
</tr>
<tr>
<td>1</td>
<td>PRACH occasion index 1</td>
</tr>
<tr>
<td>2</td>
<td>PRACH occasion index 2</td>
</tr>
<tr>
<td>3</td>
<td>PRACH occasion index 3</td>
</tr>
<tr>
<td>4</td>
<td>PRACH occasion index 4</td>
</tr>
<tr>
<td>5</td>
<td>PRACH occasion index 5</td>
</tr>
<tr>
<td>6</td>
<td>PRACH occasion index 6</td>
</tr>
<tr>
<td>7</td>
<td>PRACH occasion index 7</td>
</tr>
<tr>
<td>8</td>
<td>PRACH occasion index 8</td>
</tr>
<tr>
<td>9</td>
<td>Every even PRACH occasion</td>
</tr>
<tr>
<td>10</td>
<td>Every odd PRACH occasion</td>
</tr>
<tr>
<td>11</td>
<td>Reserved</td>
</tr>
<tr>
<td>12</td>
<td>Reserved</td>
</tr>
<tr>
<td>13</td>
<td>Reserved</td>
</tr>
<tr>
<td>14</td>
<td>Reserved</td>
</tr>
<tr>
<td>15</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<p class="heading" id="annex-a-informative-change-history"><br />
Annex A (informative):<br />
Change history</p>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 6%" />
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 53%" />
<col style="width: 7%" />
</colgroup>
<tbody>
<tr>
<td colspan="8" style="text-align: center;"><strong>Change
history</strong></td>
</tr>
<tr>
<td style="text-align: center;"><strong>Date</strong></td>
<td style="text-align: center;"><strong>Meeting</strong></td>
<td style="text-align: center;"><strong>TDoc</strong></td>
<td style="text-align: center;"><strong>CR</strong></td>
<td style="text-align: center;"><strong>Rev</strong></td>
<td style="text-align: center;"><strong>Cat</strong></td>
<td style="text-align: center;"><strong>Subject/Comment</strong></td>
<td style="text-align: center;"><strong>New version</strong></td>
</tr>
<tr>
<td style="text-align: center;">2017-04</td>
<td style="text-align: left;">RAN2#97bis</td>
<td style="text-align: left;">R2-1703006</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Skeleton of NR MAC specification</td>
<td style="text-align: left;">0.0.1</td>
</tr>
<tr>
<td style="text-align: center;">2017-04</td>
<td style="text-align: left;">RAN2#97bis</td>
<td style="text-align: left;">R2-1703915</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Editorial updates</td>
<td style="text-align: left;">0.0.2</td>
</tr>
<tr>
<td style="text-align: center;">2017-05</td>
<td style="text-align: left;">RAN2#98</td>
<td style="text-align: left;">R2-1704475</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">To capture agreements from
RAN2#97bis</td>
<td style="text-align: left;">0.0.3</td>
</tr>
<tr>
<td style="text-align: center;">2017-06</td>
<td style="text-align: left;">RAN2 NR AH#2</td>
<td style="text-align: left;">R2-1706608</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">To capture agreements from RAN2#98</td>
<td style="text-align: left;">0.0.4</td>
</tr>
<tr>
<td style="text-align: center;">2017-06</td>
<td style="text-align: left;">RAN2 NR AH#2</td>
<td style="text-align: left;">R2-1707471</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Endorsement of v0.0.4 (including minor
updates)</td>
<td style="text-align: left;">0.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-08</td>
<td style="text-align: left;">RAN2#99</td>
<td style="text-align: left;">R2-1707510</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">To capture agreements from RAN2 NR
AH#2</td>
<td style="text-align: left;">0.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-08</td>
<td style="text-align: left;">RAN2#99</td>
<td style="text-align: left;">R2-1709946</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">To capture agreements from RAN2#99</td>
<td style="text-align: left;">0.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-09</td>
<td style="text-align: left;">RAN#77</td>
<td style="text-align: left;">RP-171733</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">To be presented to RAN for
information</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-11</td>
<td style="text-align: left;">RAN2#100</td>
<td style="text-align: left;">R2-1712698</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">To capture agreements from
RAN2#99bis</td>
<td style="text-align: left;">1.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-12</td>
<td style="text-align: left;">RAN2#100</td>
<td style="text-align: left;">R2-1714253</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">To capture agreements from RAN2#100</td>
<td style="text-align: left;">1.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-12</td>
<td style="text-align: left;">RP-78</td>
<td style="text-align: left;">RP-172419</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">To be presented to RAN for approval</td>
<td style="text-align: left;">2.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-12</td>
<td style="text-align: left;">RP-78</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Upgraded to Rel-15</td>
<td style="text-align: left;">15.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-03</td>
<td style="text-align: left;">RP-79</td>
<td style="text-align: left;">RP-180440</td>
<td style="text-align: center;">0039</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">General corrections on TS 38.321</td>
<td style="text-align: left;">15.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-03</td>
<td style="text-align: left;">RP-79</td>
<td style="text-align: left;">RP-180440</td>
<td style="text-align: center;">0041</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of MAC CEs for NR MIMO</td>
<td style="text-align: left;">15.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-06</td>
<td style="text-align: left;">RP-80</td>
<td style="text-align: left;">RP-181216</td>
<td style="text-align: center;">0057</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-80</td>
<td style="text-align: left;">RP-181216</td>
<td style="text-align: center;">0103</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Addition of the
beamFailureRecoveryTimer</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-80</td>
<td style="text-align: left;">RP-181214</td>
<td style="text-align: center;">0115</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to SR triggering to
accommodate the configured grant</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-80</td>
<td style="text-align: left;">RP-181215</td>
<td style="text-align: center;">0145</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on the timers in MAC</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-80</td>
<td style="text-align: left;">RP-181215</td>
<td style="text-align: center;">0148</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Alternative 1 for Cross Carrier
Indication for Semi-Persistent SRS MAC CE</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-80</td>
<td style="text-align: left;">RP-181215</td>
<td style="text-align: center;">0153</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Flush HARQ buffer upon skipping a UL
transmission</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-80</td>
<td style="text-align: left;">RP-181215</td>
<td style="text-align: center;">0166</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Addition of Prioritized Random
Access</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-80</td>
<td style="text-align: left;">RP-181216</td>
<td style="text-align: center;">0185</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Introduction of PDCP duplication</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-80</td>
<td style="text-align: left;">RP-181216</td>
<td style="text-align: center;">0186</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">MAC CE adaptation for NR for TS
38.321</td>
<td style="text-align: left;">15.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-09</td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181941</td>
<td style="text-align: center;">0058</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on starting of
drx-HARQ-RTT-TimerDL</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181939</td>
<td style="text-align: center;">0094</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction of Configured Grant
formula</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0100</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Introduction of DRX ambiguous
period</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0139</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on timing requirement of
SCell deactivation timer</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0141</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on PUSCH resource handling
for Semi-Persistent CSI reporting</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0184</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR to 38.321 on the allocation of
preambles for group B</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0189</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">PRACH Preamble Selection for Msg1 based
SI Request</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0190</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">PRACH Resource Selection for RA
Initiated by PDCCH Order</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181942</td>
<td style="text-align: center;">0193</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0200</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on BWP inactivity timer
configuration</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0203</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on Ci bitmap length
determination in the Activation/Deactivation MAC CE</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0206</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Addition of NOTE to clarify meaning of
available UL-SCH resource</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181939</td>
<td style="text-align: center;">0214</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to RO selection
procedure</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0215</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on Semi-Persistent CSI Reporting and
SRS for DRX</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0234</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to CCCH LCID</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0242</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to SP CSI reporting on PUCCH
Activation and Deactivation MAC CE</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0243</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to TCI State Indication for
UE-specific PDCCH MAC CE</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0245</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on MAC RAR</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181939</td>
<td style="text-align: center;">0252</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for LCP restriction for
duplication and non-duplication</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181939</td>
<td style="text-align: center;">0254</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on BWP Inactivity timer</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181939</td>
<td style="text-align: center;">0255</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to BWP operations</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0259</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on BSR transmisison with insufficient
grant</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0262</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on Configured Grants and
SPS</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0272</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on RA parameter description in TS
38.321</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0275</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to acknowledgement for SPS
deactivation</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0276</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to handling of retransmission
with a different TBS in DL HARQ</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181980</td>
<td style="text-align: center;">0279</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to BWP handling upon SCell
deactivation</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0280</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to MAC handling during
different measurement gaps</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181939</td>
<td style="text-align: center;">0283</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">PDCCH for BFR termination</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181939</td>
<td style="text-align: center;">0285</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CSI reporting in DRX</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0290</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Introduction of MCS-C-RNTI</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181941</td>
<td style="text-align: center;">0297</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on the duration of timers
in MAC</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181941</td>
<td style="text-align: center;">0300</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on support of Type 2
PH</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0302</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">PRACH Occasion Selection for Msg1 based
SI Request</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0304</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to RA Resource Selection
Procedure</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181941</td>
<td style="text-align: center;">0306</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on BWP operation
procedure</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181941</td>
<td style="text-align: center;">0326</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on padding BSR</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181941</td>
<td style="text-align: center;">0328</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on SR cancellation</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181941</td>
<td style="text-align: center;">0329</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on BWP with ongoing RA procedure -
Option 1</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0331</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on BWP inactivity timer stopping due
to RA</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181941</td>
<td style="text-align: center;">0342</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for Random Access Back
off</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181941</td>
<td style="text-align: center;">0356</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">RSRP measurements for Random Access</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181938</td>
<td style="text-align: center;">0357</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Reset of BFD</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181942</td>
<td style="text-align: center;">0368</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on first active BWP switching upon
RRC (re)configuration</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181941</td>
<td style="text-align: center;">0371</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on Long Truncated BSR</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0376</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on SR with PUSCH resource
handling of Semi-Persistent CSI reporting</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181940</td>
<td style="text-align: center;">0378</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">BWP operation for BFR RA</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-81</td>
<td style="text-align: left;">RP-181942</td>
<td style="text-align: center;">0402</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Changes for MAC CEs to Support the
Extended Maximum Number of TCI States</td>
<td style="text-align: left;">15.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-12</td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0303</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Msg3 handling for switching from CBRA to
CFRA</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0354</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on PHR timing for
configured grant</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182652</td>
<td style="text-align: center;">0399</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Preamble power ramping</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182651</td>
<td style="text-align: center;">0406</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">bwp-InactivityTimer when PDCCH
indicating BWP switching is received</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182666</td>
<td style="text-align: center;">0409</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">RRC triggered BWP switching while RACH
is ongoing</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0411</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0413</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">RA Preamble Selection Procedure</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0421</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for Msg3 grant overlapping
with another UL grant</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182649</td>
<td style="text-align: center;">0423</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the scaling between CSI-RS
and SSB for BFR</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182654</td>
<td style="text-align: center;">0432</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on CFRA BFR termination</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0445</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on PHR references</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182653</td>
<td style="text-align: center;">0452</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction of BWP switching when SUL is
configured</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0459</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on BSR triggered SR</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182656</td>
<td style="text-align: center;">0471</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for Reconfiguration of CFRA
during ongoing RA</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182656</td>
<td style="text-align: center;">0475</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Introduction of Data Inactivity timer in
MAC</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0486</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to RA prioritization</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182653</td>
<td style="text-align: center;">0488</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to BFR procedure</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0505</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Handling of overlapped configured grant
and UL grant received in RAR</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0523</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Allow padding when UL grant size is
larger than 8 bytes</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0535</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on LCH-to-cell
restriction</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0547</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on BWP ID in MAC CE</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0551</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections for alignments in RACH
resource selection</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0553</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the RO selection for PDCCH
order triggered RA</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182665</td>
<td style="text-align: center;">0564</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to SR triggering</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182655</td>
<td style="text-align: center;">0575</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Handling of Msg3 size allocated by RAR
mismatch during CBRA procedure</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182658</td>
<td style="text-align: center;">0582</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification to value table for
recommended bit rate MAC CE</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182656</td>
<td style="text-align: center;">0587</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification for CCCH1</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182666</td>
<td style="text-align: center;">0593</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to PHR procedures in
dual-connectivity</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182664</td>
<td style="text-align: center;">0594</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on DL SPS configuration</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-82</td>
<td style="text-align: left;">RP-182664</td>
<td style="text-align: center;">0595</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Enabling to configure TCI-state for
CORESET#0 by MAC CE</td>
<td style="text-align: left;">15.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td style="text-align: left;">RP-83</td>
<td style="text-align: left;">RP-190540</td>
<td style="text-align: center;">0603</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections</td>
<td style="text-align: left;">15.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-83</td>
<td style="text-align: left;">RP-190540</td>
<td style="text-align: center;">0630</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on PH omitting of dynamic
power sharing incapable UE</td>
<td style="text-align: left;">15.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-83</td>
<td style="text-align: left;">RP-190540</td>
<td style="text-align: center;">0634</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on RA-RNTI calculation</td>
<td style="text-align: left;">15.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-83</td>
<td style="text-align: left;">RP-190545</td>
<td style="text-align: center;">0638</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification for random access on
SUL</td>
<td style="text-align: left;">15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td style="text-align: left;">RP-84</td>
<td style="text-align: left;">RP-191379</td>
<td style="text-align: center;">0639</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to PUCCH spatial relation
Activation/Deactivation MAC CE</td>
<td style="text-align: left;">15.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-84</td>
<td style="text-align: left;">RP-191375</td>
<td style="text-align: center;">0642</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on NR PHR for late drop</td>
<td style="text-align: left;">15.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-84</td>
<td style="text-align: left;">RP-191376</td>
<td style="text-align: center;">0646</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections</td>
<td style="text-align: left;">15.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-84</td>
<td style="text-align: left;">RP-191375</td>
<td style="text-align: center;">0648</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on PH value type
determination</td>
<td style="text-align: left;">15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td style="text-align: left;">RP-85</td>
<td style="text-align: left;">RP-192190</td>
<td style="text-align: center;">0650</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections</td>
<td style="text-align: left;">15.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-85</td>
<td style="text-align: left;">RP-192192</td>
<td style="text-align: center;">0661</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to semi-persistant CSI report
in DRX</td>
<td style="text-align: left;">15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td style="text-align: left;">RP-86</td>
<td style="text-align: left;">RP-192935</td>
<td style="text-align: center;">0672</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on CSI reporting in
C-DRX</td>
<td style="text-align: left;">15.8.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-86</td>
<td style="text-align: left;">RP-192937</td>
<td style="text-align: center;">0680</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on PRACH procedure with SRS
switching</td>
<td style="text-align: left;">15.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200335</td>
<td style="text-align: center;">0675</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">PRACH prioritization procedure for MPS
and MCS</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200349</td>
<td style="text-align: center;">0677</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of Integrated Access and
Backhaul for NR</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200348</td>
<td style="text-align: center;">0685</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of dormant BWP operation
and Async CA</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200347</td>
<td style="text-align: center;">0687</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction NR mobility
enhancement</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200359</td>
<td style="text-align: center;">0688</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Recommended Bit Rate/Query for FLUS and
MTSI</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200339</td>
<td style="text-align: center;">0691</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of eMIMO for NR</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200342</td>
<td style="text-align: center;">0692</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of 2-step RACH in
38.321</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200341</td>
<td style="text-align: center;">0694</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of NR-U in 38.321</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200343</td>
<td style="text-align: center;">0695</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of NR eURLLC</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200357</td>
<td style="text-align: center;">0696</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on autonomous RACH
retransmission for SRS switching</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200352</td>
<td style="text-align: center;">0698</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of NR IIOT</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200344</td>
<td style="text-align: center;">0699</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of Rel-16 NR UE power
saving in 38.321</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200346</td>
<td style="text-align: center;">0701</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of 5G V2X with NR
Sidelink</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200358</td>
<td style="text-align: center;">0703</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of a new MAC subheader for
MAC CEs</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-87</td>
<td style="text-align: left;">RP-200345</td>
<td style="text-align: center;">0704</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of NR positioning on MAC
spec</td>
<td style="text-align: left;">16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-07</td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201191</td>
<td style="text-align: center;">0705</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to PRACH prioritization
procedure for MPS and MCS</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201179</td>
<td style="text-align: center;">0708</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">IAB MAC - rapporteur corrections and
clarifications</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201170</td>
<td style="text-align: center;">0711</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections on eMIMO</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201181</td>
<td style="text-align: center;">0712</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for NR IIOT in 38.321</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201172</td>
<td style="text-align: center;">0714</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Updates to MAC spec for 2-step RACH</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201190</td>
<td style="text-align: center;">0716</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">P bit for Single Entry PHR</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201174</td>
<td style="text-align: center;">0719</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">MAC CR for Rel-16 UE power saving</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201172</td>
<td style="text-align: center;">0726</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections of NR operating with shared
spectrum channel access in 38.321</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201176</td>
<td style="text-align: center;">0730</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to 5G V2X with NR
Sidelink</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201188</td>
<td style="text-align: center;">0734</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to MAC spec for eURLLC</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201159</td>
<td style="text-align: center;">0739</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Clarification on obtaining of PH
values</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201178</td>
<td style="text-align: center;">0743</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on dormant BWP
operation</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201177</td>
<td style="text-align: center;">0744</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">CR on 38.321 for NR mobility
enhancement</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201198</td>
<td style="text-align: center;">0746</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">C</td>
<td style="text-align: center;">Introduction of secondary DRX group CR
38.321</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201191</td>
<td style="text-align: center;">0752</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">38321 CR Clarification on eLCID</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201166</td>
<td style="text-align: center;">0756</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR to 38321 on RACH Prioritization for
MPS and MCS</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-88</td>
<td style="text-align: left;">RP-201175</td>
<td style="text-align: center;">0758</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR for MAC in R16 positioning</td>
<td style="text-align: left;">16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201932</td>
<td style="text-align: center;">0769</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201927</td>
<td style="text-align: center;">0773</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to 5G V2X with NR
Sidelink</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201963</td>
<td style="text-align: center;">0774</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the calculation of HARQ
Process ID for SPS</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201963</td>
<td style="text-align: center;">0775</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the term of
configuredGrantConfigList</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201920</td>
<td style="text-align: center;">0784</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to description of Candidate
RS ID in BFR MAC CE</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201929</td>
<td style="text-align: center;">0794</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on prioritization between DCP
and RAR to C-RNTI for CFRA BFR – Option 2</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201963</td>
<td style="text-align: center;">0802</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Modifications for LCH and PHY
Prioritization Scenarios</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201938</td>
<td style="text-align: center;">0804</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Clarification on HARQ process ID
determination for SPS</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201924</td>
<td style="text-align: center;">0809</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">IAB MAC - miscellaneous corrections and
clarifications</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201920</td>
<td style="text-align: center;">0824</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the BFR cancellation</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201920</td>
<td style="text-align: center;">0837</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">BFR Cancellation regarding MAC
reset</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201927</td>
<td style="text-align: center;">0854</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to SL-BSR truncation</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201927</td>
<td style="text-align: center;">0858</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on resource
(re)selection</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201963</td>
<td style="text-align: center;">0876</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections for IIOT
MAC</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201920</td>
<td style="text-align: center;">0878</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on AP and SP SRS MAC-CE</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201927</td>
<td style="text-align: center;">0881</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections for CSI reporting‎</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201921</td>
<td style="text-align: center;">0882</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections for NR operating with shared
spectrum channel access</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201925</td>
<td style="text-align: center;">0883</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of MPE reporting</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201922</td>
<td style="text-align: center;">0884</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on dormant SCell</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201932</td>
<td style="text-align: center;">0886</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to secondary DRX</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201927</td>
<td style="text-align: center;">0887</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to Prioritization for 5G V2X
with NR Sidelink</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201963</td>
<td style="text-align: center;">0888</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous Corrections for intra-UE
prioritization</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201927</td>
<td style="text-align: center;">0889</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the calculation of CG
occasion</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;">RP-201920</td>
<td style="text-align: center;">0890</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to SUL field in SRS Spatial
Relation Indication MAC CE</td>
<td style="text-align: left;">16.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-89</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Various editorial corrections by the
rapporteur</td>
<td style="text-align: left;">16.2.1</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202767</td>
<td style="text-align: center;">0732</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Alignment of SR clause</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202776</td>
<td style="text-align: center;">0902</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">MAC CR for specification redundance
between MAC and PHY</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202771</td>
<td style="text-align: center;">0907</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to parameter list for beam
failure recovery procedure</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202769</td>
<td style="text-align: center;">0920</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to 5G V2X with NR
Sidelink</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202773</td>
<td style="text-align: center;">0927</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on resource overlapping with
grants addressed to TC-RNTI</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202773</td>
<td style="text-align: center;">0928</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on the condition of a
de-prioritized grant</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202695</td>
<td style="text-align: center;">0936</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous correction on MPE
reporting to 38.321</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202772</td>
<td style="text-align: center;">0938</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on Tdelta</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202789</td>
<td style="text-align: center;">0942</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Clarification on configured grant
(re-)initialization</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202771</td>
<td style="text-align: center;">0947</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">38.321 correction on Enhanced PUCCH
Spatial Relation Activation/Deactivation MAC CE</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202770</td>
<td style="text-align: center;">0956</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Timing of direct SCell activation upon
RRC configuration</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202773</td>
<td style="text-align: center;">0957</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for SPS HARQ process ID
calculation</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202772</td>
<td style="text-align: center;">0962</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Pre-emptive BSR handling at MAC
Reset</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202767</td>
<td style="text-align: center;">0966</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">MAC corrections for NR operating in
shared spectrum channel access</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202789</td>
<td style="text-align: center;">0969</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Clarification of timer value zero
interpretation in MAC</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202775</td>
<td style="text-align: center;">0970</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on SP posSRS (de-)activation
MAC CE</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202769</td>
<td style="text-align: center;">0974</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the SL process
handling</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202769</td>
<td style="text-align: center;">0977</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the MAC reset</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202771</td>
<td style="text-align: center;">0982</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on DELTA_PREAMBLE and
parameters for 2-step RA</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202772</td>
<td style="text-align: center;">0984</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the condition check in
Pre-emptive BSR procedure</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202777</td>
<td style="text-align: center;">0987</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on DRX with bundle
transmission of configured uplink grant</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202771</td>
<td style="text-align: center;">0994</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for CC list operation for TCI
state update MAC CE</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202773</td>
<td style="text-align: center;">0997</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Configured Grant related MAC CR for
IIoT</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202773</td>
<td style="text-align: center;">0998</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for Priority of Uplink
Grant</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202771</td>
<td style="text-align: center;">0999</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on BFR MAC CE Generation and
Build after Triggering of BFR</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-90</td>
<td style="text-align: left;">RP-202769</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous Corrections to 5G V2X with
NR Sidelink</td>
<td style="text-align: left;">16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210689</td>
<td style="text-align: center;">1001</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on mode2 operation</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210702</td>
<td style="text-align: center;">1004</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Miscellaneous corrections</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210691</td>
<td style="text-align: center;">1017</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on the description of
Pre-emptive BSR MAC CE</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210691</td>
<td style="text-align: center;">1026</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for Uplink Grant Received in
RAR and Addressed to Temporary C-RNTI</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210691</td>
<td style="text-align: center;">1030</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Introduction of the Configuration for
SpCell BFR Enhancement</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210691</td>
<td style="text-align: center;">1034</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on PUCCH group for enhanced
PUCCH Spatial Relation</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210689</td>
<td style="text-align: center;">1037</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on available UL-SCH
resource</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210691</td>
<td style="text-align: center;">1043</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on configuredGrantTimer
handling on the deprioritized configured grant</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210703</td>
<td style="text-align: center;">1051</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to MAC reset</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210703</td>
<td style="text-align: center;">1053</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on CSI reporting when CSI
masking is setup</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210693</td>
<td style="text-align: center;">1057</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to 38.321 on MPE P-MPR
Report</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210702</td>
<td style="text-align: center;">1058</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Activation of CG and DRX inactivity
timer</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210689</td>
<td style="text-align: center;">1061</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous MAC corrections</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-91</td>
<td style="text-align: left;">RP-210695</td>
<td style="text-align: center;">1062</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to PUSCH skipping with UCI
without LCH-based prioritization</td>
<td style="text-align: left;">16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211470</td>
<td style="text-align: center;">1065</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on SL configured grant</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211472</td>
<td style="text-align: center;">1066</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on which uplink grants
participate to the intra-UE prioritization procedure</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211472</td>
<td style="text-align: center;">1070</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on MAC handling of uplink
grants within a bundle</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211474</td>
<td style="text-align: center;">1072</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on SP Positioning SRS
Activation and Deactivation MAC CE</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211470</td>
<td style="text-align: center;">1074</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on mode 2 UE performing
re-evaluation check</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211475</td>
<td style="text-align: center;">1075</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on BSR/PHR content
handling</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211470</td>
<td style="text-align: center;">1095</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on MCS selection</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211470</td>
<td style="text-align: center;">1096</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous MAC corrections</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211470</td>
<td style="text-align: center;">1102</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on SR procedur for sidelink
BSR</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211470</td>
<td style="text-align: center;">1106</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Handling of the retransmission TB
without an associated SL process</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211471</td>
<td style="text-align: center;">1112</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to 38.321 on msga-TransMax
selection for 2-step RACH</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211475</td>
<td style="text-align: center;">1115</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on prioritization of
retransmission over initial transmission for HARQ PID selection in
NR-U</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211473</td>
<td style="text-align: center;">1117</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR on LCP of the source MAC entity</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-92</td>
<td style="text-align: left;">RP-211472</td>
<td style="text-align: center;">1118</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">CR for not transmitting only padding and
padding BSR with eLCID</td>
<td style="text-align: left;">16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212442</td>
<td style="text-align: center;">1098</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on UL skipping with
lch-basedPrioritization</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212444</td>
<td style="text-align: center;">1122</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on R16 uplink skipping
procedure</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212441</td>
<td style="text-align: center;">1123</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on the dynamic sidelink
grants</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212441</td>
<td style="text-align: center;">1125</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correct on priority of MAC PDU for
SL-SCH</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212441</td>
<td style="text-align: center;">1126</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correct on random selection</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212441</td>
<td style="text-align: center;">1127</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on condition of setting the
resource reservation interval for mode 2</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212443</td>
<td style="text-align: center;">1129</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on starting of
RetransmissionTimerDL</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212439</td>
<td style="text-align: center;">1134</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on E-UTRA MAC entity in
PHR</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212441</td>
<td style="text-align: center;">1139</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on MCS selection when UE
performing TX resource (re-)selection check</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212441</td>
<td style="text-align: center;">1140</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on SR procedure for SL-CSI
reporting</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212442</td>
<td style="text-align: center;">1141</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification of PUCCH resource in
LCH-based Prioritization</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212442</td>
<td style="text-align: center;">1145</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to 38.321 on priority
handling of the UL grant addressed to TC-RNTI</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-93</td>
<td style="text-align: left;">RP-212441</td>
<td style="text-align: center;">1154</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections for SR configuration for
SL</td>
<td style="text-align: left;">16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td style="text-align: left;">RP-94</td>
<td style="text-align: left;">RP-213342</td>
<td style="text-align: center;">1158</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on resource reselection
behaviour</td>
<td style="text-align: left;">16.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-94</td>
<td style="text-align: left;">RP-213343</td>
<td style="text-align: center;">1160</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to LCP for truncated SCell
BFR MAC CE</td>
<td style="text-align: left;">16.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-94</td>
<td style="text-align: left;">RP-213342</td>
<td style="text-align: center;">1168</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscelleneous CR on 38.321 (Rapporteur
CR)</td>
<td style="text-align: left;">16.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-94</td>
<td style="text-align: left;">RP-213342</td>
<td style="text-align: center;">1169</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to prioritization for NR
sidelink communication</td>
<td style="text-align: left;">16.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-94</td>
<td style="text-align: left;">RP-213344</td>
<td style="text-align: center;">1179</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on posSRS in MAC spec</td>
<td style="text-align: left;">16.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-94</td>
<td style="text-align: left;">RP-213343</td>
<td style="text-align: center;">1180</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on Duplication MAC CE</td>
<td style="text-align: left;">16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220473</td>
<td style="text-align: center;">1187</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on UL/SL prioritization</td>
<td style="text-align: left;">16.8.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220473</td>
<td style="text-align: center;">1189</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on the Unexpected SL-BSR
Trigger for SL-CSI MAC CE</td>
<td style="text-align: left;">16.8.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220473</td>
<td style="text-align: center;">1193</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the PDB derivation from
LCH priority</td>
<td style="text-align: left;">16.8.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220473</td>
<td style="text-align: center;">1202</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on SL HARQ feedback
indicator</td>
<td style="text-align: left;">16.8.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220473</td>
<td style="text-align: center;">1207</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction of RV indication</td>
<td style="text-align: left;">16.8.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220472</td>
<td style="text-align: center;">1209</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on the initial state of
elements controlled by MAC CE and non-numerical K1 value</td>
<td style="text-align: left;">16.8.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220473</td>
<td style="text-align: center;">1218</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on NACK reporting on PUCCH
for NR SL</td>
<td style="text-align: left;">16.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220486</td>
<td style="text-align: center;">1171</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">CR to 38.321 introducing Integrated
Access and Backhaul for NR Rel-17</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220484</td>
<td style="text-align: center;">1184</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of NR MBS</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220480</td>
<td style="text-align: center;">1186</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of RedCap in TS 38.321</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220490</td>
<td style="text-align: center;">1190</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of RAN Slicing</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220500</td>
<td style="text-align: center;">1191</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of FR2 UL gap for
Rel-17</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220491</td>
<td style="text-align: center;">1194</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of Sidelink Relay</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220479</td>
<td style="text-align: center;">1197</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of R17 positioningEnh for
MAC spec</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220487</td>
<td style="text-align: center;">1198</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of Small Data Transmission
for MAC spec</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220478</td>
<td style="text-align: center;">1199</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">TS 38.321 CR for NR coverage
enhancements</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220481</td>
<td style="text-align: center;">1200</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of enhanced IIoT&amp;URLLC
support for NR</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220474</td>
<td style="text-align: center;">1204</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of feMIMO</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220476</td>
<td style="text-align: center;">1206</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">CR of TS 38.321 for Sidelink
enhancement</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220485</td>
<td style="text-align: center;">1210</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of eDCCA</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220487</td>
<td style="text-align: center;">1214</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of common RACH partitioning
aspects in MAC</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220482</td>
<td style="text-align: center;">1215</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of Release-17 support for
Non-Terrestrial Networks (NTN)</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-95</td>
<td style="text-align: left;">RP-220475</td>
<td style="text-align: center;">1219</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Introduction of Extending NR operation
to 71GHz</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221716</td>
<td style="text-align: center;">1238</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous CR on TS 38.321 for
RedCap</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221729</td>
<td style="text-align: center;">1243</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to MAC spec for Small Data
Transmission</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221722</td>
<td style="text-align: center;">1261</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">MAC Corrections on feMIMO</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221727</td>
<td style="text-align: center;">1262</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Introduction of PEI-RNTI</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221763</td>
<td style="text-align: center;">1264</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to MAC regarding deactivated
SCG</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221718</td>
<td style="text-align: center;">1266</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">CR to 38.321 on Integrated Access and
Backhaul for NR Rel-17</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221716</td>
<td style="text-align: center;">1273</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">MAC Corrections for RACH
partitioning</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221732</td>
<td style="text-align: center;">1277</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for sidelink relay in
MAC</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221721</td>
<td style="text-align: center;">1279</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on FR2 UL gap</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221726</td>
<td style="text-align: center;">1281</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for Enhanced NR IIoT and
URLLC in 38.321</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221713</td>
<td style="text-align: center;">1283</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Clarification on Duplication MAC CE</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221719</td>
<td style="text-align: center;">1292</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on MAC specification for RAN
slicing</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221712</td>
<td style="text-align: center;">1293</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Corrections on the MAC filtering for
SL-SRB0/SL-SRB1</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221736</td>
<td style="text-align: center;">1295</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Priority of MAC CEs</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221717</td>
<td style="text-align: center;">1296</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to Release-17 NR
Non-Terrestrial Networks (NTN)</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221724</td>
<td style="text-align: center;">1297</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections for NR coverage
enhancements</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221725</td>
<td style="text-align: center;">1298</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on MAC spec for posEnh</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221712</td>
<td style="text-align: center;">1299</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Corrections on SL BSR</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221718</td>
<td style="text-align: center;">1300</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections to 38.321 on
Integrated Access and Backhaul for NR Rel-17</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221754</td>
<td style="text-align: center;">1301</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on MBS</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221728</td>
<td style="text-align: center;">1302</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections for TRS-based SCell
activation</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-96</td>
<td style="text-align: left;">RP-221739</td>
<td style="text-align: center;">1303</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on user plane aspects for SL
enhancement</td>
<td style="text-align: left;">17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222524</td>
<td style="text-align: center;">1318</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections for NR
Sidelink Relay (rapporteur CR)</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222522</td>
<td style="text-align: center;">1322</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to MAC regarding deactivated
SCG</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222523</td>
<td style="text-align: center;">1327</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections to 38.321 on
Integrated Access and Backhaul for NR Rel-17</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222518</td>
<td style="text-align: center;">1331</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Correction on the SL LCP restriction for
sl-HARQ-FeedbackEnabled</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222518</td>
<td style="text-align: center;">1335</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Clarification on the Buffer Size field
in the Sidelink BSR formats</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222525</td>
<td style="text-align: center;">1336</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous CR on TS 38.321 for
RedCap</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222524</td>
<td style="text-align: center;">1344</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Change to the MAC spec for R17
Positioning enhancement</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222525</td>
<td style="text-align: center;">1357</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Change to MAC spec for Small Data
Transmission</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222524</td>
<td style="text-align: center;">1378</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to Release-17
Non-Terrestrial Networks (NTN) for TS 38.321</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222523</td>
<td style="text-align: center;">1389</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous MAC Corrections on
feMIMO</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222602</td>
<td style="text-align: center;">1398</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on RO Selection with RA
Partitioning</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222524</td>
<td style="text-align: center;">1400</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">38.321 corrections for SL
enhancement</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222522</td>
<td style="text-align: center;">1401</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">MAC corrections on MUSIM</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222525</td>
<td style="text-align: center;">1402</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on TS 38.321 for RAN
Slicing</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222523</td>
<td style="text-align: center;">1403</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">38.321 corrections for MBS</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222523</td>
<td style="text-align: center;">1404</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction for Simultaneous Transmission
of SR and UL-SCH</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222524</td>
<td style="text-align: center;">1405</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on active time</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222524</td>
<td style="text-align: center;">1406</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on user plane aspects</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-97</td>
<td style="text-align: left;">RP-222526</td>
<td style="text-align: center;">1407</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">B</td>
<td style="text-align: center;">Start drx-HARQ-RTT-TimerUL after last
repetition [ulHARQ_RTT_Timer]</td>
<td style="text-align: left;">17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223411</td>
<td style="text-align: center;">1399</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on FR2 UL gap</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223411</td>
<td style="text-align: center;">1408</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to MAC spec for positioning
enhancement</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223410</td>
<td style="text-align: center;">1418</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous MAC Corrections on
feMIMO</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223412</td>
<td style="text-align: center;">1428</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on SL DRX Offset
Calculation</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223409</td>
<td style="text-align: center;">1439</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on BWP handling for
deactivated SCG and the timing requirement for SCG activation</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223412</td>
<td style="text-align: center;">1445</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">38.321 corrections for SL
enhancement</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223411</td>
<td style="text-align: center;">1446</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to Release-17
Non-Terrestrial Networks (NTN) for TS 38.321</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223413</td>
<td style="text-align: center;">1451</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to MAC spec for Small Data
Transmission</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223406</td>
<td style="text-align: center;">1454</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections for MBS</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223411</td>
<td style="text-align: center;">1461</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous CR on TS 38.321 for
RedCap</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223410</td>
<td style="text-align: center;">1474</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections to 38.321 on
Integrated Access and Backhaul for NR Rel-17</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223413</td>
<td style="text-align: center;">1501</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to RACH partitioning
features</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223406</td>
<td style="text-align: center;">1505</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">R16 MAC corrections</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223412</td>
<td style="text-align: center;">1506</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">R17 MAC corrections</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-98</td>
<td style="text-align: left;">RP-223412</td>
<td style="text-align: center;">1507</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on cast type setting for
discovery message</td>
<td style="text-align: left;">17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230688</td>
<td style="text-align: center;">1508</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to INACTIVE posSRS
transmission</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230688</td>
<td style="text-align: center;">1512</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to PosMG
Activation/Deactivation Request</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230688</td>
<td style="text-align: center;">1521</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">MAC Corrections on SDT</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230688</td>
<td style="text-align: center;">1535</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on uplink TA maintenance for
positioning</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230689</td>
<td style="text-align: center;">1537</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on the Serving Cell
configured with two BFD-RS sets</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230689</td>
<td style="text-align: center;">1538</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on desired IAB-MT PSD
range</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230689</td>
<td style="text-align: center;">1539</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to add the missing eIAB MAC
CEs</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230689</td>
<td style="text-align: center;">1540</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to 38.321 on Integrated
Access and Backhaul for NR Rel-17 concerning DL TX power adjustment
range extension</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230688</td>
<td style="text-align: center;">1541</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections for RA-SDT and CG-SDT</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230689</td>
<td style="text-align: center;">1544</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on implicit BFD-RS
change</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230692</td>
<td style="text-align: center;">1553</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on discovery message
filtering</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230690</td>
<td style="text-align: center;">1560</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to NR NTN for 38.321</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230688</td>
<td style="text-align: center;">1569</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to RA-SDT</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230692</td>
<td style="text-align: center;">1571</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">R17 MAC corrections</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230694</td>
<td style="text-align: center;">1572</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">Miscellaneous editorial changes for
38.321</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-99</td>
<td style="text-align: left;">RP-230690</td>
<td style="text-align: center;">1573</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">MBS MAC Corrections</td>
<td style="text-align: left;">17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231415</td>
<td style="text-align: center;">1576</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on RA Resource Selection
During CG-SDT</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231414</td>
<td style="text-align: center;">1579</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on cfr-ConfigMulticast and
Multicast DRX</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231415</td>
<td style="text-align: center;">1580</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to CG-SDT LCH
restriction</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231414</td>
<td style="text-align: center;">1583</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on SPS Initialization and
Handling of Unknown, Unforeseen and Erroneous Protocol Data for MBS</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231415</td>
<td style="text-align: center;">1584</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on SDT using NCD-SSB for
RedCap</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231418</td>
<td style="text-align: center;">1588</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on UL operation upon
validity timer expiry</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231413</td>
<td style="text-align: center;">1589</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to MAC reset for eIAB</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231418</td>
<td style="text-align: center;">1597</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections to NR NTN for 38.321</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231416</td>
<td style="text-align: center;">1605</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Corrections on MAC reset regarding
configured sidelink grant</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231416</td>
<td style="text-align: center;">1611</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the usage of default CBR
values for NR sidelink</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231412</td>
<td style="text-align: center;">1613</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">RA partition selection for Msg1 based SI
request</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231412</td>
<td style="text-align: center;">1614</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to MAC spec for Positoning
Enhancements</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231416</td>
<td style="text-align: center;">1615</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on 38.321 for SL
enhancements</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231415</td>
<td style="text-align: center;">1616</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on SDT with sparate initial
BWP</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231416</td>
<td style="text-align: center;">1618</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections on TS 38.321
for NR sidelink</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231415</td>
<td style="text-align: center;">1621</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on unknown, unforeseen and
erroneous protocol data during SDT</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231413</td>
<td style="text-align: center;">1622</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on respective roles of MAC
and RRC in configuring various IAB parameters</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231413</td>
<td style="text-align: center;">1624</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on which CSI-RS resources
in IAB restricted beam MAC CEs</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231416</td>
<td style="text-align: center;">1627</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">MAC PDU filtering</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231413</td>
<td style="text-align: center;">1629</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on Enhanced BFR MAC CE</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-100</td>
<td style="text-align: left;">RP-231414</td>
<td style="text-align: center;">1630</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the start condition of
drx-HARQ-RTT-TimerDL</td>
<td style="text-align: left;">17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td style="text-align: left;">RP-101</td>
<td style="text-align: left;">RP-232568</td>
<td style="text-align: center;">1625</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on number of restricted beams
for eIAB</td>
<td style="text-align: left;">17.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-101</td>
<td style="text-align: left;">RP-232667</td>
<td style="text-align: center;">1642</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on NR Sidelink MAC</td>
<td style="text-align: left;">17.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-101</td>
<td style="text-align: left;">RP-232568</td>
<td style="text-align: center;">1643</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the use of the term ID in
IAB MAC CEs</td>
<td style="text-align: left;">17.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-101</td>
<td style="text-align: left;">RP-232568</td>
<td style="text-align: center;">1644</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Clarification on use of SRI in IAB MAC
CEs</td>
<td style="text-align: left;">17.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-101</td>
<td style="text-align: left;">RP-232667</td>
<td style="text-align: center;">1653</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">DRX Command MAC CE for MBS</td>
<td style="text-align: left;">17.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-101</td>
<td style="text-align: left;">RP-232570</td>
<td style="text-align: center;">1656</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on SDT Triggering
Conditions</td>
<td style="text-align: left;">17.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-101</td>
<td style="text-align: left;">RP-232667</td>
<td style="text-align: center;">1659</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections on TS 38.321
for NR sidelink</td>
<td style="text-align: left;">17.6.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-101</td>
<td style="text-align: left;">RP-232566</td>
<td style="text-align: center;">1660</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Correction on NR Sidelink MAC</td>
<td style="text-align: left;">17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td style="text-align: left;">RP-102</td>
<td style="text-align: left;">RP-233885</td>
<td style="text-align: center;">1669</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Corrections to random access
cancellation criteria for sidelink BSR and CSI reporting</td>
<td style="text-align: left;">17.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-102</td>
<td style="text-align: left;">RP-233886</td>
<td style="text-align: center;">1673</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Correction on CSI reporting for DCP
function</td>
<td style="text-align: left;">17.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-102</td>
<td style="text-align: left;">RP-233885</td>
<td style="text-align: center;">1676</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Correction on MAC layer for
sidelink</td>
<td style="text-align: left;">17.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-102</td>
<td style="text-align: left;">RP-233890</td>
<td style="text-align: center;">1686</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the condition of HARQ
feedback generation and the condition of stopping
drx-RetransmissionTimerDL</td>
<td style="text-align: left;">17.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-102</td>
<td style="text-align: left;">RP-233890</td>
<td style="text-align: center;">1688</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on SRI in IAB MAC CEs</td>
<td style="text-align: left;">17.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-102</td>
<td style="text-align: left;">RP-233888</td>
<td style="text-align: center;">1691</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Rel-17 MAC corrections</td>
<td style="text-align: left;">17.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-102</td>
<td style="text-align: left;">RP-233965</td>
<td style="text-align: center;">1692</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to 38.321 on Koffset handling
during MAC reset</td>
<td style="text-align: left;">17.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-102</td>
<td style="text-align: left;">RP-233890</td>
<td style="text-align: center;">1714</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on the list of MAC CEs for
which there are requirements upon reception</td>
<td style="text-align: left;">17.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-102</td>
<td style="text-align: left;">RP-233888</td>
<td style="text-align: center;">1718</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on NR SL MAC</td>
<td style="text-align: left;">17.7.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-102</td>
<td style="text-align: left;">RP-233888</td>
<td style="text-align: center;">1720</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">MAC correction for Sidelink CSI
reporting</td>
<td style="text-align: left;">17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2024-03</td>
<td style="text-align: left;">RP-103</td>
<td style="text-align: left;">RP-240655</td>
<td style="text-align: center;">1731</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction in TS 38.321 to support
Simultaneous PUSCH and PUCCH transmissions of same priority on different
inter-band cells [SimultaneousPUSCH-PUCCH]</td>
<td style="text-align: left;">17.8.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-103</td>
<td style="text-align: left;">RP-240651</td>
<td style="text-align: center;">1747</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">CR on termination of on-going RACH due
to pending SR for SL-BSR</td>
<td style="text-align: left;">17.8.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-103</td>
<td style="text-align: left;">RP-240657</td>
<td style="text-align: center;">1750</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on CG-SDT initial
transmission</td>
<td style="text-align: left;">17.8.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-103</td>
<td style="text-align: left;">RP-240656</td>
<td style="text-align: center;">1760</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections on TS
38.321</td>
<td style="text-align: left;">17.8.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-103</td>
<td style="text-align: left;">RP-240651</td>
<td style="text-align: center;">1783</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">A</td>
<td style="text-align: center;">Miscellaneous corrections on TS
38.321</td>
<td style="text-align: left;">17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2024-06</td>
<td style="text-align: left;">RP-104</td>
<td style="text-align: left;">RP-241554</td>
<td style="text-align: center;">1811</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Miscellaneous corrections</td>
<td style="text-align: left;">17.9.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-104</td>
<td style="text-align: left;">RP-241553</td>
<td style="text-align: center;">1820</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on multicast DRX to support
NTN</td>
<td style="text-align: left;">17.9.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-104</td>
<td style="text-align: left;">RP-241551</td>
<td style="text-align: center;">1827</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction on RACH resource set
availability check</td>
<td style="text-align: left;">17.9.0</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: left;">RP-104</td>
<td style="text-align: left;">RP-241554</td>
<td style="text-align: center;">1837</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">Correction to MAC on cast type</td>
<td style="text-align: left;">17.9.0</td>
</tr>
</tbody>
</table>
</body>
</html>
