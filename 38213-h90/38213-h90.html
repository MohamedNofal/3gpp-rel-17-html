<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>38213-h90</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
  type="text/javascript"></script>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#contents" id="toc-contents"><br />
Contents</a></li>
<li><a href="#foreword" id="toc-foreword"><br />
Foreword</a></li>
<li><a href="#scope" id="toc-scope"><br />
1 Scope</a></li>
<li><a href="#references" id="toc-references">2 References</a></li>
<li><a href="#definitions-symbols-and-abbreviations"
id="toc-definitions-symbols-and-abbreviations">3 Definitions, symbols
and abbreviations</a>
<ul>
<li><a href="#definitions" id="toc-definitions">3.1 Definitions</a></li>
<li><a href="#symbols" id="toc-symbols">3.2 Symbols</a></li>
<li><a href="#abbreviations" id="toc-abbreviations">3.3
Abbreviations</a></li>
</ul></li>
<li><a href="#synchronization-procedures"
id="toc-synchronization-procedures"><br />
4 Synchronization procedures</a>
<ul>
<li><a href="#cell-search" id="toc-cell-search">4.1 Cell search</a></li>
<li><a href="#transmission-timing-adjustments"
id="toc-transmission-timing-adjustments">4.2 Transmission timing
adjustments</a></li>
<li><a href="#timing-for-secondary-cell-activation-deactivation"
id="toc-timing-for-secondary-cell-activation-deactivation">4.3 Timing
for secondary cell activation / deactivation</a></li>
</ul></li>
<li><a href="#radio-link-monitoring" id="toc-radio-link-monitoring">5
Radio link monitoring</a></li>
<li><a href="#link-recovery-procedures"
id="toc-link-recovery-procedures">6 Link recovery procedures</a></li>
<li><a href="#uplink-power-control" id="toc-uplink-power-control">7
Uplink Power control</a>
<ul>
<li><a href="#physical-uplink-shared-channel"
id="toc-physical-uplink-shared-channel">7.1 Physical uplink shared
channel</a>
<ul>
<li><a href="#ue-behaviour" id="toc-ue-behaviour">7.1.1 UE
behaviour</a></li>
</ul></li>
<li><a href="#physical-uplink-control-channel"
id="toc-physical-uplink-control-channel">7.2 Physical uplink control
channel</a>
<ul>
<li><a href="#ue-behaviour-1" id="toc-ue-behaviour-1">7.2.1 UE
behaviour</a></li>
</ul></li>
<li><a href="#sounding-reference-signals"
id="toc-sounding-reference-signals">7.3 Sounding reference signals</a>
<ul>
<li><a href="#ue-behaviour-2" id="toc-ue-behaviour-2">7.3.1 UE
behaviour</a></li>
</ul></li>
<li><a href="#physical-random-access-channel"
id="toc-physical-random-access-channel">7.4 Physical random access
channel</a></li>
<li><a href="#prioritizations-for-transmission-power-reductions"
id="toc-prioritizations-for-transmission-power-reductions">7.5
Prioritizations for transmission power reductions</a></li>
<li><a href="#dual-connectivity" id="toc-dual-connectivity">7.6 Dual
connectivity</a>
<ul>
<li><a href="#en-dc" id="toc-en-dc">7.6.1 EN-DC</a></li>
<li><a href="#a-ne-dc" id="toc-a-ne-dc">7.6.1A NE-DC</a></li>
<li><a href="#nr-dc" id="toc-nr-dc">7.6.2 NR-DC</a></li>
</ul></li>
<li><a href="#power-headroom-report" id="toc-power-headroom-report">7.7
Power headroom report</a>
<ul>
<li><a href="#type-1-ph-report" id="toc-type-1-ph-report">7.7.1 Type 1
PH report</a></li>
<li><a href="#type-2-ph-report" id="toc-type-2-ph-report">7.7.2 Type 2
PH report</a></li>
<li><a href="#type-3-ph-report" id="toc-type-3-ph-report">7.7.3 Type 3
PH report</a></li>
</ul></li>
</ul></li>
<li><a href="#random-access-procedure"
id="toc-random-access-procedure">8 Random access procedure</a>
<ul>
<li><a href="#random-access-preamble"
id="toc-random-access-preamble">8.1 Random access preamble</a></li>
<li><a href="#a-pusch-for-type-2-random-access-procedure"
id="toc-a-pusch-for-type-2-random-access-procedure">8.1A PUSCH for
Type-2 random access procedure</a></li>
<li><a href="#random-access-response---type-1-random-access-procedure"
id="toc-random-access-response---type-1-random-access-procedure">8.2
Random access response - Type-1 random access procedure</a></li>
<li><a href="#a-random-access-response---type-2-random-access-procedure"
id="toc-a-random-access-response---type-2-random-access-procedure">8.2A
Random access response - Type-2 random access procedure</a></li>
<li><a href="#pusch-scheduled-by-rar-ul-grant"
id="toc-pusch-scheduled-by-rar-ul-grant">8.3 PUSCH scheduled by RAR UL
grant</a></li>
<li><a href="#pdsch-with-ue-contention-resolution-identity"
id="toc-pdsch-with-ue-contention-resolution-identity">8.4 PDSCH with UE
contention resolution identity</a></li>
</ul></li>
<li><a href="#ue-procedure-for-reporting-control-information"
id="toc-ue-procedure-for-reporting-control-information">9 UE procedure
for reporting control information</a>
<ul>
<li><a href="#a-pucch-cell-switching"
id="toc-a-pucch-cell-switching">9.A PUCCH cell switching</a></li>
<li><a href="#harq-ack-codebook-determination"
id="toc-harq-ack-codebook-determination">9.1 HARQ-ACK codebook
determination</a>
<ul>
<li><a href="#cbg-based-harq-ack-codebook-determination"
id="toc-cbg-based-harq-ack-codebook-determination">9.1.1 CBG-based
HARQ-ACK codebook determination</a></li>
<li><a href="#type-1-harq-ack-codebook-determination"
id="toc-type-1-harq-ack-codebook-determination">9.1.2 Type-1 HARQ-ACK
codebook determination</a>
<ul>
<li><a
href="#type-1-harq-ack-codebook-in-physical-uplink-control-channel"
id="toc-type-1-harq-ack-codebook-in-physical-uplink-control-channel">9.1.2.1
Type-1 HARQ-ACK codebook in physical uplink control channel</a></li>
<li><a
href="#type-1-harq-ack-codebook-in-physical-uplink-shared-channel"
id="toc-type-1-harq-ack-codebook-in-physical-uplink-shared-channel">9.1.2.2
Type-1 HARQ-ACK codebook in physical uplink shared channel</a></li>
</ul></li>
<li><a href="#type-2-harq-ack-codebook-determination"
id="toc-type-2-harq-ack-codebook-determination">9.1.3 Type-2 HARQ-ACK
codebook determination </a>
<ul>
<li><a
href="#type-2-harq-ack-codebook-in-physical-uplink-control-channel"
id="toc-type-2-harq-ack-codebook-in-physical-uplink-control-channel">9.1.3.1
Type-2 HARQ-ACK codebook in physical uplink control channel</a></li>
<li><a
href="#type-2-harq-ack-codebook-in-physical-uplink-shared-channel"
id="toc-type-2-harq-ack-codebook-in-physical-uplink-shared-channel">9.1.3.2
Type-2 HARQ-ACK codebook in physical uplink shared channel</a></li>
<li><a
href="#type-2-harq-ack-codebook-grouping-and-harq-ack-retransmission"
id="toc-type-2-harq-ack-codebook-grouping-and-harq-ack-retransmission">9.1.3.3
Type-2 HARQ-ACK codebook grouping and HARQ-ACK retransmission</a></li>
</ul></li>
<li><a href="#type-3-harq-ack-codebook-determination"
id="toc-type-3-harq-ack-codebook-determination">9.1.4 Type-3 HARQ-ACK
codebook determination </a></li>
<li><a href="#harq-ack-codebook-retransmission"
id="toc-harq-ack-codebook-retransmission">9.1.5 HARQ-ACK codebook
retransmission </a></li>
</ul></li>
<li><a href="#uci-reporting-in-physical-uplink-control-channel"
id="toc-uci-reporting-in-physical-uplink-control-channel">9.2 UCI
reporting in physical uplink control channel</a>
<ul>
<li><a href="#pucch-resource-sets" id="toc-pucch-resource-sets">9.2.1
PUCCH Resource Sets</a></li>
<li><a href="#pucch-formats-for-uci-transmission"
id="toc-pucch-formats-for-uci-transmission">9.2.2 PUCCH Formats for UCI
transmission</a></li>
<li><a href="#ue-procedure-for-reporting-harq-ack"
id="toc-ue-procedure-for-reporting-harq-ack">9.2.3 UE procedure for
reporting HARQ-ACK</a></li>
<li><a href="#ue-procedure-for-reporting-sr"
id="toc-ue-procedure-for-reporting-sr">9.2.4 UE procedure for reporting
SR</a></li>
<li><a href="#ue-procedure-for-reporting-multiple-uci-types"
id="toc-ue-procedure-for-reporting-multiple-uci-types">9.2.5 UE
procedure for reporting multiple UCI types</a>
<ul>
<li><a
href="#ue-procedure-for-prioritization-between-sl-harq-ack-information-in-a-pucch-and-dl-harq-ack-or-sr-or-csi-in-a-pucch"
id="toc-ue-procedure-for-prioritization-between-sl-harq-ack-information-in-a-pucch-and-dl-harq-ack-or-sr-or-csi-in-a-pucch">9.2.5.0
UE procedure for prioritization between SL HARQ-ACK information in a
PUCCH and DL HARQ-ACK or SR or CSI in a PUCCH</a></li>
<li><a
href="#ue-procedure-for-multiplexing-harq-ack-or-csi-and-sr-in-a-pucch"
id="toc-ue-procedure-for-multiplexing-harq-ack-or-csi-and-sr-in-a-pucch">9.2.5.1
UE procedure for multiplexing HARQ-ACK or CSI and SR in a PUCCH</a></li>
<li><a href="#ue-procedure-for-multiplexing-harq-acksrcsi-in-a-pucch"
id="toc-ue-procedure-for-multiplexing-harq-acksrcsi-in-a-pucch">9.2.5.2
UE procedure for multiplexing HARQ-ACK/SR/CSI in a PUCCH</a></li>
<li><a href="#ue-procedure-for-reporting-uci-of-different-priorities"
id="toc-ue-procedure-for-reporting-uci-of-different-priorities">9.2.5.3
UE procedure for reporting UCI of different priorities</a></li>
<li><a href="#ue-procedure-for-deferring-harq-ack-for-sps-pdsch"
id="toc-ue-procedure-for-deferring-harq-ack-for-sps-pdsch">9.2.5.4 UE
procedure for deferring HARQ-ACK for SPS PDSCH </a></li>
</ul></li>
<li><a href="#pucch-repetition-procedure"
id="toc-pucch-repetition-procedure">9.2.6 PUCCH repetition
procedure</a></li>
</ul></li>
<li><a href="#uci-reporting-in-physical-uplink-shared-channel"
id="toc-uci-reporting-in-physical-uplink-shared-channel">9.3 UCI
reporting in physical uplink shared channel</a></li>
</ul></li>
<li><a href="#ue-procedure-for-receiving-control-information"
id="toc-ue-procedure-for-receiving-control-information">10 UE procedure
for receiving control information</a>
<ul>
<li><a
href="#ue-procedure-for-determining-physical-downlink-control-channel-assignment"
id="toc-ue-procedure-for-determining-physical-downlink-control-channel-assignment">10.1
UE procedure for determining physical downlink control channel
assignment </a>
<ul>
<li><a
href="#self-carrier-and-cross-carrier-scheduling-on-the-primary-cell"
id="toc-self-carrier-and-cross-carrier-scheduling-on-the-primary-cell">10.1.1
Self-carrier and cross-carrier scheduling on the primary cell</a></li>
</ul></li>
<li><a href="#pdcch-validation-for-dl-sps-and-ul-grant-type-2"
id="toc-pdcch-validation-for-dl-sps-and-ul-grant-type-2">10.2 PDCCH
validation for DL SPS and UL grant Type 2</a></li>
<li><a href="#a-pdcch-validation-for-sl-configured-grant-type-2"
id="toc-a-pdcch-validation-for-sl-configured-grant-type-2">10.2A PDCCH
validation for SL configured grant Type 2</a></li>
<li><a
href="#pdcch-monitoring-indication-and-dormancynon-dormancy-behaviour-for-scells"
id="toc-pdcch-monitoring-indication-and-dormancynon-dormancy-behaviour-for-scells">10.3
PDCCH monitoring indication and dormancy/non-dormancy behaviour for
SCells</a></li>
<li><a
href="#search-space-set-group-switching-and-skipping-of-pdcch-monitoring"
id="toc-search-space-set-group-switching-and-skipping-of-pdcch-monitoring">10.4
Search space set group switching and skipping of PDCCH
monitoring</a></li>
<li><a href="#a-pdcch-monitoring-for-early-indication-of-paging"
id="toc-a-pdcch-monitoring-for-early-indication-of-paging">10.4A PDCCH
monitoring for early indication of paging</a></li>
<li><a href="#b-indication-of-trs-resources"
id="toc-b-indication-of-trs-resources">10.4B Indication of TRS
resources</a></li>
<li><a href="#harq-ack-information-for-pusch-transmissions"
id="toc-harq-ack-information-for-pusch-transmissions">10.5 HARQ-ACK
information for PUSCH transmissions</a></li>
</ul></li>
<li><a href="#ue-group-common-signalling"
id="toc-ue-group-common-signalling">11 UE-group common signalling </a>
<ul>
<li><a href="#slot-configuration" id="toc-slot-configuration">11.1 Slot
configuration</a>
<ul>
<li><a href="#ue-procedure-for-determining-slot-format"
id="toc-ue-procedure-for-determining-slot-format">11.1.1 UE procedure
for determining slot format</a></li>
</ul></li>
<li><a href="#interrupted-transmission-indication"
id="toc-interrupted-transmission-indication">11.2 Interrupted
transmission indication </a></li>
<li><a href="#a-cancellation-indication"
id="toc-a-cancellation-indication">11.2A Cancellation
indication</a></li>
<li><a href="#group-tpc-commands-for-pucchpusch"
id="toc-group-tpc-commands-for-pucchpusch">11.3 Group TPC commands for
PUCCH/PUSCH</a></li>
<li><a href="#srs-switching" id="toc-srs-switching">11.4 SRS
switching</a></li>
</ul></li>
<li><a href="#bandwidth-part-operation"
id="toc-bandwidth-part-operation">12 Bandwidth part operation </a></li>
<li><a href="#ue-procedure-for-monitoring-type0-pdcch-css-sets"
id="toc-ue-procedure-for-monitoring-type0-pdcch-css-sets">13 UE
procedure for monitoring Type0-PDCCH CSS sets</a></li>
<li><a href="#integrated-access-backhaul-operation"
id="toc-integrated-access-backhaul-operation">14 Integrated
access-backhaul operation </a></li>
<li><a href="#dual-active-protocol-stack-based-handover"
id="toc-dual-active-protocol-stack-based-handover">15 Dual active
protocol stack based handover</a></li>
<li><a href="#ue-procedures-for-sidelink"
id="toc-ue-procedures-for-sidelink">16 UE procedures for sidelink</a>
<ul>
<li><a href="#synchronization-procedures-1"
id="toc-synchronization-procedures-1">16.1 Synchronization
procedures</a></li>
<li><a href="#power-control" id="toc-power-control">16.2 Power
control</a>
<ul>
<li><a href="#s-sspsbch-blocks" id="toc-s-sspsbch-blocks">16.2.0
S-SS/PSBCH blocks</a></li>
<li><a href="#pssch" id="toc-pssch">16.2.1 PSSCH</a></li>
<li><a href="#pscch" id="toc-pscch">16.2.2 PSCCH</a></li>
<li><a href="#psfch" id="toc-psfch">16.2.3 PSFCH</a></li>
<li><a href="#prioritization-of-transmissionsreceptions"
id="toc-prioritization-of-transmissionsreceptions">16.2.4 Prioritization
of transmissions/receptions</a>
<ul>
<li><a href="#simultaneous-nr-and-e-utra-transmissionreception"
id="toc-simultaneous-nr-and-e-utra-transmissionreception">16.2.4.1
Simultaneous NR and E-UTRA transmission/reception</a></li>
<li><a href="#simultaneous-psfch-transmissionreception"
id="toc-simultaneous-psfch-transmissionreception">16.2.4.2 Simultaneous
PSFCH transmission/reception</a></li>
<li><a href="#simultaneous-sl-and-ul-transmissionsreceptions"
id="toc-simultaneous-sl-and-ul-transmissionsreceptions">16.2.4.3
Simultaneous SL and UL transmissions/receptions</a>
<ul>
<li><a
href="#prioritizations-for-sidelink-and-uplink-transmissionsreceptions"
id="toc-prioritizations-for-sidelink-and-uplink-transmissionsreceptions">16.2.4.3.1
Prioritizations for sidelink and uplink transmissions/receptions
</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a
href="#ue-procedure-for-reporting-and-obtaining-control-information-in-psfch"
id="toc-ue-procedure-for-reporting-and-obtaining-control-information-in-psfch">16.3
UE procedure for reporting and obtaining control information in PSFCH
</a>
<ul>
<li><a
href="#ue-procedure-for-transmitting-psfch-with-control-information"
id="toc-ue-procedure-for-transmitting-psfch-with-control-information">16.3.0
UE procedure for transmitting PSFCH with control information</a></li>
<li><a href="#ue-procedure-for-receiving-psfch-with-control-information"
id="toc-ue-procedure-for-receiving-psfch-with-control-information">16.3.1
UE procedure for receiving PSFCH with control information </a></li>
</ul></li>
<li><a href="#ue-procedure-for-transmitting-pscch"
id="toc-ue-procedure-for-transmitting-pscch">16.4 UE procedure for
transmitting PSCCH </a></li>
<li><a href="#ue-procedure-for-reporting-harq-ack-on-uplink"
id="toc-ue-procedure-for-reporting-harq-ack-on-uplink">16.5 UE procedure
for reporting HARQ-ACK on uplink</a>
<ul>
<li><a href="#type-1-harq-ack-codebook-determination-1"
id="toc-type-1-harq-ack-codebook-determination-1">16.5.1 Type-1 HARQ-ACK
codebook determination </a>
<ul>
<li><a
href="#type-1-harq-ack-codebook-in-physical-uplink-control-channel-1"
id="toc-type-1-harq-ack-codebook-in-physical-uplink-control-channel-1">16.5.1.1
Type-1 HARQ-ACK codebook in physical uplink control channel</a></li>
<li><a
href="#type-1-harq-ack-codebook-in-physical-uplink-shared-channel-1"
id="toc-type-1-harq-ack-codebook-in-physical-uplink-shared-channel-1">16.5.1.2
Type-1 HARQ-ACK codebook in physical uplink shared channel</a></li>
</ul></li>
<li><a href="#type-2-harq-ack-codebook-determination-1"
id="toc-type-2-harq-ack-codebook-determination-1">16.5.2 Type-2 HARQ-ACK
codebook determination </a>
<ul>
<li><a
href="#type-2-harq-ack-codebook-in-physical-uplink-control-channel-1"
id="toc-type-2-harq-ack-codebook-in-physical-uplink-control-channel-1">16.5.2.1
Type-2 HARQ-ACK codebook in physical uplink control channel</a></li>
<li><a
href="#type-2-harq-ack-codebook-in-physical-uplink-shared-channel-1"
id="toc-type-2-harq-ack-codebook-in-physical-uplink-shared-channel-1">16.5.2.2
Type-2 HARQ-ACK codebook in physical uplink shared channel</a></li>
</ul></li>
</ul></li>
<li><a href="#ue-procedure-for-lte-sidelink-transmission"
id="toc-ue-procedure-for-lte-sidelink-transmission">16.6 UE procedure
for LTE sidelink transmission</a></li>
<li><a href="#operation-for-in-device-coexistence"
id="toc-operation-for-in-device-coexistence">16.7 Operation for
in-device coexistence</a></li>
</ul></li>
<li><a href="#ue-with-reduced-capabilities"
id="toc-ue-with-reduced-capabilities">17 UE with reduced
capabilities</a>
<ul>
<li><a href="#redcap-ue-procedures" id="toc-redcap-ue-procedures">17.1
RedCap UE procedures</a></li>
<li><a href="#half-duplex-ue-in-paired-spectrum"
id="toc-half-duplex-ue-in-paired-spectrum">17.2 Half-Duplex UE in paired
spectrum</a></li>
</ul></li>
<li><a href="#multicast-broadcast-services"
id="toc-multicast-broadcast-services">18 Multicast Broadcast
Services</a></li>
<li><a href="#pusch-transmission-in-rrc_inactive-state"
id="toc-pusch-transmission-in-rrc_inactive-state">19 PUSCH transmission
in RRC_INACTIVE state </a>
<ul>
<li><a href="#configured-grant-based-pusch-transmission"
id="toc-configured-grant-based-pusch-transmission">19.1 Configured-grant
based PUSCH transmission</a></li>
<li><a href="#random-access-based-pusch-transmission"
id="toc-random-access-based-pusch-transmission">19.2 Random-access based
PUSCH transmission</a></li>
</ul></li>
</ul>
</nav>
<p>3GPP TS 38.213 V17.9.0 (2024-03)</p>
<p>Technical Specification</p>
<p>3rd Generation Partnership Project;</p>
<p>Technical Specification Group Radio Access Network;</p>
<p>NR;<br />
Physical layer procedures for control</p>
<p>(Release 17)</p>
<p><img src="media/image1.jpeg" style="width:1.325in;height:0.91667in"
alt="5G-logo_175px" /> <img src="media/image2.png"
style="width:1.775in;height:1.04167in" alt="3GPP-logo_web" /></p>
<p>The present document has been developed within the 3rd Generation
Partnership Project (3GPP <sup>TM</sup>) and may be further elaborated
for the purposes of 3GPP..<br />
The present document has not been subject to any approval process by the
3GPP Organizational Partners and shall not be implemented.<br />
This Specification is provided for future development work within 3GPP
only. The Organizational Partners accept no liability for any use of
this Specification.<br />
Specifications and Reports for implementation of the 3GPP <sup>TM</sup>
system should be obtained via the 3GPP Organizational Partners'
Publications Offices.</p>
<blockquote>
<p>Keywords</p>
<p>3GPP, New Radio, Layer 1</p>
<p><em><strong>3GPP</strong></em></p>
<p>Postal address</p>
<p>3GPP support office address</p>
<p>650 Route des Lucioles - Sophia Antipolis</p>
<p>Valbonne - FRANCE</p>
<p>Tel.: +33 4 92 94 42 00 Fax: +33 4 93 65 47 16</p>
<p>Internet</p>
<p>http://www.3gpp.org</p>
</blockquote>
<p><em><strong>Copyright Notification</strong></em></p>
<p>No part may be reproduced except as authorized by written
permission.<br />
The copyright and the foregoing restriction extend to reproduction in
all media.</p>
<p>© 2024, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).</p>
<p>All rights reserved.</p>
<p>UMTS™ is a Trade Mark of ETSI registered for the benefit of its
members</p>
<p>3GPP™ is a Trade Mark of ETSI registered for the benefit of its
Members and of the 3GPP Organizational Partners<br />
LTE™ is a Trade Mark of ETSI registered for the benefit of its Members
and of the 3GPP Organizational Partners</p>
<p>GSM® and the GSM logo are registered and owned by the GSM
Association</p>
<h1 class="TT" id="contents"><br />
Contents</h1>
<p>Foreword <a href="#foreword">6</a></p>
<p>1 Scope <a href="#scope">7</a></p>
<p>2 References <a href="#references">7</a></p>
<p>3 Definitions, symbols and abbreviations <a
href="#definitions-symbols-and-abbreviations">8</a></p>
<p>3.1 Definitions <a href="#definitions">8</a></p>
<p>3.2 Symbols <a href="#symbols">8</a></p>
<p>3.3 Abbreviations <a href="#abbreviations">8</a></p>
<p>4 Synchronization procedures <a
href="#synchronization-procedures">10</a></p>
<p>4.1 Cell search <a href="#cell-search">10</a></p>
<p>4.2 Transmission timing adjustments <a
href="#transmission-timing-adjustments">13</a></p>
<p>4.3 Timing for secondary cell activation / deactivation <a
href="#timing-for-secondary-cell-activation-deactivation">14</a></p>
<p>5 Radio link monitoring <a href="#radio-link-monitoring">15</a></p>
<p>6 Link recovery procedures <a
href="#link-recovery-procedures">16</a></p>
<p>7 Uplink Power control <a href="#uplink-power-control">20</a></p>
<p>7.1 Physical uplink shared channel <a
href="#physical-uplink-shared-channel">21</a></p>
<p>7.1.1 UE behaviour <a href="#ue-behaviour">22</a></p>
<p>7.2 Physical uplink control channel <a
href="#physical-uplink-control-channel">34</a></p>
<p>7.2.1 UE behaviour <a href="#ue-behaviour-1">35</a></p>
<p>7.3 Sounding reference signals <a
href="#sounding-reference-signals">40</a></p>
<p>7.3.1 UE behaviour <a href="#ue-behaviour-2">40</a></p>
<p>7.4 Physical random access channel <a
href="#physical-random-access-channel">43</a></p>
<p>7.5 Prioritizations for transmission power reductions <a
href="#prioritizations-for-transmission-power-reductions">44</a></p>
<p>7.6 Dual connectivity <a href="#dual-connectivity">45</a></p>
<p>7.6.1 EN-DC <a href="#en-dc">45</a></p>
<p>7.6.1A NE-DC <a href="#a-ne-dc">45</a></p>
<p>7.6.2 NR-DC <a href="#nr-dc">46</a></p>
<p>7.7 Power headroom report <a href="#power-headroom-report">48</a></p>
<p>7.7.1 Type 1 PH report <a href="#type-1-ph-report">49</a></p>
<p>7.7.2 Type 2 PH report <a href="#type-2-ph-report">51</a></p>
<p>7.7.3 Type 3 PH report <a href="#type-3-ph-report">51</a></p>
<p>8 Random access procedure <a
href="#random-access-procedure">51</a></p>
<p>8.1 Random access preamble <a
href="#random-access-preamble">52</a></p>
<p>8.1A PUSCH for Type-2 random access procedure <a
href="#a-pusch-for-type-2-random-access-procedure">55</a></p>
<p>8.2 Random access response - Type-1 random access procedure <a
href="#random-access-response---type-1-random-access-procedure">57</a></p>
<p>8.2A Random access response - Type-2 random access procedure <a
href="#a-random-access-response---type-2-random-access-procedure">59</a></p>
<p>8.3 PUSCH scheduled by RAR UL grant <a
href="#pusch-scheduled-by-rar-ul-grant">61</a></p>
<p>8.4 PDSCH with UE contention resolution identity <a
href="#pdsch-with-ue-contention-resolution-identity">62</a></p>
<p>9 UE procedure for reporting control information <a
href="#ue-procedure-for-reporting-control-information">63</a></p>
<p>9.A PUCCH cell switching <a href="#a-pucch-cell-switching">72</a></p>
<p>9.1 HARQ-ACK codebook determination <a
href="#harq-ack-codebook-determination">72</a></p>
<p>9.1.1 CBG-based HARQ-ACK codebook determination <a
href="#cbg-based-harq-ack-codebook-determination">74</a></p>
<p>9.1.2 Type-1 HARQ-ACK codebook determination <a
href="#type-1-harq-ack-codebook-determination">74</a></p>
<p>9.1.2.1 Type-1 HARQ-ACK codebook in physical uplink control channel
<a
href="#type-1-harq-ack-codebook-in-physical-uplink-control-channel">76</a></p>
<p>9.1.2.2 Type-1 HARQ-ACK codebook in physical uplink shared channel <a
href="#type-1-harq-ack-codebook-in-physical-uplink-shared-channel">88</a></p>
<p>9.1.3 Type-2 HARQ-ACK codebook determination <a
href="#type-2-harq-ack-codebook-determination">90</a></p>
<p>9.1.3.1 Type-2 HARQ-ACK codebook in physical uplink control channel
<a
href="#type-2-harq-ack-codebook-in-physical-uplink-control-channel">91</a></p>
<p>9.1.3.2 Type-2 HARQ-ACK codebook in physical uplink shared channel <a
href="#type-2-harq-ack-codebook-in-physical-uplink-shared-channel">100</a></p>
<p>9.1.3.3 Type-2 HARQ-ACK codebook grouping and HARQ-ACK retransmission
<a
href="#type-2-harq-ack-codebook-grouping-and-harq-ack-retransmission">101</a></p>
<p>9.1.4 Type-3 HARQ-ACK codebook determination <a
href="#type-3-harq-ack-codebook-determination">104</a></p>
<p>9.1.5 HARQ-ACK codebook retransmission <a
href="#harq-ack-codebook-retransmission">108</a></p>
<p>9.2 UCI reporting in physical uplink control channel <a
href="#uci-reporting-in-physical-uplink-control-channel">109</a></p>
<p>9.2.1 PUCCH Resource Sets <a href="#pucch-resource-sets">109</a></p>
<p>9.2.2 PUCCH Formats for UCI transmission <a
href="#pucch-formats-for-uci-transmission">113</a></p>
<p>9.2.3 UE procedure for reporting HARQ-ACK <a
href="#ue-procedure-for-reporting-harq-ack">115</a></p>
<p>9.2.4 UE procedure for reporting SR <a
href="#ue-procedure-for-reporting-sr">118</a></p>
<p>9.2.5 UE procedure for reporting multiple UCI types <a
href="#ue-procedure-for-reporting-multiple-uci-types">119</a></p>
<p>9.2.5.0 UE procedure for prioritization between SL HARQ-ACK
information in a PUCCH and DL HARQ-ACK or SR or CSI in a PUCCH <a
href="#ue-procedure-for-prioritization-between-sl-harq-ack-information-in-a-pucch-and-dl-harq-ack-or-sr-or-csi-in-a-pucch">124</a></p>
<p>9.2.5.1 UE procedure for multiplexing HARQ-ACK or CSI and SR in a
PUCCH <a
href="#ue-procedure-for-multiplexing-harq-ack-or-csi-and-sr-in-a-pucch">124</a></p>
<p>9.2.5.2 UE procedure for multiplexing HARQ-ACK/SR/CSI in a PUCCH <a
href="#ue-procedure-for-multiplexing-harq-acksrcsi-in-a-pucch">126</a></p>
<p>9.2.5.3 UE procedure for reporting UCI of different priorities <a
href="#ue-procedure-for-reporting-uci-of-different-priorities">130</a></p>
<p>9.2.5.4 UE procedure for deferring HARQ-ACK for SPS PDSCH <a
href="#ue-procedure-for-deferring-harq-ack-for-sps-pdsch">131</a></p>
<p>9.2.6 PUCCH repetition procedure <a
href="#pucch-repetition-procedure">132</a></p>
<p>9.3 UCI reporting in physical uplink shared channel <a
href="#uci-reporting-in-physical-uplink-shared-channel">135</a></p>
<p>10 UE procedure for receiving control information <a
href="#ue-procedure-for-receiving-control-information">139</a></p>
<p>10.1 UE procedure for determining physical downlink control channel
assignment <a
href="#ue-procedure-for-determining-physical-downlink-control-channel-assignment">152</a></p>
<p>10.1.1 Self-carrier and cross-carrier scheduling on the primary cell
<a
href="#self-carrier-and-cross-carrier-scheduling-on-the-primary-cell">172</a></p>
<p>10.2 PDCCH validation for DL SPS and UL grant Type 2 <a
href="#pdcch-validation-for-dl-sps-and-ul-grant-type-2">173</a></p>
<p>10.2A PDCCH validation for SL configured grant Type 2 <a
href="#a-pdcch-validation-for-sl-configured-grant-type-2">175</a></p>
<p>10.3 PDCCH monitoring indication and dormancy/non-dormancy behaviour
for SCells <a
href="#pdcch-monitoring-indication-and-dormancynon-dormancy-behaviour-for-scells">175</a></p>
<p>10.4 Search space set group switching and skipping of PDCCH
monitoring <a
href="#search-space-set-group-switching-and-skipping-of-pdcch-monitoring">178</a></p>
<p>10.4A PDCCH monitoring for early indication of paging <a
href="#a-pdcch-monitoring-for-early-indication-of-paging">183</a></p>
<p>10.4B Indication of TRS resources <a
href="#b-indication-of-trs-resources">183</a></p>
<p>10.5 HARQ-ACK information for PUSCH transmissions <a
href="#harq-ack-information-for-pusch-transmissions">184</a></p>
<p>11 UE-group common signalling <a
href="#ue-group-common-signalling">184</a></p>
<p>11.1 Slot configuration <a href="#slot-configuration">185</a></p>
<p>11.1.1 UE procedure for determining slot format <a
href="#ue-procedure-for-determining-slot-format">190</a></p>
<p>11.2 Interrupted transmission indication <a
href="#interrupted-transmission-indication">197</a></p>
<p>11.2A Cancellation indication <a
href="#a-cancellation-indication">198</a></p>
<p>11.3 Group TPC commands for PUCCH/PUSCH <a
href="#group-tpc-commands-for-pucchpusch">199</a></p>
<p>11.4 SRS switching <a href="#srs-switching">200</a></p>
<p>12 Bandwidth part operation <a
href="#bandwidth-part-operation">200</a></p>
<p>13 UE procedure for monitoring Type0-PDCCH CSS sets <a
href="#ue-procedure-for-monitoring-type0-pdcch-css-sets">203</a></p>
<p>14 Integrated access-backhaul operation <a
href="#integrated-access-backhaul-operation">216</a></p>
<p>15 Dual active protocol stack based handover <a
href="#dual-active-protocol-stack-based-handover">223</a></p>
<p>16 UE procedures for sidelink <a
href="#ue-procedures-for-sidelink">224</a></p>
<p>16.1 Synchronization procedures <a
href="#synchronization-procedures-1">225</a></p>
<p>16.2 Power control <a href="#power-control">227</a></p>
<p>16.2.0 S-SS/PSBCH blocks <a href="#s-sspsbch-blocks">227</a></p>
<p>16.2.1 PSSCH <a href="#pssch">227</a></p>
<p>16.2.2 PSCCH <a href="#pscch">228</a></p>
<p>16.2.3 PSFCH <a href="#psfch">229</a></p>
<p>16.2.4 Prioritization of transmissions/receptions <a
href="#prioritization-of-transmissionsreceptions">230</a></p>
<p>16.2.4.1 Simultaneous NR and E-UTRA transmission/reception <a
href="#simultaneous-nr-and-e-utra-transmissionreception">230</a></p>
<p>16.2.4.2 Simultaneous PSFCH transmission/reception <a
href="#simultaneous-psfch-transmissionreception">231</a></p>
<p>16.2.4.3 Simultaneous SL and UL transmissions/receptions <a
href="#simultaneous-sl-and-ul-transmissionsreceptions">232</a></p>
<p>16.2.4.3.1 Prioritizations for sidelink and uplink
transmissions/receptions <a
href="#prioritizations-for-sidelink-and-uplink-transmissionsreceptions">232</a></p>
<p>16.3 UE procedure for reporting and obtaining control information in
PSFCH <a
href="#ue-procedure-for-reporting-and-obtaining-control-information-in-psfch">233</a></p>
<p>16.3.0 UE procedure for transmitting PSFCH with control information
<a
href="#ue-procedure-for-transmitting-psfch-with-control-information">233</a></p>
<p>16.3.1 UE procedure for receiving PSFCH with control information <a
href="#ue-procedure-for-receiving-psfch-with-control-information">236</a></p>
<p>16.4 UE procedure for transmitting PSCCH <a
href="#ue-procedure-for-transmitting-pscch">237</a></p>
<p>16.5 UE procedure for reporting HARQ-ACK on uplink <a
href="#ue-procedure-for-reporting-harq-ack-on-uplink">238</a></p>
<p>16.5.1 Type-1 HARQ-ACK codebook determination <a
href="#type-1-harq-ack-codebook-determination-1">240</a></p>
<p>16.5.1.1 Type-1 HARQ-ACK codebook in physical uplink control channel
<a
href="#type-1-harq-ack-codebook-in-physical-uplink-control-channel-1">241</a></p>
<p>16.5.1.2 Type-1 HARQ-ACK codebook in physical uplink shared channel
<a
href="#type-1-harq-ack-codebook-in-physical-uplink-shared-channel-1">242</a></p>
<p>16.5.2 Type-2 HARQ-ACK codebook determination <a
href="#type-2-harq-ack-codebook-determination-1">243</a></p>
<p>16.5.2.1 Type-2 HARQ-ACK codebook in physical uplink control channel
<a
href="#type-2-harq-ack-codebook-in-physical-uplink-control-channel-1">243</a></p>
<p>16.5.2.2 Type-2 HARQ-ACK codebook in physical uplink shared channel
<a
href="#type-2-harq-ack-codebook-in-physical-uplink-shared-channel-1">245</a></p>
<p>16.6 UE procedure for LTE sidelink transmission <a
href="#ue-procedure-for-lte-sidelink-transmission">246</a></p>
<p>16.7 Operation for in-device coexistence <a
href="#operation-for-in-device-coexistence">246</a></p>
<p>17 UE with reduced capabilities <a
href="#ue-with-reduced-capabilities">247</a></p>
<p>17.1 RedCap UE procedures <a href="#redcap-ue-procedures">247</a></p>
<p>17.2 Half-Duplex UE in paired spectrum <a
href="#half-duplex-ue-in-paired-spectrum">248</a></p>
<p>18 Multicast Broadcast Services <a
href="#multicast-broadcast-services">249</a></p>
<p>19 PUSCH transmission in RRC_INACTIVE state <a
href="#pusch-transmission-in-rrc_inactive-state">254</a></p>
<p>19.1 Configured-grant based PUSCH transmission <a
href="#configured-grant-based-pusch-transmission">254</a></p>
<p>19.2 Random-access based PUSCH transmission <a
href="#random-access-based-pusch-transmission">256</a></p>
<p>Annex A: Change history <a href="#annex-a-change-history">257</a></p>
<h1 id="foreword"><br />
Foreword</h1>
<p>This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).</p>
<p>The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:</p>
<p>Version x.y.z</p>
<p>where:</p>
<p>x the first digit:</p>
<p>1 presented to TSG for information;</p>
<p>2 presented to TSG for approval;</p>
<p>3 or greater indicates TSG approved document under change
control.</p>
<p>y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.</p>
<p>z the third digit is incremented when editorial only changes have
been incorporated in the document.</p>
<h1 id="scope"><br />
1 Scope</h1>
<p>The present document specifies and establishes the characteristics of
the physical layer procedures for control operations in 5G-NR.</p>
<h1 id="references">2 References</h1>
<p>The following documents contain provisions which, through reference
in this text, constitute provisions of the present document.</p>
<p>[1] 3GPP TR 21.905: "Vocabulary for 3GPP Specifications"</p>
<p>[2] 3GPP TS 38.201: "NR; Physical Layer – General Description"</p>
<p>[3] 3GPP TS 38.202: "NR; Services provided by the physical layer"</p>
<p>[4] 3GPP TS 38.211: "NR; Physical channels and modulation"</p>
<p>[5] 3GPP TS 38.212: "NR; Multiplexing and channel coding"</p>
<p>[6] 3GPP TS 38.214: "NR; Physical layer procedures for data"</p>
<p>[7] 3GPP TS 38.215: "NR; Physical layer measurements"</p>
<p>[8-1] 3GPP TS 38.101-1: "NR; User Equipment (UE) radio transmission
and reception; Part 1: Range 1 Standalone"</p>
<p>[8-2] 3GPP TS 38.101-2: "NR; User Equipment (UE) radio transmission
and reception; Part 2: Range 2 Standalone"</p>
<p>[8-3] 3GPP TS 38.101-3: "NR; User Equipment (UE) radio transmission
and reception; Part 3: Range 1 and Range 2 Interworking operation with
other radios"</p>
<p>[8-4] 3GPP TS 38.101-4: "NR; User Equipment (UE) radio transmission
and reception; Part 4: Performance requirements"</p>
<p>[9] 3GPP TS 38.104: "NR; Base Station (BS) radio transmission and
reception"</p>
<p>[10] 3GPP TS 38.133: "NR; Requirements for support of radio resource
management"</p>
<p>[11] 3GPP TS 38.321: "NR; Medium Access Control (MAC) protocol
specification"</p>
<p>[12] 3GPP TS 38.331: "NR; Radio Resource Control (RRC); Protocol
specification"</p>
<p>[13] 3GPP TS 36.213: "Evolved Universal Terrestrial Radio Access
(E-UTRA); Physical layer procedures"</p>
<p>[14] 3GPP TS 36.321: "Evolved Universal Terrestrial Radio Access
(E-UTRA); Medium Access Control (MAC) protocol specification"</p>
<p>[15] 3GPP TS 37.213: "Physical layer procedures for shared spectrum
channel access"</p>
<p>[16] 3GPP TS 38.473: "F1 application protocol (F1AP)"</p>
<p>[17] 3GPP TS 38.304: "NR; User Equipment (UE) procedures in Idle mode
and RRC Inactive state"</p>
<p>[18] 3GPP TS 38.306: "NR; User Equipment (UE) radio access
capabilities"</p>
<p>[19] 3GPP TS 38.300: "NR; NR and NG-RAN Overall Description"</p>
<h1 id="definitions-symbols-and-abbreviations">3 Definitions, symbols
and abbreviations</h1>
<h2 id="definitions">3.1 Definitions</h2>
<p>For the purposes of the present document, the terms and definitions
given in [1, TR 21.905] and the following apply. A term defined in the
present document takes precedence over the definition of the same term,
if any, in [1, TR 21.905]. A parameter referenced in <em>italics</em> is
provided by higher layers.</p>
<h2 id="symbols">3.2 Symbols</h2>
<p>For the purposes of the present document, the following symbols
apply:</p>
<h2 id="abbreviations">3.3 Abbreviations</h2>
<p>For the purposes of the present document, the abbreviations given in
TR 21.905 [1] and the following apply. An abbreviation defined in the
present document takes precedence over the definition of the same
abbreviation, if any, in [1, TR 21.905].</p>
<p>BPRE Bits per resource element</p>
<p>BWP Bandwidth part</p>
<p>CB Code block</p>
<p>CBG Code block group</p>
<p>CBR Channel busy ratio</p>
<p>CCE Control channel element</p>
<p>CORESET Control resource set</p>
<p>CP Cyclic prefix</p>
<p>CRC Cyclic redundancy check</p>
<p>C-RNTI Cell RNTI</p>
<p>CS-RNTI Configured scheduling RNTI</p>
<p>CSI Channel state information</p>
<p>CSS Common search space</p>
<p>DAI Downlink assignment index</p>
<p>DAPS Dual active protocol stack</p>
<p>DC Dual connectivity</p>
<p>DCI Downlink control information</p>
<p>DL Downlink</p>
<p>DL-SCH Downlink shared channel</p>
<p>EPRE Energy per resource element</p>
<p>EN-DC E-UTRA NR dual connectivity with MCG using E-UTRA and SCG using
NR</p>
<p>FR1 Frequency range 1</p>
<p>FR2 Frequency range 2</p>
<p>G-CS-RNTI Group configured scheduling RNTI</p>
<p>G-RNTI Group RNTI</p>
<p>GSCN Global synchronization channel number</p>
<p>HARQ-ACK Hybrid automatic repeat request acknowledgement</p>
<p>MBS Multicast broadcast services</p>
<p>MCG Master cell group</p>
<p>MCS Modulation and coding scheme</p>
<p>NDI New Data Indicator</p>
<p>NE-DC E-UTRA NR dual connectivity with MCG using NR and SCG using
E-UTRA</p>
<p>NR-DC NR NR dual connectivity</p>
<p>PBCH Physical broadcast channel</p>
<p>PCell Primary cell</p>
<p>PDCCH Physical downlink control channel</p>
<p>PDSCH Physical downlink shared channel</p>
<p>PO Paging occasion</p>
<p>PRACH Physical random access channel</p>
<p>PRB Physical resource block</p>
<p>PRG Physical resource block group</p>
<p>PSCell Primary secondary cell</p>
<p>PSBCH Physical sidelink broadcast channel</p>
<p>PSCCH Physical sidelink control channel</p>
<p>PSFCH Physical sidelink feedback channel</p>
<p>PSS Primary synchronization signal</p>
<p>PSSCH Physical sidelink shared channel</p>
<p>PUCCH Physical uplink control channel</p>
<p>PUCCH-SCell PUCCH SCell</p>
<p>PUCCH-sSCell PUCCH switching SCell</p>
<p>PUSCH Physical uplink shared channel</p>
<p>QCL Quasi co-location</p>
<p>RB Resource block</p>
<p>RE Resource element</p>
<p>RLM Radio link monitoring</p>
<p>RRM Radio resource management</p>
<p>RS Reference signal</p>
<p>RSRP Reference signal received power</p>
<p>SCG Secondary cell group</p>
<p>SCI Sidelink control information</p>
<p>SCS Subcarrier spacing</p>
<p>SFCI Sidelink feedback control information</p>
<p>SFN System frame number</p>
<p>SL Sidelink</p>
<p>SLIV Start and length indicator value</p>
<p>SPS Semi-persistent scheduling</p>
<p>SR Scheduling request</p>
<p>SRI SRS resource indicator</p>
<p>SRS Sounding reference signal</p>
<p>SSS Secondary synchronization signal</p>
<p>SSSG Search space set group</p>
<p>TA Timing advance</p>
<p>TAG Timing advance group</p>
<p>TB Transport block</p>
<p>TBG Transport block group</p>
<p>TCI Transmission Configuration Indicator</p>
<p>UCI Uplink control information</p>
<p>UE User equipment</p>
<p>UL Uplink</p>
<p>UL-SCH Uplink shared channel</p>
<p>USS UE-specific search space</p>
<h1 id="synchronization-procedures"><br />
4 Synchronization procedures</h1>
<h2 id="cell-search">4.1 Cell search</h2>
<p>Cell search is the procedure for a UE to acquire time and frequency
synchronization with a cell and to detect the physical layer Cell ID of
the cell.</p>
<p>A UE receives the following synchronization signals (SS) in order to
perform cell search: the primary synchronization signal (PSS) and
secondary synchronization signal (SSS) as defined in [4, TS 38.211].</p>
<p>A UE assumes that reception occasions of a physical broadcast channel
(PBCH), PSS, and SSS are in consecutive symbols, as defined in [4, TS
38.211], and form a SS/PBCH block. The UE assumes that SSS, PBCH DM-RS,
and PBCH data have same EPRE. The UE may assume that the ratio of PSS
EPRE to SSS EPRE in a SS/PBCH block is either 0 dB or 3 dB. If the UE
has not been provided dedicated higher layer parameters, the UE may
assume that the ratio of PDCCH DMRS EPRE to SSS EPRE is within -8 dB and
8 dB when the UE monitors PDCCHs for a DCI format 1_0 with CRC scrambled
by SI-RNTI, P-RNTI, or RA-RNTI, or for a DCI format 2_7, or for a DCI
format 4_0.</p>
<p>For a half frame with SS/PBCH blocks, the first symbol indexes for
candidate SS/PBCH blocks are determined according to the SCS of SS/PBCH
blocks as follows, where index 0 corresponds to the first symbol of the
first slot in a half-frame.</p>
<p>- Case A - 15 kHz SCS: the first symbols of the candidate SS/PBCH
blocks have indexes of <span class="math inline">\(\left\{ 2,8 \right\}
+ 14 \cdot n\)</span>.</p>
<p>- For operation without shared spectrum channel access:</p>
<p>- For carrier frequencies smaller than or equal to 3 GHz, <span
class="math inline">\(n = 0,1\)</span>.</p>
<p>- For carrier frequencies within FR1 larger than 3 GHz, <span
class="math inline">\(n = 0,1,2,3\)</span>.</p>
<p>- For operation with shared spectrum channel access, as described in
[15, TS 37.213], <span class="math inline">\(n = 0,\ 1,\ 2,\ 3,\
4\)</span>.</p>
<p>- Case B - 30 kHz SCS: the first symbols of the candidate SS/PBCH
blocks have indexes <span class="math inline">\(\left\{ 4,8,16,20
\right\} + 28 \cdot n\)</span>. For carrier frequencies smaller than or
equal to 3 GHz, <span class="math inline">\(n = 0\)</span>. For carrier
frequencies within FR1 larger than 3 GHz, <span class="math inline">\(n
= 0,1\)</span>.</p>
<p>- Case C - 30 kHz SCS: the first symbols of the candidate SS/PBCH
blocks have indexes <span class="math inline">\(\left\{ 2,8 \right\} +
14 \cdot n\)</span>.</p>
<p>- For operation without shared spectrum channel access</p>
<p>- For paired spectrum operation</p>
<p>- For carrier frequencies smaller than or equal to 3 GHz, <span
class="math inline">\(n = 0,1\)</span>. For carrier frequencies within
FR1 larger than 3 GHz, <span class="math inline">\(n =
0,1,2,3\)</span>.</p>
<p>- For unpaired spectrum operation</p>
<p>- For carrier frequencies smaller than 1.88 GHz, <span
class="math inline">\(n = 0,1\)</span>. For carrier frequencies within
FR1 equal to or larger than 1.88 GHz, <span class="math inline">\(n =
0,1,2,3\)</span>.</p>
<p>- For operation with shared spectrum channel access, <span
class="math inline">\(n = 0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\
9\)</span>.</p>
<p>- Case D - 120 kHz SCS: the first symbols of the candidate SS/PBCH
blocks have indexes <span class="math inline">\(\left\{ 4,8,16,20
\right\} + 28 \cdot n\)</span>. For carrier frequencies within FR2,
<span class="math inline">\(n = 0,\ 1,\ 2,\ 3,\ 5,\ 6,\ 7,\ 8,\ 10,\
11,\ 12,\ 13,\ 15,\ 16,\ 17,\ 18\)</span>.</p>
<p>- Case E - 240 kHz SCS: the first symbols of the candidate SS/PBCH
blocks have indexes <span class="math inline">\(\left\{
8,12,16,20,32,36,40,44 \right\} + 56 \cdot n\)</span>. For carrier
frequencies within FR2-1, <span class="math inline">\(n = 0,\ 1,\ 2,\
3,\ 5,\ 6,\ 7,\ 8\)</span>.</p>
<p>- Case F – 480 kHz SCS: the first symbols of the candidate SS/PBCH
blocks have indexes <span class="math inline">\(\left\{ 2,\ 9 \right\} +
14 \cdot n\)</span>. For carrier frequencies within FR2-2, <span
class="math inline">\(n = 0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9,\ 10,\
11,\ 12,\ 13,\ 14,\ 15,\ 16,\ 17,\ 18,\ 19,\ 20,\ 21,\ 22,\ 23,\ 24,\
25,\ 26,\ 27,\ 28,\ 29,\ 30,\ 31.\)</span></p>
<p>- Case G – 960 kHz SCS: the first symbols of the candidate SS/PBCH
blocks have indexes <span class="math inline">\(\left\{ 2,\ 9 \right\} +
14 \cdot n\)</span>. For carrier frequencies within FR2-2, <span
class="math inline">\(n = 0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9,\ 10,\
11,\ 12,\ 13,\ 14,\ 15,\ 16,\ 17,\ 18,\ 19,\ 20,\ 21,\ 22,\ 23,\ 24,\
25,\ 26,\ 27,\ 28,\ 29,\ 30,\ 31.\)</span></p>
<p>From the above cases, if the SCS of SS/PBCH blocks is not provided by
<em>ssbSubcarrierSpacing</em>, the applicable cases for a cell depend on
a respective frequency band, as provided in [8-1, TS 38.101-1] and [8-2,
TS 38.101-2]. A same case applies for all SS/PBCH blocks on the cell. If
a 30 kHz SS/PBCH block SCS is indicated by
<em>ssbSubcarrierSpacing</em>, Case B applies for frequency bands with
only 15 kHz SS/PBCH block SCS as specified in [8-1, TS 38.101-1], and
the case specified for 30 kHz SS/PBCH block SCS in [8-1, TS 38.101-1]
applies for frequency bands with 30 kHz SS/PBCH block SCS or both 15 kHz
and 30 kHz SS/PBCH block SCS as specified in [8-1, TS 38.101-1]. For a
UE configured to operate with carrier aggregation over a set of cells in
a frequency band of FR2 or with frequency-contiguous carrier aggregation
over a set of cells in a frequency band of FR1, if the UE is provided
SCS values by <em>ssbSubcarrierSpacing</em> for receptions of SS/PBCH
blocks on any cells from the set of cells, the UE expects the SCS values
to be same.</p>
<p>The candidate SS/PBCH blocks in a half frame are indexed in an
ascending order in time from 0 to <span
class="math inline">\({\overline{L}}_{\max} - 1\)</span>, where <span
class="math inline">\({\overline{L}}_{\max}\)</span> is determined
according to SS/PBCH block patterns for Cases A through G. <span
class="math inline">\(L_{\max}\)</span> is a maximum number of SS/PBCH
block indexes in a cell, and the maximum number of transmitted SS/PBCH
blocks within a half frame is <span
class="math inline">\(L_{\max}\)</span>.</p>
<p>- For operation without shared spectrum channel access in FR1 and
FR2, and for operation with shared spectrum channel access in FR2-2,
<span class="math inline">\(L_{\max} =
{\overline{L}}_{\max}\)</span></p>
<p>- For operation with shared spectrum channel access in FR1, <span
class="math inline">\(L_{\max} = 8\)</span> for <span
class="math inline">\({\overline{L}}_{\max} = 10\)</span> and 15 kHz SCS
of SS/PBCH blocks and for <span
class="math inline">\({\overline{L}}_{\max} = 20\)</span> and 30 kHz SCS
of SS/PBCH blocks</p>
<p>For <span class="math inline">\({\overline{L}}_{\max} = 4\)</span>, a
UE determines the 2 LSB bits of a candidate SS/PBCH block index per half
frame from a one-to-one mapping with an index of the DM-RS sequence
transmitted in the PBCH as described in [4, TS 38.211].</p>
<p>For <span class="math inline">\({\overline{L}}_{\max} &gt;
4\)</span>, a UE determines the 3 LSB bits of a candidate SS/PBCH block
index per half frame from a one-to-one mapping with an index of the
DM-RS sequence transmitted in the PBCH as described in [4, TS
38.211]</p>
<p>- for <span class="math inline">\({\overline{L}}_{\max} =
10\)</span>, the UE determines the 1 MSB bit of the candidate SS/PBCH
block index from PBCH payload bit <span
class="math inline">\({\bar{a}}_{\bar{A} + 7}\)</span> as described in
[5, TS 38.212]</p>
<p>- for <span class="math inline">\({\overline{L}}_{\max} =
20\)</span>, the UE determines the 2 MSB bits of the candidate SS/PBCH
block index from PBCH payload bits <span
class="math inline">\({\bar{a}}_{\bar{A} + 6},{\bar{a}}_{\bar{A} +
7}\)</span> as described in [5, TS 38.212]</p>
<p>- for <span class="math inline">\({\overline{L}}_{\max} =
64\)</span>, the UE determines the 3 MSB bits of the candidate SS/PBCH
block index from PBCH payload bits <span
class="math inline">\({\bar{a}}_{\bar{A} + 5},{\bar{a}}_{\bar{A} +
6},{\bar{a}}_{\bar{A} + 7}\)</span> as described in [5, TS 38.212]</p>
<p>A UE can be provided per serving cell by
<em>ssb-periodicityServingCell</em> a periodicity of the half frames for
reception of the SS/PBCH blocks for the serving cell. If the UE is not
configured a periodicity of the half frames for receptions of the
SS/PBCH blocks, the UE assumes a periodicity of a half frame. A UE
assumes that the periodicity is same for all SS/PBCH blocks in the
serving cell.</p>
<p>For initial cell selection, a UE may assume that half frames with
SS/PBCH blocks occur with a periodicity of 2 frames.</p>
<p>For operation without shared spectrum channel access, an SS/PBCH
block index is same as a candidate SS/PBCH block index.</p>
<p>For operation with shared spectrum channel access, a UE assumes that
transmission of SS/PBCH blocks in a half frame is within a discovery
burst transmission window that starts from the first symbol of the first
slot in a half-frame. The UE can be provided per serving cell by
<em>discoveryBurstWindowLength</em> a duration of the discovery burst
transmission window. If <em>discoveryBurstWindowLength</em> is not
provided, the UE assumes that the duration of the discovery burst
transmission window is a half frame. For a serving cell, the UE assumes
that a periodicity of the discovery burst transmission window is same as
a periodicity of half frames for receptions of SS/PBCH blocks in the
serving cell. The UE assumes that one or more SS/PBCH blocks indicated
by <em>ssb-PositionsInBurst</em> may be transmitted within the discovery
burst transmission window and have candidate SS/PBCH blocks indexes
corresponding to SS/PBCH block indexes provided by
<em>ssb-PositionsInBurst</em>. If MSB <span
class="math inline">\(k\)</span>, <span class="math inline">\(k \geq
1\)</span>, of <em>ssb-PositionsInBurst</em> is set to 1, the UE assumes
that SS/PBCH block(s) within the discovery burst transmission window
with candidate SS/PBCH block index(es) corresponding to SS/PBCH block
index equal to <span class="math inline">\(k - 1\)</span> may be
transmitted; if MSB <span class="math inline">\(k\)</span> is set to 0,
the UE assumes that the SS/PBCH block(s) are not transmitted. If MSB
<span class="math inline">\(k\)</span>, <span class="math inline">\(k
\geq 1\)</span>, of <em>inOneGroup</em> is set to 1, and MSB <span
class="math inline">\(m\)</span>, <span class="math inline">\(m \geq
1\)</span>, of <em>groupPresence</em> is set to 1, the UE assumes that
SS/PBCH block(s) within the discovery burst transmission window with
candidate SS/PBCH block index(es) corresponding to SS/PBCH block index
determined by <span class="math inline">\(k\)</span> and <span
class="math inline">\(m\)</span> may be transmitted; otherwise, the UE
assumes that the SS/PBCH block(s) are not transmitted.</p>
<p>For operation with shared spectrum channel access in FR1, a UE
assumes that SS/PBCH blocks in a serving cell that are within a same
discovery burst transmission window or across discovery burst
transmission windows are quasi co-located with respect to average gain,
quasi co-location 'typeA' and 'typeD' properties, when applicable [6, TS
38.214], if a value of <span class="math inline">\(\left( N_{DM -
RS}^{PBCH}{mod}N_{SSB}^{QCL} \right)\)</span> is same among the SS/PBCH
blocks. <span class="math inline">\(N_{DM - RS}^{PBCH}\)</span> is an
index of a DM-RS sequence transmitted in a PBCH of a corresponding
SS/PBCH block, and <span class="math inline">\(N_{SSB}^{QCL}\)</span> is
either provided by <em>ssb-PositionQCL</em> or, if
<em>ssb-PositionQCL</em> is not provided, obtained from a <em>MIB</em>
provided by a SS/PBCH block according to Table 4.1-1 with <span
class="math inline">\(k_{SSB} &lt; 24\)</span> [4, TS 38.211]. The UE
can determine an SS/PBCH block index according to <span
class="math inline">\(\left( N_{DM - RS}^{PBCH}{mod}N_{SSB}^{QCL}
\right)\)</span>, or according to <span class="math inline">\(\left(
\overline{i}\ {mod}N_{SSB}^{QCL} \right)\)</span> where <span
class="math inline">\(\overline{i}\)</span> is the candidate SS/PBCH
block index. The UE assumes that within a discovery burst transmission
window, a number of transmitted SS/PBCH blocks on a serving cell is not
larger than <span class="math inline">\(N_{SSB}^{QCL}\)</span> and a
number of transmitted SS/PBCH blocks with a same SS/PBCH block index is
not larger than one.</p>
<p>Table 4.1-1: Mapping between the combination of
<em>subCarrierSpacingCommon</em> and LSB of
<em>ssb-SubcarrierOffset</em> to <span
class="math inline">\(\mathbf{N}_{\mathbf{SSB}}^{\mathbf{QCL}}\)</span>
for operation with shared spectrum channel access in FR1</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 45%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th><em>subCarrierSpacingCommon</em></th>
<th>LSB of <em>ssb-SubcarrierOffset</em></th>
<th><span
class="math display">\[\mathbf{N}_{\mathbf{SSB}}^{\mathbf{QCL}}\]</span></th>
</tr>
</thead>
<tbody>
<tr>
<td>scs15or60</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>scs15or60</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>scs30or120</td>
<td>0</td>
<td>4</td>
</tr>
<tr>
<td>scs30or120</td>
<td>1</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>For operation with shared spectrum channel access in FR2-2, a UE
assumes that SS/PBCH blocks in a serving cell that are within a same
discovery burst transmission window or across discovery burst
transmission windows are quasi co-located with respect to average gain,
quasi co-location 'typeA' and 'typeD' properties, when applicable, if a
value of <span class="math inline">\(\left(
\overline{i}{mod}N_{SSB}^{QCL} \right)\)</span> is same among the
SS/PBCH blocks, where <span class="math inline">\(\overline{i}\)</span>
is the candidate SS/PBCH block index. <span
class="math inline">\(N_{SSB}^{QCL}\)</span> is either provided by
<em>ssb-PositionQCL</em> or, if <em>ssb-PositionQCL</em> is not
provided, obtained from a <em>MIB</em> provided by a SS/PBCH block
according to Table 4.1-2. The UE can determine an SS/PBCH block index
according to <span class="math inline">\(\left( \overline{i}\
{mod}N_{SSB}^{QCL} \right)\)</span>. The UE assumes that within a
discovery burst transmission window, a number of transmitted SS/PBCH
blocks on a serving cell is not larger than <span
class="math inline">\(N_{SSB}^{QCL}\)</span> and a number of transmitted
SS/PBCH blocks with a same SS/PBCH block index is not larger than
one.</p>
<p>Table 4.1-2: Mapping between <em>subCarrierSpacingCommon</em> to
<span
class="math inline">\(\mathbf{N}_{\mathbf{SSB}}^{\mathbf{QCL}}\)</span>
for operation with shared spectrum channel access in FR2-2</p>
<table>
<colgroup>
<col style="width: 62%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th><em>subCarrierSpacingCommon</em></th>
<th><span
class="math display">\[\mathbf{N}_{\mathbf{SSB}}^{\mathbf{QCL}}\]</span></th>
</tr>
</thead>
<tbody>
<tr>
<td>scs15or60</td>
<td>32</td>
</tr>
<tr>
<td>scs30or120</td>
<td>64</td>
</tr>
</tbody>
</table>
<p>For operation without shared spectrum channel access in FR2-2, a UE
expects a MIB in a SS/PBCH block to provide
<em>subCarrierSpacingCommon</em> = 'scs30or120'.</p>
<p>Upon detection of a SS/PBCH block, the UE determines from
<em>MIB</em> that a CORESET for Type0-PDCCH CSS set, as described in
clause 13, is present if <span class="math inline">\(k_{SSB} &lt;
24\)</span> [4, TS 38.211] for FR1 or if <span
class="math inline">\(k_{SSB} &lt; 12\)</span> for FR2. The UE
determines from <em>MIB</em> that a CORESET for Type0-PDCCH CSS set is
not present if <span class="math inline">\(k_{SSB} &gt; 23\)</span> for
FR1 or if <span class="math inline">\(k_{SSB} &gt; 11\)</span> for FR2;
the CORESET for Type0-PDCCH CSS set may be provided by
<em>PDCCH-ConfigCommon</em>.</p>
<p>For a serving cell without transmission of SS/PBCH blocks, a UE
acquires time and frequency synchronization with the serving cell based
on receptions of SS/PBCH blocks on the PCell, or on the PSCell, or on an
SCell if applicable as described in [10, TS 38.133], of the cell group
for the serving cell.</p>
<h2 id="transmission-timing-adjustments">4.2 Transmission timing
adjustments</h2>
<p>A UE can be provided a value <span
class="math inline">\(N_{TA,offset}\)</span> of a timing advance offset
for a serving cell by <em>n-TimingAdvanceOffset</em> for the serving
cell. If the UE is not provided <em>n-TimingAdvanceOffset</em> for a
serving cell, the UE determines a default value <span
class="math inline">\(N_{TA,offset}\)</span> of the timing advance
offset for the serving cell as described in [10, TS 38.133].</p>
<p>If a UE is configured with two UL carriers for a serving cell, a same
timing advance offset value <span
class="math inline">\(N_{TA,offset}\)</span> applies to both
carriers.</p>
<p>Upon reception of a timing advance command for a TAG, the UE adjusts
uplink timing for PUSCH/SRS/PUCCH transmission on all the serving cells
in the TAG based on a value <span
class="math inline">\(N_{TA,offset}\)</span> that the UE expects to be
same for all the serving cells in the TAG and based on the received
timing advance command where the uplink timing for PUSCH/SRS/PUCCH
transmissions is the same for all the serving cells in the TAG.</p>
<p>For a band with synchronous contiguous intra-band EN-DC in a band
combination with non-applicable maximum transmit timing difference
requirements as described in Note 1 of Table 7.5.3-1 of [10, TS 38.133],
if the UE indicates <em>ul-TimingAlignmentEUTRA-NR</em> as 'required'
and uplink transmission timing based on timing adjustment indication for
a TAG from MCG and a TAG from SCG are determined to be different by the
UE, the UE adjusts the transmission timing for PUSCH/SRS/PUCCH
transmission on all serving cells part of the band with the synchronous
contiguous intra-band EN-DC based on timing adjustment indication for a
TAG from a serving cell in MCG in the band. The UE is not expected to
transmit a PUSCH/SRS/PUCCH in one CG when the PUSCH/SRS/PUCCH is
overlapping in time, even partially, with random access preamble
transmitted in another CG.</p>
<p>For a SCS of <span class="math inline">\(2^{\mu} \bullet 15\)</span>
kHz, the timing advance command for a TAG indicates the change of the
uplink timing relative to the current uplink timing for the TAG in
multiples of <span class="math inline">\(16 \bullet \frac{64 \bullet
T_{c}}{2^{\mu}}\)</span>. The start timing of the random access preamble
is described in [4, TS 38.211].</p>
<p>A timing advance command [11, TS 38.321] in case of random access
response or in an absolute timing advance command MAC CE, <span
class="math inline">\(T_{A}\)</span>, for a TAG indicates <span
class="math inline">\(N_{TA}\)</span> values by index values of <span
class="math inline">\(T_{A}\)</span> = 0, 1, 2, ..., 3846, where an
amount of the time alignment for the TAG with SCS of <span
class="math inline">\(2^{\mu} \bullet 15\)</span> kHz is <span
class="math inline">\(N_{TA} = T_{A} \bullet 16 \bullet
\frac{64}{2^{\mu}}\)</span>. <span class="math inline">\(N_{TA}\)</span>
is defined in [4, TS 38.211] and is relative to the SCS of the first
uplink transmission from the UE after the reception of the random access
response or absolute timing advance command MAC CE.</p>
<p>In other cases, a timing advance command [11, TS 38.321], <span
class="math inline">\(T_{A}\)</span>, for a TAG indicates adjustment of
a current <span class="math inline">\(N_{TA}\)</span> value, <span
class="math inline">\(N_{TA\_ old}\)</span>, to the new <span
class="math inline">\(N_{TA}\)</span> value, <span
class="math inline">\(N_{TA\_ new}\)</span>, by index values of <span
class="math inline">\(T_{A}\)</span> = 0, 1, 2,..., 63, where for a SCS
of <span class="math inline">\(2^{\mu} \bullet 15\)</span> kHz, <span
class="math inline">\(N_{TA\_ new} = N_{TA\_ old} + \left( T_{A} - 31
\right) \bullet 16 \bullet \frac{64}{2^{\mu}}\)</span>.</p>
<p>If a UE has multiple active UL BWPs, as described in clause 12, in a
same TAG, including UL BWPs in two UL carriers of a serving cell, the
timing advance command value is relative to the largest SCS of the
multiple active UL BWPs. The applicable <span
class="math inline">\(N_{TA\_ new}\)</span> value for an UL BWP with
lower SCS may be rounded to align with the timing advance granularity
for the UL BWP with the lower SCS while satisfying the timing advance
accuracy requirements in [10, TS 38.133].</p>
<p>Adjustment of an <span class="math inline">\(N_{TA}\)</span> value by
a positive or a negative amount indicates advancing or delaying the
uplink transmission timing for the TAG by a corresponding amount,
respectively.</p>
<p>For a timing advance command received on uplink slot <span
class="math inline">\(n\)</span> and for a transmission other than a
PUSCH scheduled by a RAR UL grant or a fallbackRAR UL grant as described
in clause 8.2A or 8.3, or a PUCCH with HARQ-ACK information in response
to a successRAR as described in clause 8.2A, the corresponding
adjustment of the uplink transmission timing applies from the beginning
of uplink slot <span class="math inline">\(n + k + 1{+ 2}^{\mu} \bullet
K_{offset}\)</span> where <span class="math inline">\(k = \left\lceil
N_{slot}^{subframe,\ \ \mu} \bullet \frac{\left( N_{T,1} + N_{T,2} +
N_{TA,max} + 0.5 \right)}{T_{sf}} \right\rceil\)</span>, <span
class="math inline">\(N_{T,1}\)</span> is a time duration in msec of
<span class="math inline">\(N_{1}\)</span> symbols corresponding to a
PDSCH processing time for UE processing capability 1 when additional
PDSCH DM-RS is configured, <span class="math inline">\(N_{T,2}\)</span>
is a time duration in msec of <span class="math inline">\(N_{2}\)</span>
symbols corresponding to a PUSCH preparation time for UE processing
capability 1 [6, TS 38.214], <span
class="math inline">\(N_{TA,max}\)</span> is the maximum timing advance
value in msec that can be provided by a TA command field of 12 bits,
<span class="math inline">\(N_{slot}^{subframe,\ \ \mu}\)</span> is the
number of slots per subframe, <span
class="math inline">\(T_{sf}\)</span> is the subframe duration of 1
msec, and <span class="math inline">\(K_{offset} = K_{cell,offset} -
K_{UE,offset}\)</span>, where <span
class="math inline">\(K_{cell,offset}\)</span> is provided by
<em>cellSpecificKoffset</em> and <span
class="math inline">\(K_{UE,offset}\)</span> is provided by a
Differential Koffset MAC CE command [11, TS 38.321]; otherwise, if not
respectively provided, <span class="math inline">\(K_{cell,offset} =
0\)</span> or <span class="math inline">\(K_{UE,offset} = 0\)</span>.
<span class="math inline">\(N_{1}\)</span> and <span
class="math inline">\(N_{2}\)</span> are determined with respect to the
minimum SCS among the SCSs of all configured UL BWPs for all uplink
carriers in the TAG and of all configured DL BWPs for the corresponding
downlink carriers. For <span class="math inline">\(\mu = 0\)</span>, the
UE assumes <span class="math inline">\(N_{1,0} = 14\)</span> [6, TS
38.214]. Slot <span class="math inline">\(n\)</span> and <span
class="math inline">\(N_{slot}^{subframe,\ \ \mu}\)</span> are
determined with respect to the minimum SCS among the SCSs of all
configured UL BWPs for all uplink carriers in the TAG. <span
class="math inline">\(N_{TA,max}\)</span> is determined with respect to
the minimum SCS among the SCSs of all configured UL BWPs for all uplink
carriers in the TAG and for all configured initial UL BWPs provided by
<em>initialUplinkBWP</em>. The uplink slot <span
class="math inline">\(n\)</span> is the last slot among uplink slot(s)
overlapping with the slot(s) of PDSCH reception assuming <span
class="math inline">\(T_{TA} = 0\)</span>, where the PDSCH provides the
timing advance command and <span class="math inline">\(T_{TA}\)</span>
is defined in [4, TS 38.211].</p>
<p>If a UE changes an active UL BWP between a time of a timing advance
command reception and a time of applying a corresponding adjustment for
the uplink transmission timing, the UE determines the timing advance
command value based on the SCS of the new active UL BWP. If the UE
changes an active UL BWP after applying an adjustment for the uplink
transmission timing, the UE assumes a same absolute timing advance
command value before and after the active UL BWP change.</p>
<p>If the received downlink timing changes and is not compensated or is
only partly compensated by the uplink timing adjustment without timing
advance command as described in [10, TS 38.133], the UE changes <span
class="math inline">\(N_{TA}\)</span> accordingly.</p>
<p>If two adjacent slots overlap due to a TA command or due to update of
<span class="math inline">\(N_{\text{TA,adj}}^{\text{UE}}\)</span> or
<span class="math inline">\(N_{\text{TA,adj}}^{\text{common}}\)</span>,
when applicable, the latter slot is reduced in duration relative to the
former slot. The UE does not change <span
class="math inline">\(N_{TA}\)</span> during an actual time domain
window for a PUSCH or a PUCCH transmission [6, TS 38.214].</p>
<p>Using higher-layer ephemeris parameters for a serving satellite, if
provided, a UE pre-compensates the two-way transmission delay on the
service link based on <span
class="math inline">\(N_{\text{TA,adj}}^{\text{UE}}\)</span> that the UE
determines using the serving satellite position and its own position. To
pre-compensate the two-way transmission delay between the uplink
time synchronization reference point and the serving satellite, the UE
determines <span
class="math inline">\(N_{\text{TA,adj}}^{\text{common}}\ \)</span>[4, TS
38.211] based on one-way propagation delay <span
class="math inline">\({Delay}_{common}(t)\)</span> that the UE
determines as:</p>
<blockquote>
<p><span class="math display">\[{Delay}_{common}(t) = \
\frac{{TA}_{Common}}{2} + \ \frac{{TA}_{CommonDrift}}{2} \times \left( t
- t_{epoch} \right) + \frac{{TA}_{CommonDriftVariant}}{2} \times \left(
t - t_{epoch} \right)^{2}\ \]</span></p>
</blockquote>
<p>where <span class="math inline">\({TA}_{Common}\)</span>, <span
class="math inline">\({TA}_{CommonDrift}\)</span>, and <span
class="math inline">\({TA}_{CommonDriftVariant}\)</span> are
respectively provided by <em>ta-Common</em>, <em>ta-CommonDrift</em>,
and <em>ta-CommonDriftVariant</em> and <span
class="math inline">\(t_{epoch}\)</span> is provided by
<em>epochTime</em> which is the epoch time of <em>ta-Common</em>,
<em>ta-CommonDrift</em>, and <em>ta-CommonDriftVariant</em> [12, TS
38.331]. <span class="math inline">\({Delay}_{common}(t)\)</span>
provides a distance at time <span class="math inline">\(t\)</span>
between the serving satellite and the uplink time synchronization
reference point divided by the speed of light. The uplink time
synchronization reference point is the point where DL and UL are frame
aligned with an offset given by <span
class="math inline">\(N_{TA,offset}\)</span>.</p>
<h2 id="timing-for-secondary-cell-activation-deactivation">4.3 Timing
for secondary cell activation / deactivation</h2>
<p>With reference to slots for PUCCH transmissions, when a UE receives
in a PDSCH an activation command [11, TS 38.321] for a secondary cell
ending in slot <em>n</em>, the UE applies the corresponding actions in
[11, TS 38.321] no later than the minimum requirement defined in [10, TS
38.133] and no earlier than slot <img src="media/image3.svg"
style="width:0.32292in;height:0.19792in" />, except for the
following:</p>
<p>- the actions related to CSI reporting on a serving cell that is
active in slot <img src="media/image4.svg"
style="width:0.32292in;height:0.19792in" /></p>
<p>- the actions related to the <em>sCellDeactivationTimer</em>
associated with the secondary cell [11, TS 38.321] that the UE applies
in slot <img src="media/image4.svg"
style="width:0.32292in;height:0.19792in" /></p>
<p>- the actions related to CSI reporting on a serving cell which is not
active in slot <img src="media/image4.svg"
style="width:0.32292in;height:0.19792in" />that the UE applies in the
earliest slot after <img src="media/image4.svg"
style="width:0.32292in;height:0.19792in" /> in which the serving cell is
active.</p>
<p>The value of <img src="media/image5.svg"
style="width:0.125in;height:0.19792in" /> is <span
class="math inline">\({m + 3\ N}_{\text{slot}}^{\text{subframe},\mu} +
1\)</span> where slot<img src="media/image6.png" />
<em>n</em>+<em>m</em> is a slot indicated for PUCCH transmission with
HARQ-ACK information for the PDSCH reception as described in clause
9.2.3 and <img src="media/image7.svg"
style="width:0.57292in;height:0.26042in" /> is a number of slots per
subframe for the SCS configuration <img src="media/image8.svg"
style="width:0.17708in;height:0.17708in" /> of the PUCCH transmission as
defined in [4, TS 38.211].</p>
<p>With reference to slots for PUCCH transmissions, if a UE receives a
deactivation command [11, TS 38.321] for a secondary cell ending in slot
<img src="media/image9.svg" style="width:0.125in;height:0.15625in" />,
the UE applies the corresponding actions in [11, TS 38.321] no later
than the minimum requirement defined in [10, TS 38.133], except for the
actions related to CSI reporting on an activated serving cell which the
UE applies in slot <img src="media/image4.svg"
style="width:0.32292in;height:0.19792in" /><em>.</em></p>
<p>If the <em>sCellDeactivationTimer</em> associated with the secondary
cell expires in slot <img src="media/image9.svg"
style="width:0.125in;height:0.15625in" />, the UE applies the
corresponding actions in [11, TS 38.321] no later than the minimum
requirement defined in [10, TS 38.133], except for the actions related
to CSI reporting on an activated serving cell which the UE applies in
the first slot that is after slot <img src="media/image10.svg"
style="width:0.875in;height:0.21875in" /> where <img
src="media/image11.svg" style="width:0.125in;height:0.15625in" /> is the
SCS configuration for PDSCH reception on the secondary cell.</p>
<h1 id="radio-link-monitoring">5 Radio link monitoring</h1>
<p>The downlink radio link quality of the primary cell is monitored by a
UE for the purpose of indicating out-of-sync/in-sync status to higher
layers. The UE is not required to monitor the downlink radio link
quality in DL BWPs other than the active DL BWP, as described in clause
12, on the primary cell. If the active DL BWP is the initial DL BWP and
for SS/PBCH block and CORESET multiplexing pattern 2 or 3, as described
in clause 13, the UE is expected to perform RLM using the associated
SS/PBCH block when the associated SS/PBCH block index is provided by
<em>RadioLinkMonitoringRS</em>.</p>
<p>If the UE is configured with a SCG, as described in [12, TS 38.331],
and the parameter <em>rlf-TimersAndConstants</em> is provided by higher
layers and is not set to release, the downlink radio link quality of the
PSCell of the SCG is monitored by the UE for the purpose of indicating
out-of-sync/in-sync status to higher layers. The UE is not required to
monitor the downlink radio link quality in DL BWPs other than the active
DL BWP on the PSCell.</p>
<p>A UE can be configured for each DL BWP of a SpCell [11, TS 38.321]
with a set of resource indexes, through a corresponding set of
<em>RadioLinkMonitoringRS</em>, for radio link monitoring by
<em>failureDetectionResources</em>. The UE is provided either a CSI-RS
resource configuration index, by <em>csi-RS-Index</em>, or a SS/PBCH
block index, by <em>ssb-Index</em>. The UE can be configured with up to
<img src="media/image12.svg" style="width:0.51042in;height:0.19792in" />
<em>RadioLinkMonitoringRS</em> for link recovery procedures, as
described in clause 6, and for radio link monitoring. From the <img
src="media/image12.svg" style="width:0.51042in;height:0.19792in" />
<em>RadioLinkMonitoringRS</em>, up to <img src="media/image13.svg"
style="width:0.30208in;height:0.19792in" />
<em>RadioLinkMonitoringRS</em> can be used for radio link monitoring
depending on <span class="math inline">\(L_{\max}\ \)</span> as
described in Table 5-1, wherein <span
class="math inline">\(L_{\max}\)</span> is as defined in clause 4.1, and
up to two <em>RadioLinkMonitoringRS</em> can be used for link recovery
procedures.</p>
<p>For operation with shared spectrum channel access, when a UE is
provided a SS/PBCH block index by <em>ssb-Index</em>, the UE is expected
to perform radio link monitoring using SS/PBCH block(s) in the discovery
burst transmission window as described in clause 4.1, where the SS/PBCH
block(s) have candidate SS/PBCH block index(es) corresponding to SS/PBCH
block index provided by <em>ssb-Index</em>.</p>
<p>If the UE is not provided <em>RadioLinkMonitoringRS</em> and the UE
is provided for PDCCH receptions TCI states that include one or more of
a CSI-RS</p>
<p>- the UE uses for radio link monitoring the RS provided for the
active TCI state for PDCCH reception if the active TCI state for PDCCH
reception includes only one RS</p>
<p>- if the active TCI state for PDCCH reception includes two RS, the UE
expects that one RS is configured with <em>qcl-Type</em> set to 'typeD'
[6, TS 38.214] and the UE uses the RS configured with <em>qcl-Type</em>
set to 'typeD' for radio link monitoring; the UE does not expect both RS
to be configured with <em>qcl-Type</em> set to 'typeD'</p>
<p>- the UE is not required to use for radio link monitoring an
aperiodic or semi-persistent RS</p>
<p>- For <img src="media/image14.svg"
style="width:0.46875in;height:0.19792in" />, the UE selects the <img
src="media/image13.svg" style="width:0.30208in;height:0.19792in" /> RS
provided for active TCI states for PDCCH receptions in CORESETs
associated with the search space sets in an order from the shortest
monitoring periodicity. If more than one CORESETs are associated with
search space sets having same monitoring periodicity, the UE determines
the order of the CORESET from the highest CORESET index as described in
clause 10.1.</p>
<p>A UE does not expect to use more than <img src="media/image15.svg"
style="width:0.30208in;height:0.19792in" />
<em>RadioLinkMonitoringRS</em> for radio link monitoring when the UE is
not provided <em>RadioLinkMonitoringRS</em>.</p>
<p>Values of <img src="media/image12.svg"
style="width:0.51042in;height:0.19792in" /> and <img
src="media/image15.svg" style="width:0.30208in;height:0.19792in" /> for
different values of <img src="media/image16.svg"
style="width:0.30208in;height:0.19792in" /> are given in Table 5-1.</p>
<p>Table 5-1: <img src="media/image12.svg"
style="width:0.51042in;height:0.19792in" /> and <img
src="media/image15.svg" style="width:0.30208in;height:0.19792in" /> as a
function of maximum number <img src="media/image16.svg"
style="width:0.30208in;height:0.19792in" /> of SS/PBCH blocks per half
frame</p>
<table>
<colgroup>
<col style="width: 37%" />
<col style="width: 31%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr>
<th><img src="media/image16.svg"
style="width:0.30208in;height:0.19792in" /></th>
<th><img src="media/image12.svg"
style="width:0.51042in;height:0.19792in" /></th>
<th><img src="media/image15.svg"
style="width:0.30208in;height:0.19792in" /></th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>8</td>
<td>6</td>
<td>4</td>
</tr>
<tr>
<td>64</td>
<td>8</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>For a CSI-RS resource configuration, <em>powerControlOffsetSS</em> is
not applicable and a UE expects to be provided only 'noCDM' from
<em>cdm-Type,</em> only 'one' and 'three' from <em>density</em>, and
only '1 port' from <em>nrofPorts</em> [6, TS 38.214].</p>
<p>If a UE is configured with multiple DL BWPs for a serving cell, the
UE performs RLM using the RS(s) corresponding to resource indexes
provided by <em>RadioLinkMonitoringRS</em> for the active DL BWP or, if
<em>RadioLinkMonitoringRS</em> is not provided for the active DL BWP,
using the RS(s) provided for the active TCI state for PDCCH receptions
in CORESETs on the active DL BWP.</p>
<p>In non-DRX mode operation, the physical layer in the UE assesses once
per indication period the radio link quality, evaluated over the
previous time period defined in [10, TS 38.133] against thresholds
(Q<sub>out</sub> and Q<sub>in</sub>) configured by
<em>rlmInSyncOutOfSyncThreshold</em>. The UE determines the indication
period as the maximum between the shortest periodicity for radio link
monitoring resources and 10 msec.</p>
<p>In DRX mode operation, the physical layer in the UE assesses once per
indication period the radio link quality, evaluated over the previous
time period defined in [10, TS 38.133], against thresholds
(Q<sub>out</sub> and Q<sub>in</sub>) provided by
<em>rlmInSyncOutOfSyncThreshold</em>. The UE determines the indication
period as the maximum between the shortest periodicity for radio link
monitoring resources and the DRX period.</p>
<p>The physical layer in the UE indicates, in frames where the radio
link quality is assessed, out-of-sync to higher layers when the radio
link quality is worse than the threshold Q<sub>out</sub> for all
resources in the set of resources for radio link monitoring. When the
radio link quality is better than the threshold Q<sub>in</sub> for any
resource in the set of resources for radio link monitoring, the physical
layer in the UE indicates, in frames where the radio link quality is
assessed, in-sync to higher layers.</p>
<h1 id="link-recovery-procedures">6 Link recovery procedures</h1>
<p>A UE can be provided, for each BWP of a serving cell, a set <span
class="math inline">\({\overline{q}}_{0}\)</span> of periodic CSI-RS
resource configuration indexes by
<em>failureDetectionResourcesToAddModList</em> and a set <span
class="math inline">\({\overline{q}}_{1}\)</span> of periodic CSI-RS
resource configuration indexes and/or SS/PBCH block indexes by
<em>candidateBeamRSList</em> or <em>candidateBeamRSListExt</em> or
<em>candidateBeamRSSCellList</em> for radio link quality measurements on
the BWP of the serving cell. Instead of the sets <span
class="math inline">\({\overline{q}}_{0}\)</span> and <span
class="math inline">\({\overline{q}}_{1}\)</span>, for each BWP of a
serving cell, the UE can be provided respective two sets <span
class="math inline">\({\overline{q}}_{0,0}\)</span> and <span
class="math inline">\({\overline{q}}_{0,1}\)</span> of periodic CSI-RS
resource configuration indexes by <em>failureDetectionSet1</em> and
<em>failureDetectionSet2</em> that can be activated by a MAC CE [11 TS
38.321] and corresponding two sets <span
class="math inline">\({\overline{q}}_{1,0}\)</span> and <span
class="math inline">\({\overline{q}}_{1,1}\)</span> of periodic CSI-RS
resource configuration indexes and/or SS/PBCH block indexes by
<em>candidateBeamRS-List</em> and <em>candidateBeamRS-List2</em>,
respectively, for radio link quality measurements on the BWP of the
serving cell. The set <span
class="math inline">\({\overline{q}}_{0,0}\)</span> is associated with
the set <span class="math inline">\({\overline{q}}_{1,0}\)</span> and
the set <span class="math inline">\({\overline{q}}_{0,1}\)</span> is
associated with the set <span
class="math inline">\({\overline{q}}_{1,1}\)</span>.</p>
<p>If the UE is not provided <span
class="math inline">\({\overline{q}}_{0}\)</span> by
<em>failureDetectionResourcesToAddModList</em> for a BWP of the serving
cell, the UE determines the set <span
class="math inline">\({\overline{q}}_{0}\)</span> to include periodic
CSI-RS resource configuration indexes with same values as the RS indexes
in the RS sets indicated by <em>TCI-State</em> for respective CORESETs
that the UE uses for monitoring PDCCH. If the UE is not provided <span
class="math inline">\({\overline{q}}_{0,0}\)</span> and <span
class="math inline">\(\ {\overline{q}}_{0,1}\)</span> for a BWP of the
serving cell, the UE determines the set <span
class="math inline">\({\overline{q}}_{0,0}\)</span> and <span
class="math inline">\(\ {\overline{q}}_{0,1}\)</span> to include
periodic CSI-RS resource configuration indexes with same values as the
RS indexes in the RS sets indicated by <em>TCI-State</em> for first and
second CORESETs that the UE uses for monitoring PDCCH, respectively,
where the UE is provided two <em>coresetPoolIndex</em> values 0 and 1
for the first and second CORESETs, or is not provided
<em>coresetPoolIndex</em> value for the first CORESETs and is provided
<em>coresetPoolIndex</em> value of 1 for the second CORESETs,
respectively. If there are two RS indexes in a TCI state, the set <span
class="math inline">\({\overline{q}}_{0}\)</span> or <span
class="math inline">\({\overline{q}}_{0,0}\)</span>, or <span
class="math inline">\({\overline{q}}_{0,1}\)</span> includes RS indexes
configured with <em>qcl-Type</em> set to 'typeD' for the corresponding
TCI states. If a CORESET that the UE uses for monitoring PDCCH includes
two TCI states and the UE is provided <em>sfnSchemePdcch</em> set to
'sfnSchemeA' or 'sfnSchemeB', the set <span
class="math inline">\({\overline{q}}_{0}\)</span> includes RS indexes in
the RS sets associated with the two TCI states.</p>
<p>The UE expects the set <span
class="math inline">\({\overline{q}}_{0}\)</span> to include up to two
RS indexes. If the UE is provided <span
class="math inline">\({\overline{q}}_{0,0}\)</span> or <span
class="math inline">\({\overline{q}}_{0,1}\)</span>, the UE expects the
set <span class="math inline">\({\overline{q}}_{0,0}\)</span> or the set
<span class="math inline">\({\overline{q}}_{0,1}\)</span> to include up
to a number of <span class="math inline">\(N_{BFD}\)</span> RS indexes
indicated by <em>maxBFD-RS-resourcesPerSetPerBWP</em>. If the UE is not
provided <span class="math inline">\({\overline{q}}_{0,0}\)</span> or
<span class="math inline">\({\overline{q}}_{0,1}\)</span>, and if a
number of active TCI states for PDCCH receptions in the first or second
CORESETs is larger than <span class="math inline">\(N_{BFD}\)</span>,
the UE determines the set <span
class="math inline">\({\overline{q}}_{0,0}\)</span> or <span
class="math inline">\({\overline{q}}_{0,1}\)</span> to include periodic
CSI-RS resource configuration indexes with same values as the RS indexes
in the RS sets associated with the active TCI states for PDCCH
receptions in the first or second CORESETs corresponding to search space
sets according to an ascending order for PDCCH monitoring periodicity.
If more than one first or second CORESETs correspond to search space
sets with same monitoring periodicity, the UE determines the order of
the first or second CORESETs according to a descending order of a
CORESET index.</p>
<p>If a UE</p>
<p>- is not provided <em>coresetPoolIndex</em> or is provided
<em>coresetPoolIndex</em> with a value of 0 for first CORESETs on an
active DL BWP of a serving cell,</p>
<p>- is provided <em>coresetPoolIndex</em> with a value of 1 for second
CORESETs on the active DL BWP of the serving cells, and</p>
<p>- is provided <em>SSB-MTCAdditionalPCI</em></p>
<p>SS/PBCH block indexes associated with a physical cell identity other
than the one provided by <em>physCellId</em> in
<em>ServingCellConfigCommon</em> can be provided in <span
class="math inline">\({\overline{q}}_{1,1}\)</span> set and the
corresponding <span class="math inline">\({\overline{q}}_{0,1}\)</span>
set is associated with the physical cell identity.</p>
<p>The UE expects single port RS in the set <span
class="math inline">\({\overline{q}}_{0}\)</span>, or <span
class="math inline">\({\overline{q}}_{0,0}\)</span>, or <span
class="math inline">\({\overline{q}}_{0,1}\)</span>. The UE expects
single-port or two-port CSI-RS with frequency density equal to 1 or 3
REs per RB in the set <span
class="math inline">\({\overline{q}}_{1}\)</span>, or <span
class="math inline">\({\overline{q}}_{1,0}\)</span>, or <span
class="math inline">\({\overline{q}}_{1,1}\)</span>. The thresholds
Q<sub>out,LR</sub> and Q<sub>in,LR</sub> correspond to the default value
of <em>rlmInSyncOutOfSyncThreshold</em>, as described in [10, TS 38.133]
for Q<sub>out</sub>, and to the value provided by
<em>rsrp-ThresholdSSB</em> or <em>rsrp-ThresholdBFR</em>,
respectively.</p>
<p>The physical layer in the UE assesses the radio link quality
according to the set <span
class="math inline">\({\overline{q}}_{0}\)</span>, <span
class="math inline">\({\overline{q}}_{0,0}\)</span>, or <span
class="math inline">\({\overline{q}}_{0,1}\)</span>, of resource
configurations against the threshold Q<sub>out,LR</sub>. For the set
<span class="math inline">\({\overline{q}}_{0}\)</span>, the UE assesses
the radio link quality only according to SS/PBCH blocks on the PCell or
the PSCell or periodic CSI-RS resource configurations that are quasi
co-located, as described in [6, TS 38.214], with the DM-RS of PDCCH
receptions by the UE. The UE applies the Q<sub>in,LR</sub> threshold to
the L1-RSRP measurement obtained from a SS/PBCH block. The UE applies
the Q<sub>in,LR</sub> threshold to the L1-RSRP measurement obtained for
a CSI-RS resource after scaling a respective CSI-RS reception power with
a value provided by <em>powerControlOffsetSS</em>.</p>
<p>In non-DRX mode operation, the physical layer in the UE provides an
indication to higher layers when the radio link quality for all
corresponding resource configurations in the set <span
class="math inline">\({\overline{q}}_{0}\)</span>, or in the set <span
class="math inline">\({\overline{q}}_{0,0}\)</span> or <span
class="math inline">\({\overline{q}}_{0,1}\)</span>, that the UE uses to
assess the radio link quality is worse than the threshold
Q<sub>out,LR</sub>. The physical layer informs the higher layers when
the radio link quality is worse than the threshold Q<sub>out,LR</sub>
with a periodicity determined by the maximum between the shortest
periodicity among the SS/PBCH blocks on the PCell or the PSCell and/or
the periodic CSI-RS configurations in the set <span
class="math inline">\({\overline{q}}_{0}\)</span>, <span
class="math inline">\({\overline{q}}_{0,0}\)</span>, or <span
class="math inline">\({\overline{q}}_{0,1}\)</span> that the UE uses to
assess the radio link quality and 2 msec. In DRX mode operation, the
physical layer provides an indication to higher layers when the radio
link quality is worse than the threshold Q<sub>out,LR</sub> with a
periodicity determined as described in [10, TS 38.133].</p>
<p>For the PCell or the PSCell, upon request from higher layers, the UE
provides to higher layers the periodic CSI-RS configuration indexes
and/or SS/PBCH block indexes from the set <span
class="math inline">\({\overline{q}}_{1}\)</span>, or <span
class="math inline">\({\overline{q}}_{1,0}\)</span>, or <span
class="math inline">\({\overline{q}}_{1,1}\)</span> and the
corresponding L1-RSRP measurements that are larger than or equal to the
Q<sub>in,LR</sub> threshold.</p>
<p>For the SCell, upon request from higher layers, the UE indicates to
higher layers whether there is at least one periodic CSI-RS
configuration index or SS/PBCH block index from the set <span
class="math inline">\({\overline{q}}_{1}\)</span>, or <span
class="math inline">\({\overline{q}}_{1,0}\)</span>, or <span
class="math inline">\({\overline{q}}_{1,1}\)</span> with corresponding
L1-RSRP measurements that is larger than or equal to the
Q<sub>in,LR</sub> threshold, and provides the periodic CSI-RS
configuration indexes and/or SS/PBCH block indexes from the set <span
class="math inline">\({\overline{q}}_{1}\)</span>, or <span
class="math inline">\({\overline{q}}_{1,0}\)</span>, or <span
class="math inline">\({\overline{q}}_{1,1}\)</span> and the
corresponding L1-RSRP measurements that are larger than or equal to the
Q<sub>in,LR</sub> threshold, if any.</p>
<p>For the PCell or the PSCell, a UE can be provided a CORESET through a
link to a search space set provided by <em>recoverySearchSpaceId,</em>
as described in clause 10.1, for monitoring PDCCH in the CORESET. If the
UE is provided <em>recoverySearchSpaceId</em>, the UE does not expect to
be provided another search space set for monitoring PDCCH in the CORESET
associated with the search space set provided by
<em>recoverySearchSpaceId</em>.</p>
<p>For the PCell or the PSCell, the UE can be provided, by
<em>PRACH-ResourceDedicatedBFR</em>, a configuration for PRACH
transmission as described in clause 8.1. For PRACH transmission in slot
<span class="math inline">\(n\)</span> and according to antenna port
quasi co-location parameters associated with periodic CSI-RS resource
configuration or with SS/PBCH block associated with index <span
class="math inline">\(q_{new}\)</span> provided by higher layers [11, TS
38.321], the UE monitors PDCCH in a search space set provided by
<em>recoverySearchSpaceId</em> for detection of a DCI format with CRC
scrambled by C-RNTI or MCS-C-RNTI starting from slot <span
class="math inline">\(n + 4 + {2^{\mu} \bullet k}_{mac}\)</span>, where
<span class="math inline">\(\mu\)</span> is the SCS configuration for
the PRACH transmission and <span class="math inline">\(k_{mac}\)</span>
is a number of slots provided by <em>kmac</em> [12, TS 38.331] or <span
class="math inline">\(k_{mac} = 0\)</span> if <em>kmac</em> is not
provided, within a window configured by
<em>BeamFailureRecoveryConfig</em>. For PDCCH monitoring in a search
space set provided by <em>recoverySearchSpaceId</em> and for
corresponding PDSCH receptions, the UE assumes the same antenna port
quasi-collocation parameters as the ones associated with index <span
class="math inline">\(q_{new}\)</span> until the UE receives by higher
layers an activation for a TCI state or any of the parameters
<em>tci-StatesPDCCH-ToAddList</em> and/or
<em>tci-StatesPDCCH-ToReleaseList</em>. After the UE detects a DCI
format with CRC scrambled by C-RNTI or MCS-C-RNTI in the search space
set provided by <em>recoverySearchSpaceId</em>, the UE continues to
monitor PDCCH candidates in the search space set provided by
<em>recoverySearchSpaceId</em> until the UE receives a MAC CE activation
command for a TCI state or <em>tci-StatesPDCCH-ToAddList</em> and/or
<em>tci-StatesPDCCH-ToReleaseList.</em></p>
<p>For the PCell or the PSCell, after 28 symbols from a last symbol of a
first PDCCH reception in a search space set provided by
<em>recoverySearchSpaceId</em> for which the UE detects a DCI format
with CRC scrambled by C-RNTI or MCS-C-RNTI and until the UE receives an
activation command for <em>PUCCH-SpatialRelationInfo</em> [11, TS
38.321] or is provided <em>PUCCH-SpatialRelationInfo</em> for PUCCH
resource(s), the UE transmits a PUCCH on a same cell as the PRACH
transmission using</p>
<p>- a same spatial filter as for the last PRACH transmission</p>
<p>- a power determined as described in clause 7.2.1 with <span
class="math inline">\(q_{u} = 0\)</span>, <span
class="math inline">\({q_{d} = q}_{new}\)</span>, and <span
class="math inline">\(l = 0\)</span></p>
<p>For the PCell or the PSCell and for sets <span
class="math inline">\({\overline{q}}_{0}\)</span> and <span
class="math inline">\({\overline{q}}_{1}\)</span>, after 28 symbols from
a last symbol of a first PDCCH reception in a search space set provided
by <em>recoverySearchSpaceId</em> where a UE detects a DCI format with
CRC scrambled by C-RNTI or MCS-C-RNTI, the UE assumes same antenna port
quasi-collocation parameters as the ones associated with index <span
class="math inline">\(q_{new}\)</span> for PDCCH monitoring in a CORESET
with index 0.</p>
<p>If a UE is provided <em>dl-OrJointTCI-StateList</em> or
<em>ul-TCI-StateList</em> indicating a unified TCI state for the PCell
or the PSCell [6, TS 38.214], after 28 symbols from a last symbol of a
first PDCCH reception in a search space set provided by
<em>recoverySearchSpaceId</em> where the UE detects a DCI format with
CRC scrambled by C-RNTI or MCS-C-RNTI, the UE</p>
<p>- if <em>SSB-MTC-AdditionalPCI</em> is not provided, monitors PDCCH
in all CORESETs, and receives PDSCH and aperiodic CSI-RS resource in a
CSI-RS resource set with same indicated TCI state as for the PDCCH and
PDSCH, using the same antenna port quasi co-location parameters as the
ones associated with the corresponding index <span
class="math inline">\(q_{\text{new}}\)</span>, if any</p>
<p>- transmits PUSCH, PUCCH and SRS that uses a same spatial domain
filter with same indicated TCI state as for the PUSCH and the PUCCH,
using a same spatial domain filter as for the last PRACH transmission
using the following parameters for determination of a corresponding
power as described in clauses 7.1.1, 7.2.1, and 7.3.1</p>
<p>- the RS index <span class="math inline">\({q_{d} = q}_{new}\)</span>
for obtaining the downlink pathloss estimate</p>
<p>- the values of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span>, <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span>, and the PUSCH power
control adjustment state <span class="math inline">\(l\)</span> provided
by <em>p0AlphaSetforPUSCH</em> associated with the smallest value of
<em>ul-powercontrolId</em> for the PCell or the PSCell</p>
<p>- the value of <span
class="math inline">\(P_{\text{O\_UE\_PUCCH}}\left( q_{u}
\right)\)</span> and the PUCCH power control adjustment state <span
class="math inline">\(l\)</span> provided by <em>p0AlphaSetforPUCCH</em>
associated with the smallest value of <em>ul-powercontrolId</em> for the
PCell or the PSCell</p>
<p>- the values of <span
class="math inline">\(P_{\text{O\_UE\_SRS},b,f,c}\left( q_{s}
\right)\)</span>, <span class="math inline">\(\alpha_{SRS,b,f,c}\left(
q_{s} \right)\)</span>, and the SRS power control adjustment state <span
class="math inline">\(l\)</span> provided by <em>p0AlphaSetforSRS</em>
associated with the smallest value of <em>ul-powercontrolId</em> for the
PCell or the PSCell</p>
<p>For the remaining of this clause, if a PDCCH reception includes two
PDCCH candidates from two linked search space sets based on
<em>searchSpaceLinkingId</em>, as described in clause 10.1, the last
symbol of the PDCCH reception is the last symbol of the PDCCH candidate
that ends later. The PDCCH reception includes the two PDCCH candidates
also when the UE is not required to monitor one of the two PDCCH
candidates as described in clauses 10 (except clause 10.4), 11.1, 11.1.1
and 17.2.</p>
<p>For the PCell or the PSCell, if BFR MAC CE [11, TS 38.321] is
provided in Msg3 or MsgA of contention based random access procedure,
and if a PUCCH resource is provided with
<em>PUCCH-SpatialRelationInfo</em>, after 28 symbols from the last
symbol of the PDCCH reception that determines the completion of the
contention based random access procedure as described in clause 5.1.4a
or in clause 5.1.5 of [11, TS 38.321], the UE transmits the PUCCH on a
same cell as the PRACH transmission using</p>
<p>- a same spatial filter as for the last PRACH transmission</p>
<p>- a power determined as described in clause 7.2.1 with <span
class="math inline">\(q_{u} = 0\)</span>, <span
class="math inline">\({q_{d} = q}_{new}\)</span>, and <span
class="math inline">\(l = 0\)</span>, where <span
class="math inline">\(q_{new}\)</span> is the SS/PBCH block index
selected for the last PRACH transmission.</p>
<p>If a UE is provided <em>dl-OrJointTCI-StateList</em> or
<em>ul-TCI-StateList</em> indicating a unified TCI state for the PCell
or the PSCell and the UE provides BFR MAC CE in Msg3 or MsgA of
contention based random access procedure, after 28 symbols from the last
symbol of the PDCCH reception that determines the completion of the
contention based random access procedure as described in [11, TS
38.321], the UE</p>
<p>- if <em>SSB-MTC-AdditionalPCI</em> is not provided, monitors PDCCH
in all CORESETs, and receives PDSCH and aperiodic CSI-RS resource in a
CSI-RS resource set with same indicated TCI state as for the PDCCH and
PDSCH using the same antenna port quasi co-location parameters as the
ones associated with the corresponding index <span
class="math inline">\(q_{\text{new}}\)</span>, if any</p>
<p>- transmits PUSCH, PUCCH and SRS that uses a same spatial domain
filter with same indicated TCI state as for the PUSCH and PUCCH, using a
same spatial domain filter as for the last PRACH transmission using the
following parameters for determination of a corresponding power as
described in clauses 7.1.1, 7.2.1, and 7.3.1</p>
<p>- the RS index <span class="math inline">\({q_{d} = q}_{new}\)</span>
for obtaining the downlink pathloss estimate</p>
<p>- the values of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span>, <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span>, and the PUSCH power
control adjustment state <span class="math inline">\(l\)</span> provided
by <em>p0AlphaSetforPUSCH</em> associated with the smallest value of
<em>ul-powercontrolId</em> for the PCell or the PSCell</p>
<p>- the value of <span
class="math inline">\(P_{\text{O\_UE\_PUCCH}}\left( q_{u}
\right)\)</span> and the PUCCH power control adjustment state <span
class="math inline">\(l\)</span> provided by <em>p0AlphaSetforPUCCH</em>
associated with the smallest value of <em>ul-powercontrolId</em> for the
PCell or the PSCell</p>
<p>- the values of <span
class="math inline">\(P_{\text{O\_UE\_SRS},b,f,c}\left( q_{s}
\right)\)</span>, <span class="math inline">\(\alpha_{SRS,b,f,c}\left(
q_{s} \right)\)</span>, and the SRS power control adjustment state <span
class="math inline">\(l\)</span> provided by <em>p0AlphaSetforSRS</em>
associated with the smallest value of <em>ul-powercontrolId</em> for the
PCell or the PSCell</p>
<p>A UE can be provided, by <em>schedulingRequestID-BFR-SCell</em>, a
configuration for PUCCH transmission with a link recovery request (LRR)
as described in clause 9.2.4 for the UE to transmit PUCCH [11, TS
38.321]. If the PCell or the PSCell is associated with sets <span
class="math inline">\({\overline{q}}_{0,0}\)</span> and <span
class="math inline">\({\overline{q}}_{1,0}\)</span>, and with sets <span
class="math inline">\({\overline{q}}_{0,1}\)</span> and <span
class="math inline">\({\overline{q}}_{1,1}\)</span>, the UE can be
provided by <em>schedulingRequestID-BFR</em> a first configuration for
PUCCH transmission with a LRR and, if the UE provides
<em>twoLRRcapability</em>, the UE can be provided by
<em>schedulingRequestID-BFR2</em> a second configuration for PUCCH
transmission with a LRR. If the UE is provided only the first
configuration, the UE transmits a PUCCH with LRR for either set <span
class="math inline">\({\overline{q}}_{0,0}\)</span> or <span
class="math inline">\({\overline{q}}_{0,1}\)</span>. If the UE is
provided both the first and second configurations, the UE uses the first
configuration to transmt a PUCCH with LRR associated with set <span
class="math inline">\({\overline{q}}_{0,0}\)</span> and the second
configuration to transmit a PUCCH with LRR associated with set <span
class="math inline">\({\overline{q}}_{0,1}\)</span> [11, TS 38.321].</p>
<p>The UE can provide in a first PUSCH MAC CE index(es) for at least
corresponding SCell(s) with radio link quality worse than
Q<sub>out,LR</sub>, indication(s) of presence of <span
class="math inline">\(q_{\text{new}}\)</span> for corresponding
SCell(s), and index(es) <span
class="math inline">\(q_{\text{new}}\)</span> for a periodic CSI-RS
configuration or for a SS/PBCH block provided by higher layers, as
described in [11, TS 38.321], if any, for corresponding SCell(s). After
28 symbols from a last symbol of a PDCCH reception with a DCI format
scheduling a PUSCH transmission with a same HARQ process number as for
the transmission of the first PUSCH and having a toggled NDI field
value, the UE</p>
<p>- monitors PDCCH in all CORESETs on the SCell(s) indicated by the MAC
CE using the same antenna port quasi co-location parameters as the ones
associated with the corresponding index(es) <span
class="math inline">\(q_{\text{new}}\)</span>, if any</p>
<p>- transmits PUCCH on a PUCCH-SCell using a same spatial domain filter
as the one corresponding to <span
class="math inline">\(q_{\text{new}}\)</span>, if any, for periodic
CSI-RS or SS/PBCH block reception, as described in clause 9.2.2, and
using a power determined as described in clause 7.2.1 with <span
class="math inline">\(q_{\text{u}} = 0\)</span>, <span
class="math inline">\({q_{\text{d}} = q}_{\text{new}}\)</span>, and
<span class="math inline">\(l = 0\)</span>, if</p>
<p>- the UE is provided <em>PUCCH-SpatialRelationInfo</em> for the
PUCCH,</p>
<p>- a PUCCH with the LRR was either not transmitted or was transmitted
on the PCell or the PSCell, and</p>
<p>- the PUCCH-SCell is included in the SCell(s) indicated by the
MAC-CE</p>
<p>where the SCS configuration for the 28 symbols is the smallest of the
SCS configurations of the active DL BWP for the PDCCH reception and of
the active DL BWP(s) of the at least one SCell.</p>
<p>If a UE is provided <em>dl-OrJointTCI-StateList</em> or
<em>ul-TCI-StateList</em> indicating a unified TCI state, after 28
symbols from a last symbol of a PDCCH reception with a DCI format
scheduling a PUSCH transmission with a same HARQ process number as for
the transmission of the first PUSCH and having a toggled NDI field
value, the UE</p>
<p>- if SSB -MTC-AdditionalPCI is not provided, monitors PDCCH in all
CORESETs, on the SCell (s) indicated by the MAC CE, and receives PDSCH
and aperiodic CSI-RS resource in a CSI-RS resource set using the same
antenna port quasi co-location parameters as the ones associated with
the corresponding index <span
class="math inline">\(q_{\text{new}}\)</span>, if any</p>
<p>- transmits PUSCH, PUCCH and SRS that uses a same spatial domain
filter with same indicated TCI state as for the PUSCH and PUCCH, using a
same spatial domain filter as the one corresponding to <span
class="math inline">\(q_{\text{new}}\)</span>, if any, and using the
following parameters for determination of a corresponding power as
described in clauses 7.1.1, 7.2.1, and 7.3.1</p>
<p>- the RS index <span class="math inline">\({q_{d} = q}_{new}\)</span>
for obtaining the downlink pathloss estimate</p>
<p>- the values of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span>, <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span>, and the PUSCH power
control adjustment state <span class="math inline">\(l\)</span> provided
by <em>p0AlphaSetforPUSCH</em> associated with the smallest value of
<em>ul-powercontrolId</em> for the corresponding SCell</p>
<p>- the value of <span
class="math inline">\(P_{\text{O\_UE\_PUCCH}}\left( q_{u}
\right)\)</span> and the PUCCH power control adjustment state <span
class="math inline">\(l\)</span> provided by <em>p0AlphaSetforPUCCH</em>
associated with the smallest value of <em>ul-powercontrolId</em> for the
corresponding SCell</p>
<p>- the values of <span
class="math inline">\(P_{\text{O\_UE\_SRS},b,f,c}\left( q_{s}
\right)\)</span>, <span class="math inline">\(\alpha_{SRS,b,f,c}\left(
q_{s} \right)\)</span>, and the SRS power control adjustment state <span
class="math inline">\(l\)</span> provided by <em>p0AlphaSetforSRS</em>
associated with the smallest value of <em>ul-powercontrolId</em> for the
corresponding SCell</p>
<p>If there is at least one serving cell associated with sets <span
class="math inline">\({\overline{q}}_{0,0}\)</span> and <span
class="math inline">\({\overline{q}}_{1,0}\)</span>, and with sets <span
class="math inline">\({\overline{q}}_{0,1}\)</span> and <span
class="math inline">\({\overline{q}}_{1,1}\)</span>, the UE can provide
in a second PUSCH MAC CE index(es) for cell(s) with <span
class="math inline">\({\overline{q}}_{0}\)</span> and/or with at least
one of <span class="math inline">\({\overline{q}}_{0,0}\)</span> and
<span class="math inline">\({\overline{q}}_{0,1}\)</span> having radio
link quality worse than Q<sub>out,LR</sub>, the index(es) of those <span
class="math inline">\({\overline{q}}_{0,0}\)</span> and/or <span
class="math inline">\({\overline{q}}_{0,1}\)</span>, and indication(s)
of presence of <span class="math inline">\(q_{\text{new}}\)</span> and
of index(es) <span class="math inline">\(q_{\text{new}}\)</span>, if
any, from <span class="math inline">\({\overline{q}}_{1}\)</span> and/or
corresponding sets <span
class="math inline">\({\overline{q}}_{1,0}\)</span> and/or <span
class="math inline">\({\overline{q}}_{1,1}\)</span> for the serving
cells.</p>
<p>For serving cells associated with sets <span
class="math inline">\({\overline{q}}_{0,0}\)</span> and <span
class="math inline">\({\overline{q}}_{1,0}\)</span>, and with sets <span
class="math inline">\({\overline{q}}_{0,1}\)</span> and <span
class="math inline">\({\overline{q}}_{1,1}\)</span>, and having radio
link quality worse than Q<sub>out,LR</sub>, after 28 symbols from a last
symbol of a first PDCCH reception with a DCI format scheduling a PUSCH
transmission with a same HARQ process number as for transmission of the
second PUSCH and having a toggled NDI field value, the UE assumes
antenna port quasi-collocation parameters</p>
<p>- corresponding to <span
class="math inline">\(q_{\text{new}}\)</span> from <span
class="math inline">\({\overline{q}}_{1,0}\)</span>, if any, for the
first CORESETs,</p>
<p>- corresponding to <span
class="math inline">\(q_{\text{new}}\)</span> from <span
class="math inline">\({\overline{q}}_{1,1}\)</span>, if any, for the
second CORESETs</p>
<p>where the SCS configuration for the 28 symbols is the smallest of the
SCS configurations of the active DL BWP for the PDCCH reception and of
the active DL BWP(s) of the serving cells.</p>
<h1 id="uplink-power-control">7 Uplink Power control</h1>
<p>Uplink power control determines a power for PUSCH, PUCCH, SRS, and
PRACH transmissions.</p>
<p>A UE does not expect to simultaneously maintain more than four
pathloss estimates per serving cell for all PUSCH/PUCCH/SRS
transmissions as described in clauses 7.1.1, 7.2.1, and 7.3.1, except
for SRS transmissions configured by <em>SRS-PosResourceSet</em> as
described in clause 7.3.1. If the UE is provided a number of RS
resources for pathloss estimation for PUSCH/PUCCH/SRS transmissions that
is larger than 4, the UE maintains for pathloss estimation RS resources
corresponding to RS resource indexes <span
class="math inline">\(q_{d}\)</span> as described in clauses 7.1.1,
7.2.1, and 7.3.1. If an RS resource updated by MAC CE, as described in
clauses 7.1.1, 7.2.1 and 7.3.1, is one from the RS resources the UE
maintains for pathloss estimation for PUSCH/PUCCH/SRS transmissions, the
UE applies the pathloss estimation based on the RS resources starting
from the first slot that is after slot <span class="math inline">\(k + 3
\bullet N_{slot}^{subframe,\ \ \mu} + {2^{\mu} \bullet k}_{mac}\)</span>
where <span class="math inline">\(k\)</span> is the slot where the UE
would transmit a PUCCH or PUSCH with HARQ-ACK information for the PDSCH
providing the MAC CE, <span class="math inline">\(\mu\ \ \)</span>is the
SCS configuration for the PUCCH or PUSCH, respectively, that is
determined in the slot when the MAC CE command is applied and <span
class="math inline">\(k_{mac}\)</span> is a number of slots for SCS
configuration <span class="math inline">\(\mu = 0\)</span> provided by
<em>kmac</em> or <span class="math inline">\(k_{mac} = 0\)</span> if
<em>kmac</em> is not provided<em>.</em></p>
<p>A PUSCH/PUCCH/SRS/PRACH transmission occasion <span
class="math inline">\(i\)</span> is defined by a slot index <span
class="math inline">\(n_{s,f}^{\mu}\)</span> within a frame with system
frame number <span class="math inline">\(SFN\)</span>, a first symbol
<span class="math inline">\(S\)</span> within the slot, and a number of
consecutive symbols <span class="math inline">\(L\)</span>. For a PUSCH
transmission with repetition Type B, a PUSCH transmission occasion is a
nominal repetition [6, TS 38.214].</p>
<p>In the remaining of this clause, if a UE is provided
<em>TCI-State</em> in <em>dl-OrJointTCI-StateList</em> or
<em>TCI-UL-State</em> and for an indicated <em>TCI-State</em> or
<em>TCI-UL-State</em> as described in [6, TS 38.214]</p>
<p>- in clauses 7.1.1, 7.2.1, and 7.3.1, the RS index <span
class="math inline">\(q_{d}\)</span> for obtaining the downlink pathloss
estimate for PUSCH, PUCCH, and SRS transmission is provided by
<em>pathlossReferenceRS-Id-r17</em> associated with or included in the
indicated <em>TCI-State</em> or <em>TCI-UL-State</em> except for SRS
transmission that is not provided <em>followUnifiedTCI-StateSRS</em></p>
<p>- in clause 7.1.1, if <em>p0AlphaSetforPUSCH</em> is provided, the
values of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span>, <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span>, and the PUSCH power
control adjustment state <span class="math inline">\(l\)</span> are
provided by <em>p0AlphaSetforPUSCH</em> associated with the indicated
<em>TCI-State</em> or <em>TCI-UL-State</em></p>
<p>- in clause 7.2.1, if <em>p0AlphaSetforPUCCH</em> is provided, the
values of <span class="math inline">\(P_{\text{O\_UE\_PUCCH}}\left(
q_{u} \right)\)</span> and the PUCCH power control adjustment state
<span class="math inline">\(l\)</span> are provided by
<em>p0AlphaSetforPUCCH</em> associated with the indicated
<em>TCI-State</em> or <em>TCI-UL-State</em></p>
<p>- in clause 7.3.1, if <em>p0AlphaSetforSRS</em> is provided,</p>
<p>- if <em>followUnifiedTCI-StateSRS</em> is provided for a SRS
resource set, the values of <span
class="math inline">\(P_{\text{O\_UE\_SRS},b,f,c}\left( q_{s}
\right)\)</span>, <span class="math inline">\(\alpha_{SRS,b,f,c}\left(
q_{s} \right)\)</span>, and SRS power control adjustment state <span
class="math inline">\(l\)</span> are provided by
<em>p0AlphaSetforSRS</em> associated with the indicated
<em>TCI-State</em> or <em>TCI-UL-State</em></p>
<p>- else, if <em>followUnifiedTCI-StateSRS</em> is not provided for a
SRS resource set and for a SRS resource from the SRS resource set, the
values of <span class="math inline">\(P_{\text{O\_UE\_SRS},b,f,c}\left(
q_{s} \right)\)</span>, <span
class="math inline">\(\alpha_{SRS,b,f,c}\left( q_{s} \right)\)</span>,
and SRS power control adjustment state <span
class="math inline">\(l\)</span> are provided by
<em>p0AlphaSetforSRS</em> associated with <em>TCI-State</em> or
<em>TCI-UL-State</em> of an SRS resource with lowest
<em>SRS-ResourceId</em> in the SRS resource set and a RS index <span
class="math inline">\(q_{d}\)</span> for obtaining a pathloss estimate
for the SRS transmission is provided by
<em>pathlossReferenceRS-Id-r17</em> associated with or included in the
<em>TCI-State</em> or <em>TCI-UL-State</em> of an SRS resource with
lowest <em>SRS-ResourceId</em> in the SRS resource set</p>
<p><span class="math inline">\(P_{\text{O\_SRS},b,f,c}\left( q_{s}
\right)\)</span> is the sum of the component <span
class="math inline">\(P_{\text{O\_UE\_SRS},b,f,c}\left( q_{s}
\right)\)</span> and a component <em>p0</em> provided by
<em>SRS-ResourceSet</em> corresponding to the SRS resource set.</p>
<p>In the remaining of this clause, if a PDCCH reception by a UE
includes two PDCCH candidates from corresponding search space sets, as
described in clause 10.1</p>
<p>- a PDCCH monitoring occasion is the union of the PDCCH monitoring
occasions for the two PDCCH candidates</p>
<p>- the end of the PDCCH reception is the end of the PDCCH candidate
that ends later</p>
<p>The PDCCH reception includes the two PDCCH candidates also when the
UE is not required to monitor one of the two PDCCH candidates as
described in clauses 10 (except clause 10.4), 11.1, 11.1.1 and 17.2.</p>
<h2 id="physical-uplink-shared-channel">7.1 Physical uplink shared
channel</h2>
<p>For a PUSCH transmission on active UL BWP <span
class="math inline">\(b\)</span>, as described in clause 12, of carrier
<span class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, a UE first calculates a linear value
<span
class="math inline">\({\widehat{P}}_{\text{PUSCH},b,f,c}(i,j,q_{d},l)\)</span>
of the transmit power <span
class="math inline">\(P_{\text{PUSCH},b,f,c}(i,j,q_{d},l)\)</span>, with
parameters as defined in clause 7.1.1. For a PUSCH transmission
scheduled by a DCI format other than DCI format 0_0, or configured by
<em>ConfiguredGrantConfig</em> or <em>semiPersistentOnPUSCH</em>, if
<em>txConfig</em> in <em>PUSCH-Config</em> is set to 'codebook',</p>
<p>- if <em>ul-FullPowerTransmission</em> in <em>PUSCH-Config</em> is
provided, the UE scales <span
class="math inline">\({\widehat{P}}_{\text{PUSCH},b,f,c}(i,j,q_{d},l)\)</span>
by <span class="math inline">\(s\)</span> where:</p>
<p>- if <em>ul-FullPowerTransmission</em> in <em>PUSCH-Config</em> is
set to <em>fullpowerMode1</em>, and each SRS resource in the
<em>SRS-ResourceSet</em> with <em>usage</em> set to 'codebook' has more
than one SRS port, <span class="math inline">\(s\)</span> is the ratio
of a number of antenna ports with non-zero PUSCH transmission power over
the maximum number of SRS ports supported by the UE in one SRS
resource</p>
<p>- if <em>ul-FullPowerTransmission</em> in <em>PUSCH-Config</em> is
set to <em>fullpowerMode2</em>,</p>
<blockquote>
<p>- <span class="math inline">\(s = 1\)</span> for full power TPMIs
reported by the UE [18, TS 38.306], and <span
class="math inline">\(s\)</span> is the ratio of a number of antenna
ports with non-zero PUSCH transmission power over a number of SRS ports
for remaining TPMIs, where the number of SRS ports is associated with an
SRS resource indicated by an SRI field in a DCI format scheduling the
PUSCH transmission if more than one SRS resource is configured in the
<em>SRS-ResourceSet</em> with <em>usage</em> set to 'codebook', or
indicated by Type 1 configured grant, or the number of SRS ports is
associated with the SRS resource if only one SRS resource is configured
in the <em>SRS-ResourceSet</em> with <em>usage</em> set to
'codebook',</p>
<p>- <span class="math inline">\(s = 1\)</span>, if an SRS resource with
a single port is indicated by an SRI field in a DCI format scheduling
the PUSCH transmission when more than one SRS resource is provided in
the <em>SRS-ResourceSet</em> with <em>usage</em> set to 'codebook', or
indicated by Type 1 configured grant, or if only one SRS resource with a
single port is provided in the <em>SRS-ResourceSet</em> with
<em>usage</em> set to 'codebook', and</p>
</blockquote>
<p>- if <em>ul-FullPowerTransmission</em> in <em>PUSCH-Config</em> is
set to <em>fullpower</em>, <span class="math inline">\(s =
1\)</span></p>
<p>- else, if each SRS resource in the <em>SRS-ResourceSet</em> with
<em>usage</em> set to 'codebook' has more than one SRS port, the UE
scales the linear value by the ratio of the number of antenna ports with
a non-zero PUSCH transmission power to the maximum number of SRS ports
supported by the UE in one SRS resource.</p>
<p>The UE splits the power equally across the antenna ports on which the
UE transmits the PUSCH with non-zero power.</p>
<h3 id="ue-behaviour">7.1.1 UE behaviour</h3>
<p>If a UE transmits a PUSCH on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> using parameter set configuration with
index <span class="math inline">\(j\)</span> and PUSCH power control
adjustment state with index <span class="math inline">\(l\)</span>, the
UE determines the PUSCH transmission power <span
class="math inline">\(P_{\text{PUSCH},b,f,c}(i,j,q_{d},l)\)</span> in
PUSCH transmission occasion <span class="math inline">\(i\)</span>
as</p>
<p><img src="media/image17.svg"
style="width:6.40625in;height:0.51042in" /> [dBm]</p>
<p>where,</p>
<p>- <span class="math inline">\(P_{\text{CMAX},f,c}(i)\)</span>is the
UE configured maximum output power defined in [8-1, TS 38.101-1], [8-2,
TS 38.101-2] and [8-3, TS 38.101-3] for carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> in PUSCH transmission occasion <span
class="math inline">\(i\)</span>.</p>
<p>- <span class="math inline">\(P_{\text{O\_PUSCH},b,f,c}(j)\)</span>
is a parameter composed of the sum of a component <span
class="math inline">\(P_{\text{O\_NOMINAL,PUSCH},f,c}(j)\)</span> and a
component <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> where
<span class="math inline">\(j \in \left\{ 0,1,\ldots,J - 1
\right\}\)</span>.</p>
<p>- If a UE established dedicated RRC connection using a Type-1 random
access procedure, as described in clause 8, and is not provided
<em>P0-PUSCH-AlphaSet</em> or for a PUSCH (re)transmission corresponding
to a RAR UL grant as described in clause 8.3,</p>
<p><span class="math inline">\(j = 0\)</span>, <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(0) = 0\)</span>, and
<span class="math inline">\(P_{\text{O\_NOMINAL,PUSCH},f,c}(0) =
P_{\text{O\_PRE}} + \mathrm{\Delta}_{PREAMBLE,Msg3}\)</span>,</p>
<blockquote>
<p>where <span class="math inline">\(P_{\text{O\_PRE}}\)</span> is
provided by <em>preambleReceivedTargetPower</em> [11, TS 38.321] and
<span class="math inline">\(\Delta_{PREAMBLE\_ Msg3}\)</span> is
provided by <em>msg3-DeltaPreamble</em> or <em>deltaPreamble</em>, or
<span class="math inline">\(\mathrm{\Delta}_{PREAMBLE,Msg3} = 0\)</span>
dB if <em>msg3-DeltaPreamble</em> and <em>deltaPreamble</em> are not
provided, for carrier <span class="math inline">\(f\)</span> of serving
cell <span class="math inline">\(c\)</span></p>
</blockquote>
<p>- If a UE established dedicated RRC connection using a Type-2 random
access procedure, as described in clause 8, and is not provided
<em>P0-PUSCH-AlphaSet</em>, or for a PUSCH transmission for Type-2
random access procedure as described in clause 8.1A,</p>
<p><span class="math inline">\(j = 0\)</span>, <span
class="math inline">\(P_{\text{O\_UE\_PUSCH,}b,f,c}(0) = 0\)</span>, and
<span class="math inline">\(P_{\text{O\_NOMINAL\_PUSCH,}f,c}(0) =
P_{\text{O\_PRE}} + \Delta_{MsgA\_ PUSCH}\)</span>,</p>
<blockquote>
<p>where <span class="math inline">\(P_{\text{O\_PRE}}\)</span> is
provided by <em>msgA-preambleReceivedTargetPower</em>, or by
<em>preambleReceivedTargetPower</em> if
<em>msgA-preambleReceivedTargetPower</em> is not provided and <span
class="math inline">\(\Delta_{MsgA\_ PUSCH}\)</span> is provided by
<em>msgA-DeltaPreamble</em> or <em>deltaPreamble</em>, or <span
class="math inline">\(\Delta_{MsgA\_ PUSCH} = \Delta_{PREAMBLE\_
Msg3}\)</span> dB if <em>msgA-DeltaPreamble</em> and
<em>deltaPreamble</em> are not provided, for carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span></p>
</blockquote>
<p>- For a PUSCH (re)transmission configured by
<em>ConfiguredGrantConfig</em>, <span class="math inline">\(j =
1\)</span>, <span
class="math inline">\(P_{\text{O\_NOMINAL,PUSCH},f,c}(1)\)</span> is
provided by <em>p0-NominalWithoutGrant</em>, or <span
class="math inline">\(P_{\text{O\_NOMINAL,PUSCH},f,c}(1) =
P_{\text{O\_NOMINAL,PUSCH},f,c}(0)\)</span> if
<em>p0-NominalWithoutGrant</em> is not provided.</p>
<p>- If the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and is provided <em>p0-PUSCH-Alpha2</em>,
for a retransmission of a configured grant Type 1 PUSCH, or for
activation or retransmission of a configured grant Type 2 PUSCH,
scheduled by a DCI format that includes a SRS resource set indicator
field, and for active UL BWP <span class="math inline">\(b\)</span> of
carrier <span class="math inline">\(f\)</span> of serving cell</p>
<blockquote>
<p>- If the SRS resource set indicator value is 00, first <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(1)\)</span> value is
provided by the value of <em>p0-PUSCH-Alpha</em> in
<em>ConfiguredGrantConfig</em>.</p>
<p>- If the SRS resource set indicator value is 01, second <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(1)\)</span> value is
provided by the value of <em>p0-PUSCH-Alpha2</em> in
<em>ConfiguredGrantConfig</em>.</p>
<p>- If the SRS resource set indicator value is 10 or 11, first and
second <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(1)\)</span> values
that are respectively associated with the first and second SRS resource
set are respectively provided by the values of <em>p0-PUSCH-Alpha</em>
and by <em>p0-PUSCH-Alpha2</em> in <em>ConfiguredGrantConfig</em>.</p>
</blockquote>
<p>- else if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and is provided <em>p0-PUSCH-Alpha2</em>,
for a transmission of a configured grant Type 1 PUSCH and for active UL
BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell</p>
<blockquote>
<p>- a first <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(1)\)</span> value is
provided by the value of <em>p0-PUSCH-Alpha</em> in
<em>ConfiguredGrantConfig</em> that is associated with the first
<em>srs-ResourceIndicator</em> in <em>rrc-ConfiguredUplinkGrant</em></p>
<p>- a second <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(1)\)</span> value is
provided by the value of <em>p0-PUSCH-Alpha2</em> in
<em>ConfiguredGrantConfig</em> that is associated with the second
<em>srs-ResourceIndicator</em> in <em>rrc-ConfiguredUplinkGrant</em></p>
</blockquote>
<p>- else if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and is provided <em>p0-PUSCH-Alpha2</em>,
for a retransmission of a configured grant Type 1 PUSCH, or for
activation or retransmission of a configured grant Type 2 PUSCH,
scheduled by a DCI format 0_0, and for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell</p>
<blockquote>
<p>- a first <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(1)\)</span> value is
provided by the value of <em>p0-PUSCH-Alpha</em> in
<em>ConfiguredGrantConfig</em></p>
</blockquote>
<p>- else, <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(1)\)</span> is
provided by <em>p0</em> obtained from <em>p0-PUSCH-Alpha</em> in
<em>ConfiguredGrantConfig</em> that provides an index
<em>P0-PUSCH-AlphaSetId</em> to a set of <em>P0-PUSCH-AlphaSet</em>, or
by <em>sdt</em>-<em>P0-PUSCH</em> for a PUSCH (re)transmission as
described in clause 19.1, for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span></p>
<p>- For <span class="math inline">\(j \in \left\{ 2,\ldots,J - 1
\right\} = S_{J}\)</span>, a <span
class="math inline">\(P_{\text{O\_NOMINAL,PUSCH},f,c}(j)\)</span> value,
applicable for all <span class="math inline">\(j \in S_{J}\)</span>, is
provided by <em>p0-NominalWithGrant,</em> or <span
class="math inline">\(P_{\text{O\_NOMINAL,PUSCH},f,c}(j) =
P_{\text{O\_NOMINAL,PUSCH},f,c}(0)\)</span> if
<em>p0-NominalWithGrant</em> is not provided, for each carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> and a set of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\ \)</span>values
are provided by a set of <em>p0</em> in <em>P0-PUSCH-AlphaSet</em>
indicated by a respective set of <em>p0-PUSCH-AlphaSetId</em> for active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span></p>
<p>- If the UE is provided by <em>SRI-PUSCH-PowerControl</em> more than
one values of <em>p0-PUSCH-AlphaSetId</em> and if a DCI format
scheduling the PUSCH transmission includes an SRI field, the UE obtains
a mapping from <em>sri-PUSCH-PowerControlId</em> in
<em>SRI-PUSCH-PowerControl</em> between a set of values for the SRI
field in the DCI format [5, TS 38.212] and a set of indexes provided by
<em>p0-PUSCH-AlphaSetId</em> that map to a set of
<em>P0-PUSCH-AlphaSet</em> values and determines the value of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from the
<em>p0-PUSCH-AlphaSetId</em> value that is mapped to the SRI field
value. If the UE is provided by <em>SRI-PUSCH-PowerControl</em> more
than one values of <em>p0-PUSCH-AlphaSetId</em></p>
<blockquote>
<p>- if the DCI format scheduling the PUSCH transmission includes two
SRI fields and the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook', the UE obtains a mapping from
<em>sri-PUSCH-PowerControlId</em> in <em>SRI-PUSCH-PowerControl</em>
between a set of values for the two SRI fields and a set of indexes
provided by <em>p0-PUSCH-AlphaSetId</em> that map to a set of
<em>P0-PUSCH-AlphaSet</em> values, and determines first and second
values of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from the
<em>p0-PUSCH-AlphaSetId</em> values that are mapped to the values of the
first and second SRI fields, respectively.</p>
<p>- if the DCI format scheduling the PUSCH transmission includes two
SRI fields and the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'nonCodebook', the UE obtains a mapping from
<em>sri-PUSCH-PowerControlId</em> in <em>SRI-PUSCH-PowerControl</em>
between</p>
</blockquote>
<p>- a set of values for the first SRI field value and a set of indexes
provided by <em>p0-PUSCH-AlphaSetId</em> that map to a set of
<em>P0-PUSCH-AlphaSet</em> values, and determines the first value of
<span class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span>
from the <em>p0-PUSCH-AlphaSetId</em> value that is mapped to the first
SRI field value, and</p>
<p>- a set of values associated with the second SRI field value for a
same number of layers as indicated by the first SRI field [5, TS
38.212], and a set of indexes provided by <em>p0-PUSCH-AlphaSetId</em>
that map to a set of <em>P0-PUSCH-AlphaSet</em> values, and determines
the second value of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from the
<em>p0-PUSCH-AlphaSetId</em> value that is mapped to the second SRI
field value corresponding to Tables 7.3.1.1.2-28/29/30/31 of [5, TS
38.212].</p>
<blockquote>
<p>- If the DCI format also includes an open-loop power control
parameter set indication field and a value of the open-loop power
control parameter set indication field is '1' and if the DCI format
scheduling the PUSCH transmission includes an SRI field, the UE
determines a value of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from a
first value in <em>P0-PUSCH-Set</em> with a <em>p0-PUSCH-SetId</em>
value mapped to the SRI field value.</p>
<p>- If the UE is provided by <em>SRI-PUSCH-PowerControl</em> more than
one values of <em>p0-PUSCH-AlphaSetId</em></p>
</blockquote>
<p>- if a DCI format scheduling the PUSCH transmission includes two SRI
fields and an open-loop power control parameter set indication field and
the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook'</p>
<p>- if a value of the open-loop power control parameter set indication
field is '0', the UE determines two values of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from the
<em>p0-PUSCH-AlphaSetId</em> values in <em>SRI-PUSCH-PowerControl</em>
that are mapped to the two SRI values corresponding to each SRS resource
set with <em>usage</em> set to 'codebook'.</p>
<p>- if a value of the open-loop power control parameter set indication
field is '1', the UE determines two values of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from
first values in <em>P0-PUSCH-Set</em> in <em>P0-PUSCH-SetList</em> and
<em>P0-PUSCH-Set</em> in <em>P0-PUSCH-SetList</em>2 with
<em>p0-PUSCH-SetId</em> values mapped to the two SRI values
corresponding to each SRS resource set with <em>usage</em> set to
'codebook', respectively.</p>
<p>- if a DCI format scheduling the PUSCH transmission includes two SRI
fields and an open-loop power control parameter set indication field and
the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'nonCodebook',</p>
<p>- if a value of the open-loop power control parameter set indication
field is '0', the UE determines two values of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from the
<em>p0-PUSCH-AlphaSetId</em> values in <em>SRI-PUSCH-PowerControl</em>
that are mapped to the first SRI field value corresponding to the first
SRS resource set with <em>usage</em> set to 'nonCodebook' and to a
second value, that is associated with the second SRI field value
corresponding to Tables 7.3.1.1.2-28/29/30/31 of [5, TS 38.212] for a
same number of layers as indicated by the first SRI field value,
corresponding to the second SRS resource set with <em>usage</em> set to
'nonCodebook'.</p>
<p>- if a value of the open-loop power control parameter set indication
field is '1', the UE determines two values of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from
first values in <em>P0-PUSCH-Set</em> in <em>P0-PUSCH-SetList</em> and
<em>P0-PUSCH-Set</em> in <em>P0-PUSCH-SetList</em>2 with
<em>p0-PUSCH-SetId</em> values mapped to the first SRI field value
corresponding to the first SRS resource set with <em>usage</em> set to
'nonCodebook, and a second value, that is associated with the second SRS
field value corresponding to Tables 7.3.1.1.2-28/29/30/31 of [5, TS
38.212] for a same number of layers as indicated by the first SRI field
value, corresponding to the second SRS resource set with <em>usage</em>
set to 'nonCodebook', respectively.</p>
<p>- if the UE is not provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and if the PUSCH transmission, except for
the PUSCH retransmission corresponding to a RAR UL grant, is scheduled
by a DCI format that does not include an SRI field, or if
<em>SRI-PUSCH-PowerControl</em> is not provided to the UE, <span
class="math inline">\(j = 2\)</span>,</p>
<p>- if <em>P0-PUSCH-Set</em> is provided to the UE and the DCI format
includes an open-loop power control parameter set indication field, the
UE determines a value of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from</p>
<p>- a first <em>P0-PUSCH-AlphaSet</em> in <em>p0-AlphaSets</em> if a
value of the open-loop power control parameter set indication field is
'0' or '00'</p>
<p>- a first value in <em>P0-PUSCH-Set</em> with the lowest
<em>p0-PUSCH-SetID</em> value if a value of the open-loop power control
parameter set indication field is '1' or '01'</p>
<p>- a second value in <em>P0-PUSCH-Set</em> with the lowest
<em>p0-PUSCH-SetID</em> value if a value of the open-loop power control
parameter set indication field is '10'</p>
<p>- else, the UE determines <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from the
value of the first <em>P0-PUSCH-AlphaSet</em> in
<em>p0-AlphaSets</em></p>
<p>- if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and the PUSCH transmission is scheduled by a
DCI format that does not include an SRI field and includes an SRS
resource set indicator field with value 10 or 11</p>
<blockquote>
<p>- if <em>P0-PUSCH-Set</em> is provided to the UE and the DCI format
includes an open-loop power control parameter set indication field, the
UE determines first and second values of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span>
respectively associated with the first and second SRS resource set
as</p>
<p>- first and second <em>P0-PUSCH-AlphaSet</em> in
<em>p0-AlphaSets</em> if the open-loop power control parameter set
indication value is '0' or '00'</p>
<p>- first value in <em>P0-PUSCH-Set</em> with the lowest
<em>p0-PUSCH-SetID</em> value in <em>p0-PUSCH-SetList</em> and first
value in <em>P0-PUSCH-Set</em> with the lowest <em>p0-PUSCH-SetID</em>
value in <em>p0-PUSCH-SetList2</em>, respectively, if the open-loop
power control parameter set indication value is '1' or '01'</p>
<p>- second value in <em>P0-PUSCH-Set</em> with the lowest
<em>p0-PUSCH-SetID</em> value in <em>p0-PUSCH-SetList</em> and second
value in <em>P0-PUSCH-Set</em> with the lowest <em>p0-PUSCH-SetID</em>
in <em>p0-PUSCH-SetList2</em>, respectively, if the open-loop power
control parameter set indication value is '10' or '11'</p>
</blockquote>
<p>- else, the UE determines first and second values <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span>
respectively associated with the first and second SRS resource set from
the values of the first and second <em>P0-PUSCH-AlphaSet</em> in
<em>p0-AlphaSets</em>, respectively</p>
<p>- if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook', and the PUSCH transmission is scheduled by
a DCI format that does not include an SRI field and includes an SRS
resource set indicator field with value '00'</p>
<blockquote>
<p>- if the UE is provided <em>P0-PUSCH-Set</em> and the DCI format
includes an open-loop power control parameter set indication field, the
UE determines a value of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> as</p>
<p>- first <em>P0-PUSCH-AlphaSet</em> in <em>p0-AlphaSets</em> if the
open-loop power control parameter set indication value is '0' or
'00'</p>
<p>- first value in <em>P0-PUSCH-Set</em> with the lowest
<em>p0-PUSCH-SetID</em> value in <em>p0-PUSCH-SetList</em>, if the
open-loop power control parameter set indication value is '1' or
'01'</p>
<p>- second value in <em>P0-PUSCH-Set</em> with the lowest
<em>p0-PUSCH-SetID</em> value in <em>p0-PUSCH-SetList</em>, if the
open-loop power control parameter set indication value is '10' or
'11'</p>
</blockquote>
<p>- else, the UE determines a value of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from the
value of the first <em>P0-PUSCH-AlphaSet</em> in
<em>p0-AlphaSets</em></p>
<p>- if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook', and the PUSCH transmission is scheduled by
a DCI format that does not include an SRI field and includes an SRS
resource set indicator field with value '01'</p>
<p>- if <em>P0-PUSCH-Set</em> is provided to the UE and the DCI format
includes an open-loop power control parameter set indication field, the
UE determines a value of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> as</p>
<blockquote>
<p>- second <em>P0-PUSCH-AlphaSet</em> in <em>p0-AlphaSets</em> if the
open-loop power control parameter set indication value is '0' or
'00'</p>
<p>- first value in <em>P0-PUSCH-Set</em> with the lowest
<em>p0-PUSCH-SetID</em> value in <em>p0-PUSCH-SetList2</em>, if the
open-loop power control parameter set indication value is '1' or
'01'</p>
<p>- second value in <em>P0-PUSCH-Set</em> with the lowest
<em>p0-PUSCH-SetID</em> in <em>p0-PUSCH-SetList2</em>, if the open-loop
power control parameter set indication value is '10' or '11'</p>
</blockquote>
<p>- else, the UE determines a value of <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> from the
value of the second <em>P0-PUSCH-AlphaSet</em> in
<em>p0-AlphaSets</em></p>
<p>- For <span class="math inline">\(\alpha_{b,f,c}(j)\)</span></p>
<p>- For <span class="math inline">\(j = 0\)</span>,</p>
<p>- if <span class="math inline">\(P_{\text{O\_NOMINAL\_PUSCH,}f,c}(0)
= P_{\text{O\_PRE}} + \Delta_{MsgA\_ PUSCH}\)</span> and
<em>msgA-Alpha</em> is provided, <span
class="math inline">\(\alpha_{b,f,c}(0)\)</span> is the value of
<em>msgA-Alpha</em></p>
<p>- elseif <span
class="math inline">\(P_{\text{O\_NOMINAL\_PUSCH,}f,c}(0) =
P_{\text{O\_PRE}} + \Delta_{PREAMBLE\_ Msg3}\)</span> or
<em>msgA-Alpha</em> is not provided, and <em>msg3-Alpha</em> is
provided, <span class="math inline">\(\alpha_{b,f,c}(0)\)</span> is the
value of <em>msg3-Alpha</em></p>
<p>- else, <span class="math inline">\(\alpha_{b,f,c}(0) =
1\)</span></p>
<p>- For <span class="math inline">\(j = 1\)</span>,</p>
<p>- if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and is provided <em>p0-PUSCH-Alpha2</em>,
for a retransmission of a configured grant Type 1 PUSCH, or for
activation or retransmission of a configured grant Type 2 PUSCH,
scheduled by a DCI format that includes an SRS resource set indicator
field, and for active UL BWP <span class="math inline">\(b\)</span> of
carrier <span class="math inline">\(f\)</span> of serving cell</p>
<blockquote>
<p>- if the SRS resource set indicator value is '00', first <span
class="math inline">\(\alpha_{b,f,c}(1)\)</span> value is provided by
<em>p0-PUSCH-Alpha</em> in <em>ConfiguredGrantConfig</em></p>
<p>- if the SRS resource set indicator value is '01', first <span
class="math inline">\(\alpha_{b,f,c}(1)\)</span> value is provided by
<em>p0-PUSCH-Alpha2</em> in <em>ConfiguredGrantConfig</em></p>
<p>- if the SRS resource set indicator value is '10' or '11', first and
second <span class="math inline">\(\alpha_{b,f,c}(1)\)</span> values
associated with the first and second SRS resource set are respectively
provided by <em>p0-PUSCH-Alpha</em> and <em>p0-PUSCH-Alpha2</em> in
<em>ConfiguredGrantConfig</em></p>
</blockquote>
<p>- else if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and is provided <em>p0-PUSCH-Alpha2</em>,
for a transmission of a configured grant Type 1 PUSCH and for active UL
BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell</p>
<p>- a first <span class="math inline">\(\alpha_{b,f,c}(1)\)</span>
value is provided by the value of <em>p0-PUSCH-Alpha</em> in
<em>ConfiguredGrantConfig</em> that is associated with the first
<em>srs-ResourceIndicator</em> in
<em>rrc-ConfiguredUplinkGrant</em>.</p>
<p>- a second <span class="math inline">\(\alpha_{b,f,c}(1)\)</span>
value is provided by the value of <em>p0-PUSCH-Alpha2</em> in
<em>ConfiguredGrantConfig</em> that is associated with the second
<em>srs-ResourceIndicator</em> in
<em>rrc-ConfiguredUplinkGrant</em>.</p>
<p>- else if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and is provided <em>p0-PUSCH-Alpha2</em>,
for a retransmission of a configured grant Type 1 PUSCH, or for
activation or retransmission of a configured grant Type 2 PUSCH,
scheduled by a DCI format 0_0 and for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell</p>
<p>- a first<span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(1)\)</span> <span
class="math inline">\(\alpha_{b,f,c}(1)\)</span> value is provided by
the value of <em>p0-PUSCH-Alpha</em> in
<em>ConfiguredGrantConfig.</em></p>
<p>- else <span class="math inline">\(\alpha_{b,f,c}(1)\)</span> is
provided by <em>alpha</em> obtained from <em>p0-PUSCH-Alpha</em> in
<em>ConfiguredGrantConfig</em> providing an index
<em>P0-PUSCH-AlphaSetId</em> to a set of <em>P0-PUSCH-AlphaSet</em>, or
by <em>sdt</em>-<em>Alpha</em> for a PUSCH (re)transmission as described
in clause 19.1, for active UL BWP <span class="math inline">\(b\)</span>
of carrier <span class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span></p>
<p>- For <span class="math inline">\(j \in S_{J}\)</span>, a set of
<span class="math inline">\(\alpha_{b,f,c}(j)\)</span> values are
provided by a set of <em>alpha</em> in <em>P0-PUSCH-AlphaSet</em>
indicated by a respective set of <em>p0-PUSCH-AlphaSetId</em> for active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span></p>
<p>- If the UE is provided <em>SRI-PUSCH-PowerControl</em> and more than
one values of <em>p0-PUSCH-AlphaSetId</em> in <em>p0-AlphaSets</em>,</p>
<p>- if a DCI format scheduling the PUSCH transmission includes two SRI
fields and the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook', the UE obtains a mapping from
<em>sri-PUSCH-PowerControlId</em> in <em>SRI-PUSCH-PowerControl</em>
between a set of values for</p>
<p>- the two SRI fields and a set of indexes provided by
<em>P0-PUSCH-AlphaSetId</em> that map to <em>P0-PUSCH-AlphaSet</em>
values, and determines first and second values of <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span> from the
<em>P0-PUSCH-AlphaSetID</em> values that are mapped to the values of the
first and second SRI field values, respectively.</p>
<p>- if a DCI format scheduling the PUSCH transmission includes two SRI
fields and the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'nonCodebook', the UE obtains a mapping from
<em>sri-PUSCH-PowerControlId</em> in <em>SRI-PUSCH-PowerControl</em>
between a set of values for</p>
<p>- the first SRI field and a set of indexes provided by
<em>P0-PUSCH-AlphaSetId</em> that map to <em>P0-PUSCH-AlphaSet</em>
values, and determines first value of <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span> from the
<em>P0-PUSCH-AlphaSetID</em> value that is mapped to the first SRI field
value, and</p>
<p>- the second value, associated with the second SRI field value
corresponding to Tables 7.3.1.1.2-28/29/30/31 of [5, TS 38.212] for a
same number of layers as indicated by the first SRI field value, and a
set of indexes provided by <em>p0-PUSCH-AlphaSetId</em> that map to a
set of <em>P0-PUSCH-AlphaSet</em> values, and determines the second
value of <span class="math inline">\(\alpha_{b,f,c}(j)\)</span> from the
<em>p0-PUSCH-AlphaSetId</em> value that is mapped to the second SRI
field value</p>
<p>- if a DCI format scheduling the PUSCH transmission includes one SRI
field, the UE obtains a mapping from <em>sri-PUSCH-PowerControlId</em>
in <em>SRI-PUSCH-PowerControl</em> between a set of values for the SRI
field in the DCI format [5, TS 38.212] and a set of indexes provided by
<em>p0-PUSCH-AlphaSetId</em> that map to a set of
<em>P0-PUSCH-AlphaSet</em> values and determines the values of <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span> from the
<em>p0-PUSCH-AlphaSetId</em> value that is mapped to the SRI field
value</p>
<p>- If the UE is not provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and if the PUSCH transmission except for the
PUSCH retransmission corresponding to a RAR UL grant is scheduled by a
DCI format that does not include an SRI field, or if
<em>SRI-PUSCH-PowerControl</em> is not provided to the UE, <span
class="math inline">\(j = 2\)</span>, and the UE determines <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span> from the value of the
first <em>P0-PUSCH-AlphaSet</em> in <em>p0-AlphaSets</em></p>
<p>- If the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and the PUSCH transmission is scheduled by a
DCI format that does not include an SRI field and includes an SRS
resource set indicator field with value '10' or '11', the UE determines
<span class="math inline">\(\alpha_{b,f,c}(j)\)</span> respectively
associated with the first and second SRS resource set from first and
second <em>P0-PUSCH-AlphaSet</em> in <em>p0-AlphaSets</em></p>
<p>- If the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook', and the PUSCH transmission is scheduled by
a DCI format that does not include an SRI field and includes an SRS
resource set indicator field with value '00' or '01', the UE determines
<span class="math inline">\(\alpha_{b,f,c}(j)\)</span> from first
<em>P0-PUSCH-AlphaSet</em> or second <em>P0-PUSCH-AlphaSet</em> in
<em>p0-AlphaSets</em>, respectively.</p>
<p>- <span class="math inline">\(M_{RB,b,f,c}^{PUSCH}(i)\)</span> is the
bandwidth of the PUSCH resource assignment expressed in number of
resource blocks for PUSCH transmission occasion <span
class="math inline">\(i\)</span> on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> and <span
class="math inline">\(\mu\)</span> is a SCS configuration defined in [4,
TS 38.211]</p>
<p>- <span class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> is a
downlink pathloss estimate in dB calculated by the UE using reference
signal (RS) index <span class="math inline">\(q_{d}\)</span> for the
active DL BWP, as described in clause 12, of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span></p>
<p>- If the UE is not provided <em>PUSCH-PathlossReferenceRS</em> and
<em>enableDefaultBeamPL-ForSRS</em>, or before the UE is provided
dedicated higher layer parameters, the UE calculates <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> using a RS resource
from an SS/PBCH block with same SS/PBCH block index as the one the UE
uses to obtain <em>MIB</em>, or using the SS/PBCH block the UE acquired
the time and frequency synchronization for a secondary cell.</p>
<p>- If the UE is configured with a number of RS resource indexes, up to
the value of <em>maxNrofPUSCH-PathlossReferenceRSs</em>, and a
respective set of RS configurations for the number of RS resource
indexes by <em>PUSCH-PathlossReferenceRS</em>, the set of RS resource
indexes can include one or both of a set of SS/PBCH block indexes, each
provided by <em>ssb-Index</em> when a value of a corresponding
<em>pusch-PathlossReferenceRS-Id</em> maps to a SS/PBCH block index, and
a set of CSI-RS resource indexes, each provided by <em>csi-RS-Index</em>
when a value of a corresponding <em>pusch-PathlossReferenceRS-Id</em>
maps to a CSI-RS resource index. The UE identifies a RS resource index
<span class="math inline">\(q_{d}\)</span> in the set of RS resource
indexes to correspond either to a SS/PBCH block index or to a CSI-RS
resource index as provided by <em>pusch-PathlossReferenceRS-Id</em> in
<em>PUSCH-PathlossReferenceRS</em></p>
<p>- If the PUSCH transmission is scheduled by a RAR UL grant as
described in clause 8.3, or for a PUSCH transmission for Type-2 random
access procedure as described in clause 8.1A, the UE uses the same RS
resource index <span class="math inline">\(q_{d}\)</span> as for a
corresponding PRACH transmission</p>
<p>- If the UE is provided <em>SRI-PUSCH-PowerControl</em> and more than
one values of <em>PUSCH-PathlossReferenceRS-Id</em>, the UE obtains a
mapping from <em>sri-PUSCH-PowerControlId</em> in
<em>SRI-PUSCH-PowerControl</em> between a set of values for the SRI
field, or for first and second SRI fields if the UE is provided two SRS
resource sets in <em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook', or values for a first SRI field and values associated with a
second SRI field value corresponding to Tables 7.3.1.1.2-28/29/30/31 of
[5, TS 38.212] for a same number of layers as indicated by the first SRI
field value if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'nonCodebook', in a DCI format scheduling the PUSCH transmission and a
set of <em>PUSCH-PathlossReferenceRS-Id</em> values and determines the
RS resource index <span class="math inline">\(q_{d}\)</span>, or
respective first and second RS resource indexes <span
class="math inline">\(q_{d}\)</span>, from the value of
<em>PUSCH-PathlossReferenceRS-Id</em> that is mapped to the SRI field
value, or from the values of <em>PUSCH-PathlossReferenceRS-Id</em> that
are mapped to respective first and second SRI field values if the UE is
provided two SRS resource sets in <em>srs-ResourceSetToAddModList</em>
or <em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set
to 'codebook', or from the values of
<em>PUSCH-PathlossReferenceRS-Id</em> that are mapped to respective
first SRI field value and a value associated with the second SRI field
value corresponding to Tables 7.3.1.1.2-28/29/30/31 of [5, TS 38.212]
for a same number of layers as indicated by the first SRI field value if
the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'nonCodebook',</p>
<p>where the RS resource is either on serving cell <span
class="math inline">\(c\)</span> or, if provided, on a serving cell
indicated by a value of <em>pathlossReferenceLinking</em></p>
<p>- If the PUSCH transmission is scheduled by DCI format 0_0, and</p>
<p>- if two spatial settings from <em>PUCCH-SpatialRelationInfo</em> are
activated for a PUCCH resource with a lowest index for active UL BWP
<span class="math inline">\(b\)</span> of each carrier <span
class="math inline">\(f\)</span> and serving cell <span
class="math inline">\(c\)</span>, the UE uses the same RS resource index
<span class="math inline">\(q_{d}\)</span> as for a PUCCH transmission
with a spatial setting from the two spatial settings with lowest index
in the PUCCH resource with the lowest index for active UL BWP <span
class="math inline">\(b\)</span> of each carrier <span
class="math inline">\(f\)</span> and serving cell <span
class="math inline">\(c\)</span></p>
<p>- else, if the UE is provided a spatial setting by
<em>PUCCH-SpatialRelationInfo</em> for a PUCCH resource with a lowest
index for active UL BWP <span class="math inline">\(b\)</span> of each
carrier <span class="math inline">\(f\)</span> and serving cell <span
class="math inline">\(c\)</span>, as described in clause 9.2.2, the UE
uses the same RS resource index <span
class="math inline">\(q_{d}\)</span> as for a PUCCH transmission in the
PUCCH resource with the lowest index</p>
<p>- If the PUSCH transmission is not scheduled by DCI format 0_0, and
if the UE is provided <em>enableDefaultBeamPL-ForSRS</em> and is not
provided <em>PUSCH-PathlossReferenceRS</em> and
<em>PUSCH-PathlossReferenceRS-r16,</em> the UE uses the same RS resource
index <span class="math inline">\(q_{d}\)</span> as for an SRS resource
set with an SRS resource associated with the PUSCH transmission</p>
<p>- If</p>
<p>- the UE is not provided <em>enableDefaultBeamPL-ForPUSCH0-0</em> and
the PUSCH transmission is scheduled by DCI format 0_0 and the UE is not
provided a spatial setting for a PUCCH transmission, or</p>
<p>- the PUSCH transmission is scheduled by DCI format 0_1 or DCI format
0_2 that does not include an SRI field, or</p>
<p>- <em>SRI-PUSCH-PowerControl</em> is not provided to the UE,</p>
<p>the UE determines a RS resource index <span
class="math inline">\(q_{d}\)</span> with a respective
<em>PUSCH-PathlossReferenceRS-Id</em> value being equal to zero where
the RS resource is either on serving cell <span
class="math inline">\(c\)</span> or, if provided, on a serving cell
indicated by a value of <em>pathlossReferenceLinking</em></p>
<p>- If</p>
<p>- the PUSCH transmission is scheduled by DCI format 0_0 on serving
cell <span class="math inline">\(c\)</span>,</p>
<p>- the UE is not provided PUCCH resources for the active UL BWP of
serving cell <span class="math inline">\(c\)</span>, and</p>
<p>- the UE is provided <em>enableDefaultBeamPL-ForPUSCH0-0</em></p>
<p>the UE determines a RS resource index <span
class="math inline">\(q_{d}\)</span> providing a periodic RS resource
configured with <em>qcl-Type</em> set to 'typeD' in the TCI state or the
QCL assumption of a CORESET with the lowest index in the active DL BWP
of the serving cell <span class="math inline">\(c\)</span>. If the
CORESET has two activated TCI states, as described in clause 10.1, the
UE determines the RS resource index <span
class="math inline">\(q_{d}\)</span> based on the first TCI state.</p>
<p>- If</p>
<p>- the PUSCH transmission is scheduled by DCI format 0_0 on serving
cell <span class="math inline">\(c\)</span>,</p>
<p>- the UE is not provided a spatial setting for PUCCH resources on the
active UL BWP of the primary cell [11, TS 38.321], and</p>
<p>- the UE is provided <em>enableDefaultBeamPL-ForPUSCH0-0</em></p>
<p>the UE determines a RS resource index <span
class="math inline">\(q_{d}\)</span> providing a periodic RS resource
configured with <em>qcl-Type</em> set to 'typeD' in the TCI state or the
QCL assumption of a CORESET with the lowest index in the active DL BWP
of the serving cell <span class="math inline">\(c\)</span>. If the
CORESET has two activated TCI states, as described in clause 10.1, the
UE determines the RS resource index <span
class="math inline">\(q_{d}\)</span> based on the first TCI state.</p>
<p>- For a PUSCH transmission configured by
<em>ConfiguredGrantConfig,</em> if <em>rrc-ConfiguredUplinkGrant</em> is
included in <em>ConfiguredGrantConfig</em>, a RS resource index <span
class="math inline">\(q_{d}\)</span> is provided by a value of
<em>pathlossReferenceIndex</em> included in
<em>rrc-ConfiguredUplinkGrant</em> where the RS resource is either on
serving cell <span class="math inline">\(c\)</span> or, if provided, on
a serving cell indicated by a value of
<em>pathlossReferenceLinking</em>. If the UE is provided two SRS
resource sets in <em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and for configured grant Type 1 PUSCH, first
and second RS resource indexes <span
class="math inline">\(q_{d}\)</span> that are respectively associated
with the first and second <em>srs-ResourceIndicator</em> in
<em>rrc-ConfiguredUplinkGrant</em> are provided by respective values of
<em>pathlossReferenceIndex</em> and <em>pathlossReferenceIndex2</em> in
<em>rrc-ConfiguredUplinkGrant</em>.</p>
<p>- For a PUSCH transmission configured by
<em>ConfiguredGrantConfig</em> that does not include
<em>rrc-ConfiguredUplinkGrant</em>, the UE determines a RS resource
index <span class="math inline">\(q_{d}\)</span> from a value of
<em>PUSCH-PathlossReferenceRS-Id</em> that is mapped to a SRI field
value in a DCI format activating the PUSCH transmission.</p>
<p>- If the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' and the DCI format activating the PUSCH transmission includes
two SRI fields, the UE determines first and second RS resource indexes
<span class="math inline">\(q_{d}\)</span> from respective first and
second values of <em>PUSCH-PathlossReferenceRS-Id</em> that are mapped
to the first and second SRI values corresponding to each SRS resource
set with <em>usage</em> set to 'codebook', respectively.</p>
<p>- If the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'nonCodebook' and the DCI format activating the PUSCH transmission
includes two SRI fields, the UE determines first and second RS resource
indexes <span class="math inline">\(q_{d}\)</span> from respective first
and second values of <em>PUSCH-PathlossReferenceRS-Id</em> that are
mapped to the first SRI value corresponding to the first SRS resource
set with <em>usage</em> set to 'nonCodebook', and the value, associated
with the second SRI field value corresponding to Tables
7.3.1.1.2-28/29/30/31 of [5, TS 38.212] for a same number of layers as
indicated by the first SRI field value, corresponding to the second SRS
resource set with <em>usage</em> set to 'nonCodebook'.</p>
<p>- If the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and the DCI format activating the PUSCH
transmission does not include an SRI field, the UE determines first and
second RS resource indexes <span class="math inline">\(q_{d}\)</span>
respectively associated with the first and second SRS resource set with
respective first and second <em>PUSCH-PathlossReferenceRS-Id</em> value
being equal to zero and one.</p>
<p>- If the DCI format activating the PUSCH transmission does not
include an SRI field, the UE determines a RS resource index <span
class="math inline">\(q_{d}\)</span> with a respective
<em>PUSCH-PathlossReferenceRS-Id</em> value being equal to zero</p>
<p>where the RS resources are either on serving cell <span
class="math inline">\(c\)</span> or, if provided, on a serving cell
indicated by a value of <em>pathlossReferenceLinking</em></p>
<p>- If the UE is provided <em>enablePL-RS-UpdateForPUSCH-SRS</em>, a
mapping between <em>sri-PUSCH-PowerControlId</em> and
<em>PUSCH-PathlossReferenceRS-Id</em> values can be updated by a MAC CE
as described in [11, TS 38.321]</p>
<p>- For a PUSCH transmission scheduled by a DCI format that does not
include an SRI field, or for a PUSCH transmission configured by
<em>ConfiguredGrantConfig</em> and activated, as described in clause
10.2, by a DCI format that does not include an SRI field, the UE
determines a RS resource index <span
class="math inline">\(q_{d}\)</span> from the
<em>PUSCH-PathlossReferenceRS-Id</em> mapped to
<em>sri-PUSCH-PowerControlId</em> = 0. If the UE is provided two SRS
resource sets in <em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook', the UE determines first and second RS
resource indexes <span class="math inline">\(q_{d}\)</span> from
respective <em>PUSCH-PathlossReferenceRS-Id</em> mapped to
<em>sri-PUSCH-PowerControlId</em> = 0 of
<em>sri-PUSCH-MappingToAddModList</em> and
<em>sri-PUSCH-PowerControlId</em> = 0 of
<em>sri-PUSCH-MappingToAddModList2</em>, respectively.</p>
<p>- If the UE is not provided
<em>enablePL-RS-UpdateForPUSCH-SRS</em></p>
<p>- For a PUSCH transmission scheduled by a DCI format that does not
include an SRI field, if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook', the UE determines first and second RS
resource indexes <span class="math inline">\(q_{d}\)</span> respectively
associated with the first and second SRS resource set with respective
first and second <em>PUSCH-PathlossReferenceRS-Id</em> values being
equal to 0 and 1.</p>
<p><span class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> =
<em>referenceSignalPower</em> – higher layer filtered RSRP, where
<em>referenceSignalPower</em> is provided by higher layers and RSRP is
defined in [7, TS 38.215] for the reference serving cell and the higher
layer filter configuration provided by <em>QuantityConfig</em> is
defined in [12, TS 38.331] for the reference serving cell</p>
<p>If the UE is not configured periodic CSI-RS reception,
<em>referenceSignalPower</em> is provided by
<em>ss-PBCH-BlockPower</em>. If the UE is configured periodic CSI-RS
reception, <em>referenceSignalPower</em> is provided either by
<em>ss-PBCH-BlockPower</em> or by <em>powerControlOffsetSS</em>
providing an offset of the CSI-RS transmission power relative to the
SS/PBCH block transmission power [6, TS 38.214]. If
<em>powerControlOffsetSS</em> is not provided to the UE, the UE assumes
an offset of 0 dB.</p>
<p>- <span class="math inline">\(\mathrm{\Delta}_{TF,b,f,c}(i) =
10\log_{10}\left( \left( 2^{BPRE \cdot K_{s}} - 1 \right) \cdot
\beta_{offset}^{PUSCH} \right)\)</span> for <span
class="math inline">\(K_{s} = 1.25\)</span> and <span
class="math inline">\(\mathrm{\Delta}_{TF,b,f,c}(i) = 0\)</span> for
<span class="math inline">\(K_{s} = 0\)</span> where <span
class="math inline">\(K_{s}\)</span> is provided by <em>deltaMCS</em>
for each UL BWP <span class="math inline">\(b\)</span> of each carrier
<span class="math inline">\(f\)</span> and serving cell <span
class="math inline">\(c\)</span>. If the PUSCH transmission is over more
than one layer [6, TS 38.214], <span
class="math inline">\(\mathrm{\Delta}_{TF,b,f,c}(i) = 0\)</span>. <span
class="math inline">\(BPRE\)</span> and <span
class="math inline">\(\beta_{offset}^{PUSCH}\)</span>, for active UL BWP
<span class="math inline">\(b\)</span> of each carrier <span
class="math inline">\(f\)</span> and each serving cell <span
class="math inline">\(c\)</span>, are computed as below</p>
<p>- <span class="math inline">\(BPRE = \sum_{r = 0}^{C -
1}\frac{K_{r}}{N_{RE}}\)</span> for PUSCH with UL-SCH data and <span
class="math inline">\(BPRE = \frac{Q_{m} \cdot
R}{\beta_{offset}^{PUSCH}}\)</span> for CSI transmission in a PUSCH
without UL-SCH data, where</p>
<p>- <span class="math inline">\(C\)</span> is a number of transmitted
code blocks, <span class="math inline">\(K_{r}\)</span> is a size for
code block <span class="math inline">\(r\)</span>, and <span
class="math inline">\(N_{RE}\)</span> is a number of resource elements
determined as <span class="math inline">\(N_{RE} = N \cdot
M_{RB,b,f,c}^{PUSCH}(i) \cdot \sum_{j = 0}^{N_{symb,b,f,c}^{PUSCH}(i) -
1}{N_{sc,data}^{RB}(i,j)}\)</span>, where <span class="math inline">\(N
\geq 1\)</span> is provided by <em>numberOfSlotsTBoMS</em> as described
in [6, TS 38.214] and <span class="math inline">\(N = 1\)</span> if
<em>numberOfSlotsTBoMS</em> is not provided, <span
class="math inline">\(N_{symb,b,f,c}^{PUSCH}(i)\)</span> is a number of
symbols for PUSCH transmission occasion <span
class="math inline">\(i\)</span> on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, <span
class="math inline">\(N_{sc,data}^{RB}(i,j)\)</span> is a number of
subcarriers excluding DM-RS subcarriers and phase-tracking RS samples
[4, TS 38.211] in PUSCH symbol <span class="math inline">\(j\)</span>
and assuming no segmentation for a nominal repetition in case the PUSCH
transmission is with repetition Type B, <span class="math inline">\(0
\leq j &lt; N_{symb,b,f,c}^{PUSCH}(i)\)</span>, and <span
class="math inline">\(c\)</span>, <span
class="math inline">\(K_{r}\)</span> are defined in [5, TS 38.212]</p>
<p>- <span class="math inline">\(\beta_{offset}^{PUSCH} = 1\)</span>
when the PUSCH includes UL-SCH data and <span
class="math inline">\(\beta_{offset}^{PUSCH} =
\beta_{offset}^{CSI,1}\)</span>, as described in clause 9.3, when the
PUSCH includes CSI and does not include UL-SCH data</p>
<p>- <span class="math inline">\(Q_{m}\)</span> is the modulation order
and <span class="math inline">\(R\)</span> is the target code rate, as
described in [6, TS 38.214], provided by the DCI format scheduling the
PUSCH transmission that includes CSI and does not include UL-SCH
data</p>
<p>- For the PUSCH power control adjustment state <span
class="math inline">\(f_{b,f,c}(i,l)\)</span> for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> in PUSCH transmission occasion <span
class="math inline">\(i\)</span></p>
<p>- <span class="math inline">\(\delta_{PUSCH,b,f,c}(i,l)\)</span> is a
TPC command value included in a DCI format that schedules the PUSCH
transmission occasion <span class="math inline">\(i\)</span> on active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> or jointly coded with other TPC
commands in a DCI format 2_2 with CRC scrambled by TPC-PUSCH-RNTI, as
described in clause 11.3</p>
<p>- <span class="math inline">\(l \in \left\{ 0,1 \right\}\)</span> if
the UE is configured with <em>twoPUSCH-PC-AdjustmentStates</em> and
<span class="math inline">\(l = 0\)</span> if the UE is not configured
with <em>twoPUSCH-PC-AdjustmentStates</em> or if the PUSCH transmission
is scheduled by a RAR UL grant as described in clause 8.3</p>
<p>- if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook', and is provided <em>p0-PUSCH-Alpha2</em>,
for a retransmission of a configured grant Type 1 PUSCH, or for
activation or retransmission of a configured grant Type 2 PUSCH,
scheduled by a DCI format that includes a SRS resource set indicator
field, and for active UL BWP <span class="math inline">\(b\)</span> of
carrier <span class="math inline">\(f\)</span> of serving cell</p>
<p>- if the SRS resource set indicator value is 00, <span
class="math inline">\(l\)</span> is equal to the value of
<em>powerControlLoopToUse</em> in <em>ConfiguredGrantConfig</em></p>
<p>- if the SRS resource set indicator value is 01, <span
class="math inline">\(l\)</span> is equal to the value of
<em>powerControlLoopToUse2</em> in <em>ConfiguredGrantConfig</em></p>
<p>- if the SRS resource set indicator value is 10 or 11, a first <span
class="math inline">\(l\)</span> and a second <span
class="math inline">\(l\)</span> respectively associated with the first
and second SRS resource set are respectively equal to
<em>powerControlLoopToUse</em> and <em>powerControlLoopToUse2</em> in
<em>ConfiguredGrantConfig</em></p>
<p>- else if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and is provided <em>p0-PUSCH-Alpha2</em>,
for a transmission of a configured grant Type 1 PUSCH and for active UL
BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell</p>
<p>- a first <span class="math inline">\(l\)</span> is equal to the
value of <em>powerControlLoopToUse</em> in
<em>ConfiguredGrantConfig</em> that is associated with the first
<em>srs-ResourceIndicator</em> in <em>rrc-ConfiguredUplinkGrant</em></p>
<p>- a second <span class="math inline">\(l\)</span> is equal to the
value of <em>powerControlLoopToUse2</em> in
<em>ConfiguredGrantConfig</em> that is associated with the second
<em>srs-ResourceIndicator</em> in <em>rrc-ConfiguredUplinkGrant</em></p>
<p>- else if the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' and is provided <em>p0-PUSCH-Alpha2</em>,
for a retransmission of a configured grant Type 1 PUSCH, or for
activation or retransmission of a configured grant Type 2 PUSCH,
scheduled by a DCI format 0_0 and for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell</p>
<p>- <span class="math inline">\(l\)</span> is equal to the value of
<em>powerControlLoopToUse</em> in <em>ConfiguredGrantConfig</em></p>
<p>- else, for a PUSCH (re)transmission configured by
<em>ConfiguredGrantConfig</em>, the value of <span
class="math inline">\(l \in \left\{ 0,1 \right\}\)</span> is provided to
the UE by <em>powerControlLoopToUse</em> in
<em>ConfiguredGrantConfig</em>.</p>
<p>- If the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook', is provided <em>SRI-PUSCH-PowerControl</em>, and a DCI
format scheduling the PUSCH transmission includes two SRI fields, the UE
obtains a mapping from <em>sri-PUSCH-PowerControlId</em> in
<em>SRI-PUSCH-PowerControl</em> between a set of values for the first
and second SRI fields and the <span class="math inline">\(l\)</span>
values provided by <em>sri-PUSCH-ClosedLoopIndex</em>, and determines
the <span class="math inline">\(l\)</span> values mapped to the values
of the first and second SRI fields corresponding to each SRS resource
set with <em>usage</em> set to 'codebook', respectively</p>
<p>- If the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'nonCodebook', is provided <em>SRI-PUSCH-PowerControl</em>, and a DCI
format scheduling the PUSCH transmission includes two SRI fields, the UE
obtains a mapping from <em>sri-PUSCH-PowerControlId</em> in
<em>SRI-PUSCH-PowerControl</em> between a set of values for</p>
<p>- the first SRI field value and the <span
class="math inline">\(l\)</span> values provided by
<em>sri-PUSCH-ClosedLoopIndex</em>, and determines the <span
class="math inline">\(l\)</span> value that is mapped to the first SRI
field value corresponding to the first SRS resource set with
<em>usage</em> set to 'nonCodebook', and</p>
<p>- the value, associated with the second SRI field value corresponding
to Tables 7.3.1.1.2-28/29/30/31 of [5, TS 38.212] for a same number of
layers as indicated by the first SRI field value, and the <span
class="math inline">\(l\)</span> value(s) provided by
<em>sri-PUSCH-ClosedLoopIndex</em>, and determines the <span
class="math inline">\(l\)</span> value that is mapped to the value
corresponding to the second SRS resource set with <em>usage</em> set to
'nonCodebook'</p>
<p>- If the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook', is provided
<em>SRI-PUSCH-PowerControl</em>, and a DCI format scheduling the PUSCH
transmission does not include an SRI field</p>
<p>- If the UE is provided twoPUSCH-PC-AdjustmentStates</p>
<blockquote>
<p>- the UE determines <span class="math inline">\(l = 0\)</span> for
the PUSCH transmission corresponding to the first SRS resource set with
usage set to 'codebook' or 'nonCodebook', and <span
class="math inline">\(l = 1\)</span> for the PUSCH transmission
corresponding to the second SRS resource set with usage set to
'codebook' or 'nonCodebook'</p>
</blockquote>
<p>- else</p>
<blockquote>
<p>- the UE determines <span class="math inline">\(l = 0\)</span> for
the PUSCH transmission</p>
</blockquote>
<p>- If the UE is provided two SRS resource sets in
<em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook', and is provided
<em>twoPUSCH-PC-AdjustmentStates</em></p>
<p>- If the DCI format includes two TPC command values and the PUSCH
transmissions are associated with <span class="math inline">\(l =
0\)</span> and <span class="math inline">\(l = 1\)</span>, the UE
applies the first TPC command value for <span class="math inline">\(l =
0\)</span> and applies the second TPC command value for <span
class="math inline">\(l = 1\)</span></p>
<p>- If the DCI format includes two TPC command values and the PUSCH
transmissions are associated with <span class="math inline">\(l =
0\)</span>, the UE applies the first TPC command value for <span
class="math inline">\(l = 0\)</span> and ignores the second TPC command
value</p>
<p>- If the DCI format includes two TPC command values and the PUSCH
transmissions are associated with <span class="math inline">\(l =
1\)</span>, the UE applies the second TPC command value for <span
class="math inline">\(l = 1\)</span> and ignores the first TPC command
value</p>
<p>- If the DCI format includes one TPC command value, the UE applies
the TPC command value for all <span class="math inline">\(l\)</span>
associated with the PUSCH transmission</p>
<p>- If the UE is provided <em>SRI-PUSCH-PowerControl</em>, the UE
obtains a mapping between a set of values for the SRI field in a DCI
format scheduling the PUSCH transmission and the <span
class="math inline">\(l\)</span> value(s) provided by
<em>sri-PUSCH-ClosedLoopIndex</em> and determines the <span
class="math inline">\(l\)</span> value that is mapped to the SRI field
value</p>
<p>- If the PUSCH transmission is scheduled by a DCI format that does
not include an SRI field, or if an <em>SRI-PUSCH-PowerControl</em> is
not provided to the UE, <span class="math inline">\(l = 0\)</span></p>
<p>- If the UE obtains one TPC command from a DCI format 2_2 with CRC
scrambled by a TPC-PUSCH-RNTI, the <span
class="math inline">\(l\)</span> value is provided by the closed loop
indicator field in DCI format 2_2</p>
<p>- <span class="math inline">\(f_{b,f,c}(i,l) = f_{b,f,c}\left( i -
i_{0},l \right) + \sum_{m = 0}^{\text{C}\left( D_{i} \right) -
1}{\delta_{PUSCH,b,f,c}(m,l)}\)</span> is the PUSCH power control
adjustment state <span class="math inline">\(l\)</span> for active UL
BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> and PUSCH transmission occasion <span
class="math inline">\(i\)</span> if the UE is not provided
<em>tpc-Accumulation</em>, where</p>
<p>- The <span class="math inline">\(\delta_{PUSCH,b,f,c}\)</span>
values are given in Table 7.1.1-1</p>
<p>- <span class="math inline">\(\sum_{m = 0}^{\text{C}\left( D_{i}
\right) - 1}{\delta_{PUSCH,b,f,c}(m,l)}\)</span> is a sum of TPC command
values in a set <span class="math inline">\(D_{i}\)</span> of TPC
command values with cardinality <span
class="math inline">\(\text{C}\left( D_{i} \right)\)</span> that the UE
receives between <span class="math inline">\(K_{PUSCH}\left( i - i_{0}
\right) - 1\)</span> symbols before PUSCH transmission occasion <span
class="math inline">\(i - i_{0}\)</span> and <span
class="math inline">\(K_{PUSCH}(i)\)</span> symbols before PUSCH
transmission occasion <span class="math inline">\(i\)</span> on active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> for PUSCH power control adjustment
state <span class="math inline">\(l\)</span>, where <span
class="math inline">\(i_{0} &gt; 0\)</span> is the smallest integer for
which <span class="math inline">\(K_{PUSCH}(i - i_{0})\)</span> symbols
before PUSCH transmission occasion <span class="math inline">\(i -
i_{0}\)</span> is earlier than <span
class="math inline">\(K_{PUSCH}(i)\)</span> symbols before PUSCH
transmission occasion <span class="math inline">\(i\)</span></p>
<p>- If a PUSCH transmission is scheduled by a DCI format, <span
class="math inline">\(K_{PUSCH}(i)\)</span> is a number of symbols for
active UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> after a last symbol of a corresponding
PDCCH reception and before a first symbol of the PUSCH transmission</p>
<p>- If a PUSCH transmission is configured by
<em>ConfiguredGrantConfig</em>, <span
class="math inline">\(K_{PUSCH}(i)\)</span> is a number of <span
class="math inline">\(K_{PUSCH,min}\)</span> symbols equal to the
product of a number of symbols per slot, <span
class="math inline">\(N_{symb}^{slot}\)</span>, and the minimum of the
values provided by <em>k2</em> in <em>PUSCH-ConfigCommon</em> for active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span></p>
<p>- If the first symbol of the PUSCH transmission occasion occurs
within <span class="math inline">\(T_{proc,2}\)</span> after a last
symbol of a PDCCH reception where the UE detects the DCI format
providing the TPC command, the UE may postpone the application of the
TPC command until the above condition is not valid. <span
class="math inline">\(T_{proc,2}\)</span> is the PUSCH preparation time
for the corresponding UE processing capability [6, TS 38.214] assuming
<span class="math inline">\(d_{2,1} = 0\)</span>, and <span
class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration between the SCS configuration of the PDCCH carrying the
DCI format and the SCS configuration of the PUSCH.</p>
<p>- If the UE has reached maximum power for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> at PUSCH transmission occasion <span
class="math inline">\(i - i_{0}\)</span> and <span
class="math inline">\(\sum_{m = 0}^{\text{C}\left( D_{i} \right) -
1}{\delta_{PUSCH,b,f,c}(m,l) \geq 0}\)</span>, then <span
class="math inline">\(f_{b,f,c}(i,l) = f_{b,f,c}\left( i - i_{0},l
\right)\)</span></p>
<p>- If UE has reached minimum power for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> at PUSCH transmission occasion <span
class="math inline">\(i - i_{0}\)</span> and <span
class="math inline">\(\sum_{m = 0}^{\text{C}\left( D_{i} \right) -
1}{\delta_{PUSCH,b,f,c}(m,l) \leq 0}\)</span>, then <span
class="math inline">\(f_{b,f,c}(i,l) = f_{b,f,c}\left( i - i_{0},l
\right)\)</span></p>
<p>- A UE resets accumulation of a PUSCH power control adjustment state
<span class="math inline">\(l\)</span> for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> to <span
class="math inline">\(f_{b,f,c}(k,l) = 0,\ \ k =
0,1,\ldots,i\)</span></p>
<p>- If a configuration for a corresponding <span
class="math inline">\(P_{O\_ UE\_ PUSCH,b,f,c}(j)\)</span> value is
provided by higher layers</p>
<p>- If a configuration for a corresponding <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span> value is provided by
higher layers</p>
<p>where <span class="math inline">\(l\)</span> is determined from the
value of <span class="math inline">\(j\)</span> as</p>
<p>- If <span class="math inline">\(j &gt; 1\)</span> and the UE is
provided higher <em>SRI-PUSCH-PowerControl</em>, <span
class="math inline">\(l\)</span> is the
<em>sri-PUSCH-ClosedLoopIndex</em> value(s) configured in any
<em>SRI-PUSCH-PowerControl</em> with the
<em>sri-P0-PUSCH-AlphaSetId</em> value corresponding to <span
class="math inline">\(j\)</span></p>
<p>- If <span class="math inline">\(j &gt; 1\)</span> and the UE is not
provided <em>SRI-PUSCH-PowerControl</em> or <span
class="math inline">\(j = 0\)</span>, <span class="math inline">\(l =
1\)</span> if <span class="math inline">\(P_{O\_ UE\_
PUSCH,b,f,c}(j)\)</span> and <span class="math inline">\(\
\alpha_{b,f,c}(j)\ \)</span> are provided by the second <span
class="math inline">\(P0 - PUSCH - AlphaSet\ in\ p0 -
AlphaSets\)</span>; otherwise, <span class="math inline">\(l =
0\)</span></p>
<p>- If <span class="math inline">\(j = 1\)</span>,</p>
<blockquote>
<p>- <span class="math inline">\(l\)</span> is provided by the value of
<em>powerControlLoopToUse</em> if <span class="math inline">\(P_{O\_
UE\_ PUSCH,b,f,c}(1)\)</span> and <span
class="math inline">\(\alpha_{b,f,c}(1)\)</span> are provided by
<em>p0-PUSCH-Alpha</em> in <em>ConfiguredGrantConfig</em></p>
<p>- <span class="math inline">\(l\)</span> is provided by the value of
<em>powerControlLoopToUse2</em> if <span class="math inline">\(P_{O\_
UE\_ PUSCH,b,f,c}(1)\)</span> and <span
class="math inline">\(\alpha_{b,f,c}(1)\)</span> are provided by
<em>p0-PUSCH-Alpha2</em> in <em>ConfiguredGrantConfig</em></p>
</blockquote>
<p>- <span class="math inline">\(f_{b,f,c}(i,l) =
\delta_{PUSCH,b,f,c}(i,l)\)</span> is the PUSCH power control adjustment
state for active UL BWP <span class="math inline">\(b\)</span> of
carrier <span class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> and PUSCH transmission occasion <img
src="media/image18.svg" style="width:0.10417in;height:0.19792in" /> if
the UE is provided <em>tpc-Accumulation</em>, where</p>
<p>- <span class="math inline">\(\delta_{PUSCH,b,f,c}\)</span> absolute
values are given in Table 7.1.1-1</p>
<p>If the UE transmits a PUSCH associated with the first RS resource
index <span class="math inline">\(q_{d}\)</span>, the UE applies the
first <span
class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span> value,
the first <span class="math inline">\(\alpha_{b,f,c}(j)\)</span> value,
and <span class="math inline">\(f_{b,f,c}(i,l)\)</span> for determining
<span
class="math inline">\(P_{\text{PUSCH},b,f,c}(i,j,q_{d},l)\)</span>. If
the UE transmits a PUSCH associated with the second RS resource index
<span class="math inline">\(q_{d}\)</span>, the UE applies the second
<span class="math inline">\(P_{\text{O\_UE\_PUSCH},b,f,c}(j)\)</span>
value, the second <span class="math inline">\(\alpha_{b,f,c}(j)\)</span>
value, and <span class="math inline">\(f_{b,f,c}(i,l)\)</span> or <span
class="math inline">\(f_{b,f,c}(i,0)\)</span>
if <em>twoPUSCH-PC-AdjustmentStates</em> is provided or not provided,
respectively, for determining <span
class="math inline">\(P_{\text{PUSCH},b,f,c}(i,j,q_{d},l)\)</span>.</p>
<p>- If the UE receives a random access response message in response to
a PRACH transmission or a MsgA transmission on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> as described in clause 8</p>
<p>- <span class="math inline">\(f_{b,f,c}(0,l) =
{\mathrm{\Delta}P_{rampup,b,f,c} + \delta}_{msg2,b,f,c}\)</span>, where
<span class="math inline">\(l = 0\)</span> and</p>
<p>- <span class="math inline">\(\delta_{msg2,b,f,c}\)</span> is a TPC
command value indicated in a random access response grant of the random
access response message corresponding to a PRACH transmission according
to Type-1 random access procedure, or in a random access response grant
of the random access response message corresponding to a MsgA
transmission according to Type-2 random access procedure with RAR
message(s) for fallbackRAR, on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, and</p>
<p>- <img src="media/image19.svg"
style="width:5.61458in;height:0.69792in" /> and <span
class="math inline">\(\mathrm{\Delta}P_{rampup\_
requested,b,f,c}\)</span> is provided by higher layers and corresponds
to the total power ramp-up requested by higher layers from the first to
the last random access preamble for carrier <span
class="math inline">\(f\)</span> in the serving cell <span
class="math inline">\(c\)</span>, <span
class="math inline">\(M_{RB,b,f,c}^{PUSCH}(0)\)</span> is the bandwidth
of the PUSCH resource assignment expressed in number of resource blocks
for the first PUSCH transmission on active UL BWP<span
class="math inline">\(\ b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, and <span
class="math inline">\(\mathrm{\Delta}_{TF,b,f,c}(0)\)</span> is the
power adjustment of first PUSCH transmission on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>.</p>
<p>- If the UE transmits the PUSCH in PUSCH transmission occasion <span
class="math inline">\(i\)</span> on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> as described in clause 8.1A, <span
class="math inline">\(f_{b,f,c}(0,l) = \Delta P_{rampup,b,f,c}\)</span>,
where</p>
<p>- <span class="math inline">\(l = 0\)</span>, and</p>
<p>- <img src="media/image20.svg"
style="width:5.71875in;height:0.69792in" /> and <span
class="math inline">\(\Delta P_{rampup\_ requested,b,f,c}\)</span> is
provided by higher layers and corresponds to the total power ramp-up
requested by higher layers, <span
class="math inline">\(M_{\text{RB,}b,f,c}^{\text{PUSCH}}(i)\)</span> is
the bandwidth of the PUSCH resource assignment expressed in number of
resource blocks, and <span
class="math inline">\(\Delta_{\text{TF},b,f,c}(i)\)</span> is the power
adjustment of the PUSCH transmission in PUSCH transmission occasion
<span class="math inline">\(i\)</span>.</p>
<p>Table 7.1.1-1: Mapping of TPC Command Field in a DCI format
scheduling a PUSCH transmission, or in DCI format 2_2 with CRC scrambled
by TPC-PUSCH-RNTI, or in DCI format 2_3, to absolute and accumulated
<span
class="math inline">\(\mathbf{\delta}_{\mathbf{PUSCH}\mathbf{,b}\mathbf{,}\mathbf{f}\mathbf{,}\mathbf{c}}\)</span>
values or <span
class="math inline">\(\mathbf{\delta}_{\mathbf{SRS}\mathbf{,b}\mathbf{,}\mathbf{f}\mathbf{,}\mathbf{c}}\)</span>
values</p>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th>TPC Command Field</th>
<th>Accumulated <span
class="math inline">\(\mathbf{\delta}_{\mathbf{PUSCH}\mathbf{,b}\mathbf{,}\mathbf{f}\mathbf{,}\mathbf{c}}\)</span>
or <span
class="math inline">\(\mathbf{\delta}_{\mathbf{SRS}\mathbf{,b}\mathbf{,}\mathbf{f}\mathbf{,}\mathbf{c}}\)</span>
[dB]</th>
<th>Absolute <span
class="math inline">\(\mathbf{\delta}_{\mathbf{PUSCH}\mathbf{,b}\mathbf{,}\mathbf{f}\mathbf{,}\mathbf{c}}\)</span>
or <span
class="math inline">\(\mathbf{\delta}_{\mathbf{SRS}\mathbf{,b}\mathbf{,}\mathbf{f}\mathbf{,}\mathbf{c}}\)</span>
[dB]</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>-1</td>
<td>-4</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>-1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
<td>4</td>
</tr>
</tbody>
</table>
<h2 id="physical-uplink-control-channel">7.2 Physical uplink control
channel</h2>
<p>If the UE is configured with a SCG, the UE shall apply the procedures
described in this clause for both MCG and SCG.</p>
<p>- When the procedures are applied for MCG, the term 'serving cell' in
this clause refers to serving cell belonging to the MCG.</p>
<p>- When the procedures are applied for SCG, the term 'serving cell' in
this clause refers to serving cell belonging to the SCG. The term
'primary cell' in this clause refers to the PSCell of the SCG.</p>
<p>If the UE is configured with a PUCCH-SCell, the UE shall apply the
procedures described in this clause for both primary PUCCH group and
secondary PUCCH group.</p>
<p>- When the procedures are applied for the primary PUCCH group, the
term 'serving cell' in this clause refers to serving cell belonging to
the primary PUCCH group.</p>
<p>- When the procedures are applied for the secondary PUCCH group, the
term 'serving cell' in this clause refers to serving cell belonging to
the secondary PUCCH group. The term 'primary cell' in this clause refers
to the PUCCH-SCell of the secondary PUCCH group. If
<em>pdsch-HARQ-ACK-Codebook-secondaryPUCCHgroup-r16</em> is provided,
<em>pdsch-HARQ-ACK-Codebook</em> is replaced by
<em>pdsch-HARQ-ACK-Codebook-secondaryPUCCHgroup-r16</em>.</p>
<p>For unpaired spectrum operation, if the UE is provided a PUCCH-sSCell
by <em>pucch-sSCell</em> as described in clause 9.A, the UE shall apply
the procedures described in this clause for both the primary cell and
the PUCCH-sSCell.</p>
<h3 id="ue-behaviour-1">7.2.1 UE behaviour</h3>
<p>If a UE transmits a PUCCH on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> in the primary cell <span
class="math inline">\(c\)</span> using PUCCH power control adjustment
state with index <span class="math inline">\(l\)</span>, the UE
determines the PUCCH transmission power <span
class="math inline">\(P_{\text{PUCCH},b,f,c}(i,q_{u},q_{d},l)\)</span>
in PUCCH transmission occasion <span class="math inline">\(i\)</span>
as</p>
<p><img src="media/image21.svg"
style="width:6.69792in;height:0.51042in" /> [dBm]</p>
<p>where</p>
<p>- <span class="math inline">\(P_{\text{CMAX},f,c}(i)\)</span> is the
UE configured maximum output power defined in [8-1, TS 38.101-1], [8-2,
TS 38.101-2] and [8-3, TS 38.101-3] for carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span> in PUCCH transmission occasion <span
class="math inline">\(i\)</span></p>
<p>- <span
class="math inline">\(P_{\text{O\_PUCCH},b,f,c}(q_{u})\)</span> is a
parameter composed of the sum of a component <span
class="math inline">\(P_{\text{O\_NOMINAL,PUCCH}}\)</span>, provided by
<em>p0-nominal</em>, or <span
class="math inline">\(P_{\text{O\_NOMINAL,PUCCH}} = 0\)</span> dBm if
<em>p0-nominal</em> is not provided, for carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span> and, if provided, a component <span
class="math inline">\(P_{\text{O\_UE\_PUCCH}}(q_{u})\)</span> provided
by <em>p0-PUCCH-Value</em> in <em>P0-PUCCH</em> for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span>, where <span class="math inline">\(0
\leq q_{u} &lt; Q_{u}\)</span>. <span
class="math inline">\(Q_{u}\)</span> is a size for a set of <span
class="math inline">\(P_{\text{O\_UE\_PUCCH}}\)</span> values provided
by <em>maxNrofPUCCH-P0-PerSet</em>. The set of <span
class="math inline">\(P_{\text{O\_UE\_PUCCH}}\)</span> values is
provided by <em>p0-Set</em>. If <em>p0-Set</em> is not provided to the
UE, <span class="math inline">\(P_{\text{O\_PUCCH},b,f,c}\left( q_{u}
\right) = 0\)</span>, <span class="math inline">\(0 \leq q_{u} &lt;
Q_{u}\)</span></p>
<p>- If the UE is provided <em>PUCCH-SpatialRelationInfo</em>, the UE
obtains a mapping, by an index provided by <em>p0-PUCCH-Id</em>, between
a set of <em>pucch-SpatialRelationInfoId</em> values and a set of
<em>p0-PUCCH-Value</em> values. If the UE is provided more than one
values for <em>pucch-SpatialRelationInfoId</em> and the UE receives an
activation command [11, TS 38.321] indicating a value of
<em>pucch-SpatialRelationInfoId</em>, the UE determines the
<em>p0-PUCCH-Value</em> value through the link to a corresponding
<em>p0-PUCCH-Id</em> index. The UE applies the activation command in the
first slot that is after slot <span class="math inline">\(k + 3 \cdot
N_{slot}^{subframe,\mu}\)</span> where <span
class="math inline">\(k\)</span> is the slot where the UE would transmit
a PUCCH with HARQ-ACK information for the PDSCH providing the activation
command and <span class="math inline">\(\mu\)</span> is the SCS
configuration for the PUCCH</p>
<p>- If the UE is provided more than one sets of power control
parameters for operation in FR1, and the UE receives an activation
command [11, TS 38.321] indicating one or two of the more than one sets
of power control parameters, the UE determines <em>p0-PUCCH-Value</em>
value according to the corresponding one or two sets of power control
parameters. The UE applies the activation command in the first slot that
is after slot <span class="math inline">\(k + 3 \cdot
N_{slot}^{subframe,\mu}\)</span> where <span
class="math inline">\(k\)</span> is the slot where the UE would transmit
a PUCCH with HARQ-ACK information for the PDSCH providing the activation
command and <span class="math inline">\(\mu\)</span> is the SCS
configuration for the PUCCH.</p>
<p>- If the UE is not provided <em>PUCCH-SpatialRelationInfo</em> and is
not provided more than one sets of power control parameters for
operation in FR1, the UE obtains the <em>p0-PUCCH-Value</em> value from
the <em>P0-PUCCH</em> with <em>p0-PUCCH-Id</em> value equal to the
minimum <em>p0-PUCCH-Id</em> value in <em>p0-Set</em></p>
<p>- <span class="math inline">\(M_{RB,b,f,c}^{PUCCH}(i)\)</span> is a
bandwidth of the PUCCH resource assignment expressed in number of
resource blocks for PUCCH transmission occasion <span
class="math inline">\(i\)</span> on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span> and <span
class="math inline">\(\mu\)</span> is a SCS configuration defined in [4,
TS 38.211]</p>
<p>- <span class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> is a
downlink pathloss estimate in dB calculated by the UE using RS resource
index <span class="math inline">\(q_{d}\)</span> as described in clause
7.1.1 for the active DL BWP <span class="math inline">\(b\)</span> of
carrier <span class="math inline">\(f\)</span> of the primary cell <span
class="math inline">\(c\)</span> as described in clause 12</p>
<p>- If the UE is not provided <em>pathlossReferenceRSs</em> and
<em>enableDefaultBeamPL-ForPUCCH</em>, or before the UE is provided
dedicated higher layer parameters, the UE calculates <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> using a RS resource
obtained from an SS/PBCH block with same SS/PBCH block index as the one
the UE uses to obtain <em>MIB</em>, or using the SS/PBCH block the UE
acquired the time and frequency synchronization for a secondary
cell.</p>
<p>- If the UE is provided a number of RS resource indexes, the UE
calculates <span class="math inline">\({PL}_{b,f,c}(q_{d})\)</span>
using RS resource with index <span class="math inline">\(q_{d}\)</span>,
where <span class="math inline">\(0 \leq q_{d} &lt; Q_{d}\)</span>.
<span class="math inline">\(Q_{d}\)</span> is a size for a set of RS
resources provided by <em>maxNrofPUCCH-PathlossReferenceRSs</em>. The
set of RS resources is provided by <em>pathlossReferenceRSs</em>. The
set of RS resources can include one or both of a set of SS/PBCH block
indexes, each provided by <em>ssb-Index</em> in
<em>PUCCH-PathlossReferenceRS</em> when a value of a corresponding
<em>pucch-PathlossReferenceRS-Id</em> maps to a SS/PBCH block index, and
a set of CSI-RS resource indexes, each provided by <em>csi-RS-Index</em>
when a value of a corresponding <em>pucch-PathlossReferenceRS-Id</em>
maps to a CSI-RS resource index. The UE identifies a RS resource in the
set of RS resources to correspond either to a SS/PBCH block index or to
a CSI-RS resource index as provided by
<em>pucch-PathlossReferenceRS-Id</em> in
<em>PUCCH-PathlossReferenceRS</em></p>
<p>- If the UE is provided <em>pathlossReferenceRSs</em> and
<em>PUCCH-SpatialRelationInfo</em>, the UE obtains a mapping, by indexes
provided by corresponding values of
<em>pucch-PathlossReferenceRS-Id</em>, between a set of
<em>pucch-SpatialRelationInfoId</em> values and a set of
<em>referenceSignal</em> values provided by
<em>PUCCH-PathlossReferenceRS</em>. If the UE is provided more than one
values for <em>pucch-SpatialRelationInfoId</em> and the UE receives an
activation command [11, TS 38.321] indicating a value of
<em>pucch-SpatialRelationInfoId</em>, the UE determines the
<em>referenceSignal</em> value in <em>PUCCH-PathlossReferenceRS</em>
through the link to a corresponding
<em>pucch-PathlossReferenceRS-Id</em> index. The UE applies the
activation command in the first slot that is after slot <span
class="math inline">\(k + 3 \cdot N_{slot}^{subframe,\mu}\)</span> where
<span class="math inline">\(k\)</span> is the slot where the UE would
transmit a PUCCH with HARQ-ACK information for the PDSCH providing the
activation command and <span class="math inline">\(\mu\)</span> is the
SCS configuration for the PUCCH</p>
<p>- If <em>PUCCH-SpatialRelationInfo</em> includes
<em>servingCellId</em> indicating a serving cell, the UE receives the RS
for resource index <span class="math inline">\(q_{d}\)</span> on the
active DL BWP of the serving cell</p>
<p>- If the UE is provided <em>pathlossReferenceRSs</em> and more than
one sets of power control parameters for operation in FR1, and the UE
receives an activation command [11, TS 38.321] indicating one or two of
the more than one sets of power control parameters, the UE determines
the <em>referenceSignal</em> values in
<em>PUCCH-PathlossReferenceRS</em> that are indicated in the one or two
sets of power control parameter</p>
<p>- If the UE is provided <em>pathlossReferenceRSs</em> and is not
provided <em>PUCCH-SpatialRelationInfo</em> and is not provided more
than one sets of power control parameters for operation in FR1, the UE
obtains the <em>referenceSignal</em> value in
<em>PUCCH-PathlossReferenceRS</em> from the
<em>pucch-PathlossReferenceRS-Id</em> with index 0 in
<em>PUCCH-PathlossReferenceRS</em> where the RS resource is either on
the primary cell or, if provided, on a serving cell indicated by a value
of <em>pathlossReferenceLinking</em></p>
<p>- If the UE</p>
<p>- is not provided <em>pathlossReferenceRSs</em>, and</p>
<p>- is not provided <em>PUCCH-SpatialRelationInfo,</em> and</p>
<p>- is provided <em>enableDefaultBeamPL-ForPUCCH</em>, and</p>
<p>- is not provided <em>coresetPoolIndex</em> value of 1 for any
CORESET, or is provided <em>coresetPoolIndex</em> value of 1 for all
CORESETs, in <em>ControlResourceSet</em> and no codepoint of a TCI
field, if any, in a DCI format of any search space set maps to two TCI
states [5, TS 38.212]</p>
<p>the UE determines a RS resource index <span
class="math inline">\(q_{d}\)</span> providing a periodic RS resource
configured with <em>qcl-Type</em> set to 'typeD' in the TCI state or the
QCL assumption of a CORESET with the lowest index in the active DL BWP
of the primary cell. If the CORESET has two activated TCI states, as
described in clause 10.1, the UE determines the RS resource index <span
class="math inline">\(q_{d}\)</span> based on the first activated TCI
state. For a PUCCH transmission over multiple slots, a same <span
class="math inline">\(q_{d}\)</span> applies to the PUCCH transmission
in each of the multiple slots.</p>
<p>- The parameter <span
class="math inline">\(\Delta_{\text{F\_PUCCH}}(F)\)</span> is a value of
<em>deltaF-PUCCH-f0</em> for PUCCH format 0, <em>deltaF-PUCCH-f1</em>
for PUCCH format 1, <em>deltaF-PUCCH-f2</em> for PUCCH format 2,
<em>deltaF-PUCCH-f3</em> for PUCCH format 3, and
<em>deltaF-PUCCH-f4</em> for PUCCH format 4, if provided; otherwise
<span class="math inline">\(\Delta_{\text{F\_PUCCH}}(F) =
0\)</span>.</p>
<p>- <span class="math inline">\(\mathrm{\Delta}_{TF,b,f,c}(i)\)</span>
is a PUCCH transmission power adjustment component on active UL BWP
<span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span></p>
<p>- For a PUCCH transmission using PUCCH format 0 or PUCCH format 1,
<span class="math inline">\(\mathrm{\Delta}_{TF,b,f,c}(i) =
10\log_{10}\left( \frac{N_{ref}^{PUCCH}}{N_{symb}^{PUCCH}(i)} \right) +
\mathrm{\Delta}_{UCI}(i)\)</span> where</p>
<p>- <span class="math inline">\(N_{symb}^{PUCCH}(i)\)</span> is a
number of PUCCH format 0 symbols or PUCCH format 1 symbols for the PUCCH
transmission as described in clause 9.2.</p>
<p>- <span class="math inline">\(N_{ref}^{PUCCH} = 2\)</span> for PUCCH
format 0</p>
<p>- <span class="math inline">\(N_{ref}^{PUCCH} =
N_{symb}^{slot}\)</span> for PUCCH format 1</p>
<p>- For PUCCH format 0, <span
class="math inline">\(\mathrm{\Delta}_{UCI}(i) = 0\)</span></p>
<p>- For PUCCH format 1</p>
<p>- if the PUCCH transmission provides multicast HARQ-ACK information
according to the second HARQ-ACK reporting mode as described in clause
18, <span class="math inline">\(\mathrm{\Delta}_{UCI}(i) =
0\)</span></p>
<p>- otherwise, <span class="math inline">\(\mathrm{\Delta}_{UCI}(i) =
10\log_{10}\left( O_{UCI}(i) \right)\)</span>, where <span
class="math inline">\(O_{UCI}(i)\)</span> is a number of UCI bits in
PUCCH transmission occasion <span class="math inline">\(i\)</span></p>
<p>- For a PUCCH transmission using PUCCH format 2 or PUCCH format 3 or
PUCCH format 4 and for a number of UCI bits smaller than or equal to 11,
<span class="math inline">\(\mathrm{\Delta}_{TF,b,f,c}(i) =
10\log_{10}\left( K_{1} \cdot \frac{\left( n_{HARQ - ACK}(i) + O_{SR}(i)
+ O_{CSI}(i) \right)}{N_{RE}(i)} \right)\)</span>, where</p>
<p>- <span class="math inline">\(K_{1} = 6\)</span></p>
<p>- <span class="math inline">\(n_{HARQ - ACK}(i)\)</span> is a number
of HARQ-ACK information bits that the UE determines as described in
clause 9.1.2.1 or 16.5.1.1 for Type-1 HARQ-ACK codebook and as described
in clause 9.1.3.1 or 9.1.3.3 or 16.5.2.1 for Type-2 HARQ-ACK codebook,
or as described in clause 9.1.5 for HARQ-ACK codebook retransmission, or
as described in clause 9.2.5.4 for deferring HARQ-ACK for SPS PDSCH.
<span class="math inline">\(n_{HARQ - ACK}(i)\)</span> is the same as
<span class="math inline">\(O_{ACK}(i)\)</span> as described in clause
9.1.4 for Type-3 HARQ-ACK codebook. If the UE is not provided any of
<em>pdsch-HARQ-ACK-Codebook</em>, <em>pdsch-HARQ-ACK-Codebook-r16</em>,
or <em>pdsch-HARQ-ACK-OneShotFeedback</em>, <span
class="math inline">\(n_{HARQ - ACK}(i) = 1\)</span> if the UE includes
a HARQ-ACK information bit in the PUCCH transmission; otherwise, <span
class="math inline">\(n_{HARQ - ACK}(i) = 0\)</span></p>
<p>- <span class="math inline">\(O_{SR}(i)\)</span> is a number of SR
information bits that the UE determines as described in clause
9.2.5.1</p>
<p>- <span class="math inline">\(O_{CSI}(i)\)</span> is a number of CSI
information bits that the UE determines as described in clause
9.2.5.2</p>
<p>- <span class="math inline">\(N_{RE}(i)\)</span> is a number of
resource elements determined as <span class="math inline">\(N_{RE}(i) =
M_{RB,b,f,c}^{PUCCH}(i) \cdot N_{sc,ctrl}^{RB}(i){\cdot N}_{symb -
UCI,b,f,c}^{PUCCH}(i)\)</span>, where <span
class="math inline">\(N_{sc,ctrl}^{RB}(i)\)</span> is a number of
subcarriers per resource block excluding subcarriers used for DM-RS
transmission, and <span class="math inline">\(N_{symb -
UCI,b,f,c}^{PUCCH}(i)\)</span> is a number of symbols excluding symbols
used for DM-RS transmission, as defined in clause 9.2.5.2, for PUCCH
transmission occasion <span class="math inline">\(i\)</span> on active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span></p>
<p>- For a PUCCH transmission using PUCCH format 2 or PUCCH format 3 or
PUCCH format 4 and for a number of UCI bits larger than 11, <span
class="math inline">\(\mathrm{\Delta}_{TF,b,f,c}(i) = 10\log_{10}\left(
2^{BPRE \cdot K_{2}} - 1 \right)\)</span>, where</p>
<p>- <span class="math inline">\(K_{2} = 2.4\)</span></p>
<p>- <span class="math inline">\(BPRE(i) = \frac{\left( O_{ACK}(i) +
O_{SR}(i) + O_{CSI}(i) + O_{CRC}(i) \right)}{N_{RE}}(i)\)</span></p>
<p>- <span class="math inline">\(O_{ACK}(i)\)</span> is a number of
HARQ-ACK information bits that the UE determines as described in clause
9.1.2.1 or 16.5.1.1 for Type-1 HARQ-ACK codebook and as described in
clause 9.1.3.1 or 9.1.3.3 or 16.5.2.1 for Type-2 HARQ-ACK codebook, or
as described in clause 9.1.4 for Type-3 HARQ-ACK codebook, or as
described in clause 9.1.5 for HARQ-ACK codebook retransmission, or as
described in clause 9.2.5.4 for deferring HARQ-ACK for SPS PDSCH. If the
UE is not provided any of <em>pdsch-HARQ-ACK-Codebook</em>,
<em>pdsch-HARQ-ACK-Codebook-r16</em>, or
<em>pdsch-HARQ-ACK-OneShotFeedback</em>, <span
class="math inline">\(O_{ACK} = 1\)</span> if the UE includes a HARQ-ACK
information bit in the PUCCH transmission; otherwise, <span
class="math inline">\(O_{ACK} = 0\)</span></p>
<p>- <span class="math inline">\(O_{SR}(i)\)</span> is a number of SR
information bits that the UE determines as described in clause
9.2.5.1</p>
<p>- <span class="math inline">\(O_{CSI}(i)\)</span> is a number of CSI
information bits that the UE determines as described in clause
9.2.5.2</p>
<p>- <span class="math inline">\(O_{CRC}(i)\)</span> is a number of CRC
bits that the UE determines as described in clause 9.2</p>
<p>- <span class="math inline">\(N_{RE}(i)\)</span> is a number of
resource elements that the UE determines as <span
class="math inline">\(N_{RE}(i) = M_{RB,b,f,c}^{PUCCH}(i) \cdot
N_{sc,ctrl}^{RB}(i){\cdot N}_{symb - UCI,b,f,c}^{PUCCH}(i)\)</span>,
where <span class="math inline">\(N_{sc,ctrl}^{RB}(i)\)</span> is a
number of subcarriers per resource block excluding subcarriers used for
DM-RS transmission, and <span class="math inline">\(N_{symb -
UCI,b,f,c}^{PUCCH}(i)\)</span> is a number of symbols excluding symbols
used for DM-RS transmission, as defined in clause 9.2.5.2, for PUCCH
transmission occasion <span class="math inline">\(i\)</span> on active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span>.</p>
<p>- For the PUCCH power control adjustment state <span
class="math inline">\(g_{b,f,c}(i,l)\)</span> for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span> and PUCCH transmission occasion <span
class="math inline">\(i\)</span></p>
<p>- <span class="math inline">\(\delta_{PUCCH,b,f,c}(i,l)\)</span> is a
TPC command value included in a DCI format associated with the PUCCH
transmission for active UL BWP <span class="math inline">\(b\)</span> of
carrier <span class="math inline">\(f\)</span> of the primary cell <span
class="math inline">\(c\)</span> that the UE detects for PUCCH
transmission occasion <span class="math inline">\(i\)</span>, or is
jointly coded with other TPC commands in a DCI format 2_2 with CRC
scrambled by TPC-PUCCH-RNTI [5, TS 38.212], as described in clause
11.3</p>
<p>- <span class="math inline">\(l \in \left\{ 0,1 \right\}\)</span> if
the UE is provided <em>twoPUCCH-PC-AdjustmentStates</em> and
<em>PUCCH-SpatialRelationInfo</em>, or more than one sets of power
control parameters for operation in FR1, <span class="math inline">\(l =
0\)</span> if the UE is not provided
<em>twoPUCCH-PC-AdjustmentStates</em> or
<em>PUCCH-SpatialRelationInfo</em> and more than one sets of power
control parameters, and <span class="math inline">\(l = 0\)</span> if
the PUCCH transmission provides only multicast HARQ-ACK information</p>
<p>- If the UE obtains a TPC command value from a DCI format associated
with the PUCCH transmission and if the UE is provided
<em>PUCCH-SpatialRelationInfo</em>, the UE obtains a mapping, by an
index provided by <em>p0-PUCCH-Id</em>, between a set of
<em>pucch-SpatialRelationInfoId</em> values and a set of values for
<em>closedLoopIndex</em> that provide the <span
class="math inline">\(l\)</span> value(s). If the UE receives an
activation command indicating a value of
<em>pucch-SpatialRelationInfoId</em>, the UE determines the value
<em>closedLoopIndex</em> that provides the value of <span
class="math inline">\(l\)</span> through the link to a corresponding
<em>p0-PUCCH-Id</em> index</p>
<p>- If the UE obtains a TPC command value from a DCI format associated
with the PUCCH transmission, and if the UE is provided more than one
sets of power control parameters for operation in FR1, and if the UE
receives an activation command [11, TS 38.321] indicating one or two
sets of the more than one sets of power control parameters, the UE
determines the value of <span class="math inline">\(l\)</span> based on
the <em>closedLoopIndex</em> value in the one or two sets of power
control parameters</p>
<p>- If the UE obtains a TPC command from a DCI format 2_2 with CRC
scrambled by a TPC-PUCCH-RNTI, the <span
class="math inline">\(l\)</span> value is provided by the closed loop
indicator field in DCI format 2_2</p>
<p>- If the UE transmits the PUCCH with <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}} &gt; 1\)</span>
repetitions, as described in clause 9.2.6, and the UE is provided
<em>twoPUCCH-PC-AdjustmentStates</em> by <em>pucch-PowerControl</em></p>
<p>- If the DCI format includes two TPC command values and the PUCCH
resource of the PUCCH transmission is associated with <span
class="math inline">\(l = 0\)</span> and <span class="math inline">\(l =
1\)</span>, the UE applies the first TPC command value for <span
class="math inline">\(l = 0\)</span> and applies the second TPC command
value for <span class="math inline">\(l = 1\)</span></p>
<p>- If the DCI format includes two TPC command values and the PUCCH
resource of the PUCCH transmission is associated with <span
class="math inline">\(l = 0\)</span>, the UE applies the first TPC
command value for <span class="math inline">\(l = 0\)</span> and ignores
the second TPC command value</p>
<p>- If the DCI format includes two TPC command values and the PUCCH
resource of the PUCCH transmission is associated with <span
class="math inline">\(l = 1\)</span>, the UE applies the second TPC
command value for <span class="math inline">\(l = 1\)</span> and ignores
the first TPC command value</p>
<p>- If the DCI format includes one TPC command value, the UE applies
the TPC command value for all <span class="math inline">\(l\)</span>
associated with the PUCCH resource of the PUCCH transmission</p>
<p>- <span class="math inline">\(g_{b,f,c}(i,l) = g_{b,f,c}\left( i -
i_{0},l \right) + \sum_{m = 0}^{\text{C}\left( C_{i} \right) -
1}{\delta_{PUCCH,b,f,c}(m,l)}\)</span> is the current PUCCH power
control adjustment state <span class="math inline">\(l\)</span> for
active UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span> and PUCCH transmission occasion <span
class="math inline">\(i\)</span>, where</p>
<p>- The <span class="math inline">\(\delta_{PUCCH,b,f,c}\)</span>
values are given in Table 7.1.2-1</p>
<p>- <span class="math inline">\(\sum_{m = 0}^{\text{C}\left( C_{i}
\right) - 1}{\delta_{PUCCH,b,f,c}(m,l)}\)</span> is a sum of TPC command
values in a set <span class="math inline">\(C_{i}\)</span> of TPC
command values with cardinality <span
class="math inline">\(\text{C}\left( C_{i} \right)\)</span> that the UE
receives between <span class="math inline">\(K_{PUCCH}\left( i - i_{0}
\right) - 1\)</span> symbols before PUCCH transmission occasion <span
class="math inline">\(i - i_{0}\)</span> and <img
src="media/image22.svg" style="width:0.61458in;height:0.19792in" />
symbols before PUCCH transmission occasion <span
class="math inline">\(i\)</span> on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span> for PUCCH power control adjustment
state, where <span class="math inline">\(i_{0} &gt; 0\)</span> is the
smallest integer for which <span class="math inline">\(K_{PUCCH}\left( i
- i_{0} \right)\)</span> symbols before PUCCH transmission occasion
<span class="math inline">\(i - i_{0}\)</span> is earlier than <span
class="math inline">\(K_{PUCCH}(i)\)</span> symbols before PUCCH
transmission occasion <span class="math inline">\(i\)</span></p>
<p>- If the PUCCH transmission is in response to a detection by the UE
of a DCI format, <span class="math inline">\(K_{PUCCH}(i)\)</span> is a
number of symbols for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span> after a last symbol of a corresponding
PDCCH reception and before a first symbol of the PUCCH transmission</p>
<p>- If the PUCCH transmission is not in response to a detection by the
UE of a DCI format, <span class="math inline">\(K_{PUCCH}(i)\)</span> is
a number of <span class="math inline">\(K_{PUCCH,min}\)</span> symbols
equal to the product of a number of symbols per slot, <span
class="math inline">\(N_{symb}^{slot}\)</span>, and the minimum of the
values provided by <em>k2</em> in <em>PUSCH-ConfigCommon</em> for active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span></p>
<blockquote>
<p>- If the first symbol of the PUCCH transmission occasion occurs
within <span class="math inline">\(T_{proc,2}\)</span> after a last
symbol of a PDCCH reception where the UE detects the DCI format
providing the TPC command, the UE may postpone the application of the
TPC command until the above condition is not valid. <span
class="math inline">\(T_{proc,2}\)</span> is the PUSCH preparation time
for the corresponding UE processing capability [6, TS 38.214] assuming
<span class="math inline">\(d_{2,1} = 0\)</span>, and <span
class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration between the SCS configuration of the PDCCH carrying the
DCI format and the SCS configuration of the PUCCH.</p>
</blockquote>
<p>- If the UE has reached maximum power for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span> at PUCCH transmission occasion <span
class="math inline">\(i - i_{0}\)</span> and <span
class="math inline">\(\sum_{m = 0}^{\text{C}\left( C_{i} \right) -
1}{\delta_{PUCCH,b,f,c}(m,l)} \geq 0\)</span>, then <span
class="math inline">\(g_{b,f,c}(i,l) = g_{b,f,c}\left( i - i_{0},l
\right)\)</span></p>
<p>- If UE has reached minimum power for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span> at PUCCH transmission occasion <span
class="math inline">\(i - i_{0}\)</span> and <span
class="math inline">\(\sum_{m = 0}^{\text{C}\left( C_{i} \right) -
1}{\delta_{PUCCH,b,f,c}(m,l)} \leq 0\)</span>, then <span
class="math inline">\(g_{b,f,c}(i,l) = g_{b,f,c}\left( i - i_{0},l
\right)\)</span></p>
<p>- If a configuration of a <span
class="math inline">\(P_{\text{O\_PUCCH},b,f,c}\left( q_{u}
\right)\)</span> value for a corresponding PUCCH power control
adjustment state <span class="math inline">\(l\)</span> for active UL
BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span> is provided by higher layers,</p>
<p>- <span class="math inline">\(g_{b,f,c}(k,l) = 0,\ \ k =
0,1,\ldots,i\)</span></p>
<p>- if the UE is provided <em>PUCCH-SpatialRelationInfo</em>, the UE
determines the value of <span class="math inline">\(l\)</span> from the
value of <span class="math inline">\(q_{u}\)</span> based on a
<em>pucch-SpatialRelationInfoId</em> value associated with the
<em>p0-PUCCH-Id</em> value corresponding to <span
class="math inline">\(q_{u}\)</span> and with the
<em>closedLoopIndex</em> value corresponding to <span
class="math inline">\(l\)</span>;</p>
<p>- else, if the UE is provided more than one sets of power control
parameters for operation in FR1, and if the UE receives an activation
command for a PUCCH resource that indicates one or two sets of the more
than one sets of power control parameters, the UE determines the value
of <span class="math inline">\(l\)</span> based on the
<em>closedLoopIndex</em> value in the one or two sets of power control
parameters;</p>
<p>- else, <span class="math inline">\(l = 0\)</span></p>
<p>- Else,</p>
<p>- <span class="math inline">\(g_{b,f,c}(0,l) =
{\mathrm{\Delta}P_{rampup,b,f,c} + \delta}_{b,f,c}\)</span>, where <span
class="math inline">\(l = 0\)</span>, and <span
class="math inline">\(\delta_{b,f,c}\)</span> is</p>
<p>- the TPC command value indicated in a random access response grant
corresponding to a PRACH transmission according to Type-1 random access
procedure, or in a random access response grant corresponding to MsgA
transmissions according to Type-2 random access procedure with RAR
message(s) for fallbackRAR, or</p>
<p>- the TPC command value indicated in a successRAR corresponding to
MsgA transmissions for Type-2 random access procedure, or</p>
<p>- the TPC command value in a DCI format with CRC scrambled by C-RNTI
or MCS-C-RNTI that the UE detects in a first PDCCH reception in a search
space set provided by <em>recoverySearchSpaceId</em> if the PUCCH
transmission is a first PUCCH transmission after 28 symbols from a last
symbol of the first PDCCH reception,</p>
<blockquote>
<p>and, if the UE transmits PUCCH on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span>,</p>
</blockquote>
<p><span class="math inline">\(\mathrm{\Delta}P_{rampup,b,f,c} =
min\left\lbrack \max\left( 0,P_{CMAX,f,c} - \left(
P_{\text{O\_PUCCH},b,f,c} + {PL}_{b,f,c}(q_{d}) + \mathrm{\Delta}_{F\_
PUCCH} + \mathrm{\Delta}_{TF,b,f,c} + \delta_{b,f,c} \right)
\right),\mathrm{\Delta}P_{rampup\_ requested,b,f,c}
\right\rbrack\)</span>;</p>
<p>otherwise,</p>
<p><span class="math inline">\(\mathrm{\Delta}P_{rampup,b,f,c} =
min\left\lbrack \max\left( 0,P_{CMAX,f,c} - \left(
P_{\text{O\_PUCCH},b,f,c} + {PL}_{b,f,c}(q_{d}) \right)
\right),\mathrm{\Delta}P_{rampup\_ requested,b,f,c}
\right\rbrack\)</span> where <span
class="math inline">\(\mathrm{\Delta}P_{rampup\_
requested,b,f,c}\)</span> is provided by higher layers and corresponds
to the total power ramp-up requested by higher layers from the first to
the last preamble for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of primary cell <span
class="math inline">\(c\)</span>, and <span
class="math inline">\(\mathrm{\Delta}_{F\_ PUCCH}\)</span> corresponds
to PUCCH format 0 or PUCCH format 1</p>
<p>Table 7.2.1-1: Mapping of TPC Command Field in a DCI format to
accumulated <span
class="math inline">\(\mathbf{\delta}_{\mathbf{PUCCH}\mathbf{,b}\mathbf{,}\mathbf{f}\mathbf{,}\mathbf{c}}\)</span>
values</p>
<table>
<colgroup>
<col style="width: 42%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr>
<th>TPC Command Field</th>
<th>Accumulated <span
class="math inline">\(\mathbf{\delta}_{\mathbf{PUCCH}\mathbf{,b}\mathbf{,}\mathbf{f}\mathbf{,}\mathbf{c}}\)</span>
[dB]</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>-1</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
</tr>
</tbody>
</table>
<h2 id="sounding-reference-signals">7.3 Sounding reference signals</h2>
<p>For SRS, a UE splits a linear value <span
class="math inline">\({\widehat{P}}_{\text{SRS},b,f,c}(i,q_{s},l)\)</span>
of the transmit power <span
class="math inline">\(P_{\text{SRS},b,f,c}(i,q_{s},l)\)</span> on active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> equally across the configured antenna
ports for SRS.</p>
<h3 id="ue-behaviour-2">7.3.1 UE behaviour</h3>
<p>If a UE transmits SRS based on a configuration by
<em>SRS-ResourceSet</em> on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> using SRS power control adjustment
state with index <span class="math inline">\(l\)</span>, the UE
determines the SRS transmission power <span
class="math inline">\(P_{\text{SRS},b,f,c}(i,q_{s},l)\)</span> in SRS
transmission occasion <span class="math inline">\(i\)</span> as</p>
<p><img src="media/image23.svg"
style="width:5.79167in;height:0.51042in" /> [dBm]</p>
<p>where,</p>
<p>- <span class="math inline">\(P_{\text{CMAX},f,c}(i)\)</span> is the
UE configured maximum output power defined in [8, TS 38.101-1], [8-2, TS
38.101-2] and [TS 38.101-3] for carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> in SRS transmission occasion <span
class="math inline">\(i\)</span></p>
<p>- <span class="math inline">\(P_{\text{O\_SRS},b,f,c}(q_{s})\)</span>
is provided by <em>p0</em> for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> and SRS resource set <span
class="math inline">\(q_{s}\)</span> provided by
<em>SRS-ResourceSet</em> and <em>SRS-ResourceSetId</em></p>
<p>- <span class="math inline">\(M_{\text{SRS},b,f,c}(i)\)</span> is a
SRS bandwidth expressed in number of resource blocks for SRS
transmission occasion <span class="math inline">\(i\)</span> on active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> and <span
class="math inline">\(\mu\)</span> is a SCS configuration defined in [4,
TS 38.211]</p>
<p>- <span
class="math inline">\(\alpha_{\text{SRS},b,f,c}(q_{s})\)</span> is
provided by <em>alpha</em> for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> and SRS resource set <span
class="math inline">\(q_{s}\)</span></p>
<p>- <span class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> is a
downlink pathloss estimate in dB calculated by the UE using RS resource
index <span class="math inline">\(q_{d}\)</span> as described in clause
7.1.1 for the active DL BWP of serving cell <span
class="math inline">\(c\)</span> and SRS resource set <span
class="math inline">\(q_{s}\)</span> [6, TS 38.214]. The RS resource
index <span class="math inline">\(q_{d}\)</span> is provided by
<em>pathlossReferenceRS</em> associated with the SRS resource set <span
class="math inline">\(q_{s}\)</span> and is either an <em>ssb-Index</em>
providing a SS/PBCH block index or a <em>csi-RS-Index</em> providing a
CSI-RS resource index. If the UE is provided
<em>enablePL-RS-UpdateForPUSCH-SRS</em>, a MAC CE [11, TS 38.321] can
provide by <em>SRS-PathlossReferenceRS-Id</em> a corresponding RS
resource index <span class="math inline">\(q_{d}\)</span> for aperiodic
or semi-persistent SRS resource set <span
class="math inline">\(q_{s}\)</span></p>
<p>- If the UE is not provided <em>pathlossReferenceRS</em> or
<em>SRS-PathlossReferenceRS-Id</em> and if the UE is not provided
<em>enableDefaultBeamPL-ForSRS</em>, or before the UE is provided
dedicated higher layer parameters, the UE calculates <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> using a RS resource
obtained from an SS/PBCH block with same SS/PBCH block index as the one
the UE uses to obtain <em>MIB</em>, or using the SS/PBCH block the UE
acquired the time and frequency synchronization for a secondary
cell.</p>
<p>- If the UE is provided <em>pathlossReferenceLinking</em>, the RS
resource is on a serving cell indicated by a value of
<em>pathlossReferenceLinking</em></p>
<p>- If the UE</p>
<p>- is not provided <em>pathlossReferenceRS</em> or
<em>SRS-PathlossReferenceRS-Id</em>,</p>
<p>- is not provided <em>spatialRelationInfo</em>, and</p>
<p>- is provided <em>enableDefaultBeamPL-ForSRS</em>, and</p>
<p>- is not provided <em>coresetPoolIndex</em> value of 1 for any
CORESET, or is provided <em>coresetPoolIndex</em> value of 1 for all
CORESETs, in <em>ControlResourceSet</em> and no codepoint of a TCI
field, if any, in a DCI format of any search space set maps to two TCI
states [5, TS 38.212]</p>
<p>the UE determines a RS resource index <span
class="math inline">\(q_{d}\)</span> providing a periodic RS resource
configured with <em>qcl-Type</em> set to 'typeD' in</p>
<p>- the TCI state or the QCL assumption of a CORESET with the lowest
index in the active DL BWP, if CORESETs are provided in the active DL
BWP of serving cell <span class="math inline">\(c\)</span>. If the
CORESET has two activated TCI states, as described in clause 10.1, the
UE determines the RS resource index <span
class="math inline">\(q_{d}\)</span> based on the first TCI state.</p>
<p>- the active PDSCH TCI state with lowest ID [6, TS 38.214] in the
active DL BWP, if CORESETs are not provided in the active DL BWP of
serving cell <span class="math inline">\(c\)</span></p>
<p>- For the SRS power control adjustment state for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> and SRS transmission occasion <span
class="math inline">\(i\)</span></p>
<p>- <span class="math inline">\(h_{b,f,c}(i,l) =
f_{b,f,c}(i,l)\)</span>, where <span
class="math inline">\(f_{b,f,c}(i,l)\)</span> is the current PUSCH power
control adjustment state as described in clause 7.1.1, if
<em>srs-PowerControlAdjustmentStates</em> indicates a same power control
adjustment state for SRS transmissions and PUSCH transmissions; or</p>
<p>- <img src="media/image24.svg"
style="width:2.22292in;height:0.38403in" /> if the UE is not configured
for PUSCH transmissions on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, or if
<em>srs-PowerControlAdjustmentStates</em> indicates separate power
control adjustment states between SRS transmissions and PUSCH
transmissions, and if <em>tpc-Accumulation</em> is not provided,
where</p>
<p>- The <span class="math inline">\(\delta_{SRS,b,f,c}\)</span> values
are given in Table 7.1.1-1</p>
<p>- <span class="math inline">\(\delta_{SRS,b,f,c}(m)\)</span> is
jointly coded with other TPC commands in a PDCCH with DCI format 2_3, as
described in clause 11.4</p>
<p>- <span class="math inline">\(\sum_{m = 0}^{\text{C}\left( S_{i}
\right) - 1}{\delta_{SRS,b,f,c}(m)}\)</span> is a sum of TPC command
values in a set <span class="math inline">\(S_{i}\)</span> of TPC
command values with cardinality <span
class="math inline">\(\text{C}\left( S_{i} \right)\)</span> that the UE
receives between <span class="math inline">\(K_{SRS}\left( i - i_{0}
\right) - 1\)</span> symbols before SRS transmission occasion <span
class="math inline">\(i - i_{0}\)</span> and <span
class="math inline">\(K_{SRS}(i)\)</span> symbols before SRS
transmission occasion <span class="math inline">\(i\)</span> on active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> for SRS power control adjustment state,
where <span class="math inline">\(i_{0} &gt; 0\)</span> is the smallest
integer for which <span class="math inline">\(K_{SRS}(i)\)</span>
symbols before SRS transmission occasion <span class="math inline">\(i -
i_{0}\)</span> is earlier than <span class="math inline">\(K_{SRS}(i -
i_{0})\)</span> symbols before SRS transmission occasion <span
class="math inline">\(i\)</span></p>
<p>- if the SRS transmission is aperiodic, <span
class="math inline">\(K_{SRS}(i)\)</span> is a number of symbols for
active UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> after a last symbol of a corresponding
PDCCH triggering the SRS transmission and before a first symbol of the
SRS transmission</p>
<p>- if the SRS transmission is semi-persistent or periodic, <span
class="math inline">\(K_{SRS}(i)\)</span> is a number of <span
class="math inline">\(K_{SRS,min}\)</span> symbols equal to the product
of a number of symbols per slot, <span
class="math inline">\(N_{symb}^{slot}\)</span>, and the minimum of the
values provided by <em>k2</em> in <em>PUSCH-ConfigCommon</em> for active
UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span></p>
<p>- If the first symbol of the SRS transmission occasion occurs within
<span class="math inline">\(T_{proc,2}\)</span> after a last symbol of a
PDCCH reception where the UE detects the DCI format providing the TPC
command, the UE may postpone the application of the TPC until the above
condition is not valid. <span class="math inline">\(T_{proc,2}\)</span>
is the PUSCH preparation time for the corresponding UE processing
capability [6, TS 38.214] assuming <span class="math inline">\(d_{2,1} =
0\)</span>, and <span class="math inline">\(\mu\)</span> corresponds to
the smallest SCS configuration between the SCS configuration of the
PDCCH carrying the DCI format and the SCS configuration of the SRS.</p>
<p>- If the UE has reached maximum power for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> at SRS transmission occasion <span
class="math inline">\(i - i_{0}\)</span> and <span
class="math inline">\(\sum_{m = 0}^{\text{C}\left( S_{i} \right) -
1}{\delta_{SRS,b,f,c}(m)} \geq 0\)</span>, then <span
class="math inline">\(h_{b,f,c}(i) = h_{b,f,c}\left( i - i_{0}
\right)\)</span></p>
<p>- If UE has reached minimum power for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> at SRS transmission occasion <span
class="math inline">\(i - i_{0}\)</span> and <span
class="math inline">\(\sum_{m = 0}^{\text{C}\left( S_{i} \right) -
1}{\delta_{SRS,b,f,c}(m)} \leq 0\)</span>, then <span
class="math inline">\(h_{b,f,c}(i) = h_{b,f,c}\left( i - i_{0}
\right)\)</span></p>
<p>- If a configuration for a <span class="math inline">\(P_{O\_
SRS,b,f,c}(q_{s})\)</span> value or for a <span
class="math inline">\(\alpha_{SRS,b,f,c}(q_{s})\)</span> value for a
corresponding SRS power control adjustment state <span
class="math inline">\(l\)</span> for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span> is provided by higher layers</p>
<blockquote>
<p>- <span class="math inline">\(h_{b,f,c}(k) = 0,\ k =
0,1,\ldots,i\)</span></p>
<p>- else</p>
</blockquote>
<p>- <span class="math inline">\(h_{b,f,c}(0) = \ \Delta
P_{rampup,b,f,c} + \delta_{b,f,c}\)</span></p>
<p>where</p>
<p><span class="math inline">\(\delta_{b,f,c}\)</span> is</p>
<p>- the TPC command value indicated in the random access response grant
corresponding to a PRACH transmission according to Type-1 random access
procedure, or in a random access response grant corresponding to MsgA
transmissions according to Type-2 random access procedure with RAR
message(s) for fallbackRAR, or</p>
<p>- the TPC command value indicated in a successRAR corresponding to
MsgA transmissions for Type-2 random access procedure,</p>
<p>and</p>
<p><span class="math inline">\(\mathrm{\Delta}P_{rampup,b,f,c} =
min\left\lbrack \max\left( 0,P_{CMAX,f,c} - \left(
P_{\text{O\_SRS},b,f,c}\left( q_{s} \right) + 10\log_{10}\left( 2^{\mu}
\cdot M_{\text{SRS},b,f,c}(i) \right) + \alpha_{SRS,b,f,c}\left( q_{s}
\right) \cdot {PL}_{b,f,c}(q_{d}) \right)
\right),\mathrm{\Delta}P_{rampup\_ requested,b,f,c}
\right\rbrack\)</span>;</p>
<blockquote>
<p>where <span class="math inline">\({\mathrm{\Delta}P}_{rampup\_
requested,b,f,c}\)</span> is provided by higher layers and corresponds
to the total power ramp-up requested by higher layers from the first to
the last preamble for active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>.</p>
</blockquote>
<p>- <span class="math inline">\(h_{b,f,c}(i) =
\delta_{SRS,b,f,c}(i)\)</span> if the UE is not configured for PUSCH
transmissions on active UL BWP <span class="math inline">\(b\)</span> of
carrier <span class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, or if
<em>srs-PowerControlAdjustmentStates</em> indicates separate power
control adjustment states between SRS transmissions and PUSCH
transmissions, and <em>tpc-Accumulation</em> is provided, and the UE
detects a DCI format 2_3 <span
class="math inline">\(K_{SRS,min}\)</span> symbols before a first symbol
of SRS transmission occasion <span class="math inline">\(i\)</span>,
where absolute values of <span
class="math inline">\(\delta_{SRS,b,f,c}\)</span> are provided in Table
7.1.1-1</p>
<p>- if <em>srs-PowerControlAdjustmentStates</em> indicates a same power
control adjustment state for SRS transmissions and PUSCH transmissions,
the update of the power control adjustment state for SRS transmission
occasion <span class="math inline">\(i\)</span> occurs at the beginning
of each SRS resource in the SRS resource set <span
class="math inline">\(q_{s}\)</span>; otherwise, the update of the power
control adjustment state SRS transmission occasion <span
class="math inline">\(i\)</span> occurs at the beginning of the first
transmitted SRS resource in the SRS resource set <span
class="math inline">\(q_{s}\)</span>.</p>
<p>If a UE transmits SRS based on a configuration by
<em>SRS-PosResourceSet</em> on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, the UE determines the SRS transmission
power <span class="math inline">\(P_{SRS,b,f,c}\left( i,q_{s}
\right)\)</span> in SRS transmission occasion <span
class="math inline">\(i\)</span> as</p>
<p><img src="media/image25.svg"
style="width:5.02083in;height:0.51042in" /> [dBm]</p>
<p>where,</p>
<p>- <span class="math inline">\(P_{O\_ SRS,b,f,c}\left( q_{s}
\right)\)</span> and <span
class="math inline">\(\alpha_{SRS,b,f,c}\left( q_{s} \right)\)</span>
are provided by <em>p0-r16</em> and <em>alpha-r16</em> respectively, for
active UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, and SRS resource set <span
class="math inline">\(q_{s}\)</span> is indicated by
<em>SRS-PosResourceSetId</em> from <em>SRS-PosResourceSet</em>, and</p>
<p>- <span class="math inline">\({PL}_{b,f,c}\left( q_{d}
\right)\)</span> is a downlink pathloss estimate in dB calculated by the
UE, as described in clause 7.1.1 in case of an active DL BWP of a
serving cell <span class="math inline">\(c\)</span>, using RS resource
indexed <span class="math inline">\(q_{d}\)</span> in a serving or
non-serving cell for SRS resource set <span
class="math inline">\(q_{s}\)</span> [6, TS 38.214]. A configuration for
RS resource index <span class="math inline">\(q_{d}\)</span> associated
with SRS resource set <span class="math inline">\(q_{s}\)</span> is
provided by <em>pathlossReferenceRS-Pos</em></p>
<p>- if a <em>ssb-IndexServing</em> is provided,
<em>referenceSignalPower</em> is provided by
<em>ss-PBCH-BlockPower</em></p>
<p>- if a <em>ssb-Ncell</em> is provided, <em>referenceSignalPower</em>
is provided by <em>ss-PBCH-BlockPower-r16</em></p>
<p>- if a <em>dl-PRS</em> is provided, <em>referenceSignalPower</em> is
provided by <em>dl-PRS-ResourcePower</em></p>
<p>If the UE is in the RRC_CONNECTED state and determines that the UE is
not able to accurately measure <span
class="math inline">\({PL}_{b,f,c}\left( q_{d} \right)\)</span>, or the
UE is not provided with <em>pathlossReferenceRS-Pos</em>, the UE
calculates <span class="math inline">\({PL}_{b,f,c}\left( q_{d}
\right)\)</span> using a RS resource obtained from the SS/PBCH block of
the serving cell that the UE uses to obtain <em>MIB</em>. If the UE is
in the RRC_INACTIVE state and determines that the UE is not able to
accurately measure <span class="math inline">\({PL}_{b,f,c}\left( q_{d}
\right)\)</span>, the UE does not transmit SRS for the SRS resource
set.</p>
<p>The UE may indicate a capability for a number of pathloss estimates
that the UE can simultaneously maintain for all SRS resource sets
provided by <em>SRS-PosResourceSet</em> in addition to the up to four
pathloss estimates that the UE maintains per serving cell for
PUSCH/PUCCH transmissions and for SRS transmissions configured by
<em>SRS-Resource</em>.</p>
<p>If a UE transmits SRS based on a configuration by
<em>SRS-PosResourceSet</em> outside initial UL BWP of carrier <em>f</em>
of serving cell <em>c</em> in RRC_INACTIVE state, the active UL BWP
<em>b</em> refers to the BWP configuration provided by the higher layer
parameter <em>bwp-NUL</em> or <em>bwp-SUL</em> contained in
<em>SRS-PosRRC-InactiveConfig</em> for the corresponding carrier.</p>
<h2 id="physical-random-access-channel">7.4 Physical random access
channel</h2>
<p>A UE determines a transmission power for a physical random access
channel (PRACH), <img src="media/image26.svg"
style="width:0.80208in;height:0.19792in" />, on active UL BWP <img
src="media/image27.svg" style="width:0.10417in;height:0.19792in" /> of
carrier <img src="media/image28.svg"
style="width:0.19792in;height:0.19792in" /> of serving cell <img
src="media/image29.svg" style="width:0.10417in;height:0.19792in" />
based on DL RS for serving cell <img src="media/image29.svg"
style="width:0.10417in;height:0.19792in" /> in transmission occasion
<img src="media/image30.svg" style="width:0.10417in;height:0.19792in" />
as</p>
<p><img src="media/image31.svg"
style="width:3.30208in;height:0.30208in" /> [dBm],</p>
<p>where <img src="media/image32.svg"
style="width:0.61458in;height:0.19792in" /> is the UE configured maximum
output power defined in [8-1, TS 38.101-1], [8-2, TS 38.101-2] and [8-3,
TS 38.101-3] for carrier <img src="media/image28.svg"
style="width:0.19792in;height:0.19792in" /> of serving cell <img
src="media/image29.svg" style="width:0.10417in;height:0.19792in" />
within transmission occasion <img src="media/image33.svg"
style="width:0.10417in;height:0.19792in" />, <img
src="media/image34.svg" style="width:0.69792in;height:0.19792in" /> is
the PRACH target reception power <em>PREAMBLE_RECEIVED_TARGET_POWER</em>
provided by higher layers [11, TS 38.321] for the active UL BWP <img
src="media/image27.svg" style="width:0.10417in;height:0.19792in" /> of
carrier <img src="media/image28.svg"
style="width:0.19792in;height:0.19792in" /> of serving cell <img
src="media/image29.svg" style="width:0.10417in;height:0.19792in" />, and
<img src="media/image35.svg" style="width:0.38542in;height:0.19792in" />
is a pathloss for the active UL BWP <img src="media/image27.svg"
style="width:0.10417in;height:0.19792in" /> of carrier <img
src="media/image28.svg" style="width:0.19792in;height:0.19792in" />
based on the DL RS associated with the PRACH transmission on the active
DL BWP of serving cell <img src="media/image29.svg"
style="width:0.10417in;height:0.19792in" /> and calculated by the UE in
dB as <em>referenceSignalPower</em> – higher layer filtered RSRP in dBm,
where RSRP is defined in [7, TS 38.215] and the higher layer filter
configuration is defined in [12, TS 38.331]. If the active DL BWP is the
initial DL BWP and for SS/PBCH block and CORESET multiplexing pattern 2
or 3, as described in clause 13, the UE determines <img
src="media/image36.svg" style="width:0.38542in;height:0.19792in" />
based on the SS/PBCH block associated with the PRACH transmission.</p>
<p>If a PRACH transmission from a UE is not in response to a detection
of a PDCCH order by the UE, or is in response to a detection of a PDCCH
order by the UE that triggers a contention based random access
procedure, or is associated with a link recovery procedure where a
corresponding index <img src="media/image37.svg"
style="width:0.30208in;height:0.19792in" /> is associated with a SS/PBCH
block, as described in clause 6, <em>referenceSignalPower</em> is
provided by <em>ss-PBCH-BlockPower</em>.</p>
<p>If a PRACH transmission from a UE is in response to a detection of a
PDCCH order by the UE that triggers a contention-free random access
procedure and depending on the DL RS that the DM-RS of the PDCCH order
is quasi-collocated with as described in clause 10.1,
<em>referenceSignalPower</em> is provided by <em>ss-PBCH-BlockPower</em>
or, if the UE is configured resources for a periodic CSI-RS reception or
the PRACH transmission is associated with a link recovery procedure
where a corresponding index <img src="media/image37.svg"
style="width:0.30208in;height:0.19792in" /> is associated with a
periodic CSI-RS configuration as described in clause 6,
<em>referenceSignalPower</em> is obtained by <em>ss-PBCH-BlockPower</em>
and <em>powerControlOffsetSS</em> where <em>powerControlOffsetSS</em>
provides an offset of CSI-RS transmission power relative to SS/PBCH
block transmission power [6, TS 38.214]. If
<em>powerControlOffsetSS</em> is not provided to the UE, the UE assumes
an offset of 0 dB. If the active TCI state for the PDCCH that provides
the PDCCH order includes two RS, the UE expects that one RS is
configured with <em>qcl-Type</em> set to 'typeD' and the UE uses the one
RS when applying a value provided by <em>powerControlOffsetSS</em>.</p>
<p>If within a random access response window, as described in clause
8.2, the UE does not receive a random access response that contains a
preamble identifier corresponding to the preamble sequence transmitted
by the UE, the UE determines a transmission power for a subsequent PRACH
transmission, if any, as described in [11, TS 38.321].</p>
<p>If prior to a PRACH retransmission, a UE changes the spatial domain
transmission filter, Layer 1 notifies higher layers to suspend the power
ramping counter as described in [11, TS 38.321].</p>
<p>If due to power allocation to PUSCH/PUCCH/PRACH/SRS transmissions as
described in clause 7.5, or due to power allocation in EN-DC or NE-DC or
NR-DC operation, or due to slot format determination as described in
clause 11.1, or due to the PUSCH/PUCCH/PRACH/SRS transmission occasions
are in the same slot or the gap between a PRACH transmission and
PUSCH/PUCCH/SRS transmission is small as described in clause 8.1, or due
to DAPS operation as described in clause 15, or due to HD-UE operation
in paired spectrum as described in clause 17.2, the UE does not transmit
a PRACH in a transmission occasion, Layer 1 notifies higher layers to
suspend the corresponding power ramping counter. If due to power
allocation to PUSCH/PUCCH/PRACH/SRS transmissions as described in clause
7.5, or due to power allocation in EN-DC or NE-DC or NR-DC operation,
the UE transmits a PRACH with reduced power in a transmission occasion,
Layer 1 may notify higher layers to suspend the corresponding power
ramping counter.</p>
<h2 id="prioritizations-for-transmission-power-reductions">7.5
Prioritizations for transmission power reductions</h2>
<p>For single cell operation with two uplink carriers or for operation
with carrier aggregation, if a total UE transmit power for PUSCH or
PUCCH or PRACH or SRS transmissions on serving cells in a frequency
range in a respective transmission occasion <span
class="math inline">\(i\)</span> would exceed <span
class="math inline">\({\widehat{P}}_{CMAX}(i)\)</span>, where <span
class="math inline">\({\widehat{P}}_{CMAX}(i)\)</span> is the linear
value of <span class="math inline">\(P_{CMAX}(i)\)</span> in
transmission occasion <span class="math inline">\(i\)</span> as defined
in [8-1, TS 38.101-1] for FR1 and [8-2, TS 38.101-2] for FR2, the UE
allocates power to PUSCH/PUCCH/PRACH/SRS transmissions according to the
following priority order (in descending order) so that the total UE
transmit power for transmissions on serving cells in the frequency range
is smaller than or equal to <span
class="math inline">\({\widehat{P}}_{CMAX}(i)\)</span> for that
frequency range in every symbol of transmission occasion <span
class="math inline">\(i\)</span>. For the purpose of power allocation in
this clause, if a UE is provided <em>uci-MuxWithDiffPrio</em> and the UE
multiplexes HARQ-ACK information in a PUSCH, a priority index of the
PUSCH is the larger of (a) the priority index of the PUSCH according to
clause 9 and (b) the larger priority index of the HARQ-ACK information.
When determining a total transmit power for serving cells in a frequency
range in a symbol of transmission occasion <span
class="math inline">\(i\)</span>, the UE does not include power for
transmissions starting after the symbol of transmission occasion <span
class="math inline">\(i\)</span>. The total UE transmit power in a
symbol of a slot is defined as the sum of the linear values of UE
transmit powers for PUSCH, PUCCH, PRACH, and SRS in the symbol of the
slot.</p>
<p>- PRACH transmission on the PCell</p>
<p>- PUCCH or PUSCH transmissions with larger priority index</p>
<p>- For PUCCH or PUSCH transmissions with same priority index</p>
<p>- PUCCH transmission with HARQ-ACK information, and/or SR, and/or
LRR, or PUSCH transmission with HARQ-ACK information of the priority
index</p>
<p>- PUCCH transmission with CSI or PUSCH transmission with CSI</p>
<p>- PUSCH transmission without HARQ-ACK information of the priority
index or CSI and, for Type-2 random access procedure, PUSCH transmission
on the PCell</p>
<p>- If the UE is configured with
prioSCellPRACH-OverSP-PeriodicSRS-r17</p>
<p>- Aperiodic SRS transmission or PRACH transmission on a serving cell
other than the PCell</p>
<p>- Semi-persistent and/or periodic SRS transmission</p>
<p>- otherwise,</p>
<p>- SRS transmission, with aperiodic SRS having higher priority than
semi-persistent and/or periodic SRS, or PRACH transmission on a serving
cell other than the PCell</p>
<p>In case of same priority order and for operation with carrier
aggregation, the UE prioritizes power allocation for transmissions on
the primary cell of the MCG or the SCG over transmissions on a secondary
cell. In case of same priority order and for operation with two UL
carriers, the UE prioritizes power allocation for transmissions on the
carrier where the UE is configured to transmit PUCCH. If PUCCH is not
configured for any of the two UL carriers, the UE prioritizes power
allocation for transmissions on the non-supplementary UL carrier.</p>
<h2 id="dual-connectivity">7.6 Dual connectivity</h2>
<h3 id="en-dc">7.6.1 EN-DC</h3>
<p>If a UE is configured with a MCG using E-UTRA radio access and with a
SCG using NR radio access, the UE is configured a maximum power <img
src="media/image38.svg" style="width:0.30208in;height:0.19792in" /> for
transmissions on the MCG by <em>p-MaxEUTRA</em> and a maximum power <img
src="media/image39.svg" style="width:0.30208in;height:0.19792in" /> for
transmissions in FR1 on the SCG by <em>p-NR-FR1</em>.</p>
<p>The UE determines a transmission power for the MCG as described in
[13, TS 36.213] using <img src="media/image40.svg"
style="width:0.30208in;height:0.19792in" /> as the maximum transmission
power. The UE determines transmission power for the SCG in FR1 as
described in clauses 7.1 through 7.5 using <img src="media/image41.svg"
style="width:0.30208in;height:0.19792in" /> as the maximum transmission
power. The UE determines transmission power for the SCG in FR2 as
described in clauses 7.1 through 7.5.</p>
<p>A UE does not expect to be configured for operation with shortened
TTI and/or processing time [13, TS 36.213] on a cell that is included in
an EN-DC configuration.</p>
<p>If a UE is configured with <img src="media/image42.svg"
style="width:1.10417in;height:0.19792in" />, where <img
src="media/image43.svg" style="width:0.30208in;height:0.19792in" /> is
the linear value of <img src="media/image38.svg"
style="width:0.30208in;height:0.19792in" />, <img
src="media/image44.svg" style="width:0.19792in;height:0.19792in" /> is
the linear value of <img src="media/image39.svg"
style="width:0.19792in;height:0.19792in" />, and <img
src="media/image45.svg" style="width:0.38542in;height:0.19792in" /> is
the linear value of a configured maximum transmission power for EN-DC
operation as defined in [8-3, TS 38.101-3] for FR1, the UE determines a
transmission power for the SCG as follows.</p>
<p>- If the UE is configured with reference TDD configuration for E-UTRA
(by <em>tdm-PatternConfig</em> or by <em>tdm-PatternConfig2</em> in [13,
TS 36.213])</p>
<p>- If the UE does not indicate a capability for dynamic power sharing
between E-UTRA and NR for EN-DC, the UE does not transmit in a slot on
the SCG in FR1 when a corresponding subframe on the MCG is an UL
subframe in the reference TDD configuration.</p>
<p>- If the UE indicates a capability for dynamic power sharing between
E-UTRA and NR for EN-DC, and does not indicate a capability
<em>tdm-restrictionDualTX-FDD-endc-r16</em> in [18, TS 38.306], and is
configured with <em>tdm-PatternConfig2</em>, the UE does not transmit on
the SCG in FR1 when the UE has overlapped transmission on a subframe on
the MCG.</p>
<p>- If the UE indicates a capability for dynamic power sharing between
E-UTRA and NR for EN-DC and</p>
<p>- if UE transmission(s) in subframe <img src="media/image46.svg"
style="width:0.10417in;height:0.19792in" /> of the MCG overlap in time
with UE transmission(s) in slot <img src="media/image47.svg"
style="width:0.10417in;height:0.19792in" /> of the SCG in FR1, and</p>
<p>- if <img src="media/image48.svg"
style="width:1.61458in;height:0.19792in" /> in any portion of slot <img
src="media/image47.svg" style="width:0.10417in;height:0.19792in" /> of
the SCG,</p>
<p>the UE reduces transmission power in any portion of slot <img
src="media/image47.svg" style="width:0.10417in;height:0.19792in" /> of
the SCG so that <img src="media/image49.svg"
style="width:1.51042in;height:0.19792in" /> in any portion of slot <img
src="media/image47.svg" style="width:0.10417in;height:0.19792in" />,
where <img src="media/image50.svg"
style="width:0.38542in;height:0.19792in" /> and <img
src="media/image51.svg" style="width:0.51042in;height:0.19792in" /> are
the linear values of the total UE transmission powers in subframe <img
src="media/image52.svg" style="width:0.10417in;height:0.19792in" /> of
the MCG and in slot <img src="media/image47.svg"
style="width:0.10417in;height:0.19792in" /> of the SCG in FR1,
respectively. The UE is not required to transmit in any portion of slot
<img src="media/image47.svg" style="width:0.10417in;height:0.19792in" />
of the SCG if <img src="media/image51.svg"
style="width:0.51042in;height:0.19792in" /> would need to be reduced by
more than the value provided by <em>X<sub>SCALE</sub></em> in order for
<img src="media/image49.svg"
style="width:1.51042in;height:0.19792in" /> in any portion of slot <img
src="media/image47.svg" style="width:0.10417in;height:0.19792in" /> of
the SCG. The UE is required to transmit in slot <img
src="media/image47.svg" style="width:0.10417in;height:0.19792in" /> of
the SCG if <img src="media/image51.svg"
style="width:0.38542in;height:0.19792in" /> would not need to be reduced
by more than the value provided by <em>X<sub>SCALE</sub></em> in order
for <img src="media/image49.svg"
style="width:1.38542in;height:0.19792in" /> in all portions of slot <img
src="media/image47.svg" style="width:0.10417in;height:0.19792in" />.</p>
<p>- If the UE does not indicate a capability for dynamic power sharing
between E-UTRA and NR for EN-DC, the UE expects to be configured with
reference TDD configuration for E-UTRA by <em>tdm-PatternConfig</em> in
[13, TS 36.213].</p>
<h3 id="a-ne-dc">7.6.1A NE-DC</h3>
<p>If a UE is configured with an MCG using NR radio access and with a
SCG using E-UTRA radio access, the UE is configured a maximum power <img
src="media/image39.svg" style="width:0.19792in;height:0.19792in" /> for
transmissions in FR1 on the MCG by <em>p-NR-FR1</em> and a maximum power
<img src="media/image38.svg" style="width:0.30208in;height:0.19792in" />
for transmissions on the SCG by <em>p-MaxEUTRA</em>.</p>
<p>The UE determines transmission power for the MCG in FR1 as described
in clauses 7.1 through 7.5 using <img src="media/image39.svg"
style="width:0.19792in;height:0.19792in" /> as the maximum transmission
power for <img src="media/image53.svg"
style="width:0.69792in;height:0.19792in" />. The UE determines
transmission power for the MCG in FR2 as described in clauses 7.1
through 7.5.</p>
<p>If the UE is not provided <em>tdd-UL-DL-ConfigurationCommon</em> for
the MCG, the UE determines a transmission power for the SCG as described
in [13, TS 36.213] using <img src="media/image40.svg"
style="width:0.30208in;height:0.19792in" /> as the maximum transmission
power.</p>
<p>If at least one symbol of slot <img src="media/image46.svg"
style="width:0.10417in;height:0.19792in" /> of the MCG that is indicated
as uplink or flexible by <em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd</em>-<em>UL-DL-ConfigurationDedicated</em> overlaps with
subframe <img src="media/image47.svg"
style="width:0.10417in;height:0.19792in" /> of the SCG</p>
<p>- for subframe <img src="media/image47.svg"
style="width:0.10417in;height:0.19792in" />, the UE determines a
transmission power for the SCG as described in [13, TS 36.213] using
<img src="media/image40.svg" style="width:0.30208in;height:0.19792in" />
as the maximum transmission power</p>
<p>otherwise</p>
<p>- the UE determines a transmission power for the SCG as described in
[13, TS 36.213] without considering <img src="media/image40.svg"
style="width:0.30208in;height:0.19792in" /> as the maximum transmission
power</p>
<p>If a UE is configured with <img src="media/image54.svg"
style="width:1.10417in;height:0.19792in" />, where <img
src="media/image43.svg" style="width:0.30208in;height:0.19792in" /> is
the linear value of <img src="media/image38.svg"
style="width:0.30208in;height:0.19792in" />, <img
src="media/image44.svg" style="width:0.30208in;height:0.19792in" /> is
the linear value of <img src="media/image39.svg"
style="width:0.30208in;height:0.19792in" />, and <img
src="media/image55.svg" style="width:0.42708in;height:0.22917in" /> is
the linear value of a configured maximum transmission power for NE-DC
operation as defined in [8-3, TS 38.101-3] for FR1, the UE determines a
transmission power for the MCG as follows</p>
<p>- If the UE is configured with reference TDD configuration for E-UTRA
(by <em>tdm-PatternConfigNE-DC-r15</em> in [13, TS 36.213])</p>
<p>- If the UE does not indicate a capability for dynamic power sharing
between E-UTRA and NR for NE-DC, the UE does not expect to transmit in a
slot on the MCG in FR1 when a corresponding subframe on the SCG is an UL
subframe in the reference TDD configuration.</p>
<p>- If the UE indicates a capability for dynamic power sharing between
E-UTRA and NR for NE-DC and</p>
<p>- if the UE transmission(s) in slot <img src="media/image46.svg"
style="width:0.11458in;height:0.19792in" /> of the MCG in FR1 overlap in
time with UE transmission(s) in subframe <img src="media/image47.svg"
style="width:0.125in;height:0.19792in" /> of the SCG, and</p>
<p>- if <img src="media/image56.svg"
style="width:1.69792in;height:0.26042in" /> in any portion of slot <img
src="media/image46.svg" style="width:0.11458in;height:0.19792in" /> of
the MCG,</p>
<p>the UE reduces transmission power in any portion of slot <img
src="media/image46.svg" style="width:0.10417in;height:0.19792in" /> of
the MCG so that <img src="media/image57.svg"
style="width:1.61458in;height:0.26042in" /> in all portions of slot <img
src="media/image46.svg" style="width:0.11458in;height:0.19792in" />,
where <img src="media/image50.svg"
style="width:0.41667in;height:0.19792in" /> and <img
src="media/image51.svg" style="width:0.38542in;height:0.19792in" /> are
the linear values of the total UE transmission powers in slot <img
src="media/image46.svg" style="width:0.11458in;height:0.19792in" /> of
the MCG in FR1 and in subframe <img src="media/image47.svg"
style="width:0.125in;height:0.19792in" /> of the SCG, respectively.</p>
<p>- If the UE does not indicate a capability for dynamic power sharing
between E-UTRA and NR for NE-DC, the UE expects to be configured with
reference TDD configuration for E-UTRA (by
<em>tdm-PatternConfigNE-DC-r15</em> in [13, TS 36.213]).</p>
<h3 id="nr-dc">7.6.2 NR-DC</h3>
<p>The UE procedures described in this clause are not applicable if the
UE is provided <em>scg-State</em> [12, TS 38.331].</p>
<p>If a UE is configured with an MCG using NR radio access in FR1 or in
FR2 and with a SCG using NR radio access in FR2 or in FR1, respectively,
the UE performs transmission power control independently per cell group
as described in clauses 7.1 through 7.5.</p>
<p>If a UE is configured with an MCG and a SCG using NR radio access in
FR1 and/or in FR2, the UE is configured a maximum power <span
class="math inline">\(P_{\text{MCG}}\)</span> for transmissions on the
MCG by <em>p-NR-FR1</em> and/or by <em>p-NR-FR2</em> and a maximum power
<span class="math inline">\(P_{\text{SCG}}\)</span> for transmissions on
the SCG by <em>p-NR-FR1</em> and/or by <em>p-NR-FR2</em> and with an
inter-CG power sharing mode by <em>nrdc-PCmode-FR1</em> for FR1 and/or
by <em>nrdc-PCmode-FR2</em> for FR2. The UE determines a transmission
power on the MCG and a transmission power on the SCG per frequency
range.</p>
<p>If a UE is provided <em>semi-static-mode1</em> for
<em>nrdc-PCmode-FR1</em> or for <em>nrdc-PCmode-FR2</em>, or
<em>semi-static-mode2</em> for <em>nrdc-PCmode-FR1</em> or for
<em>nrdc-PCmode-FR2</em>, the UE does not expect <span
class="math inline">\(P_{\text{MCG}}\)</span> and <span
class="math inline">\(P_{\text{SCG}}\)</span> to be configured such that
<span class="math inline">\({\widehat{P}}_{\text{MCG}} +
{\widehat{P}}_{SCG} &gt; {\widehat{P}}_{Total}^{NR - DC}\)</span>, where
<span class="math inline">\({\widehat{P}}_{\text{MCG}}\)</span> is the
linear value of <span class="math inline">\(P_{\text{MCG}}\)</span>,
<span class="math inline">\({\widehat{P}}_{SCG}\)</span> is the linear
value of <span class="math inline">\(P_{\text{SCG}}\)</span>, and <span
class="math inline">\({\widehat{P}}_{Total}^{NR - DC}\)</span> is the
linear value of a configured maximum transmission power for NR-DC
operation in FR1 or FR2 as defined in [8-3, TS 38.101-3].</p>
<p>If a UE is provided <em>semi-static-mode1</em> for
<em>nrdc-PCmode-FR1</em> or for <em>nrdc-PCmode-FR2</em>, the UE
determines a transmission power for the MCG or for the SCG as described
in clauses 7.1 through 7.5 using <span
class="math inline">\(P_{\text{MCG}}\)</span> or <span
class="math inline">\(P_{\text{SCG}}\)</span> as the maximum
transmission power, respectively.</p>
<p>If a UE is provided <em>semi-static-mode2</em> for
<em>nrdc-PCmode-FR1</em> or for <em>nrdc-PCmode-FR2</em></p>
<p>- if the UE is not provided <em>tdd-UL-DL-ConfigurationCommon</em>
for the MCG or SCG, the UE determines a transmission power for the MCG
or for the SCG as described in clauses 7.1 through 7.5 using <span
class="math inline">\(P_{\text{MCG}}\)</span> or <span
class="math inline">\(P_{\text{SCG}}\)</span> as the maximum
transmission power, respectively</p>
<p>- if at least one symbol of slot <span
class="math inline">\(i_{1}\)</span> of the MCG or of the SCG that is
indicated as uplink or flexible to a UE by
<em>tdd-UL-DL-ConfigurationCommon</em> and
<em>tdd</em>-<em>UL-DL-ConfigurationDedicated</em>, if provided,
overlaps with a symbol for any ongoing transmission overlapping with
slot <span class="math inline">\(i_{2}\)</span> of the SCG or of the
MCG, respectively, the UE determines a power for the transmission on the
SCG or the MCG overlapping with slot <span
class="math inline">\(i_{2}\)</span> as described in clauses 7.1 through
7.5 using <span class="math inline">\(P_{\text{SCG}}\)</span> or <span
class="math inline">\(P_{\text{MCG}}\)</span>, respectively, as the
maximum transmission power</p>
<p>- otherwise, the UE determines a power for the transmission on SCG or
the MCG overlapping with slot <span
class="math inline">\(i_{2}\)</span>, as described in [8-3, TS 38.101-3]
and in clauses 7.1 through 7.5 without considering <span
class="math inline">\(P_{\text{SCG}}\)</span> or <span
class="math inline">\(P_{\text{MCG}}\)</span> respectively</p>
<p>The UE expects to be provided <em>semi-static-mode2</em> for
<em>nrdc-PCmode-FR1</em> or for <em>nrdc-PCmode-FR2</em> only for
synchronous NR-DC operation [10, TS 38.133].</p>
<p>If a UE</p>
<p>- is provided <em>dynamic</em> for <em>nrdc-PCmode-FR1</em> or for
<em>nrdc-PCmode-FR2</em>, and</p>
<p>- indicates a capability to support dynamic power sharing for
intra-FR NR DC,</p>
<p>the UE determines a maximum transmission power on the SCG at a first
symbol of a transmission occasion on the SCG by determining
transmissions on the MCG that</p>
<p>- are scheduled by DCI formats in PDCCH receptions with a last symbol
that is earlier by at least <span
class="math inline">\(T_{\text{offset}}\)</span> from the first symbol
of the transmission occasion on the SCG, or are configured by higher
layers, and</p>
<p>- overlap with the transmission occasion on the SCG</p>
<p>the maximum transmission power on the SCG is determined as</p>
<p>- <span class="math inline">\(\min\left(
{\widehat{P}}_{\text{SCG}},{\widehat{P}}_{\text{Total}}^{\text{NR-DC}} -
\ {\widehat{P}}_{\text{MCG}}^{actual} \right)\)</span>, if the UE
determines transmissions on the MCG with a <span
class="math inline">\({\widehat{P}}_{\text{MCG}}^{actual}\)</span> total
power</p>
<p>- <span
class="math inline">\({\widehat{P}}_{\text{Total}}^{\text{NR-DC}}\)</span>,
if the UE does not determine any transmissions on the MCG</p>
<p>where</p>
<p>- <span class="math inline">\(T_{\text{offset}} = max\{
T_{proc,MCG}^{\max},T_{proc,SCG}^{\max}\}\)</span>,</p>
<p>- <span class="math inline">\(T_{proc,MCG}^{\max}\)</span> and <span
class="math inline">\(T_{proc,SCG}^{\max}\)</span> is the maximum of
<span class="math inline">\(T_{proc,2}\)</span>, <span
class="math inline">\(T_{proc,CSI}\)</span>, <span
class="math inline">\(T_{proc,release}^{mux}\)</span>, <span
class="math inline">\(T_{proc,2}^{mux}\)</span>, and <span
class="math inline">\(T_{proc,CSI}^{mux}\)</span> based on the
configurations on the MCG and the SCG, respectively, when the UE
indicates the value of 'long' for the capability,</p>
<p>- <span class="math inline">\(T_{proc,MCG}^{\max}\)</span> and <span
class="math inline">\(T_{proc,SCG}^{\max}\)</span> is the maximum of
<span class="math inline">\(T_{proc,2}\)</span>, <span
class="math inline">\(T_{proc,release}^{mux}\)</span>, <span
class="math inline">\(T_{proc,2}^{mux}\)</span> based on the
configurations on the MCG and the SCG, respectively, when the UE
indicates the value of 'short' for the capability, and</p>
<p>- <span
class="math inline">\({\widehat{P}}_{\text{MCG}}^{actual}\)</span> is
the total power for the transmissions on the MCG that overlap with the
transmission occasion on the SCG where <span
class="math inline">\({\widehat{P}}_{\text{MCG}}^{actual}\)</span> is
determined based on transmissions configured by higher layers and on
transmissions scheduled by DCI formats in PDCCH receptions with a last
symbol that is at least <span
class="math inline">\(T_{\text{offset}}\)</span> before the first symbol
of the transmission occasion on the SCG.</p>
<p>The UE does not expect to have PUSCH, PUCCH, PRACH, or SRS
transmissions on the MCG that</p>
<p>- are scheduled/triggered by DCI formats in PDCCH receptions with a
last symbol that is earlier by less than <span
class="math inline">\(T_{\text{offset}}\)</span> from the first symbol
of the transmission occasion on the SCG, and</p>
<p>- overlap with the transmission occasion on the SCG</p>
<p>The UE does not expect to receive a positive TPC command value in a
DCI format 2_2 or a DCI format 2_3 in a PDCCH reception with a last
symbol that is less than <span
class="math inline">\(T_{\text{offset}}\)</span> before the first symbol
of the transmission occasion on the SCG, if the transmission on the MCG
overlaps with the transmission occasion on the SCG.</p>
<p>The UE is not required to apply a TPC command the UE receives in a
DCI format 2_2 or a DCI format 2_3 in a PDCCH reception with a last
symbol that is less than <span
class="math inline">\(T_{\text{offset}}\)</span> before the first symbol
of the transmission occasion on the SCG, if the transmission on the MCG
overlaps with the transmission occasion on the SCG.</p>
<h2 id="power-headroom-report">7.7 Power headroom report</h2>
<p>The types of UE power headroom reports are the following. A Type 1 UE
power headroom <img src="media/image58.svg"
style="width:0.26042in;height:0.15625in" /> that is valid for PUSCH
transmission occasion <img src="media/image59.svg"
style="width:0.10417in;height:0.19792in" /> on active UL BWP <img
src="media/image27.svg" style="width:0.19792in;height:0.19792in" /> of
carrier <img src="media/image28.svg"
style="width:0.10417in;height:0.19792in" /> of serving cell <img
src="media/image29.svg" style="width:0.125in;height:0.17708in" />. A
Type 3 UE power headroom<img src="media/image58.svg"
style="width:0.26042in;height:0.15625in" /> that is valid for SRS
transmission occasion <img src="media/image59.svg"
style="width:0.10417in;height:0.19792in" /> on active UL BWP <img
src="media/image27.svg" style="width:0.19792in;height:0.19792in" /> of
carrier <img src="media/image28.svg"
style="width:0.10417in;height:0.19792in" /> of serving cell <img
src="media/image29.svg" style="width:0.125in;height:0.17708in" />.</p>
<p>A UE determines whether a power headroom report for an activated
serving cell [11, TS 38.321] is based on an actual transmission or a
reference format based on the higher layer signalling of configured
grant and periodic/semi-persistent sounding reference signal
transmissions and downlink control information the UE received until and
including the PDCCH monitoring occasion where the UE detects the first
DCI format scheduling an initial transmission of a transport block since
a power headroom report was triggered if the power headroom report is
reported on a PUSCH triggered by the first DCI format. Otherwise, a UE
determines whether a power headroom report is based on an actual
transmission or a reference format based on the higher layer signalling
of configured grant and periodic/semi-persistent sounding reference
signal transmissions and downlink control information the UE received
until the first uplink symbol of a configured PUSCH transmission minus
<em>T'<sub>proc,2</sub></em>=<em>T<sub>proc,2</sub></em> where
<em>T<sub>proc,2 </sub></em>is determined according to [6, TS 38.214]
assuming <em>d<sub>2,1 </sub></em>= 1, <em>d<sub>2,2</sub></em>=0, and
with <em>µ<sub>DL</sub></em> corresponding to the subcarrier spacing of
the active downlink BWP of the scheduling cell for a configured grant if
the power headroom report is reported on the PUSCH using the configured
grant.</p>
<p>If a UE</p>
<p>- is configured with two UL carriers for a serving cell, and</p>
<p>- determines a Type 1 power headroom report and a Type 3 power
headroom report for the serving cell</p>
<p>the UE</p>
<p>- provides the Type 1 power headroom report if both the Type 1 and
Type 3 power headroom reports are based on respective actual
transmissions or on respective reference transmissions</p>
<p>- provides the power headroom report that is based on a respective
actual transmission if either the Type 1 report or the Type 3 report is
based on a respective reference transmission</p>
<p>If a UE is configured with a SCG and if <em>phr-ModeOtherCG</em> for
a CG indicates 'virtual' then, for power headroom reports transmitted on
the CG, the UE computes <em>PH</em> assuming that the UE does not
transmit PUSCH/PUCCH on any serving cell of the other CG. For NR-DC when
both the MCG and the SCG operate either in FR1 or in FR2 and for a power
headroom report transmitted on the MCG or the SCG, the UE computes
<em>PH</em> assuming that the UE does not transmit PUSCH/PUCCH on any
serving cell of the SCG or the MCG, respectively.</p>
<p>If the UE is configured with a SCG,</p>
<p>- For computing power headroom for cells belonging to MCG, the term
'serving cell' in this clause refers to serving cell belonging to the
MCG.</p>
<p>- For computing power headroom for cells belonging to SCG, the term
'serving cell' in this clause refers to serving cell belonging to the
SCG. The term 'primary cell' in this clause refers to the PSCell of the
SCG.</p>
<p>If the UE is configured with a PUCCH-SCell,</p>
<p>- For computing power headroom for cells belonging to primary PUCCH
group, the term 'serving cell' in this clause refers to serving cell
belonging to the primary PUCCH group.</p>
<p>- For computing power headroom for cells belonging to secondary PUCCH
group, the term 'serving cell' in this clause refers to serving cell
belonging to the secondary PUCCH group. The term 'primary cell' in this
clause refers to the PUCCH-SCell of the secondary PUCCH group.</p>
<p>For a UE configured with EN-DC/NE-DC and capable of dynamic power
sharing, if E-UTRA Dual Connectivity PHR [14, TS 36.321] is triggered
and,</p>
<p>- if the duration of NR slot on active UL BWP is different from that
of E-UTRA subframe carrying the Dual Connectivity PHR, the UE provides
power headroom of the first NR slot that fully overlaps with the E-UTRA
subframe;</p>
<p>- if the duration of NR slot on active UL BWP is the same as that of
E-UTRA subframe carrying the Dual Connectivity PHR for asynchronous
EN-DC/NE-DC [10, TS 38.133], the UE provides power headroom of the first
NR slot that overlaps with the E-UTRA subframe.</p>
<h3 id="type-1-ph-report">7.7.1 Type 1 PH report</h3>
<p>If a UE determines that a Type 1 power headroom report for an
activated serving cell is based on an actual PUSCH transmission then,
for PUSCH transmission occasion <span class="math inline">\(i\)</span>
on active UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, the UE computes the Type 1 power
headroom report as</p>
<p><img src="media/image60.svg"
style="width:6.60417in;height:0.275in" /> [dB]</p>
<p>where <span class="math inline">\(P_{\text{CMAX},f,c}(i)\)</span>,
<span class="math inline">\(P_{\text{O\_PUSCH},b,f,c}(j)\)</span>, <span
class="math inline">\(M_{RB,b,f,c}^{PUSCH}(i)\)</span>, <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span>, <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span>, <span
class="math inline">\(\mathrm{\Delta}_{TF,b,f,c}(i)\)</span> and <span
class="math inline">\(f_{b,f,c}(i,l)\)</span> are defined in clause
7.1.1.</p>
<p>If a UE is configured with multiple cells for PUSCH transmissions,
where a SCS configuration <span class="math inline">\(\mu_{1}\)</span>
on active UL BWP <span class="math inline">\(b_{1}\)</span> of carrier
<span class="math inline">\(f_{1}\)</span> of serving cell <span
class="math inline">\(c_{1}\)</span> is smaller than a SCS configuration
<span class="math inline">\(\mu_{2}\)</span> on active UL BWP <span
class="math inline">\(b_{2}\)</span> of carrier <span
class="math inline">\(f_{2}\)</span> of serving cell <span
class="math inline">\(c_{2}\)</span>, and if the UE provides a Type 1
power headroom report in a PUSCH transmission in a slot on active UL BWP
<span class="math inline">\(b_{1}\)</span> that overlaps with multiple
slots on active UL BWP <span class="math inline">\(b_{2}\)</span>, the
UE provides a Type 1 power headroom report for the first PUSCH, if any,
on the first slot of the multiple slots on active UL BWP <span
class="math inline">\(b_{2}\)</span> that fully overlaps with the slot
on active UL BWP <span class="math inline">\(b_{1}\)</span>. If a UE is
configured with multiple cells for PUSCH transmissions, where a same SCS
configuration on active UL BWP <span
class="math inline">\(b_{1}\)</span> of carrier <span
class="math inline">\(f_{1}\)</span> of serving cell <span
class="math inline">\(c_{1}\)</span> and active UL BWP <span
class="math inline">\(b_{2}\)</span> of carrier <span
class="math inline">\(f_{2}\)</span> of serving cell <span
class="math inline">\(c_{2}\)</span>, and if the UE provides a Type 1
power headroom report in a PUSCH transmission in a slot on active UL BWP
<span class="math inline">\(b_{1}\)</span>, the UE provides a Type 1
power headroom report for the first PUSCH, if any, on the slot on active
UL BWP <span class="math inline">\(b_{2}\)</span> that overlaps with the
slot on active UL BWP <span class="math inline">\(b_{1}\)</span>.</p>
<p>If a UE is configured with multiple cells for PUSCH transmissions and
provides a Type 1 power headroom report in a PUSCH transmission with
PUSCH repetition Type B having a nominal repetition that spans multiple
slots on active UL BWP <span class="math inline">\(b_{1}\)</span> and
overlaps with one or more slots on active UL BWP <span
class="math inline">\(b_{2}\)</span>, the UE provides a Type 1 power
headroom report for the first PUSCH, if any, on the first slot of the
one or more slots on active UL BWP <span
class="math inline">\(b_{2}\)</span> that overlaps with the multiple
slots of the nominal repetition on active UL BWP <span
class="math inline">\(b_{1}\)</span>.</p>
<p>For a UE configured with EN-DC/NE-DC and capable of dynamic power
sharing, if E-UTRA Dual Connectivity PHR [14, TS 36.321] is triggered,
the UE provides power headroom of the first PUSCH, if any, on the
determined NR slot as described in clause 7.7.</p>
<p>If a UE is configured with multiple cells for PUSCH transmissions,
the UE does not consider for computation of a Type 1 power headroom
report in a first PUSCH transmission that includes an initial
transmission of transport block on active UL BWP <span
class="math inline">\(b_{1}\)</span> of carrier <span
class="math inline">\(f_{1}\)</span> of serving cell <span
class="math inline">\(c_{1}\)</span>, a second PUSCH transmission on
active UL BWP <span class="math inline">\(b_{2}\)</span> of carrier
<span class="math inline">\(f_{2}\)</span> of serving cell <span
class="math inline">\(c_{2}\)</span> that overlaps with the first PUSCH
transmission if</p>
<p>- the second PUSCH transmission is scheduled by a DCI format in a
PDCCH received in a second PDCCH monitoring occasion, and</p>
<p>- the second PDCCH monitoring occasion is after a first PDCCH
monitoring occasion where the UE detects the earliest DCI format
scheduling an initial transmission of a transport block after a power
headroom report was triggered</p>
<p>or</p>
<p>- the second PUSCH transmission is after the first uplink symbol of
the first PUSCH transmission minus
<em>T'<sub>proc,2</sub></em>=<em>T<sub>proc,2</sub></em> where
<em>T<sub>proc,2</sub></em> is determined according to [6, TS 38.214]
assuming <em>d<sub>2,1 </sub></em>=1, <em>d<sub>2,2</sub></em>=0, and
with <em>µ<sub>DL</sub></em> corresponding to the subcarrier spacing of
the active downlink BWP of the scheduling cell for a configured grant if
the first PUSCH transmission is on a configured grant after a power
headroom report was triggered.</p>
<p>If the UE determines that a Type 1 power headroom report for an
activated serving cell is based on a reference PUSCH transmission then,
for PUSCH transmission occasion <span class="math inline">\(i\)</span>
on active UL BWP <span class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, the UE computes the Type 1 power
headroom report as</p>
<p><img src="media/image61.svg" style="width:5in;height:0.26042in" />
[dB]</p>
<p>where <span
class="math inline">\({\widetilde{P}}_{\text{CMAX},f,c}(i)\)</span> is
computed assuming MPR=0 dB, A-MPR=0 dB, P-MPR=0 dB. ∆T<sub>C</sub> = 0
dB. MPR, A-MPR, P-MPR and ∆T<sub>C</sub> are defined in [8-1, TS
38.101-1], [8-2, TS 38.101-2] and [8-3, TS 38.101-3]. The remaining
parameters are defined in clause 7.1.1 and, if <em>ul-powerControl</em>
is not provided, <span
class="math inline">\(P_{\text{O\_PUSCH},b,f,c}(j)\)</span> and <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span> are obtained using
<span class="math inline">\(P_{\text{O\_NOMINAL,PUSCH},f,c}(0)\)</span>
and <em>p0-PUSCH-AlphaSetId</em> <em>=</em> 0, <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> is obtained using
<em>pusch-PathlossReferenceRS-Id =</em> 0, and <span
class="math inline">\(l = 0\)</span>. If <em>ul-powerControl</em> is
provided, <span
class="math inline">\(P_{\text{O\_PUSCH},b,f,c}(j),\)</span> <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span> and <span
class="math inline">\(l\)</span> are obtained by
<em>p0AlphaSetforPUSCH</em> associated with the indicated
<em>TCI-State</em> or <em>TCI-UL-State</em>, <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> is obtained by PL-RS
associated with the indicated <em>TCI-State</em> or
<em>TCI-UL-State</em>. If the activated serving cell is an SCell and
parameter <em>preambleReceivedTargetPower</em> is not configured for the
cell, then the parameter <em>preambleReceivedTargetPower</em> configured
for the primary cell is applied, where the parameter refers to the one
configured for the non-supplementary uplink carrier if the primary cell
is configured with two uplink carriers.</p>
<p>If a UE is configured with two UL carriers for a serving cell and the
UE determines a Type 1 power headroom report for the serving cell based
on a reference PUSCH transmission, the UE computes a Type 1 power
headroom report for the serving cell assuming a reference PUSCH
transmission on the UL carrier provided by <em>pusch-Config</em>. If the
UE is provided <em>pusch-Config</em> for both UL carriers, the UE
computes a Type 1 power headroom report for the serving cell assuming a
reference PUSCH transmission on the UL carrier provided by
<em>pucch-Config</em>. If <em>pucch-Config</em> is not provided to the
UE for any of the two UL carriers, the UE computes a Type 1 power
headroom report for the serving cell assuming a reference PUSCH
transmission on the non-supplementary UL carrier.</p>
<p>If a UE is not provided <em>twoPHRMode,</em> and is provided two SRS
resource sets in <em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, the UE provides one Type 1 power
headroom report in a slot <span class="math inline">\(n\)</span>. If the
Type 1 power headroom report is for an actual PUSCH repetition, the Type
1 power headroom report is for the first PUSCH repetition associated
with the first SRS resource set or the second SRS resource set that
overlaps with slot <span class="math inline">\(n\)</span>.</p>
<p>If a UE is provided <em>twoPHRMode</em>, and is provided two SRS
resource sets in <em>srs-ResourceSetToAddModList</em> or
<em>srs-ResourceSetToAddModListDCI-0-2</em> with <em>usage</em> set to
'codebook' or 'nonCodebook' on active UL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> of serving cell <span
class="math inline">\(c\)</span>, the UE provides two Type 1 power
headroom reports in a slot <span class="math inline">\(n\)</span>,
where</p>
<p>- if the UE provides a first Type 1 power headroom report for an
actual PUSCH repetition of a PUSCH transmission starting earliest in
slot <span class="math inline">\(n\)</span> that is associated with one
SRS resource set,</p>
<p>- if the UE transmits PUSCH repetitions associated with the other SRS
resource set in slot <span class="math inline">\(n\)</span>, the UE
provides a second Type 1 power headroom report for a first actual PUSCH
repetition associated with the other SRS resource set that overlaps with
slot <span class="math inline">\(n\)</span></p>
<p>- else, the UE provides a second Type 1 power headroom report for a
reference PUSCH transmission associated with the other SRS resource set,
where</p>
<p>- if the other SRS resource set is the first SRS resource set, <span
class="math inline">\(P_{\text{O\_PUSCH},b,f,c}(j)\)</span> and <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span> are obtained using
<span class="math inline">\(P_{\text{O\_NOMINAL,PUSCH},f,c}(0)\)</span>
and <em>p0-PUSCH-AlphaSetId</em> <em>=</em> 0, <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> is obtained using
<em>pusch-PathlossReferenceRS-Id =</em> 0 if the UE is not provided
<em>enablePL-RS-UpdateForPUSCH-SRS</em> or is obtained from
<em>PUSCH-PathlossReferenceRS-Id</em> mapped to
<em>sri-PUSCH-PowerControlId</em> = 0 of
<em>sri-PUSCH-MappingToAddModList</em> if the UE is provided
<em>enablePL-RS-UpdateForPUSCH-SRS</em>, and <span
class="math inline">\(l = 0\)</span></p>
<p>- else, <span
class="math inline">\(P_{\text{O\_PUSCH},b,f,c}(j)\)</span> and <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span> are obtained using
<span class="math inline">\(P_{\text{O\_NOMINAL,PUSCH},f,c}(0)\)</span>
and <em>p0-PUSCH-AlphaSetId</em> <em>= 1</em>, <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> is obtained using
<em>pusch-PathlossReferenceRS-Id</em> = 1 if the UE is not provided
<em>enablePL-RS-UpdateForPUSCH-SRS</em> or is obtained from
<em>PUSCH-PathlossReferenceRS-Id</em> mapped to
<em>sri-PUSCH-PowerControlId</em> = 0 of
<em>sri-PUSCH-MappingToAddModList2</em> if the UE is provided
<em>enablePL-RS-UpdateForPUSCH-SRS</em>, and <span
class="math inline">\(l = 1\)</span> if the UE is provided
<em>twoPUSCH-PC-AdjustmentStates</em>, or <span class="math inline">\(l
= 0\)</span> if the UE is not provided
<em>twoPUSCH-PC-AdjustmentStates</em></p>
<p>- else, if the UE provides a Type 1 power headroom report for a
reference PUSCH transmission associated with the first SRS resource set,
the UE provides a Type 1 power headroom report for a reference PUSCH
transmission associated with the second SRS resource set, where</p>
<p>- for the first Type 1 power headroom report, <span
class="math inline">\(P_{\text{O\_PUSCH},b,f,c}(j)\)</span> and <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span> are obtained using
<span class="math inline">\(P_{\text{O\_NOMINAL,PUSCH},f,c}(0)\)</span>
and <em>p0-PUSCH-AlphaSetId</em> <em>=</em> 0, <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> is obtained using
<em>pusch-PathlossReferenceRS-Id =</em> 0 if the UE is not provided
<em>enablePL-RS-UpdateForPUSCH-SRS</em>, or is obtained from the
<em>PUSCH-PathlossReferenceRS-Id</em> mapped to
<em>sri-PUSCH-PowerControlId</em> = 0 of
<em>sri-PUSCH-MappingToAddModList</em> if the UE is provided
<em>enablePL-RS-UpdateForPUSCH-SRS</em>, and <span
class="math inline">\(l = 0\)</span>.</p>
<p>- for the second Type 1 power headroom report, <span
class="math inline">\(P_{\text{O\_PUSCH},b,f,c}(j)\)</span> and <span
class="math inline">\(\alpha_{b,f,c}(j)\)</span> are obtained using
<span class="math inline">\(P_{\text{O\_NOMINAL,PUSCH},f,c}(0)\)</span>
and <em>p0-PUSCH-AlphaSetId</em> <em>= 1</em>, <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> is obtained using
<em>pusch-PathlossReferenceRS-Id = 1</em> if the UE is not provided
<em>enablePL-RS-UpdateForPUSCH-SRS</em>, or is obtained from the
<em>PUSCH-PathlossReferenceRS-Id</em> mapped to
<em>sri-PUSCH-PowerControlId</em> = 0 of
<em>sri-PUSCH-MappingToAddModList2</em> if the UE is provided
<em>enablePL-RS-UpdateForPUSCH-SRS</em>, and <span
class="math inline">\(l = 1\)</span> if the UE is provided
<em>twoPUSCH-PC-AdjustmentStates</em> or <span class="math inline">\(l =
0\)</span> if the UE is not provided
<em>twoPUSCH-PC-AdjustmentStates</em></p>
<h3 id="type-2-ph-report">7.7.2 Type 2 PH report</h3>
<p>This clause is reserved.</p>
<h3 id="type-3-ph-report">7.7.3 Type 3 PH report</h3>
<p>If a UE determines that a Type 3 power headroom report for an
activated serving cell is based on an actual SRS transmission then, for
SRS transmission occasion <img src="media/image62.svg"
style="width:0.10417in;height:0.19792in" /> on active UL BWP <img
src="media/image27.svg" style="width:0.19792in;height:0.19792in" /> of
carrier <img src="media/image63.svg"
style="width:0.19792in;height:0.19792in" /> of serving cell <span
class="math inline">\(c\)</span> and if the UE is not configured for
PUSCH transmissions on carrier <img src="media/image63.svg"
style="width:0.19792in;height:0.19792in" /> of serving cell <span
class="math inline">\(c\)</span> and the resource for the SRS
transmission is provided by <em>SRS-Resource</em>, the UE computes a
Type 3 power headroom report as</p>
<p><img src="media/image64.svg"
style="width:6.51042in;height:0.30208in" /> [dB]</p>
<p>where <img src="media/image65.svg"
style="width:0.77083in;height:0.26042in" />, <img
src="media/image66.svg" style="width:0.89583in;height:0.19792in" />,
<img src="media/image67.svg"
style="width:0.69792in;height:0.19792in" />, <img
src="media/image68.svg" style="width:0.80208in;height:0.26042in" />,
<img src="media/image69.svg" style="width:0.69792in;height:0.19792in" />
and <img src="media/image70.svg"
style="width:0.51042in;height:0.19792in" /> are defined in clause 7.3.1
with corresponding values provided by <em>SRS-ResourceSet</em>.</p>
<p>If the UE determines that a Type 3 power headroom report for an
activated serving cell is based on a reference SRS transmission then,
for SRS transmission occasion <img src="media/image71.svg"
style="width:0.10417in;height:0.19792in" /> on UL BWP <img
src="media/image27.svg" style="width:0.19792in;height:0.19792in" /> of
carrier <img src="media/image63.svg"
style="width:0.19792in;height:0.19792in" /> of serving cell <span
class="math inline">\(c\)</span>, and if the UE is not configured for
PUSCH transmissions on UL BWP <img src="media/image27.svg"
style="width:0.19792in;height:0.19792in" /> of carrier <img
src="media/image63.svg" style="width:0.19792in;height:0.19792in" /> of
serving cell <span class="math inline">\(c\)</span> and a resource for
the reference SRS transmission is provided by <em>SRS-Resource</em>, the
UE computes a Type 3 power headroom report as</p>
<p><img src="media/image72.svg"
style="width:4.875in;height:0.26042in" /> [dB]</p>
<p>where <img src="media/image73.svg"
style="width:0.19792in;height:0.26042in" /> is an SRS resource set
corresponding to <em>SRS-ResourceSetId = 0</em> for UL BWP <img
src="media/image27.svg" style="width:0.19792in;height:0.19792in" /> and
<img src="media/image74.svg"
style="width:0.89583in;height:0.26042in" />, <img
src="media/image75.svg" style="width:0.80208in;height:0.26042in" />,
<img src="media/image76.svg" style="width:0.69792in;height:0.26042in" />
and <img src="media/image77.svg"
style="width:0.51042in;height:0.26042in" /> are defined in clause 7.3.1
with corresponding values obtained from <em>SRS-ResourceSetId = 0</em>
for UL BWP <img src="media/image27.svg"
style="width:0.19792in;height:0.19792in" />. <img
src="media/image78.svg" style="width:0.80208in;height:0.26042in" /> is
computed assuming MPR=0 dB, A-MPR=0 dB, P-MPR=0 dB and ∆T<sub>C</sub> =0
dB. MPR, A-MPR, P-MPR and ∆T<sub>C</sub> are defined in [8-1, TS
38.101-1], [8-2, TS 38.101-2] and [8-3, TS 38.101-3].</p>
<p>If a UE is configured with two UL carriers for a serving cell and the
UE determines a Type 3 power headroom report for the serving cell based
on a reference SRS transmission and a resource for the reference SRS is
provided by <em>SRS-Resource</em>, the UE computes a Type 3 power
headroom report for the serving cell assuming a reference SRS
transmission on the UL carrier provided by <em>pucch-Config</em>. If
<em>pucch-Config</em> is not provided to the UE for any of the two UL
carriers, the UE computes a Type 3 power headroom report for the serving
cell assuming a reference SRS transmission on the non-supplementary UL
carrier.</p>
<h1 id="random-access-procedure">8 Random access procedure</h1>
<p>Prior to initiation of the physical random access procedure, Layer 1
receives from higher layers a set of SS/PBCH block indexes and provides
to higher layers a corresponding set of RSRP measurements.</p>
<p>Prior to initiation of the physical random access procedure, Layer 1
may receive from higher layers an indication to perform a Type-1 random
access procedure, as described in clauses 8.1 through 8.4, or a Type-2
random access procedure as described in clauses 8.1 through 8.2A.</p>
<p>Prior to initiation of the physical random access procedure, Layer 1
receives the following information from the higher layers:</p>
<p>- Configuration of physical random access channel (PRACH)
transmission parameters (PRACH preamble format, time resources, and
frequency resources for PRACH transmission).</p>
<p>- Parameters for determining the root sequences and their cyclic
shifts in the PRACH preamble sequence set (index to logical root
sequence table, cyclic shift (<img src="media/image79.svg"
style="width:0.30208in;height:0.26042in" />), and set type
(unrestricted, restricted set A, or restricted set B)).</p>
<p>From the physical layer perspective, the Type-1 L1 random access
procedure includes the transmission of random access preamble (Msg1) in
a PRACH, random access response (RAR) message with a PDCCH/PDSCH (Msg2),
and when applicable, the transmission of a PUSCH scheduled by a RAR UL
grant, and PDSCH for contention resolution.</p>
<p>From the physical layer perspective, the Type-2 L1 random access
procedure includes the transmission of random access preamble in a PRACH
and of a PUSCH (MsgA) and the reception of a RAR message with a
PDCCH/PDSCH (MsgB), and when applicable, the transmission of a PUSCH
scheduled by a fallback RAR UL grant, and PDSCH for contention
resolution.</p>
<p>If a random access procedure is initiated by a PDCCH order to the UE,
a PRACH transmission is with a same SCS as a PRACH transmission
initiated by higher layers.</p>
<p>If a UE is configured with two UL carriers for a serving cell and the
UE detects a PDCCH order, the UE uses the UL/SUL indicator field value
from the detected PDCCH order to determine the UL carrier for the
corresponding PRACH transmission.</p>
<h2 id="random-access-preamble">8.1 Random access preamble</h2>
<p>Physical random access procedure is triggered upon request of a PRACH
transmission by higher layers or by a PDCCH order. A configuration by
higher layers for a PRACH transmission includes the following:</p>
<p>- A configuration for PRACH transmission [4, TS 38.211].</p>
<p>- A preamble index, a preamble SCS, <span
class="math inline">\(P_{PRACH,target}\)</span>, a corresponding
RA-RNTI, and a PRACH resource.</p>
<p>A PRACH is transmitted using the selected PRACH format with
transmission power <span
class="math inline">\(P_{PRACH,b,f,c}(i)\)</span>, as described in
clause 7.4, on the indicated PRACH resource.</p>
<p>For Type-1 random access procedure, a UE is provided a number <span
class="math inline">\(N\)</span> of SS/PBCH block indexes associated
with one PRACH occasion and a number <span
class="math inline">\(R\)</span> of contention based preambles per
SS/PBCH block index per valid PRACH occasion by
<em>ssb-perRACH-OccasionAndCB-PreamblesPerSSB</em>.</p>
<p>For Type-2 random access procedure with common configuration of PRACH
occasions with Type-1 random access procedure, a UE is provided a number
<span class="math inline">\(N\)</span> of SS/PBCH block indexes
associated with one PRACH occasion by
<em>ssb-perRACH-OccasionAndCB-PreamblesPerSSB</em> and a number <span
class="math inline">\(Q\)</span> of contention based preambles per
SS/PBCH block index per valid PRACH occasion by
<em>msgA-CB-PreamblesPerSSB-PerSharedRO</em>. The PRACH transmission can
be on a subset of PRACH occasions associated with a same SS/PBCH block
index within an SSB-RO mapping cycle for a UE provided with a PRACH mask
index by <em>msgA-SSB-SharedRO-MaskIndex</em> according to [11, TS
38.321].</p>
<p>For Type-2 random access procedure with separate configuration of
PRACH occasions with Type-1 random access procedure, a UE is provided a
number <span class="math inline">\(N\)</span> of SS/PBCH block indexes
associated with one PRACH occasion and a number <span
class="math inline">\(R\)</span> of contention based preambles per
SS/PBCH block index per valid PRACH occasion by
<em>msgA-SSB-PerRACH-OccasionAndCB-PreamblesPerSSB</em> when provided;
otherwise, by <em>ssb-perRACH-OccasionAndCB-PreamblesPerSSB</em>.</p>
<p>For a random access procedure associated with a feature combination
indicated by <em>FeatureCombinationPreambles</em>, a UE is provided a
number <span class="math inline">\(N\)</span> of SS/PBCH block indexes
associated with one PRACH occasion by
<em>ssb-perRACH-OccasionAndCB-PreamblesPerSSB</em> or
<em>msgA-SSB-PerRACH-OccasionAndCB-PreamblesPerSSB</em> when provided
and a number <span class="math inline">\(S\)</span> of contention based
preambles per SS/PBCH block index per valid PRACH occasion by
<em>startPreambleForThisPartition</em> and
<em>numberOfPreamblesPerSSB-ForThisPartition</em>. The PRACH
transmission can be on a subset of PRACH occasions associated with a
same SS/PBCH block index within an SSB-RO mapping cycle for a UE
provided with a PRACH mask index by <em>ssb-SharedRO-MaskIndex</em>
according to [11, TS 38.321].</p>
<p>For Type-1 random access procedure, or for Type-2 random access
procedure with separate configuration of PRACH occasions from Type 1
random access procedure, if <span class="math inline">\(N &lt;
1\)</span>, one SS/PBCH block index is mapped to <span
class="math inline">\(\frac{1}{N}\)</span> consecutive valid PRACH
occasions and <span class="math inline">\(R\)</span> contention based
preambles with consecutive indexes associated with the SS/PBCH block
index per valid PRACH occasion start from preamble index 0. If <span
class="math inline">\(N \geq 1\)</span>, <span
class="math inline">\(R\)</span> contention based preambles with
consecutive indexes associated with SS/PBCH block index <span
class="math inline">\(n\)</span>, <span class="math inline">\(0 \leq n
\leq N - 1\)</span>, per valid PRACH occasion start from preamble index
<span class="math inline">\(n\frac{{\cdot
N}_{preamble}^{total}}{N}\)</span> where <span
class="math inline">\(N_{preamble}^{total}\)</span> is provided by
<em>totalNumberOfRA-Preambles</em> for Type-1 random access procedure,
or by <em>msgA-TotalNumberOfRA-Preambles</em> for Type-2 random access
procedure with separate configuration of PRACH occasions from a Type 1
random access procedure, and is an integer multiple of <span
class="math inline">\(N\)</span>.</p>
<p>For Type-2 random access procedure with common configuration of PRACH
occasions with Type-1 random access procedure, if <span
class="math inline">\(N &lt; 1\)</span>, one SS/PBCH block index is
mapped to <span class="math inline">\(\frac{1}{N}\)</span> consecutive
valid PRACH occasions and <span class="math inline">\(Q\)</span>
contention based preambles with consecutive indexes associated with the
SS/PBCH block index per valid PRACH occasion start from preamble index
<span class="math inline">\(R\)</span>. If <span class="math inline">\(N
\geq 1\)</span>, <span class="math inline">\(Q\)</span> contention based
preambles with consecutive indexes associated with SS/PBCH block index
<span class="math inline">\(n\)</span>, <span class="math inline">\(0
\leq n \leq N - 1\)</span>, per valid PRACH occasion start from preamble
index <span class="math inline">\(n\frac{{\cdot
N}_{preamble}^{total}}{N} + R\)</span>, where <span
class="math inline">\(N_{preamble}^{total}\)</span> is provided by
<em>totalNumberOfRA-Preambles</em> for Type-1 random access
procedure.</p>
<p>For link recovery, a UE is provided <span
class="math inline">\(N\)</span> SS/PBCH block indexes associated with
one PRACH occasion by <em>ssb-perRACH-Occasion</em> in
<em>BeamFailureRecoveryConfig</em>. For a dedicated RACH configuration
provided by <em>RACH-ConfigDedicated</em>, if <em>cfra</em> is provided,
a UE is provided <span class="math inline">\(N\)</span> SS/PBCH block
indexes associated with one PRACH occasion by
<em>ssb-perRACH-Occasion</em> in <em>occasions</em>. If <span
class="math inline">\(N &lt; 1\)</span>, one SS/PBCH block index is
mapped to <span class="math inline">\(\frac{1}{N}\)</span> consecutive
valid PRACH occasions. If <span class="math inline">\(N \geq 1\)</span>,
all consecutive <span class="math inline">\(N\)</span> SS/PBCH block
indexes are associated with one PRACH occasion.</p>
<p>SS/PBCH block indexes provided by <em>ssb-PositionsInBurst</em> in
<em>SIB1</em> or in <em>ServingCellConfigCommon</em> are mapped to valid
PRACH occasions in the following order where the parameters are
described in [4, TS 38.211].</p>
<p>- First, in increasing order of preamble indexes within a single
PRACH occasion</p>
<p>- Second, in increasing order of frequency resource indexes for
frequency multiplexed PRACH occasions</p>
<p>- Third, in increasing order of time resource indexes for time
multiplexed PRACH occasions within a PRACH slot</p>
<p>- Fourth, in increasing order of indexes for PRACH slots</p>
<p>An association period, starting from frame 0, for mapping SS/PBCH
block indexes to PRACH occasions is the smallest value in the set
determined by the PRACH configuration period according Table 8.1-1 such
that <span class="math inline">\(N_{Tx}^{SSB}\)</span> SS/PBCH block
indexes are mapped at least once to the PRACH occasions within the
association period, where a UE obtains <span
class="math inline">\(N_{Tx}^{SSB}\)</span> from the value of
<em>ssb-PositionsInBurst</em> in <em>SIB1</em> or in
<em>ServingCellConfigCommon</em>. If after an integer number of SS/PBCH
block indexes to PRACH occasions mapping cycles within the association
period there is a set of PRACH occasions or PRACH preambles that are not
mapped to <span class="math inline">\(N_{Tx}^{SSB}\)</span> SS/PBCH
block indexes, no SS/PBCH block indexes are mapped to the set of PRACH
occasions or PRACH preambles. An association pattern period includes one
or more association periods and is determined so that a pattern between
PRACH occasions and SS/PBCH block indexes repeats at most every 160
msec. PRACH occasions not associated with SS/PBCH block indexes after an
integer number of association periods, if any, are not used for PRACH
transmissions.</p>
<p>For a PRACH transmission by a UE triggered by a PDCCH order, the
PRACH mask index field [5, TS 38.212], if the value of the random access
preamble index field is not zero, indicates the PRACH occasion for the
PRACH transmission where the PRACH occasions are associated with the
SS/PBCH block index indicated by the SS/PBCH block index field of the
PDCCH order. If the UE is provided <span
class="math inline">\(K_{cell,offset}\)</span> by
<em>cellSpecificKoffset</em>, the PRACH occasion is after slot <span
class="math inline">\(n + {2^{\mu} \bullet K}_{cell,offset}\)</span>
where <span class="math inline">\(n\)</span> is the slot of the UL BWP
for the PRACH transmission that overlaps with the end of the PDCCH order
reception assuming <span class="math inline">\(T_{TA} = 0\)</span>, and
<span class="math inline">\(\mu\)</span> is the SCS configuration for
the PRACH transmission. If the PDCCH reception for the PDCCH order
includes two PDCCH candidates from two linked search space sets based on
<em>searchSpaceLinkingId</em>, as described in clause 10.1, the last
symbol of the PDCCH reception is the last symbol of the PDCCH candidate
that ends later. The PDCCH reception includes the two PDCCH candidates
also when the UE is not required to monitor one of the two PDCCH
candidates as described in clauses 10 (except clause 10.4), 11.1, 11.1.1
and 17.2.</p>
<p>For a PRACH transmission triggered by higher layers, if
<em>ssb-ResourceList</em> is provided, the PRACH mask index is indicated
by <em>ra-ssb-OccasionMaskIndex</em> which indicates the PRACH occasions
for the PRACH transmission where the PRACH occasions are associated with
the selected SS/PBCH block index.</p>
<p>The PRACH occasions are mapped consecutively per corresponding
SS/PBCH block index. The indexing of the PRACH occasion indicated by the
mask index value is reset per mapping cycle of consecutive PRACH
occasions per SS/PBCH block index. The UE selects for a PRACH
transmission the PRACH occasion indicated by PRACH mask index value for
the indicated SS/PBCH block index in the first available mapping
cycle.</p>
<p>For the indicated preamble index, the ordering of the PRACH occasions
is</p>
<p>- First, in increasing order of frequency resource indexes for
frequency multiplexed PRACH occasions</p>
<p>- Second, in increasing order of time resource indexes for time
multiplexed PRACH occasions within a PRACH slot</p>
<p>- Third, in increasing order of indexes for PRACH slots</p>
<p>For a PRACH transmission triggered upon request by higher layers, a
value of <em>ra-OccasionList</em> [12, TS 38.331], if
<em>csirs-ResourceList</em> is provided, indicates a list of PRACH
occasions for the PRACH transmission where the PRACH occasions are
associated with the selected CSI-RS index indicated by <em>csi-RS</em>.
The indexing of the PRACH occasions indicated by
<em>ra-OccasionList</em> is reset per association pattern period.</p>
<p>Table 8.1-1: Mapping between PRACH configuration period and SS/PBCH
block to PRACH occasion association period</p>
<table>
<colgroup>
<col style="width: 46%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr>
<th>PRACH configuration period (msec)</th>
<th>Association period (number of PRACH configuration periods)</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>{1, 2, 4, 8, 16}</td>
</tr>
<tr>
<td>20</td>
<td>{1, 2, 4, 8}</td>
</tr>
<tr>
<td>40</td>
<td>{1, 2, 4}</td>
</tr>
<tr>
<td>80</td>
<td>{1, 2}</td>
</tr>
<tr>
<td>160</td>
<td>{1}</td>
</tr>
</tbody>
</table>
<p>For paired spectrum or supplementary uplink band all PRACH occasions
are valid.</p>
<p>For unpaired spectrum,</p>
<p>- if a UE is not provided <em>tdd-UL-DL-ConfigurationCommon</em>, a
PRACH occasion in a PRACH slot is valid if it does not precede a SS/PBCH
block in the PRACH slot and starts at least <span
class="math inline">\(N_{gap}\)</span> symbols after a last SS/PBCH
block reception symbol, where <span
class="math inline">\(N_{gap}\)</span> is provided in Table 8.1-2 and,
if <em>channelAccessMode</em> = "<em>semiStatic</em>" is provided, does
not overlap with a set of consecutive symbols before the start of a next
channel occupancy time where the UE does not transmit [15, TS
37.213].</p>
<p>- the candidate SS/PBCH block index of the SS/PBCH block corresponds
to the SS/PBCH block index provided by <em>ssb-PositionsInBurst</em> in
<em>SIB1</em> or in <em>ServingCellConfigCommon</em> , as described in
clause 4.1</p>
<p>- If a UE is provided <em>tdd-UL-DL-ConfigurationCommon</em>, a PRACH
occasion in a PRACH slot is valid if</p>
<p>- it is within UL symbols, or</p>
<p>- it does not precede a SS/PBCH block in the PRACH slot and starts at
least <span class="math inline">\(N_{gap}\)</span> symbols after a last
downlink symbol and at least <span
class="math inline">\(N_{gap}\)</span> symbols after a last SS/PBCH
block symbol, where <span class="math inline">\(N_{gap}\)</span> is
provided in Table 8.1-2, and if <em>channelAccessMode</em> =
"<em>semiStatic</em>" is provided, does not overlap with a set of
consecutive symbols before the start of a next channel occupancy time
where there shall not be any transmissions, as described in [15, TS
37.213]</p>
<p>- the candidate SS/PBCH block index of the SS/PBCH block corresponds
to the SS/PBCH block index provided by <em>ssb-PositionsInBurst</em> in
<em>SIB1</em> or in <em>ServingCellConfigCommon</em>, as described in
clause 4.1.</p>
<p>For preamble format B4 [4, TS 38.211], <span
class="math inline">\(N_{gap} = 0\)</span>.</p>
<p>Table 8.1-2: <span
class="math inline">\(\mathbf{N}_{\mathbf{gap}}\)</span> values for
different preamble SCS <span
class="math inline">\(\mathbf{\mu}\)</span></p>
<table>
<colgroup>
<col style="width: 49%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr>
<th>Preamble SCS</th>
<th><span class="math display">\[\mathbf{N}_{\mathbf{gap}}\]</span></th>
</tr>
</thead>
<tbody>
<tr>
<td>1.25 kHz or 5 kHz</td>
<td>0</td>
</tr>
<tr>
<td>15 kHz or 30 kHz or 60 kHz or 120 kHz</td>
<td>2</td>
</tr>
<tr>
<td>480 kHz</td>
<td>8</td>
</tr>
<tr>
<td>960 kHz</td>
<td>16</td>
</tr>
</tbody>
</table>
<p>If a random access procedure is initiated by a PDCCH order, the UE,
if requested by higher layers, transmits a PRACH in the selected PRACH
occasion, as described in [11, TS 38.321], for which a time between the
last symbol of the PDCCH order reception and the first symbol of the
PRACH transmission is larger than or equal to <span
class="math inline">\(N_{T,2} + \ \mathrm{\Delta}_{BWPSwitching} +
\mathrm{\Delta}_{Delay} + T_{switch}\)</span> msec, where</p>
<p>- <span class="math inline">\(N_{T,2}\)</span> is a time duration of
<span class="math inline">\(N_{2}\)</span> symbols corresponding to a
PUSCH preparation time for UE processing capability 1 [6, TS 38.214]
assuming <span class="math inline">\(\mu\)</span> corresponds to the
smallest SCS configuration between the SCS configuration of the PDCCH
order and the SCS configuration of the corresponding PRACH
transmission</p>
<p>- <span class="math inline">\(\mathrm{\Delta}_{BWPSwitching} =
0\)</span> if the active UL BWP does not change and <span
class="math inline">\(\mathrm{\Delta}_{BWPSwitching}\)</span> is defined
in [10, TS 38.133] otherwise</p>
<p>- <span class="math inline">\(\mathrm{\Delta}_{Delay} = 0.5\)</span>
msec for FR1 and <span class="math inline">\(\mathrm{\Delta}_{Delay} =
0.25\)</span> msec for FR2</p>
<p>- <span class="math inline">\(T_{switch}\)</span> is a switching gap
duration as defined in [6, TS 38.214]</p>
<p>For a PRACH transmission using 1.25 kHz or 5 kHz SCS, the UE
determines <span class="math inline">\(N_{2}\)</span> assuming SCS
configuration <span class="math inline">\(\mu = 0\)</span>.</p>
<p>For single cell operation or for operation with contiguous carrier
aggregation in a same frequency band or for operation with
non-contiguous carrier aggregation in a same frequency band if the UE is
not provided with <em>intraBandNC-PRACH-simulTx-r17</em>, a UE does not
transmit PRACH and PUSCH/PUCCH/SRS in a same slot with respect to the
smallest SCS configuration between the SCS configuration for the UL BWP
with the PRACH and the SCS configuration for the UL BWP with the
PUSCH/PUCCH/SRS transmissions or when a gap between the first or last
symbol of a PRACH transmission in a first slot is separated by less than
<span class="math inline">\(N\)</span> symbols from the last or first
symbol, respectively, of a PUSCH/PUCCH/SRS transmission in a second slot
where <span class="math inline">\(N = 2\)</span> for <span
class="math inline">\(\mu = 0\)</span> or <span
class="math inline">\(\mu =\)</span>1, <span class="math inline">\(N =
4\)</span> for <span class="math inline">\(\mu = 2\)</span> or <span
class="math inline">\(\mu = 3\)</span>, <span class="math inline">\(N =
16\)</span> for <span class="math inline">\(\mu = 5\)</span>, <span
class="math inline">\(N = 32\)</span> for <span
class="math inline">\(\mu = 6\)</span>, and <span
class="math inline">\(\mu\)</span> is the smallest SCS configuration
between the SCS configuration for the UL BWP with the PRACH and the SCS
configuration for the UL BWP with the PUSCH/PUCCH/SRS transmissions. For
a PUSCH transmission with repetition Type B, this applies to each actual
repetition for PUSCH transmission [6, TS 38.214].</p>
<h2 id="a-pusch-for-type-2-random-access-procedure">8.1A PUSCH for
Type-2 random access procedure</h2>
<p>For a Type-2 random access procedure, a UE transmits a PUSCH, when
applicable, after transmitting a PRACH. The UE encodes a transport block
provided for the PUSCH transmission using redundancy version number 0.
The PUSCH transmission is after the PRACH transmission by at least <span
class="math inline">\(N\)</span> symbols where <span
class="math inline">\(N = 2\)</span> for <span class="math inline">\(\mu
= 0\)</span> or <span class="math inline">\(\mu = 1\)</span>, <span
class="math inline">\(N = 4\)</span> for <span class="math inline">\(\mu
= 2\)</span> or <span class="math inline">\(\mu = 3\)</span>, <span
class="math inline">\(N = 16\)</span> for <span
class="math inline">\(\mu = 5\)</span>, <span class="math inline">\(N =
32\)</span> for <span class="math inline">\(\mu = 6\)</span>, and <span
class="math inline">\(\mu\)</span> is the SCS configuration for the
active UL BWP.</p>
<p>A UE does not transmit a PUSCH in a PUSCH occasion if the PUSCH
occasion associated with a DMRS resource is not mapped to a preamble of
valid PRACH occasions or if the associated PRACH preamble is not
transmitted as described in clause 7.5 or clause 11.1 or clause 15 or
clause 17.2. A UE can transmit a PRACH preamble in a valid PRACH
occasion if the PRACH preamble is not mapped to a valid PUSCH
occasion.</p>
<p>A mapping between one or multiple PRACH preambles and a PUSCH
occasion associated with a DMRS resource is per PUSCH configuration
provided by <em>MsgA-PUSCH-Resource</em>.</p>
<p>A UE determines time resources and frequency resources for PUSCH
occasions in an active UL BWP from <em>msgA-PUSCH-Config</em> or
<em>separateMsgA-PUSCH-Config</em> for the active UL BWP. If the active
UL BWP is not the initial UL BWP and <em>msgA-PUSCH-Config</em> or
<em>separateMsgA-PUSCH-Config</em> is not provided for the active UL
BWP, the UE uses the <em>msgA-PUSCH-Config</em> or
<em>separateMsgA-PUSCH-Config</em> provided for the initial UL BWP.</p>
<p>A UE determines a first interlace or first RB for a first PUSCH
occasion in an active UL BWP respectively from
<em>interlaceIndexFirstPO-MsgA-PUSCH</em> or from
<em>frequencyStartMsgA-PUSCH</em> that provides an offset, in number of
RBs in the active UL BWP, from a first RB of the active UL BWP. A PUSCH
occasion includes a number of interlaces or a number of RBs provided by
<em>nrofInterlacesPerMsgA-PO</em> or by <em>nrofPRBs-perMsgA-PO</em>,
respectively. Consecutive PUSCH occasions in the frequency domain of an
UL BWP are separated by a number of RBs provided by
<em>guardBandMsgA-PUSCH</em>. A number <span
class="math inline">\(N_{f}\mathbf{\ }\)</span>of PUSCH occasions in the
frequency domain of an UL BWP is provided by
<em>nrofMsgA-PO-FDM</em>.</p>
<p>For operation with shared spectrum channel access, if the PUSCH
occasion is provided by higher layer parameters
<em>frequencyStartMsgA-PUSCH</em> and <em>nrofPRBs-perMsgA-PO</em>, the
UE expects a PUSCH occasion to be confined within the same RB set as the
corresponding PRACH transmission.</p>
<p>For operation with shared spectrum channel access, if the PUSCH
occasion is provided by higher layer parameters
<em>interlaceIndexFirstPO-MsgA-PUSCH</em> and
<em>nrofInterlacesPerMsgA-PO</em>, the RB set for the PUSCH occasion in
the active UL BWP is the same RB set as the corresponding PRACH
transmission. The UE assumes that the RB set is defined as when the UE
is not provided <em>intraCellGuardBandsPerSCS</em> for an UL carrier as
described in clause 7 of [6, TS 38.214].</p>
<p>If a UE does not have dedicated RRC configuration, or has an initial
UL BWP as an active UL BWP, or is not provided
<em>startSymbolAndLengthMsgA-PO</em>,
<em>msgA-PUSCH-timeDomainAllocation</em> provides a SLIV and a PUSCH
mapping type for a PUSCH transmission by indicating</p>
<p>- one of the first <em>maxNrofUL-Allocations</em> values from
<em>PUSCH-TimeDomainResourceAllocationList</em>, if
<em>PUSCH-TimeDomainResourceAllocationList</em> is provided in
<em>PUSCH-ConfigCommon</em></p>
<p>- one of the entries from table 6.1.2.1.1-2 or table 6.1.2.1.1-3 in
[6, TS 38.214], if <em>PUSCH-TimeDomainResourceAllocationList</em> is
not provided in <em>PUSCH-ConfigCommon</em></p>
<p>else, the UE is provided a SLIV by
<em>startSymbolAndLengthMsgA-PO</em>, and a PUSCH mapping type by
<em>mappingTypeMsgA-PUSCH</em> for a PUSCH transmission.</p>
<p>For mapping one or multiple preambles of a PRACH slot to a PUSCH
occasion associated with a DMRS resource, a UE determines a first slot
for a first PUSCH occasion in an active UL BWP from
<em>msgA-PUSCH-TimeDomainOffset</em> that provides an offset, in number
of slots in the active UL BWP, relative to the start of a PUSCH slot
including the start of each PRACH slot. The UE does not expect to have a
PRACH preamble transmission and a PUSCH transmission with a msgA in a
PRACH slot or in a PUSCH slot, or to have overlapping msgA PUSCH
occasions for a MsgA PUSCH configuration. The UE expects that a first
PUSCH occasion in each slot has a same SLIV for a PUSCH transmission
that is provided by <em>startSymbolAndLengthMsgA-PO</em> or
<em>msgA-PUSCH-timeDomainAllocation</em> [6, TS 38.214].</p>
<p>Consecutive PUSCH occasions within each slot are separated by
<em>guardPeriodMsgA-PUSCH</em> symbols and have same duration. A number
<span class="math inline">\(N_{t}\)</span> of time domain PUSCH
occasions in each slot is provided by <em>nrofMsgA-PO-perSlot</em> and a
number <span class="math inline">\(N_{s}\)</span> of consecutive slots
that include PUSCH occasions is provided by
<em>nrofSlotsMsgA-PUSCH</em>.</p>
<p>A UE is provided a DMRS configuration for a PUSCH transmission in a
PUSCH occasion in an active UL BWP by <em>msgA-DMRS-Config</em>.</p>
<p>A UE is provided an MCS for data information in a PUSCH transmission
for a PUSCH occasion by <em>msgA-MCS</em>.</p>
<p>For a PUSCH transmission with frequency hopping in a slot, when
indicated by <em>msgA-intraSlotFrequencyHopping</em> for the active UL
BWP, the frequency offset for the second hop [6, TS 38.214] is
determined as described in clause 8.3, Table 8.3-1 using
<em>msgA-HoppingBits</em> instead of <span
class="math inline">\(N_{UL,hop}\)</span>. If
<em>guardPeriodMsgA-PUSCH</em> is provided, a first symbol of the second
hop is separated by <em>guardPeriodMsgA-PUSCH</em> symbols from the end
of a last symbol of the first hop; otherwise, there is no time
separation of the PUSCH transmission before and after frequency hopping.
If a UE is provided with <em>useInterlacePUCCH-PUSCH</em> in
<em>BWP-UplinkCommon</em>, the UE shall transmit PUSCH without frequency
hopping. A PUSCH transmission uses a same spatial filter as an
associated PRACH transmission.</p>
<p>A UE determines whether or not to apply transform precoding for a
PUSCH transmission as described in [6, TS 38.214].</p>
<p>A PUSCH occasion for PUSCH transmission is defined by a frequency
resource and a time resource, and is associated with a DMRS resource.
The DMRS resources are provided by <em>msgA-DMRS-Config</em>.</p>
<p>Each consecutive number of <span
class="math inline">\(N_{\text{preamble}}\)</span> preamble indexes from
valid PRACH occasions in a PRACH slot</p>
<p>- first, in increasing order of preamble indexes within a single
PRACH occasion</p>
<p>- second, in increasing order of frequency resource indexes for
frequency multiplexed PRACH occasions</p>
<p>- third, in increasing order of time resource indexes for time
multiplexed PRACH occasions within a PRACH slot</p>
<p>are mapped to a valid PUSCH occasion and the associated DMRS
resource</p>
<p>- first, in increasing order of frequency resource indexes <span
class="math inline">\(f_{id}\)</span> for frequency multiplexed PUSCH
occasions</p>
<p>- second, in increasing order of DMRS resource indexes within a PUSCH
occasion, where a DMRS resource index <span
class="math inline">\(DMRS_{id}\)</span> is determined first in an
ascending order of a DMRS port index and second in an ascending order of
a DMRS sequence index [4, TS 38.211]</p>
<p>- third, in increasing order of time resource indexes <span
class="math inline">\(t_{id}\)</span> for time multiplexed PUSCH
occasions within a PUSCH slot</p>
<p>- fourth, in increasing order of indexes for <span
class="math inline">\(N_{s}\)</span> PUSCH slots</p>
<p>where <span class="math inline">\(N_{\text{preamble}} = ceil\left(
\frac{T_{\text{preamble}}}{T_{\text{PUSCH}}} \right)\)</span>, <span
class="math inline">\(T_{\text{preamble}}\)</span> is a total number of
valid PRACH occasions per association pattern period multiplied by the
number of preambles per valid PRACH occasion provided by
<em>rach-ConfigCommonTwoStepRA</em>, and <span
class="math inline">\(T_{\text{PUSCH}}\)</span> is a total number of
valid PUSCH occasions per PUSCH configuration per association pattern
period multiplied by the number of DMRS resource indexes per valid PUSCH
occasion provided by <em>msgA-DMRS-Config</em>.</p>
<p>A PUSCH occasion is valid if it does not overlap in time and
frequency with any valid PRACH occasion associated with either a Type-1
random access procedure or a Type-2 random access procedure.
Additionally, for unpaired spectrum and for SS/PBCH blocks with indexes
provided by <em>ssb-PositionsInBurst</em> in <em>SIB1</em> or by
<em>ServingCellConfigCommon</em></p>
<p>- if a UE is not provided <em>tdd-UL-DL-ConfigurationCommon</em>, a
PUSCH occasion is valid if the PUSCH occasion</p>
<p>- does not precede a SS/PBCH block in the PUSCH slot, and</p>
<p>- starts at least <span class="math inline">\(N_{\text{gap}}\)</span>
symbols after a last SS/PBCH block symbol, where <span
class="math inline">\(N_{\text{gap}}\)</span> is provided in Table 8.1-2
and, if <em>channelAccessMode</em> = "<em>semiStatic</em>" is provided,
does not overlap with a set of consecutive symbols before the start of a
next channel occupancy time where the UE does not transmit [15, TS
37.213].</p>
<p>- if a UE is provided <em>tdd-UL-DL-ConfigurationCommon</em>, a PUSCH
occasion is valid if the PUSCH occasion</p>
<p>- is within UL symbols, or</p>
<p>- does not precede a SS/PBCH block in the PUSCH slot, and</p>
<p>- starts at least <span class="math inline">\(N_{\text{gap}}\)</span>
symbols after a last downlink symbol and at least <span
class="math inline">\(N_{\text{gap}}\)</span> symbols after a last
SS/PBCH block symbol, where <span
class="math inline">\(N_{\text{gap}}\)</span> is provided in Table 8.1-2
and, if <em>channelAccessMode</em> = "<em>semiStatic</em>" is provided,
does not overlap with a set of consecutive symbols before the start of a
next channel occupancy time where the UE does not transmit [15, TS
37.213].</p>
<h2 id="random-access-response---type-1-random-access-procedure">8.2
Random access response - Type-1 random access procedure</h2>
<p>In response to a PRACH transmission, a UE attempts to detect a DCI
format 1_0 with CRC scrambled by a corresponding RA-RNTI during a window
controlled by higher layers [11, TS 38.321]. The window starts at the
first symbol of the earliest CORESET the UE is configured to receive
PDCCH for Type1-PDCCH CSS set, as defined in clause 10.1, that is at
least one symbol, after the last symbol of the PRACH occasion
corresponding to the PRACH transmission, where the symbol duration
corresponds to the SCS for Type1-PDCCH CSS set as defined in clause
10.1. If <span
class="math inline">\(N_{\text{TA,adj}}^{\text{UE}}\)</span> or <span
class="math inline">\(N_{\text{TA,adj}}^{\text{common}}\)</span>, as
defined in [4, TS 38.211], is not zero, the window starts after an
additional <span class="math inline">\(T_{TA} + k_{mac}\)</span> msec
where <span class="math inline">\(T_{TA}\)</span> is defined in [4, TS
38.211] and <span class="math inline">\(k_{mac}\)</span> is provided by
<em>kmac</em> or <span class="math inline">\(k_{mac} = 0\)</span> if
<em>kmac</em> is not provided. The length of the window in number of
slots, based on the SCS for Type1-PDCCH CSS set, is provided by
<em>ra-ResponseWindow</em>.</p>
<p>If the UE detects the DCI format 1_0 with CRC scrambled by the
corresponding RA-RNTI and LSBs of a SFN field in the DCI format 1_0, if
included and applicable, are same as corresponding LSBs of the SFN where
the UE transmitted PRACH, and the UE receives a transport block in a
corresponding PDSCH within the window, the UE passes the transport block
to higher layers. The higher layers parse the transport block for a
random access preamble identity (RAPID) associated with the PRACH
transmission. If the higher layers identify the RAPID in RAR message(s)
of the transport block, the higher layers indicate an uplink grant to
the physical layer. This is referred to as random access response (RAR)
UL grant in the physical layer.</p>
<p>If the UE does not detect the DCI format 1_0 with CRC scrambled by
the corresponding RA-RNTI within the window, or if the UE detects the
DCI format 1_0 with CRC scrambled by the corresponding RA-RNTI within
the window and LSBs of a SFN field in the DCI format 1_0, if included
and applicable, are not same as corresponding LSBs of the SFN where the
UE transmitted PRACH, or if the UE does not correctly receive the
transport block in the corresponding PDSCH within the window, or if the
higher layers do not identify the RAPID associated with the PRACH
transmission from the UE, the higher layers can indicate to the physical
layer to transmit a PRACH. If requested by higher layers, the UE shall
be ready to transmit a PRACH no later than <span
class="math inline">\(N_{T,1} + 0.75\)</span> msec after the last symbol
of the window, or the last symbol of the PDSCH reception, where <span
class="math inline">\(N_{T,1}\)</span> is a time duration of <span
class="math inline">\(N_{1}\)</span> symbols corresponding to a PDSCH
processing time for UE processing capability 1 assuming <span
class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration among the SCS configurations for the PDCCH carrying the
DCI format 1_0, the corresponding PDSCH when additional PDSCH DM-RS is
configured, and the corresponding PRACH. For <span
class="math inline">\(\mu = 0\)</span>, the UE assumes <span
class="math inline">\(N_{1,0} = 14\)</span> [6, TS 38.214]. For a PRACH
transmission using 1.25 kHz or 5 kHz SCS, the UE determines <span
class="math inline">\(N_{1}\)</span> assuming SCS configuration <span
class="math inline">\(\mu = 0\)</span>.</p>
<p>If the UE detects a DCI format 1_0 with CRC scrambled by the
corresponding RA-RNTI and LSBs of a SFN field in the DCI format 1_0, if
included and applicable, are same as corresponding LSBs of the SFN where
the UE transmitted the PRACH, and the UE receives a transport block in a
corresponding PDSCH, the UE may assume same DM-RS antenna port quasi
co-location properties, as described in [6, TS 38.214], as for a SS/PBCH
block or a CSI-RS resource the UE used for PRACH association, as
described in clause 8.1, regardless of whether or not the UE is provided
<em>TCI-State</em> for the CORESET where the UE receives the PDCCH with
the DCI format 1_0.</p>
<p>If the UE attempts to detect the DCI format 1_0 with CRC scrambled by
the corresponding RA-RNTI in response to a PRACH transmission initiated
by a PDCCH order that triggers a contention-free random access procedure
for the SpCell [11, TS 38.321], the UE may assume that the PDCCH that
includes the DCI format 1_0 and the PDCCH order have same DM-RS antenna
port quasi co-location properties. If the UE attempts to detect the DCI
format 1_0 with CRC scrambled by the corresponding RA-RNTI in response
to a PRACH transmission initiated by a PDCCH order that triggers a
contention-free random access procedure for a secondary cell, the UE may
assume the DM-RS antenna port quasi co-location properties of the
CORESET associated with the Type1-PDCCH CSS set for receiving the PDCCH
that includes the DCI format 1_0.</p>
<p>A RAR UL grant schedules a PUSCH transmission from the UE. The
contents of the RAR UL grant, starting with the MSB and ending with the
LSB, are given in Table 8.2-1.</p>
<p>If the value of the frequency hopping flag is 0, the UE transmits the
PUSCH without frequency hopping; otherwise, the UE transmits the PUSCH
with frequency hopping.</p>
<p>The UE determines the MCS of the PUSCH transmission from the first
sixteen indexes of the applicable MCS index table for PUSCH as described
in [6, TS 38.214].</p>
<p>The TPC command value <span
class="math inline">\(\delta_{msg2,b,f,c}\)</span> is used for setting
the power of the PUSCH transmission, as described in clause 7.1.1, and
is interpreted according to Table 8.2-2.</p>
<p>The CSI request field is reserved.</p>
<p>The ChannelAccess-CPext field indicates a channel access type and CP
extension for operation with shared spectrum channel access [15, TS
37.213] in FR1 as defined in Table 7.3.1.1.1-4 in [5, TS 38.212] or
Table 7.3.1.1.1-4A in [5, TS 38.212] if <em>channelAccessMode</em> =
"<em>semiStatic</em>" is provided. The ChannelAccess-CPext field
indicates a channel access type for operation with shared spectrum
channel access [15, TS 37.213] in FR2-2 as defined in Table 7.3.1.1.1-4B
in [5, TS 38.212] if <em>ChannelAccessMode2-r17</em> is provided.</p>
<p>Table 8.2-1: Random Access Response Grant Content field size</p>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;">RAR grant field</th>
<th>Number of bits</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Frequency hopping flag</td>
<td>1</td>
</tr>
<tr>
<td style="text-align: left;">PUSCH frequency resource allocation</td>
<td><p>12, for operation with shared spectrum channel access in FR1 or
for FR2-2 when <em>ChannelAccessMode2-r17</em> is provided</p>
<p>14, otherwise</p></td>
</tr>
<tr>
<td style="text-align: left;">PUSCH time resource allocation</td>
<td>4</td>
</tr>
<tr>
<td style="text-align: left;">MCS</td>
<td>4</td>
</tr>
<tr>
<td style="text-align: left;">TPC command for PUSCH</td>
<td>3</td>
</tr>
<tr>
<td style="text-align: left;">CSI request</td>
<td>1</td>
</tr>
<tr>
<td style="text-align: left;">ChannelAccess-CPext</td>
<td><p>2, for operation with shared spectrum channel access in FR1 or
for FR2-2 when <em>ChannelAccessMode2-r17</em> is provided</p>
<p>0, otherwise</p></td>
</tr>
</tbody>
</table>
<p>Table 8.2-2: TPC Command <span
class="math inline">\(\mathbf{\delta}_{\mathbf{msg2}\mathbf{,b,f,c}}\)</span>
for PUSCH</p>
<table>
<colgroup>
<col style="width: 53%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr>
<th>TPC Command</th>
<th>Value (in dB)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>-6</td>
</tr>
<tr>
<td>1</td>
<td>-4</td>
</tr>
<tr>
<td>2</td>
<td>-2</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
</tr>
<tr>
<td>5</td>
<td>4</td>
</tr>
<tr>
<td>6</td>
<td>6</td>
</tr>
<tr>
<td>7</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>Unless the UE is configured a SCS, the UE receives subsequent PDSCH
using same SCS as for the PDSCH reception providing the RAR message.</p>
<p>If the UE does not detect the DCI format 1_0 with CRC scrambled by
the corresponding RA-RNTI within the window, or if the UE detects the
DCI format 1_0 with CRC scrambled by the corresponding RA-RNTI within
the window and the LSBs of a SFN field in the DCI format 1_0, if
included and applicable, are not same as corresponding LSBs of the SFN
where the UE transmitted the PRACH, or the UE does not correctly receive
a corresponding transport block within the window, the UE procedure is
as described in [11, TS 38.321].</p>
<h2 id="a-random-access-response---type-2-random-access-procedure">8.2A
Random access response - Type-2 random access procedure</h2>
<p>In response to a transmission of a PRACH and a PUSCH, or to a
transmission of only a PRACH if the PRACH preamble is mapped to a valid
PUSCH occasion, a UE attempts to detect a DCI format 1_0 with CRC
scrambled by a corresponding MsgB-RNTI during a window controlled by
higher layers [11, TS 38.321]. The window starts at the first symbol of
the earliest CORESET the UE is configured to receive PDCCH for
Type1-PDCCH CSS set, as defined in clause 10.1, that is at least one
symbol, after the last symbol of the PUSCH occasion corresponding to the
PRACH transmission, where the symbol duration corresponds to the SCS for
Type1-PDCCH CSS set. If <span
class="math inline">\(N_{\text{TA,adj}}^{\text{UE}}\)</span> or <span
class="math inline">\(N_{\text{TA,adj}}^{\text{common}}\)</span>, as
defined in [4, TS 38.211], is not zero, the window starts after an
additional <span class="math inline">\(T_{TA} + k_{mac}\)</span> msec
where <span class="math inline">\(T_{TA}\)</span> is defined in [4, TS
38.211] and <span class="math inline">\(k_{mac}\)</span> is provided by
<em>kmac</em> or <span class="math inline">\(k_{mac} = 0\)</span> if
<em>kmac</em> is not provided. The length of the window in number of
slots, based on the SCS for Type1-PDCCH CSS set, is provided by
<em>msgB-ResponseWindow</em>.</p>
<p>In response to a transmission of a PRACH, if the PRACH preamble is
not mapped to a valid PUSCH occasion, a UE attempts to detect a DCI
format 1_0 with CRC scrambled by a corresponding MsgB-RNTI during a
window controlled by higher layers [11, TS 38.321]. The window starts at
the first symbol of the earliest CORESET the UE is configured to receive
PDCCH for Type1-PDCCH CSS set, as defined in clause 10.1, that is at
least one symbol, after the last symbol of the PRACH occasion
corresponding to the PRACH transmission, where the symbol duration
corresponds to the SCS for Type1-PDCCH CSS set. The length of the window
in number of slots, based on the SCS for Type1-PDCCH CSS set, is
provided by <em>msgB-ResponseWindow</em>.</p>
<p>If the UE detects the DCI format 1_0, with CRC scrambled by the
corresponding MsgB-RNTI and LSBs of a SFN field in the DCI format 1_0,
if applicable, are same as corresponding LSBs of the SFN where the UE
transmitted PRACH, and the UE receives a transport block in a
corresponding PDSCH within the window, the UE passes the transport block
to higher layers. The higher layers indicate to the physical layer</p>
<p>- an uplink grant if the RAR message(s) is for fallbackRAR and a
random access preamble identity (RAPID) associated with the PRACH
transmission is identified, and the UE procedure continues as described
in clauses 8.2, 8.3, and 8.4 when the UE detects a RAR UL grant, or</p>
<p>- transmission of a PUCCH with HARQ-ACK information having ACK value
if the RAR message(s) is for successRAR, where</p>
<p>- a PUCCH resource for the transmission of the PUCCH is indicated by
PUCCH resource indicator field of 4 bits in the successRAR from a PUCCH
resource set that is provided by <em>pucch-ResourceCommon</em></p>
<p>- a slot for the PUCCH transmission is indicated by a HARQ Feedback
Timing Indicator field of 3 bits in the successRAR having a value <span
class="math inline">\(k\)</span> from {1, 2, 3, 4, 5, 6, 7, 8} for <span
class="math inline">\(\mu \leq 3\)</span>, from {7, 8, 12, 16, 20, 24,
28, 32} for <span class="math inline">\(\mu = 5\)</span>, and from {13,
16, 24, 32, 40, 48, 56, 64} for <span class="math inline">\(\mu =
6\)</span> and, with reference to slots for PUCCH transmission having
duration <span class="math inline">\(T_{slot}\)</span>, the slot is
determined as <span class="math inline">\(n + k + \mathrm{\Delta}{+
2}^{\mu} \bullet K_{cell,offset}\)</span>, where <span
class="math inline">\(n\)</span> is the last slot that overlaps with the
DL slot for the PDSCH reception, <span
class="math inline">\(\mathrm{\Delta}\)</span> is as defined for PUSCH
transmission in Table 6.1.2.1.1-5 of [6, TS 38.214], <span
class="math inline">\(\mu\)</span> is the SCS configuration of the
active UL BWP, and <span class="math inline">\(K_{cell,offset}\)</span>
is provided by <em>cellSpecificKoffset</em>; otherwise, if not provided,
<span class="math inline">\(K_{cell,offset} = 0\)</span></p>
<p>- the UE does not expect the first symbol of the PUCCH transmission
to be after the last symbol of the PDSCH reception by a time smaller
than <span class="math inline">\(N_{T,1} + 0.5\)</span> msec where <span
class="math inline">\(N_{T,1}\)</span> is the PDSCH processing time for
UE processing capability 1 [6, TS 38.214]</p>
<p>- for operation with shared spectrum channel access in FR1, a channel
access type and CP extension [15, TS 37.213] for a PUCCH transmission is
indicated by a ChannelAccess-CPext field in the successRAR as defined in
Table 7.3.1.1.1-4 in [5, TS 38.212] or Table 7.3.1.1.1-4A in [5, TS
38.212] if <em>channelAccessMode</em> = "<em>semiStatic</em>" is
provided</p>
<p>- for operation with shared spectrum channel access in FR2-2, a
channel access type [15, TS 37.213] for a PUCCH transmission is
indicated by a ChannelAccess-CPext field in the successRAR as defined in
Table 7.3.1.1.1-4B in [5, TS 38.212] if <em>ChannelAccessMode2-r17</em>
is provided</p>
<p>- the PUCCH transmission is with a same spatial domain transmission
filter and in a same active UL BWP as a last PUSCH transmission</p>
<p>If the UE detects the DCI format 1_0 with CRC scrambled by a C-RNTI
and a transport block in a corresponding PDSCH within the window, the UE
transmits a PUCCH with HARQ-ACK information having ACK value if the UE
correctly detects the transport block or NACK value if the UE
incorrectly detects the transport block and the time alignment timer is
running [11, TS 38.321].</p>
<p>If the UE detects a DCI format 1_0 with CRC scrambled by the
corresponding MsgB-RNTI and receives a transport block within the window
in a corresponding PDSCH, the UE may assume same DM-RS antenna port
quasi co-location properties, as described in [6, TS 38.214], as for a
SS/PBCH block the UE used for PRACH association, as described in clause
8.1, regardless of whether or not the UE is provided <em>TCI-State</em>
for the CORESET where the UE receives the PDCCH with the DCI format
1_0.</p>
<p>The UE does not expect to be indicated to transmit the PUCCH with the
HARQ-ACK information at a time that is prior to a time when the UE
applies a TA command that is provided by the transport block. If the UE
does not detect the DCI format 1_0 with CRC scrambled by the
corresponding MsgB-RNTI within the window, or if the UE detects the DCI
format 1_0 with CRC scrambled by the corresponding MsgB-RNTI within the
window and LSBs of a SFN field in the DCI format 1_0, if applicable, are
not same as corresponding LSBs of the SFN where the UE transmitted the
PRACH, or if the UE does not correctly receive the transport block in
the corresponding PDSCH within the window, or if the higher layers do
not identify the RAPID associated with the PRACH transmission from the
UE, the higher layers can indicate to the physical layer to transmit
only PRACH according to Type-1 random access procedure or to transmit
both PRACH and PUSCH according to Type-2 random access procedure [11, TS
38.321]. If requested by higher layers, the UE shall be ready to
transmit a PRACH no later than <span
class="math inline">\(N_{\text{T,1}} + 0.75\)</span> msec after the last
symbol of the window, or the last symbol of the PDSCH reception, where
<span class="math inline">\(N_{\text{T,1}}\)</span> is a time duration
of <span class="math inline">\(N_{1}\)</span> symbols corresponding to a
PDSCH processing time for UE processing capability 1 when additional
PDSCH DM-RS is configured. For <span class="math inline">\(\mu =
0\)</span>, the UE assumes <span class="math inline">\(N_{\text{1,0}} =
14\)</span> [6, TS 38.214].</p>
<p>Unless the UE is configured a SCS, the UE receives subsequent PDSCH
using same SCS as for the PDSCH reception providing the RAR message.</p>
<p>If the UE does not detect the DCI format 1_0 with CRC scrambled by
the corresponding MsgB-RNTI within the window, or if the UE detects the
1_0 with CRC scrambled by the corresponding MsgB-RNTI within the window
and LSBs of a SFN field in the DCI format 1_0, if applicable, are not
same as corresponding LSBs of the SFN where the UE transmitted the
PRACH, or the UE does not correctly receive a corresponding transport
block within the window, the UE procedure is as described in [11, TS
38.321].</p>
<h2 id="pusch-scheduled-by-rar-ul-grant">8.3 PUSCH scheduled by RAR UL
grant</h2>
<p>An active UL BWP with SCS configuration <span
class="math inline">\(\mu\)</span>, as described in clause 12 and in [4,
TS 38.211], for a PUSCH transmission scheduled by a RAR UL grant is
indicated by higher layers.</p>
<p>If <em>useInterlacePUCCH-PUSCH</em> is not provided by
<em>BWP-UplinkCommon</em> and <em>BWP-UplinkDedicated</em>, for
determining the frequency domain resource allocation for the PUSCH
transmission within the active UL BWP</p>
<p>- if the active UL BWP and the initial UL BWP have same SCS and same
CP length and the active UL BWP includes all RBs of the initial UL BWP,
or the active UL BWP is the initial UL BWP, the initial UL BWP is
used</p>
<p>- else, the RB numbering starts from the first RB of the active UL
BWP and the maximum number of RBs for frequency domain resource
allocation equals the number of RBs in the initial UL BWP</p>
<p>The frequency domain resource allocation is by uplink resource
allocation type 1 [6, TS 38.214]. For an initial UL BWP size of <span
class="math inline">\(N_{\text{BWP}}^{\text{size}}\)</span> RBs, a UE
processes the frequency domain resource assignment field as follows</p>
<p>- if <span class="math inline">\(N_{\text{BWP}}^{\text{size}} \leq
180\)</span>, or for operation with shared spectrum channel access in
FR1 or for FR2-2 when <em>ChannelAccessMode2-r17</em> is provided if
<span class="math inline">\(N_{\text{BWP}}^{\text{size}} \leq
90\)</span></p>
<p>- truncate the frequency domain resource assignment field to its
<span class="math inline">\(\left\lceil \text{log}_{2}\left(
\frac{N_{\text{BWP}}^{\text{size}} \bullet \left(
N_{\text{BWP}}^{\text{size}} + 1 \right)}{2} \right)
\right\rceil\)</span> least significant bits and interpret the truncated
frequency resource assignment field as for the frequency resource
assignment field in DCI format 0_0 as described in [5, TS 38.212]</p>
<p>- else</p>
<p>- insert</p>
<p>- <span class="math inline">\(\left\lceil \text{log}_{2}\left(
\frac{N_{\text{BWP}}^{\text{size}} \bullet \left(
N_{\text{BWP}}^{\text{size}} + 1 \right)}{2} \right) \right\rceil -
12\)</span> most significant bits, for operation with shared spectrum
channel access in FR1 or for FR2-2 when <em>ChannelAccessMode2-r17</em>
is provided;</p>
<p>- <span class="math inline">\(\left\lceil \text{log}_{2}\left(
\frac{N_{\text{BWP}}^{\text{size}} \bullet \left(
N_{\text{BWP}}^{\text{size}} + 1 \right)}{2} \right) \right\rceil -
14\)</span> most significant bits, otherwise;</p>
<blockquote>
<p>with value set to '0' after the <span
class="math inline">\(N_{UL,hop}\)</span> bits to the frequency domain
resource assignment field, where <span class="math inline">\(N_{UL,hop}
= 0\)</span> if the frequency hopping flag is set to '0' and <span
class="math inline">\(N_{UL,hop}\)</span> is provided in Table 8.3-1 if
the hopping flag bit is set to '1', and interpret the expanded frequency
resource assignment field as for the frequency resource assignment field
in DCI format 0_0 as described in [5, TS 38.212]</p>
</blockquote>
<p>- end if</p>
<p>If <em>useInterlacePUCCH-PUSCH</em> is provided by
<em>BWP-UplinkCommon</em> or <em>BWP-UplinkDedicated</em>, the frequency
domain resource allocation is by uplink resource allocation type 2 [6,
TS 38.214]. A UE processes the frequency domain resource assignment
field as follows</p>
<p>- truncate the frequency domain resource assignment field to the
<span class="math inline">\(X = 6\)</span> LSBs if <span
class="math inline">\(\mu = 0\)</span>, or to the <span
class="math inline">\(X = 5\)</span> LSBs if <span
class="math inline">\(\mu = 1\)</span></p>
<p>- for interlace allocation of a PUSCH transmission, interpret the
<span class="math inline">\(X\)</span> MSBs of the truncated frequency
domain resource assignment field for the active UL BWP as for the <span
class="math inline">\(X\)</span> MSBs of the frequency domain resource
assignment field in DCI format 0_0 [6, TS 38.214]</p>
<p>- for RB set allocation of a PUSCH transmission, the RB set of the
active UL BWP is the RB set of the PRACH transmission associated with
the RAR UL grant. The UE assumes that the RB set is defined as when the
UE is not provided <em>intraCellGuardBandsUL-List</em> [6, TS
38.214].</p>
<p>A UE determines whether or not to apply transform precoding as
described in [6, TS 38.214].</p>
<p>For a PUSCH transmission with frequency hopping scheduled by RAR UL
grant or for a Msg3 PUSCH retransmission, the frequency offset for the
second hop [6, TS 38.214] is given in Table 8.3-1.</p>
<p>Table 8.3-1: Frequency offset for second hop of PUSCH transmission
with frequency hopping scheduled by RAR UL grant or of Msg3 PUSCH
retransmission</p>
<table>
<colgroup>
<col style="width: 37%" />
<col style="width: 31%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr>
<th>Number of PRBs in initial UL BWP</th>
<th>Value of <span
class="math inline">\(\mathbf{N}_{\mathbf{UL,hop}}\)</span> Hopping
Bits</th>
<th>Frequency offset for 2<sup>nd</sup> hop</th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="2"><span
class="math display">\[N_{\text{BWP}}^{\text{size}} &lt;
50\]</span></td>
<td>0</td>
<td><span class="math display">\[\left\lfloor
\frac{N_{\text{BWP}}^{\text{size}}}{2} \right\rfloor\]</span></td>
</tr>
<tr>
<td>1</td>
<td><span class="math display">\[\left\lfloor
\frac{N_{\text{BWP}}^{\text{size}}}{4} \right\rfloor\]</span></td>
</tr>
<tr>
<td rowspan="4"><span
class="math display">\[N_{\text{BWP}}^{\text{size}} \geq
50\]</span></td>
<td>00</td>
<td><span class="math display">\[\left\lfloor
\frac{N_{\text{BWP}}^{\text{size}}}{2} \right\rfloor\]</span></td>
</tr>
<tr>
<td>01</td>
<td><span class="math display">\[\left\lfloor
\frac{N_{\text{BWP}}^{\text{size}}}{4} \right\rfloor\]</span></td>
</tr>
<tr>
<td>10</td>
<td><span class="math display">\[- \left\lfloor
\frac{N_{\text{BWP}}^{\text{size}}}{4} \right\rfloor\]</span></td>
</tr>
<tr>
<td>11</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<p>A SCS for the PUSCH transmission is provided by
<em>subcarrierSpacing</em> in <em>BWP-UplinkCommon</em>. A UE transmits
PRACH and the PUSCH on a same uplink carrier of a same serving cell.</p>
<p>A UE transmits a transport block in a PUSCH scheduled by a RAR UL
grant in a corresponding RAR message using redundancy version number 0,
if the PUSCH transmission is without repetitions. If a TC-RNTI is
provided by higher layers, the scrambling initialization of the PUSCH
corresponding to the RAR UL grant in clause 8.2 is by TC-RNTI.
Otherwise, the scrambling initialization of the PUSCH corresponding to
the RAR UL grant in clause 8.2 is by C-RNTI.</p>
<p>Msg3 PUSCH retransmissions, if any, of the transport block, are
scheduled by a DCI format 0_0 with CRC scrambled by a TC-RNTI provided
in the corresponding RAR message [11, TS 38.321].</p>
<p>With reference to slots for a PUSCH transmission scheduled by a RAR
UL grant, if a UE receives a PDSCH with a RAR message ending in slot
<span class="math inline">\(n\)</span> for a corresponding PRACH
transmission from the UE, the UE transmits the PUSCH in slot <span
class="math inline">\(n + k_{2} + \mathrm{\Delta} + 2^{\mu} \bullet
K_{cell,offset}\)</span>, where <span
class="math inline">\(k_{2}\)</span> and <span
class="math inline">\(\mathrm{\Delta}\)</span> are provided in [6, TS
38.214] and <span class="math inline">\(K_{cell,offset}\)</span> is
provided by <em>cellSpecificKoffset</em>; otherwise, if not provided,
<span class="math inline">\(K_{cell,offset} = 0\)</span>.</p>
<p>A UE can be provided in <em>BWP-UplinkCommon</em> a set of numbers of
repetitions for a PUSCH transmission with PUSCH repetition Type A that
is scheduled by a RAR UL grant or by a DCI format 0_0 with CRC scrambled
by a TC-RNTI. If the UE requests repetitions for the PUSCH transmission
[11, TS 38.321], the UE transmits the PUSCH over <span
class="math inline">\(N_{\text{PUSCH}}^{\text{repeat}}\)</span> slots,
where <span
class="math inline">\(N_{\text{PUSCH}}^{\text{repeat}}\)</span> is
indicated by the 2 MSBs of the MCS field in the RAR UL grant or in the
DCI format 0_0 from a set of four values provided by
<em>numberOfMsg3-RepetitionsList</em> or from {1, 2, 3, 4} if
<em>numberOfMsg3-RepetitionsList</em> is not provided. The UE determines
an MCS for the PUSCH transmission by the 2 LSBs of the MCS field in the
RAR UL grant or by the 3 LSBs of the MCS field in the DCI format 0_0,
and determines a redundancy version and RBs for each repetition as
described in [6, TS 38.214]. For unpaired spectrum operation, the UE
determines the <span
class="math inline">\(N_{\text{PUSCH}}^{\text{repeat}}\)</span> slots as
the first <span
class="math inline">\(N_{\text{PUSCH}}^{\text{repeat}}\)</span> slots
starting from slot <span class="math inline">\(n + k_{2} +
\mathrm{\Delta}\)</span> where a repetition of the PUSCH transmission
does not include a symbol indicated as downlink by
<em>tdd-UL-DL-ConfigurationCommon</em> or indicated as a symbol of an
SS/PBCH block with index provided by <em>ssb-PositionsInBurst</em>.</p>
<p>The UE may assume a minimum time between the last symbol of a PDSCH
reception conveying a RAR message with a RAR UL grant and the first
symbol of a corresponding PUSCH transmission scheduled by the RAR UL
grant is equal to <span class="math inline">\(N_{T,1} + N_{T,2} +
0.5\)</span> msec, where <span class="math inline">\(N_{T,1}\)</span> is
a time duration of <span class="math inline">\(N_{1}\)</span> symbols
corresponding to a PDSCH processing time for UE processing capability 1
when additional PDSCH DM-RS is configured, <span
class="math inline">\(N_{T,2}\)</span> is a time duration of <span
class="math inline">\(N_{2}\)</span> symbols corresponding to a PUSCH
preparation time for UE processing capability 1 [6, TS 38.214] and, for
determining the minimum time, the UE considers that <span
class="math inline">\(N_{1}\)</span> and <span
class="math inline">\(N_{2}\)</span> correspond to the smaller of the
SCS configurations for the PDSCH and the PUSCH. For <span
class="math inline">\(\mu = 0\)</span>, the UE assumes <span
class="math inline">\(N_{1,0} = 14\)</span> [6, TS 38.214].</p>
<h2 id="pdsch-with-ue-contention-resolution-identity">8.4 PDSCH with UE
contention resolution identity</h2>
<p>In response to a PUSCH transmission scheduled by a RAR UL grant when
a UE has not been provided a C-RNTI, the UE attempts to detect a DCI
format 1_0 with CRC scrambled by a corresponding TC-RNTI scheduling a
PDSCH that includes a UE contention resolution identity [11, TS 38.321].
In response to the PDSCH reception with the UE contention resolution
identity, the UE transmits HARQ-ACK information in a PUCCH. The PUCCH
transmission is within a same active UL BWP as the PUSCH transmission. A
minimum time between the last symbol of the PDSCH reception and the
first symbol of the corresponding PUCCH transmission with the HARQ-ACK
information is equal to <span class="math inline">\(N_{T,1} +
0.5\)</span> msec. <span class="math inline">\(N_{T,1}\)</span> is a
time duration of <span class="math inline">\(N_{1}\)</span> symbols
corresponding to a PDSCH processing time for UE processing capability 1
when additional PDSCH DM-RS is configured. For <span
class="math inline">\(\mu = 0\)</span>, the UE assumes <span
class="math inline">\(N_{1,0} = 14\)</span> [6, TS 38.214].</p>
<p>When detecting a DCI format in response to a PUSCH transmission
scheduled by a RAR UL grant, as described in [11, TS 38.321], or
corresponding PUSCH retransmission scheduled by a DCI format 0_0 with
CRC scrambled by a TC-RNTI provided in the corresponding RAR message
[11, TS 38.321], the UE may assume the PDCCH carrying the DCI format has
the same DM-RS antenna port quasi co-location properties, as described
in [6, TS 38.214], as for a SS/PBCH block the UE used for PRACH
association, as described in clause 8.1, regardless of whether or not
the UE is provided TCI-State for the CORESET where the UE receives the
PDCCH with the DCI format.</p>
<h1 id="ue-procedure-for-reporting-control-information">9 UE procedure
for reporting control information</h1>
<p>If a UE is configured with a SCG, the UE shall apply the procedures
described in this clause for both MCG and SCG.</p>
<p>- When the procedures are applied for MCG, the terms 'secondary
cell', 'secondary cells' , 'serving cell', 'serving cells' in this
clause refer to secondary cell, secondary cells, serving cell, serving
cells belonging to the MCG respectively.</p>
<p>- When the procedures are applied for SCG, the terms 'secondary
cell', 'secondary cells', 'serving cell', 'serving cells' in this clause
refer to secondary cell, secondary cells (not including PSCell), serving
cell, serving cells belonging to the SCG respectively. The term 'primary
cell' in this clause refers to the PSCell of the SCG.</p>
<p>If a UE is configured with a PUCCH-SCell, the UE shall apply the
procedures described in this clause for both primary PUCCH group and
secondary PUCCH group</p>
<p>- When the procedures are applied for the primary PUCCH group, the
terms 'secondary cell', 'secondary cells' , 'serving cell', 'serving
cells' in this clause refer to secondary cell, secondary cells, serving
cell, serving cells belonging to the primary PUCCH group
respectively.</p>
<p>- When the procedures are applied for secondary PUCCH group, the
terms 'secondary cell', 'secondary cells', 'serving cell', 'serving
cells' in this clause refer to secondary cell, secondary cells (not
including the PUCCH-SCell), serving cell, serving cells belonging to the
secondary PUCCH group respectively. The term 'primary cell' in this
clause refers to the PUCCH-SCell of the secondary PUCCH group. If
<em>pdsch-HARQ-ACK-Codebook-secondaryPUCCHgroup-r16</em> is provided,
<em>pdsch-HARQ-ACK-Codebook</em> is replaced by
<em>pdsch-HARQ-ACK-Codebook-secondaryPUCCHgroup-r16</em>. If
<em>harq-ACK-SpatialBundlingPUCCH-secondaryPUCCHgroup</em> is provided,
<em>harq-ACK-SpatialBundlingPUCCH</em> is replaced by
<em>harq-ACK-SpatialBundlingPUCCH-secondaryPUCCHgroup</em>. If
<em>harq-ACK-SpatialBundlingPUSCH-secondaryPUCCHgroup</em> is provided,
<em>harq-ACK-SpatialBundlingPUSCH</em> is replaced by
<em>harq-ACK-SpatialBundlingPUSCH-secondaryPUCCHgroup</em>. If
<em>uci-MuxWithDiffPrioSecondaryPUCCHgroup</em> is provided,
<em>uci-MuxWithDiffPrio</em> is replaced by
<em>uci-MuxWithDiffPrioSecondaryPUCCHgroup</em>. If
<em>simultaneousPUCCH-PUSCH-secondaryPUCCHgroup</em> is provided,
<em>simultaneousPUCCH-PUSCH</em> is replaced by
<em>simultaneousPUCCH-PUSCH-SecondaryPUCCHgroup</em>. If
<em>simultaneousPUCCH-PUSCH-SamePriority-secondaryPUCCHgroup</em> is
provided, <em>simultaneousPUCCH-PUSCH-SamePriority</em> is replaced by
<em>simultaneousPUCCH-PUSCH- SamePriority-SecondaryPUCCHgroup</em>. If
<em>pucch-sSCellSecondaryPUCCHgroup</em> is provided,
<em>pucch-sSCell</em> is replaced by
<em>pucch-sSCellSecondaryPUCCHgroup</em>. If
<em>pucch-sSCellPatternSecondaryPUCCHgroup</em> is provided,
<em>pucch-sSCellPattern</em> is replaced by
<em>pucch-sSCellPatternSecondaryPUCCHgroup</em>. If
<em>pucch-sSCellDynSecondaryPUCCHgroup</em> is provided,
<em>pucch-sSCellDyn</em> is replaced by
<em>pucch-sSCellDynSecondaryPUCCHgroup</em>. If
<em>pdsch-HARQ-ACK-EnhType3SecondaryToAddModList</em> is provided,
<em>pdsch-HARQ-ACK-EnhType3ToAddModList</em> is replaced by
<em>pdsch-HARQ-ACK-EnhType3SecondaryToAddModList</em>. If
<em>pdsch-HARQ-ACK-RetxSecondaryPUCCHgroup</em> is provided,
<em>pdsch-HARQ-ACK-Retx</em> is replaced by
<em>pdsch-HARQ-ACK-RetxSecondaryPUCCHgroup</em>.</p>
<p>For unpaired spectrum operation, if a UE is provided a PUCCH-sSCell
as described in clause 9.A, the UE shall apply the procedures described
in this clause for both the primary cell and the PUCCH-sSCell.</p>
<p>If a UE is provided <em>pdsch-HARQ-ACK-CodebookList-r16</em>,
<em>pdsch-HARQ-ACK-Codebook</em> is replaced by the relevant entry in
<em>pdsch-HARQ-ACK-CodebookList-r16</em>.</p>
<p>In the remaining of this clause, when a PDCCH reception by a UE
includes two PDCCH candidates from corresponding search space sets, as
described in clause 10.1</p>
<p>- a PDCCH monitoring occasion is the union of the PDCCH monitoring
occasions for the two PDCCH candidates</p>
<p>- the start of the PDCCH reception is the start of the earlier PDCCH
candidate</p>
<p>- the end of the PDCCH reception is the end of the PDCCH candidate
that ends later</p>
<p>The PDCCH reception includes the two PDCCH candidates also when the
UE is not required to monitor one of the two PDCCH candidates as
described in clauses 10 (except clause 10.4), 11.1, 11.1.1 and 17.2.</p>
<p>In the remaining of this clause, a last DCI format is the DCI format
that a UE detects in a last PDCCH monitoring occasion from the PDCCH
monitoring occasions for which the UE would provide HARQ-ACK information
in a PUCCH in a same slot.</p>
<p>For the purpose of determining timeline conditions in this
clause,</p>
<p>- if a UE would transmit a PUCCH with HARQ-ACK information in
response to a first SPS PDSCH reception after an activation of SPS PDSCH
receptions, the PUCCH is considered as a PUCCH transmission in response
to a DCI format detection</p>
<p>- if a UE would transmit a configured grant Type 2 PUSCH in the first
transmission occasion after an activation of configured grant Type 2
PUSCH transmissions, the PUSCH is considered as a PUSCH transmission in
response to a DCI format detection</p>
<p>If a UE</p>
<p>- is not provided <em>coresetPoolIndex</em> or is provided
<em>coresetPoolIndex</em> with a value of 0 for first CORESETs on active
DL BWPs of serving cells, and</p>
<p>- is provided <em>coresetPoolIndex</em> with a value of 1 for second
CORESETs on active DL BWPs of the serving cells, and</p>
<p>- is provided <em>ackNackFeedbackMode</em> = <em>separate</em></p>
<p>the UE shall separately apply the procedures described in clauses 9.1
and 9.2.3 for reporting HARQ-ACK information associated with the first
CORESETs on active DL BWP of the serving cells and for reporting
HARQ-ACK information associated with the second CORESETs on active DL
BWP of the serving cells, and the UE does not expect to be provided with
<em>subslotLengthForPUCCH</em> or to be indicated by
<em>pdsch-HARQ-ACK-CodebookList</em> to generate two HARQ-ACK codebooks
on active DL BWP of the serving cells. HARQ-ACK information reporting is
associated with a CORESET through a reception of a PDCCH with a DCI
format triggering the reporting of the HARQ-ACK information by the
UE.</p>
<p>For NR-DC when both the MCG and the SCG operate either in FR1 or in
FR2 and for a power headroom report transmitted on the MCG or the SCG,
the UE computes <em>PH</em> assuming that the UE does not transmit
PUSCH/PUCCH on any serving cell of the SCG or the MCG, respectively.</p>
<p>If a UE is configured for NR-DC operation, the UE does not expect to
be configured with a PUCCH-SCell.</p>
<p>A PUSCH or a PUCCH transmission other than PUCCH transmissions with
SL HARQ-ACK reports, including repetitions if any, can be of priority
index 0 or of priority index 1. For a configured grant PUSCH
transmission, a UE determines a priority index from
<em>phy-PriorityIndex</em>, if provided. For a PUCCH transmission with
HARQ-ACK information corresponding to a SPS PDSCH reception or a SPS
PDSCH release, a UE determines a priority index from
<em>harq-CodebookID</em>, if provided. For a PUCCH transmission with SR,
a UE determines the corresponding priority as described in clause 9.2.4.
For a PUSCH transmission with semi-persistent CSI report, a UE
determines a priority index from a priority indicator field, if
provided, in a DCI format that activates the semi-persistent CSI report.
If a priority index is not provided to a UE for a PUSCH or a PUCCH
transmission other than PUCCH transmissions with SL HARQ-ACK reports,
the priority index is 0.</p>
<p>If a UE is provided one <em>PUCCH-Config</em></p>
<p>- if the UE is provided <em>subslotLengthForPUCCH</em> in the
<em>PUCCH-Config</em>, the PUCCH resource for any SR configuration with
priority index 0 or any CSI report configuration in the
<em>PUCCH-Config</em> is within the <em>subslotLengthForPUCCH</em>
symbols in the <em>PUCCH-Config</em></p>
<p>If a UE is provided two <em>PUCCH-Config</em></p>
<p>- if the UE is provided <em>subslotLengthForPUCCH</em> in the first
<em>PUCCH-Config</em>, the PUCCH resource for any SR configuration with
priority index 0 or any CSI report configuration in any
<em>PUCCH-Config</em> is within the <em>subslotLengthForPUCCH</em>
symbols in the first <em>PUCCH-Config</em></p>
<p>- if the UE is provided <em>subslotLengthForPUCCH</em> in the second
<em>PUCCH-Config</em>, the PUCCH resource for any SR configuration with
priority index 1 in any <em>PUCCH-Config</em> is within the
<em>subslotLengthForPUCCH</em> symbols in the second
<em>PUCCH-Config</em></p>
<p>If a UE is provided <em>subslotLengthForPUCCH</em> in a
<em>PUCCH-Config</em> of a given priority index, in a slot of <span
class="math inline">\(N_{\text{sym}}^{\text{slot}}\)</span> symbols [4,
TS 38.211] with HARQ-ACK, the UE does not expect that HARQ-ACK
information in response to SPS PDSCH reception(s) only (if any) or SR
(if any) of the given priority index in a slot of
<em>subslotLengthForPUCCH</em> symbols is moved to a different slot of
<em>subslotLengthForPUCCH</em> symbols after multiplexing overlapping
PUCCHs.</p>
<p>If in an active DL BWP a UE monitors PDCCH for detection of DCI
format that includes a priority indicator field, a priority index can be
provided by the priority indicator field. If a UE indicates a capability
to monitor, in an active DL BWP, PDCCH for detection of DCI format that
includes a priority indicator field, the DCI format can schedule PUSCH
transmissions of any priority, or PDSCH receptions and/or trigger a
PUCCH transmission with corresponding HARQ-ACK information of any
priority, and DCI format 1_1 or DCI format 1_2 can indicate a TCI state
update and trigger a PUCCH transmission with corresponding HARQ-ACK
information of any priority.</p>
<p>A DCI format indicating a SPS PDSCH release, or SCell dormancy
without scheduling a PDSCH reception, or indicating a TCI state update
without scheduling PDSCH reception, is referred to as a DCI format
having associated HARQ-ACK information without scheduling a PDSCH
reception.</p>
<p>When a UE determines overlapping for PUCCH transmissions with SL
HARQ-ACK reports and PUCCH of larger and/or smaller priority index, the
UE resolves the overlapping for PUCCH transmissions with SL HARQ-ACK
reports and PUCCH of each priority index as described in clause 9.2.5
and 9.2.6 before resolving the overlapping for PUCCH transmissions
without SL HARQ-ACK or the overlapping for PUCCH transmissions and PUSCH
transmissions.</p>
<p>When a UE determines overlapping for PUCCH and/or PUSCH transmissions
of the same priority index other than PUCCH transmissions with SL
HARQ-ACK reports before considering limitations for UE transmission as
described in clauses 11.1, 11.1.1, 11.2A, 15 and 17.2 including
repetitions if any,</p>
<p>- first, the UE resolves the overlapping for PUCCHs with repetitions
as described in clause 9.2.6, if any</p>
<p>- second, the UE resolves the overlapping for PUCCHs without
repetitions as described in clauses 9.2.5</p>
<p>- third, the UE resolves the overlapping for PUSCHs and PUCCHs with
repetitions as described in clause 9.2.6</p>
<p>- fourth, the UE resolves the overlapping for PUSCHs and PUCCHs
without repetitions as is subsequently described in this clause.</p>
<p>If a UE</p>
<p>- is provided <em>simultaneousPUCCH-PUSCH</em> and would transmit a
PUCCH with a first priority index and PUSCHs with a second priority
index that is different than the first priority index, where the PUCCH
and the PUSCHs overlap in time on different respective cells</p>
<p>- can simultaneously transmit the PUCCH and the PUSCHs with different
priority indexes [18, TS 38.306],</p>
<p>the UE excludes the PUSCHs for resolving the time overlapping between
the PUCCH and PUSCHs with different priority indexes, where the timeline
conditions for resolving the overlapping PUCCH and PUSCHs are not
required for the excluded PUSCHs.</p>
<p>If a UE</p>
<p>- is provided <em>simultaneousPUCCH-PUSCH-SamePriority</em> and would
transmit a PUCCH and PUSCHs with same priority index, where the PUCCH
and the PUSCHs overlap in time on different respective cells</p>
<p>- can simultaneously transmit the PUCCH and the PUSCHs with same
priority index [18, TS 38.306],</p>
<p>the UE excludes the PUSCHs for resolving the time overlapping between
the PUCCH and PUSCHs with same priority index, where the timeline
conditions for resolving the overlapping PUCCH and PUSCHs are not
required for the excluded PUSCHs.</p>
<p>When a UE determines overlapping for PUCCH and/or PUSCH transmissions
of different priority indexes, other than PUCCH transmissions with SL
HARQ-ACK reports, before considering limitations for transmission as
described in clauses 11.1, 11.1.1, 11.2A, 15 and 17.2 including
repetitions if any, if the UE is provided <em>uci-MuxWithDiffPrio</em>
and the timeline conditions in clause 9.2.5 for multiplexing UCI in a
PUCCH or a PUSCH are satisfied</p>
<p>- first, the UE resolves overlapping for PUCCH and/or PUSCH
transmissions of a same priority index as described in clauses 9.2.5 and
9.2.6</p>
<p>- second, the UE resolves the overlapping for PUCCH transmissions of
different priority indexes, and</p>
<p>- if the UE is provided <em>subslotLengthForPUCCH</em> in the second
<em>PUCCH-Config</em>, a PUCCH transmission of smaller priority index is
associated with the first overlapping slot with
<em>subslotLengthForPUCCH</em> symbols of larger priority index;
otherwise, the PUCCH transmission of smaller priority index is
associated with the overlapping slot with <span
class="math inline">\(N_{\text{sym}}^{\text{slot}}\)</span> symbols [4,
TS 38.211] of larger priority index.</p>
<p>- the UE first resolves the overlapping for PUCCH transmissions,
where at least one of the PUCCH transmissions is with <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}} &gt; 1\)</span>
repetitions, within a slot of larger priority index as is subsequently
described in this clause, if any, and then the UE resolves the
overlapping for PUCCH transmissions without repetitions within the slot
using the pseudo-code in clause 9.2.5</p>
<p>- if the UE determines that a first PUCCH transmission of the smaller
priority index is not dropped and the UCI of the first PUCCH
transmission is not multiplexed in a second PUCCH transmission of larger
priority index in an overlapping slot with
<em>subslotLengthForPUCCH</em> symbols, the first PUCCH transmission is
associated with the next overlapping slot with
<em>subslotLengthForPUCCH</em> symbols for PUCCH transmissions with the
larger priority index</p>
<p>- the UE does not expect a PUCCH transmission that includes UCI of
different priority indexes to overlap with a PUCCH transmission with
<span class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}} &gt;
1\)</span> repetitions after resolving the overlapping for PUCCH
transmissions without repetitions within a slot</p>
<p>- the UE does not expect a PUCCH transmission with UCI of first and
second priority indexes to overlap with a PUCCH transmission with
HARQ-ACK information of the first priority index, or with a PUCCH
transmission or with a PUSCH transmission of the second priority index
when the second priority index is larger than the first priority
index</p>
<p>- the UE does not expect a PUCCH transmission with HARQ-ACK
information of larger priority index to overlap with more than one PUCCH
transmissions with HARQ-ACK information of smaller priority index</p>
<p>- third, the UE resolves the overlapping for PUCCH and PUSCH
transmissions of different priority indexes</p>
<p>- the UE drops PUSCH transmissions of smaller priority index that
overlap with a PUCCH transmission with positive SR of larger priority
index prior to multiplexing UCI in a PUSCH transmission of smaller
priority index, if any</p>
<p>- the UE drops PUSCH transmissions of smaller priority index that
overlap with a PUCCH transmission with <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}} &gt; 1\)</span>
repetitions of larger priority index prior to multiplexing UCI in a
PUSCH transmission of smaller priority index, if any</p>
<p>- the UE multiplexes HARQ-ACK information in a PUSCH transmission, as
is subsequently described in this clause for multiplexing HARQ-ACK
information from a PUCCH transmission in a PUSCH transmission of a same
priority index, if a PUCCH transmission with HARQ-ACK information of a
first priority index overlaps with one or more PUSCH transmissions of a
second priority index that is different than the first priority
index</p>
<p>- if // this is for cases the UE supports multiplexing information of
different priorities in a PUCCH/PUSCH transmission</p>
<p>- a PUCCH transmission with HARQ-ACK information, without
repetitions, with smaller priority index overlaps with a PUCCH
transmission only with HARQ-ACK information, without repetitions, with
larger priority index, or</p>
<p>- a PUCCH transmission without repetitions that includes HARQ-ACK
information of smaller priority index overlaps with a PUCCH transmission
without repetitions using a PUCCH resource with PUCCH format 2/3/4 with
HARQ-ACK information and SR of larger priority index, or</p>
<p>- a PUCCH transmission with HARQ-ACK information, without
repetitions, with smaller or larger priority index overlaps,
respectively, with a PUSCH transmission with larger or smaller priority
index</p>
<p>the UE</p>
<p>- multiplexes HARQ-ACK information of different priority indexes and
SR information of larger priority index, if any, in a same PUCCH
transmission of larger priority index, or multiplexes HARQ-ACK
information the UE would provide in a PUCCH transmission of smaller or
larger priority index in a PUSCH transmission of larger or smaller
priority index, respectively, and applies the procedures in clause
9.2.5.3 or 9.3, respectively, and</p>
<p>- drops CSI and/or SR carried in the PUCCH transmission of smaller
priority index, if any</p>
<p>- drops negative SR carried in the PUCCH transmission of larger
priority index, if any, if the UE would multiplex the HARQ-ACK
information of larger priority index in a PUSCH transmission of smaller
priority index</p>
<p>- drops HARQ-ACK information of smaller priority index if the UE
would multiplex the HARQ-ACK information of smaller priority index in a
PUSCH transmission where the UE multiplexes Part 1 CSI reports and Part
2 CSI reports of larger priority index</p>
<p>- drops Part 2 CSI reports of smaller priority index if the UE would
multiplex the HARQ-ACK information of smaller and larger priority
indexes in a PUSCH transmission where the UE multiplexes Part 1 CSI
reports and Part 2 CSI reports of smaller priority index</p>
<p>- drops HARQ-ACK information of smaller priority index if the UE
would multiplex the HARQ-ACK information of smaller priority index in a
PUCCH transmission of larger priority index using a PUCCH resource
provided by <em>n1PUCCH-AN</em></p>
<p>- drops Part 2 CSI reports of smaller priority index if the UE would
multiplex the HARQ-ACK information of larger priority index in a PUSCH
transmission where the UE multiplexes CG-UCI, Part 1 CSI reports and
Part 2 CSI reports of smaller priority index</p>
<p>- else</p>
<p>- if the UE would transmit the following channels that would overlap
in time where, if a channel transmission is with repetitions, the
following are applicable per repetition</p>
<p>- a first PUCCH transmission of larger priority index and a second
PUCCH transmission of smaller priority index</p>
<p>- a first PUCCH transmission of larger priority index and a second
PUSCH transmission of smaller priority index when the UE cannot
simultaneously transmit the first PUCCH and second PUSCH</p>
<p>- a first PUCCH transmission of smaller priority index and a second
PUSCH transmission of larger priority index when the UE cannot
simultaneously transmit the first PUCCH and second PUSCH</p>
<p>the UE</p>
<p>- transmits the PUCCH or the PUSCH of the larger priority index
subject to the limitations for UE transmissions described in clauses
11.1, 11.1.1, 11.2A, and 15 and</p>
<p>- does not transmit a PUCCH or a PUSCH of smaller priority index</p>
<p>When a UE determines overlapping for PUCCH and/or PUSCH transmissions
of different priority indexes, other than PUCCH transmissions with SL
HARQ-ACK reports, before considering limitations for transmissions
including with repetitions, if any, as described in clauses 11.1,
11.1.1, 11.2A, 15 and 17.2, if the UE is not provided
<em>uci-MuxWithDiffPrio</em>, the UE first resolves overlapping for
PUCCH and/or PUSCH transmissions of smaller priority index as described
in clauses 9.2.5 and 9.2.6. Then,</p>
<p>- if a transmission of a first PUCCH of larger priority index
scheduled by a DCI format in a PDCCH reception would overlap in time
with a repetition of a transmission of a second PUSCH or a second PUCCH
of smaller priority index, the UE cancels the repetition of a
transmission of the second PUSCH or the second PUCCH before the first
symbol that would overlap with the first PUCCH transmission</p>
<p>- if a transmission of a first PUSCH of larger priority index
scheduled by a DCI format in a PDCCH reception would overlap in time
with a repetition of the transmission of a second PUCCH of smaller
priority index, the UE cancels the repetition of the transmission of the
second PUCCH before the first symbol that would overlap with the first
PUSCH transmission</p>
<p>where</p>
<p>- the overlapping is applicable before or after resolving overlapping
among channels of larger priority index, if any, as described in clauses
9.2.5 and 9.2.6</p>
<p>- any remaining PUCCH and/or PUSCH transmission after overlapping
resolution is subjected to the limitations for UE transmission as
described in clauses 11.1, 11.1.1, 11.2A, 15 and 17.2</p>
<p>- the UE expects that the transmission of the first PUCCH or the
first PUSCH, respectively, would not start before <span
class="math inline">\(T_{proc,2}\)</span> after a last symbol of the
corresponding PDCCH reception</p>
<p>- <span class="math inline">\(T_{proc,2}\ \)</span>is the PUSCH
preparation time for a corresponding UE processing capability assuming
<span class="math inline">\(d_{2,1} = \ d_{1}\)</span> [6, TS 38.214],
based on <span class="math inline">\(\mu\)</span> and <span
class="math inline">\(N_{2}\)</span> as subsequently defined in this
clause, and <span class="math inline">\(d_{1}\)</span> is determined by
a reported UE capability</p>
<p>If a UE is scheduled by a DCI format in a first PDCCH reception to
transmit a first PUCCH or a first PUSCH of larger priority index that
overlaps with a second PUCCH or a second PUSCH transmission of smaller
priority index that, if any, is scheduled by a DCI format in a second
PDCCH</p>
<p>- <span class="math inline">\(T_{proc,2}\)</span> is based on a value
of <span class="math inline">\(\mu\)</span> corresponding to the
smallest SCS configuration of the first PDCCH, the second PDCCHs, the
first PUCCH or the first PUSCH, and the second PUCCHs or the second
PUSCHs</p>
<p>- if the overlapping group includes the first PUCCH</p>
<p>- if <em>processingType2Enabled</em> of
<em>PDSCH-ServingCellConfig</em> is set to <em>enable</em> for the
serving cell where the UE receives the first PDCCH and for all serving
cells where the UE receives the PDSCHs corresponding to the second
PUCCHs, and if <em>processingType2Enabled</em> of
<em>PUSCH-ServingCellConfig</em> is set to <em>enable</em> for the
serving cells with the second PUSCHs, <span class="math inline">\(N_{2}\
\)</span>is 5 for <span class="math inline">\(\mu = 0\)</span>, 5.5 for
<span class="math inline">\(\mu = 1\)</span> and 11 for <span
class="math inline">\(\mu = 2\)</span></p>
<p>- else, <span class="math inline">\(N_{2}\ \)</span>is 10 for <span
class="math inline">\(\mu = 0\)</span><em>,</em> 12 for <span
class="math inline">\(\mu = 1\)</span>, 23 for <span
class="math inline">\(\mu = 2\)</span>, 36 for <span
class="math inline">\(\mu = 3\)</span>, 144 for <span
class="math inline">\(\mu = 5\)</span>, and 288 for <span
class="math inline">\(\mu = 6\)</span>;</p>
<p>- if the overlapping group includes the first PUSCH</p>
<p>- if <em>processingType2Enabled</em> of
<em>PUSCH-ServingCellConfig</em> is set to <em>enable</em> for the
serving cells with the first PUSCH and the second PUSCHs and if
<em>processingType2Enabled</em> of <em>PDSCH-ServingCellConfig</em> is
set to <em>enable</em> for all serving cells where the UE receives the
PDSCHs corresponding to the second PUCCHs, <span
class="math inline">\(N_{2}\ \)</span>is 5 for <span
class="math inline">\(\mu = 0\)</span>, 5.5 for <span
class="math inline">\(\mu = 1\)</span> and 11 for <span
class="math inline">\(\mu = 2\)</span></p>
<p>- else, <span class="math inline">\(N_{2}\ \)</span>is 10 for <span
class="math inline">\(\mu = 0\)</span><em>,</em> 12 for <span
class="math inline">\(\mu = 1\)</span>, 23 for <span
class="math inline">\(\mu = 2\)</span>, 36 for <span
class="math inline">\(\mu = 3\)</span>, 144 for <span
class="math inline">\(\mu = 5\)</span>, and 288 for <span
class="math inline">\(\mu = 6\)</span>;</p>
<p>If a PUSCH of larger priority index scheduled by a DCI format
overlaps in time with a PUSCH of smaller priority index with SP-CSI
report(s) without a corresponding PDCCH in one or more symbols on the
same carrier, and if the earliest symbol of these PUSCH channels starts
no earlier than N<sub>2</sub>+d<sub>2,1</sub> symbols after the last
symbol of the DCI scheduling the PUSCH of larger priority index where
d<sub>2,1</sub> is the maximum of the d<sub>2,1</sub> associated with
PUSCH of larger priority index scheduled by a DCI format and the PUSCH
of smaller priority index with SP-CSI report(s) without a corresponding
PDCCH, the PUSCH of smaller priority index with SP-CSI report(s) shall
not be transmitted by the UE. Otherwise, if the timeline requirement is
not satisfied this is an error case.</p>
<p>If a UE would transmit the following channels, including repetitions
if any, that would overlap in time</p>
<p>- a first PUCCH of larger priority index with SR and a second PUCCH
or PUSCH of smaller priority index, or</p>
<p>- a configured grant PUSCH of larger priority index and a PUCCH of
smaller priority index, or</p>
<p>- a first PUCCH of larger priority index with HARQ-ACK information
only in response to PDSCH(s) reception without corresponding PDCCH(s)
and a second PUCCH of smaller priority index with HARQ-ACK information
only in response to PDSCH(s) reception without corresponding PDCCH(s),
or a second PUCCH of smaller priority index with SR and/or CSI, or a
configured grant PUSCH with smaller priority index, or a PUSCH of
smaller priority index with SP-CSI report(s) without a corresponding
PDCCH, or</p>
<p>- a PUSCH of larger priority index with SP-CSI report(s) without a
corresponding PDCCH and a PUCCH of smaller priority index with SR, or
CSI, or HARQ-ACK information only in response to PDSCH(s) reception
without corresponding PDCCH(s), or</p>
<p>- a configured grant PUSCH of larger priority index and a configured
grant PUSCH of smaller priority index or a PUSCH of smaller priority
index with SP-CSI report(s) without a corresponding PDCCH on a same
serving cell</p>
<p>- a PUSCH of larger priority index with SP-CSI report(s) without a
corresponding PDCCH and a configured grant PUSCH of smaller priority
index or a PUSCH of smaller priority index with SP-CSI report(s) without
a corresponding PDCCH on a same serving cell</p>
<p>- a PUSCH of smaller priority index scheduled by a DCI format and a
configured grant PUSCH of larger priority index on a same serving cell
if the UE is provided <em>prioLowDG-HighCG</em></p>
<p>- a PUSCH of larger priority index scheduled by a DCI format and a
configured grant PUSCH of smaller priority index on a same serving cell
if the UE is provided <em>prioHighDG-LowCG</em></p>
<p>the UE is expected to cancel a repetition of the PUCCH/PUSCH
transmissions of smaller priority index before the first symbol
overlapping with the PUCCH/PUSCH transmission of larger priority index
if the repetition of the PUCCH/PUSCH transmissions of smaller priority
index overlaps in time with the PUCCH/PUSCH transmissions of larger
priority index. In case of a PUSCH of larger priority index scheduled by
a DCI format in a PDCCH reception and a configured grant PUSCH of
smaller priority index on a same serving cell and the UE is provided
<em>prioHighDG-LowCG</em></p>
<p>- the UE expects that the transmission of the PUSCH of larger
priority index would not start before <span
class="math inline">\(T_{proc,2}\)</span> after a last symbol of the
corresponding PDCCH reception</p>
<p>- <span class="math inline">\(T_{proc,2}\ \)</span>is the PUSCH
preparation time for a corresponding UE processing capability assuming
<span class="math inline">\(d_{2,1} = \ d_{1} + d_{3}\)</span> [6, TS
38.214], based on <span class="math inline">\(\mu\)</span> and <span
class="math inline">\(N_{2}\)</span> as subsequently defined in this
clause, and <span class="math inline">\(d_{1}\)</span> and <span
class="math inline">\(d_{3}\)</span> are determined by a reported UE
capability</p>
<p>When a UE determines overlapping for PUCCH transmissions with SL
HARQ-ACK reports and PUSCH of smaller priority index, including
repetitions if any, after resolving the overlapping PUCCH other than
PUCCH transmissions with SL HARQ-ACK reports and/or PUSCH transmissions,
if the PUSCH includes no UCI, the UE resolves the overlapping for PUCCH
transmissions with SL HARQ-ACK reports and PUSCH of smaller priority
index as described in clauses 9.2.5 and 9.2.6.</p>
<p>When a UE determines overlapping for PUCCH transmissions with SL
HARQ-ACK reports and PUSCH of larger priority index only, including
repetitions if any, after resolving the overlapping PUCCH other than
PUCCH transmissions with SL HARQ-ACK reports and/or PUSCH transmissions,
the UE does not transmit the PUCCH with SL HARQ-ACK reports</p>
<p>where</p>
<blockquote>
<p>- the UE expects that the transmission of the PUSCH would not start
before <span class="math inline">\(T_{proc,2} + d_{1}\)</span> after a
last symbol of the corresponding PDCCH reception;</p>
<p>- <span class="math inline">\(T_{proc,2}\ \)</span>is the PUSCH
preparation time for a corresponding UE processing capability assuming
<span class="math inline">\(d_{2,1} = 0\)</span> [6, TS 38.214], based
on <span class="math inline">\(\mu\)</span> and <span
class="math inline">\(N_{2}\)</span> as subsequently defined in this
clause, and <span class="math inline">\(d_{1}\)</span> is determined by
a reported UE capability.</p>
</blockquote>
<p>The UE expects the PUCCH and PUSCH transmissions to fulfill the
conditions in clause 9 and clause 9.2.5 for UCI multiplexing replacing
the reference time of "end of PDSCH" with "end of the last symbol of a
last PSFCH reception occasion" as described in 16.5 and
<em>T<sub>proc,</sub></em><sub>1</sub> with
<em>T<sub>prep</sub></em>.</p>
<p>A UE does not expect that a PUCCH carrying SL HARQ-ACK reports
overlaps with PUSCH with aperiodic or semi-persistent CSI reports.</p>
<p>A UE does not expect to be scheduled to transmit a PUCCH or a PUSCH
with smaller priority index that would overlap in time with a PUCCH of
larger priority index with HARQ-ACK information only in response to a
PDSCH reception without a corresponding PDCCH unless the UE is provided
<em>uci-MuxWithDiffPrio</em>. A UE does not expect to be scheduled to
transmit a PUCCH of smaller priority index that would overlap in time
with a PUSCH of larger priority index with SP-CSI report(s) without a
corresponding PDCCH unless the UE is provided
<em>uci-MuxWithDiffPrio</em>.</p>
<p>In the remaining of this clause, a UE multiplexes UCIs with same
priority index in a PUCCH or a PUSCH before considering limitations for
UE transmission as described in clauses 11.1, 11.1.1, 11.2A, 15 and
17.2. A PUCCH or a PUSCH is assumed to have a same priority index as a
priority index of UCIs a UE multiplexes in the PUCCH or the PUSCH.</p>
<p>In the remaining of this clause, the multiplexing or prioritization
for overlapping channels are for overlapping channels with same priority
index or for overlapping channels with a PUCCH carrying SL HARQ-ACK
information unless stated otherwise.</p>
<p>In the remaining of this clause, if a UE is provided
<em>subslotLengthForPUCCH</em> for a cell for PUCCH transmission, a slot
for an associated PUCCH resource of a PUCCH transmission with HARQ-ACK
information on the cell includes a number of symbols indicated by
<em>subslotLengthForPUCCH</em>, unless stated otherwise.</p>
<p>If a UE would transmit on a serving cell a PUSCH without UL-SCH that
overlaps with a PUCCH transmission on a serving cell that includes
positive SR information, the UE does not transmit the PUSCH.</p>
<p>If a UE would transmit CSI reports on overlapping physical channels,
the UE applies the priority rules described in [6, TS 38.214] for the
multiplexing of CSI reports.</p>
<p>If a UE</p>
<p>- would multiplex UCI in a PUCCH transmission that overlaps with a
PUSCH transmission, and</p>
<p>- the PUSCH and PUCCH transmissions fulfil the conditions in clause
9.2.5 for UCI multiplexing,</p>
<p>the UE</p>
<p>- multiplexes only HARQ-ACK information, if any, from the UCI in the
PUSCH transmission and does not transmit the PUCCH if the UE multiplexes
aperiodic or semi-persistent CSI reports in the PUSCH;</p>
<p>- multiplexes only HARQ-ACK information and CSI reports, if any, from
the UCI in the PUSCH transmission and does not transmit the PUCCH if the
UE does not multiplex aperiodic or semi-persistent CSI reports in the
PUSCH.</p>
<p>A UE does not expect to multiplex in a PUSCH transmission in one slot
with SCS configuration <span class="math inline">\(\mu_{1}\)</span> UCI
of same type that the UE would transmit in PUCCHs in different slots
with SCS configuration <span class="math inline">\(\mu_{2}\)</span> if
<span class="math inline">\(\mu_{1} &lt; \mu_{2}\)</span>.</p>
<p>A UE does not expect to multiplex in a PUSCH transmission or in a
PUCCH transmission HARQ-ACK information that the UE would transmit in
different PUCCHs of a same priority index.</p>
<p>A UE does not expect a PUCCH resource that results from multiplexing
overlapped PUCCH resources, if applicable, to overlap with more than one
PUSCHs if each of the more than one PUSCHs includes aperiodic CSI
reports.</p>
<p>A UE does not expect to detect a DCI format scheduling a PDSCH
reception or having associated HARQ-ACK information report without
scheduling a PDSCH reception, and indicating a resource for a PUCCH
transmission with corresponding HARQ-ACK information in a slot if the UE
previously detects a DCI format scheduling a PUSCH transmission in the
slot and if the UE multiplexes HARQ-ACK information in the PUSCH
transmission.</p>
<p>If a UE multiplexes aperiodic CSI in a PUSCH and the UE would
multiplex UCI that includes HARQ-ACK information in a PUCCH that
overlaps with the PUSCH and the timing conditions for overlapping PUCCHs
and PUSCHs in clause 9.2.5 are fulfilled, the UE multiplexes only the
HARQ-ACK information in the PUSCH and does not transmit the PUCCH.</p>
<p>When a UE transmits multiple PUSCHs on respective serving cells in a
slot with reference to slots for PUCCH transmissions and the multiple
PUSCHs overlap with a PUCCH carrying UCI in the slot, the UE selects all
the PUSCHs overlapping with the PUCCH as the candidate PUSCHs for UCI
multiplexing within the slot.</p>
<p>If a UE would transmit a single PUSCH scheduled by a DCI format that
includes a DAI field on a serving cell in a slot with reference to slots
for PUCCH transmissions without any other PUSCH that would be
transmitted on any serving cell in the slot and the UE does not
determine any PUCCH carrying HARQ-ACK information in the slot, or if the
UE indicates the corresponding capability
<em>mux-HARQ-ACK-withoutPUCCH-onPUSCH</em> and the UE transmits multiple
PUSCHs on respective serving cells in a slot with reference to slots for
PUCCH transmissions and the UE does not determine any PUCCH carrying
HARQ-ACK information in the slot and at least one of the multiple PUSCHs
is scheduled by a DCI format that includes a DAI field, the UE
selects the single PUSCH or all the multiple PUSCHs in the slot as the
candidate PUSCHs for HARQ-ACK multiplexing within the slot except for
any PUSCH among the multiple PUSCHs that is scheduled by a DCI format
that includes a DAI field that is equal to 4 in case the UE is
configured with <em>pdsch-HARQ-ACK-Codebook = dynamic</em> or with
<em>pdsch-HARQ-ACK-Codebook-r16</em>, or is equal to 0 in case the UE is
configured with <em>pdsch-HARQ-ACK-Codebook = semi-static</em>.</p>
<p>The UE determines the PUSCH for UCI multiplexing by applying the
following procedure on the candidate PUSCHs as described in this
clause:</p>
<p>- If the candidate PUSCHs that include first PUSCHs that are
scheduled by DCI formats and second PUSCHs configured by respective
<em>ConfiguredGrantConfig</em> or <em>semiPersistentOnPUSCH</em>, and
the UE would multiplex UCI in one of the candidate PUSCHs, and the
candidate PUSCHs fulfil the conditions in clause 9.2.5 for UCI
multiplexing, the UE multiplexes the UCI in a PUSCH from the first
PUSCHs.</p>
<p>- If the UE would multiplex UCI in one of the candidate PUSCHs and
the UE does not multiplex aperiodic CSI in any of the candidate PUSCHs,
the UE multiplexes the UCI in a PUSCH of the serving cell with the
smallest <em>ServCellIndex</em> subject to the conditions in clause
9.2.5 for UCI multiplexing being fulfilled. If the UE transmits more
than one PUSCHs in the slot on the serving cell with the smallest
<em>ServCellIndex</em> that fulfil the conditions in clause 9.2.5 for
UCI multiplexing, the UE multiplexes the UCI in the earliest PUSCH that
the UE transmits in the slot.</p>
<p>If a UE transmits a PUSCH over one or more slots or multiple PUSCHs
over one or more slots that are scheduled by a DCI format, and the UE
would transmit a PUCCH with HARQ-ACK and/or CSI information over a
single slot that overlaps with the PUSCH transmission in the one or more
slots, and the PUSCH transmission in the one or more slots fulfills the
conditions in clause 9.2.5 for multiplexing the HARQ-ACK and/or CSI
information, the UE multiplexes the HARQ-ACK and/or CSI information in
the PUSCH transmission in the one or more slots. The UE does not
multiplex HARQ-ACK and/or CSI information in the PUSCH transmission in a
slot from the one or more slots if the UE would not transmit a
single-slot PUCCH with HARQ-ACK and/or CSI information in the slot in
case the PUSCH transmission was absent.</p>
<p>If a UE transmits a PUSCH with repetition Type B and the UE would
transmit a PUCCH with HARQ-ACK and/or CSI information over a single slot
that overlaps with the PUSCH transmission in one or more slots, the UE
expects all actual repetitions of the PUSCH transmission [6, TS 38.214]
that would overlap with the PUCCH transmission to fulfill the conditions
in clause 9.2.5 for multiplexing the HARQ-ACK and/or CSI information,
and the UE multiplexes the HARQ-ACK and/or CSI information in the
earliest actual PUSCH repetition of the PUSCH transmission that would
overlap with the PUCCH transmission and includes more than one symbol.
The UE does not expect that all actual repetitions that would overlap
with the PUCCH transmission do not include more than one symbol.</p>
<p>If the PUSCH transmission over the one or more slots is scheduled by
a DCI format that includes a DAI field, or if the multiple PUSCH
transmissions over the one or more slots are scheduled by a DCI format
that includes a DAI field, the value of the DAI field is applicable for
multiplexing HARQ-ACK information in any PUSCH transmission in any slot
from the one or more slots where the UE multiplexes HARQ-ACK
information.</p>
<p>When a UE would multiplex HARQ-ACK information in a PUSCH
transmission that is configured by a <em>ConfiguredGrantConfig</em>, and
includes CG-UCI [5, TS 38.212], the UE multiplexes the HARQ-ACK
information in the PUSCH transmission if the UE is provided
<em>cg-UCI-Multiplexing</em>; otherwise, if the HARQ-ACK information and
the PUSCH have same priority index, the UE does not transmit the PUSCH
and multiplexes the HARQ-ACK information in a PUCCH transmission or in
another PUSCH transmission; if the HARQ-ACK information and the PUSCH
have different priority indexes, the UE does not transmit the channel
with the smaller priority index.</p>
<p>In the following, DCI formats with CRC scrambled by C-RNTI or CS-RNTI
or MCS-C-RNTI are also referred to as unicast DCI formats and DCI
formats with CRC scrambled by G-RNTI for multicast or G-CS-RNTI are also
referred to as multicast DCI formats. Corresponding unicast DCI formats
are DCI formats 0_0/0_1/0_2/1_0/1_1/1_2 and multicast DCI formats are
DCI formats 4_1/4_2 [4, TS 38.212]. PDSCH receptions scheduled by
unicast or multicast DCI formats or HARQ-ACK information associated with
unicast or multicast DCI formats are also respectively referred as
unicast or multicast PDSCH receptions or unicast or multicast HARQ-ACK
information.</p>
<p>For the remaining of this clause, if a UE is provided <span
class="math inline">\(K_{cell,offset}\)</span> by
<em>cellSpecificKoffset</em> or <span
class="math inline">\(K_{UE,offset}\)</span> by a MAC CE command,
reference to a slot <span class="math inline">\(n + k\)</span> for a
PUCCH transmission or PUSCH transmission corresponds to a slot <span
class="math inline">\(n + k + 2^{\mu - \mu_{K_{offset}}} \bullet
K_{offset}\)</span> for the PUSCH or the PUCCH transmission, and
reference to a slot <span class="math inline">\(n_{U} - K_{1,k}\)</span>
corresponds to slot <span class="math inline">\(n_{U} - K_{1,k} - 2^{\mu
- \mu_{K_{offset}}} \bullet K_{offset}\)</span>, where <span
class="math inline">\(\mu\)</span> is the SCS configuration for the
PUCCH transmission or PUSCH transmission, <span
class="math inline">\(K_{offset}\)</span> is defined in clause 4.2, and
<span class="math inline">\(\mu_{K_{offset}} = 0\)</span> in FR1. If
<em>cellSpecificKoffset</em> or if the MAC CE command is not provided,
<span class="math inline">\(K_{cell,offset} = 0\)</span> or <span
class="math inline">\(K_{UE,offset} = 0\)</span>, respectively. If the
PUCCH or PUSCH transmission is scheduled by a DCI format, or if SRS
transmission is triggered by a DCI format, the value of <span
class="math inline">\(K_{UE,offset}\)</span> is the one that is
applicable at the slot overlapping with the last symbol of the PDCCH
reception providing the DCI format. If the PUCCH transmission or the
PUSCH transmission is scheduled by a DCI format with CRC scrambled by
TC-RNTI, <span class="math inline">\(K_{UE,offset} = 0\)</span>. If the
UE is provided a <span class="math inline">\(K_{UE,offset}\)</span>
value by a MAC CE command, the UE applies the MAC CE command in the
first slot that is after slot <span class="math inline">\(k +
3N_{slot}^{subframe,\mu}\)</span> where <span
class="math inline">\(k\)</span> is the slot where the UE would transmit
a PUCCH with HARQ-ACK information for the PDSCH providing the MAC CE
command, <span class="math inline">\(\mu\)</span> is the SCS
configuration for the PUCCH transmission that is determined in the slot
when the MAC CE command is applied.</p>
<h2 id="a-pucch-cell-switching">9.A PUCCH cell switching</h2>
<p>This clause is applicable when a UE is provided a PUCCH-sSCell by
<em>pucch-sSCell</em> and the PUCCH-sSCell is activated and does not
have a dormant UL/DL active BWP. This clause is not applicable for slots
with <span class="math inline">\(N_{sym}^{slot}\)</span> symbols [4, TS
38.211] of a reference SCS configuration provided by
<em>tdd-UL-DL-ConfigurationCommon</em> for the PCell where the UE would
transmit a PUCCH with <img src="media/image80.svg" /> repetitions of any
priority, starting from the slot following the slot indicated to the UE
as described in clause 9.2.3 for HARQ-ACK reporting, or following the
slot determined as described in clause 9.2.4 for SR reporting, or in
clause 5.2.1.4 of [6, TS 38.214] for CSI reporting, until the slot of
the last repetition of the PUCCH transmission, as described in clause
9.2.6 if the UE is provided <em>PUCCH-sSCellPattern</em>.</p>
<p>A UE can be provided a periodic cell switching pattern for PUCCH
transmissions by <em>pucch-sSCellPattern.</em> Each bit of the pattern
corresponds to a slot with <span
class="math inline">\(N_{sym}^{slot}\)</span> symbols [4, TS 38.211] for
a reference SCS configuration provided
by <em>tdd-UL-DL-ConfigurationCommon</em> for the PCell with a value of
'0' or a value of '1' indicating, respectively, the PCell or the
PUCCH-sSCell as the cell for PUCCH transmissions during the slot with
<span class="math inline">\(N_{sym}^{slot}\)</span> symbols of the
reference SCS configuration. The UE does not transmit a PUCCH in a slot
on a cell if the pattern indicates a different cell for PUCCH
transmission during the slot. A slot on the active UL BWP of the
PUCCH-sSCell does not overlap with more than one slot on the active UL
BWP of the PCell. If a slot for the active UL BWP of the PCell overlaps
with more than one slot on the active BWP of the PUCCH-sSCell and the UE
would transmit a PUCCH on the PUCCH-sSCell, the UE considers the first
of the overlapping slots for the PUCCH transmission on the
PUCCH-sSCell.</p>
<p>If a UE is provided <em>pucch-sSCellDyn</em> or
<em>pucch-sSCellDynDCI-1-2</em>, a corresponding DCI format associated
with generation of HARQ-ACK information by the UE can include a PUCCH
cell indicator field [5, TS 38.212] with a value of '0' or a value of
'1' indicating, respectively, whether a PUCCH transmission with the
HARQ-ACK information by the UE is on the PCell or on the PUCCH-sSCell.
When the UE transmits a PUCCH with HARQ-ACK information that is
associated only with SPS PDSCH receptions, the UE transmits the PUCCH on
the PCell. The UE does not expect the PUCCH cell indicator field to
indicate the PUCCH-sSCell for a PUCCH transmission in a slot that
overlaps with a slot on the PCell where the UE would transmit another
PUCCH of same or different priority index.</p>
<p>A UE transmits a PUCCH on a PUCCH-sSCell with a power that the UE
determines as described in clause 7.2.1, where the UE applies</p>
<p>- a <em>p0-PUCCH-Value</em> from <em>pucch-PowerControl</em> in
<em>PUCCH-Config</em> for the PUCCH-sSCell for the determination of
<span class="math inline">\(P_{O,PUCCH,b,f,c}(q_{u})\)</span></p>
<p>- a <em>pucch-PathlossReferenceRS-Id</em> from
<em>pucch-PowerControl</em> in <em>PUCCH-Config</em> for the
PUCCH-sSCell for the determination of <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span></p>
<p>- a PUCCH power control adjustment state <span
class="math inline">\(g_{b,0,c}(i,0)\)</span> for active UL BWP <span
class="math inline">\(b\)</span> of the UL carrier of PUCCH-sSCell <span
class="math inline">\(c\)</span> and PUCCH transmission occasion <span
class="math inline">\(i\)</span> where <span
class="math inline">\(\delta_{PUCCH,b,0,c}(i,0)\)</span> is a TPC
command value included in a DCI format associated with generation of
HARQ-ACK information for multiplexing in a PUCCH transmission on the
PUCCH-sSCell as indicated either by a <em>pucch-sSCellPattern</em> or by
a PUCCH cell indicator field in the DCI format, or provided by DCI
format 2_2 with CRC scrambled by TPC-PUCCH-RNTI for the PUCCH-sSCell as
described in clause 11.3</p>
<h2 id="harq-ack-codebook-determination">9.1 HARQ-ACK codebook
determination</h2>
<p>If a UE is provided <em>pdsch-HARQ-ACK-CodebookList</em>, the UE can
be indicated by <em>pdsch-HARQ-ACK-CodebookList</em> to generate one or
two HARQ-ACK codebooks. If the UE is indicated to generate one HARQ-ACK
codebook, the HARQ-ACK codebook is associated with a PUCCH of priority
index 0. If a UE is provided <em>pdsch-HARQ-ACK-CodebookList</em>, the
UE multiplexes in a same HARQ-ACK codebook only HARQ-ACK information
associated with a same priority index. If the UE is indicated to
generate two HARQ-ACK codebooks</p>
<blockquote>
<p>- a first HARQ-ACK codebook is associated with a PUCCH of priority
index 0 and a second HARQ-ACK codebook is associated with a PUCCH of
priority index 1</p>
<p>- the UE is provided first and second for each of
{<em>PUCCH-Config</em>, <em>UCI-OnPUSCH</em>,
<em>PDSCH</em>-<em>codeBlockGroupTransmission</em>} by
{<em>PUCCH-ConfigurationList</em>, <em>UCI-OnPUSCH-ListDCI-0-1</em>,
<em>PDSCH-CodeBlockGroupTransmissionList</em>} or
{<em>PUCCH-ConfigurationList</em>, <em>UCI-OnPUSCH-ListDCI-0-2</em>,
<em>PDSCH-CodeBlockGroupTransmissionList</em>}, respectively, for use
with the first and second HARQ-ACK codebooks, respectively</p>
</blockquote>
<p>If a UE receives a PDSCH without receiving a corresponding PDCCH, or
if the UE receives a PDCCH indicating a SPS PDSCH release, the UE
generates one corresponding HARQ-ACK information bit. If the UE
generates two HARQ-ACK codebooks, the UE is indicated by
<em>harq-CodebookID</em>, per SPS PDSCH configuration, a HARQ-ACK
codebook index for multiplexing the corresponding HARQ-ACK information
bit.</p>
<p>If a UE is provided <em>pdsch-HARQ-ACK-OneShotFeedback</em> and the
UE detects a DCI format in any PDCCH monitoring occasion that includes a
One-shot HARQ-ACK request field with value 1</p>
<p>- the UE includes the HARQ-ACK information in a Type-3 HARQ-ACK
codebook, as described in clause 9.1.4</p>
<p>- the UE does not expect that the PDSCH-to-HARQ_feedback timing
indicator field of the DCI format provides an inapplicable value from
<em>dl-DataToUL-ACK-r16</em> or <em>dl-DataToUL-ACK-r17</em></p>
<p>In the remaining of this clause, reference is to one HARQ-ACK
codebook and to DCI formats that schedule PDSCH reception, or have
associated HARQ-ACK information without scheduling a PDSCH reception and
are associated with the HARQ-ACK codebook.</p>
<p>If a UE is required to receive SPS PDSCHs in a slot according to
Clause 5.1 of [6] and Clause 11.1 for SPS configurations that are
indicated to be released by a DCI format, the UE is not expected to
receive the DCI format in the slot if the end of the last symbol of the
PDCCH reception is after the end of a last symbol of any of the SPS
PDSCH receptions. For a SPS configuration subject to
<em>pdsch-AggregationFactor</em> or
<em>pdsch-AggregationFactor-r16</em>, the UE is not expected to receive
the DCI format in a slot containing a SPS PDSCH transmission occasion
other than the first transmission occasion required to be received by
the UE for a TB.</p>
<p>If a UE is configured to receive SPS PDSCHs in a slot for SPS
configurations that are indicated to be released by a DCI format, and if
the UE receives the PDCCH providing the DCI format in the slot, and if
HARQ-ACK information for the SPS PDSCH release and the SPS PDSCH
receptions would be multiplexed in a same PUCCH, the UE does not expect
to receive the SPS PDSCHs, does not generate HARQ-ACK information for
the SPS PDSCH receptions, and generates a HARQ-ACK information bit for
the SPS PDSCH release.</p>
<p>If a UE is configured to receive SPS PDSCH(s) in a slot for SPS
configuration(s), the UE does not expect to receive a PDCCH providing a
DCI format in the slot to indicate SPS PDSCH release of these SPS
configuration(s), if HARQ-ACK information for the SPS PDSCH release and
the SPS PDSCH reception(s) would map to different PUCCHs.</p>
<p>If a UE detects a DCI format 1_1 indicating</p>
<p>- SCell dormancy without scheduling a PDSCH reception, as described
in clause 10.3, and</p>
<p>- is provided <em>pdsch-HARQ-ACK-Codebook = dynamic</em> or
<em>pdsch-HARQ-ACK-Codebook-r16</em></p>
<p>the UE generates a HARQ-ACK information bit as described in clause
9.1.3 for a DCI format 1_1 indicating SCell dormancy and the HARQ-ACK
information bit value is ACK.</p>
<p>If a UE is not provided <em>PDSCH-CodeBlockGroupTransmission</em>,
the UE generates one HARQ-ACK information bit per transport block.</p>
<p>For a HARQ-ACK information bit, a UE generates a positive
acknowledgement (ACK) if the UE detects a DCI format that provides a SPS
PDSCH release or detects a DCI format that does not schedule PDSCH
reception and indicates a TCI state update or correctly decodes a
transport block, and generates a negative acknowledgement (NACK) if the
UE does not correctly decode the transport block. A HARQ-ACK information
bit value of 0 represents a NACK while a HARQ-ACK information bit value
of 1 represents an ACK.</p>
<p>In the following, the CRC for a DCI format is scrambled with a
C-RNTI, an MCS-C-RNTI, or a CS-RNTI, or a G-RNTI for multicast, or a
G-CS-RNTI.</p>
<p>In the following, if the value of
<em>maxNrofCodeWordsScheduledByDCI</em> is not provided, the value of
<em>maxNrofCodeWordsScheduledByDCI</em> equals one.</p>
<h3 id="cbg-based-harq-ack-codebook-determination">9.1.1 CBG-based
HARQ-ACK codebook determination</h3>
<p>If a UE is provided <em>PDSCH-CodeBlockGroupTransmission</em> for a
serving cell, the UE receives a PDSCH scheduled by DCI format 1_1, that
includes code block groups (CBGs) of a transport block. The UE is also
provided <em>maxCodeBlockGroupsPerTransportBlock</em> indicating a
maximum number <span class="math inline">\(N_{HARQ -
ACK}^{CBG/TB,\max}\)</span> of CBGs for generating respective HARQ-ACK
information bits for a transport block reception for the serving
cell.</p>
<p>For a number of <span class="math inline">\(C\)</span> code blocks
(CBs) in a transport block, the UE determines a number of CBGs <span
class="math inline">\(M\)</span> according to clause 5.1.7.1 of [6, TS
38.214] and determines a number of HARQ-ACK bits for the transport block
as <span class="math inline">\(N_{HARQ - ACK}^{CBG/TB} = M\)</span>.</p>
<p>The UE generates an ACK for the HARQ-ACK information bit of a CBG if
the UE correctly received all code blocks of the CBG and generates a
NACK for the HARQ-ACK information bit of a CBG if the UE incorrectly
received at least one code block of the CBG. If the UE receives two
transport blocks, the UE concatenates the HARQ-ACK information bits for
CBGs of the second transport block after the HARQ-ACK information bits
for CBGs of the first transport block.</p>
<p>The HARQ-ACK codebook includes the <span
class="math inline">\(N_{HARQ - ACK}^{CBG/TB,\max}\)</span> HARQ-ACK
information bits in ascending order of CBG index and, if <span
class="math inline">\({N_{HARQ - ACK}^{CBG/TB} &lt; N}_{HARQ -
ACK}^{CBG/TB,\max}\)</span> for a transport block, the UE generates a
NACK value for the last <span class="math inline">\(N_{HARQ -
ACK}^{CBG/TB,\max} - N_{HARQ - ACK}^{CBG/TB}\)</span> HARQ-ACK
information bits for the transport block in the HARQ-ACK codebook.</p>
<p>If the UE generates a HARQ-ACK codebook in response to a
retransmission of a transport block, corresponding to a same HARQ
process as a previous transmission of the transport block, the UE
generates an ACK for each CBG that the UE correctly decoded in a
previous transmission of the transport block.</p>
<p>If a UE correctly detects each of the <span
class="math inline">\(N_{HARQ - ACK}^{CBG/TB}\)</span> CBGs and does not
correctly detect the transport block for the <span
class="math inline">\(N_{HARQ - ACK}^{CBG/TB}\)</span> CBGs, the UE
generates a NACK value for each of the <span
class="math inline">\(N_{HARQ - ACK}^{CBG/TB}\)</span> CBGs.</p>
<h3 id="type-1-harq-ack-codebook-determination">9.1.2 Type-1 HARQ-ACK
codebook determination</h3>
<p>This clause applies if the UE is configured with
<em>pdsch-HARQ-ACK-Codebook = semi-static</em>. In clauses 9.1.2,
9.1.2.1, and 9.1.2.2, if the UE is configured with
<em>pdsch-HARQ-ACK-Codebook = semi-static</em> for only one of unicast
or multicast HARQ-ACK codebook, the Type-1 HARQ-ACK codebook is
generated considering only one of respective unicast or multicast
configurations for PDSCH receptions or for PDCCH monitoring for
detection of DCI formats.</p>
<p>A UE does not provide a Type-1 HARQ-ACK codebook if the Type-1
HARQ-ACK codebook would include only HARQ-ACK information for transport
blocks associated with HARQ processes with disabled HARQ-ACK
information.</p>
<p>If a UE is provided <em>downlinkHARQ-FeedbackDisabled</em> indicating
disabled HARQ-ACK information for a HARQ process associated with a
transport block in PDSCH reception occasion <span
class="math inline">\(m\)</span> on serving cell <span
class="math inline">\(c\)</span>, the UE reports a NACK value for a
HARQ-ACK information bit corresponding to the transport block in a
Type-1 HARQ-ACK codebook and does not consider the transport block as
received in the determination of <span
class="math inline">\(N_{m,c}^{received}\)</span> in clause 9.1.2.1. If
the UE is also provided <em>PDSCH-CodeBlockGroupTransmission</em>, the
UE reports NACK values for HARQ-ACK information bits corresponding to
CBGs of the transport block in the Type-1 HARQ-ACK codebook and does not
consider the CBGs as received in the determination of <span
class="math inline">\(N_{m,c}^{received,CBG}\)</span> in clause 9.1.2.1.
If the UE is also provided <em>harq-feedbackEnablingforSPSactive</em> =
'<em>enabled'</em>, the UE considers a HARQ process associated with a
transport block in a first SPS PDSCH reception, after an activation of
SPS PDSCH receptions, to have enabled HARQ-ACK information and the UE
provides a HARQ-ACK information bit according to a decoding outcome for
the transport block in the first SPS PDSCH reception.</p>
<p>If a UE reports HARQ-ACK information associated with a G-RNTI for
multicast or a G-CS-RNTI with disabled HARQ-ACK information, as
described in clause 18, a value of the HARQ-ACK information is a UE
implementation choice.</p>
<p>A UE reports HARQ-ACK information for a corresponding PDSCH reception
or SPS PDSCH release or TCI state update only in a HARQ-ACK codebook
that the UE transmits in a slot indicated by a value of a
PDSCH-to-HARQ_feedback timing indicator field in a corresponding DCI
format or provided by <em>dl-DataToUL-ACK</em> or
<em>dl-DataToUL-ACK-r16</em> or <em>dl-DataToUL-ACK-DCI-1-2</em> or
<em>dl-DataToUL-ACK-r17</em> or <em>dl-DataToUL-ACK-v1700</em> or
<em>dl-DataToUL-ACK-DCI-1-2-r17</em> if the PDSCH-to-HARQ_feedback
timing indicator field is not present in the DCI format as described in
clause 9.2.3. The UE reports NACK value(s) for HARQ-ACK information
bit(s) in a HARQ-ACK codebook that the UE transmits in a slot not
indicated by a value of a PDSCH-to-HARQ_feedback timing indicator field
in a corresponding DCI format.</p>
<p>If a UE is not provided <em>pdsch-HARQ-ACK-OneShotFeedback</em>, the
UE does not expect to receive a PDSCH scheduled by a DCI format that the
UE detects in any PDCCH monitoring occasion and includes a
PDSCH-to-HARQ_feedback timing indicator field providing an inapplicable
value from <em>dl-DataToUL-ACK-r16</em> or
<em>dl-DataToUL-ACK-r17</em>.</p>
<p>If the UE is provided <em>pdsch-AggregationFactor-r16</em> in
<em>SPS-Config</em>, or <em>pdsch-AggregationFactor</em> in
<em>PDSCH-Config</em> and no entry in
<em>pdsch-TimeDomainAllocationList</em> and
<em>pdsch-TimeDomainAllocationListDCI-1-2</em> includes
<em>repetitionNumber</em> in
<em>PDSCH-TimeDomainResourceAllocation-r16</em>, <span
class="math inline">\(N_{PDSCH}^{repeat,max}\)</span> is a maximum value
of <em>pdsch-AggregationFactor-r16</em> in <em>SPS-Config</em>, or
<em>pdsch-AggregationFactor</em> in <em>PDSCH-Config</em>; otherwise
<span class="math inline">\(N_{PDSCH}^{repeat,max} = 1\)</span>. The UE
reports HARQ-ACK information for a PDSCH reception</p>
<p>- from DL slot <span class="math inline">\({n_{D} -
N}_{PDSCH}^{repeat} + 1\)</span> to DL slot <span
class="math inline">\(n_{D}\)</span>, if <span
class="math inline">\(N_{PDSCH}^{repeat}\)</span> is provided by
<em>pdsch-AggregationFactor</em> or <em>pdsch-AggregationFactor-r16</em>
[6, TS 38.214], or</p>
<p>- from DL slot <span class="math inline">\(\ n_{D} - repetitionNumber
+ 1\)</span> to DL slot <span class="math inline">\(n_{D}\)</span>, if
the time domain resource assignment field in the DCI format scheduling
the PDSCH reception indicates an entry containing
<em>repetitionNumber,</em> or</p>
<p>- in DL slot <span class="math inline">\(n_{D}\)</span>,
otherwise</p>
<p>only in a HARQ-ACK codebook that the UE includes in a PUCCH or PUSCH
transmission in slot <span class="math inline">\(n + k\)</span>, where
<span class="math inline">\(n\)</span> is</p>
<p>- an UL slot overlapping with the end of the PDSCH reception in DL
slot <span class="math inline">\(n_{D}\)</span> if the UE is provided
<em>subslotLengthForPUCCH</em> for the HARQ-ACK codebook</p>
<p>- the UL slot is on the primary cell if the UE is provided
<em>pucch-sSCellPattern</em>; otherwise, the UL slot is on the serving
cell of the PUCCH transmission</p>
<p>- the last UL slot for PUCCH transmission overlapping with DL slot
<span class="math inline">\(n_{D}\)</span> if the UE is not provided
<em>subslotLengthForPUCCH</em> for the HARQ-ACK codebook</p>
<p>- the last UL slot is on the primary cell if the UE is provided
<em>pucch-sSCellPattern</em>; otherwise, the last UL slot is on the
serving cell of the PUCCH transmission</p>
<p>and <span class="math inline">\(k\)</span> is a number of slots
indicated by the PDSCH-to-HARQ_feedback timing indicator field in a
corresponding DCI format, or provided by <em>dl-DataToUL-ACK</em> or
<em>dl-DataToUL-ACK-r16</em> or <em>dl-DataToUL-ACK-DCI-1-2</em> or
<em>dl-DataToUL-ACK-r17</em> or <em>dl-DataToUL-ACK-v1700</em> or
<em>dl-DataToUL-ACK-DCI-1-2-r17</em> if the PDSCH-to-HARQ_feedback
timing indicator field is not present in the DCI format. If the UE
reports HARQ-ACK information for the PDSCH reception in a slot other
than slot <span class="math inline">\(n + k\)</span>, the UE sets a
value for each corresponding HARQ-ACK information bit to NACK.</p>
<p>If a UE is provided <em>pdsch-HARQ-ACK-Codebook = 'semi-static'</em>
for unicast or multicast HARQ-ACK information, the UE reports HARQ-ACK
information in a PUCCH only for one of</p>
<p>- a SPS PDSCH release indicated by DCI format 1_0 or by DCI format
4_1, with counter DAI field value of 1, or</p>
<p>- a PDSCH reception providing a transport block having enabled
HARQ-ACK information report and scheduled by DCI format 1_0 or by DCI
format 4_1, with counter DAI field value of 1 on the PCell, or</p>
<p>- SPS PDSCH receptions with transport blocks having enabled HARQ-ACK
information reports,</p>
<p>in the <span class="math inline">\(M_{\text{A,c}}\)</span> occasions
for candidate PDSCH receptions as determined in clause 9.1.2.1, in which
case the UE generates a HARQ-ACK information only for the SPS PDSCH
release, or only for the PDSCH reception, or only for SPS PDSCH
receptions according to corresponding <span
class="math inline">\(M_{\text{A,c}}\)</span> occasions on respective
serving cells, where the value of counter DAI in DCI format 1_0 or in
DCI format 4_1 is according to Table 9.1.3-1 and HARQ-ACK information
bits in response to more than one SPS PDSCH receptions that the UE is
configured to receive are ordered according to the following
pseudo-code; otherwise, the procedures in clause 9.1.2.1 and clause
9.1.2.2 for a HARQ-ACK codebook determination apply.</p>
<p>In the following pseudo-code, SPS PDSCH receptions associated with a
SPS PDSCH configuration are activated by a DCI format with CRC scrambled
by a CS-RNTI or by a DCI format with CRC scrambled by a G-CS-RNTI.</p>
<p>Set <span class="math inline">\(N_{cells}^{DL}\)</span> to the number
of serving cells configured to the UE</p>
<p>Set <span class="math inline">\(N_{c}^{SPS}\)</span> to the number of
SPS PDSCH configurations configured to the UE for serving cell <span
class="math inline">\(c\)</span></p>
<p>Set <span class="math inline">\(N_{c}^{DL}\)</span> to the number of
DL slots for SPS PDSCH receptions on serving cell <span
class="math inline">\(c\)</span> with HARQ-ACK information multiplexed
on the PUCCH</p>
<p>Set <span class="math inline">\(j = 0\)</span> – HARQ-ACK information
bit index</p>
<p>Set <span class="math inline">\(c = 0\)</span> – serving cell index:
lower indexes correspond to lower RRC indexes of corresponding cell</p>
<p>while <span class="math inline">\(c &lt; N_{cells}^{DL}\)</span></p>
<p>Set <span class="math inline">\(s = 0\)</span> – SPS PDSCH
configuration index: lower indexes correspond to lower RRC indexes of
corresponding SPS configurations</p>
<p>while <span class="math inline">\(s &lt; N_{c}^{SPS}\)</span></p>
<p>Set <span class="math inline">\(n_{D} = 0\)</span> – slot index</p>
<p>while <span class="math inline">\(n_{D} &lt; N_{c}^{DL}\)</span></p>
<p>if {</p>
<p>a UE is configured to receive SPS PDSCHs from slot <span
class="math inline">\(n_{D} - N_{PDSCH}^{repeat} + 1\)</span> to slot
<span class="math inline">\(n_{D}\)</span> for SPS PDSCH configuration
<span class="math inline">\(s\)</span> on serving cell <span
class="math inline">\(c\)</span>, excluding SPS PDSCHs that are not
required to be received in any slot among overlapping SPS PDSCHs, if any
according to [6, TS 38.214], or based on a UE capability for a number of
PDSCH receptions in a slot according to [6, TS 38.214], or due to
overlapping with a set of symbols indicated as uplink by
<em>tdd-UL-DL-ConfigurationCommon</em> or by
<em>tdd-UL-DL-ConfigurationDedicated</em> where, for unicast SPS PDSCHs,
<span class="math inline">\(N_{PDSCH}^{repeat}\)</span> is provided by
<em>pdsch-AggregationFactor-r16</em> in <em>SPS-Config</em> or, if
<em>pdsch-AggregationFactor-r16</em> is not included in
<em>SPS-Config</em>, by <em>pdsch-AggregationFactor</em> in
<em>PDSCH-config</em> and, for multicast SPS PDSCHs, <span
class="math inline">\(N_{PDSCH}^{repeat}\)</span> is provided by <span
class="math inline">\(repetitionNumber\)</span> if contained in an entry
indicated by the time domain resource assignment field in the DCI format
scheduling the PDSCH repetition, or provided by
<em>pdsch-AggregationFactor-r16</em> if included in <em>SPS-Config</em>
or, otherwise, <span class="math inline">\(N_{PDSCH}^{repeat} =
1\)</span>, and</p>
<blockquote>
<p>HARQ-ACK information for the SPS PDSCH is associated with the
PUCCH</p>
<p>}</p>
</blockquote>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span> =
HARQ-ACK information bit for this SPS PDSCH reception</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>end if</p>
<p><span class="math inline">\(n_{D} = n_{D} + 1\)</span>;</p>
<p>end while</p>
<p><span class="math inline">\(s = s + 1\)</span>;</p>
<p>end while</p>
<p><span class="math inline">\(c = c + 1\)</span>;</p>
<p>end while</p>
<h4
id="type-1-harq-ack-codebook-in-physical-uplink-control-channel">9.1.2.1
Type-1 HARQ-ACK codebook in physical uplink control channel</h4>
<p>For a serving cell <span class="math inline">\(c\)</span>, an active
DL BWP, and an active UL BWP, as described in clause 12, the UE
determines a set of <span class="math inline">\(M_{A,c}\)</span>
occasions for candidate PDSCH receptions for which the UE can transmit
corresponding HARQ-ACK information in a PUCCH in slot <span
class="math inline">\(n_{U}\)</span>. If serving cell <span
class="math inline">\(c\)</span> is deactivated, the UE uses as the
active DL BWP for determining the set of <span
class="math inline">\(M_{A,c}\)</span> occasions for candidate PDSCH
receptions a DL BWP provided by <em>firstActiveDownlinkBWP-Id</em>. The
determination is based:</p>
<p>a) on a set of slot timing values <span
class="math inline">\(K_{1}\)</span> associated with the active UL BWP
on the primary cell or, if the PUCCH transmission is indicated by a DCI
format to be on the PUCCH-sSCell as described in clause 9A, on a set of
slot timing values <span class="math inline">\(K_{1}\)</span> associated
with the active UL BWP on the PUCCH-sSCell</p>
<p>- If the UE is configured to monitor PDCCH for DCI format 1_0 and is
not configured to monitor PDCCH for either DCI format 1_1 or DCI format
1_2 for serving cell <span class="math inline">\(c\)</span>, or the
active DL BWP for serving cell <span class="math inline">\(c\)</span> is
dormant BWP, <span class="math inline">\(K_{1}\)</span> is provided by
the slot timing values {1, 2, 3, 4, 5, 6, 7, 8} for SCS configuration of
PUCCH transmission <span class="math inline">\(\mu \leq 3\)</span>, {7,
8, 12, 16, 20, 24, 28, 32} for <span class="math inline">\(\mu =
5\)</span>, and {13, 16, 24, 32, 40, 48, 56, 64} for <span
class="math inline">\(\mu = 6\)</span></p>
<p>- If the UE is configured to monitor PDCCH for DCI format 1_1 and is
not configured to monitor PDCCH for DCI format 1_2 for serving cell
<span class="math inline">\(c\)</span>, <span
class="math inline">\(K_{1}\)</span> is provided by
<em>dl-DataToUL-ACK</em> or <em>dl-DataToUL-ACK-r16</em> or
<em>dl-DataToUL-ACK-r17</em> or <em>dl-DataToUL-ACK-v1700</em></p>
<p>- If the UE is configured to monitor PDCCH for DCI format 1_2 and is
not configured to monitor PDCCH for DCI format 1_1 for serving cell
<span class="math inline">\(c\)</span>, <span
class="math inline">\(K_{1}\)</span> is provided by
<em>dl-DataToUL-ACK-DCI-1-2</em> or
<em>dl-DataToUL-ACK-DCI-1-2-r17</em></p>
<p>- If the UE is configured to monitor PDCCH for DCI format 1_1 and DCI
format 1_2 for serving cell <span class="math inline">\(c\)</span>,
<span class="math inline">\(K_{1}\)</span> is provided by the union of
<em>dl-DataToUL-ACK</em> or <em>dl-DataToUL-ACK-r16</em> or
<em>dl-DataToUL-ACK-r17</em> or <em>dl-DataToUL-ACK-v1700</em> and
<em>dl-DataToUL-ACK-DCI-1-2</em> or
<em>dl-DataToUL-ACK-DCI-1-2-r17</em></p>
<p>- If an inapplicable value in <em>dl-DataToUL-ACK-r16</em> or
<em>dl-DataToUL-ACK-r17</em> is provided, the value is excluded from
<span class="math inline">\(K_{1}\)</span></p>
<p>- If the UE is configured to monitor PDCCH for multicast DCI formats
for serving cell <span class="math inline">\(c\)</span></p>
<p>- if the UE is provided <em>fdmed-ReceptionMulticast</em> or if the
UE is not provided <em>type1CodebookGenerationMode =</em> 'mode1'</p>
<p>- if the UE is configured to monitor PDCCH for DCI format 4_2,
<em>dl-DataToUL-ACK</em> or <em>DL-DataToUL-ACK-v1700</em> is provided
by <em>pucch-ConfigMulticast1/pucch-ConfigurationListMulticast1</em> if
provided; otherwise, by
<em>pucch-Config/pucch-ConfigurationList</em></p>
<p>- if UE is configured to monitor PDCCH for DCI format 4_1, <span
class="math inline">\(K_{1}\)</span> for multicast, <span
class="math inline">\(K_{1,M}\)</span>, is provided by the union of
<em>dl-DataToUL-ACK</em> or <em>DL-DataToUL-ACK-v1700</em> and
<em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em>, if provided; otherwise,
by the union of <em>dl-DataToUL-ACK</em> or
<em>DL-DataToUL-ACK-v1700</em> and the slot timing values {1, 2, 3, 4,
5, 6, 7, 8} for SCS configuration of PUCCH transmission <span
class="math inline">\(\mu \leq 3\)</span></p>
<p>- otherwise, <span class="math inline">\(K_{1,M}\)</span> is provided
by <em>dl-DataToUL-ACK</em> or <em>DL-DataToUL-ACK-v1700</em></p>
<p>- otherwise, <span class="math inline">\(K_{1,M}\)</span> is provided
by <em>dl-DataToUL-ACK-ForDCI Format4-1</em> if provided; otherwise, by
the slot timing values {1, 2, 3, 4, 5, 6, 7, 8} for SCS configuration of
PUCCH transmission <span class="math inline">\(\mu \leq 3\)</span></p>
<p>- else, if the UE is provided <em>type1CodebookGenerationMode =</em>
'mode1', the UE</p>
<p>- determines a first <span class="math inline">\(K_{1,UM}\)</span>
set as <span class="math inline">\(K_{1} \cap K_{1,M}\)</span>, a second
<span class="math inline">\(K_{1,U\backslash M}\)</span> set as <span
class="math inline">\(K_{1}\backslash K_{1,UM}\)</span>, and a third
<span class="math inline">\(K_{1,M\backslash U}\)</span> set as <span
class="math inline">\(K_{1,M}\backslash K_{1,UM}\)</span></p>
<p>- if the UE is configured to monitor PDCCH for DCI format 4_2,
<em>dl-DataToUL-ACK</em> or <em>DL-DataToUL-ACK-v1700</em> is provided
by <em>pucch-ConfigMulticast1/pucch-ConfigurationListMulticast1</em> if
provided; otherwise, by
<em>pucch-Config/pucch-ConfigurationList</em></p>
<p>- if UE is configured to monitor PDCCH for DCI format 4_1, <span
class="math inline">\(K_{1,M}\)</span> is provided by the union of
<em>dl-DataToUL-ACK</em> or <em>DL-DataToUL-ACK-v1700</em> and
<em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em>, if provided; otherwise,
by the union of <em>dl-DataToUL-ACK</em> or
<em>DL-DataToUL-ACK-v1700</em> and the slot timing values {1, 2, 3, 4,
5, 6, 7, 8} for SCS configuration of PUCCH transmission <span
class="math inline">\(\mu \leq 3\)</span></p>
<p>- otherwise, <span class="math inline">\(K_{1,M}\)</span> is provided
by <em>dl-DataToUL-ACK</em> or <em>DL-DataToUL-ACK-v1700</em></p>
<p>- otherwise, <span class="math inline">\(K_{1,M}\)</span> is provided
by <em>dl-DataToUL-ACK-ForDCI Format4-1</em> if provided; otherwise, by
the slot timing values {1, 2, 3, 4, 5, 6, 7, 8} for SCS configuration of
PUCCH transmission <span class="math inline">\(\mu \leq 3\)</span></p>
<p>b) on a set of row indexes <span class="math inline">\(R\)</span> of
a table that is associated with the active DL BWP and defining
respective sets of slot offsets <span
class="math inline">\(K_{0}\)</span>, start and length indicators
<em>SLIV</em>, and PDSCH mapping types for PDSCH reception as described
in [6, TS 38.214], where the row indexes <span
class="math inline">\(R\)</span> of the table are provided by</p>
<p>- the union of row indexes of time domain resource allocation tables
for DCI formats the UE is configured to monitor PDCCH for serving cell
<span class="math inline">\(c\)</span> if the UE is not configured to
monitor PDCCH for multicast DCI formats for serving cell <span
class="math inline">\(c\)</span>, or is not provided
<em>type1CodebookGenerationMode =</em> 'mode1' and is not provided
<em>fdmed-ReceptionMulticast</em>, or, if any, for the first <span
class="math inline">\(K_{1,UM}\)</span> set</p>
<p>- the union of row indexes of time domain resource allocation tables
for DCI format 1_0 and/or DCI format 1_1 and/or DCI format 1_2 for
serving cell <span class="math inline">\(c\)</span> if UE is provided
<em>fdmed-ReceptionMulticast,</em> or for the second <span
class="math inline">\(K_{1,U\backslash M}\)</span> set, if any</p>
<p>- the union of row indexes of time domain resource allocation tables
for multicast DCI formats the UE is configured to monitor PDCCH for
serving cell <span class="math inline">\(c\)</span> if UE is provided
<em>fdmed-ReceptionMulticast,</em> or for the third <span
class="math inline">\(K_{1,M\backslash U}\)</span> set, if any</p>
<p>- if the UE is provided <em>referenceOfSLIVDCI-1-2</em>, for each row
index with slot offset <span class="math inline">\(K_{0} = 0\)</span>
and PDSCH mapping Type B in a set of row indexes of a table for DCI
format 1_2 [6, TS 38.214], for any PDCCH monitoring occasion in any slot
where the UE monitors PDCCH for DCI format 1_2 and with starting symbol
<span class="math inline">\(S_{0} &gt; 0\)</span>, if <span
class="math inline">\({S + S}_{0} + L \leq 14\)</span> for normal cyclic
prefix and <span class="math inline">\({S + S}_{0} + L \leq 12\)</span>
for extended cyclic prefix, add a new row index in the set of row
indexes of the table by replacing the starting symbol <span
class="math inline">\(S\)</span> of the row index by <span
class="math inline">\({S + S}_{0}\)</span></p>
<p>c) on the ratio <span class="math inline">\(2^{\mu_{\text{DL}} -
\mu_{\text{UL}}}\)</span> between the downlink SCS configuration <span
class="math inline">\(\mu_{\text{DL}}\)</span> and the uplink SCS
configuration <span class="math inline">\(\mu_{\text{UL}}\)</span>
provided by <em>subcarrierSpacing</em> in <em>BWP-Downlink</em> and
<em>BWP-Uplink</em> for the active DL BWP and the active UL BWP,
respectively</p>
<p>d) if provided, on <em>tdd-UL-DL-ConfigurationCommon</em> and
<em>tdd-UL-DL-ConfigurationDedicated</em> as described in clause
11.1</p>
<p>e) if <em>ca-SlotOffset</em> is provided, on <span
class="math inline">\(N_{\text{slot,offset,c}}^{\text{DL}}\ \)</span>and
<span class="math inline">\(\mu_{\text{offset,DL,c}}\)</span> provided
by <em>ca-SlotOffset</em> for serving cell <span
class="math inline">\(c\)</span>, or on <span
class="math inline">\(N_{\text{slot,offset}}^{\text{UL}}\ \)</span> and
<span class="math inline">\(\mu_{\text{offset,UL}}\)</span> provided by
<em>ca-SlotOffset</em> for the primary cell, as described in [4, TS
38.211].</p>
<p>If a UE</p>
<p>- is not provided <em>coresetPoolIndex</em> or is provided
<em>coresetPoolIndex</em> with a value of 0 for first CORESETs on active
DL BWPs of serving cells, and</p>
<p>- is provided <em>coresetPoolIndex</em> with a value of 1 for second
CORESETs on active DL BWPs of the serving cells, and</p>
<p>- is provided <em>ackNackFeedbackMode</em> = <em>joint</em></p>
<p>where</p>
<p>- a serving cell is placed in a first set <span
class="math inline">\(S_{\text{0}}\)</span> of <span
class="math inline">\(N_{\text{cells}}^{\text{DL,0}}\)</span> serving
cells if the serving cell includes a first CORESET, and</p>
<p>- a serving cell is placed in a second set <span
class="math inline">\(S_{\text{1}}\)</span> of <span
class="math inline">\(N_{\text{cells}}^{\text{DL,1}}\)</span> serving
cells if the serving cell includes a second CORESET, and</p>
<p>- serving cells are placed in a set according to an ascending order
of a serving cell index</p>
<p>the UE generates a Type-1 HARQ-ACK codebook for the set <span
class="math inline">\(S_{\text{0}}\)</span> and the set <span
class="math inline">\(S_{1}\)</span> of serving cells separately by
setting <span class="math inline">\({N_{\text{cells}}^{\text{DL}} =
N}_{\text{cells}}^{\text{DL,0}}\)</span> and <span
class="math inline">\({N_{\text{cells}}^{\text{DL}} =
N}_{\text{cells}}^{\text{DL,1}}\)</span> in the following pseudo-code.
The UE concatenates the HARQ-ACK codebook generated for the set <span
class="math inline">\(S_{\text{0}}\)</span> followed by the HARQ-ACK
codebook generated for the set <span
class="math inline">\(S_{1}\)</span> to obtain a total number of <span
class="math inline">\(O_{\text{ACK}}\)</span> HARQ-ACK information
bits.</p>
<p>If a UE is provided <em>fdmed-ReceptionMulticast</em> and the UE is
configured to monitor PDCCH for detection of unicast DCI formats and to
monitor PDCCH for detection of multicast DCI formats</p>
<p>- a serving cell is placed in a first set <span
class="math inline">\(S_{\text{U}}\)</span> of <span
class="math inline">\(N_{\text{cells}}^{\text{DL,U}}\)</span> serving
cells if the UE is configured to monitor PDCCH for DCI formats
1_0/1_1/1_2 for scheduling on serving cell <span
class="math inline">\(c\)</span>, and</p>
<p>- a serving cell is placed in a second set <span
class="math inline">\(S_{\text{M}}\)</span> of <span
class="math inline">\(N_{\text{cells}}^{\text{DL,M}}\)</span> serving
cells if the UE is configured to monitor PDCCH for detection of DCI
format 4_1/4_2 for scheduling on serving cell <span
class="math inline">\(c\)</span>, and</p>
<p>- serving cells are placed in a set according to an ascending order
of a serving cell index</p>
<p>the UE generates a Type-1 HARQ-ACK codebook for the set <span
class="math inline">\(S_{\text{U}}\)</span> and the set <span
class="math inline">\(S_{M}\)</span> of serving cells separately by
setting <span class="math inline">\({N_{\text{cells}}^{\text{DL}} =
N}_{\text{cells}}^{\text{DL,U}}\)</span> and using the
<em>maxNrofCodeWordsScheduledByDCI</em> provided in
<em>PDSCH-config</em> for the set <span
class="math inline">\(S_{\text{U}}\)</span> and setting <span
class="math inline">\({N_{\text{cells}}^{\text{DL}} =
N}_{\text{cells}}^{\text{DL,M}}\)</span>,
<em>maxCodeBlockGroupsPerTransportBlock</em> to 1, and using the
<em>maxNrofCodeWordsScheduledByDCI</em> provided in
<em>PDSCH-configMulticast</em> for the set <span
class="math inline">\(S_{\text{M}}\)</span> in the following
pseudo-code. The UE concatenates the HARQ-ACK codebook generated for the
set <span class="math inline">\(S_{\text{U}}\)</span> followed by the
HARQ-ACK codebook generated for the set <span
class="math inline">\(S_{M}\)</span> to obtain a total number of <span
class="math inline">\(O_{\text{ACK}}\)</span> HARQ-ACK information
bits.</p>
<p>If the UE is configured to monitor PDCCH for DCI formats with CRC
scrambled by G-RNTI for multicast or G-CS-RNTI and is provided
<em>type1-Codebook-Generation-Mode</em> = 'mode1', the UE separately
applies the following pseudo-code for each of the first <span
class="math inline">\(K_{1,UM}\)</span> set, the second <span
class="math inline">\(K_{1,U\backslash M}\)</span> set, and third <span
class="math inline">\(K_{1,M\backslash U}\)</span> set as the set of
slot timing values <span class="math inline">\(K_{1}\)</span>, and for
the corresponding sets of row indexes as <span
class="math inline">\(R\)</span> to obtain first, second, and third
Type-1 HARQ-ACK sub-codebooks, and concatenates the first, second, and
third, Type-1 HARQ-ACK sub-codebooks to obtain the Type-1 HARQ-ACK
codebook. The UE sets <em>maxCodeBlockGroupsPerTransportBlock</em> to 1
for determining the third Type-1 HARQ-ACK sub-codebook.</p>
<p>If the UE is configured to monitor PDCCH for DCI formats with CRC
scrambled by G-RNTI for multicast or G-CS-RNTI and is not provided
<em>fdmed-ReceptionMulticast</em>, the UE generates a Type-1 HARQ-ACK
codebook using the maximum value of
<em>maxNrofCodeWordsScheduledByDCI</em> in <em>PDSCH-config</em> and
<em>PDSCH-configMulticast</em> in the following pseudo-code.</p>
<p>If <em>timeDomainHARQ-BundlingType1</em> is provided</p>
<p>- set <span class="math inline">\(R_{T}&#39; = R\)</span></p>
<p>- set <span class="math inline">\(R_{T}\)</span> to the set of row
indexes that include the last SLIV of each row of set <span
class="math inline">\(R_{T}&#39;\)</span></p>
<p>If the set of rows <span class="math inline">\(R\)</span> includes a
row with more than one SLIV entry as described in [6, TS 38.214] and
<em>timeDomainHARQ-BundlingType1</em> is not provided, the set of rows
<span class="math inline">\(R\)</span> and the set of slot timing values
<span class="math inline">\(K_{1}\)</span> are updated in this clause
according to the following pseudo-code.</p>
<p>set <span class="math inline">\(R\)</span> to the set of rows</p>
<p>set <span class="math inline">\(\text{C}(R)\)</span> to the
cardinality of <span class="math inline">\(R\)</span></p>
<p>set <span class="math inline">\(r = 0\)</span> – index of row in set
<span class="math inline">\(R\)</span></p>
<p>set <span class="math inline">\(R_{\text{T}} =
\varnothing\)</span></p>
<p>set <span class="math inline">\(K_{1,T} = \varnothing\)</span></p>
<p>while <span class="math inline">\(r &lt; \text{C}(R)\)</span></p>
<p>set <span class="math inline">\(P_{\text{r}}\)</span> to the set of
entries for row <span class="math inline">\(r\)</span></p>
<p>set <span class="math inline">\(K_{\text{0,r}}\)</span> to the set of
<span class="math inline">\(K_{\text{0}}\)</span> values of entries for
row <span class="math inline">\(r\)</span></p>
<p>set <span class="math inline">\(\mathrm{\Delta}K_{\text{0,r}} =
\max_{K_{\text{0}}}\left( K_{\text{0,r}} \right) -
K_{\text{0,r}}\)</span></p>
<p>set <span class="math inline">\(\text{C}\left( P_{\text{r}}
\right)\)</span> to the cardinality of <span
class="math inline">\(P_{\text{r}}\)</span></p>
<p>set <span class="math inline">\(\text{C}\left(
\mathrm{\Delta}K_{\text{0,r}} \right)\)</span> to the cardinality of
<span class="math inline">\(\mathrm{\Delta}K_{\text{0,r}}\)</span></p>
<p>set <span class="math inline">\(p = 0\)</span> – index of element in
<span class="math inline">\(P_{\text{r}}\)</span>set <span
class="math inline">\(d = 0\)</span> – index of element in <span
class="math inline">\(\mathrm{\Delta}K_{\text{0,r}}\)</span></p>
<p>while <span class="math inline">\(p &lt; \text{C}\left( P_{\text{r}}
\right)\)</span></p>
<p><span class="math inline">\(R_{\text{T}} = R_{\text{T}} \cup
P_{\text{r}}(p)\)</span><em>;</em></p>
<p><span class="math inline">\(p = p + 1\)</span>;</p>
<p>end while</p>
<p>while <span class="math inline">\(d &lt; \text{C}\left(
\mathrm{\Delta}K_{\text{0,r}} \right)\)</span></p>
<p><span class="math inline">\(K_{1,T} = K_{1,T} \cup \left( K_{1} +
\left\lceil \mathrm{\Delta}K_{\text{0,r}}(d) \cdot 2^{\mu_{UL} -
\mu_{DL}} \right\rceil \right) \cup \left( K_{1} + \left\lfloor
\mathrm{\Delta}K_{\text{0,r}}(d) \cdot 2^{\mu_{UL} - \mu_{DL}}
\right\rfloor \right)\)</span>;</p>
<p><span class="math inline">\(d = d + 1\)</span>;</p>
<p>end while</p>
<p><span class="math inline">\(r = r + 1\)</span>;</p>
<p>end while</p>
<p><span class="math inline">\({K_{1} = K}_{1,T}\)</span>;</p>
<p>For the set of slot timing values <span
class="math inline">\(K_{\text{1}}\)</span>, the UE determines a set of
<span class="math inline">\(M_{A,c}\)</span> occasions for candidate
PDSCH receptions or SPS PDSCH releases or TCI state update according to
the following pseudo-code. A location in the Type-1 HARQ-ACK codebook
for HARQ-ACK information corresponding to a single SPS PDSCH release is
same as for a corresponding SPS PDSCH reception. A location in the
Type-1 HARQ-ACK codebook for HARQ-ACK information corresponding to
multiple SPS PDSCH releases by a single DCI format is same as for a
corresponding SPS PDSCH reception with the lowest SPS configuration
index among the multiple SPS PDSCH releases. If a UE provides HARQ-ACK
information corresponding to detection of a DCI format that provides TCI
state update without scheduling PDSCH reception, as described in [6, TS
38.214], a location in the Type-1 HARQ-ACK codebook for the HARQ-ACK
information is same as when the DCI format schedules a PDSCH reception
with CBGs or with transport blocks that are correctly decoded.</p>
<p>In the following pseudo-code, the <em>subslotLengthForPUCCH</em> is
for the primary cell if the UE is provided <em>pucch-sSCellPattern</em>;
otherwise, <em>subslotLengthForPUCCH</em> is for the serving cell of the
PUCCH transmission.</p>
<p>Set <span class="math inline">\(j = 0\)</span> - index of occasion
for candidate PDSCH reception or SPS PDSCH release or TCI state
update</p>
<p>Set <span class="math inline">\(B = \varnothing\)</span></p>
<p>Set <span class="math inline">\(M_{\text{A,c}} =
\varnothing\)</span></p>
<p>Set <span class="math inline">\(\text{C}\left( K_{\text{1}}
\right)\)</span> to the cardinality of set <span
class="math inline">\(K_{\text{1}}\)</span></p>
<p>Set <span class="math inline">\(k = 0\)</span> – index of slot timing
values <span class="math inline">\(K_{\text{1,k}}\)</span>, in
descending order of the slot timing values, in set <span
class="math inline">\(K_{\text{1}}\)</span> for serving cell <span
class="math inline">\(c\)</span></p>
<p>If a UE is not provided <em>ca-SlotOffset</em> for any serving cell
of PDSCH receptions and for the serving cell of corresponding PUCCH
transmission with HARQ-ACK information</p>
<p>while <span class="math inline">\(k &lt; \text{C}\left( K_{\text{1}}
\right)\)</span></p>
<p>if <span class="math inline">\(mod\left( n_{\text{U}} -
K_{\text{1,k}} + 1,\max\left( 2^{\mu_{UL} - \mu_{DL}},1 \right) \right)
= 0\)</span> or <em>subslotLengthForPUCCH</em> is provided for the
HARQ-ACK codebook</p>
<p>Set <span class="math inline">\(n_{\text{D}} = 0\)</span> – index of
a DL slot overlapping with an UL slot</p>
<p>Set <span class="math inline">\(N_{\text{k}}\)</span> to a number of
DL slots overlapping with UL slot <span class="math inline">\(n_{U} -
K_{1,k}\)</span> if <em>subslotLengthForPUCCH</em> is provided for the
HARQ-ACK codebook; otherwise, <span class="math inline">\(N_{\text{k}} =
\max\left( 2^{\mu_{DL} - \mu_{UL}},1 \right)\)</span></p>
<p>while <span class="math inline">\(n_{D} &lt; N_{k}\)</span></p>
<p>if <em>pdsch-TimeDomainAllocationListForMultiPDSCH</em> and
<em>timeDomainHARQ-BundlingType1</em> are provided for serving cell
<span class="math inline">\(c\)</span></p>
<p><span class="math inline">\(R = R_{\text{T}}\)</span>;</p>
<p><span class="math inline">\(R&#39; = R_{T}&#39;\)</span>;</p>
<p>elseif <em>pdsch-TimeDomainAllocationListForMultiPDSCH</em> is
provided and <em>timeDomainHARQ-BundlingType1</em> is not provided for
serving cell <span class="math inline">\(c\)</span></p>
<p><span class="math inline">\(R = R_{\text{T}}\)</span>;</p>
<p>else</p>
<p>Set <span class="math inline">\(R\)</span> to the set of rows</p>
<p>end if</p>
<p>Set <span class="math inline">\(\text{C}(R)\)</span> to the
cardinality of <span class="math inline">\(R\)</span></p>
<p>Set <span class="math inline">\(r = 0\)</span> – index of row in set
<span class="math inline">\(R\)</span></p>
<p>if slot <span class="math inline">\(n_{\text{U}}\)</span> starts at a
same time as or after a slot for an active DL BWP change on serving cell
<span class="math inline">\(c\)</span> or an active UL BWP change on the
serving cell of PUCCH transmission if the UE is provided
<em>pucch-sSCellDyn</em> or <em>pucch-sSCellDynDCI-1-2</em>, or an
active UL BWP change on the PCell if the UE is not provided
<em>pucch-sSCellDyn</em> and <em>pucch-sSCellDynDCI-1-2,</em> and slot
<span class="math inline">\(n_{0,k} + n_{D}\)</span> is before the slot
for the active DL BWP change on serving cell <span
class="math inline">\(c\)</span> or the active UL BWP change on the
serving cell of PUCCH transmission, or <em>subslotLengthForPUCCH</em> is
provided for the HARQ-ACK codebook and slot <span
class="math inline">\(n_{0,k} + n_{D}\)</span> overlaps with UL slot
<span class="math inline">\(n_{U} - K_{1,k - 1}\)</span>, <span
class="math inline">\(k &gt; 0\)</span>, where <span
class="math inline">\(n_{0,k}\)</span> is a DL slot with a smallest
index among DL slots overlapping with UL slot <span
class="math inline">\(n_{U} - K_{1,k}\)</span>,</p>
<p><span class="math inline">\(n_{D} = n_{D} + 1\)</span>;</p>
<p>else</p>
<p>while <span class="math inline">\(r &lt; \text{C}(R)\)</span></p>
<p>if the UE is not provided <em>timeDomainHARQ-BundlingType1</em> and
is provided <em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em> and, for each slot from slot
<span class="math inline">\(n_{0,k} + n_{D} - N_{PDSCH}^{repeat,max} +
1\)</span> to slot <span class="math inline">\(n_{0,k} + n_{D}\)</span>,
at least one symbol of the PDSCH time resource derived by row <span
class="math inline">\(r\)</span> is configured as UL by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> where <span
class="math inline">\(K_{\text{1,k}}\)</span> is the <em>k</em>-th slot
timing value in set <span class="math inline">\(K_{\text{1}}\)</span>,
where <span class="math inline">\(n_{0,k}\)</span> is a DL slot with a
smallest index among DL slots overlapping with UL slot <span
class="math inline">\(n_{U} - K_{1,k}\)</span>, or
<em>subslotLengthForPUCCH</em> is provided for the HARQ-ACK codebook and
the end of the PDSCH time resource for row <span
class="math inline">\(r\)</span> is not within any UL slot <span
class="math inline">\(n_{U} - K_{1,l}\)</span>, <span
class="math inline">\(0 \leq l &lt; \text{C}\left( K_{1} \right),\
\)</span>or if <em>pdsch-TimeDomainAllocationListForMultiPDSCH</em> is
provided and HARQ-ACK information for PDSCH time resource derived by row
<span class="math inline">\(r\)</span> in slot <span
class="math inline">\(n_{0,k} + n_{D}\)</span> cannot be provided in
slot <span class="math inline">\(n_{U}\)</span></p>
<p><span class="math inline">\(R = R\backslash r\)</span>;</p>
<p>elseif the UE is provided <em>timeDomainHARQ-BundlingType1</em> and
<em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em> and, for each slot <span
class="math inline">\(n_{0,k} + n_{D} - \
\mathrm{\Delta}K_{\text{0,r}}(d)\)</span>, at least one symbol of each
PDSCH time resource derived by row <span
class="math inline">\(r\)</span> of set <span
class="math inline">\(R&#39;\)</span> is configured as UL by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em>, and for each slot from <span
class="math inline">\(n_{0,k} + n_{D} - N_{PDSCH}^{repeat,max} +
1\)</span> to slot <span class="math inline">\(n_{0,k} + n_{D}\)</span>
at least one symbol of the PDSCH time resource derived by row <span
class="math inline">\(r\)</span> of set <em>R</em> is configured as UL
by <em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> if the row <span
class="math inline">\(r\)</span> of set <em>R</em> belongs to time
domain resource allocation table configured for DCI format 1_2, where
<span class="math inline">\(d\)</span> = 0,1,…,<span
class="math inline">\(\text{C}\left( \mathrm{\Delta}K_{\text{0,r}}
\right) - 1\)</span>, <span
class="math inline">\(\mathrm{\Delta}K_{\text{0,r}} =
\max_{K_{\text{0}}}\left( K_{\text{0,r}} \right) -
K_{\text{0,r}}\)</span>, and <span class="math inline">\(\text{C}\left(
\mathrm{\Delta}K_{\text{0,r}} \right)\)</span> is the cardinality of
<span class="math inline">\(\mathrm{\Delta}K_{\text{0,r}}\)</span>.</p>
<p><span class="math inline">\(R = R\backslash r\)</span>;</p>
<p><span class="math inline">\(R&#39; = R&#39;\backslash r\)</span>;</p>
<p>else</p>
<p><span class="math inline">\(r = r + 1\)</span>;</p>
<p>end if</p>
<p>end while</p>
<p>if the UE is not provided with <em>multiPDSCH-perSlotType1-CB</em>
and the UE does not indicate a capability to receive more than one
unicast PDSCH or multicast PDSCH per slot and <span
class="math inline">\(R \neq \varnothing\)</span>, or if the UE is
provided with <em>multiPDSCH-perSlotType1-CB</em> = ‘disabled’ and <span
class="math inline">\(R \neq \varnothing\)</span>,</p>
<p><span class="math inline">\(M_{\text{A,c}} = M_{\text{A,c}} \cup
j\)</span>;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>else</p>
<p>Set <span class="math inline">\(\text{C}(R)\)</span> to the
cardinality of <span class="math inline">\(R\)</span></p>
<p>Set <span class="math inline">\(m\)</span> to the smallest last OFDM
symbol index, as determined by the <em>SLIV</em>, among all rows of
<span class="math inline">\(R\)</span></p>
<p>while <span class="math inline">\(R \neq \varnothing\)</span></p>
<blockquote>
<p>Set <span class="math inline">\(r = 0\)</span></p>
<p>while <span class="math inline">\(r &lt; \text{C}(R)\)</span></p>
<p>if <span class="math inline">\(S \leq m\)</span> for start OFDM
symbol index <span class="math inline">\(S\)</span> for row <span
class="math inline">\(r\)</span></p>
<p><span class="math inline">\(b_{\text{r,k,}n_{D}} = j\)</span>; -
index of occasion for candidate PDSCH reception, or SPS PDSCH release,
or TCI state update associated with row <span
class="math inline">\(r\)</span></p>
<p><span class="math inline">\(R = R\backslash r\)</span>;</p>
<p><span class="math inline">\({B = B \cup
b}_{\text{r,k,}n_{D}}\)</span>;</p>
<p>else</p>
<p><span class="math inline">\(r = r + 1\)</span>;</p>
<p>end if</p>
</blockquote>
<p>end while</p>
<p><span class="math inline">\(M_{\text{A,c}} = M_{\text{A,c}} \cup
j\)</span></p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>Set <span class="math inline">\(m\)</span> to the smallest last OFDM
symbol index among all rows of <span
class="math inline">\(R\)</span>;</p>
<p>end while</p>
<p>end if</p>
<p><span class="math inline">\(n_{D} = n_{D} + 1\)</span>;</p>
<p>end if</p>
<p>end while</p>
<p>end if</p>
<p><span class="math inline">\(k = k + 1\)</span>;</p>
<p>end while</p>
<p>else</p>
<p>while <span class="math inline">\(k &lt; \text{C}\left( K_{\text{1}}
\right)\)</span></p>
<p>if <span class="math inline">\(mod\left( n_{U} - K_{1,k} +
\left\lfloor (\frac{N_{slot,offset}^{UL}}{2^{\mu_{offset,UL}}} -
\frac{N_{slot,offset,c}^{DL}}{2^{\mu_{offset,DL,c}}}) \bullet
2^{\mu_{UL}} \right\rfloor + 1,max(2^{\mu_{UL} - \mu_{DL}},1) \right) =
0\)</span> or <em>subslotLengthForPUCCH</em> is provided for the
HARQ-ACK codebook</p>
<p>Set <span class="math inline">\(n_{\text{D}} = 0\)</span> – index of
a DL slot overlapping with an UL slot</p>
<p>Set <span class="math inline">\(N_{\text{k}}\)</span> to a number of
DL slots overlapping with UL slot <span class="math inline">\(n_{U} -
K_{1,k}\)</span> if <em>subslotLengthForPUCCH</em> is provided for the
HARQ-ACK codebook; otherwise, <span class="math inline">\(N_{\text{k}} =
\max\left( 2^{\mu_{DL} - \mu_{UL}},1 \right)\)</span></p>
<p>while <span class="math inline">\(n_{D} &lt; N_{k}\)</span></p>
<p>if <em>pdsch-TimeDomainAllocationListForMultiPDSCH</em> and
<em>timeDomainHARQ-BundlingType1</em> are provided for serving cell
<span class="math inline">\(c\)</span></p>
<p><span class="math inline">\(R = R_{\text{T}}\)</span>;</p>
<p><span class="math inline">\(R&#39; = R_{T}&#39;\)</span>;</p>
<p>elseif <em>pdsch-TimeDomainAllocationListForMultiPDSCH</em> is
provided and <em>timeDomainHARQ-BundlingType1</em> is not provided for
serving cell <span class="math inline">\(c\)</span></p>
<p><span class="math inline">\(R = R_{\text{T}}\)</span>;</p>
<p>else</p>
<p>Set <span class="math inline">\(R\)</span> to the set of rows</p>
<p>end if</p>
<p>Set <span class="math inline">\(\text{C}(R)\)</span> to the
cardinality of <span class="math inline">\(R\)</span></p>
<p>Set <span class="math inline">\(r = 0\)</span> – index of row in set
<span class="math inline">\(R\)</span></p>
<p>if slot <span class="math inline">\(n_{U}\)</span> starts at a same
time as or after a slot for an active DL BWP change on serving cell
<span class="math inline">\(c\)</span> or an active UL BWP change on the
serving cell of PUCCH transmission if the UE is provided
<em>pucch-sSCellDyn</em> or <em>pucch-sSCellDynDCI-1-2</em>, or an
active UL BWP change on the PCell if the UE is not provided
<em>pucch-sSCellDyn</em> and <em>pucch-sSCellDynDCI-1-2,</em> and slot
<span class="math inline">\(\ n_{0,k} + n_{D}\)</span> is before the
slot for the active DL BWP change on serving cell <span
class="math inline">\(c\)</span> or the active UL BWP change on the
serving cell of PUCCH transmission where <span
class="math inline">\(n_{0,k}\)</span> is a DL slot with a smallest
index among DL slots overlapping with UL slot <span
class="math inline">\(n_{U} - K_{1,k}\)</span>, or
<em>subslotLengthForPUCCH</em> is provided for the HARQ-ACK codebook and
slot <span class="math inline">\(n_{0,k} + n_{D}\)</span> overlaps with
UL slot <span class="math inline">\(n_{U} - K_{1,k - 1}\)</span>, <span
class="math inline">\(k &gt; 0\)</span>,</p>
<p><span class="math inline">\(n_{D} = n_{D} + 1\)</span>;</p>
<p>else</p>
<p>while <span class="math inline">\(r &lt; \text{C}(R)\)</span></p>
<p>if the UE is not provided <em>timeDomainHARQ-BundlingType1</em> and
is provided <em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em> and, for each slot from slot
<span class="math inline">\(n_{0,k} + n_{D} - N_{PDSCH}^{repeat,max} +
1\)</span> to slot <span class="math inline">\(n_{0,k} + n_{D}\)</span>,
at least one symbol of the PDSCH time resource derived by row <span
class="math inline">\(r\)</span> is configured as UL by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> where <span
class="math inline">\(K_{1,k}\)</span> is the <em>k</em>-th slot timing
value in set <span class="math inline">\(K_{1}\)</span>, where <span
class="math inline">\(n_{0,k}\)</span> is a DL slot with a smallest
index among DL slots overlapping with UL slot <span
class="math inline">\(n_{U} - K_{1,k}\)</span>, or
<em>subslotLengthForPUCCH</em> is provided for the HARQ-ACK codebook and
the end of the PDSCH time resource for row <span
class="math inline">\(r\)</span> is not within any UL slot <span
class="math inline">\(n_{U} - K_{1,l}\)</span>, <span
class="math inline">\(0 \leq l &lt; \text{C}\left( K_{1} \right)\
\)</span>or if <em>pdsch-TimeDomainAllocationListForMultiPDSCH</em> is
provided and HARQ-ACK information for PDSCH time resource derived by row
<span class="math inline">\(r\)</span> in slot <span
class="math inline">\(n_{0,k} + n_{D}\)</span> cannot be provided in
slot <span class="math inline">\(n_{U}\)</span></p>
<p><span class="math inline">\(R = R\backslash r\)</span>;</p>
<p>elseif the UE is provided <em>timeDomainHARQ-BundlingType1</em> and
<em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em> and, for each slot <span
class="math inline">\(n_{0,k} + n_{D} - \
\mathrm{\Delta}K_{\text{0,r}}(d)\)</span>, at least one symbol of each
PDSCH time resource derived by row <span
class="math inline">\(r\)</span> of set <span
class="math inline">\(R&#39;\)</span> is configured as UL by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em>, and for each slot from <span
class="math inline">\(n_{0,k} + n_{D} - N_{PDSCH}^{repeat,max} +
1\)</span> to slot <span class="math inline">\(n_{0,k} + n_{D}\)</span>
at least one symbol of the PDSCH time resource derived by row <span
class="math inline">\(r\)</span> of set <em>R</em> is configured as UL
by <em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> if the row <span
class="math inline">\(r\)</span> of set <em>R</em> belongs to time
domain resource allocation table configured for DCI format 1_2, where
<span class="math inline">\(d\)</span> = 0,1,…,<span
class="math inline">\(\text{C}\left( \mathrm{\Delta}K_{\text{0,r}}
\right) - 1\)</span>.</p>
<p><span class="math inline">\(R = R\backslash r\)</span>;</p>
<p><span class="math inline">\(R&#39; = R&#39;\backslash r\)</span>;</p>
<p>else</p>
<p><span class="math inline">\(r = r + 1\)</span>;</p>
<p>end if</p>
<p>end while</p>
<p>if the UE is not provided with <em>multiPDSCH-perSlotType1-CB</em>
and the UE does not indicate a capability to receive more than one
unicast PDSCH or multicast PDSCH per slot and <span
class="math inline">\(R \neq \varnothing\)</span>, or if the UE is
provided with <em>multiPDSCH-perSlotType1-CB</em> = ‘disabled’ and <span
class="math inline">\(R \neq \varnothing\)</span>,</p>
<p><span class="math inline">\(M_{\text{A,c}} = M_{\text{A,c}} \cup
j\)</span>;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>else</p>
<p>Set <span class="math inline">\(\text{C}(R)\)</span> to the
cardinality of <span class="math inline">\(R\)</span></p>
<p>Set <span class="math inline">\(m\)</span> to the smallest last OFDM
symbol index, as determined by the <em>SLIV</em>, among all rows of
<span class="math inline">\(R\)</span></p>
<p>while <span class="math inline">\(R \neq \varnothing\)</span></p>
<blockquote>
<p>Set <span class="math inline">\(r = 0\)</span></p>
<p>while <span class="math inline">\(r &lt; \text{C}(R)\)</span></p>
<p>if <span class="math inline">\(S \leq m\)</span> for start OFDM
symbol index <span class="math inline">\(S\)</span> for row <span
class="math inline">\(r\)</span></p>
<p><span class="math inline">\(b_{\text{r,k,}n_{D}} = j\)</span>; -
index of occasion for candidate PDSCH reception, or SPS PDSCH release,
or TCI state update associated with row <span
class="math inline">\(r\)</span></p>
<p><span class="math inline">\(R = R\backslash r\)</span>;</p>
<p><span class="math inline">\({B = B \cup
b}_{\text{r,k,}n_{D}}\)</span>;</p>
<p>else</p>
<p><span class="math inline">\(r = r + 1\)</span>;</p>
<p>end if</p>
<p>end while</p>
<p><span class="math inline">\(M_{\text{A,c}} = M_{\text{A,c}} \cup
j\)</span>;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>Set <span class="math inline">\(m\)</span> to the smallest last OFDM
symbol index among all rows of <span
class="math inline">\(R\)</span>;</p>
</blockquote>
<p>end while</p>
<p>end if</p>
<p><span class="math inline">\(n_{D} = n_{D} + 1\)</span>;</p>
<p>end if</p>
<p>end while</p>
<p>end if</p>
<p><span class="math inline">\(k = k + 1\)</span>;</p>
<p>end while</p>
<p>end if</p>
<p>If the UE indicates a capability to receive more than one PDSCH per
slot, for occasions of candidate PDSCH receptions corresponding to rows
of <span class="math inline">\(R\)</span> associated with a same value
of <span class="math inline">\(b_{\text{r,k,}n_{D}}\)</span>, where
<span class="math inline">\(b_{\text{r,k,}n_{D}} \in B\)</span>, the UE
does not expect to receive more than one PDSCH in a same DL slot
associated with a same <em>coresetPoolIndex</em> value if provided, or
if <em>coresetPoolIndex</em> is not provided.</p>
<p>If a UE receives a SPS PDSCH, or a SPS PDSCH release, or TCI state
update, or a PDSCH that is scheduled by a DCI format that does not
support CBG-based PDSCH receptions and if</p>
<p>- the UE is configured with one serving cell, and</p>
<p>- <span class="math inline">\(\text{C}\left( M_{\text{A,c}} \right) =
1\)</span>, and</p>
<p>- <em>PDSCH-CodeBlockGroupTransmission</em> is provided to the UE</p>
<p>the UE generates HARQ-ACK information only for the transport block in
the PDSCH, or only for the SPS PDSCH release, or only for the TCI state
update.</p>
<p>If a UE receives a SPS PDSCH, or a SPS PDSCH release, or TCI state
update, or a PDSCH that is scheduled by a DCI format that does not
support CBG-based PDSCH receptions and if</p>
<p>- the UE is configured with more than one serving cells, or</p>
<p>- <span class="math inline">\(\text{C}\left( M_{\text{A,c}} \right)
&gt; 1\)</span>, and</p>
<p>- <em>PDSCH-CodeBlockGroupTransmission</em> is provided to the UE</p>
<p>the UE repeats <span class="math inline">\(N_{HARQ -
ACK}^{CBG/TB,max}\)</span> times the HARQ-ACK information for the
transport block in the PDSCH, or for the SPS PDSCH release, or for the
TCI state update.</p>
<p>A UE does not expect to detect a DCI format switching a DL BWP within
<span class="math inline">\(N_{3}\)</span> symbols prior to a first
symbol of a PUCCH transmission where the UE multiplexes HARQ-ACK
information, where <span class="math inline">\(N_{3}\)</span> is defined
in clause 9.2.3.</p>
<p>If a UE is provided <em>dl-DataToUL-ACK</em> or
<em>dl-DataToUL-ACK-r16</em> or <em>dl-DataToUL-ACK-DCI-1-2</em> or
<em>dl-DataToUL-ACK-r17</em> or <em>dl-DataToUL-ACK-v1700</em> or
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, the UE does not expect to be
indicated by DCI format 1_0 a slot timing value for transmission of
HARQ-ACK information that does not belong to the intersection of the set
of slot timing values {1, 2, 3, 4, 5, 6, 7, 8} for SCS configuration of
PUCCH transmission <span class="math inline">\(\mu \leq 3\)</span>, {7,
8, 12, 16, 20, 24, 28, 32} for <span class="math inline">\(\mu =
5\)</span>, and {13, 16, 24, 32, 40, 48, 56, 64} for <span
class="math inline">\(\mu = 6\)</span>, and the set of slot timing
values provided by <span class="math inline">\(K_{1}\)</span> for the
active DL BWP of a corresponding serving cell for unicast.</p>
<p>If <em>maxNrofCodeWordsScheduledByDCI</em> indicates reception of two
transport blocks, when the UE receives a PDSCH with one transport block
or a SPS PDSCH release or a TCI state update, the HARQ-ACK information
is associated with the first transport block and the UE generates a NACK
for the second transport block if <em>harq-ACK-SpatialBundlingPUCCH</em>
is not provided and generates HARQ-ACK information with value of ACK for
the second transport block if <em>harq-ACK-SpatialBundlingPUCCH</em> is
provided.</p>
<p>A UE determines <span
class="math inline">\({\widetilde{o}}_{0}^{ACK}\text{,
}{\widetilde{o}}_{1}^{ACK}\text{,...,}{\widetilde{o}}_{O_{ACK} -
1}^{ACK}\)</span> HARQ-ACK information bits, for a total number of <span
class="math inline">\(O_{ACK}\)</span> HARQ-ACK information bits, of a
HARQ-ACK codebook for transmission in a PUCCH according to the following
pseudo-code. In the following pseudo-code, if the UE does not receive a
transport block or a CBG, due to the UE not detecting a corresponding
DCI format, the UE generates a NACK value for the transport block or the
CBG. The cardinality of the set <span
class="math inline">\(M_{A,c}\)</span> defines a total number <span
class="math inline">\(M_{c}\)</span> of occasions for PDSCH reception or
SPS PDSCH release or TCI state update for serving cell <span
class="math inline">\(c\)</span> corresponding to the HARQ-ACK
information bits.</p>
<p>Set <span class="math inline">\(c = 0\)</span> – serving cell index:
lower indexes correspond to lower RRC indexes of corresponding cells
including, when applicable, cells in the set <span
class="math inline">\(S_{\text{0}}\)</span> and the set <span
class="math inline">\(S_{1}\)</span></p>
<p>Set <span class="math inline">\(j = 0\)</span>- HARQ-ACK information
bit index</p>
<p>Set <span class="math inline">\(N_{cells}^{DL}\)</span> to the number
of serving cells configured by higher layers for the UE</p>
<p>while <span class="math inline">\(c &lt; N_{cells}^{DL}\)</span></p>
<p>Set <span class="math inline">\(m = 0\)</span> – index of occasion
for candidate PDSCH reception, or SPS PDSCH release, or TCI state
update</p>
<p>while <span class="math inline">\(m &lt; M_{c}\)</span></p>
<p>if <em>timeDomainHARQ-BundlingType1</em> is provided for serving cell
<span class="math inline">\(c\ \)</span>and a PDSCH associated with
occasion <span class="math inline">\(m\)</span> is scheduled by a DCI
format indicating a TDRA row that includes more than one SLIV entry</p>
<p>if <em>harq-ACK-SpatialBundlingPUCCH</em> is not provided and the UE
is configured by <em>maxNrofCodeWordsScheduledByDCI</em> with reception
of two transport blocks for the active DL BWP of serving cell <span
class="math inline">\(c\)</span></p>
<p>if the PDSCH is associated with the last SLIV in the TDRA row</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span> =
binary AND operation of the HARQ-ACK information bits corresponding to
first transport blocks in PDSCH receptions, that do not overlap with an
uplink symbol indicated by <em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em>, scheduled by the DCI format
on serving cell <span class="math inline">\(c\)</span>;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span> =
binary AND operation of the HARQ-ACK information bits corresponding to
second transport blocks in PDSCH receptions, that do not overlap with an
uplink symbol indicated by <em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em>, scheduled by the DCI format
on serving cell <span class="math inline">\(c\)</span>;</p>
<p>else</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK} =\)</span>
NACK;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK} =\)</span>
NACK;</p>
<p>end if</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>elseif <em>harq-ACK-SpatialBundlingPUCCH</em> is provided and the UE
is configured by <em>maxNrofCodeWordsScheduledByDCI</em> with reception
of two transport blocks for the active DL BWP of serving cell <span
class="math inline">\(c\)</span></p>
<p>if the PDSCH is associated with the last SLIV in the TDRA row;</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span> =
binary AND operation of the HARQ-ACK information bits corresponding to
all transport blocks in PDSCHs, that do not overlap with an uplink
symbol indicated by <em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em>, scheduled by the DCI format
of serving cell <span class="math inline">\(c\)</span></p>
<blockquote>
<p>if the UE receives one transport block, the UE assumes ACK for the
second transport block;</p>
</blockquote>
<p>else</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span> =
NACK;</p>
<p>end if</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>else</p>
<p>if the PDSCH is associated with the last SLIV in the TDRA row;</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span>
=binary AND operation of the HARQ-ACK information bits corresponding to
all transport blocks in PDSCHs, that do not overlap with an uplink
symbol indicated by <em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em>, scheduled by the DCI format
of serving cell <span class="math inline">\(c\)</span></p>
<p>else</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span> =
NACK;</p>
<p>end if</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>end if</p>
<p>else</p>
<p>if <em>harq-ACK-SpatialBundlingPUCCH</em> is not provided,
<em>PDSCH-CodeBlockGroupTransmission</em> is not provided, and the UE is
configured by <em>maxNrofCodeWordsScheduledByDCI</em> with reception of
two transport blocks for the active DL BWP of serving cell <span
class="math inline">\(c\)</span>,</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span>=
HARQ-ACK information bit corresponding to a first transport block of
this cell;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span> =
HARQ-ACK information bit corresponding to a second transport block of
this cell;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>elseif <em>harq-ACK-SpatialBundlingPUCCH</em> is provided, and the UE
is configured by <em>maxNrofCodeWordsScheduledByDCI</em> with reception
of two transport blocks for the active DL BWP of serving cell <span
class="math inline">\(c\)</span>,</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span> =
binary AND operation of the HARQ-ACK information bits corresponding to
first and second transport blocks of this cell</p>
<p>if the UE receives one transport block, the UE assumes ACK for the
second transport block;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>elseif <em>PDSCH-CodeBlockGroupTransmission</em> is provided, and
<span class="math inline">\(N_{HARQ - ACK,c}^{CBG/TB,max}\)</span> CBGs
are indicated by <em>maxCodeBlockGroupsPerTransportBlock</em> for
serving cell <span class="math inline">\(c\)</span>,</p>
<p>Set <span class="math inline">\(n_{CBG} = 0\)</span>- CBG index</p>
<p>while <span class="math inline">\(n_{CBG} &lt; N_{HARQ -
ACK,c}^{CBG/TB,max}\)</span></p>
<blockquote>
<p><span class="math inline">\({\widetilde{o}}_{j +
n_{CBG}}^{ACK}\)</span> = HARQ-ACK information bit corresponding to CBG
<span class="math inline">\(n_{CBG}\)</span> of the first transport
block;</p>
<p>if the UE is configured by <em>maxNrofCodeWordsScheduledByDCI</em>
with reception of two transport blocks for the active DL BWP of serving
cell <span class="math inline">\(c\)</span></p>
<p><span class="math inline">\({\widetilde{o}}_{j + n_{CBG} + N_{HARQ -
ACK,c}^{CBG/TB,max}}^{ACK}\)</span> = HARQ-ACK information bit
corresponding to CBG <span class="math inline">\(n_{CBG}\)</span> of the
second transport block;</p>
<p>end if</p>
<p><span class="math inline">\(n_{CBG} = n_{CBG} + 1\)</span>;</p>
</blockquote>
<p>end while</p>
<p><span class="math inline">\(j = j + N_{TB,c}^{DL} \bullet N_{HARQ -
ACK,c}^{CBG/TB,max}\)</span>, where <span
class="math inline">\(N_{TB,c}^{DL}\)</span> is the value of
<em>maxNrofCodeWordsScheduledByDCI</em> for the active DL BWP of serving
cell <span class="math inline">\(c\)</span>;</p>
<p>else</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span> =
HARQ-ACK information bit of serving cell <span
class="math inline">\(c\)</span>;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>end if</p>
<p>end if</p>
<p><span class="math inline">\(m = m + 1\)</span>;</p>
<p>end while</p>
<p><span class="math inline">\(c = c + 1\)</span>;</p>
<p>end while</p>
<p>If <span class="math inline">\(O_{ACK} + O_{SR} + O_{CSI} \leq
11\)</span>, the UE determines a number of HARQ-ACK information bits
<span class="math inline">\(n_{HARQ - ACK}\)</span> for obtaining a
transmission power for a PUCCH, as described in clause 7.2.1, as <span
class="math inline">\(n_{HARQ - ACK} = \sum_{c = 0}^{N_{cells}^{DL} -
1}{\sum_{m = 0}^{M_{c} - 1}{N_{m,c}^{received} + \sum_{c =
0}^{N_{cells}^{DL} - 1}{\sum_{m = 0}^{M_{c} -
1}N_{m,c}^{received,CBG}}}}\)</span> where</p>
<p>- <span class="math inline">\(N_{\text{cells}}^{\text{DL}}\)</span>
are all DL cells where the UE is configured to receive unicast or
multicast PDSCHs</p>
<p>- <span class="math inline">\(M_{c}\)</span> is the cardinality for
the union of all sets <span class="math inline">\(M_{A,c}\)</span> of
occasions for unicast or multicast PDSCH receptions or SPS PDSCH
releases for serving cell <span class="math inline">\(c\)</span></p>
<p>- <span class="math inline">\(N_{m,c}^{received}\)</span> is the
number of transport blocks the UE receives in PDSCH reception occasion
<span class="math inline">\(m\)</span> for serving cell <span
class="math inline">\(c\)</span> if
<em>harq-ACK-SpatialBundlingPUCCH</em> and
<em>PDSCH-CodeBlockGroupTransmission</em> are not provided, or the
number of transport blocks the UE receives in PDSCH reception occasion
<span class="math inline">\(m\)</span> for serving cell <span
class="math inline">\(c\)</span> if
<em>PDSCH-CodeBlockGroupTransmission</em> is provided and the PDSCH
reception is scheduled by a DCI format that does not support CBG-based
PDSCH receptions, or the number of PDSCH receptions if
<em>harq-ACK-SpatialBundlingPUCCH</em> is provided or SPS PDSCH release
or TCI state update in PDSCH reception occasion <span
class="math inline">\(m\)</span> for serving cell <span
class="math inline">\(c\)</span> and the UE reports corresponding
HARQ-ACK information in the PUCCH.</p>
<p>- If <em>timeDomainHARQ-BundlingType1</em> is provided for serving
cell <span class="math inline">\(c\)</span> and for a DCI format
indicating a TDRA row that includes more than one SLIV entry on the
serving cell <span class="math inline">\(c\)</span>, the UE considers as
received only a PDSCH associated with the last SLIV.</p>
<p>- <span class="math inline">\(N_{m,c}^{received,CBG}\)</span> is the
number of CBGs the UE receives in a PDSCH reception occasion <span
class="math inline">\(m\)</span> for serving cell <span
class="math inline">\(c\)</span> if
<em>PDSCH-CodeBlockGroupTransmission</em> is provided and the PDSCH
reception is scheduled by a DCI format that supports CBG-based PDSCH
receptions and the UE reports corresponding HARQ-ACK information in the
PUCCH.</p>
<h4
id="type-1-harq-ack-codebook-in-physical-uplink-shared-channel">9.1.2.2
Type-1 HARQ-ACK codebook in physical uplink shared channel</h4>
<p>If a UE is not provided <em>pdsch-HARQ-ACK-Codebook =
'semi-static'</em> for unicast or multicast HARQ-ACK information, the UE
does not multiplex the unicast or multicast HARQ-ACK information in the
PUSCH transmission, respectively.</p>
<p>If a UE is provided <em>pdsch-HARQ-ACK-Codebook = 'semi-static'</em>
for unicast and/or multicast HARQ-ACK information, and would multiplex
HARQ-ACK information in a PUSCH transmission that is not scheduled by a
DCI format or is scheduled by a DCI format that does not include a DAI
field, then</p>
<p>- if the UE has not received any PDSCH providing a transport block
having enabled HARQ-ACK information report or SPS PDSCH release or TCI
state update that the UE multiplexes corresponding HARQ-ACK information
in the PUSCH, based on a value of a respective PDSCH-to-HARQ_feedback
timing indicator field in a DCI format scheduling the PDSCH reception or
the SPS PDSCH release or the TCI state update, or on the value of
<em>dl-DataToUL-ACK</em> or <em>dl-DataToUL-ACK-r16</em> or
<em>dl-DataToUL-ACK-r17</em> or <em>dl-DataToUL-ACK-v1700</em> if the
PDSCH-to-HARQ_feedback timing indicator field is not present in DCI
format 1_1 or on the value of <em>dl-DataToUL-ACK-DCI-1-2</em> or
<em>dl-DataToUL-ACK-DCI-1-2-r17</em> if the PDSCH-to-HARQ_feedback
timing indicator field is not present in DCI format 1_2, or on the value
of <em>dl-DataToUL-ACK</em> if the PDSCH-to-HARQ_feedback timing
indicator field is not present in DCI format 4_2, in any of the <span
class="math inline">\(M_{c}\)</span> occasions for candidate PDSCH
receptions by a DCI format or SPS PDSCH on any serving cell <span
class="math inline">\(c\)</span>, as described in clause 9.1.2.1, the UE
does not multiplex HARQ-ACK information in the PUSCH transmission</p>
<p>- else the UE generates the HARQ-ACK codebook as described in clause
9.1.2.1, except that <em>harq-ACK-SpatialBundlingPUCCH</em> is replaced
by <em>harq-ACK-SpatialBundlingPUSCH</em>, unless the UE receives only
one of</p>
<p>- a SPS PDSCH release indicated by DCI format 1_0 or by DCI format
4_1, with counter DAI field value of 1, or</p>
<p>- SPS PDSCH(s) with transport blocks having enabled HARQ-ACK
information report, or</p>
<p>- a PDSCH providing a transport block having enabled HARQ-ACK
information report and scheduled by a DCI format 1_0 or by DCI format
4_1 with a counter DAI field value of 1, on the PCell</p>
<p>in the <span class="math inline">\(M_{c}\)</span> occasions for
candidate PDSCH receptions in which case the UE generates HARQ-ACK
information only for the SPS PDSCH release or only for the PDSCH
reception as described in clause 9.1.2.</p>
<p>A UE sets to NACK value in the HARQ-ACK codebook any HARQ-ACK
information corresponding to PDSCH reception or SPS PDSCH release or TCI
state update that the UE detects in a PDCCH monitoring occasion that
starts after a PDCCH monitoring occasion where the UE detects a DCI
format scheduling the PUSCH transmission.</p>
<p>A UE does not expect to detect a DCI format switching a DL BWP within
<span class="math inline">\(N_{2}\)</span> symbols prior to a first
symbol of a PUSCH transmission where the UE multiplexes HARQ-ACK
information, where <span class="math inline">\(N_{2}\)</span> is defined
in [6, TS 38.214].</p>
<p>If a UE multiplexes HARQ-ACK information in a PUSCH transmission that
is scheduled by DCI format that includes a DAI field, and</p>
<p>- is not provided <em>fdmed-ReceptionMulticast</em> and is provided
<em>pdsch-HARQ-ACK-Codebook = 'semi-static'</em> for both unicast and
multicast HARQ-ACK information, or</p>
<p>- is provided <em>pdsch-HARQ-ACK-Codebook = 'semi-static'</em> only
for one of unicast and multicast HARQ-ACK information</p>
<p>the UE generates the HARQ-ACK codebook as described in clause 9.1.2.1
when a value of the DAI field is <span
class="math inline">\(V_{\text{T-DAI}}^{\text{UL}} = 1\)</span> except
that <em>harq-ACK-SpatialBundlingPUCCH</em> is replaced by
<em>harq-ACK-SpatialBundlingPUSCH</em>. The UE does not generate a
HARQ-ACK codebook for multiplexing in the PUSCH transmission when <span
class="math inline">\(V_{\text{T-DAI}}^{\text{UL}} = 0\)</span> unless
the UE receives only one of</p>
<p>- a SPS PDSCH release indicated by DCI format 1_0 or by DCI format
4_1, with counter DAI field value of 1, or</p>
<p>- SPS PDSCH(s) with transport blocks having enabled associated
HARQ-ACK information reports,</p>
<p>- a PDSCH providing a transport block having enabled HARQ-ACK
information report and scheduled by a DCI format 1_0 or by DCI format
4_1, or only a TCI state update, with counter DAI field value of 1 on
the PCell,</p>
<p>in the <span class="math inline">\(M_{c}\)</span> occasions for
candidate PDSCH receptions in which case the UE generates HARQ-ACK
information only for the SPS PDSCH release or only for the PDSCH
reception as described in clause 9.1.2.</p>
<p><span class="math inline">\(V_{\text{T-DAI}}^{\text{UL}} = 0\)</span>
if the PUSCH is scheduled by a DCI format that includes a DAI field and
the DAI field is set to '0'; otherwise, <span
class="math inline">\(V_{\text{T-DAI}}^{\text{UL}} = 1\)</span>.</p>
<p>If a UE is provided <em>fdmed-ReceptionMulticast</em> and is provided
<em>pdsch-HARQ-ACK-Codebook = 'semi-static'</em> for both unicast and
multicast HARQ-ACK information, the UE generates the HARQ-ACK codebook
as described in clause 9.1.2.1, except that
<em>harq-ACK-SpatialBundlingPUCCH</em> is replaced by
<em>harq-ACK-SpatialBundlingPUSCH</em></p>
<p>- for the first set <span class="math inline">\(S_{\text{U}}\)</span>
of <span class="math inline">\(N_{\text{cells}}^{\text{DL,U}}\)</span>
serving cells if a value <span
class="math inline">\(V_{\text{T-DAI}}^{\text{UL,U}}\)</span> of the DAI
field associated with unicast HARQ-ACK information is <span
class="math inline">\(V_{\text{T-DAI}}^{\text{UL,U}} = 1\)</span> [5, TS
38.212]</p>
<p>- for the second set <span
class="math inline">\(S_{\text{M}}\)</span> of <span
class="math inline">\(N_{\text{cells}}^{\text{DL,M}}\)</span> serving
cells if a value <span
class="math inline">\(V_{\text{T-DAI}}^{\text{UL,M}}\)</span> of the DAI
field associated with multicast HARQ-ACK information is <span
class="math inline">\(V_{\text{T-DAI}}^{\text{UL,M}} = 1\)</span> [5, TS
38.212]</p>
<p>The UE does not generate unicast or multicast HARQ-ACK information
for multiplexing in the PUSCH transmission when <span
class="math inline">\(V_{\text{T-DAI}}^{\text{UL,U}} = 0\)</span> and
<span class="math inline">\(V_{\text{T-DAI}}^{\text{UL,M}} = 0\)</span>,
unless the UE receives only one of</p>
<p>- either a unicast SPS PDSCH release indicated by DCI format 1_0, or
a multicast SPS PDSCH release indicated by DCI format 4_1, with counter
DAI field value of 1, or</p>
<p>- unicast SPS PDSCH(s) or multicast SPS PDSCH(s) having enabled
associated HARQ-ACK information reports, or</p>
<p>- either a PDSCH providing a transport block having enabled HARQ-ACK
information report and scheduled by either a DCI format 1_0 or a DCI
format 4_1 with counter DAI field value of 1, on the PCell,</p>
<p>in the <span class="math inline">\(M_{c}\)</span> occasions for
candidate PDSCH receptions in which case the UE generates only the
corresponding unicast or multicast HARQ-ACK information only for the SPS
PDSCH release or only for the PDSCH reception as described in clause
9.1.2.</p>
<p><span class="math inline">\(V_{\text{T-DAI}}^{\text{UL,U}} =
0\)</span> if the corresponding value of the DAI field is set to '0';
otherwise, <span class="math inline">\(V_{\text{T-DAI}}^{\text{UL,U}} =
1\)</span>. <span class="math inline">\(V_{\text{T-DAI}}^{\text{UL,M}} =
0\)</span> if the corresponding value of the DAI field is set to '0';
otherwise, <span class="math inline">\(V_{\text{T-DAI}}^{\text{UL,M}} =
1\)</span> [5, TS 38.212].</p>
<h3 id="type-2-harq-ack-codebook-determination">9.1.3 Type-2 HARQ-ACK
codebook determination </h3>
<p>This clause applies if the UE is configured with
<em>pdsch-HARQ-ACK-Codebook = dynamic</em> or with
<em>pdsch-HARQ-ACK-Codebook-r16</em>. Unless stated otherwise, a
PDSCH-to-HARQ_feedback timing indicator field provides an applicable
value. In clauses 9.1.3, 9.1.3.1, 9.1.3.2 and 9.1.3.3, if the UE is
provided for only one of <em>pdsch-HARQ-ACK-Codebook = dynamic</em> or
<em>pdsch-HARQ-ACK-Codebook-r16</em> for unicast HARQ-ACK-ACK codebook,
or <em>pdsch-HARQ-ACK-Codebook = dynamic</em> for multicast HARQ-ACK
codebook, the Type-2 HARQ-ACK codebook is generated considering only one
of respective unicast or multicast configurations for PDSCH receptions
or for PDCCH monitoring for detection of DCI formats.</p>
<p>A UE does not expect to multiplex in a Type-2 HARQ-ACK codebook
HARQ-ACK information that is in response to a detection of a DCI format
that does not include a counter DAI field.</p>
<p>If a UE is provided <em>downlinkHARQ-FeedbackDisabled</em> indicating
disabled HARQ-ACK information for a HARQ process associated with a
transport block for PDCCH monitoring occasion <span
class="math inline">\(m\)</span> or for SPS PDSCH receptions on serving
cell <span class="math inline">\(c\)</span>, the UE does not multiplex a
HARQ-ACK information bit corresponding to the transport block in a
Type-2 HARQ-ACK codebook and does not consider the transport block as
received in the determination of <span
class="math inline">\(N_{m,c}^{received}\)</span> or of <span
class="math inline">\(N_{\text{SPS,c}}\)</span> in clause 9.1.3.1. If
the UE is also provided <em>PDSCH-CodeBlockGroupTransmission</em>, the
UE does not multiplex HARQ-ACK information bits corresponding to CBGs of
the transport block in the Type-2 HARQ-ACK codebook and does not
consider the CBGs as received in the determination of <span
class="math inline">\(N_{m,c}^{received,CBG}\)</span> in clause 9.1.3.1.
If the UE is also provided <em>harq-feedbackEnablingforSPSactive</em> =
'<em>enabled'</em>, the UE considers a HARQ process associated with a
transport block in a first SPS PDSCH reception, after an activation of
SPS PDSCH receptions, to have enabled HARQ-ACK information and the UE
provides a HARQ-ACK information bit according to a decoding outcome for
the transport block in the first SPS PDSCH reception.</p>
<p>If a UE is indicated to not provide multicast HARQ-ACK information,
as described in clause 18, associated with PDCCH monitoring occasion
<span class="math inline">\(m\)</span> or for SPS PDSCH receptions on
serving cell <span class="math inline">\(c\)</span>, the UE does not
multiplex corresponding HARQ-ACK information bits in a Type-2 HARQ-ACK
codebook and does not consider any transport blocks as received in the
determination of <span class="math inline">\(N_{m,c}^{received}\)</span>
or of <span class="math inline">\(N_{\text{SPS,c}}\)</span> in clause
9.1.3.1.</p>
<p>If a UE receives a first DCI format that the UE detects in a first
PDCCH monitoring occasion and includes a PDSCH-to-HARQ_feedback timing
indicator field providing an inapplicable value from
<em>dl-DataToUL-ACK-r16</em> or <em>dl-DataToUL-ACK-r17</em>,</p>
<p>- if the UE detects a second DCI format, the UE multiplexes the
corresponding HARQ-ACK information in a PUCCH or PUSCH transmission in a
slot that is indicated by a value of a PDSCH-to-HARQ_feedback timing
indicator field in the second DCI format, where</p>
<p>- if the UE is not provided <em>pdsch-HARQ-ACK-Codebook-r16</em>, the
UE detects the second DCI format in any PDCCH monitoring occasion after
the first one, and where the slot indicated by the value of the
PDSCH-to-HARQ_feedback timing indicator field in the second DCI format
is no later than a slot for HARQ-ACK information in response to a SPS
PDSCH reception, if any, received after the PDSCHs scheduled by the
first DCI format.</p>
<p>- if the UE is provided <em>pdsch-HARQ-ACK-Codebook-r16</em>, the UE
detects the second DCI format in any PDCCH monitoring occasion after the
first one, and the second DCI format indicates a HARQ-ACK information
report for a same PDSCH group index as indicated by the first DCI format
as described in clause 9.1.3.3, and where the slot indicated by the
value of the PDSCH-to-HARQ_feedback timing indicator field in the second
DCI format is no later than a slot for HARQ-ACK information in response
to a SPS PDSCH reception, if any, received after the PDSCHs scheduled by
the first DCI format.</p>
<p>- if the UE is provided <em>pdsch-HARQ-ACK-Codebook-r16</em>, the UE
receives the second DCI format later than the slot for HARQ-ACK
information in response to a SPS PDSCH reception received after the
PDSCHs scheduled by the first DCI format, and the second DCI format
indicates a HARQ-ACK information report for a same PDSCH group index as
indicated by the first DCI format as described in clause 9.1.3.3.</p>
<p>- if the UE is provided <em>pdsch-HARQ-ACK-OneShotFeedback</em>, the
first DCI format does not have associated HARQ-ACK information without
scheduling a PDSCH reception or TCI state update, the UE detects the
second DCI format in any PDCCH monitoring occasion after the first one,
and the second DCI format includes a One-shot HARQ-ACK request field
with value 1, the UE includes the HARQ-ACK information in a Type-3
HARQ-ACK codebook, as described in clause 9.1.4, and where the slot
indicated by the value of the PDSCH-to-HARQ_feedback timing indicator
field in the second DCI format is no later than a slot for HARQ-ACK
information in response to a SPS PDSCH reception, if any, received after
the PDSCHs scheduled by the first DCI format.</p>
<p>- if the UE is provided <em>pdsch-HARQ-ACK-OneShotFeedback-r16</em>,
the first DCI format does not have associated HARQ-ACK information
without scheduling a PDSCH reception or TCI state update, and the UE
receives the second DCI format later than the slot for HARQ-ACK
information in response to a SPS PDSCH reception received after the
PDSCHs scheduled by the first DCI format, and the second DCI format
includes a One-shot HARQ-ACK request field with value 1, the UE includes
the HARQ-ACK information in a Type-3 HARQ-ACK codebook, as described in
clause 9.1.4.</p>
<p>- otherwise, the UE does not multiplex the corresponding HARQ-ACK
information in a PUCCH or PUSCH transmission.</p>
<h4
id="type-2-harq-ack-codebook-in-physical-uplink-control-channel">9.1.3.1
Type-2 HARQ-ACK codebook in physical uplink control channel</h4>
<p>If a UE is configured to monitor PDCCH for multicast DCI formats with
CRC scrambled by one or more G-RNTIs for multicast or G-CS-RNTIs that
the UE generates a Type-2 HARQ-ACK codebook, the UE separately applies
the procedures in this clause per G-RNTI for multicast or per G-CS-RNTI
using <em>maxNrofCodeWordsScheduledByDCI</em> in
<em>pdsch-ConfigMulticast</em> except the procedures for SPS PDSCHs and
applies the procedures in this clause using
<em>maxNrofCodeWordsScheduledByDCI</em> provided in
<em>pdsch-Config</em> for unicast DCI formats excluding the unicast DCI
format activating SPS PDSCH receptions, and determines the Type-2
HARQ-ACK codebook by concatenating the Type-2 HARQ-ACK codebook for
unicast DCI formats excluding the unicast DCI format activating SPS
PDSCH receptions, followed by the HARQ-ACK codebooks for the multicast
DCI formats in ascending order of the corresponding G-RNTI values,
followed by the HARQ-ACK codebooks for the multicast DCI formats in
ascending order of the corresponding G-CS-RNTI values excluding the
multicast DCI format activating SPS PDSCH receptions, followed by the
HARQ-ACK codebooks for unicast and multicast SPS PDSCH receptions.</p>
<p>A UE determines monitoring occasions for PDCCH with DCI format
scheduling PDSCH receptions, or having associated HARQ-ACK information
without scheduling PDSCH reception, on an active DL BWP of a serving
cell <span class="math inline">\(c\)</span>, as described in clause
10.1, and for which the UE transmits HARQ-ACK information in a same
PUCCH in slot <span class="math inline">\(n\)</span> based on</p>
<p>- PDSCH-to-HARQ_feedback timing indicator field values, or a
<em>dl-DataToUL-ACK</em>, <em>dl-DataToUL-ACK-r16</em> or
<em>dl-DataToUL-ACK-DCI-1-2</em> or <em>dl-DataToUL-ACK-r17</em> or
<em>dl-DataToUL-ACK-v1700</em> or <em>dl-DataToUL-ACK-DCI-1-2-r17</em>
value if the PDSCH-to-HARQ_feedback timing indicator field is not
present in a DCI format, for PUCCH transmission with HARQ-ACK
information in slot <span class="math inline">\(n\)</span>, as described
in clause 9.2.3, in response to PDSCH receptions, or in response to a
DCI format having associated HARQ-ACK information without scheduling
PDSCH reception</p>
<p>- slot offsets <span class="math inline">\(K_{0}\)</span> [6, TS
38.214] provided by time domain resource assignment field in a DCI
format scheduling PDSCH receptions and by
<em>pdsch-AggregationFactor</em>, or
<em>pdsch-AggregationFactor-r16</em>, or <em>repetitionNumber</em>, when
provided.</p>
<p>The set of PDCCH monitoring occasions for DCI formats scheduling
PDSCH receptions, or having associated HARQ-ACK information without
scheduling PDSCH reception, is defined as the union of PDCCH monitoring
occasions across active DL BWPs of configured serving cells. PDCCH
monitoring occasions are indexed in an ascending order of their start
times. The cardinality of the set of PDCCH monitoring occasions defines
a total number <span class="math inline">\(M\)</span> of PDCCH
monitoring occasions.</p>
<p>A value of the counter downlink assignment indicator (DAI) field in
DCI formats denotes the accumulative number of {serving cell, PDCCH
monitoring occasion}-pairs in which PDSCH receptions that provide
transport blocks with enabled HARQ-ACK information report, or HARQ-ACK
information bits that are not in response for PDSCH receptions,
associated with the DCI formats, excluding the SPS activation DCI, is
present up to the current serving cell and current PDCCH monitoring
occasion,</p>
<p>- first, if the UE indicates by <em>type2-HARQ-ACK-Codebook</em>
support for more than one PDSCH reception on a serving cell that are
scheduled from a same PDCCH monitoring occasion, in increasing order of
the PDSCH reception starting time for the same {serving cell, PDCCH
monitoring occasion} pair,</p>
<p>- second in ascending order of serving cell index, and</p>
<p>- third in ascending order of PDCCH monitoring occasion index <span
class="math inline">\(m\)</span>, where <span class="math inline">\(0
\leq m &lt; M\)</span>.</p>
<p>If, for an active DL BWP of a serving cell, the UE is not provided
<em>coresetPoolIndex</em> or is provided <em>coresetPoolIndex</em> with
value 0 for one or more first CORESETs and is provided
<em>coresetPoolIndex</em> with value 1 for one or more second CORESETs,
and is provided <em>ackNackFeedbackMode</em> = <em>joint</em>, the value
of the counter DAI is in the order of the first CORESETs and then the
second CORESETs for a same serving cell index and a same PDCCH
monitoring occasion index.</p>
<p>The value of the total DAI, when present [5, TS 38.212], in a DCI
format denotes the total number of {serving cell, PDCCH monitoring
occasion}-pair(s) in which PDSCH reception(s) that provide transport
blocks with enabled HARQ-ACK information report, or HARQ-ACK information
that does not correspond to PDSCH receptions, associated with DCI
formats, excluding the SPS activation DCI, is present, up to the current
PDCCH monitoring occasion <span class="math inline">\(m\)</span> and is
updated from PDCCH monitoring occasion to PDCCH monitoring occasion. If,
for an active DL BWP of a serving cell, the UE is not provided
<em>coresetPoolIndex</em> or is provided <em>coresetPoolIndex</em> with
value 0 for one or more first CORESETs and is provided
<em>coresetPoolIndex</em> with value 1 for one or more second CORESETs,
and is provided <em>ackNackFeedbackMode</em> = <em>joint</em>, the total
DAI value counts the {serving cell, PDCCH monitoring occasion}-pair(s)
for both the first CORESETs and the second CORESETs.</p>
<p>Denote by <span class="math inline">\(N_{C -
\text{DAI}}^{\text{DL}}\)</span> the number of bits for the counter DAI
and set <span class="math inline">\(T_{D} = 2^{N_{C -
\text{DAI}}^{\text{DL}}}\)</span>. Denote by <span
class="math inline">\(V_{C - \text{DAI,c,m}}^{\text{DL}}\)</span> the
value of the counter DAI in a DCI format scheduling PDSCH reception, or
having associated HARQ-ACK information without scheduling PDSCH
reception, on serving cell <span class="math inline">\(c\)</span> in
PDCCH monitoring occasion <span class="math inline">\(m\)</span>
according to Table 9.1.3-1 or Table 9.1.3-1A. Denote by <span
class="math inline">\(V_{T - \text{DAI,m}}^{\text{DL}}\)</span> the
value of the total DAI in a DCI format in PDCCH monitoring occasion
<span class="math inline">\(m\)</span> according to Table 9.1.3-1. The
UE assumes a same value of total DAI in all DCI formats that include a
total DAI field in PDCCH monitoring occasion <span
class="math inline">\(m\)</span>. A UE does not expect to multiplex, in
a same Type-2 HARQ-ACK codebook, HARQ-ACK information that is in
response to detection of DCI formats with different number of bits for
the counter DAI field.</p>
<p>If the UE transmits HARQ-ACK information in a PUCCH in slot <span
class="math inline">\(n\)</span> and for any PUCCH format, the UE
determines the <span class="math inline">\({\widetilde{o}}_{0}^{ACK},\
{\widetilde{o}}_{1}^{ACK},\cdots,{\widetilde{o}}_{O_{ACK} -
1}^{ACK}\)</span>, for a total number of <span
class="math inline">\(O_{ACK}\)</span> HARQ-ACK information bits,
according to the following pseudo-code:</p>
<p>Set <span class="math inline">\(m = 0\)</span> – PDCCH, with DCI
format scheduling PDSCH reception, or having associated HARQ-ACK
information without scheduling a PDSCH reception, monitoring occasion
index: lower index corresponds to earlier PDCCH monitoring occasion</p>
<p>Set <span class="math inline">\(j = 0\)</span></p>
<p>Set <span class="math inline">\(V_{temp} = 0\)</span></p>
<p>Set <span class="math inline">\(V_{temp2} = 0\)</span></p>
<p>Set <span class="math inline">\(V_{s} = \varnothing\)</span></p>
<p>Set <span class="math inline">\(N_{cells}^{\text{DL}}\)</span> to the
number of serving cells configured by higher layers for the UE</p>
<p>- if, for an active DL BWP of a serving cell, the UE is not provided
<em>coresetPoolIndex</em> or is provided <em>coresetPoolIndex</em> with
value 0 for one or more first CORESETs and is provided
<em>coresetPoolIndex</em> with value 1 for one or more second CORESETs,
and is provided <em>ackNackFeedbackMode = joint,</em> the serving cell
is counted two times where the first time corresponds to the first
CORESETs and the second time corresponds to the second CORESETs</p>
<p>- if the UE indicates <em>type2-HARQ-ACK-Codebook</em> and receives a
number <span class="math inline">\(N_{PDSCH,\ c}^{\text{m}} &gt;
1\)</span> of PDSCHs on a serving cell <em>c</em> that are scheduled by
DCI formats in PDCCH receptions at a same PDCCH monitoring occasion
<em>m</em>, the serving cell <em>c</em> is counted <span
class="math inline">\(N_{PDSCH,\ c}^{\text{m}}\)</span> times for PDCCH
monitoring occasion <em>m</em> in increasing order of the PDSCH
reception starting time</p>
<p>Set <span class="math inline">\(M\)</span> to the number of PDCCH
monitoring occasion(s)</p>
<p>while <span class="math inline">\(m &lt; M\)</span></p>
<p>Set <span class="math inline">\(c = 0\)</span> – serving cell index:
lower indexes correspond to lower RRC indexes of corresponding cell</p>
<p>while <span class="math inline">\({c &lt;
N}_{cells}^{\text{DL}}\)</span></p>
<p>if PDCCH monitoring occasion <span class="math inline">\(m\)</span>
is before an active DL BWP change on serving cell <span
class="math inline">\(c\)</span> or an active UL BWP change on the
serving cell of PUCCH transmission if the UE is provided
<em>pucch-sSCellDyn</em> or <em>pucch-sSCellDynDCI-1-2</em>, or an
active UL BWP change on the PCell if the UE is not provided
<em>pucch-sSCellDyn</em> and <em>pucch-sSCellDynDCI-1-2,</em> and an
active DL BWP change is not triggered in PDCCH monitoring occasion <span
class="math inline">\(m\)</span></p>
<p><span class="math inline">\(c = c + 1\)</span>;</p>
<p>else</p>
<p>if there is a PDSCH providing a transport block for a HARQ process
with enabled HARQ-ACK information on serving cell <span
class="math inline">\(c\)</span> associated with PDCCH in PDCCH
monitoring occasion <span class="math inline">\(m\)</span>, or there is
a PDCCH providing a DCI format associated with HARQ-ACK information
without scheduling PDSCH reception on serving cell <span
class="math inline">\(c\)</span></p>
<p>if <span class="math inline">\(V_{C - \text{DAI},c,m}^{\text{DL}}
\leq V_{temp}\)</span></p>
<blockquote>
<p><span class="math inline">\(j = j + 1\)</span></p>
</blockquote>
<p>end if</p>
<p><span class="math inline">\(V_{temp} = V_{C -
\text{DAI},c,m}^{\text{DL}}\)</span></p>
<p>if <span class="math inline">\(V_{\text{T-DAI},m}^{\text{DL}} =
\varnothing\)</span></p>
<blockquote>
<p><span class="math inline">\(V_{temp2} = V_{C -
\text{DAI},c,m}^{\text{DL}}\)</span></p>
</blockquote>
<p>else</p>
<blockquote>
<p><span class="math inline">\(V_{temp2} = V_{T -
\text{DAI},m}^{\text{DL}}\)</span></p>
</blockquote>
<p>end if</p>
<p>if <em>harq-ACK-SpatialBundlingPUCCH</em> is not provided and the UE
is configured by <em>maxNrofCodeWordsScheduledByDCI</em> with reception
of two transport blocks for at least one configured DL BWP of at least
one serving cell,</p>
<blockquote>
<p><span class="math inline">\({\widetilde{o}}_{2 \cdot T_{D} \cdot j +
2\left( V_{C - DAI,c,m}^{DL} - 1 \right)}^{ACK}\)</span> = HARQ-ACK
information bit corresponding to the first transport block of this
cell</p>
<p><span class="math inline">\({\widetilde{o}}_{2 \cdot T_{D} \cdot j +
2\left( V_{C - DAI,c,m}^{DL} - 1 \right) + 1}^{ACK}\)</span> = HARQ-ACK
information bit corresponding to the second transport block of this
cell</p>
</blockquote>
<p><span class="math display">\[V_{s} = V_{s} \cup \left\{ 2 \cdot T_{D}
\cdot j + 2\left( V_{C - \text{DAI},c,m}^{\text{DL}} - 1
\right),\mspace{6mu} 2 \cdot T_{D} \cdot j + 2\left( V_{C -
\text{DAI},c,m}^{\text{DL}} - 1 \right) + 1 \right\}\]</span></p>
<p>elseif <em>harq-ACK-SpatialBundlingPUCCH</em> is provided to the UE
and <span class="math inline">\(m\)</span> is a monitoring occasion for
PDCCH with a DCI format that supports PDSCH reception with two transport
blocks and the UE is configured by
<em>maxNrofCodeWordsScheduledByDCI</em> with reception of two transport
blocks in at least one configured DL BWP of at least one serving
cell,</p>
<blockquote>
<p><span class="math inline">\({\widetilde{o}}_{T_{D} \cdot j + V_{C -
\text{DAI},c,m}^{\text{DL}} - 1}^{ACK}\)</span> = binary AND operation
of the HARQ-ACK information bits corresponding to the first and second
transport blocks of this cell</p>
<p><span class="math inline">\(V_{s} = V_{s} \cup \left\{ T_{D} \cdot j
+ V_{C - \text{DAI},c,m}^{\text{DL}} - 1 \right\}\)</span></p>
</blockquote>
<p>else</p>
<blockquote>
<p><span class="math inline">\({\widetilde{o}}_{T_{D} \cdot j + V_{C -
DAI,c,m}^{DL} - 1}^{ACK}\)</span> = HARQ-ACK information bit of this
cell</p>
<p><span class="math inline">\(V_{s} = V_{s} \cup \left\{ T_{D} \cdot j
+ V_{C - \text{DAI},c,m}^{\text{DL}} - 1 \right\}\)</span></p>
</blockquote>
<p>end if</p>
<p>end if</p>
<p><span class="math inline">\(c = c + 1\)</span></p>
<p>end if</p>
<p>end while</p>
<p><span class="math inline">\(m = m + 1\)</span></p>
<p>end while</p>
<p><span class="math inline">\(V_{temp} = \left( j\ mod\left(
\frac{4}{T_{D}} \right) \right) \times \left( \frac{4}{T_{D}} \right) +
V_{temp}\)</span></p>
<p>if UE does not set <span class="math inline">\(V_{temp2} = V_{T -
DAI}^{UL}\)</span> and <span class="math inline">\(T_{D} =
2\)</span></p>
<p><span class="math inline">\(V_{temp2} = V_{temp}\)</span></p>
<p>end if</p>
<p><span class="math inline">\(j = \left\lfloor \frac{j \times T_{D}}{4}
\right\rfloor\)</span></p>
<p>if <span class="math inline">\(V_{temp2} &lt; V_{temp}\)</span></p>
<p><span class="math inline">\(j = j + 1\)</span></p>
<p>end if</p>
<p>if <em>harq-ACK-SpatialBundlingPUCCH</em> is not provided to the UE
and the UE is configured by <em>maxNrofCodeWordsScheduledByDCI</em> with
reception of two transport blocks for at least one configured DL BWP of
a serving cell,</p>
<p><span class="math inline">\(O^{ACK} = 2 \cdot \left( 4 \cdot j +
V_{temp2} \right)\)</span></p>
<p>else</p>
<p><span class="math inline">\(O^{ACK} = 4 \cdot j +
V_{temp2}\)</span></p>
<p>end if</p>
<p><span class="math inline">\({\widetilde{o}}_{i}^{ACK} = NACK\)</span>
for any <span class="math inline">\(i \in \left\{ 0,1,\cdots,O^{ACK} - 1
\right\}\backslash V_{s}\)</span></p>
<p>If a UE is configured to receive SPS PDSCH and the UE multiplexes
HARQ-ACK information for one activated SPS PDSCH reception that provides
transport block with enabled HARQ-ACK information report, including the
ones associated with the corresponding activation DCI, in the PUCCH in
slot <span class="math inline">\(n\)</span>, the UE generates one
HARQ-ACK information bit associated with the SPS PDSCH reception and
appends it to the <span class="math inline">\(O^{ACK}\)</span> HARQ-ACK
information bits.</p>
<p>If a UE is configured to receive SPS PDSCH and the UE multiplexes
HARQ-ACK information for multiple activated SPS PDSCH receptions,
including the ones associated with the corresponding activation DCI and
excluding the ones that provide only transport blocks with disabled
HARQ-ACK information report, in the PUCCH in slot <span
class="math inline">\(n\)</span>, the UE generates the HARQ-ACK
information as described in clause 9.1.2 and appends it to the <span
class="math inline">\(O^{ACK}\)</span> HARQ-ACK information bits.</p>
<p>The UE generates HARQ-ACK information with ACK value in response to a
detection of a DCI format that does not trigger a Type-3 HARQ-ACK
codebook report and has associated HARQ-ACK information without
scheduling a PDSCH reception.</p>
<p>For a PDCCH monitoring occasion with DCI format scheduling PDSCH
reception, or having associated HARQ-ACK information without scheduling
a PDSCH reception, in the active DL BWP of a serving cell, when a UE
receives a PDSCH with one transport block, or detects a DCI format
having associated HARQ-ACK information without scheduling PDSCH
reception, and the value of <em>maxNrofCodeWordsScheduledByDCI</em> is 2
for at least one configured DL BWP of at least one serving cell, the
HARQ-ACK information is associated with the first transport block and
the UE generates a NACK for the second transport block if
<em>harq-ACK-SpatialBundlingPUCCH</em> is not provided and generates
HARQ-ACK information with value of ACK for the second transport block if
<em>harq-ACK-SpatialBundlingPUCCH</em> is provided.</p>
<p>If a UE is</p>
<p>- not provided <em>PDSCH-CodeBlockGroupTransmission</em> for any
serving cell, and</p>
<p>- not provided <em>pdsch-TimeDomainAllocationListForMultiPDSCH</em>
for any serving cell, or provided <em>nrofHARQ-BundlingGroups</em> with
value of 1 for any serving cell provided
<em>pdsch-TimeDomainAllocationListForMultiPDSCH</em></p>
<p>or</p>
<p>- for PDSCH receptions scheduled by a DCI format that does not
support CBG-based PDSCH receptions and does not schedule more than one
PDSCH reception, or</p>
<p>- for PDSCH receptions scheduled by a DCI format on a serving cell
when the UE is provided <em>nrofHARQ-BundlingGroups</em> with value of
1, or</p>
<p>- for SPS PDSCH reception, or</p>
<p>- for a DCI format having associated HARQ-ACK information without
scheduling PDSCH reception, and</p>
<p>if <span class="math inline">\(O_{\text{ACK}} + O_{\text{SR}} +
O_{\text{CSI}} \leq 11\)</span>, the UE determines a number of HARQ-ACK
information bits <span
class="math inline">\(n_{\text{HARQ-ACK}}\)</span> for obtaining a
transmission power for a PUCCH, as described in clause 7.2.1, as</p>
<p><span class="math inline">\(n_{\text{HARQ-ACK}} =
n_{\text{HARQ-ACK,TB}} = \left( \left(
V_{\text{DAI},m_{\text{last}}}^{\text{DL}} - \sum_{c =
0}^{N_{\text{cells}}^{\text{DL}} - 1}U_{\text{DAI,}c} \right){mod}\left(
T_{D} \right) \right)N_{\text{TB,}\max}^{\text{DL}} + \sum_{c =
0}^{N_{\text{cells}}^{\text{DL}} - 1}{\left( \sum_{m = 0}^{M -
1}{N_{m,c}^{\text{received}} + N_{\text{SPS},c}} \right) + \sum_{g =
0}^{G - 1}\left( \left( \left(
V_{\text{DAI},m_{\text{last}},g}^{\text{DL}} - \sum_{c =
0}^{N_{\text{cells,}g}^{\text{DL}} - 1}U_{\text{DAI},c,g}
\right){mod}\left( T_{D,g} \right)
\right)N_{\text{TB,}max,g}^{\text{DL}} + \sum_{c =
0}^{N_{\text{cells,}g}^{\text{DL}} - 1}\left( \sum_{m = 0}^{M_{g} -
1}{N_{m,c,g}^{\text{received}} + N_{\text{SPS},c,g}} \right)
\right)}\)</span></p>
<p>where</p>
<p>- <span class="math inline">\(N_{cells}^{\text{DL}}\)</span> is a
number of serving cells where the UE is configured to receive unicast
PDSCHs</p>
<p>- <span class="math inline">\(N_{cells,g}^{\text{DL}}\)</span> is a
number of serving cells where the UE is configured to receive multicast
PDSCHs for a G-RNTI <span class="math inline">\(g\)</span> for multicast
or a G-CS-RNTI <span class="math inline">\(g\)</span></p>
<p>- <span class="math inline">\(G\)</span> is a total number of G-RNTIs
for multicast or G-CS-RNTIs configured to the UE</p>
<p>- <span class="math inline">\(M\)</span> is the number of PDCCH
monitoring occasions for unicast DCI formats</p>
<p>- <span class="math inline">\(M_{g}\)</span> is the number of PDCCH
monitoring occasions for multicast DCI formats with CRC scrambled by
G-RNTI <span class="math inline">\(g\)</span> for multicast or G-CS-RNTI
<span class="math inline">\(g\)</span></p>
<p>- <span class="math inline">\(T_{D} = 2^{N_{C -
\text{DAI}}^{\text{DL}}}\)</span> where <span class="math inline">\(N_{C
- \text{DAI}}^{\text{DL}}\)</span> the number of bits for the counter
DAI field in unicast DCI formats</p>
<p>- <span class="math inline">\(T_{D,g} = 2^{N_{C -
\text{DAI,}g}^{\text{DL}}}\)</span> where <span
class="math inline">\(N_{C - \text{DAI,}g}^{\text{DL}}\)</span> the
number of bits for the counter DAI field in multicast DCI formats with
CRC scrambled by G-RNTI <span class="math inline">\(g\)</span> for
multicast or G-CS-RNTI <span class="math inline">\(g\)</span></p>
<p>- if <span class="math inline">\(N_{cells}^{\text{DL}} = 1\)</span>,
<span class="math inline">\(V_{DAI,m_{last}}^{\text{DL}}\)</span> is the
value of the counter DAI in the last DCI format scheduling PDSCH
reception or having associated HARQ-ACK information without scheduling
PDSCH reception, that the UE detects within the <span
class="math inline">\(M\)</span> PDCCH monitoring occasions.</p>
<p>- if <span class="math inline">\(N_{cells,g}^{\text{DL}} =
1\)</span>, <span
class="math inline">\(V_{DAI,m_{last,g}}^{\text{DL}}\)</span> is the
value of the counter DAI in the last multicast DCI format with G-RNTI
<span class="math inline">\(g\)</span> for multicast, or G-CS-RNTI <span
class="math inline">\(g\)</span>, scheduling PDSCH reception or having
associated HARQ-ACK information without scheduling a PDSCH reception,
that the UE detects within the <span
class="math inline">\(M_{g}\)</span> PDCCH monitoring occasions</p>
<p>- if <span class="math inline">\(N_{cells}^{\text{DL}} &gt;
1\)</span> or if <span class="math inline">\(N_{cells,g}^{\text{DL}}
&gt; 1\)</span></p>
<blockquote>
<p>- if the UE does not detect any DCI format that includes a total DAI
field in a last PDCCH monitoring occasion within the <span
class="math inline">\(M\)</span> or <span
class="math inline">\(M_{g}\)</span> PDCCH monitoring occasions where
the UE detects at least one DCI format scheduling PDSCH reception, or
having associated HARQ-ACK information without scheduling PDSCH
reception, for any serving cell <span class="math inline">\(c\)</span>,
<span class="math inline">\(V_{DAI,m_{last}}^{\text{DL}}\)</span> or
<span class="math inline">\(V_{DAI,m_{last,g}}^{\text{DL}}\)</span>,
respectively, is the value of the counter DAI in a last DCI format the
UE detects in the last PDCCH monitoring occasion</p>
</blockquote>
<p>- if the UE detects at least one DCI format that includes a total DAI
field in a last PDCCH monitoring occasion within the <span
class="math inline">\(M\)</span> or <span
class="math inline">\(M_{g}\)</span>, for G-RNTI <span
class="math inline">\(g\)</span> for multicast or G-CS-RNTI <span
class="math inline">\(g\)</span>, PDCCH monitoring occasions where the
UE detects at least one DCI format scheduling PDSCH reception, or having
associated HARQ-ACK information without scheduling PDSCH reception, for
any serving cell <span class="math inline">\(c\)</span>, <span
class="math inline">\(V_{DAI,m_{last}}^{\text{DL}}\)</span> or <span
class="math inline">\(V_{DAI,m_{last,g}}^{\text{DL}}\)</span>,
respectively, is the value of the total DAI in the at least one DCI
format that includes a total DAI field</p>
<p>- <span class="math inline">\(V_{DAI,m_{last}}^{\text{DL}} =
0\)</span> or <span class="math inline">\(V_{DAI,m_{last,g}}^{\text{DL}}
= 0\)</span> if the UE does not detect any DCI format scheduling PDSCH
reception, or having associated HARQ-ACK information without scheduling
PDSCH reception, for any serving cell <span
class="math inline">\(c\)</span> in any of the <span
class="math inline">\(M\)</span> or <span
class="math inline">\(M_{g}\)</span> PDCCH monitoring occasions,
respectively.</p>
<p>- <span class="math inline">\(U_{\text{DAI,c}}\)</span> or <span
class="math inline">\(U_{\text{DAI},c,g}\)</span>, for G-RNTI <span
class="math inline">\(g\)</span> for multicast or G-CS-RNTI <span
class="math inline">\(g\)</span>, is the total number of DCI formats
scheduling PDSCH receptions providing transport blocks with enabled
HARQ-ACK information, or having associated HARQ-ACK information without
scheduling a PDSCH reception, that the UE detects within the <span
class="math inline">\(M\)</span> or <span
class="math inline">\(M_{g}\)</span> PDCCH monitoring occasions,
respectively, for serving cell <span class="math inline">\(c\)</span>.
<span class="math inline">\(U_{\text{DAI,c}} = 0\)</span> or <span
class="math inline">\(U_{\text{DAI},c,g} = 0\)</span> if the UE does not
detect any DCI format scheduling PDSCH reception providing a transport
block with enabled HARQ-ACK information, or having associated HARQ-ACK
information without scheduling PDSCH reception, for serving cell <span
class="math inline">\(c\)</span> in any of the <span
class="math inline">\(M\)</span> or <span
class="math inline">\(M_{g}\)</span>, respectively, PDCCH monitoring
occasions.</p>
<p>- <span class="math inline">\(N_{TB,max}^{\text{DL}} = 2\)</span> if
the value of <em>maxNrofCodeWordsScheduledByDCI</em> is 2 for any
serving cell <span class="math inline">\(c\)</span> and
<em>harq-ACK-SpatialBundlingPUCCH</em> is not provided; otherwise, <span
class="math inline">\(N_{TB,max}^{\text{DL}} = 1\)</span>.</p>
<p>- <span class="math inline">\(N_{TB,max,g}^{\text{DL}} = 2\)</span>
if the value of <em>maxNrofCodeWordsScheduledByDCI</em> is 2 for any
serving cell <span class="math inline">\(c\)</span> and
<em>harq-ACK-SpatialBundlingPUCCH</em> is not provided for G-RNTI <span
class="math inline">\(g\)</span> for multicast or G-CS-RNTI <span
class="math inline">\(g\)</span>; otherwise, <span
class="math inline">\(N_{TB,max,g}^{\text{DL}} = 1\)</span>.</p>
<p>- <span class="math inline">\(N_{m,c}^{\text{received}}\)</span> or
<span class="math inline">\(N_{m,c,g}^{\text{received}}\)</span>, for
G-RNTI <span class="math inline">\(g\)</span> for multicast or G-CS-RNTI
<span class="math inline">\(g\)</span>, is</p>
<p>- if <em>harq-ACK-SpatialBundlingPUCCH</em> is not provided, the
number of transport blocks the UE receives in a PDSCH, or the number of
transport block groups the UE receives in PDSCHs if
<em>nrofHARQ-BundlingGroups</em> with <span
class="math inline">\(N_{HARQ - ACK}^{TBG,max} = 1\)</span> is provided,
scheduled by a DCI format that the UE detects in PDCCH monitoring
occasion <span class="math inline">\(m\)</span> for serving cell <span
class="math inline">\(c\)</span>, or</p>
<p>- if <em>harq-ACK-SpatialBundlingPUCCH</em> is provided, the number
of PDSCHs, or the number of PDSCH groups if
<em>nrofHARQ-BundlingGroups</em> with <span
class="math inline">\(N_{HARQ - ACK}^{TBG,max} = 1\)</span> is provided,
scheduled by a DCI format that the UE detects in PDCCH monitoring
occasion <span class="math inline">\(m\)</span> for serving cell <span
class="math inline">\(c\)</span>, or</p>
<p>- the number of DCI formats that the UE detects and have associated a
HARQ-ACK information without scheduling PDSCH reception in PDCCH
monitoring occasion <span class="math inline">\(m\)</span> for serving
cell <span class="math inline">\(c\)</span>.</p>
<p>- <span class="math inline">\(N_{\text{SPS,c}}\)</span> or <span
class="math inline">\(N_{\text{SPS},c,g}\)</span>, for G-RNTI <span
class="math inline">\(g\)</span> for multicast or G-CS-RNTI <span
class="math inline">\(g\)</span>, is the number of SPS PDSCH receptions
by the UE on serving cell <span class="math inline">\(c\)</span> for
which the UE transmits corresponding HARQ-ACK information in the same
PUCCH as for HARQ-ACK information corresponding to PDSCH receptions
within the <span class="math inline">\(M\)</span> or <span
class="math inline">\(M_{g}\)</span> PDCCH monitoring occasions,
respectively.</p>
<p>If a UE</p>
<p>- is provided <em>PDSCH-CodeBlockGroupTransmission</em> for <span
class="math inline">\(N_{cells}^{\text{DL,CBG}}\)</span> serving cells;
and</p>
<p>- is not provided <em>PDSCH-CodeBlockGroupTransmission</em>, for
<span class="math inline">\(N_{cells}^{\text{DL,TB}}\)</span> serving
cells where <span class="math inline">\(N_{cells}^{\text{DL,TB}} +
N_{cells}^{\text{DL,CBG}} = N_{cells}^{\text{DL}}\)</span></p>
<p>the UE determines the <span
class="math inline">\({\widetilde{o}}_{0}^{ACK},\
{\widetilde{o}}_{1}^{ACK},\cdots,{\widetilde{o}}_{O_{ACK} -
1}^{ACK}\)</span> according to the previous pseudo-code with the
following modifications</p>
<p>- <span class="math inline">\(N_{cells}^{\text{DL}}\)</span> is used
for the determination of a first HARQ-ACK sub-codebook for</p>
<p>- SPS PDSCH reception,</p>
<p>- a DCI format having associated HARQ-ACK information without
scheduling PDSCH reception,</p>
<p>- TCI state update, and</p>
<p>- TB-based PDSCH receptions on the <span
class="math inline">\(N_{cells}^{\text{DL,CBG}}\)</span> serving cells
and on the <span class="math inline">\(N_{cells}^{\text{DL,TB}}\)</span>
serving cells,</p>
<p>- <span class="math inline">\(N_{cells}^{\text{DL}}\)</span> is
replaced by <span
class="math inline">\(N_{cells}^{\text{DL,CBG}}\)</span> for the
determination of a second HARQ-ACK sub-codebook corresponding to the
<span class="math inline">\(N_{cells}^{\text{DL,CBG}}\)</span> serving
cells for CBG-based PDSCH receptions, and</p>
<p>- if, for an active DL BWP of a serving cell, the UE is not provided
<em>coresetPoolIndex</em> or is provided <em>coresetPoolIndex</em> with
value 0 for one or more first CORESETs and is provided
<em>coresetPoolIndex</em> with value 1 for one or more second CORESETs,
and is provided <em>ackNackFeedbackMode</em> = <em>joint,</em> the
serving cell is counted as two times where the first time corresponds to
the first CORESETs and the second time corresponds to the second
CORESETs, and</p>
<p>- instead of generating one HARQ-ACK information bit per transport
block for a serving cell from the <span
class="math inline">\(N_{cells}^{\text{DL,CBG}}\)</span> serving cells,
the UE generates <span class="math inline">\(N_{\text{HARQ} -
\text{ACK,max}}^{\text{CBG/TB,max}}\)</span> HARQ-ACK information bits,
where <span class="math inline">\(N_{\text{HARQ} -
\text{ACK,max}}^{\text{CBG/TB,max}}\)</span> is the maximum value of
<span class="math inline">\(N_{TB,c}^{\text{DL}} \cdot N_{\text{HARQ} -
\text{ACK,c}}^{\text{CBG/TB,max}}\)</span> across all <span
class="math inline">\(N_{cells}^{\text{DL,CBG}}\)</span> serving cells
and <span class="math inline">\(N_{TB,c}^{\text{DL}}\)</span> is the
value of <em>maxNrofCodeWordsScheduledByDCI</em> for serving cell <span
class="math inline">\(c\)</span>. If for a serving cell <span
class="math inline">\(c\)</span> it is <span
class="math inline">\(N_{TB,c}^{\text{DL}} \cdot N_{HARQ -
ACK,c}^{\text{CBG/TB,max}} &lt; N_{HARQ -
ACK,max}^{\text{CBG/TB,max}}\)</span>, the UE generates NACK for the
last <span class="math inline">\(N_{\text{HARQ} -
\text{ACK,max}}^{\text{CBG/TB,max}} - N_{TB,c}^{\text{DL}} \cdot
N_{\text{HARQ} - \text{ACK,c}}^{\text{CBG/TB,max}}\)</span> HARQ-ACK
information bits for serving cell <span
class="math inline">\(c\)</span></p>
<p>- the pseudo-code operation when
<em>harq-ACK-SpatialBundlingPUCCH</em> is provided is not applicable</p>
<p>- The counter DAI value and the total DAI value apply separately for
each HARQ-ACK sub-codebook</p>
<p>- The UE generates the HARQ-ACK codebook by appending the second
HARQ-ACK sub-codebook to the first HARQ-ACK sub-codebook</p>
<p>If <span class="math inline">\(O_{\text{ACK}} + O_{\text{SR}} +
O_{\text{CSI}} \leq 11\)</span>, the UE also determines <span
class="math inline">\(n_{\text{HARQ-ACK}}{= n_{\text{HARQ-ACK,TB}} +
n}_{\text{HARQ-ACK,CBG}}\)</span> for obtaining a PUCCH transmission
power, as described in clause 7.2.1, with</p>
<p><span class="math inline">\(n_{\text{HARQ-ACK,CBG}} = \left( \left(
V_{\text{DAI},m_{\text{last}}}^{\text{DL}} - \sum_{c =
0}^{N_{\text{cells}}^{\text{DL,CBG}} - 1}U_{\text{DAI,}c}^{\text{CBG}}
\right){mod}\left( T_{D} \right) \right)N_{\text{HARQ} -
\text{ACK,max}}^{\text{CBG/TB,max}} + \sum_{c =
0}^{N_{\text{cells}}^{\text{DL}} - 1}{\sum_{m = 0}^{M -
1}N_{m,c}^{\text{received,CBG}}}\)</span></p>
<p>where</p>
<p>- if <span class="math inline">\(N_{cells}^{\text{DL}} = 1\)</span>,
<span class="math inline">\(V_{DAI,m_{last}}^{\text{DL}}\)</span> is the
value of the counter DAI in the last DCI format scheduling CBG-based
PDSCH reception that the UE detects within the <span
class="math inline">\(M\)</span> PDCCH monitoring occasions</p>
<p>- if <span class="math inline">\(N_{cells}^{\text{DL}} &gt;
1\)</span>, <span
class="math inline">\(V_{DAI,m_{last}}^{\text{DL}}\)</span> is the value
of the total DAI in the last DCI format scheduling CBG-based PDSCH
reception for any serving cell <span class="math inline">\(c\)</span>
that the UE detects within the <span class="math inline">\(M\)</span>
PDCCH monitoring occasions</p>
<p>- <span class="math inline">\(V_{DAI,m_{last}}^{\text{DL}} =
0\)</span>, if the UE does not detect any DCI format scheduling
CBG-based PDSCH reception for any serving cell <span
class="math inline">\(c\)</span> in any of the <span
class="math inline">\(M\)</span> PDCCH monitoring occasions</p>
<p>- <span class="math inline">\(U_{DAI,c}^{\text{CBG}}\)</span> is the
total number of DCI formats scheduling CBG-based PDSCH receptions that
the UE detects within the <span class="math inline">\(M\)</span> PDCCH
monitoring occasions for serving cell <span
class="math inline">\(c\)</span>. <span
class="math inline">\(U_{DAI,c}^{\text{CBG}} = 0\)</span> if the UE does
not detect any DCI format scheduling CBG-based PDSCH reception for
serving cell <span class="math inline">\(c\)</span> in any of the <span
class="math inline">\(M\)</span> PDCCH monitoring occasions</p>
<p>- <span class="math inline">\(N_{m,c}^{\text{received,CBG}}\)</span>
is the number of CBGs the UE receives in a PDSCH scheduled by a DCI
format that supports CBG-based PDSCH reception that the UE detects in
PDCCH monitoring occasion <span class="math inline">\(m\)</span> for
serving cell <span class="math inline">\(c\)</span> and the UE reports
corresponding HARQ-ACK information in the PUCCH</p>
<p>If a UE is provided <em>nrofHARQ-BundlingGroups</em> and is not
provided <em>harq-ACK-SpatialBundlingPUCCH</em> for a serving cell <span
class="math inline">\(c\)</span>, the UE generates HARQ-ACK information
over transport block groups (TBGs) for PDSCH receptions where, for a
maximum number of <span
class="math inline">\(N_{PDSCH}^{\text{max}}\)</span> PDSCH receptions
scheduled by a DCI format on the serving cell, a maximum number of TBGs
<span class="math inline">\(N_{HARQ - ACK,c}^{TBG,max}\)</span> is
provided by <em>nrofHARQ-BundlingGroups</em>. If the UE detects a DCI
format scheduling <span class="math inline">\(N_{PDSCH,c}\)</span> PDSCH
receptions on the serving cell <span class="math inline">\(c\)</span>,
the UE generates <span class="math inline">\(N_{HARQ -
ACK,c}^{TBG,max}\)</span> HARQ-ACK information bits for the first TBs
and, if applicable, generates <span class="math inline">\(N_{HARQ -
ACK,c}^{TBG,max}\)</span> HARQ-ACK information bits for the second TBs
as described in clause 9.1.1 by setting <span
class="math inline">\(N_{HARQ - ACK}^{CBG/TB,max} = N_{HARQ -
ACK,c}^{TBG,max}\)</span> and <span class="math inline">\(C =
N_{PDSCH,c}\)</span>. For a TBG associated with at least one PDSCH that
does not overlap with an UL symbol indicated by
<em>tdd-UL-DL-ConfigurationCommon</em>, or by
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, the UE assumes
that TB(s) provided by a PDSCH that overlaps with an UL symbol indicated
by <em>tdd-UL-DL-ConfigurationCommon</em>, or by
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, are correctly
received. For a TBG associated only with PDSCHs that overlap with UL
symbols indicated by <em>tdd-UL-DL-ConfigurationCommon</em>, or by
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, the UE generates
a NACK value for the TBG.</p>
<p>If a UE is provided <em>nrofHARQ-BundlingGroups</em> and
<em>harq-ACK-SpatialBundlingPUCCH</em> for a serving cell <span
class="math inline">\(c\)</span>, the UE generates HARQ-ACK information
over PDSCH reception groups for PDSCH receptions scheduled by a DCI
format on the serving cell <span class="math inline">\(c\)</span> where
a maximum number of PDSCH reception groups, <span
class="math inline">\(N_{HARQ - ACK,c}^{TBG,max}\)</span>, is provided
by <em>nrofHARQ-BundlingGroups</em>. If the UE detects a DCI format
scheduling <span class="math inline">\(N_{PDSCH,c}\)</span> PDSCH
receptions on the serving cell <span class="math inline">\(c\)</span>,
the UE generates <span class="math inline">\(N_{HARQ -
ACK,c}^{TBG,max}\)</span> HARQ-ACK information bits for the <span
class="math inline">\(N_{PDSCH,c}\)</span> PDSCH receptions as described
in clause 9.1.1 by setting <span class="math inline">\(N_{HARQ -
ACK}^{CBG/TB,max} = N_{HARQ - ACK,c}^{TBG,max}\)</span> and <span
class="math inline">\(C = N_{PDSCH,c}\)</span>, after binary AND
operation of the HARQ-ACK information bits corresponding to the first
and second transport blocks of each PDSCH reception. For a PDSCH
reception group associated with at least one PDSCH that does not overlap
with an UL symbol indicated by <em>tdd-UL-DL-ConfigurationCommon</em>,
or by <em>tdd-UL-DL-ConfigurationDedicated</em> if provided, the UE
assumes that TBs provided by a PDSCH that overlaps with an UL symbol
indicated by <em>tdd-UL-DL-ConfigurationCommon</em>, or by
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, are correctly
received. For a PDSCH reception group associated only with PDSCHs that
overlap with UL symbols indicated by
<em>tdd-UL-DL-ConfigurationCommon</em>, or by
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, the UE generates
a NACK value for the PDSCH reception group.</p>
<p>If a UE is provided
<em>pdsch-TimeDomainAllocationListForMultiPDSCH</em> and neither
provided <em>nrofHARQ-BundlingGroups</em> nor
<em>harq-ACK-SpatialBundlingPUCCH</em> for a serving cell <span
class="math inline">\(c\)</span>, the UE generates HARQ-ACK information
over transport blocks for PDSCH receptions. If the UE detects a DCI
format scheduling <span class="math inline">\(N_{PDSCH,c}\)</span> PDSCH
receptions on the serving cell <span class="math inline">\(c\)</span>,
the UE generates <span class="math inline">\(N_{PDSCH,c}\)</span>
HARQ-ACK information bits for the first TBs in the ascending order of
the starting of PDSCH receptions and, if applicable, generates <span
class="math inline">\(N_{PDSCH,c}\)</span> HARQ-ACK information bits for
the second TBs in the ascending order of the starting of PDSCH
receptions. For a PDSCH reception that overlaps with an UL symbol
indicated by <em>tdd-UL-DL-ConfigurationCommon</em>, or by
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, the UE generates
a NACK value for the first TB and, if applicable, generates a NACK value
for the second TB in the PDSCH reception. If <span
class="math inline">\(N_{PDSCH,c}\)</span>&lt;<span
class="math inline">\(N_{\text{PDSCH,c}}^{\text{max}}\)</span>, the UE
generates a NACK value for the last <span
class="math inline">\(N_{TB,c}^{\text{DL}} \bullet
N_{\text{PDSCH,c}}^{\text{max}} - N_{TB,c}^{\text{DL}} \bullet
N_{PDSCH,c}\)</span> HARQ-ACK information bits where <span
class="math inline">\(N_{TB,c}^{\text{DL}}\)</span> is the value of
<em>maxNrofCodeWordsScheduledByDCI</em> for serving cell <span
class="math inline">\(c\)</span> and <span
class="math inline">\(N_{\text{PDSCH,c}}^{\text{max}}\)</span> is
determined by the maximum number of SLIVs amongst all rows of the TDRA
table configured by
<em>pdsch-TimeDomainAllocationListForMultiPDSCH</em>.</p>
<p>If a UE is provided
<em>pdsch-TimeDomainAllocationListForMultiPDSCH</em> and
<em>harq-ACK-SpatialBundlingPUCCH</em> and not provided
<em>nrofHARQ-BundlingGroups</em> for a serving cell <span
class="math inline">\(c\)</span>, the UE generates HARQ-ACK information
over PDSCH receptions for PDSCH receptions scheduled by a DCI format on
the serving cell <span class="math inline">\(c\)</span>. If the UE
detects a DCI format scheduling <span
class="math inline">\(N_{PDSCH,c}\)</span> PDSCH receptions on the
serving cell <span class="math inline">\(c\)</span>, the UE generates
<span class="math inline">\(N_{PDSCH,c}\)</span> HARQ-ACK information
bits for the PDSCH receptions in the ascending order of the starting of
PDSCH receptions after binary AND operation of the HARQ-ACK information
bits corresponding to the first and second transport blocks of each
PDSCH reception. For a PDSCH reception that overlaps with an UL symbol
indicated by <em>tdd-UL-DL-ConfigurationCommon</em>, or by
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, the UE generates
a NACK value for the PDSCH reception. If <span
class="math inline">\(N_{PDSCH,c}\)</span>&lt;<span
class="math inline">\(N_{\text{PDSCH,c}}^{\text{max}}\)</span>, the UE
generates a NACK value for the last <span
class="math inline">\(N_{\text{PDSCH,c}}^{\text{max}} -
N_{PDSCH,c}\)</span> HARQ-ACK information bits.</p>
<p>If a UE</p>
<p>- is provided <em>pdsch-TimeDomainAllocationListForMultiPDSCH</em>
and, if provided, <em>nrofHARQ-BundlingGroups</em> with value <span
class="math inline">\(N_{HARQ - ACK}^{TBG,max} &gt; 1\)</span> for <span
class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> serving cells;
and</p>
<p>- is not provided
<em>pdsch-TimeDomainAllocationListForMultiPDSCH</em> or is provided
<em>nrofHARQ-BundlingGroups</em> with value <span
class="math inline">\(N_{HARQ - ACK}^{TBG,max} = 1\)</span>, for <span
class="math inline">\(N_{cells}^{\text{DL,TB}}\)</span> serving cells
where <span class="math inline">\(N_{cells}^{\text{DL,TB}} +
N_{cells}^{\text{DL,TBG}} = N_{cells}^{\text{DL}}\)</span></p>
<p>the UE determines the <span
class="math inline">\({\widetilde{o}}_{0}^{ACK},\
{\widetilde{o}}_{1}^{ACK},\cdots,{\widetilde{o}}_{O_{ACK} -
1}^{ACK}\)</span> according to the previous pseudo-code with the
following modifications</p>
<p>- <span class="math inline">\(N_{cells}^{\text{DL}}\)</span> is used
for the determination of a first HARQ-ACK sub-codebook for</p>
<p>- SPS PDSCH reception,</p>
<p>- any DCI format having associated HARQ-ACK information without
scheduling PDSCH reception, and</p>
<p>- PDSCH reception scheduled by a DCI format scheduling one PDSCH</p>
<p>- PDSCH reception with <span class="math inline">\(N_{HARQ -
ACK}^{TBG,max} = 1\)</span> for TBG-based HARQ-ACK information on the
<span class="math inline">\(N_{cells}^{\text{DL,TB}}\)</span> serving
cells,</p>
<p>- <span class="math inline">\(N_{cells}^{\text{DL}}\)</span> is
replaced by <span
class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> for the
determination of a second HARQ-ACK sub-codebook corresponding to the
<span class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> serving
cells for TBG-based HARQ-ACK information, or for TB-based HARQ-ACK
information corresponding to multiple PDSCH receptions scheduled by a
single DCI format, and</p>
<p>- if, for an active DL BWP of a serving cell, the UE is not provided
<em>coresetPoolIndex</em> or is provided <em>coresetPoolIndex</em> with
value 0 for one or more first CORESETs and is provided
<em>coresetPoolIndex</em> with value 1 for one or more second CORESETs,
and is provided <em>ackNackFeedbackMode</em> = <em>joint,</em> the
serving cell is counted as two times where the first time corresponds to
the first CORESETs and the second time corresponds to the second
CORESETs, and</p>
<p>- instead of generating one or two HARQ-ACK information bits per
PDSCH for a serving cell from the <span
class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> serving cells,
the UE generates <span class="math inline">\(N_{\text{HARQ} -
\text{ACK,max}}^{\text{TBG,max}}\)</span> HARQ-ACK information bits for
the PDSCH receptions scheduled by a DCI format, where <span
class="math inline">\(N_{\text{HARQ} -
\text{ACK,max}}^{\text{TBG,max}}\)</span> is the maximum value between
<span class="math inline">\(N_{TB,c}^{\text{DL}} \cdot N_{\text{HARQ} -
\text{ACK,c}}^{\text{TBG,max}}\)</span> across all <span
class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> serving cells
if the UE is provided <em>nrofHARQ-BundlingGroups</em>, and <span
class="math inline">\(N_{TB,c}^{\text{DL}} \cdot
N_{\text{PDSCH,c}}^{\text{max}}\)</span> across all <span
class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> serving cells
where the UE is not provided <em>nrofHARQ-BundlingGroups</em>, and <span
class="math inline">\(N_{TB,c}^{\text{DL}}\)</span> is the value of
<em>maxNrofCodeWordsScheduledByDCI</em> for serving cell <span
class="math inline">\(c\)</span> if
<em>harq-ACK-SpatialBundlingPUCCH</em> is not provided; else, <span
class="math inline">\(N_{TB,c}^{\text{DL}} = 1\)</span>. If for a
serving cell <span class="math inline">\(c\)</span> where the UE is
provided <em>nrofHARQ-BundlingGroups</em>, it is <span
class="math inline">\(N_{TB,c}^{\text{DL}} \cdot N_{HARQ -
ACK,c}^{\text{TBG,max}} &lt; N_{HARQ -
ACK,max}^{\text{TBG,max}}\)</span>, the UE generates NACK for the last
<span class="math inline">\(N_{\text{HARQ} -
\text{ACK,max}}^{\text{TBG,max}} - N_{TB,c}^{\text{DL}} \cdot
N_{\text{HARQ} - \text{ACK,c}}^{\text{TBG,max}}\)</span> HARQ-ACK
information bits for serving cell <span
class="math inline">\(c\)</span>. If for a serving cell <span
class="math inline">\(c\)</span> where the UE is not provided
<em>nrofHARQ-BundlingGroups</em>, it is <span
class="math inline">\(N_{TB,c}^{\text{DL}} \cdot
N_{PDSCH,c}^{\max}\  &lt; N_{HARQ - ACK,max}^{\text{TBG,max}}\)</span>,
the UE generates NACK for the last <span
class="math inline">\(N_{\text{HARQ} - \text{ACK,max}}^{\text{TBG,max}}
- N_{TB,c}^{\text{DL}} \cdot N_{\text{PDSCH,c}}^{\text{max}}\)</span>
HARQ-ACK information bits for serving cell <span
class="math inline">\(c\)</span>.</p>
<p>- The pseudo-code operation when
<em>PDSCH-CodeBlockGroupTransmission</em> is provided is not
applicable.</p>
<p>- The counter DAI value and the total DAI value apply separately for
each HARQ-ACK sub-codebook.</p>
<p>- The UE generates the HARQ-ACK codebook by appending the second
HARQ-ACK sub-codebook to the first HARQ-ACK sub-codebook.</p>
<p>If <span class="math inline">\(O_{\text{ACK}} + O_{\text{SR}} +
O_{\text{CSI}} \leq 11\)</span> and <span
class="math inline">\(N_{\text{cells}}^{\text{DL,TBG}} &gt; 0\)</span>,
the UE also determines <span class="math inline">\(n_{\text{HARQ-ACK}}{=
n_{\text{HARQ-ACK,TB}} + n}_{\text{HARQ-ACK,TBG}}\)</span> for obtaining
a PUCCH transmission power, as described in clause 7.2.1, with</p>
<p><span class="math inline">\(n_{\text{HARQ-ACK,TBG}} = \left( \left(
V_{\text{DAI},m_{\text{last}}}^{\text{DL}} - \sum_{c =
0}^{N_{\text{cells}}^{\text{DL,TBG}} - 1}U_{\text{DAI,}c}^{\text{TBG}}
\right){mod}\left( T_{D} \right) \right)N_{\text{HARQ} -
\text{ACK,max}}^{\text{TBG,max}} + \sum_{c =
0}^{N_{\text{cells}}^{\text{DL,TBG}} - 1}{\sum_{m = 0}^{M -
1}N_{m,c}^{\text{received,TBG}}}\)</span></p>
<p>where</p>
<p>- if <span class="math inline">\(N_{cells}^{\text{DL}} = 1\)</span>,
<span class="math inline">\(V_{DAI,m_{last}}^{\text{DL}}\)</span> is the
value of the counter DAI in the last DCI format scheduling more than one
PDSCH receptions for any serving cell <span
class="math inline">\(c\)</span> from the <span
class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> serving cells
with TBG-based HARQ-ACK information or with TB-based HARQ-ACK
information that the UE detects within the <span
class="math inline">\(M\)</span> PDCCH monitoring occasions</p>
<p>- if <span class="math inline">\(N_{cells}^{\text{DL}} &gt;
1\)</span>, <span
class="math inline">\(V_{DAI,m_{last}}^{\text{DL}}\)</span> is the value
of the total DAI in the last DCI format scheduling more than one PDSCH
receptions with TBG-based HARQ-ACK information or with TB-based HARQ-ACK
information for any serving cell <span class="math inline">\(c\)</span>
from the <span class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span>
serving cells that the UE detects within the <span
class="math inline">\(M\)</span> PDCCH monitoring occasions</p>
<p>- <span class="math inline">\(V_{DAI,m_{last}}^{\text{DL}} =
0\)</span>, if the UE does not detect any DCI format scheduling more
than one PDSCH receptions with TBG-based HARQ-ACK information or with
TB-based HARQ-ACK information for any serving cell <span
class="math inline">\(c\)</span> from the <span
class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> serving cells
in any of the <span class="math inline">\(M\)</span> PDCCH monitoring
occasions</p>
<p>- <span class="math inline">\(U_{DAI,c}^{\text{TBG}}\)</span> is the
total number of DCI formats scheduling more than one PDSCH receptions
with TBG-based HARQ-ACK information or with TB-based HARQ-ACK
information for any serving cell <span class="math inline">\(c\)</span>
from the <span class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span>
serving cells that the UE detects within the <span
class="math inline">\(M\)</span> PDCCH monitoring occasions for serving
cell <span class="math inline">\(c\)</span>. <span
class="math inline">\(U_{DAI,c}^{\text{TBG}} = 0\)</span> if the UE does
not detect any DCI format scheduling more than one PDSCH receptions for
serving cell <span class="math inline">\(c\)</span> in any of the <span
class="math inline">\(M\)</span> PDCCH monitoring occasions</p>
<p>- if <em>harq-ACK-SpatialBundlingPUCCH</em> is provided,</p>
<blockquote>
<p>- if <em>nrofHARQ-BundlingGroups</em> is provided, <span
class="math inline">\(N_{m,c}^{\text{received,TBG}}\)</span> is the
number of PDSCH groups that include at least one PDSCH not overlapping
with a UL symbol indicated by <em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, that the UE
receives in serving cell <span class="math inline">\(c\)</span> from the
<span class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> serving
cells in PDCCH monitoring occasion <span
class="math inline">\(m\)</span> and the UE reports corresponding
HARQ-ACK information in the PUCCH</p>
<p>- if <em>nrofHARQ-BundlingGroups</em> is not provided, <span
class="math inline">\(N_{m,c}^{\text{received,TBG}}\)</span> is the
number of PDSCHs that the UE receives in serving cell <span
class="math inline">\(c\)</span> from the <span
class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> serving cells
in PDCCH monitoring occasion <span class="math inline">\(m\)</span> and
the UE reports corresponding HARQ-ACK information in the PUCCH</p>
</blockquote>
<p>- if harq-ACK-SpatialBundlingPUCCH is not provided,</p>
<blockquote>
<p>- if <em>nrofHARQ-BundlingGroups</em> is provided, <span
class="math inline">\(N_{m,c}^{\text{received,TBG}}\)</span> is the
number of TBGs including at least one PDSCH not overlapping with an UL
symbol indicated by <em>tdd-UL-DL-ConfigurationCommon</em>, or by
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, that the UE
receives in serving cell <span class="math inline">\(c\)</span> from the
<span class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> serving
cells in PDCCH monitoring occasion <span
class="math inline">\(m\)</span> and the UE reports corresponding
HARQ-ACK information in the PUCCH</p>
<p>- if <em>nrofHARQ-BundlingGroups</em> is not provided, <span
class="math inline">\(N_{m,c}^{\text{received,TBG}}\)</span> is the
number of transport blocks in PDSCHs that the UE receives in serving
cell <span class="math inline">\(c\)</span> from the <span
class="math inline">\(N_{cells}^{\text{DL,TBG}}\)</span> serving cells
in PDCCH monitoring occasion <span class="math inline">\(m\)</span> and
the UE reports corresponding HARQ-ACK information in the PUCCH.</p>
</blockquote>
<p>Table 9.1.3-1: Value of counter DAI for <span
class="math inline">\(\mathbf{N}_{\mathbf{C
-}\text{DAI}}^{\text{DL}}\mathbf{= 2}\)</span> and of total DAI</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 19%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr>
<th>DAI<br />
MSB, LSB</th>
<th><span
class="math inline">\(\mathbf{V}_{\text{C-DAI}}^{\text{DL}}\)</span> or
<span
class="math inline">\(\mathbf{V}_{\text{T-DAI}}^{\text{DL}}\)</span></th>
<th style="text-align: left;">Number of {serving cell, PDCCH monitoring
occasion}-pair(s) in which PDSCH transmission(s) associated with PDCCH
or PDCCH generating a HARQ-ACK information bit without scheduling a
PDSCH reception or providing TCI state update is present, denoted as
<span class="math inline">\(\mathbf{Y}\)</span> and <span
class="math inline">\(\mathbf{Y \geq 1}\)</span></th>
</tr>
</thead>
<tbody>
<tr>
<td>0,0</td>
<td>1</td>
<td style="text-align: left;"><span class="math display">\[(Y -
1){mod}T_{D} + 1 = 1\]</span></td>
</tr>
<tr>
<td>0,1</td>
<td>2</td>
<td style="text-align: left;"><span class="math display">\[(Y -
1){mod}T_{D} + 1 = 2\]</span></td>
</tr>
<tr>
<td>1,0</td>
<td>3</td>
<td style="text-align: left;"><span class="math display">\[(Y -
1){mod}T_{D} + 1 = 3\]</span></td>
</tr>
<tr>
<td>1,1</td>
<td>4</td>
<td style="text-align: left;"><span class="math display">\[(Y -
1){mod}T_{D} + 1 = 4\]</span></td>
</tr>
</tbody>
</table>
<p>Table 9.1.3-1A: Value of counter DAI for <span
class="math inline">\(\mathbf{N}_{\mathbf{C
-}\text{DAI}}^{\text{DL}}\mathbf{= 1}\)</span></p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 19%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>DAI<br />
</strong></th>
<th style="text-align: center;"><span
class="math inline">\(V_{\text{C-DAI}}^{\text{DL}}\)</span></th>
<th>Number of {serving cell, PDCCH monitoring occasion}-pair(s) in which
PDSCH transmission(s) associated with PDCCH or PDCCH generating a
HARQ-ACK information bit without scheduling a PDSCH reception or
providing TCI state update is present, denoted as <span
class="math inline">\(\mathbf{Y}\)</span> and <span
class="math inline">\(\mathbf{Y \geq 1}\)</span></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td><span class="math display">\[(Y - 1){mod}T_{D} + 1 = 1\]</span></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">2</td>
<td><span class="math display">\[(Y - 1){mod}T_{D} + 1 = 2\]</span></td>
</tr>
</tbody>
</table>
<h4
id="type-2-harq-ack-codebook-in-physical-uplink-shared-channel">9.1.3.2
Type-2 HARQ-ACK codebook in physical uplink shared channel</h4>
<p>In this clause, a DAI field is either the one corresponding to
unicast HARQ-ACK information and associated PDSCH receptions or DCI
formats, or is the one corresponding to multicast HARQ-ACK information
and associated PDSCH receptions or DCI formats, as described in [5, TS
38.212].</p>
<p>If a UE would multiplex HARQ-ACK information in a PUSCH transmission
that is not scheduled by a DCI format or is scheduled by a DCI format
that does not include a DAI field, then</p>
<p>- if the UE has not received any PDCCH within the monitoring
occasions for DCI formats scheduling PDSCH receptions, or providing a
DCI format having associated HARQ-ACK information without scheduling a
PDSCH reception, on any serving cell <span
class="math inline">\(c\)</span> and the UE does not have HARQ-ACK
information in response to a SPS PDSCH reception to multiplex in the
PUSCH, as described in clause 9.1.3.1, the UE does not multiplex
HARQ-ACK information in the PUSCH transmission;</p>
<p>- else, the UE generates the HARQ-ACK codebook as described in clause
9.1.3.1, except that <em>harq-ACK-SpatialBundlingPUCCH</em> is replaced
by <em>harq-ACK-SpatialBundlingPUSCH</em>.</p>
<p>If a UE multiplexes HARQ-ACK information in a PUSCH transmission that
is scheduled by a DCI format that includes a DAI field, the UE generates
the HARQ-ACK codebook as described in clause 9.1.3.1, with the following
modifications:</p>
<p>- For the pseudo-code for the HARQ-ACK codebook generation in clause
9.1.3.1, after the completion of the <span
class="math inline">\(c\)</span> and <span
class="math inline">\(m\)</span> loops, the UE sets <span
class="math inline">\({V_{temp2} = V}_{T -
\text{DAI}}^{\text{UL}}\)</span> where <span class="math inline">\(V_{T
- \text{DAI}}^{\text{UL}}\)</span> is the value of the DAI field
according to Table 9.1.3-2</p>
<p><em>-</em> if the UE multiplexes HARQ-ACK information associated with
more than one G-RNTIs for multicast or G-CS-RNTIs, the value of the DAI
field <span class="math inline">\(V_{T -
\text{DAI}}^{\text{UL}}\)</span> is applicable to each of the more than
one G-RNTIs for multicast or each of the G-CS-RNTIs.</p>
<p>- For the case of first and second HARQ-ACK sub-codebooks, the DCI
format includes a first DAI field corresponding to the first HARQ-ACK
sub-codebook and a second DAI field corresponding to the second HARQ-ACK
sub-codebook</p>
<p><em>- harq-ACK-SpatialBundlingPUCCH</em> is replaced by
<em>harq-ACK-SpatialBundlingPUSCH</em>.</p>
<p>If a UE is not provided <em>PDSCH-CodeBlockGroupTransmission</em> and
the UE is scheduled for a PUSCH transmission by DCI format that includes
a DAI field for unicast PDSCH receptions with value <span
class="math inline">\(V_{\text{T-DAI}}^{\text{UL}} = 4\)</span> and the
UE has not received any PDCCH within the monitoring occasions for a
unicast DCI format scheduling PDSCH receptions providing transport
blocks with enabled HARQ-ACK information or having associated HARQ-ACK
information without scheduling PDSCH receptions on any serving cell
<span class="math inline">\(c\)</span>, and the UE does not have
HARQ-ACK information in response to a SPS PDSCH reception to multiplex
in the PUSCH as described in clause 9.1.3.1, the UE does not multiplex
HARQ-ACK information associated with unicast DCI format and HARQ-ACK
information for SPS PDSCH reception in the PUSCH transmission.</p>
<p>If a UE is provided <em>PDSCH-CodeBlockGroupTransmission</em> and the
UE is scheduled for a PUSCH transmission by DCI format that includes a
DAI field for unicast PDSCH receptions with first value <span
class="math inline">\(V_{\text{T-DAI}}^{\text{UL}} = 4\)</span> or with
second value <span class="math inline">\(V_{\text{T-DAI}}^{\text{UL}} =
4\)</span> and the UE has not received any PDCCH within the monitoring
occasions for a unicast DCI format scheduling PDSCH reception providing
a transport block with enabled HARQ-ACK information or having associated
HARQ-ACK information without scheduling PDSCH reception on any serving
cell <span class="math inline">\(c\)</span>, and the UE does not have
HARQ-ACK information in response to a SPS PDSCH reception to multiplex
in the PUSCH, as described in clause 9.1.3.1, the UE does not multiplex
HARQ-ACK information associated with unicast DCI format and HARQ-ACK
information for SPS PDSCH reception for the first sub-codebook or for
the second sub-codebook, respectively, in the PUSCH transmission.</p>
<p>If a UE is scheduled for a PUSCH transmission by DCI format that
includes a DAI field for multicast PDSCH receptions with value <span
class="math inline">\(V_{\text{T-DAI}}^{\text{UL}} = 4\)</span> and the
UE has not received any PDCCH within the monitoring occasions for a
multicast DCI format scheduling PDSCH reception providing a transport
block with enabled HARQ-ACK information or having associated HARQ-ACK
information without scheduling PDSCH receptions on any serving cell
<span class="math inline">\(c\)</span>, to multiplex in the PUSCH as
described in clause 9.1.3.1, the UE does not multiplex multicast
HARQ-ACK information associated with a multicast DCI format in the PUSCH
transmission.</p>
<p>Table 9.1.3-2: Value of DAI</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 19%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr>
<th>DAI<br />
MSB, LSB</th>
<th><span
class="math inline">\(\mathbf{V}_{\text{T-DAI}}^{\text{UL}}\)</span></th>
<th>Number of {serving cell, PDCCH monitoring occasion}-pair(s) in which
PDSCH transmission(s) associated with PDCCH or PDCCH indicating SPS
PDSCH release or providing TCI state update or DCI format 1_1 indicating
SCell dormancy is present, denoted as <span
class="math inline">\(\mathbf{X}\)</span> and <span
class="math inline">\(\mathbf{X \geq 1}\)</span></th>
</tr>
</thead>
<tbody>
<tr>
<td>0,0</td>
<td>1</td>
<td><span class="math display">\[(X - 1){mod}4 + 1 = 1\]</span></td>
</tr>
<tr>
<td>0,1</td>
<td>2</td>
<td><span class="math display">\[(X - 1){mod}4 + 1 = 2\]</span></td>
</tr>
<tr>
<td>1,0</td>
<td>3</td>
<td><span class="math display">\[(X - 1){mod}4 + 1 = 3\]</span></td>
</tr>
<tr>
<td>1,1</td>
<td>4</td>
<td><span class="math display">\[(X - 1){mod}4 + 1 = 4\]</span></td>
</tr>
</tbody>
</table>
<h4
id="type-2-harq-ack-codebook-grouping-and-harq-ack-retransmission">9.1.3.3
Type-2 HARQ-ACK codebook grouping and HARQ-ACK retransmission</h4>
<p>If a UE is provided <em>pdsch-HARQ-ACK-Codebook-r16</em>, the UE
determines HARQ-ACK information for multiplexing in a PUCCH transmission
occasion according to the following procedure.</p>
<p>Set <span class="math inline">\(g\)</span> to the value of a PDSCH
group index field in a last DCI format that provides a value of <span
class="math inline">\(g\)</span> and indicates a PUCCH transmission
occasion.</p>
<p>Set <span class="math inline">\(i(g)\)</span> to denote a PUCCH
transmission occasion for multiplexing HARQ-ACK information</p>
<p>Set <span class="math inline">\(k\)</span> to the value of a
PDSCH-to-HARQ_feedback timing field, if any, in a DCI format providing a
value of <span class="math inline">\(g\)</span></p>
<p>- If the DCI format does not include a PDSCH-to-HARQ_feedback timing
field, set <span class="math inline">\(k\)</span> to the value provided
by <em>dl-DataToUL-ACK</em> or <em>dl-DataToUL-ACK-r16</em></p>
<p>Set <span class="math inline">\(h(g)\)</span> to the value of the New
feedback indicator field in the last DCI format providing the value of
<span class="math inline">\(g\)</span> if the New feedback indicator
field includes 1 bit, or to the MSB of the New feedback indicator field
in the last DCI format providing the value of <span
class="math inline">\(g\)</span> if the New feedback indicator field
includes 2 bits</p>
<p>Set <span class="math inline">\(h^{(g + 1)mod2}(g)\)</span> to a
value of the LSB of the New feedback indicator field in the last DCI
format providing the value of <span class="math inline">\(g\)</span> if
the New feedback indicator field includes 2 bits, or to <span
class="math inline">\(\varnothing\)</span> otherwise</p>
<p>Set <span class="math inline">\(V_{DAI}^{(g + 1)mod2}\)</span> to the
value of a total DAI field for group <span class="math inline">\((g +
1)mod2\)</span> in the last DCI format providing the value of <span
class="math inline">\(g\)</span></p>
<p>- If <span class="math inline">\(g = 1\)</span> and the UE detects a
DCI format that does not include a PDSCH group index field in a PDCCH
reception that is after the PDCCH reception for the last DCI format
detection providing the value of <span class="math inline">\(g\)</span>
and indicating a same slot for a PUCCH transmission occasion, set <span
class="math inline">\(V_{DAI}^{(g + 1)mod2} = \varnothing\)</span></p>
<p>Set <span class="math inline">\(q\)</span> to the value of a number
of requested PDSCH group(s) field in the last DCI format providing the
value of <em>g</em></p>
<p>A UE does not expect to detect DCI formats with respective</p>
<p>- Number of requested PDSCH group(s) field values of 0, and</p>
<p>- PDSCH-to-HARQ_feedback timing field values that indicate a same
PUCCH transmission occasion, and</p>
<p>- PDSCH group index field values that are different</p>
<p>Generate first HARQ-ACK information for PUCCH transmission occasion
<span class="math inline">\(i(g)\)</span> in a slot, as described in
clause 9.1.3.1, where</p>
<p>- the first HARQ-ACK information corresponds only to detections of
DCI formats each providing a same value of <span
class="math inline">\(g\)</span>, of <span
class="math inline">\(h(g)\)</span>, and to detections of DCI formats
that do not provide a value of <span class="math inline">\(g\)</span>
and <span class="math inline">\(h(g)\)</span> and are associated with a
same value of <span class="math inline">\(g\)</span>, of <span
class="math inline">\(h(g)\)</span>, and at least one of the DCI formats
providing a value of <span class="math inline">\(k\)</span> indicating
the slot</p>
<p>- at least one of the DCI formats provides a <span
class="math inline">\(h(g)\)</span> value</p>
<p>- <span class="math inline">\(m = 0\)</span> corresponds to a PDCCH
monitoring occasion, where the UE detects a DCI format that provides a
value of <span class="math inline">\(g\)</span> or is associated with a
value of <span class="math inline">\(g\)</span>, that is the first PDCCH
monitoring occasion after a PDCCH monitoring occasion where the UE
detects another DCI format that provides a value different than <span
class="math inline">\(h(g)\)</span></p>
<p>The generation of the first HARQ-ACK information for PUCCH
transmission occasion <span class="math inline">\(i(g)\)</span> in a
slot, as described in clause 9.1.3.1, excludes the generation of
HARQ-ACK information for SPS PDSCH receptions.</p>
<p>If <span class="math inline">\(h^{(g + 1)mod2}(g) =
\varnothing\)</span> or <span class="math inline">\(h^{(g + 1)mod2}(g) =
h((g + 1)mod2)\)</span>, generate second HARQ-ACK information for PUCCH
transmission occasion <span class="math inline">\(i((g +
1)mod2)\)</span> in a slot, as described in clause 9.1.3.1, where</p>
<p>- the second HARQ-ACK information corresponds to detections of DCI
formats each providing a same value of <span class="math inline">\((g +
1)mod2\)</span>, of <span class="math inline">\(h((g + 1)mod2)\)</span>
and to detections of DCI formats that do not provide a value of <span
class="math inline">\((g + 1)mod2\)</span>, of <span
class="math inline">\(h((g + 1)mod2)\)</span>, but are associated with a
same value of <span class="math inline">\((g + 1)mod2\)</span>, of <span
class="math inline">\(h((g + 1)mod2)\)</span></p>
<p>- at least one of the DCI formats provides a <span
class="math inline">\(h((g + 1)mod2)\)</span> value</p>
<p>- <span class="math inline">\(m = 0\)</span> corresponds to a PDCCH
monitoring occasion, where the UE detects a DCI format that provides a
value of <span class="math inline">\((g + 1)mod2\)</span> or that is
associated with a value of <span class="math inline">\((g +
1)mod2\)</span>, that is the first PDCCH monitoring occasion after a
PDCCH monitoring occasion where the UE detects another DCI format that
provides a value different than <span class="math inline">\(h((g +
1)mod2)\)</span></p>
<p>- the PUCCH transmission occasion <span class="math inline">\(i((g +
1)mod2)\)</span> is a last one for multiplexing second HARQ-ACK
information and it is not after PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span></p>
<p>- if <span class="math inline">\(V_{DAI}^{(g + 1)mod2} \neq
\varnothing\)</span>, after the completion of the <span
class="math inline">\(c\)</span> and <span
class="math inline">\(m\)</span> loops for the pseudo-code for the
second HARQ-ACK codebook generation in clause 9.1.3.1, set <span
class="math inline">\(V_{temp2} = V_{DAI}^{(g + 1)mod2}\)</span>. If the
UE is provided <em>PDSCH-CodeBlockGroupTransmission</em> for <span
class="math inline">\(N_{cells}^{DL,CBG}\)</span> serving cells, set
<span class="math inline">\(V_{temp2} = V_{DAI}^{(g + 1)mod2}\)</span>
for both sub-codebooks before appending the second sub-codebook to the
first sub-codebook.</p>
<p>If <span class="math inline">\(h^{(g + 1)mod2}(g) \neq
\varnothing\)</span> and <span class="math inline">\(h^{(g + 1)mod2}(g)
\neq h((g + 1)mod2)\)</span>, generate second HARQ-ACK information as
described in clause 9.1.3.1 by setting <span class="math inline">\(M =
0\)</span> and, after the completion of the <span
class="math inline">\(c\)</span> and <span
class="math inline">\(m\)</span> loops for the pseudo-code for the
second HARQ-ACK codebook generation in clause 9.1.3.1, setting <span
class="math inline">\(V_{temp2} = V_{DAI}^{(g + 1)mod2}\)</span>.</p>
<p>The generation of the second HARQ-ACK information for PUCCH
transmission occasion <span class="math inline">\(i((g +
1)mod2)\)</span> in a slot, as described in clause 9.1.3.1, excludes the
generation of HARQ-ACK information for SPS PDSCH receptions.</p>
<p>If <span class="math inline">\(q = 0\)</span>, the UE</p>
<p>includes only the first HARQ-ACK information for multiplexing in
PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span></p>
<p>elseif <span class="math inline">\(q = 1\)</span></p>
<p>if g = 1</p>
<p>appends the first HARQ-ACK information to the second HARQ-ACK
information for multiplexing in PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span></p>
<p>else</p>
<p>append the second HARQ-ACK information to the first HARQ-ACK
information for multiplexing in PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span></p>
<p>end if</p>
<p>end if</p>
<p>The UE appends the HARQ-ACK information corresponding to SPS PDSCH
receptions, if any, as described in clause 9.1.3.1, after the first and
second, if any, HARQ-ACK information.</p>
<p>If the HARQ-ACK information is multiplexed in a PUSCH transmission,
the HARQ-ACK information is determined as</p>
<p>- for multiplexing in PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span>, if the PUSCH transmission is not
scheduled by a DCI format or is scheduled by a DCI format that does not
include a DCI field with value <span
class="math inline">\(V_{DAI}^{UL}\)</span></p>
<p>- for multiplexing in PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span>, if the PUSCH transmission is
scheduled by a DCI format without <em>ul-TotalDAI-Included</em>
configured except that for PDSCH group <span
class="math inline">\(g\)</span>, the DCI field with value <span
class="math inline">\(V_{DAI}^{UL}\)</span> in the DCI format is used
after the completion of the <span class="math inline">\(c\)</span> and
<span class="math inline">\(m\)</span> loops for the pseudo-code for the
HARQ-ACK codebook generation in clause 9.1.3.1, and when the HARQ-ACK
information multiplexed in the PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span> does not include HARQ-ACK
information for PDSCH group <span class="math inline">\((g +
1)mod2\)</span></p>
<p>- for multiplexing in PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span>, if the PUSCH transmission is
scheduled by a DCI format without <em>ul-TotalDAI-Included</em>
configured except that for PDSCH group <span class="math inline">\(g =
0\)</span>, the DCI field with value <span
class="math inline">\(V_{DAI}^{UL}\)</span> in the DCI format is used
after the completion of the <span class="math inline">\(c\)</span> and
<span class="math inline">\(m\)</span> loops for the pseudo-code for the
HARQ-ACK codebook generation in clause 9.1.3.1, and when the HARQ-ACK
information multiplexed in the PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span> includes HARQ-ACK information for
PDSCH groups <span class="math inline">\(g\)</span> and <span
class="math inline">\((g + 1)mod2\)</span></p>
<p>- for multiplexing in PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span>, if the PUSCH transmission is
scheduled by a DCI format without <em>ul-TotalDAI-Included</em>
configured except that for PDSCH group <span class="math inline">\(g =
0\)</span>, the DCI field with value <img src="media/image81.svg" /> in
the DCI format is used after the completion of the <span
class="math inline">\(c\)</span> and <span
class="math inline">\(m\)</span> loops for the pseudo-code for the
HARQ-ACK codebook generation in clause 9.1.3.1, and when the UE has not
detected any DCI format scheduling PDSCH receptions, and the UE has not
detected any DCI format with a request for HARQ-ACK information for any
PDSCH group</p>
<p>- for multiplexing in PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span>, if the PUSCH transmission is
scheduled by a DCI format with <em>ul-TotalDAI-Included</em> configured
except that MSBs of the DCI field with value <span
class="math inline">\(V_{DAI}^{UL}\)</span> in the DCI format are used
for PDSCH group <span class="math inline">\(g = 0\)</span>, and LSBs of
DCI field with value <span class="math inline">\(V_{DAI}^{UL}\)</span>
in the DCI format are used for PDSCH group <span class="math inline">\(g
= 1\)</span>, after the completion of the <span
class="math inline">\(c\)</span> and <span
class="math inline">\(m\)</span> loops for the pseudo-code for the
HARQ-ACK codebook generation in clause 9.1.3.1.</p>
<p>If a UE is scheduled a PUSCH transmission by DCI format 0_1 having a
DAI field value <span class="math inline">\(V_{DAI}^{UL} = 4\)</span>
for a PDSCH group index, and the UE has not detected any DCI format
scheduling PDSCH receptions for the PDSCH group index, and the UE has
not detected any DCI format with a request for HARQ-ACK information for
the PDSCH group index, the UE does not multiplex HARQ-ACK information in
the PUSCH transmission for the PDSCH group index.</p>
<p>If a UE detects DCI formats with respective PDSCH-to-HARQ_feedback
timing field values indicating a same PUCCH transmission occasion and
none of the DCI formats that the UE detects after a last PUCCH
transmission occasion for <span class="math inline">\(g = 0\)</span>
includes a New feedback indicator field for <span
class="math inline">\(g = 0\)</span>, and at least one of the DCI
formats is DCI format 1_0, the UE generates HARQ-ACK information only
for PDSCH receptions scheduled by detections of DCI format 1_0 and SPS
PDSCH releases indicated by detections of DCI format 1_0, as described
in clause 9.1.3.1 or 9.1.3.2 for multiplexing in the PUCCH transmission
occasion.</p>
<p>If a DCI format indicating a slot for a PUCCH transmission occasion
does not include a New feedback indicator field, a PDSCH reception
scheduled by the DCI format or a SPS PDSCH release indicated by the DCI
format is associated with PDSCH group 0 and a value of
<em>h</em>(<em>g</em>) associated with the DCI format is set only if
<em>h</em>(<em>g</em>) is provided by another DCI format that provides a
value of <em>h</em>(<em>g</em>) for PDSCH group 0 and indicates the slot
for the PUCCH transmission occasion.</p>
<p>For PUCCH transmission occasion <span
class="math inline">\(i(g)\)</span>, the UE determines a PUCCH or a
PUSCH transmission to multiplex the HARQ-ACK information according to
the procedures in clauses 9.2.3 and 9.2.5.</p>
<p>If <span class="math inline">\(O_{ACK} + O_{SR} + O_{CSI} \leq
11\)</span>, the UE determines a number of HARQ-ACK information bits
<span class="math inline">\(n_{HARQ - ACK,g}\ \)</span>for group <span
class="math inline">\(g\ \)</span>and a number of HARQ-ACK information
bits <span class="math inline">\(n_{HARQ - ACK,(g + 1)mod2}\)</span> for
group <span class="math inline">\((g + 1)mod2\)</span> as described in
clause 9.1.3.1 where <span
class="math inline">\(N_{\text{SPS},c}\)</span> is included in <span
class="math inline">\(n_{HARQ - ACK,g}\)</span> and, if <span
class="math inline">\(q = 1\)</span> and <span
class="math inline">\(V_{DAI}^{(g + 1)mod2} \neq \varnothing\)</span>,
the UE determines <span class="math inline">\(n_{HARQ - ACK,(g +
1)mod2}\)</span> by setting <span
class="math inline">\({V_{DAI,m_{last}}^{DL} = V}_{DAI}^{(g +
1)mod2}\)</span>. For obtaining a PUCCH transmission power, if <span
class="math inline">\(q = 0\)</span>, <span
class="math inline">\(n_{HARQ - ACK}\  = \ n_{HARQ - ACK,\ \
g}\)</span>; else, <span class="math inline">\(n_{HARQ - ACK}\  = \
n_{HARQ - ACK,g} + n_{HARQ - ACK,\ \ (g + 1)mod2}\)</span>.</p>
<h3 id="type-3-harq-ack-codebook-determination">9.1.4 Type-3 HARQ-ACK
codebook determination </h3>
<p>If a UE is provided <em>pdsch-HARQ-ACK-OneShotFeedback</em> or
<em>pdsch-HARQ-ACK-EnhType3ToAddModList</em>, the UE determines <span
class="math inline">\({\widetilde{o}}_{0}^{ACK},{\widetilde{o}}_{1}^{ACK},\ldots,{\widetilde{o}}_{O_{ACK}
- 1}^{ACK}\)</span> HARQ-ACK information bits, for a total number of
<span class="math inline">\(O_{ACK}\)</span> HARQ-ACK information bits,
of a Type-3 HARQ-ACK codebook according to the following procedure. If
the UE is provided <em>pdsch-HARQ-ACK-EnhType3ToAddModList</em> and a
DCI format scheduling PDSCH reception and triggering the Type-3 HARQ-ACK
codebook includes an enhanced Type 3 codebook indicator field that
provides a value for <em>pdsch-HARQ-ACK-EnhType3Index</em>, the UE
determines a size of a set of indicated serving cells <span
class="math inline">\(N_{cells}^{DL,ind}\)</span> and a size of a set of
indicated HARQ process numbers <span
class="math inline">\(N_{HARQ,c}^{DL,ind}\)</span> for each indicated
serving cell and each indicated HARQ process number from the entry in
<em>pdsch-HARQ-ACK-EnhType3ToAddModList</em> corresponding to the
<em>pdsch-HARQ-ACK-EnhType3Index</em> value. Each bit from MSB to LSB
provided by <em>perCC</em> corresponds to a serving cell in ascending
order of serving cell index, where value ‘1’ or value ‘0’ indicate
HARQ-ACK for the corresponding serving cell is included or not included
in the Type 3 HARQ-ACK codebook, respectively. Each bit string provided
by <em>perHARQ</em> corresponds to a serving cell in ascending order of
serving cell index, and each bit from MSB to LSB within a bit string
corresponds to a HARQ process number on a corresponding serving cell in
ascending order of HARQ process number, where value ‘1’ or value ‘0’
indicate HARQ-ACK for the corresponding HARQ process number on the
corresponding serving cell is included or not included in the Type 3
HARQ-ACK codebook, respectively. If the DCI format does not include the
enhanced Type 3 codebook indicator field, the
<em>pdsch-HARQ-ACK-EnhType3Index</em> value is zero.</p>
<p>Set <span class="math inline">\(N_{cells}^{DL}\)</span> to the number
of configured serving cells or, when applicable, to <span
class="math inline">\(N_{cells}^{DL,ind}\)</span>.</p>
<p>Set <span class="math inline">\(N_{HARQ,c}^{DL}\)</span> to the value
of <em>nrofHARQ-ProcessesForPDSCH</em> or
<em>nrofHARQ-ProcessesForPDSCH-v1700</em> for serving cell <span
class="math inline">\(c\)</span>, if provided; else, set <span
class="math inline">\(N_{HARQ,c}^{DL} = 8\)</span> . When applicable,
set <span class="math inline">\(N_{HARQ,c}^{DL}\)</span> to <span
class="math inline">\(N_{HARQ,c}^{DL,ind}\)</span>.</p>
<p>Set <span class="math inline">\(N_{TB,c}^{DL}\)</span> to the maximum
value of <em>maxNrofCodeWordsScheduledByDCI</em> in
<em>PDSCH-config</em> and <em>PDSCH-configMulticast</em> for serving
cell <span class="math inline">\(c\)</span> if
<em>harq-ACK-SpatialBundlingPUCCH</em> is provided and <span
class="math inline">\({NDI}_{HARQ} = 0\)</span>, or if
<em>harq-ACK-SpatialBundlingPUCCH</em> is not provided, or if
<em>maxCodeBlockGroupsPerTransportBlock</em> is provided for serving
cell <span class="math inline">\(c\)</span>; else, set <span
class="math inline">\(N_{TB,c}^{DL} = 1\)</span>.</p>
<p>Set <span class="math inline">\(N_{HARQ -
ACK,c}^{CBG/TB,max}\)</span> to the number of HARQ-ACK information bits
per TB for PDSCH receptions on serving cell <span
class="math inline">\(c\)</span> as described in clause 9.1.1 if
<em>maxCodeBlockGroupsPerTransportBlock</em> is provided for serving
cell <span class="math inline">\(c\)</span> and
<em>pdsch-HARQ-ACK-OneShotFeedbackCBG</em> or
<em>pdsch-HARQ-ACK-EnhType3CBG</em> corresponding to the
<em>pdsch-HARQ-ACK-EnhType3Index</em> value is provided; else, set <span
class="math inline">\(N_{HARQ - ACK,c}^{CBG/TB,max} = 0\)</span>. A UE
provided with <em>pdsch-HARQ-ACK-OneShotFeedbackCBG</em> or
<em>pdsch-HARQ-ACK-EnhType3CBG</em> does not expect to be provided with
different values of <em>maxCodeBlockGroupsPerTransportBlock</em> for
different priority indexes in
<em>pdsch-CodeBlockGroupTransmissionList</em> for serving cell
<em>c.</em></p>
<p>Set <span class="math inline">\({NDI}_{HARQ} = 0\)</span> if
<em>pdsch-HARQ-ACK-OneShotFeedbackNDI</em> or
<em>pdsch-HARQ-ACK-EnhType3NDI</em> is provided; else set <span
class="math inline">\({NDI}_{HARQ} = 1\)</span>.</p>
<p>Set <span class="math inline">\(c = 0\)</span> – serving cell index
in the set of serving cells</p>
<p>Set <span class="math inline">\(h = 0\)</span> – HARQ process number
index in the set of numbers of HARQ processes</p>
<p>Set <span class="math inline">\(t = 0\)</span> – TB index</p>
<p>Set <span class="math inline">\(g = 0\)</span> – CBG index</p>
<p>Set <span class="math inline">\(j = 0\)</span></p>
<p>while <span class="math inline">\({c &lt;
N}_{cells}^{DL}\)</span></p>
<p>while <span class="math inline">\(h &lt; N_{HARQ,c}^{DL}\)</span></p>
<p>if <em>downlinkHARQ-FeedbackDisabled</em> is not provided, or is
provided and indicates enabled HARQ-ACK information for <span
class="math inline">\(h\)</span>, or
<em>harq-feedbackEnablingforSPSactive</em> is provided and enabled and
<span class="math inline">\(h\)</span> corresponds to a transport block
in a first SPS PDSCH reception after an activation of SPS PDSCH
receptions</p>
<p>if <span class="math inline">\({NDI}_{HARQ} = 0\)</span></p>
<p>if <span class="math inline">\(N_{HARQ - ACK,c}^{CBG/TB,max} &gt;
0\)</span></p>
<p>while <span class="math inline">\(t &lt; N_{TB,c}^{DL}\)</span></p>
<blockquote>
<p>while <span class="math inline">\(g &lt; N_{HARQ -
ACK,c}^{CBG/TB,max}\)</span></p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span>=
HARQ-ACK information bit for CBG <span class="math inline">\(g\)</span>
of TB <span class="math inline">\(t\)</span> for HARQ process number
index <span class="math inline">\(h\)</span> in the set of numbers of
HARQ processes of serving cell <span class="math inline">\(c\)</span>,
if any; else, <span class="math inline">\({\widetilde{o}}_{j}^{ACK} =
0\)</span></p>
<p><span class="math inline">\(j = j + 1\)</span></p>
<p><span class="math inline">\(g = g + 1\)</span></p>
<p>end while</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span>= NDI
value indicated in the DCI format corresponding to the HARQ-ACK
information bit(s) for TB <span class="math inline">\(t\)</span> for
HARQ process number index <span class="math inline">\(h\)</span> in the
set of numbers of HARQ processes on serving cell <span
class="math inline">\(c\)</span>, if any; else, <span
class="math inline">\({\widetilde{o}}_{j}^{ACK} = 0\)</span></p>
<p><span class="math inline">\(g = 0\)</span></p>
<p><span class="math inline">\(j = j + 1\)</span></p>
<p><span class="math inline">\(t = t + 1\)</span></p>
<p>end while</p>
</blockquote>
<p>else</p>
<blockquote>
<p>while <span class="math inline">\(t &lt; N_{TB,c}^{DL}\)</span></p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span>=
HARQ-ACK information bit for TB <span class="math inline">\(t\)</span>
for HARQ process index <span class="math inline">\(h\)</span> in the set
of numbers of HARQ processes of serving cell <span
class="math inline">\(c\)</span>, if any; else, <span
class="math inline">\({\widetilde{o}}_{j}^{ACK} = 0\)</span></p>
<p><span class="math inline">\(j = j + 1\)</span></p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span>= NDI
value indicated in the DCI format corresponding to the HARQ-ACK
information bit(s) for TB <span class="math inline">\(t\)</span> for
HARQ process number index <span class="math inline">\(h\)</span> in the
set of numbers of HARQ processes on serving cell <span
class="math inline">\(c\)</span>, if any; else, <span
class="math inline">\({\widetilde{o}}_{j}^{ACK} = 0\)</span></p>
<p><span class="math inline">\(j = j + 1\)</span></p>
<p><span class="math inline">\(t = t + 1\)</span></p>
<p>end while</p>
</blockquote>
<p>end if</p>
<p><span class="math inline">\(t = 0\)</span></p>
<p>else</p>
<p>if <span class="math inline">\(N_{HARQ - ACK,c}^{CBG/TB,max} &gt;
0\)</span></p>
<blockquote>
<p>while <span class="math inline">\(t &lt; N_{TB,c}^{DL}\)</span></p>
<p>if UE has obtained HARQ-ACK information for TB <span
class="math inline">\(t\)</span> for HARQ process number index <span
class="math inline">\(h\)</span> in the set of numbers of HARQ processes
on serving cell <span class="math inline">\(c\)</span> corresponding to
a PDSCH reception and has not reported the HARQ-ACK information
corresponding to the PDSCH reception</p>
<p>while <span class="math inline">\(g &lt; N_{HARQ -
ACK,c}^{CBG/TB,max}\)</span></p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span>=
HARQ-ACK information bit for CBG <span class="math inline">\(g\)</span>
of TB <span class="math inline">\(t\)</span> for HARQ process number
index <span class="math inline">\(h\)</span> in the set of numbers of
HARQ processes of serving cell <span
class="math inline">\(c\)</span></p>
<p><span class="math inline">\(j = j + 1\)</span></p>
<p><span class="math inline">\(g = g + 1\)</span></p>
<p>end while</p>
<p>else</p>
<p>while <span class="math inline">\(g &lt; N_{HARQ -
ACK,c}^{CBG/TB,max}\)</span></p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK} =
NACK\)</span></p>
<p><span class="math inline">\(j = j + 1\)</span></p>
<p><span class="math inline">\(g = g + 1\)</span></p>
<p>end while</p>
<p>end if</p>
<p><span class="math inline">\(g = 0\)</span></p>
<p><span class="math inline">\(t = t + 1\)</span></p>
<p>end while</p>
</blockquote>
<p>else</p>
<blockquote>
<p>while <span class="math inline">\(t &lt; N_{TB,c}^{DL}\)</span></p>
<p>if UE has obtained HARQ-ACK information for TB <span
class="math inline">\(t\)</span> for HARQ process number index <span
class="math inline">\(h\)</span> in the set of numbers of HARQ processes
on serving cell <span class="math inline">\(c\)</span> corresponding to
a PDSCH reception and has not reported the HARQ-ACK information
corresponding to the PDSCH reception</p>
<p>if <em>harq-ACK-SpatialBundlingPUCCH</em> is not provided</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span>=
HARQ-ACK information bit for TB <span class="math inline">\(t\)</span>
for HARQ process number index <span class="math inline">\(h\)</span> in
the set of numbers of HARQ processes of serving cell <span
class="math inline">\(c\)</span></p>
<p>else</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span>=
binary AND operation of the HARQ-ACK information bits corresponding to
first and second transport blocks for HARQ process number index <span
class="math inline">\(h\)</span> in the set of numbers of HARQ processes
of serving cell <span class="math inline">\(c\)</span>. If the UE
receives one transport block, the UE assumes ACK for the second
transport block</p>
<p>end if</p>
<p><span class="math inline">\(j = j + 1\)</span></p>
<p><span class="math inline">\(t = t + 1\)</span></p>
<p>else</p>
<p><span class="math inline">\({\widetilde{o}}_{j}^{ACK} =
NACK\)</span></p>
<p><span class="math inline">\(j = j + 1\)</span></p>
<p><span class="math inline">\(t = t + 1\)</span></p>
<p>end if</p>
<p>end while</p>
</blockquote>
<p>end if</p>
<p><span class="math inline">\(t = 0\)</span></p>
<p>end if</p>
<p>end if</p>
<p><span class="math inline">\(h = h + 1\)</span></p>
<p>end while</p>
<p><span class="math inline">\(h = 0\)</span></p>
<p><span class="math inline">\(c = c + 1\)</span></p>
<p>end while</p>
<p>If <span class="math inline">\(N_{TB,c}^{DL} &gt; 1\)</span>, when a
UE receives a PDSCH with one transport block, the HARQ-ACK information
is associated with the first transport block.</p>
<p>If a UE receives a SPS PDSCH, or a PDSCH that is scheduled by a DCI
format that does not support CBG-based PDSCH receptions for a serving
cell <span class="math inline">\(c\)</span>, and if
<em>maxCodeBlockGroupsPerTransportBlock</em> is provided for serving
cell <span class="math inline">\(c\)</span>, and
<em>pdsch-HARQ-ACK-OneShotFeedbackCBG</em> or
<em>pdsch-HARQ-ACK-EnhType3CBG</em> corresponding to the
<em>pdsch-HARQ-ACK-EnhType3Index</em> value is provided, the UE repeats
<span class="math inline">\(N_{HARQ - ACK,c}^{CBG/TB,max}\)</span> times
the HARQ-ACK information for the transport block, if any, in the
PDSCH.</p>
<p>If a UE detects a DCI format that includes a One-shot HARQ-ACK
request field with value 1, the UE determines a PUCCH or a PUSCH to
multiplex a Type-3 HARQ-ACK codebook for transmission in a slot as
described in clauses 9.2.3 and 9.2.5. If the UE is provided a periodic
cell switching pattern for PUCCH transmissions by
<em>pucch-sSCellPattern</em>, the UE determines the slot and a
corresponding cell based on the periodic cell switching pattern as
described in clause 9.A. The UE multiplexes only the Type-3 HARQ-ACK
codebook in the PUCCH or the PUSCH for transmission in the slot. If the
UE is provided <em>pdsch-HARQ-ACK-EnhType3ToAddModList</em>, the UE
expects that HARQ-ACK information in a Type-1 or Type-2 HARQ-ACK
codebook in a slot is associated with HARQ process(es) of the Type-3
HARQ-ACK codebook in the slot.</p>
<p>If</p>
<p>- a UE detects a DCI format that includes a One-shot HARQ-ACK request
field with value 1, and</p>
<p>- the CRC of the DCI is scrambled by a C-RNTI or an MCS-C-RNTI,
and</p>
<p>- <em>resourceAllocation</em> = <em>resourceAllocationType0</em> and
all bits of the frequency domain resource assignment field in the DCI
format are equal to 0, or</p>
<p>- <em>resourceAllocation</em> = <em>resourceAllocationType1</em> and
all bits of the frequency domain resource assignment field in the DCI
format are equal to 1, or</p>
<p>- <em>resourceAllocation = dynamicSwitch</em> and all bits of the
frequency domain resource assignment field in the DCI format are equal
to 0 or 1</p>
<p>the DCI format provides a request for a Type-3 HARQ-ACK codebook
report and does not schedule a PDSCH reception. If the UE is provided
<em>pdsch-HARQ-ACK-EnhType3ToAddModList</em> and the DCI format includes
an enhanced Type 3 codebook indicator field that provides a value for
<em>pdsch-HARQ-ACK-EnhType3Index</em>, the UE determines a size of a set
of indicated serving cells <span
class="math inline">\(N_{cells}^{DL,ind}\)</span> and a size of a set of
indicated HARQ process numbers <span
class="math inline">\(N_{HARQ,c}^{DL,ind}\)</span> for each indicated
serving cell <span class="math inline">\(and\ each\ indicated\ HARQ\
process\ number\)</span> from the entry in
<em>pdsch-HARQ-ACK-EnhType3ToAddModList</em> corresponding to the
<em>pdsch-HARQ-ACK-EnhType3Index</em> value. If the DCI format does not
include the enhanced Type 3 codebook indicator field, the
<em>pdsch-HARQ-ACK-EnhType3Index</em> value is provided by the value of
the MCS field for transport block 1 in the DCI format 1_1 or the MCS
field in the DCI format 1_2. The UE is expected to provide HARQ-ACK
information in response to the request for the Type-3 HARQ-ACK codebook
after <span class="math inline">\(N\)</span> symbols from the last
symbol of a PDCCH providing the DCI format, where the value of <span
class="math inline">\(N\)</span> is provided in clause 10.2 by replacing
"SPS PDSCH release" with "DCI format".</p>
<p>If a UE multiplexes HARQ-ACK information in a PUSCH transmission, the
UE generates the HARQ-ACK codebook as described in this clause except
that <em>harq-ACK-SpatialBundlingPUCCH</em> is replaced by
<em>harq-ACK-SpatialBundlingPUSCH</em>.</p>
<h3 id="harq-ack-codebook-retransmission">9.1.5 HARQ-ACK codebook
retransmission </h3>
<p>With reference to slots of PUCCH transmissions on the primary cell
and for Type-1 or Type-2 HARQ-ACK codebooks, a UE that transmitted or
would transmit a PUCCH or a PUSCH with a first HARQ-ACK codebook in slot
<span class="math inline">\(m\)</span> can be indicated by a DCI format
with CRC scrambled by a C-RNTI or a MCS-C-RNTI that does not schedule a
PDSCH reception [4, TS 38.212] and is received in a PDCCH ending in slot
<span class="math inline">\(n\)</span>, to transmit a PUCCH with the
first HARQ-ACK codebook in slot <span class="math inline">\(n +
k\)</span>, where slot <span class="math inline">\(n + k\)</span> is
after slot <span class="math inline">\(m\)</span>. The UE determines
<span class="math inline">\(k\)</span> and a resource for the PUCCH
transmission as described in clauses 9.2.3 and 9.2.5. If the UE is
provided a periodic cell switching pattern for PUCCH transmissions by
<em>pucch-sSCellPattern</em>, the UE further determines a corresponding
cell based on the periodic cell switching pattern as described in clause
9.A.</p>
<p>If the HARQ-ACK retransmission indicator field value in the DCI
format 1_1 or 1_2 is '1', the UE determines slot <span
class="math inline">\(m\)</span> as <span class="math inline">\(m = n -
l\)</span> where <span class="math inline">\(l\)</span> is determined by
a one-to-one mapping in ascending order among the values of the MCS
field for transport block 1 in the DCI format 1_1 or the MCS field in
the DCI format 1_2 and the values from -7 to 24.</p>
<p>If the DCI format 1_1 or 1_2 includes a priority indicator field
having a value, a priority value of first HARQ-ACK information in the
first HARQ-ACK codebook is same as the value of the priority indicator
field; otherwise, the priority value of the first HARQ-ACK information
is zero.</p>
<p>If a UE</p>
<p>- is not provided <em>coresetPoolIndex</em> or is provided
<em>coresetPoolIndex</em> with a value of 0 for first CORESETs on active
DL BWPs of serving cells, and</p>
<p>- is provided <em>coresetPoolIndex</em> with a value of 1 for second
CORESETs on active DL BWPs of the serving cells, and</p>
<p>- is provided <em>ackNackFeedbackMode</em> = <em>separate</em></p>
<p>the first HARQ-ACK codebook is associated with the first CORESETs or
with the second CORESETs, as described in clause 9, when the UE receives
the PDCCH providing the DCI format in a CORESET from the first CORESETs
or from the second CORESETs, respectively.</p>
<p>If the UE would also multiplex in the PUCCH transmission in slot
<span class="math inline">\(n + k\)</span> a second HARQ-ACK codebook
with second HARQ-ACK information of same priority value as for the first
HARQ-ACK information in the first HARQ-ACK codebook, the UE appends the
first HARQ-ACK codebook to the second HARQ-ACK codebook. The UE
determines to multiplex the second HARQ-ACK information in the PUCCH
transmission in slot <span class="math inline">\(n + k\)</span> as
described in clause 9.2.3. <span class="math inline">\(O_{ACK}\)</span>
is the total number of the first HARQ-ACK information bits and the
second HARQ-ACK information bits if any.</p>
<p>If the UE performs a procedure for deferring third HARQ-ACK
information for SPS PDSCH receptions to slot <span
class="math inline">\(n + k\)</span>, as described in clause 9.2.5.4,
and the third HARQ-ACK information has same priority value as a priority
value indicated by the DCI format triggering the PUCCH transmission in
slot <span class="math inline">\(n + k\)</span>, the UE multiplexes in
the PUCCH transmission in slot <span class="math inline">\(n +
k\)</span> the first HARQ-ACK information with the priority value that
results in slot <span class="math inline">\(n + k\)</span> according to
the procedure in this clause, by appending the third HARQ-ACK
information to the first HARQ-ACK information. If the UE would also
multiplex in the PUCCH transmission in slot <span
class="math inline">\(n + k\)</span> the second HARQ-ACK information
with the priority value, the UE appends the first HARQ-ACK information
followed by the third HARQ-ACK information to the second HARQ-ACK
information. <span class="math inline">\(O_{ACK}\)</span> is the total
number of the first HARQ-ACK information bits, the second HARQ-ACK
information bits if any and the third HARQ-ACK information bits if
any.</p>
<p>If in slot <span class="math inline">\(m\)</span> the UE would
transmit a first PUCCH with first HARQ-ACK information over more than
one slot and a second PUCCH with second HARQ-ACK information over one or
more slots, where the first and second HARQ-ACK information have same
priority value, the UE multiplexes in the PUCCH transmission in slot
<span class="math inline">\(n + k\)</span> one of</p>
<p>- the first HARQ-ACK information if the first PUCCH starts at an
earlier slot than the second PUCCH, or</p>
<p>- the second HARQ-ACK information if the second PUCCH starts at an
earlier slot than the first PUCCH.</p>
<p>If <span class="math inline">\(O_{ACK} + O_{SR} + O_{CSI} \leq
11\)</span>, the UE determines a number of HARQ-ACK information bits for
obtaining a transmission power for a PUCCH, as described in clause
7.2.1, as <span class="math inline">\(n_{HARQ - ACK} = \ n_{HARQ -
ACK,0} + n_{HARQ - ACK,1} + n_{HARQ - ACK,2}\)</span> where</p>
<p>- <span class="math inline">\(n_{HARQ - ACK,0}\)</span> is the number
of HARQ-ACK information bits that the UE determines as described in
clause 9.1.2.1 or 9.1.3.1 for the first HARQ-ACK information bits</p>
<p>- <span class="math inline">\(n_{HARQ - ACK,1}\)</span> is the number
of HARQ-ACK information bits, if any, that the UE determines as
described in clause 9.1.2.1 or 9.1.3.1 for the second HARQ-ACK
information bits</p>
<p>- <span class="math inline">\(n_{HARQ - ACK,2}\)</span> is determined
as described in clause 9.1.2.1 or 9.1.3.1 for the third HARQ-ACK
information bits for SPS PDSCH receptions deferred to slot <span
class="math inline">\(n + k\)</span>, if any</p>
<h2 id="uci-reporting-in-physical-uplink-control-channel">9.2 UCI
reporting in physical uplink control channel</h2>
<p>UCI types reported in a PUCCH include HARQ-ACK information, SR, LRR,
and CSI. UCI bits include HARQ-ACK information bits, if any, SR
information bits, if any, LRR information bit, if any, and CSI bits, if
any. The HARQ-ACK information bits correspond to a HARQ-ACK codebook as
described in clause 9.1. For the remaining of this clause, any reference
to SR is applicable for SR and/or for LRR.</p>
<p>A UE may transmit one or two PUCCHs on a serving cell in different
symbols within a slot. When the UE transmits two PUCCHs in a slot and
the UE is not provided <em>ackNackFeedbackMode</em> = <em>separate</em>,
at least one of the two PUCCHs uses PUCCH format 0 or PUCCH format
2.</p>
<p>If a UE is provided <em>ackNackFeedbackMode</em> = <em>separate</em>,
the UE may transmit up to two PUCCHs with HARQ-ACK information in
different symbols within a slot.</p>
<p>In clauses 9.2.3, 9.2.5.1, 9.2.5.2 and 9.2.5.3, a UE assumes 11 CRC
bits if a number of respective UCI bits is larger than or equal to 360;
otherwise, the UE determines a number of CRC bits based on the number of
respective UCI bits as described in [5, TS 38.212].</p>
<h3 id="pucch-resource-sets">9.2.1 PUCCH Resource Sets</h3>
<p>If a UE does not have dedicated PUCCH resource configuration,
provided by <em>PUCCH-ResourceSet</em> in <em>PUCCH-Config</em>, a PUCCH
resource set is provided by <em>pucch-ResourceCommon</em> through an
index to a row of Table 9.2.1-1 for transmission of HARQ-ACK information
on PUCCH in an initial UL BWP of <span
class="math inline">\(N_{\text{BWP}}^{\text{size}}\)</span> PRBs. For
operation in FR2-2, <em>nrofPRBs</em> provided in
<em>PUCCH-ConfigCommon</em> can also provide a number of <span
class="math inline">\(N_{RB}\)</span> RBs for the PUCCH resource set;
otherwise <span class="math inline">\(N_{RB} = 1\)</span>.</p>
<p>The PUCCH resource set includes sixteen resources, each corresponding
to a PUCCH format, a first symbol, a duration, a PRB offset <span
class="math inline">\({RB}_{\text{BWP}}^{\text{offset}}\)</span>, and a
cyclic shift index set for a PUCCH transmission.</p>
<p>The UE transmits a PUCCH using frequency hopping if not provided
<em>useInterlacePUCCH-PUSCH</em> in <em>BWP-UplinkCommon</em>;
otherwise, the UE transmits a PUCCH without frequency hopping.</p>
<p>An orthogonal cover code with index 0 is used for a PUCCH resource
with PUCCH format 1 in Table 9.2.1-1 except when index 3, 7, or 11 is
indicated by <em>pucch-ResourceCommon</em> and
<em>useInterlacePUCCH-PUSCH</em> in <em>BWP-UplinkCommon</em> is
provided.</p>
<p>The UE transmits the PUCCH using the same spatial domain transmission
filter as for a PUSCH transmission scheduled by a RAR UL grant as
described in clause 8.3.</p>
<p>If a UE is not provided any of <em>pdsch-HARQ-ACK-Codebook</em>,
<em>pdsch-HARQ-ACK-Codebook-r16</em>, or
<em>pdsch-HARQ-ACK-OneShotFeedback</em>, the UE generates at most one
HARQ-ACK information bit.</p>
<p>If the UE provides HARQ-ACK information in a PUCCH transmission in
response to detecting a DCI format scheduling a PDSCH reception or
having associated HARQ-ACK information without scheduling a PDSCH
reception, the UE determines a PUCCH resource with index <span
class="math inline">\(r_{PUCCH}\)</span>, <span
class="math inline">\(0{\leq r}_{PUCCH} \leq 15\)</span>, as <span
class="math inline">\(r_{PUCCH} = \left\lfloor \frac{2{\cdot
n}_{CCE,0}}{N_{CCE}} \right\rfloor + 2 \cdot
\mathrm{\Delta}_{PRI}\)</span>, where <span
class="math inline">\(N_{CCE}\)</span> is a number of CCEs in a CORESET
of a PDCCH reception with the DCI format, as described in clause 10.1,
<span class="math inline">\(n_{CCE,0}\)</span> is the index of a first
CCE for the PDCCH reception, and <span
class="math inline">\(\mathrm{\Delta}_{PRI}\)</span> is a value of the
PUCCH resource indicator field in the DCI format.</p>
<p>When the PDCCH reception by a UE includes first and second PDCCH
candidates from respective first and second search space sets, as
described in clause 10.1, the CORESET and <span
class="math inline">\(n_{CCE,0}\)</span> are associated with the search
space set having the smaller index. If</p>
<p>- the first search space set has larger index than the second search
space set and includes the first PDCCH candidate and a third PDCCH
candidate that have same first CCE index and CCE aggregation levels 8
and 16, or 16 and 8, respectively,</p>
<p>- the second search space set includes the second PDCCH candidate
that has same index and same CCE aggregation level as the first PDCCH
candidate, and a fourth PDCCH candidate that has same index and same CCE
aggregation level as the third PDCCH candidate,</p>
<p>- the CORESET associated with the first search space set has
<em>cce-REG-MappingType</em> = '<em>nonInterleaved</em>' and has
duration of one symbol, and</p>
<p>- the second PDCCH candidate has different first CCE index than the
fourth PDCCH candidate</p>
<p>the UE determines <span class="math inline">\(n_{CCE,0}\)</span> from
the PDCCH candidate with CCE aggregation level 16 among the second PDCCH
candidate and the fourth PDCCH candidate.</p>
<p>If <span class="math inline">\(\left\lfloor
\frac{r_{\text{PUCCH}}}{8} \right\rfloor = 0\)</span> and a UE is
provided a PUCCH resource by <em>pucch-ResourceCommon</em> and is not
provided <em>useInterlacePUCCH-PUSCH</em> in
<em>BWP-UplinkCommon</em></p>
<p>- the UE determines the lowest PRB index of the PUCCH transmission in
the first hop as <span
class="math inline">\({RB}_{\text{BWP}}^{\text{offset}} \cdot N_{RB} +
\left\lfloor \frac{r_{\text{PUCCH}}}{N_{CS}} \right\rfloor \bullet
N_{RB}\)</span> and the lowest PRB index of the PUCCH transmission in
the second hop as <span
class="math inline">\({N_{\text{BWP}}^{\text{size}} -
RB}_{\text{BWP}}^{\text{offset}} \bullet N_{RB} - \left( 1 +
\left\lfloor \frac{r_{\text{PUCCH}}}{N_{CS}} \right\rfloor \right)
\bullet N_{RB}\)</span>, where <span
class="math inline">\(N_{CS}\)</span> is the total number of initial
cyclic shift indexes in the set of initial cyclic shift indexes</p>
<p>- the UE determines the initial cyclic shift index in the set of
initial cyclic shift indexes as <span
class="math inline">\(r_{\text{PUCCH}}\text{mod}N_{CS}\)</span></p>
<p>If <span class="math inline">\(\left\lfloor
\frac{r_{\text{PUCCH}}}{8} \right\rfloor = 1\)</span> and a UE is
provided a PUCCH resource by <em>pucch-ResourceCommon</em> and is not
provided <em>useInterlacePUCCH-PUSCH</em> in
<em>BWP-UplinkCommon</em></p>
<p>- the UE determines the lowest PRB index of the PUCCH transmission in
the first hop as <span
class="math inline">\({N_{\text{BWP}}^{\text{size}} -
RB}_{\text{BWP}}^{\text{offset}} \bullet N_{RB} - \left( 1 +
\left\lfloor \frac{\left( r_{\text{PUCCH}} - 8 \right)}{N_{CS}}
\right\rfloor \right) \bullet N_{RB}\)</span> and the lowest PRB index
of the PUCCH transmission in the second hop as <span
class="math inline">\({RB}_{\text{BWP}}^{\text{offset}} \bullet N_{RB} +
\left\lfloor \frac{\left( r_{\text{PUCCH}} - 8 \right)}{N_{CS}}
\right\rfloor \bullet N_{RB}\)</span></p>
<p>- the UE determines the initial cyclic shift index in the set of
initial cyclic shift indexes as <img src="media/image82.svg"
style="width:1.10417in;height:0.21875in" /></p>
<p>If a UE is provided a PUCCH resource by <em>pucch-ResourceCommon</em>
and is provided <em>useInterlacePUCCH-PUSCH</em> in
<em>BWP-UplinkCommon</em></p>
<p>- the UE determines for the PUCCH resource an interlace index <span
class="math inline">\(m\)</span> as <span class="math inline">\(m =
\left( m_{0} + \left\lfloor \frac{r_{\text{PUCCH}}}{N_{\text{CS}}}
\right\rfloor \right)\text{mod}M\)</span> where <span
class="math inline">\(M\)</span> is a number of interlaces [4, TS
38.211] and <span class="math inline">\(m_{0} =
{RB}_{\text{BWP}}^{\text{offset}}\)</span> is an interlace index offset
and <span
class="math inline">\({RB}_{\text{BWP}}^{\text{offset}}\)</span> is as
given in Table 9.2.1-1</p>
<p>- the UE determines an initial cyclic shift index in a set of initial
cyclic shift indexes as <span
class="math inline">\(r_{\text{PUCCH}}\text{mod}N_{\text{CS}}\)</span>,
where <span class="math inline">\(N_{\text{CS}}\)</span> is the total
number of initial cyclic shifts indexes in the set of initial cyclic
shift indexes in Table 9.2.1-1</p>
<p>- if <em>pucch-ResourceCommon</em> indicates</p>
<p>- index 0: the first symbol is 9 for a PUCCH resource with PUCCH
format 0 if <span class="math inline">\(r_{\text{PUCCH}} \geq
10\)</span></p>
<p>- index 1 or 2: the first symbol is 9 for a PUCCH resource with PUCCH
format 0 if <span class="math inline">\(r_{\text{PUCCH}} =
15\)</span></p>
<p>- index 3, 7, or 11: an orthogonal cover code with index 1 is used
for a PUCCH resource with PUCCH format 1 if <span
class="math inline">\(r_{\text{PUCCH}} \geq 10\)</span>; otherwise, an
orthogonal cover code with index 0 is used for a PUCCH resource with
PUCCH format 1</p>
<p>- the UE does not expect <em>pucch-ResourceCommon</em> to indicate
index 15</p>
<p>Table 9.2.1-1: PUCCH resource sets before dedicated PUCCH resource
configuration</p>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 17%" />
<col style="width: 15%" />
<col style="width: 22%" />
<col style="width: 16%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th style="text-align: center;"><strong>PUCCH format</strong></th>
<th style="text-align: center;"><strong>First symbol</strong></th>
<th style="text-align: center;"><strong>Number of symbols</strong></th>
<th style="text-align: center;"><strong>PRB offset</strong> <span
class="math inline">\({RB}_{\text{BWP}}^{\text{offset}}\)</span></th>
<th style="text-align: center;"><strong>Set of initial CS
indexes</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">12</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">{0, 3}</td>
</tr>
<tr>
<td>1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">12</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">{0, 4, 8}</td>
</tr>
<tr>
<td>2</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">12</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">{0, 4, 8}</td>
</tr>
<tr>
<td>3</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">{0, 6}</td>
</tr>
<tr>
<td>4</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">{0, 3, 6, 9}</td>
</tr>
<tr>
<td>5</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">{0, 3, 6, 9}</td>
</tr>
<tr>
<td>6</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">{0, 3, 6, 9}</td>
</tr>
<tr>
<td>7</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">{0, 6}</td>
</tr>
<tr>
<td>8</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">{0, 3, 6, 9}</td>
</tr>
<tr>
<td>9</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">{0, 3, 6, 9}</td>
</tr>
<tr>
<td>10</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">{0, 3, 6, 9}</td>
</tr>
<tr>
<td>11</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">{0, 6}</td>
</tr>
<tr>
<td>12</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">{0, 3, 6, 9}</td>
</tr>
<tr>
<td>13</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">{0, 3, 6, 9}</td>
</tr>
<tr>
<td>14</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">{0, 3, 6, 9}</td>
</tr>
<tr>
<td>15</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;"><span
class="math display">\[\left\lfloor
\frac{N_{\text{BWP}}^{\text{size}}}{4} \right\rfloor\]</span></td>
<td style="text-align: center;">{0, 3, 6, 9}</td>
</tr>
</tbody>
</table>
<p>If a UE has dedicated PUCCH resource configuration, the UE is
provided by higher layers with one or more PUCCH resources.</p>
<p>A PUCCH resource includes the following parameters:</p>
<p>- a PUCCH resource index provided by <em>pucch-ResourceId</em></p>
<p>- an index of the first PRB prior to frequency hopping or for no
frequency hopping by <em>startingPRB</em>, if a UE is not provided
<em>useInterlacePUCCH-PUSCH</em> in <em>BWP-UplinkDedicated</em></p>
<p>- an index of the first PRB after frequency hopping by
<em>secondHopPRB</em>, if a UE is not provided
<em>useInterlacePUCCH-PUSCH</em> in <em>BWP-UplinkDedicated</em></p>
<p>- an indication for intra-slot frequency hopping by
<em>intraSlotFrequencyHopping</em>, if a UE is not provided
<em>useInterlacePUCCH-PUSCH</em> in <em>BWP-UplinkDedicated</em></p>
<p>- an index of a first interlace by <em>interlace0</em>, if a UE is
provided <em>useInterlacePUCCH-PUSCH</em> in
<em>BWP-UplinkDedicated</em></p>
<p>- if provided, an index of a second interlace by <em>interlace1</em>,
if a UE is provided <em>useInterlacePUCCH-PUSCH</em> in
<em>BWP-UplinkDedicated</em></p>
<p>- an index of an RB set by <em>rb-SetIndex</em>, if a UE is provided
<em>useInterlacePUCCH-PUSCH</em> in <em>BWP-UplinkDedicated</em></p>
<p>- a configuration for a PUCCH format provided by <em>format</em></p>
<p>For operation with shared spectrum channel access, the UE does not
expect that two hops of a PUCCH transmission are in different RB
sets.</p>
<p>The UE expects that <em>useInterlacePUCCH-PUSCH</em> in
<em>BWP-UplinkCommon</em> and <em>useInterlacePUCCH-PUSCH</em> in
<em>BWP-UplinkDedicated</em> are provided either in all UL BWPs or in
none of the UL BWPs for a serving cell.</p>
<p>If a UE is provided <em>useInterlacePUCCH-PUSCH</em> in
<em>BWP-UplinkDedicated</em>, the UE determines available RBs for PUCCH
transmissions within the active UL BWP as the intersection of RBs
corresponding to an interlace index provided by <em>interlace0</em> and,
if provided, <em>interlace1</em>, and RBs of an RB set provided by
<em>rb-SetIndex</em>. The intersection results in <span
class="math inline">\(M_{\text{interlace,0}}^{\text{PUCCH}}\)</span> RBs
in the first interlace and the UE expects that <span
class="math inline">\(M_{\text{interlace,0}}^{\text{PUCCH}}\)</span> is
either 10 or 11. If <em>interlace1</em> is provided, the intersection
results in <span
class="math inline">\(M_{\text{interlace,1}}^{\text{PUCCH}}\)</span> RBs
in the second interlace and the UE expects that <span
class="math inline">\(M_{\text{interlace,1}}^{\text{PUCCH}}\)</span> is
either 10 or 11.</p>
<p>If the <em>format</em> indicates <em>PUCCH-format0</em>, the PUCCH
format configured for a PUCCH resource is PUCCH format 0, where the
PUCCH resource also includes an index for an initial cyclic shift
provided by <em>initialCyclicShift</em>, a number of symbols for a PUCCH
transmission provided by <em>nrofSymbols</em>, a first symbol for the
PUCCH transmission provided by <em>startingSymbolIndex</em>. For PUCCH
transmission in FR2-2, the PUCCH resource can also include a number of
PRBs <span class="math inline">\(M_{\text{RB}}^{\text{PUCCH,}0}\)</span>
provided by <em>nrofPRBs</em>; otherwise, <span
class="math inline">\(M_{\text{RB}}^{\text{PUCCH,}0} =
1\)</span><em>.</em></p>
<p>If the <em>format</em> indicates <em>PUCCH-format1</em>, the PUCCH
format configured for a PUCCH resource is PUCCH format 1, where the
PUCCH resource also includes an index for an initial cyclic shift
provided by <em>initialCyclicShift</em>, a number of symbols for a PUCCH
transmission provided by <em>nrofSymbols</em>, a first symbol for the
PUCCH transmission provided by <em>startingSymbolIndex</em>, and an
index for an orthogonal cover code by <em>timeDomainOCC</em>. For PUCCH
transmission in FR2-2, the PUCCH resource can also include a number of
PRBs <span class="math inline">\(M_{\text{RB}}^{\text{PUCCH,}1}\)</span>
provided by <em>nrofPRBs</em>; otherwise, <span
class="math inline">\(M_{\text{RB}}^{\text{PUCCH,}1} =
1\)</span><em>.</em></p>
<p>If the <em>format</em> indicates <em>PUCCH-format2</em> or
<em>PUCCH-format3</em>, the PUCCH format configured for a PUCCH resource
is PUCCH format 2 or PUCCH format 3, respectively, where the PUCCH
resource also includes a number of PRBs provided by <em>nrofPRBs</em>, a
number of symbols for a PUCCH transmission provided by
<em>nrofSymbols</em>, and a first symbol for the PUCCH transmission
provided by <em>startingSymbolIndex</em>. If a UE is provided by
<em>useInterlacePUCCH-PUSCH</em> in <em>BWP-UplinkDedicated,</em> and
the <em>format</em> indicates <em>PUCCH-format2</em> or
<em>PUCCH-format3</em> and <em>PUCCH-ResourceExt</em> is provided, the
PUCCH resource also includes an index of a second interlace by
<em>interlace1</em>, if provided; otherwise, if <em>interlace1</em> is
not provided, the PUCCH resource also includes, if provided, an
orthogonal cover code length by <em>occ-Length</em> and an orthogonal
cover code index by <em>occ-Index</em>. If the <em>format</em> indicates
<em>PUCCH-format3</em> and <em>PUCCH-ResourceExt</em> is provided, the
UE assumes that the <span
class="math inline">\(M_{\text{RB}}^{\text{PUCCH,}3}\)</span> [4, TS
38.211] PRBs with the lowest indexes within the first, and if
configured, second interlace are used for PUCCH transmission.</p>
<p>If the <em>format</em> indicates <em>PUCCH-format4</em>, the PUCCH
format configured for a PUCCH resource is PUCCH format 4, where the
PUCCH resource also includes a number of symbols for a PUCCH
transmission provided by <em>nrofSymbols</em>, an orthogonal cover code
length by <em>occ-Length</em>, an orthogonal cover code index by
<em>occ-Index</em>, and a first symbol for the PUCCH transmission
provided by <em>startingSymbolIndex</em>. For PUCCH transmission in
FR2-2, the PUCCH resource can also include a number of PRBs <span
class="math inline">\(M_{\text{RB}}^{\text{PUCCH,}4}\)</span> provided
by <em>nrofPRBs</em>; otherwise, <span
class="math inline">\(M_{\text{RB}}^{\text{PUCCH,}4} =
1\)</span><em>.</em></p>
<p>If a UE is provided <em>subslotLengthForPUCCH</em> in a
<em>PUCCH-Config</em>, the first symbol of a PUCCH resource provided by
<em>PUCCH-ResourceSet</em> or <em>SPS-PUCCH-AN-List</em> in
<em>PUCCH-Config</em> or by <em>n1PUCCH-AN</em> in SPS-Config for
multiplexing HARQ-ACK in a PUCCH transmission is relative to the first
symbol of the <em>subslotLengthForPUCCH</em> symbols [12, TS 38.331].
For the remaining cases, the first symbol of a PUCCH resource is
relative to the first symbol of a slot with <span
class="math inline">\(N_{\text{sym}}^{\text{slot}}\)</span> symbols [4,
TS 38.211].</p>
<p>A UE can be configured up to four sets of PUCCH resources in a
<em>PUCCH-Config</em>. A PUCCH resource set is provided by
<em>PUCCH-ResourceSet</em> and is associated with a PUCCH resource set
index provided by <em>pucch-ResourceSetId</em>, with a set of PUCCH
resource indexes provided by <em>resourceList</em> that provides a set
of <em>pucch-ResourceId</em> used in the PUCCH resource set, and with a
maximum number of UCI information bits the UE can transmit using a PUCCH
resource in the PUCCH resource set provided by <em>maxPayloadSize</em>.
For the first PUCCH resource set, the maximum number of UCI information
bits is 2. A maximum number of PUCCH resource indexes for a set of PUCCH
resources is provided by <em>maxNrofPUCCH-ResourcesPerSet</em>. The
maximum number of PUCCH resources in the first PUCCH resource set is 32
and the maximum number of PUCCH resources in the other PUCCH resource
sets is 8.</p>
<p>If the UE transmits <span
class="math inline">\(O_{\text{UCI}}\)</span> UCI information bits, that
include HARQ-ACK information bits, the UE determines a PUCCH resource
set to be</p>
<p>- a first set of PUCCH resources with <em>pucch-ResourceSetId</em> =
0 if <span class="math inline">\(O_{\text{UCI}} \leq 2\)</span>
including 1 or 2 HARQ-ACK information bits and a positive or negative SR
on one SR transmission occasion if transmission of HARQ-ACK information
and SR occurs simultaneously, or</p>
<p>- a second set of PUCCH resources with <em>pucch-ResourceSetId</em> =
1, if provided by higher layers, if <span class="math inline">\({2 &lt;
O}_{\text{UCI}} \leq N_{2}\)</span> where <span
class="math inline">\(N_{2}\)</span> is equal to <em>maxPayloadSize</em>
if <em>maxPayloadSize</em> is provided for the PUCCH resource set with
<em>pucch-ResourceSetId</em> = 1; otherwise <span
class="math inline">\(N_{2}\)</span> is equal to 1706, or</p>
<p>- a third set of PUCCH resources with <em>pucch-ResourceSetId</em> =
2, if provided by higher layers, if <span class="math inline">\({N_{2}
&lt; O}_{\text{UCI}} \leq N_{3}\)</span> where <span
class="math inline">\(N_{3}\)</span> is equal to <em>maxPayloadSize</em>
if <em>maxPayloadSize</em> is provided for the PUCCH resource set with
<em>pucch-ResourceSetId</em> = 2; otherwise <span
class="math inline">\(N_{3}\)</span> is equal to 1706, or</p>
<p>- a fourth set of PUCCH resources with <em>pucch-ResourceSetId</em> =
3, if provided by higher layers, if <span class="math inline">\({N_{3}
&lt; O}_{\text{UCI}} \leq 1706\)</span>.</p>
<p>If the UE is provided <em>SPS-PUCCH-AN-List</em> and transmits <span
class="math inline">\(O_{\text{UCI}}\)</span> UCI information bits that
include only HARQ-ACK information bits in response to one or more SPS
PDSCH receptions and SR, if any, the UE determines a PUCCH resource to
be</p>
<p>- a PUCCH resource provided by <em>sps-PUCCH-AN-ResourceID</em>
obtained from the first entry in <em>sps-PUCCH-AN-List</em> if <span
class="math inline">\(O_{\text{UCI}} \leq 2\)</span> including 1 or 2
HARQ-ACK information bits and a positive or negative SR on one SR
transmission occasion if transmission of HARQ-ACK information and SR
occurs simultaneously, or</p>
<p>- a PUCCH resource provided by <em>sps-PUCCH-AN-ResourceID</em>
obtained from the second entry in <em>sps-PUCCH-AN-List</em>, if
provided, if <span class="math inline">\(2 &lt; O_{\text{UCI}} \leq
N_{1,SPS}\)</span> where <span class="math inline">\(N_{1,SPS}\)</span>
is either provided by <em>maxPayloadSize</em> obtained from the second
entry in <em>sps-PUCCH-AN-List</em> or is otherwise equal to 1706,
or</p>
<p>- a PUCCH resource provided by <em>sps-PUCCH-AN-ResourceID</em>
obtained from the third entry in <em>sps-PUCCH-AN-List</em>, if
provided, if <span class="math inline">\(N_{1,SPS} &lt; O_{\text{UCI}}
\leq N_{2,SPS}\)</span> where <span
class="math inline">\(N_{2,SPS}\)</span> is either provided by
<em>maxPayloadSize</em> obtained from the third entry in
<em>sps-PUCCH-AN-List</em> or is otherwise equal to 1706, or</p>
<p>- a PUCCH resource provided by <em>sps-PUCCH-AN-ResourceID</em>
obtained from the fourth entry in <em>sps-PUCCH-AN-List</em>, if
provided, if <span class="math inline">\(N_{2,SPS} &lt; O_{\text{UCI}}
\leq N_{3,SPS}\)</span> where <span
class="math inline">\(N_{3,SPS}\)</span> is equal to 1706.</p>
<h3 id="pucch-formats-for-uci-transmission">9.2.2 PUCCH Formats for UCI
transmission</h3>
<p>If a UE is not transmitting PUSCH, and the UE is transmitting UCI,
the UE transmits UCI in a PUCCH using</p>
<p>- PUCCH format 0 if</p>
<p>- the transmission is over 1 symbol or 2 symbols,</p>
<p>- the number of HARQ-ACK information bits with positive or negative
SR (HARQ-ACK/SR bits) is 1 or 2</p>
<p>- PUCCH format 1 if</p>
<p>- the transmission is over 4 or more symbols,</p>
<p>- the number of HARQ-ACK/SR bits is 1 or 2</p>
<p>- PUCCH format 2 if</p>
<p>- the transmission is over 1 symbol or 2 symbols,</p>
<p>- the number of UCI bits is more than 2</p>
<p>- PUCCH format 3 if</p>
<p>- the transmission is over 4 or more symbols,</p>
<p>- the number of UCI bits is more than 2,</p>
<blockquote>
<p>- the PUCCH resource does not include an orthogonal cover code, or
the UE is provided <em>useInterlacePUCCH-PUSCH</em> in
<em>BWP-UplinkDedicated</em></p>
</blockquote>
<p>- PUCCH format 4 if</p>
<p>- the transmission is over 4 or more symbols,</p>
<p>- the number of UCI bits is more than 2,</p>
<p>- the PUCCH resource includes an orthogonal cover code and the UE is
not provided <em>useInterlacePUCCH-PUSCH</em> in
<em>BWP-UplinkDedicated</em></p>
<p>A spatial setting for a PUCCH transmission by a UE is provided by</p>
<p>- an indicated <em>TCI-State</em> or <em>TCI-UL-State</em>, if
provided, as described in [6, TS 38.214];</p>
<p>- <em>PUCCH-SpatialRelationInfo</em> if the UE is configured with a
single value for <em>pucch-SpatialRelationInfoId</em>;</p>
<p>- as described in [11, TS 38.321], if the UE is provided multiple
values for <em>PUCCH-SpatialRelationInfo</em>. The UE applies
corresponding actions in [11, TS 38.321] and a corresponding setting for
a spatial domain filter to transmit PUCCH in the first slot that is
after slot <span class="math inline">\(k + 3 \cdot
N_{\text{slot}}^{\text{subframe,}\mu}\)</span> where <span
class="math inline">\(k\)</span> is the slot where the UE would transmit
a PUCCH with HARQ-ACK information with ACK value corresponding to a
PDSCH reception providing the <em>PUCCH-SpatialRelationInfo</em>, each
slot consists of <span
class="math inline">\(N_{\text{symb}}^{\text{slot}}\)</span> symbols as
defined in [4, TS 38.211], and <span class="math inline">\(\mu\)</span>
is the SCS configuration for the PUCCH</p>
<p>- If <em>PUCCH-SpatialRelationInfo</em> or the indicated
<em>TCI-UL-State</em> provides <em>ssb-Index</em>, the UE transmits the
PUCCH using a same spatial domain filter as for a reception of a SS/PBCH
block with index provided by <em>ssb-Index</em> for a same serving cell
or, if <em>servingCellId</em> is provided, for a serving cell indicated
by <em>servingCellId</em></p>
<p>- else if <em>PUCCH-SpatialRelationInfo</em> or the indicated
<em>TCI-UL-State</em> provides <em>csi-RS-Index</em>, or the indicated
<em>TCI-State</em> provides <em>csi-rs</em> configured with
<em>qcl-Type</em> set to 'typeD', the UE transmits the PUCCH using a
same spatial domain filter as for a reception of a CSI-RS with resource
index provided by <em>csi-RS-Index</em> or csi-rs for a same serving
cell or, if <em>servingCellId</em> or <em>cell</em> is provided, for a
serving cell indicated by <em>servingCellId</em> or <em>cell</em></p>
<p>- else <em>PUCCH-SpatialRelationInfo</em> or the indicated
<em>TCI-UL-State</em> provides <em>srs</em>, the UE transmits the PUCCH
using a same spatial domain filter as for a transmission of a SRS with
resource index provided by <em>resource</em> for a same serving cell
and/or active UL BWP or, if <em>servingCellId</em> and/or
<em>uplinkBWP</em> are provided, for a serving cell indicated by
<em>servingCellId</em> and/or for an UL BWP indicated by
<em>uplinkBWP</em></p>
<p>If a UE</p>
<p>- is not provided <em>pathlossReferenceRSs</em> in
<em>PUCCH-PowerControl</em>,</p>
<p>- is provided <em>enableDefaultBeamPL-ForPUCCH</em>, and</p>
<p>- is not provided <em>PUCCH-SpatialRelationInfo</em>, and</p>
<p>- is not provided <em>coresetPoolIndex</em> value of 1 for any
CORESET, or is provided <em>coresetPoolIndex</em> value of 1 for all
CORESETs, in <em>ControlResourceSet </em>and no codepoint of a TCI
field, if any, in a DCI format of any search space set maps to two TCI
states [5, TS 38.212]</p>
<p>a spatial setting for a PUCCH transmission from the UE is same as a
spatial setting for PDCCH receptions by the UE in the CORESET with the
lowest ID on the active DL BWP of the PCell and, if the CORESET has two
activated TCI states as described in clause 10.1, the UE determines the
spatial setting for the PUCCH transmission based on the first TCI state.
For a PUCCH transmission over multiple slots, a same spatial setting
applies to the PUCCH transmission in each of the multiple slots.</p>
<p>A number of DMRS symbols for a PUCCH transmission using PUCCH format
3 or 4 is provided by <em>additionalDMRS</em>.</p>
<p>Use of π/2-BPSK, instead of QPSK, for a PUCCH transmission using
PUCCH format 3 or 4 is indicated by <em>pi2BPSK</em>.</p>
<p>A UE that has indicated a capability
<em>beamCorrespondenceWithoutUL-BeamSweeping</em> set to 'supported', as
described in [18, TS 38.306], can determine a spatial domain filter to
be used while performing the applicable channel access procedures
described in [15, TS 37.213] prior to a PUCCH transmission as
follows:</p>
<p>- if UE is configured with a single value for
<em>pucch-SpatialRelationInfoId</em> for the UL transmission, the UE may
use a spatial domain filter that is same as the spatial domain filter
associated with <em>referenceSignal</em> in the corresponding
<em>pucch-SpatialRelationInfo</em>,</p>
<p>- if UE is configured with more than one value for
<em>pucch-SpatialRelationInfoId</em> for the UL transmission, the UE may
use a spatial domain filter that is same as the spatial domain filter
associated with <em>referenceSignal</em> in the activated
<em>pucch-SpatialRelationInfo</em>.</p>
<h3 id="ue-procedure-for-reporting-harq-ack">9.2.3 UE procedure for
reporting HARQ-ACK</h3>
<p>In this clause, for the purpose of determining a PUCCH resource for a
PUCCH transmission in a slot using a PUCCH resource indicator field in a
DCI format that schedules a PDSCH reception, and for the purpose of
determining the slot for the PUCCH transmission</p>
<p>- a UE is assumed to generate HARQ-ACK information regardless of
whether or not the PDSCH reception provides a transport block for a HARQ
process with disabled HARQ-ACK information as indicated by
<em>downlinkHARQ-FeedbackDisabled</em>, if provided</p>
<p>- a UE is assumed to not generate HARQ-ACK information associated
with a G-RNTI for multicast or a G-CS-RNTI with disabled HARQ-ACK
information as described in clause 18.</p>
<p>The UE determines a number of HARQ-ACK information bits <span
class="math inline">\(O_{\text{ACK}}\)</span> as described in clauses
9.1 through 9.1.5 and a corresponding set of PUCCH resources as
described in clause 9.2.1. If <span class="math inline">\(O_{\text{ACK}}
= 0\)</span>, the UE does not transmit a PUCCH that only includes
HARQ-ACK information bits.</p>
<p>A UE does not expect to transmit more than one PUCCH with HARQ-ACK
information in a slot per priority index, if the UE is not provided
<em>ackNackFeedbackMode = separate</em>.</p>
<p>For DCI format 1_0, the PDSCH-to-HARQ_feedback timing indicator field
values map to {1, 2, 3, 4, 5, 6, 7, 8} for SCS configuration of PUCCH
transmission <span class="math inline">\(\mu \leq 3\)</span>, to {7, 8,
12, 16, 20, 24, 28, 32} for <span class="math inline">\(\mu =
5\)</span>, and to {13, 16, 24, 32, 40, 48, 56, 64} for <span
class="math inline">\(\mu = 6\)</span>. For a unicast DCI format, other
than DCI format 1_0, the PDSCH-to-HARQ_feedback timing indicator field
values, if present, map to values for a set of number of slots provided
by <em>dl-DataToUL-ACK</em>, <em>dl-DataToUL-ACK-r16</em>, or
<em>dl-DataToUL-ACK-DCI-1-2</em>, or <em>dl-DataToUL-ACK-r17,</em> or
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, or <em>dl-DataToUL-ACK-v1700</em>
as defined in Table 9.2.3-1. If the DCI format indicates a cell for the
PUCCH transmission, as described in clause 9.A, the
PDSCH-to-HARQ_feedback timing indicator field value maps to slots of the
active UL BWP of the cell; otherwise, the PDSCH-to-HARQ_feedback timing
indicator field value maps to slots of the active UL BWP of the PCell.
For DCI format 4_1, the PDSCH-to-HARQ_feedback timing indicator field
values are provided by <em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em>
or, if <em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em> is not provided,
by {1, 2, 3, 4, 5, 6, 7, 8}. For DCI format 4_2, the
PDSCH-to-HARQ_feedback timing indicator field values are provided by
<em>dl-DataToUL-ACK</em> from
<em>pucch-ConfigMulticast1/pucch-ConfigurationListMulticast1</em> or
<em>pucch-ConfigMulticast2/pucch-ConfigurationListMulticast2</em> if
provided; otherwise, from
<em>pucch-Config/pucch-ConfigurationList.</em></p>
<p>The following apply to the PCell if the UE is provided
<em>pucch-sSCellPattern</em>; otherwise, the following apply to the
serving cell of the PUCCH transmission. If the UE is provided
<em>subslotLengthForPUCCH</em>, <span class="math inline">\(n\)</span>
is the last UL slot for PUCCH transmission that overlaps with a PDSCH
reception or with a PDCCH reception providing a DCI format having
associated HARQ-ACK information without scheduling a PDSCH reception;
otherwise, <span class="math inline">\(n\)</span> is the last UL slot
for PUCCH transmission that overlaps with the DL slot <span
class="math inline">\(n_{D}\)</span> for the PDSCH reception or with the
DL slot <span class="math inline">\(n_{D}\ \)</span>for the PDCCH
reception in case of a DCI format that triggers a HARQ-ACK information
report and does not schedule a PDSCH reception.</p>
<p>For a SPS PDSCH reception ending in DL slot <span
class="math inline">\(n_{D}\)</span>, the UE transmits the PUCCH in UL
slot <span class="math inline">\(n + k\)</span> where <span
class="math inline">\(k\)</span> is provided by the
PDSCH-to-HARQ_feedback timing indicator field, if present, in a DCI
format activating the SPS PDSCH reception.</p>
<p>If the UE detects a DCI format that does not include a
PDSCH-to-HARQ_feedback timing indicator field and schedules a PDSCH
reception or activates a SPS PDSCH reception ending in DL slot <span
class="math inline">\(n_{D}\)</span>, the UE provides corresponding
HARQ-ACK information in a PUCCH transmission within UL slot <span
class="math inline">\(n + k\)</span> where <span
class="math inline">\(k\)</span> is provided by
<em>dl-DataToUL-ACK</em>, or <em>dl-DataToUL-ACK-r16</em>, or
<em>dl-DataToUL-ACK-DCI-1-2</em>, or <em>dl-DataToUL-ACK-r17</em>, or
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, or
<em>dl-DataToUL-ACK-v1700</em>.</p>
<p>If the UE detects a DCI format scheduling a number of PDSCH
receptions ending in DL slot <span class="math inline">\(n_{D}\)</span>
or if the UE detects a DCI format generating a HARQ-ACK information bit
and does not schedule a PDSCH reception through a PDCCH reception ending
in DL slot <span class="math inline">\(n_{D}\)</span>, the UE provides
corresponding HARQ-ACK information in a PUCCH transmission within UL
slot <span class="math inline">\(n + k\)</span>, where <span
class="math inline">\(k\)</span> is a number of slots and is indicated
by the PDSCH-to-HARQ_feedback timing indicator field in the DCI format,
if present, or provided by <em>dl-DataToUL-ACK</em>,
<em>dl-DataToUL-ACK-r16</em>, or <em>dl-DataToUL-ACK-DCI-1-2</em>, or
<em>dl-DataToUL-ACK-r17</em>, or <em>dl-DataToUL-ACK-DCI-1-2-r17</em>,
or <em>dl-DataToUL-ACK-v1700</em>.</p>
<p>A PUCCH transmission with HARQ-ACK information is subject to the
limitations for UE transmissions described in clause 11.1, clause 11.1.1
and clause 17.2.</p>
<p>Table 9.2.3-1: Mapping of PDSCH-to-HARQ_feedback timing indicator
field values to numbers of slots</p>
<table style="width:100%;">
<colgroup>
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 15%" />
<col style="width: 54%" />
</colgroup>
<tbody>
<tr>
<td colspan="3">PDSCH-to-HARQ_feedback timing indicator</td>
<td>Number of slots <span class="math inline">\(\mathbf{k}\)</span></td>
</tr>
<tr>
<td>1 bit</td>
<td>2 bits</td>
<td>3 bits</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>'0'</td>
<td>'00'</td>
<td>'000'</td>
<td style="text-align: center;">1<sup>st</sup> value provided by
<em>dl-DataToUL-ACK</em>, <em>dl-DataToUL-ACK-r16</em>,
<em>dl-DataToUL-ACK-DCI-1-2</em>, <em>dl-DataToUL-ACK-r17</em>,
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, or <em>dl-DataToUL-ACK-v1700</em>,
or <em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em></td>
</tr>
<tr>
<td>'1'</td>
<td>'01'</td>
<td>'001'</td>
<td style="text-align: center;">2<sup>nd</sup> value provided by
<em>dl-DataToUL-ACK</em>, <em>dl-DataToUL-ACK-r16</em>,
<em>dl-DataToUL-ACK-DCI-1-2</em>, <em>dl-DataToUL-ACK-r17</em>,
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, or <em>dl-DataToUL-ACK-v1700</em>,
or <em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em></td>
</tr>
<tr>
<td></td>
<td>'10'</td>
<td>'010'</td>
<td style="text-align: center;">3<sup>rd</sup> value provided by
<em>dl-DataToUL-ACK</em>, <em>dl-DataToUL-ACK-r16</em>,
<em>dl-DataToUL-ACK-DCI-1-2</em>, <em>dl-DataToUL-ACK-r17</em>,
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, or <em>dl-DataToUL-ACK-v1700</em>,
or <em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em></td>
</tr>
<tr>
<td></td>
<td>'11'</td>
<td>'011'</td>
<td style="text-align: center;">4<sup>th</sup> value provided by
<em>dl-DataToUL-ACK</em>, <em>dl-DataToUL-ACK-r16</em>,
<em>dl-DataToUL-ACK-DCI-1-2</em>, <em>dl-DataToUL-ACK-r17</em>,
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, or <em>dl-DataToUL-ACK-v1700</em>,
<em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'100'</td>
<td style="text-align: center;">5<sup>th</sup> value provided by
<em>dl-DataToUL-ACK</em>, <em>dl-DataToUL-ACK-r16</em>,
<em>dl-DataToUL-ACK-DCI-1-2</em>, <em>dl-DataToUL-ACK-r17</em>,
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, or <em>dl-DataToUL-ACK-v1700</em>,
or <em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'101'</td>
<td style="text-align: center;">6<sup>th</sup> value provided by
<em>dl-DataToUL-ACK</em>, <em>dl-DataToUL-ACK-r16</em>,
<em>dl-DataToUL-ACK-DCI-1-2</em>, <em>dl-DataToUL-ACK-r17</em>,
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, or <em>dl-DataToUL-ACK-v1700</em>,
or <em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'110'</td>
<td style="text-align: center;">7<sup>th</sup> value provided by
<em>dl-DataToUL-ACK</em>, <em>dl-DataToUL-ACK-r16</em>,
<em>dl-DataToUL-ACK-DCI-1-2</em>, <em>dl-DataToUL-ACK-r17</em>,
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, or <em>dl-DataToUL-ACK-v1700</em>,
or <em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'111'</td>
<td style="text-align: center;">8<sup>th</sup> value provided by
<em>dl-DataToUL-ACK</em>, <em>dl-DataToUL-ACK-r16</em>,
<em>dl-DataToUL-ACK-DCI-1-2</em>, <em>dl-DataToUL-ACK-r17</em>,
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, or <em>dl-DataToUL-ACK-v1700</em>,
or <em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em></td>
</tr>
</tbody>
</table>
<p>For a PUCCH transmission with HARQ-ACK information, a UE determines a
PUCCH resource on the cell of the PUCCH transmission, as described in
clause 9.A, after determining a set of PUCCH resources for <span
class="math inline">\(O_{\text{UCI}}\)</span> HARQ-ACK information bits,
as described in clause 9.2.1. The PUCCH resource determination is based
on a PUCCH resource indicator field [5, TS 38.212], if present, in a
last DCI format, excluding the SPS activation DCI, among the DCI formats
that have a value of a PDSCH-to-HARQ_feedback timing indicator field, if
present, or a value of <em>dl-DataToUL-ACK</em>, or
<em>dl-DataToUL-ACK-r16</em>, or <em>dl-DataToUL-ACK-DCI-1-2</em>, or
<em>dl-DataToUL-ACK-r17,</em> or <em>dl-DataToUL-ACK-DCI-1-2-r17</em>,
or <em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em>, or
<em>dl-DataToUL-ACK-v1700</em>, indicating a same slot for the PUCCH
transmission, that the UE detects and for which the UE transmits
corresponding HARQ-ACK information in the PUCCH. For PUCCH resource
determination, detected DCI formats are first indexed in an ascending
order across serving cells indexes for a same PDCCH monitoring occasion
and are then indexed in an ascending order across PDCCH monitoring
occasion indexes. For indexing DCI formats within a serving cell for a
same PDCCH monitoring occasion, if the UE is not provided
<em>coresetPoolIndex</em> or is provided <em>coresetPoolIndex</em> with
value 0 for one or more first CORESETs and is provided
<em>coresetPoolIndex</em> with value 1 for one or more second CORESETs
on an active DL BWP of a serving cell, and with
<em>ackNackFeedbackMode</em> = <em>joint</em> for the active UL BWP,
detected DCI formats from PDCCH receptions in the first CORESETs are
indexed prior to detected DCI formats from PDCCH receptions in the
second CORESETs.</p>
<p>The PUCCH resource indicator field values map to values of a set of
PUCCH resource indexes, as defined in Table 9.2.3-2 for a PUCCH resource
indicator field of 3 bits, provided by <em>resourceList</em> for PUCCH
resources from a set of PUCCH resources provided by
<em>PUCCH-ResourceSet</em> with a maximum of eight PUCCH resources. If
the PUCCH resource indicator field includes 1 bit or 2 bits, the values
map to the first two values or the first four values, respectively, of
Table 9.2.3-2. If the last DCI format does not include a PUCCH resource
indicator field, the first value of Table 9.2.3-2 is used.</p>
<p>For the first set of PUCCH resources and when the size <span
class="math inline">\(R_{\text{PUCCH}}\)</span> of <em>resourceList</em>
is larger than eight, when a UE provides HARQ-ACK information in a PUCCH
transmission in response to detecting a last DCI format in a PDCCH
reception, excluding the SPS activation DCI, among DCI formats with a
value of the PDSCH-to-HARQ_feedback timing indicator field, if present,
or a value of <em>dl-DataToUL-ACK</em>, or <em>dl-DataToUL-ACK-r16</em>,
or <em>dl-DataToUL-ACK-DCI-1-2</em>, or <em>dl-DataToUL-ACK-r17,</em> or
<em>dl-DataToUL-ACK-DCI-1-2-r17</em>, or
<em>dl-DataToUL-ACK-MulticastDCI-Format4-1</em>, or
<em>dl-DataToUL-ACK-v1700</em>, indicating a same slot for the PUCCH
transmission, the UE determines a PUCCH resource with index <span
class="math inline">\(r_{\text{PUCCH}}\)</span>, <span
class="math inline">\({0 \leq r}_{\text{PUCCH}} \leq R_{\text{PUCCH}} -
1\)</span>, as</p>
<p><img src="media/image83.svg"
style="width:4.89583in;height:0.89583in" /></p>
<p>where <span class="math inline">\(N_{\text{CCE,p}}\)</span> is a
number of CCEs in CORESET <span class="math inline">\(p\)</span> of the
PDCCH reception for the DCI format as described in clause 10.1, <span
class="math inline">\(n_{\text{CCE,p}}\)</span> is the index of a first
CCE for the PDCCH reception, and <span
class="math inline">\(\mathrm{\Delta}_{PRI}\)</span> is a value of the
PUCCH resource indicator field in the DCI format. When the PDCCH
reception includes first and second PDCCH candidates from respective
first and second search space sets, as described in clause 10.1, the
CORESET is associated with the search space set having the smaller
index. If</p>
<p>- the first search space set has larger index than the second search
space set and includes the first PDCCH candidate and a third PDCCH
candidate that have same first CCE index and CCE aggregation levels 8
and 16, or 16 and 8, respectively,</p>
<p>- the second search space set includes the second PDCCH candidate
that has same index and same CCE aggregation level as the first PDCCH
candidate, and a fourth PDCCH candidate that has same index and same CCE
aggregation level as the third PDCCH candidate,</p>
<p>- the CORESET associated with the first search space set has
<em>cce-REG-MappingType</em> = '<em>nonInterleaved</em>' and has
duration of one symbol, and</p>
<p>- the second PDCCH candidate has different first CCE index than the
fourth PDCCH candidate</p>
<p>the UE determines <span class="math inline">\(n_{CCE,0}\)</span> from
the PDCCH candidate with CCE aggregation level 16 among the second PDCCH
candidate and the fourth PDCCH candidate.</p>
<p>If the DCI format does not include a PUCCH resource indicator field,
<span class="math inline">\(\mathrm{\Delta}_{PRI} = 0\)</span>.</p>
<p>Table 9.2.3-2: Mapping of PUCCH resource indication field values to a
PUCCH resource in a PUCCH resource set with maximum 8 PUCCH
resources</p>
<table style="width:100%;">
<colgroup>
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 14%" />
<col style="width: 58%" />
</colgroup>
<tbody>
<tr>
<td colspan="3">PUCCH resource indicator</td>
<td>PUCCH resource</td>
</tr>
<tr>
<td>1 bit</td>
<td>2 bits</td>
<td>3 bits</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>'0'</td>
<td>'00'</td>
<td>'000'</td>
<td style="text-align: center;">1<sup>st</sup> PUCCH resource provided
by <em>pucch-ResourceId</em> obtained from the 1<sup>st</sup> value of
<em>resourceList</em></td>
</tr>
<tr>
<td>'1'</td>
<td>'01'</td>
<td>'001'</td>
<td style="text-align: center;">2<sup>nd</sup> PUCCH resource provided
by <em>pucch-ResourceId</em> obtained from the 2<sup>nd</sup> value of
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td>'10'</td>
<td>'010'</td>
<td style="text-align: center;">3<sup>rd</sup> PUCCH resource provided
by <em>pucch-ResourceId</em> obtained from the 3<sup>rd</sup> value of
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td>'11'</td>
<td>'011'</td>
<td style="text-align: center;">4<sup>th</sup> PUCCH resource provided
by <em>pucch-ResourceId</em> obtained from the 4<sup>th</sup> value of
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'100'</td>
<td style="text-align: center;">5<sup>th</sup> PUCCH resource provided
by <em>pucch-ResourceId</em> obtained from the 5<sup>th</sup> value of
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'101'</td>
<td style="text-align: center;">6<sup>th</sup> PUCCH resource provided
by <em>pucch-ResourceId</em> obtained from the 6<sup>th</sup> value of
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'110'</td>
<td style="text-align: center;">7<sup>th</sup> PUCCH resource provided
by <em>pucch-ResourceId</em> obtained from the 7<sup>th</sup> value of
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'111'</td>
<td style="text-align: center;">8<sup>th</sup> PUCCH resource provided
by <em>pucch-ResourceId</em> obtained from the 8<sup>th</sup> value of
<em>resourceList</em></td>
</tr>
</tbody>
</table>
<p>If a UE determines a first resource for a PUCCH transmission with
HARQ-ACK information corresponding only to a PDSCH reception without a
corresponding PDCCH or detects a first DCI format indicating a first
resource for a PUCCH transmission with corresponding HARQ-ACK
information in a slot and also detects at a later time a second DCI
format indicating a second resource for a PUCCH transmission with
corresponding HARQ-ACK information in the slot, the UE does not expect
to multiplex HARQ-ACK information corresponding to the second DCI format
in a PUCCH resource in the slot if the PDCCH reception that includes the
second DCI format is not earlier than <span class="math inline">\(N_{3}
\bullet (2048 + 144) \bullet \kappa \bullet 2^{- \mu} \bullet
T_{c}\)</span> from the beginning of a first symbol of the first
resource for PUCCH transmission in the slot where, <span
class="math inline">\(\kappa\)</span> and <span
class="math inline">\(T_{c}\)</span> are defined in clause 4.1 of [4, TS
38.211] and <span class="math inline">\(\mu\)</span> corresponds to the
smallest SCS configuration among the SCS configurations of the PDCCHs
providing the DCI formats and the SCS configuration of the PUCCH. If
<em>processingType2Enabled</em> of <em>PDSCH-ServingCellConfig</em> is
set to <em>enable</em> for the serving cell with the second DCI format
and for all serving cells with corresponding HARQ-ACK information
multiplexed in the PUCCH transmission in the slot, <span
class="math inline">\(N_{3} = 3\)</span> for <span
class="math inline">\(\mu = 0\)</span>, <span
class="math inline">\(N_{3} = 4.5\)</span> for <span
class="math inline">\(\mu = 1\)</span>, <span
class="math inline">\(N_{3} = 9\)</span> for <span
class="math inline">\(\mu = 2\)</span>; otherwise, <span
class="math inline">\(N_{3} = 8\)</span> for <span
class="math inline">\(\mu = 0\)</span>, <span
class="math inline">\(N_{3} = 10\)</span> for <span
class="math inline">\(\mu = 1\)</span>, <span
class="math inline">\(N_{3} = 17\)</span> for <span
class="math inline">\(\mu = 2\)</span>, <span
class="math inline">\(N_{3} = 20\)</span> for <span
class="math inline">\(\mu = 3\)</span>, <span
class="math inline">\(N_{3} = 80\)</span> for <span
class="math inline">\(\mu = 5\)</span>, and <span
class="math inline">\(N_{3} = 160\)</span> for <span
class="math inline">\(\mu = 6\)</span>.</p>
<p>If a UE is not provided <em>SPS-PUCCH-AN-List</em> and transmits
HARQ-ACK information corresponding only to a PDSCH reception without a
corresponding PDCCH, which includes the first SPS PDSCH reception
associated with the corresponding activation DCI, a PUCCH resource for
corresponding PUCCH transmission with HARQ-ACK information is provided
by <em>n1PUCCH-AN</em>.</p>
<p>If a UE transmits a PUCCH with HARQ-ACK information using PUCCH
format 0, the UE determines values <span
class="math inline">\(m_{0}\)</span> and <span
class="math inline">\(m_{CS}\)</span> for computing a value of cyclic
shift <span class="math inline">\(\alpha\)</span> [4, TS 38.211] where
<span class="math inline">\(m_{0}\)</span> is provided by
<em>initialCyclicShift</em> of <em>PUCCH-format0</em> or, if
<em>initialCyclicShift</em> is not provided, by the initial cyclic shift
index as described in clause 9.2.1 and <span
class="math inline">\(m_{CS}\)</span> is determined from the value of
one HARQ-ACK information bit or from the values of two HARQ-ACK
information bits as in Table 9.2.3-3 and Table 9.2.3-4,
respectively.</p>
<p>Table 9.2.3-3: Mapping of values for one HARQ-ACK information bit to
sequences for PUCCH format 0</p>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 27%" />
<col style="width: 27%" />
</colgroup>
<tbody>
<tr>
<td>HARQ-ACK Value</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td><strong>Sequence cyclic shift</strong></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
0\]</span></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
6\]</span></td>
</tr>
</tbody>
</table>
<p>Table 9.2.3-4: Mapping of values for two HARQ-ACK information bits to
sequences for PUCCH format 0</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 19%" />
<col style="width: 18%" />
<col style="width: 19%" />
<col style="width: 18%" />
</colgroup>
<tbody>
<tr>
<td>HARQ-ACK Value</td>
<td>{0, 0}</td>
<td>{0, 1}</td>
<td>{1, 1}</td>
<td>{1, 0}</td>
</tr>
<tr>
<td><strong>Sequence cyclic shift</strong></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
0\]</span></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
3\]</span></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
6\]</span></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
9\]</span></td>
</tr>
</tbody>
</table>
<p>If a UE transmits a PUCCH with HARQ-ACK information using PUCCH
format 1, the UE is provided a value for <img src="media/image84.svg"
style="width:0.19792in;height:0.21875in" /> by
<em>initialCyclicShift</em> of <em>PUCCH-format1</em> or, if
<em>initialCyclicShift</em> is not provided, by the initial cyclic shift
index as described in clause 9.2.1.</p>
<p>If a UE transmits a PUCCH with <span
class="math inline">\(O_{ACK}\)</span> HARQ-ACK information bits and
<span class="math inline">\(O_{CRC}\)</span> bits using PUCCH format 2
or PUCCH format 3 in a PUCCH resource that includes <span
class="math inline">\(M_{RB}^{\text{PUCCH}}\)</span> PRBs, the UE
determines a number of PRBs <span
class="math inline">\(M_{RB,min}^{\text{PUCCH}}\)</span> for the PUCCH
transmission to be the minimum number of PRBs, that is smaller than or
equal to a number of PRBs <span
class="math inline">\(M_{RB}^{\text{PUCCH}}\)</span> provided
respectively by <em>nrofPRBs</em> of <em>PUCCH-format2</em> or
<em>nrofPRBs</em> of <em>PUCCH-format3</em> and start from the first PRB
from the number of PRBs, that results to <span
class="math inline">\(\left( O_{\text{ACK}} + O_{\text{CRC}} \right)
\leq M_{RB,min}^{\text{PUCCH}} \cdot N_{\text{sc,ctrl}}^{\text{RB}}
\cdot N_{\text{symb-UCI}}^{\text{PUCCH}} \cdot Q_{m} \cdot r\)</span>
and, if <span class="math inline">\(M_{RB}^{\text{PUCCH}} &gt;
1\)</span>, <span class="math inline">\(\left( O_{\text{ACK}} +
O_{\text{CRC}} \right) &gt; \left( M_{RB,min}^{\text{PUCCH}} - 1 \right)
\cdot N_{\text{sc,ctrl}}^{\text{RB}} \cdot
N_{\text{symb-UCI}}^{\text{PUCCH}} \cdot Q_{m} \cdot r\)</span>, where
<span class="math inline">\(N_{\text{sc,ctrl}}^{\text{RB}}\)</span>,
<span class="math inline">\(N_{\text{symb-UCI}}^{\text{PUCCH}}\)</span>,
<span class="math inline">\(Q_{m}\)</span>, and <span
class="math inline">\(r\)</span> are defined in clause 9.2.5.2. For
PUCCH format 3, if <span
class="math inline">\(M_{RB,min}^{\text{PUCCH}}\)</span> is not equal
<span class="math inline">\(2^{\alpha_{2}} \cdot 3^{\alpha_{3}} \cdot
5^{\alpha_{5}}\)</span> according to [4, TS 38.211], <span
class="math inline">\(M_{RB,min}^{\text{PUCCH}}\)</span> is increased to
the nearest allowed value of <em>nrofPRBs</em> [12, TS 38.331]. If <span
class="math inline">\(\left( O_{\text{ACK}} + O_{\text{CRC}} \right)
&gt; \left( M_{RB}^{\text{PUCCH}} - 1 \right) \cdot
N_{\text{sc,ctrl}}^{\text{RB}} \cdot N_{\text{symb-UCI}}^{\text{PUCCH}}
\cdot Q_{m} \cdot r\)</span>, the UE transmits the PUCCH over <span
class="math inline">\(M_{RB}^{\text{PUCCH}}\)</span> PRBs.</p>
<p>If a UE is provided a first interlace of <span
class="math inline">\(M_{\text{Interlace,0}}^{\text{PUCCH}}\)</span>
PRBs by <em>interlace0</em> in <em>InterlaceAllocation</em> and
transmits a PUCCH with <span
class="math inline">\(O_{\text{ACK}}\)</span> HARQ-ACK information bits
and <span class="math inline">\(O_{\text{CRC}}\)</span> bits using PUCCH
format 2 or PUCCH format 3, the UE transmits the PUCCH over the first
interlace if <span class="math inline">\(\left( O_{\text{ACK}} +
O_{\text{CRC}} \right) \leq M_{\text{Interlace,0}}^{\text{PUCCH}} \cdot
N_{\text{sc,ctrl}}^{\text{RB}} \cdot N_{\text{symb-UCI}}^{\text{PUCCH}}
\cdot Q_{m} \cdot r\)</span>; otherwise, if the UE is provided a second
interlace by <em>interlace1</em> in <em>PUCCH-format2</em> or
<em>PUCCH-format3</em>, the UE transmits the PUCCH over the first and
second interlaces.</p>
<h3 id="ue-procedure-for-reporting-sr">9.2.4 UE procedure for reporting
SR</h3>
<p>A UE can be provided by <em>SchedulingRequestResourceConfig</em> a
set of configurations for SR in a PUCCH transmission using either PUCCH
format 0 or PUCCH format 1.</p>
<p>A UE can be provided by <em>schedulingRequestID-BFR-SCell</em> a
configuration for LRR in a PUCCH transmission using either PUCCH format
0 or PUCCH format 1.</p>
<p>A UE can be provided by <em>schedulingRequestID-BFR</em> a first
configuration for LRR and, if the UE provides <em>twoLRRcapability</em>,
the UE can be provided by <em>schedulingRequestID-BFR2</em> a second
configuration for LRR in a PUCCH transmission using either PUCCH format
0 or PUCCH format 1.</p>
<p>A UE can be provided by <em>schedulingRequestID-LBT-SCell</em> a
configuration for consistent LBT failure recovery, as described in [11,
TS 38.321], in a PUCCH transmission using either PUCCH format 0 or PUCCH
format 1. The UE can be provided, by <em>phy-PriorityIndex</em> in
<em>SchedulingRequestResourceConfig</em>, a priority index 0 or a
priority index 1 for the SR. If the UE is not provided a priority index
for SR, the priority index is 0.</p>
<p>The UE is also provided a periodicity <span
class="math inline">\({SR}_{PERIODICITY}\)</span> in symbols or slots
and an offset <span class="math inline">\({SR}_{OFFSET}\)</span> in
slots by <em>periodicityAndOffset</em> for a PUCCH transmission
conveying SR. If <span class="math inline">\({SR}_{PERIODICITY}\)</span>
is larger than one slot, the UE determines a SR transmission occasion in
a PUCCH to be in a slot with number <span
class="math inline">\(n_{s,f}^{\mu}\)</span> [4, TS 38.211] in a frame
with number <span class="math inline">\(n_{f}\)</span> if <span
class="math inline">\(\left( {n_{f} \cdot N_{slot}^{frame,\mu} +
n}_{s,f}^{\mu} - {SR}_{OFFSET} \right)mod{SR}_{PERIODICITY} =
0\)</span>.</p>
<p>If <span class="math inline">\({SR}_{PERIODICITY}\)</span> is one
slot, the UE expects that <span class="math inline">\({SR}_{OFFSET} =
0\)</span> and every slot is a SR transmission occasion in a PUCCH.</p>
<p>If <span class="math inline">\({SR}_{PERIODICITY}\)</span> is smaller
than one slot, the UE determines a SR transmission occasion in a PUCCH
to start in a symbol with index <span class="math inline">\(l\)</span>
[4, TS 38.211] if <span class="math inline">\(\left( l -
l_{0}mod{SR}_{PERIODICITY} \right)mod{SR}_{PERIODICITY} = 0\)</span>
where <span class="math inline">\(l_{0}\)</span> is the value of
<em>startingSymbolIndex</em>.</p>
<p>If the UE determines that, for a SR transmission occasion in a PUCCH,
the number of symbols available for the PUCCH transmission in a slot is
smaller than the value provided by <em>nrofSymbols</em>, the UE does not
transmit the PUCCH in the slot.</p>
<p>SR transmission occasions in a PUCCH are subject to the limitations
for UE transmissions described in clause 11.1, clause 11.1.1 and clause
17.2.</p>
<p>The UE transmits a PUCCH in the PUCCH resource for the corresponding
SR configuration only when the UE transmits a positive SR. For a
positive SR transmission using PUCCH format 0, the UE transmits the
PUCCH as described in [4, TS 38.211] by obtaining <span
class="math inline">\(m_{0}\)</span> as described for HARQ-ACK
information in clause 9.2.3 and by setting <span
class="math inline">\(m_{cs} = 0\)</span>. For a positive SR
transmission using PUCCH format 1, the UE transmits the PUCCH as
described in [4, TS 38.211] by setting <span class="math inline">\(b(0)
= 0\)</span>.</p>
<h3 id="ue-procedure-for-reporting-multiple-uci-types">9.2.5 UE
procedure for reporting multiple UCI types</h3>
<p>This clause is applicable to the case that a UE has resources for
PUCCH transmissions or for PUCCH and PUSCH transmissions that overlap in
time and each PUCCH transmission is over a single slot without
repetitions. Any case that a PUCCH transmission is with repetitions over
multiple slots is described in clause 9.2.6. If a UE is configured with
multiple PUCCH resources in a slot to transmit CSI reports</p>
<p>- if the UE is not provided <em>multi-CSI-PUCCH-ResourceList</em> or
if PUCCH resources for transmissions of CSI reports do not overlap in
the slot, the UE determines a first resource corresponding to a CSI
report with the highest priority [6, TS 38.214]</p>
<p>- if the first resource includes PUCCH format 2, and if there are
remaining resources in the slot that do not overlap with the first
resource, the UE determines a CSI report with the highest priority,
among the CSI reports with corresponding resources from the remaining
resources, and a corresponding second resource as an additional resource
for CSI reporting</p>
<p>- if the first resource includes PUCCH format 3 or PUCCH format 4,
and if there are remaining resources in the slot that include PUCCH
format 2 and do not overlap with the first resource, the UE determines a
CSI report with the highest priority, among the CSI reports with
corresponding resources from the remaining resources, and a
corresponding second resource as an additional resource for CSI
reporting</p>
<p>- if the UE is provided <em>multi-CSI-PUCCH-ResourceList</em> and if
any of the multiple PUCCH resources overlap, the UE multiplexes all CSI
reports in a resource from the resources provided by
<em>multi-CSI-PUCCH-ResourceList</em>, as described in clause
9.2.5.2.</p>
<p>A UE multiplexes DL HARQ-ACK information, with or without SR, and CSI
report(s) in a same PUCCH if the UE is provided
<em>simultaneousHARQ-ACK-CSI</em>; otherwise, the UE drops the CSI
report(s) and includes only DL HARQ-ACK information, with or without SR,
in the PUCCH. If the UE would transmit multiple PUCCHs in a slot that
include DL HARQ-ACK information and CSI report(s), the UE expects to be
provided a same configuration for <em>simultaneousHARQ-ACK-CSI</em> each
of PUCCH formats 2, 3, and 4.</p>
<p>If a UE would multiplex CSI reports that include Part 2 CSI reports
in a PUCCH resource, the UE determines the PUCCH resource and a number
of PRBs for the PUCCH resource or a number of Part 2 CSI reports
assuming that each of the CSI reports indicates rank 1, or rank
combination of {1, 1} if applicable. If the higher layer parameter
<em>csi-ReportMode</em> of CSI reports is set to 'Mode2', the UE
determines the PUCCH resource and a number of PRBs for the PUCCH
resource or a number of Part 2 CSI reports assuming that each CRI in the
CSI report is associated with a resource pair.</p>
<p>If a UE would transmit multiple overlapping PUCCHs in a slot or
overlapping PUCCH(s) and PUSCH(s) in a slot and, when applicable as
described in clauses 9.2.5.1, 9.2.5.2, 9.2.5.3 and 18, the UE is
configured to multiplex different UCI types or UCI of different priority
indexes in one PUCCH, and at least one of the multiple overlapping
PUCCHs or PUSCHs is in response to a DCI format detection by the UE, the
UE multiplexes all corresponding UCI types or UCI of different priority
indexes if the following conditions are met. If one of the PUCCH
transmissions or PUSCH transmissions is in response to a DCI format
detection by the UE, the UE expects that the first symbol <span
class="math inline">\(S_{0}\)</span> of the earliest PUCCH or PUSCH,
among a group overlapping PUCCHs and PUSCHs in the slot, satisfies the
following timeline conditions</p>
<p>- <span class="math inline">\(S_{0}\)</span> is not before a symbol
with CP starting after <span
class="math inline">\(T_{proc,1}^{mux}\)</span> after a last symbol of
any corresponding PDSCH, <span
class="math inline">\(T_{proc,1}^{mux}\)</span> is given by maximum of
<span class="math inline">\(\left\{
T_{proc,1}^{mux,1},\cdots,T_{proc,1}^{mux,i},\cdots \right\}\)</span>
where for the i-th PDSCH with corresponding HARQ-ACK transmission on a
PUCCH which is in the group of overlapping PUCCHs and PUSCHs, <span
class="math inline">\(T_{proc,1}^{mux,i} = \left( N_{1} + d_{1,1} + 1
\right) \cdot (2048 + 144) \cdot \kappa \cdot 2^{- \mu} \cdot
T_{C}\)</span>, <span class="math inline">\(d_{1,1}\)</span> is selected
for the i-th PDSCH following [6, TS 38.214], <span
class="math inline">\(N_{1}\)</span> is selected based on the UE PDSCH
processing capability of the i-th PDSCH and SCS configuration <span
class="math inline">\(\mu\)</span>, where <span
class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration among the SCS configurations used for the PDCCH scheduling
the i-th PDSCH if any, the i-th PDSCH, the PUCCH with corresponding
HARQ-ACK transmission for the i-th PDSCH, and all PUSCHs in the group of
overlapping PUCCHs and PUSCHs.</p>
<p>- <span class="math inline">\(S_{0}\)</span> is not before a symbol
with CP starting after <span
class="math inline">\(T_{proc,release}^{mux}\)</span> after a last
symbol of a PDCCH reception providing a DCI format having associated
HARQ-ACK information without scheduling a PDSCH reception. <span
class="math inline">\(T_{proc,release}^{mux}\)</span> is given by
maximum of <span class="math inline">\(\left\{
T_{proc,release}^{mux,1},\cdots,T_{proc,release}^{mux,i},\cdots
\right\}\)</span> where for the i-th PDCCH providing the DCI format with
corresponding HARQ-ACK transmission on a PUCCH which is in the group of
overlapping PUCCHs and PUSCHs, <span
class="math inline">\(T_{proc,release}^{mux,i} = (N + 1) \cdot (2048 +
144) \cdot \kappa \cdot 2^{- \mu} \cdot T_{C}\)</span>, <span
class="math inline">\(N\)</span> as described in clause 10.2, where
<span class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration among the SCS configurations used for the PDCCH, the PUCCH
with corresponding HARQ-ACK information, and all PUSCHs in the group of
overlapping PUCCHs and PUSCHs.</p>
<p>- if there is no aperiodic CSI report multiplexed in a PUSCH in the
group of overlapping PUCCHs and PUSCHs, <span
class="math inline">\(S_{0}\)</span> is not before a symbol with CP
starting after <span class="math inline">\(T_{proc,2}^{mux}\)</span>
after a last symbol of</p>
<p>- any PDCCH with the DCI format scheduling an overlapping PUSCH,
and</p>
<p>- any PDCCH providing a DCI format with corresponding HARQ-ACK
information in an overlapping PUCCH in the slot</p>
<p>If there is at least one PUSCH in the group of overlapping PUCCHs and
PUSCHs, <span class="math inline">\(T_{proc,2}^{mux}\)</span> is given
by maximum of <span class="math inline">\(\left\{
T_{proc,2}^{mux,1},\cdots,T_{proc,2}^{mux,i},\cdots \right\}\)</span>
where for the i-th PUSCH which is in the group of overlapping PUCCHs and
PUSCHs, <span class="math inline">\(T_{proc,2}^{mux,i} = \max\left(
\left( N_{2} + d_{2,1} + 1 \right) \cdot (2048 + 144) \cdot \kappa \cdot
2^{- \mu} \cdot T_{C} + T_{switch},d_{2,2} \right)\)</span>, <span
class="math inline">\(d_{2,1}\)</span>, <span
class="math inline">\(d_{2,2}\)</span> and <span
class="math inline">\(T_{switch}\)</span> are selected for the i-th
PUSCH following [6, TS 38.214], <span
class="math inline">\(N_{2}\)</span> is selected based on the UE PUSCH
processing capability of the i-th PUSCH and SCS configuration <span
class="math inline">\(\mu\)</span>, where <span
class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration among the SCS configurations used for the PDCCH scheduling
the i-th PUSCH, the PDCCHs scheduling the PDSCHs, or providing the DCI
formats without scheduling PDSCHs, with corresponding HARQ-ACK
information on a PUCCH which is in the group of overlapping
PUCCHs/PUSCHs, and all PUSCHs in the group of overlapping PUCCHs and
PUSCHs.</p>
<p>If there is no PUSCH in the group of overlapping PUCCHs and PUSCHs,
<span class="math inline">\(T_{proc,2}^{mux}\)</span> is given by
maximum of <span class="math inline">\(\left\{
T_{proc,2}^{mux,1},\cdots,T_{proc,2}^{mux,i},\cdots \right\}\)</span>
where for the i-th PDSCH, or the i-th PDCCH providing a DCI format
without scheduling PDSCH, with corresponding HARQ-ACK information on a
PUCCH which is in the group of overlapping PUCCHs, <span
class="math inline">\(T_{proc,2}^{mux,i} = \left( N_{2} + 1 \right)
\cdot (2048 + 144) \cdot \kappa \cdot 2^{- \mu} \cdot T_{C}\)</span>,
<span class="math inline">\(N_{2}\ \)</span> is selected based on the UE
PUSCH processing capability of the PUCCH serving cell if configured.
<span class="math inline">\(N_{2}\)</span> is selected based on the UE
PUSCH processing capability 1, if PUSCH processing capability is not
configured for the PUCCH serving cell. <span
class="math inline">\(\mu\)</span> is selected based on the smallest SCS
configuration between the SCS configuration used for the PDCCH
scheduling the i-th PDSCH, or providing the i-th DCI format without
scheduling PDSCH, with corresponding HARQ-ACK information on a PUCCH
which is in the group of overlapping PUCCHs, and the SCS configuration
for the PUCCH serving cell.</p>
<p>- if there is an aperiodic CSI report multiplexed in a PUSCH in the
group of overlapping PUCCHs and PUSCHs, <span
class="math inline">\(S_{0}\)</span> is not before a symbol with CP
starting after <span class="math inline">\(T_{proc,CSI}^{mux} =
\max\left( (Z + d) \cdot (2048 + 144) \cdot \kappa \cdot 2^{- \mu} \cdot
T_{C} + T_{switch},d_{2,2} \right)\)</span> after a last symbol of</p>
<p>- any PDCCH with the DCI format scheduling an overlapping PUSCH,
and</p>
<p>- any PDCCH scheduling a PDSCH, or providing a DCI format , with
corresponding HARQ-ACK information in an overlapping PUCCH in the
slot</p>
<p>where <span class="math inline">\(\mu\)</span> corresponds to the
smallest SCS configuration among the SCS configuration of the PDCCHs,
the smallest SCS configuration for the group of the overlapping PUSCHs,
and the smallest SCS configuration of CSI-RS associated with the DCI
format scheduling the PUSCH with the multiplexed aperiodic CSI report,
and <span class="math inline">\(d = 2\)</span> for <span
class="math inline">\(\mu = 0,1\)</span>, <span class="math inline">\(d
= 3\)</span> for <span class="math inline">\(\mu = 2\)</span>, and <span
class="math inline">\(d = 4\)</span> for <span class="math inline">\(\mu
\geq 3\)</span>. <span class="math inline">\(T_{switch}\)</span> is
defined in [6, TS 38.214] and it is applied only if <span
class="math inline">\(Z_{1}\)</span> of Table 5.4-1 in [6, TS 38.214] is
applied to the determination of <span
class="math inline">\(Z\)</span>.</p>
<p>- <span class="math inline">\(N_{1}\)</span>, <span
class="math inline">\(N_{2}\)</span>, <span
class="math inline">\(d_{1,1}\)</span>, <span
class="math inline">\(d_{2,1}\)</span>, <span
class="math inline">\(d_{2,2}\)</span>, and <span
class="math inline">\(Z\)</span> <span class="math inline">\(\
\)</span>are defined in [6, TS 38.214] and <span
class="math inline">\(\kappa\)</span> and <span
class="math inline">\(T_{C}\)</span> are defined in [4, TS 38.211].</p>
<p>If a UE would transmit multiple overlapping PUCCHs in a slot or
overlapping PUCCH(s) and PUSCH(s) in a slot, one of the PUCCHs includes
HARQ-ACK information in response to an SPS PDSCH reception, and any
PUSCH is not in response to a DCI format detection, the UE expects that
the first symbol <span class="math inline">\(S_{0}\)</span> of the
earliest PUCCH or PUSCH satisfies the first of the previous timeline
conditions with the exception that components associated to a SCS
configuration for a PDCCH scheduling a PDSCH or a PUSCH are absent from
the timeline conditions.</p>
<p>A UE does not expect a PUCCH or a PUSCH that is in response to a DCI
format detection to overlap with any other PUCCH or PUSCH that does not
satisfy the above timing conditions.</p>
<p>A UE that</p>
<p>- is not provided <em>coresetPoolIndex</em> or is provided
<em>coresetPoolIndex</em> with a value of 0 for first CORESETs on active
DL BWPs of serving cells, and</p>
<p>- is provided <em>coresetPoolIndex</em> with a value of 1 for second
CORESETs on active DL BWPs of the serving cells, and</p>
<p>- is provided <em>ackNackFeedbackMode</em> = <em>separate</em></p>
<p>does not expect a PUCCH or a PUSCH transmission triggered by a
detection of a DCI format in a PDCCH received in a CORESET from the
first CORESETs to overlap in time with a PUCCH or a PUSCH transmission
triggered by a detection of a DCI format in a PDCCH received in a
CORESET from the second CORESETs.</p>
<p>If there is one or more aperiodic CSI reports multiplexed on a PUSCH
in the group of overlapping PUCCHs and PUSCHs and if symbol <span
class="math inline">\(S_{0}\)</span> is before symbol <span
class="math inline">\({Z&#39;}_{ref}^{\ mux}\)</span> that is a next
uplink symbol with CP starting after <span
class="math inline">\({Z&#39;}_{proc,CSI}^{\ mux} = (Z&#39; + d) \cdot
(2048 + 144) \cdot \kappa \cdot 2^{- \mu} \cdot T_{C}\)</span> after the
end of the last symbol of</p>
<p>- the last symbol of aperiodic CSI-RS resource for channel
measurements, and</p>
<p>- the last symbol of aperiodic CSI-IM used for interference
measurements, and</p>
<p>- the last symbol of aperiodic NZP CSI-RS for interference
measurements, when aperiodic CSI-RS is used for channel measurement for
triggered CSI report <span class="math inline">\(n\)</span></p>
<p>the UE is not required to update the CSI report for the triggered CSI
report <span class="math inline">\(n\)</span><em>.</em> <span
class="math inline">\(Z&#39;\)</span> is defined in [6, TS 38.214] and
<span class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration among the SCS configurations of the PDCCHs scheduling the
PUSCHs, the smallest SCS configuration of aperiodic CSI-RSs associated
with DCI formats provided by the PDCCHs triggering the aperiodic CSI
reports, and the smallest SCS configuration of the overlapping PUCCHs
and PUSCHs and <span class="math inline">\(d = 2\)</span> for <span
class="math inline">\(\mu = 0,1\)</span>, <span class="math inline">\(d
= 3\)</span> for <span class="math inline">\(\mu = 2,\)</span> and <span
class="math inline">\(d = 4\)</span> for <span class="math inline">\(\mu
\geq 3\)</span>.</p>
<p>If a UE would transmit multiple PUCCHs in a slot that include
HARQ-ACK information, and/or SR, and/or CSI reports and any PUCCH with
HARQ-ACK information in the slot satisfies the above timing conditions
and does not overlap with any other PUCCH or PUSCH in the slot that does
not satisfy the above timing conditions, the UE multiplexes the HARQ-ACK
information, and/or SR, and/or CSI reports and determines corresponding
PUCCH(s) for transmission in the slot according to the following
pseudo-code. If the multiple PUCCHs do not include HARQ-ACK information
and do not overlap with any PUSCH transmission by the UE in response to
a DCI format detection by the UE, the timing conditions do not
apply.</p>
<p>If</p>
<p>- a UE is not provided <em>multi-CSI-PUCCH-ResourceList</em>, and</p>
<p>- a resource for a PUCCH transmission with HARQ-ACK information in
response to SPS PDSCH reception and/or a resource for a PUCCH associated
with a SR occasion overlap in time with two resources for respective
PUCCH transmissions with two CSI reports, and</p>
<p>- there is no resource for a PUCCH transmission with HARQ-ACK
information in response to a DCI format detection that overlaps in time
with any of the previous resources, and</p>
<p>- the following pseudo code results to the UE attempting to determine
a single PUCCH resource from the HARQ-ACK and/or the SR resource and the
two PUCCH resources with CSI reports</p>
<p>the UE</p>
<p>- multiplexes the HARQ-ACK information and/or the SR in the resource
for the PUCCH transmission with the CSI report having the higher
priority, and</p>
<p>- does not transmit the PUCCH with the CSI report having the lower
priority</p>
<p>Set <span class="math inline">\(Q\)</span> to the set of resources
for transmission of corresponding PUCCHs in a single slot without
repetitions where</p>
<p>- a resource with earlier first symbol is placed before a resource
with later first symbol</p>
<p>- for two resources with same first symbol, the resource with longer
duration is placed before the resource with shorter duration</p>
<p>- for two resources with same first symbol and same duration, the
placement is arbitrary</p>
<p>- the above three steps for the set <span
class="math inline">\(Q\)</span> are according to a subsequent
pseudo-code for a function <span
class="math inline">\(order(Q)\)</span></p>
<p>- a resource for negative SR transmission that does not overlap with
a resource for HARQ-ACK or CSI transmission is excluded from set <span
class="math inline">\(Q\)</span></p>
<p>- if the UE is not provided <em>simultaneousHARQ-ACK-CSI</em> and
resources for transmission of HARQ-ACK information include PUCCH format
0 or PUCCH format 2, resources that include PUCCH format 2, or PUCCH
format 3, or PUCCH format 4 for transmission of CSI reports are excluded
from the set <span class="math inline">\(Q\)</span> if they overlap with
any resource from the resources for transmission of HARQ-ACK
information</p>
<p>- if the UE is not provided <em>simultaneousHARQ-ACK-CSI</em> and at
least one of the resources for transmission of HARQ-ACK information
includes PUCCH format 1, PUCCH format 3, or PUCCH format 4</p>
<p>- resources that include PUCCH format 3 or PUCCH format 4 for
transmission of CSI reports are excluded from the set <span
class="math inline">\(Q\)</span></p>
<p>- resources that include PUCCH format 2 for transmission of CSI
reports are excluded from the set <span class="math inline">\(Q\)</span>
if they overlap with any resource from the resources for transmission of
HARQ-ACK information</p>
<p>Set <span class="math inline">\(\text{C}(Q)\)</span> to the
cardinality of <span class="math inline">\(Q\)</span></p>
<p>Set <span class="math inline">\(Q(j,0)\)</span>to be the first symbol
of resource <span class="math inline">\(Q(j)\)</span> in the slot</p>
<p>Set <span class="math inline">\(L\left( Q(j) \right)\)</span> to be
the number of symbols of resource <span
class="math inline">\(Q(j)\)</span> in the slot</p>
<p>Set <span class="math inline">\(j = 0\)</span> - index of first
resource in set <span class="math inline">\(Q\)</span></p>
<p>Set <span class="math inline">\(o = 0\)</span> - counter of
overlapped resources</p>
<p>while <span class="math inline">\(j \leq \text{C}(Q) - 1\)</span></p>
<p>if</p>
<p><span class="math inline">\(j &lt; \text{C}(Q) - 1\)</span> and
resource <span class="math inline">\(Q(j - o)\)</span> overlaps with
resource <span class="math inline">\(Q(j + 1)\)</span> and the resources
in set <span class="math inline">\(Q\)</span> are of same priority
index, or</p>
<p><span class="math inline">\(j &lt; \text{C}(Q) - 1\)</span> and
resource <span class="math inline">\(Q(j - o)\)</span> overlaps with
resource <span class="math inline">\(Q(j + 1)\)</span>, <span
class="math inline">\(o = 0\)</span>, the resources in set <span
class="math inline">\(Q\)</span> are of different priority indexes, and
the UE is provided <em>uci-MuxWithDiffPrio</em></p>
<p>then</p>
<p><span class="math inline">\(o = o + 1\)</span>;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>else</p>
<p>if <span class="math inline">\(o &gt; 0\)</span></p>
<p>determine a single resource for multiplexing UCI associated with
resources <span class="math inline">\(\left\{ Q(j - o),Q(j - o +
1),\ldots,Q(j) \right\}\)</span> as described in clauses 9, 9.2.5.0,
9.2.5.1, 9.2.5.2, 9.2.5.3, and 18</p>
<p>set the index of the single resource to <span
class="math inline">\(j\)</span></p>
<p><span class="math display">\[Q = Q\backslash\left\{ Q(j - o),Q(j - o
+ 1),\ldots,Q(j - 1) \right\}\]</span></p>
<p><span class="math inline">\(j = 0\)</span> % start from the beginning
after reordering unmerged resources at next step</p>
<p><span class="math inline">\(o = 0\)</span>;</p>
<p><span class="math inline">\(order(Q)\)</span> % function that
re-orders resources in current set <span
class="math inline">\(Q\)</span></p>
<p>Set <span class="math inline">\(\text{C}(Q)\)</span> to the
cardinality of <span class="math inline">\(Q\)</span></p>
<p>else</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>end if</p>
<p>end if</p>
<p>end while</p>
<p>The function <span class="math inline">\(order(Q)\)</span> performs
the following pseudo-code</p>
<p>{</p>
<p><span class="math inline">\(k = 0\)</span>;</p>
<p>while <span class="math inline">\(k &lt; \text{C}(Q) - 1\)</span> %
the next two while loops are to re-order the unmerged resources</p>
<p><span class="math inline">\(l = 0\)</span>;</p>
<p>while <span class="math inline">\(k &lt; \text{C}(Q) - 1 -
k\)</span></p>
<p>if <span class="math inline">\(Q(l,0) &gt; Q(l + 1,0)\)</span> OR
<span class="math inline">\(\left( Q(l,0) = Q(l + 1,0)\&amp; L(Q(l))
&lt; L(Q(l + 1)) \right)\)</span></p>
<p><span class="math inline">\(temp = Q(l)\)</span>;</p>
<p><span class="math inline">\(Q(l) = Q(l + 1)\)</span>;</p>
<p><span class="math inline">\(Q(l + 1) = temp\)</span>;</p>
<p>end if</p>
<p><span class="math inline">\(l = l + 1\)</span>;</p>
<p>end while</p>
<p><span class="math inline">\(k = k + 1\)</span>;</p>
<p>end while</p>
<p>}</p>
<p>For each PUCCH resource in the set <span
class="math inline">\(Q\)</span> that satisfies the aforementioned
timing conditions, when applicable,</p>
<p>- the UE transmits a PUCCH using the PUCCH resource if the PUCCH
resource does not overlap in time with a PUSCH transmission after
multiplexing UCI following the procedures described in clauses 9,
9.2.5.1, 9.2.5.2, 9.2.5.3 and 18</p>
<p>- the UE multiplexes HARQ-ACK information and/or CSI reports in a
PUSCH if the PUCCH resource overlaps in time with a PUSCH transmission,
as described in clause 9.3, and does not transmit SR. In case the PUCCH
resource overlaps in time with multiple PUSCH transmissions, the PUSCH
for multiplexing HARQ-ACK information and/or CSI is selected as
described in clause 9. If the PUSCH transmission by the UE is not in
response to a DCI format detection and the UE multiplexes only CSI
reports, the timing conditions are not applicable</p>
<p>- the UE does not expect the resource to overlap with a second
resource of a PUCCH transmission over multiple slots if the resource is
obtained from a group of resources that do not overlap with the second
resource</p>
<p>clauses 9.2.5.0, 9.2.5.1, 9.2.5.2, 9.2.5.3 and 18 assume the
following</p>
<p>- resources for transmissions of UCI types, prior to multiplexing or
dropping, overlap in a slot</p>
<p>- multiplexing conditions of corresponding UCI types in a single
PUCCH are satisfied, and</p>
<p>- the UE does not transmit any PUSCH time-overlapping with PUCCH in
the slot.</p>
<h4
id="ue-procedure-for-prioritization-between-sl-harq-ack-information-in-a-pucch-and-dl-harq-ack-or-sr-or-csi-in-a-pucch">9.2.5.0
UE procedure for prioritization between SL HARQ-ACK information in a
PUCCH and DL HARQ-ACK or SR or CSI in a PUCCH</h4>
<p>The priority value of a PUCCH transmission is as described in clause
16.2.4.3.1.</p>
<p>For prioritization between SL HARQ-ACK information in a first PUCCH
and DL HARQ-ACK or SR or CSI in a second PUCCH</p>
<p>- if the second PUCCH has priority index 1,</p>
<p>- if <em>sl-PriorityThreshold-UL-URLLC</em> is provided</p>
<p>- the UE transmits the first PUCCH if a smallest priority value of
the first PUCCH is smaller than <em>sl-PriorityThreshold-UL-URLLC</em>;
otherwise, the UE transmits the second PUCCH</p>
<p>- else</p>
<p>- the UE transmits the second PUCCH</p>
<p>- else</p>
<p>- the UE transmits the first PUCCH if the smallest priority value of
the first PUCCH is smaller than <em>sl-PriorityThreshold</em>;
otherwise, the UE transmits the second PUCCH</p>
<p>When the UE determines to transmit the second PUCCH, the UE
determines a single resource for multiplexing UCI in the second PUCCH as
described in clauses 9.2.5.1 and 9.2.5.2.</p>
<h4
id="ue-procedure-for-multiplexing-harq-ack-or-csi-and-sr-in-a-pucch">9.2.5.1
UE procedure for multiplexing HARQ-ACK or CSI and SR in a PUCCH</h4>
<p>In the following, a UE is configured to transmit <span
class="math inline">\(K\)</span> PUCCHs for respective <span
class="math inline">\(K\)</span> SRs in a slot, as determined by a set
of <em>schedulingRequestResourceId</em>, a
<em>schedulingRequestResourceId</em> associated with
<em>schedulingRequestID-BFR-SCell</em>, a
<em>schedulingRequestResourceId</em> associated with
<em>schedulingRequestID-BFR,</em> a <em>schedulingRequestResourceId</em>
associated with <em>schedulingRequestID-BFR2</em> if the UE provides
<em>twoLRRcapability</em>, and a <em>schedulingRequestResourceId</em>
associated with <em>schedulingRequestID-LBT-SCell</em>, with SR
transmission occasions that would overlap with a transmission of a PUCCH
with HARQ-ACK information from the UE in the slot or with a transmission
of a PUCCH with CSI report(s) from the UE in the slot.</p>
<p>If a UE would transmit a PUCCH with positive SR and at most two
HARQ-ACK information bits in a resource using PUCCH format 0, the UE
transmits the PUCCH in the resource using PUCCH format 0 in PRB(s) for
HARQ-ACK information as described in clause 9.2.3. The UE determines a
value of <span class="math inline">\(m_{0}\)</span> and <span
class="math inline">\(m_{CS}\)</span> for computing a value of cyclic
shift <span class="math inline">\(\alpha\)</span> [4, TS 38.211] where
<span class="math inline">\(m_{0}\)</span> is provided by
<em>initialCyclicShift</em> of <em>PUCCH-format0</em>, and <span
class="math inline">\(m_{CS}\)</span> is determined from the value of
one HARQ-ACK information bit or from the values of two HARQ-ACK
information bits as in Table 9.2.5-1 and Table 9.2.5-2,
respectively.</p>
<p>If the UE would transmit negative SR and a PUCCH with at most two
HARQ-ACK information bits in a resource using PUCCH format 0, the UE
transmits the PUCCH in the resource using PUCCH format 0 for HARQ-ACK
information as described in clause 9.2.3.</p>
<p>Table 9.2.5-1: Mapping of values for one HARQ-ACK information bit and
positive SR to sequences for PUCCH format 0</p>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 27%" />
<col style="width: 27%" />
</colgroup>
<tbody>
<tr>
<td>HARQ-ACK Value</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td><strong>Sequence cyclic shift</strong></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
3\]</span></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
9\]</span></td>
</tr>
</tbody>
</table>
<p>Table 9.2.5-2: Mapping of values for two HARQ-ACK information bits
and positive SR to sequences for PUCCH format 0</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 19%" />
<col style="width: 18%" />
<col style="width: 19%" />
<col style="width: 18%" />
</colgroup>
<tbody>
<tr>
<td>HARQ-ACK Value</td>
<td>{0, 0}</td>
<td>{0, 1}</td>
<td>{1, 1}</td>
<td>{1, 0}</td>
</tr>
<tr>
<td><strong>Sequence cyclic shift</strong></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
1\]</span></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
4\]</span></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
7\]</span></td>
<td style="text-align: center;"><span class="math display">\[m_{CS} =
10\]</span></td>
</tr>
</tbody>
</table>
<p>If a UE would transmit SR in a resource using PUCCH format 0 and
HARQ-ACK information bits in a resource using PUCCH format 1 in a slot,
the UE transmits only a PUCCH with the HARQ-ACK information bits in the
resource using PUCCH format 1.</p>
<p>If the UE would transmit positive SR in a first resource using PUCCH
format 1 and at most two HARQ-ACK information bits in a second resource
using PUCCH format 1 in a slot, the UE transmits a PUCCH with HARQ-ACK
information bits in the first resource using PUCCH format 1 as described
in clause 9.2.3. If a UE would not transmit a positive SR in a resource
using PUCCH format 1 and would transmit at most two HARQ-ACK information
bits in a resource using PUCCH format 1 in a slot, the UE transmits a
PUCCH in the resource using PUCCH format 1 for HARQ-ACK information as
described in clause 9.2.3.</p>
<p>If a UE would transmit a PUCCH with <span
class="math inline">\(O_{\text{ACK}}\)</span> HARQ-ACK information bits
in a resource using PUCCH format 2 or PUCCH format 3 or PUCCH format 4
in a slot, as described in clauses 9.2.1 and 9.2.3, <span
class="math inline">\(\left\lceil \log_{2}(K + 1) \right\rceil\)</span>
bits representing a negative or positive SR, in ascending order of the
values of <em>schedulingRequestResourceId</em>, a
<em>schedulingRequestResourceId</em> associated with
<em>schedulingRequestID-BFR-SCell</em>, a
<em>schedulingRequestResourceId</em> associated with
<em>schedulingRequestID-BFR,</em> a <em>schedulingRequestResourceId</em>
associated with <em>schedulingRequestID-BFR2</em> if the UE provides
<em>twoLRRcapability</em>, and a <em>schedulingRequestResourceId</em>
associated with <em>schedulingRequestID-LBT-SCell</em>, are appended to
the HARQ-ACK information bits and the UE transmits the combined <span
class="math inline">\({O_{\text{UCI}} = O}_{\text{ACK}} + \left\lceil
\log_{2}(K + 1) \right\rceil\)</span> UCI bits in a PUCCH using a
resource with PUCCH format 2 or PUCCH format 3 or PUCCH format 4 that
the UE determines as described in clauses 9.2.1 and 9.2.3. If one of the
SRs is a positive LRR, the value of the <span
class="math inline">\(\left\lceil \log_{2}(K + 1) \right\rceil\)</span>
bits indicates the positive LRR. An all-zero value for the <span
class="math inline">\(\left\lceil \log_{2}(K + 1) \right\rceil\)</span>
bits represents a negative SR value across all <span
class="math inline">\(K\)</span> SRs.</p>
<p>If a UE would transmit a PUCCH with <img src="media/image85.svg"
style="width:0.21875in;height:0.20833in" /> CSI report bits in a
resource using PUCCH format 2 or PUCCH format 3 or PUCCH format 4 in a
slot, <span class="math inline">\(\left\lceil \log_{2}(K + 1)
\right\rceil\)</span> bits representing corresponding negative or
positive SR, in ascending order of the values of
<em>schedulingRequestResourceId</em>, a
<em>schedulingRequestResourceId</em> associated with
<em>schedulingRequestID-BFR-SCell</em>, a
<em>schedulingRequestResourceId</em> associated with
<em>schedulingRequestID-BFR,</em> a <em>schedulingRequestResourceId</em>
associated with <em>schedulingRequestID-BFR2</em> if the UE provides
<em>twoLRRcapability</em>, and a <em>schedulingRequestResourceId</em>
associated with <em>schedulingRequestID-LBT-SCell</em>, are prepended to
the CSI information bits as described in clause 9.2.5.2 and the UE
transmits a PUCCH with the combined <span
class="math inline">\(O_{\text{UCI}} = \left\lceil \log_{2}(K + 1)
\right\rceil + O_{\text{CSI}}\)</span> UCI bits in a resource using the
PUCCH format 2 or PUCCH format 3 or PUCCH format 4 for CSI reporting. If
one of the SRs is a positive LRR, the value of the <span
class="math inline">\(\left\lceil \log_{2}(K + 1) \right\rceil\)</span>
bits indicates the positive LRR. An all-zero value for the <span
class="math inline">\(\left\lceil \log_{2}(K + 1) \right\rceil\)</span>
bits represents a negative SR value across all <span
class="math inline">\(K\)</span> SRs.</p>
<p>If a UE transmits a PUCCH with <span
class="math inline">\(O_{\text{ACK}}\)</span> HARQ-ACK information bits,
<span class="math inline">\(O_{SR} = \left\lceil \log_{2}(K + 1)
\right\rceil\)</span> SR bits, and <span
class="math inline">\(O_{\text{CRC}}\)</span> CRC bits using PUCCH
format 2 or PUCCH format 3 in a PUCCH resource that includes <span
class="math inline">\(M_{RB}^{\text{PUCCH}}\)</span> PRBs, the UE
determines a number of PRBs <span
class="math inline">\(M_{RB,min}^{\text{PUCCH}}\)</span> for the PUCCH
transmission to be the minimum number of PRBs, that is smaller than or
equal to a number of PRBs provided by <em>nrofPRBs</em> in
<em>PUCCH-format2</em> or <em>nrofPRBs</em> in <em>PUCCH-format3</em>
and starts from the first PRB from the number of PRBs, that results to
<span class="math inline">\(\left( O_{\text{ACK}} + {O_{SR} +
O}_{\text{CRC}} \right) \leq M_{RB,min}^{\text{PUCCH}} \cdot
N_{\text{sc,ctrl}}^{\text{RB}} \cdot N_{\text{symb-UCI}}^{\text{PUCCH}}
\cdot Q_{m} \cdot r\)</span> and, if <span
class="math inline">\(M_{RB}^{\text{PUCCH}} &gt; 1\)</span>, <span
class="math inline">\(\left( O_{\text{ACK}} + {O_{SR} + O}_{\text{CRC}}
\right) &gt; \left( M_{RB,min}^{\text{PUCCH}} - 1 \right) \cdot
N_{\text{sc,ctrl}}^{\text{RB}} \cdot N_{\text{symb-UCI}}^{\text{PUCCH}}
\cdot Q_{m} \cdot r\)</span>, where <span
class="math inline">\(N_{\text{sc,ctrl}}^{\text{RB}}\)</span>, <span
class="math inline">\(N_{\text{symb-UCI}}^{\text{PUCCH}}\)</span>, <span
class="math inline">\(Q_{m}\)</span>, and <span
class="math inline">\(r\)</span> are defined in clause 9.2.5.2. For
PUCCH format 3, if <span
class="math inline">\(M_{RB,min}^{\text{PUCCH}}\)</span> is not equal
<span class="math inline">\(2^{\alpha_{2}} \cdot 3^{\alpha_{3}} \cdot
5^{\alpha_{5}}\)</span> according to [4, TS 38.211], <span
class="math inline">\(M_{RB,min}^{\text{PUCCH}}\)</span> is increased to
the nearest allowed value of <em>nrofPRBs</em> [12, TS 38.331]. If <span
class="math inline">\(\left( O_{\text{ACK}} + {O_{SR} + O}_{\text{CRC}}
\right) &gt; \left( M_{RB}^{\text{PUCCH}} - 1 \right) \cdot
N_{\text{sc,ctrl}}^{\text{RB}} \cdot N_{\text{symb-UCI}}^{\text{PUCCH}}
\cdot Q_{m} \cdot r\)</span>, the UE transmits the PUCCH over the <span
class="math inline">\(M_{RB}^{\text{PUCCH}}\)</span> PRBs.</p>
<p>If a UE is provided a first interlace of <span
class="math inline">\(M_{\text{Interlace,0}}^{\text{PUCCH}}\)</span>
PRBs by <em>interlace0</em> in <em>InterlaceAllocation</em> and
transmits a PUCCH with <span
class="math inline">\(O_{\text{ACK}}\)</span> HARQ-ACK information bits,
<span class="math inline">\(O_{\text{SR}} = \left\lceil \log_{2}(K + 1)
\right\rceil\)</span> SR bits, and <span
class="math inline">\(O_{\text{CRC}}\)</span> CRC bits using PUCCH
format 2 or PUCCH format 3, the UE transmits the PUCCH over the first
interlace if <span class="math inline">\(\left( O_{\text{ACK}} +
O_{\text{SR}} + O_{\text{CRC}} \right) \leq
M_{\text{Interlace,0}}^{\text{PUCCH}} \cdot
N_{\text{sc,ctrl}}^{\text{RB}} \cdot N_{\text{symb-UCI}}^{\text{PUCCH}}
\cdot Q_{m} \cdot r\)</span>; otherwise, if the UE is provided a second
interlace by <em>interlace1</em> in <em>PUCCH-format2</em> or
<em>PUCCH-format3</em>, the UE transmits the PUCCH over the first and
second interlaces.</p>
<h4 id="ue-procedure-for-multiplexing-harq-acksrcsi-in-a-pucch">9.2.5.2
UE procedure for multiplexing HARQ-ACK/SR/CSI in a PUCCH</h4>
<p>For a transmission occasion of a single CSI report, a PUCCH resource
is provided by <em>pucch-CSI-ResourceList</em>. For a transmission
occasion of multiple CSI reports, corresponding PUCCH resources can be
provided by <em>multi-CSI-PUCCH-ResourceList</em>. If a UE is provided
first and second <em>PUCCH-Config</em>,
<em>multi-CSI-PUCCH-ResourceList</em> is provided by the
first <em>PUCCH-Config</em>, and <em>PUCCH-ResourceId</em> in
<em>pucch-CSI-ResourceList</em> or <em>multi-CSI-PUCCH-ResourceList</em>
indicates a corresponding PUCCH resource in <em>PUCCH-Resource</em>
provided by the first <em>PUCCH-Config</em>.</p>
<p>If a UE is provided only one PUCCH resource set for transmission of
HARQ-ACK information in response to PDSCH reception scheduled by a DCI
format or in response to a DCI format having associated HARQ-ACK
information without scheduling PDSCH reception, the UE does not expect
to be provided <em>simultaneousHARQ-ACK-CSI</em>.</p>
<p>A UE is configured by <em>maxCodeRate</em> a code rate for
multiplexing HARQ-ACK, SR, and CSI report(s) in a PUCCH transmission
using PUCCH format 2, PUCCH format 3, or PUCCH format 4.</p>
<p>If a UE transmits CSI reports using PUCCH format 2, the UE transmits
only wideband CSI for each CSI report [6, TS 38.214]. In the following,
a Part 1 CSI report refers either to a CSI report with only wideband CSI
or to a Part 1 CSI report with wideband CSI and sub-band CSI.</p>
<p>Denote as</p>
<p>- <img src="media/image86.svg"
style="width:0.30208in;height:0.19792in" /> a total number of HARQ-ACK
information bits, if any</p>
<p>- <img src="media/image87.svg"
style="width:0.30208in;height:0.19792in" /> a total number of SR bits.
<img src="media/image88.svg" style="width:0.51042in;height:0.19792in" />
if there is no scheduling request bit; otherwise, <img
src="media/image89.svg" style="width:1.10417in;height:0.19792in" /> as
described in clause 9.2.5.1</p>
<p>- <img src="media/image90.svg"
style="width:1.80208in;height:0.38542in" />, where <img
src="media/image91.svg" style="width:0.61458in;height:0.26042in" /> is a
number of Part 1 CSI report bits for CSI report with priority value <img
src="media/image92.svg" style="width:0.125in;height:0.15625in" />, <img
src="media/image93.svg" style="width:0.61458in;height:0.22917in" /> is a
number of Part 2 CSI report bits, if any, for CSI report with priority
value <img src="media/image92.svg"
style="width:0.125in;height:0.15625in" /> [6, TS 38.214], and <img
src="media/image94.svg" style="width:0.32292in;height:0.26042in" /> is a
number of CSI reports that include overlapping CSI reports</p>
<p>- <img src="media/image95.svg"
style="width:1.89583in;height:0.26042in" />, where <img
src="media/image96.svg" style="width:0.69792in;height:0.22917in" /> is a
number of CRC bits, if any, for encoding HARQ-ACK, SR and Part 1 CSI
report bits and <img src="media/image97.svg"
style="width:0.69792in;height:0.22917in" /> is a number of CRC bits, if
any, for encoding Part 2 CSI report bits</p>
<p>In the following</p>
<p>- <span class="math inline">\(r\)</span> is a code rate given by
<em>maxCodeRate</em> as in Table 9.2.5.2-1.</p>
<p>- <img src="media/image98.svg"
style="width:0.51042in;height:0.22917in" /> is a number of PRBs provided
by <em>nrofPRBs</em>; otherwise, if <em>nrofPRBs</em> is not provided,
<img src="media/image99.svg"
style="width:0.61458in;height:0.22917in" /></p>
<p>- <img src="media/image100.svg" style="width:1in;height:0.26042in" />
for PUCCH format 2 or, if the PUCCH resource with PUCCH format 2
includes an orthogonal cover code with length <img
src="media/image101.svg" style="width:0.51042in;height:0.26042in" />
provided by <em>occ-Length</em>, <img src="media/image102.svg"
style="width:1.54167in;height:0.26042in" />, <img
src="media/image103.svg" style="width:0.80208in;height:0.26042in" /> for
PUCCH format 3 or, if the PUCCH resource with PUCCH format 3 includes an
orthogonal cover code with length <img src="media/image104.svg"
style="width:0.51042in;height:0.26042in" /> provided by
<em>occ-Length</em>, <img src="media/image105.svg"
style="width:1.28125in;height:0.26042in" />, and <img
src="media/image106.svg" style="width:1.30208in;height:0.26042in" /> for
PUCCH format 4, where <img src="media/image107.svg"
style="width:0.30208in;height:0.26042in" /> is a number of subcarriers
per resource block [4, TS 38.211]</p>
<p>- <img src="media/image108.svg"
style="width:0.59375in;height:0.26042in" /> is equal to a number of
PUCCH symbols <img src="media/image109.svg"
style="width:0.51042in;height:0.26042in" /> for PUCCH format 2 provided
by <em>nrofSymbols</em> in <em>PUCCH-format2</em>. For PUCCH format 3 or
for PUCCH format 4, <img src="media/image108.svg"
style="width:0.57292in;height:0.26042in" /> is equal to a number of
PUCCH symbols <img src="media/image110.svg"
style="width:0.51042in;height:0.26042in" /> for PUCCH format 3 or equal
to a number of PUCCH symbols <img src="media/image111.svg"
style="width:0.53125in;height:0.26042in" /> for PUCCH format 4 provided
by <em>nrofSymbols</em> in <em>PUCCH-format3</em> or
<em>nrofSymbols</em> in <em>PUCCH-format4</em>, respectively, after
excluding a number of symbols used for DM-RS transmission for PUCCH
format 3 or for PUCCH format 4, respectively [4, TS 38.211]</p>
<p>- <img src="media/image112.svg"
style="width:0.34375in;height:0.21875in" /> if pi/2-BPSK is the
modulation scheme and <img src="media/image113.svg"
style="width:0.38542in;height:0.20833in" /> if QPSK is the modulation
scheme as indicated by <em>pi2BPSK</em> for PUCCH format 3 or PUCCH
format 4. For PUCCH format 2, <img src="media/image114.svg"
style="width:0.38542in;height:0.19792in" /></p>
<p>If a UE has one or more CSI reports and zero or more HARQ-ACK/SR
information bits to transmit in a PUCCH where the HARQ-ACK, if any, is
in response to a PDSCH reception without a corresponding PDCCH</p>
<p>- if any of the CSI reports are overlapping and the UE is provided by
<em>multi-CSI-PUCCH-ResourceList</em> with <img src="media/image115.svg"
style="width:0.32292in;height:0.17708in" /> PUCCH resources in a slot,
for PUCCH format 2 and/or PUCCH format 3 and/or PUCCH format 4, as
described in clause 9.2.1, where the resources are indexed according to
an ascending order for the product of a number of corresponding REs,
modulation order <img src="media/image116.svg"
style="width:0.19792in;height:0.19792in" />, and configured code rate
<img src="media/image117.svg"
style="width:0.17708in;height:0.17708in" />;</p>
<p>- if <img src="media/image118.svg"
style="width:3.61458in;height:0.26042in" />, the UE uses PUCCH format 2
resource <img src="media/image119.svg"
style="width:0.19792in;height:0.19792in" />, or the PUCCH format 3
resource <img src="media/image120.svg"
style="width:0.19792in;height:0.19792in" />, or the PUCCH format 4
resource <img src="media/image121.svg"
style="width:0.19792in;height:0.19792in" /></p>
<p>- else if <img src="media/image122.svg"
style="width:3.61458in;height:0.28125in" /> and <img
src="media/image123.svg" style="width:3.69792in;height:0.28125in" />,
<img src="media/image124.svg"
style="width:0.80208in;height:0.19792in" />, the UE transmits a PUCCH
conveying HARQ-ACK information, SR and CSI report(s) in a respective
PUCCH where the UE uses the PUCCH format 2 resource <img
src="media/image125.svg" style="width:0.38542in;height:0.19792in" />, or
the PUCCH format 3 resource <img src="media/image125.svg"
style="width:0.38542in;height:0.19792in" />, or the PUCCH format 4
resource <img src="media/image125.svg"
style="width:0.38542in;height:0.19792in" /></p>
<p>- else the UE uses the PUCCH format 2 resource <img
src="media/image126.svg" style="width:0.30208in;height:0.17708in" />, or
the PUCCH format 3 resource <img src="media/image126.svg"
style="width:0.30208in;height:0.17708in" />, or the PUCCH format 4
resource <img src="media/image126.svg"
style="width:0.30208in;height:0.17708in" /> and the UE selects <img
src="media/image127.svg" style="width:0.51042in;height:0.26042in" /> CSI
report(s) for transmission together with HARQ-ACK information and SR,
when any, in ascending priority value as described in [6, TS 38.214]</p>
<p>- else, the UE transmits the <img src="media/image128.svg"
style="width:1.30208in;height:0.22917in" /> bits in a PUCCH resource
provided by <em>pucch-CSI-ResourceList</em> and determined as described
in clause 9.2.5</p>
<p>If a UE has HARQ-ACK, SR and wideband or sub-band CSI reports to
transmit and the UE determines a PUCCH resource with PUCCH format 2, or
the UE has HARQ-ACK, SR and wideband CSI reports [6, TS 38.214] to
transmit and the UE determines a PUCCH resource with PUCCH format 3 or
PUCCH format 4, where</p>
<p>- the UE determines the PUCCH resource using the PUCCH resource
indicator field [5, TS 38.212] in a last of a number of DCI formats,
excluding the SPS activation DCI, with a value of a
PDSCH-to-HARQ_feedback timing indicator field, if present, or a value of
<em>dl-DataToUL-ACK</em>, or <em>dl-DataToUL-ACK-r16</em>, or
<em>dl-DataToUL-ACK-DCI-1-2</em>, or <em>dl-DataToUL-ACK-r17,</em> or
<em>dl-DataToUL-ACK-v1700</em>, or <em>dl-DataToUL-ACK-DCI-1-2-r17</em>,
indicating a same slot for the PUCCH transmission, from a PUCCH resource
set provided to the UE for HARQ-ACK transmission, and</p>
<p>- the UE determines the PUCCH resource set as described in clause
9.2.1 and clause 9.2.3 for <img src="media/image129.svg"
style="width:0.26042in;height:0.26042in" /> UCI bits</p>
<p>and</p>
<p>- if <img src="media/image130.svg"
style="width:4in;height:0.26042in" />, the UE transmits the HARQ-ACK,
SR, and CSI reports bits by selecting the minimum number <img
src="media/image131.svg" style="width:0.51042in;height:0.26042in" /> of
the <img src="media/image132.svg"
style="width:0.51042in;height:0.26042in" /> PRBs satisfying <img
src="media/image133.svg" style="width:4in;height:0.26042in" /> as
described in clauses 9.2.3 and 9.2.5.1;</p>
<p>- else, the UE selects <img src="media/image134.svg"
style="width:0.51042in;height:0.26042in" /> CSI report(s), from the <img
src="media/image94.svg" style="width:0.32292in;height:0.26042in" /> CSI
reports, for transmission together with HARQ-ACK and SR in ascending
priority value [6, TS 38.214], where the value of <img
src="media/image134.svg" style="width:0.51042in;height:0.26042in" />
satisfies <img src="media/image135.svg"
style="width:4.65625in;height:0.58333in" /> and <img
src="media/image136.svg" style="width:4.6875in;height:0.57292in" />,
where <img src="media/image137.svg"
style="width:0.89583in;height:0.26042in" /> is a number of CRC bits
corresponding to <img src="media/image138.svg"
style="width:1.61458in;height:0.45833in" /> UCI bits, and <img
src="media/image139.svg" style="width:1in;height:0.26042in" /> is a
number of CRC bits corresponding to <img src="media/image140.svg"
style="width:1.61458in;height:0.47917in" /> UCI bits.</p>
<p>If a UE is provided a first interlace of <span
class="math inline">\(M_{\text{Interlace,0}}^{\text{PUCCH}}\)</span>
PRBs by <em>interlace0</em> in <em>InterlaceAllocation</em>, the UE has
HARQ-ACK, SR and wideband or sub-band CSI reports to transmit, and the
UE determines a PUCCH resource with PUCCH format 2, or the UE has
HARQ-ACK, SR and wideband CSI reports to transmit and the UE determines
a PUCCH resource with PUCCH format 3, where</p>
<p>- the UE determines the PUCCH resource using the PUCCH resource
indicator field in a last of a number of DCI formats, excluding the SPS
activation DCI, with a value of a PDSCH-to-HARQ_feedback timing
indicator field, or a value provided by <em>dl-DataToUL-ACK</em> or
<em>dl-DataToUL-ACK-r16</em> or <em>dl-DataToUL-ACK-DCI-1-2</em> or
<em>dl-DataToUL-ACK-r17</em> or <em>dl-DataToUL-ACK-DCI-1-2-r17</em> if
the PDSCH-to-HARQ_feedback timing indicator field is not present in a
DCI format, indicating a same slot for the PUCCH transmission, from a
PUCCH resource set provided to the UE for HARQ-ACK transmission, and</p>
<p>- the UE determines the PUCCH resource set as described in clauses
9.2.1 and 9.2.3 for <span class="math inline">\(O_{\text{UCI}}\)</span>
UCI bits</p>
<p>and</p>
<p>- if <span class="math inline">\(\left( O_{\text{ACK}} +
O_{\text{SR}} + O_{\text{CSI} - \text{part1}} + O_{\text{CRC,CSI-part1}}
\right) \leq M_{\text{Interlace,0}}^{\text{PUCCH}} \cdot
N_{\text{sc,ctrl}}^{\text{RB}} \cdot N_{\text{symb-UCI}}^{\text{PUCCH}}
\cdot Q_{m} \cdot r\)</span>, the UE transmits the HARQ-ACK, SR, and CSI
reports bits in a PUCCH over the first interlace</p>
<p>- else, if the UE is provided a second interlace of <span
class="math inline">\(M_{\text{Interlace,1}}^{\text{PUCCH}}\)</span>
PRBs by <em>interlace1</em> and if <span class="math inline">\(\left(
O_{\text{ACK}} + O_{\text{SR}} + O_{\text{CSI} - \text{part1}} +
O_{\text{CRC,CSI-part1}} \right) \leq \left(
M_{\text{Interlace,0}}^{\text{PUCCH}} +
M_{\text{Interlace,1}}^{\text{PUCCH}} \right) \cdot
N_{\text{sc,ctrl}}^{\text{RB}} \cdot N_{\text{symb-UCI}}^{\text{PUCCH}}
\cdot Q_{m} \cdot r\)</span>, the UE transmits the HARQ-ACK, SR, and CSI
reports bits in a PUCCH over both the first and second interlaces</p>
<p>- else, the procedure is same as the corresponding one when the UE is
provided <em>PUCCH-ResourceSet</em> by replacing <span
class="math inline">\(M_{\text{RB}}^{\text{PUCCH}}\)</span> with <span
class="math inline">\(M_{\text{Interlace,0}}^{\text{PUCCH}}\)</span>,
or, if the UE is provided <em>interlace1</em>, by <span
class="math inline">\(M_{\text{Interlace,0}}^{\text{PUCCH}} +
M_{\text{Interlace,1}}^{\text{PUCCH}}\)</span>.</p>
<p>If a UE has HARQ-ACK, SR and sub-band CSI reports to transmit and the
UE determines a PUCCH resource with PUCCH format 3 or PUCCH format 4,
where</p>
<p>- the UE determines the PUCCH resource using the PUCCH resource
indicator field [5, TS 38.212] in a last of a number of DCI formats,
excluding the SPS activation DCI, with a value of a
PDSCH-to-HARQ_feedback timing indicator field indicating a same slot for
the PUCCH transmission, or by a value provided by
<em>dl-DataToUL-ACK</em> or <em>dl-DataToUL-ACK-r16</em> or
<em>dl-DataToUL-ACK-DCI-1-2</em> or <em>dl-DataToUL-ACK-r17</em> or
<em>dl-DataToUL-ACK-v1700</em> or <em>dl-DataToUL-ACK-DCI-1-2-r17</em>
if the PDSCH-to-HARQ_feedback timing indicator field is not present in
the last DCI format, from a PUCCH resource set provided to the UE for
HARQ-ACK transmission, and</p>
<p>- the UE determines the PUCCH resource set as described in clause
9.2.1 and clause 9.2.3 for <img src="media/image141.svg"
style="width:0.28125in;height:0.26042in" /> UCI bits</p>
<p>and</p>
<p>- if <img src="media/image142.svg"
style="width:3.5in;height:0.25in" />, the UE transmits the HARQ-ACK, SR
and the <img src="media/image143.svg"
style="width:0.34375in;height:0.26042in" /> CSI report bits by selecting
the minimum number <img src="media/image144.svg"
style="width:0.51042in;height:0.26042in" /> of PRBs from the <img
src="media/image145.svg" style="width:0.51042in;height:0.26042in" />
PRBs satisfying <img src="media/image146.svg"
style="width:3.38542in;height:0.26042in" /> as described in clauses
9.2.3 and 9.2.5.1</p>
<p>- else,</p>
<p>- if for <img src="media/image147.svg"
style="width:0.73958in;height:0.26042in" /> Part 2 CSI report priority
value(s), it is</p>
<p><img src="media/image148.svg"
style="width:6.3125in;height:0.51042in" /> and</p>
<p><img src="media/image149.svg"
style="width:6.17708in;height:0.51042in" />,</p>
<p>the UE selects the first <img src="media/image150.svg"
style="width:0.51042in;height:0.26042in" /> Part 2 CSI reports,
according to respective priority value(s) [6, TS 38.214], for
transmission together with the HARQ-ACK, SR and <img
src="media/image94.svg" style="width:0.30208in;height:0.26042in" /> Part
1 CSI reports , where <img src="media/image151.svg"
style="width:0.61458in;height:0.22917in" /> is the number of Part 1 CSI
report bits for the <img src="media/image152.svg"
style="width:0.19792in;height:0.20833in" /> CSI report and <img
src="media/image153.svg" style="width:0.61458in;height:0.22917in" /> is
the number of Part 2 CSI report bits for the <img
src="media/image152.svg" style="width:0.19792in;height:0.20833in" /> CSI
report priority value, <img src="media/image154.svg"
style="width:0.80208in;height:0.22917in" /> is a number of CRC bits
corresponding to <img src="media/image155.svg"
style="width:0.69792in;height:0.42708in" />, and <img
src="media/image156.svg" style="width:1in;height:0.26042in" /> is a
number of CRC bits corresponding to <img src="media/image157.svg"
style="width:0.80208in;height:0.42708in" /></p>
<p>- else, the UE drops all Part 2 CSI reports and selects <img
src="media/image158.svg" style="width:0.51042in;height:0.26042in" />
Part 1 CSI report(s), from the <img src="media/image94.svg"
style="width:0.30208in;height:0.26042in" /> CSI reports in ascending
priority value [6, TS 38.214], for transmission together with the
HARQ-ACK and SR information bits where the value of <img
src="media/image159.svg" style="width:0.51042in;height:0.26042in" />
satisfies <img src="media/image160.svg"
style="width:4.51042in;height:0.61458in" /> and <img
src="media/image161.svg" style="width:4.71875in;height:0.61458in" />,
where <img src="media/image162.svg"
style="width:0.80208in;height:0.26042in" />is a number of CRC bits
corresponding to <img src="media/image163.svg"
style="width:1.61458in;height:0.51042in" /> UCI bits, and <img
src="media/image164.svg" style="width:1in;height:0.26042in" /> is a
number of CRC bits corresponding to <img src="media/image165.svg"
style="width:1.61458in;height:0.51042in" /> UCI bits.</p>
<p>If a UE is provided a first interlace of <span
class="math inline">\(M_{\text{Interlace,0}}^{\text{PUCCH}}\)</span>
PRBs by <em>interlace0</em> in <em>InterlaceAllocation</em>, the UE has
HARQ-ACK, SR and sub-band CSI reports to transmit, and the UE determines
a PUCCH resource with PUCCH format 3, where</p>
<p>- the UE determines the PUCCH resource using the PUCCH resource
indicator field in a last of a number of DCI formats, excluding the SPS
activation DCI, that have a value of a PDSCH-to-HARQ_feedback timing
indicator field indicating a same slot for the PUCCH transmission, or a
value provided by <em>dl-DataToUL-ACK</em> or
<em>dl-DataToUL-ACK-r16</em> or <em>dl-DataToUL-ACK-DCI-1-2</em> or
<em>dl-DataToUL-ACK-r17</em> or <em>dl-DataToUL-ACK-DCI-1-2-r17</em> if
the PDSCH-to-HARQ_feedback timing indicator field is not present in the
last DCI format, from a PUCCH resource set provided to the UE for
HARQ-ACK transmission, and</p>
<p>- the UE determines the PUCCH resource set as described in clauses
9.2.1 and 9.2.3 for <span class="math inline">\(O_{\text{UCI}}\)</span>
UCI bits</p>
<p>and</p>
<p>- if <span class="math inline">\(\left( O_{\text{ACK}} +
O_{\text{SR}} + O_{\text{CSI}} + O_{\text{CRC}} \right) \leq
M_{\text{Interlace,0}}^{\text{PUCCH}} \cdot
N_{\text{sc,ctrl}}^{\text{RB}} \cdot N_{\text{symb-UCI}}^{\text{PUCCH}}
\cdot Q_{m} \cdot r\)</span>, the UE transmits the HARQ-ACK, SR and the
<span class="math inline">\(N_{\text{CSI}}^{\text{total}}\)</span> CSI
report bits in a PUCCH over the first interlace</p>
<p>- else if the UE is provided a second interlace of <span
class="math inline">\(M_{\text{Interlace,1}}^{\text{PUCCH}}\)</span>
PRBs by <em>interlace1</em> and if <span class="math inline">\(\left(
O_{\text{ACK}} + O_{\text{SR}} + O_{\text{CSI}} + O_{\text{CRC}} \right)
\leq \left( M_{\text{Interlace,0}}^{\text{PUCCH}} +
M_{\text{Interlace,1}}^{\text{PUCCH}} \right) \cdot
N_{\text{sc,ctrl}}^{\text{RB}} \cdot N_{\text{symb-UCI}}^{\text{PUCCH}}
\cdot Q_{m} \cdot r\)</span>, the UE transmits the HARQ-ACK, SR, and CSI
reports bits in a PUCCH over both the first and second interlaces</p>
<p>- else, the procedure is same as the corresponding one when the UE is
provided <em>PUCCH-ResourceSet</em> by replacing <span
class="math inline">\(M_{\text{RB}}^{\text{PUCCH}}\)</span> with <span
class="math inline">\(M_{\text{Interlace,0}}^{\text{PUCCH}}\)</span>,
or, if the UE is provided <em>interlace1</em>, with <span
class="math inline">\(M_{\text{Interlace,0}}^{\text{PUCCH}} +
M_{\text{Interlace,1}}^{\text{PUCCH}}\)</span>.</p>
<p>Table 9.2.5.2-1: Code rate <span
class="math inline">\(\mathbf{r}\)</span> corresponding to value of
<em>maxCodeRate</em></p>
<table>
<colgroup>
<col style="width: 52%" />
<col style="width: 47%" />
</colgroup>
<tbody>
<tr>
<td rowspan="2" style="text-align: center;"><em>maxCodeRate</em></td>
<td rowspan="2" style="text-align: center;"><strong>Code rate</strong>
<span class="math inline">\(\mathbf{r}\)</span></td>
</tr>
<tr>
</tr>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0.08</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0.15</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">0.25</td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0.35</td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td style="text-align: center;">0.45</td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td style="text-align: center;">0.60</td>
</tr>
<tr>
<td style="text-align: center;">6</td>
<td style="text-align: center;">0.80</td>
</tr>
<tr>
<td style="text-align: center;">7</td>
<td style="text-align: center;">Reserved</td>
</tr>
</tbody>
</table>
<h4 id="ue-procedure-for-reporting-uci-of-different-priorities">9.2.5.3
UE procedure for reporting UCI of different priorities</h4>
<p>If a UE</p>
<p>- is provided <em>PUCCH-ConfigurationList</em> for PUCCH
transmissions with priority 0 and 1,</p>
<p>- is provided <em>uci-MuxWithDiffPrio</em>, and</p>
<p>- would transmit overlapping PUCCHs that include a first PUCCH with
<span class="math inline">\(O_{ACK,0}\)</span> HARQ-ACK information bits
of priority 0 and a second PUCCH with <span
class="math inline">\(O_{ACK,1}\)</span> HARQ-ACK information bits of
priority 1</p>
<p>- if the PUCCH resource for the second PUCCH includes PUCCH format 2,
3, or 4 and additionally includes <span
class="math inline">\(O_{SR,1}\)</span> SR bits of priority 1, <span
class="math inline">\(O_{ACK,1}\)</span> is replaced by <span
class="math inline">\(O_{ACK,1} + O_{SR,1}\)</span> where <span
class="math inline">\(O_{SR,1}\)</span> is determined according to
clause 9.2.5.1</p>
<p>the UE</p>
<p>- determines</p>
<p>- a PUCCH resource set from the second <em>PUCCH-Config</em> using
<span class="math inline">\({O_{UCI} = O}_{ACK,0} + O_{ACK,1}\)</span>
as described in clause 9.2.1, and a PUCCH resource from the PUCCH
resource set as described in clause 9.2.3 where a DCI format, if any,
triggers PUCCH transmission of priority 1, or</p>
<p>- a PUCCH resource from the second <em>sps-PUCCH-AN-List</em> using
<span class="math inline">\({O_{UCI} = O}_{ACK,0} + O_{ACK,1}\)</span>
as described in clause 9.2.1, and</p>
<p>- multiplexes the <span class="math inline">\(O_{ACK,0}\)</span> and
<span class="math inline">\(O_{ACK,1}\)</span> HARQ-ACK information bits
in a same PUCCH using the PUCCH resource.</p>
<p>If the PUCCH resource includes PUCCH format 2 or PUCCH format 3 and
<span class="math inline">\(M_{RB}^{\text{PUCCH}}\)</span> PRBs, the UE
determines a number of <span
class="math inline">\(M_{RB,min}^{\text{PUCCH}} \leq
M_{RB}^{\text{PUCCH}}\)</span> PRBs for the PUCCH transmission to be the
minimum number of PRBs that starts from the first PRB from the <span
class="math inline">\(M_{RB}^{\text{PUCCH}}\)</span> PRBs and results
to</p>
<p><span class="math display">\[\left( O_{\text{ACK,0}} +
O_{\text{CRC,0}} \right) \cdot r_{\text{1}} + \left( O_{\text{ACK,1}} +
O_{\text{CRC,1}} \right) \cdot r_{\text{0}} \leq
M_{RB,min}^{\text{PUCCH}} \cdot N_{\text{sc,ctrl}}^{\text{RB}} \cdot
N_{\text{symb-UCI}}^{\text{PUCCH}} \cdot Q_{m} \cdot r_{\text{0}} \cdot
r_{\text{1}}\]</span></p>
<p>where <span class="math inline">\(O_{\text{CRC,0}}\)</span> or <span
class="math inline">\(O_{\text{CRC,1}}\)</span> is a number of CRC bits,
if any, for encoding the <span
class="math inline">\(O_{\text{ACK,0}}\)</span> or the <span
class="math inline">\(O_{\text{ACK,1}}\)</span> HARQ-ACK information
bits, respectively, <span class="math inline">\(r_{\text{0}}\)</span> is
provided by <em>maxCodeRateLP</em>, and the remaining parameters are as
defined in clause 9.2.5.2 with <span class="math inline">\(r_{\text{1}}
= r\)</span>. For PUCCH format 3, if <span
class="math inline">\(M_{RB,min}^{\text{PUCCH}}\)</span> is not equal to
<span class="math inline">\(2^{\alpha_{2}} \cdot 3^{\alpha_{3}} \cdot
5^{\alpha_{5}}\)</span> [4, TS 38.211], <span
class="math inline">\(M_{RB,min}^{\text{PUCCH}}\)</span> is increased to
a nearest value that is equal to <span
class="math inline">\(2^{\alpha_{2}} \cdot 3^{\alpha_{3}} \cdot
5^{\alpha_{5}}\ \)</span>and does not exceed <em>nrofPRBs</em>.</p>
<p>If <span class="math inline">\(\left( O_{\text{ACK,0}} +
O_{\text{CRC,0}} \right) \cdot r_{\text{1}} + \left( O_{\text{ACK,1}} +
O_{\text{CRC,1}} \right) \cdot r_{\text{0}} &gt; M_{RB}^{\text{PUCCH}}
\cdot N_{\text{sc,ctrl}}^{\text{RB}} \cdot
N_{\text{symb-UCI}}^{\text{PUCCH}} \cdot Q_{m} \cdot r_{\text{0}} \cdot
r_{\text{1}}\)</span>, the UE transmits the PUCCH over the <span
class="math inline">\(M_{RB}^{\text{PUCCH}}\)</span> PRBs.</p>
<p>If a UE transmits a PUCCH that includes HARQ-ACK information bits of
priority 0 and 1 using a PUCCH resource that includes PUCCH format 2, 3
or 4, the UE determines a power for the PUCCH transmission as described
in clause 7.2.1 assuming that the PUCCH includes only UCI bits of
priority 1, where <span class="math inline">\(N_{RE}(i) = \min\left(
M_{RB}^{\text{PUCCH}} \cdot N_{\text{sc,ctrl}}^{\text{RB}} \cdot
N_{\text{symb-UCI}}^{\text{PUCCH}},\left\lceil \frac{\left(
O_{\text{ACK,1}} + O_{\text{CRC,1}} \right)}{\left( Q_{m} \cdot
r_{\text{1}} \right)} \right\rceil \right)\)</span>. If <span
class="math inline">\(O_{ACK\text{,1}} \leq 11\ \)</span>bits, <span
class="math inline">\(n_{HARQ - ACK,1} + O_{SR,1}\)</span> replaces
<span class="math inline">\(n_{HARQ - ACK}(i) + O_{SR}(i) +
O_{CSI}(i)\)</span> in the <span
class="math inline">\(\mathrm{\Delta}_{TF,b,f,c}(i)\)</span> calculation
in clause 7.2.1; otherwise, <span class="math inline">\(O_{ACK,1} +
O_{CRC,1}\)</span> replaces <span class="math inline">\(O_{ACK}(i) +
O_{SR}(i) + O_{CSI}(i) + O_{CRC}(i)\)</span> in the<span
class="math inline">\(\ BPRE(i)\)</span> calculation in clause
7.2.1.</p>
<p>If a UE transmits a PUCCH that includes one HARQ-ACK information bit
of priority 0 and one HARQ-ACK information bit of priority 1</p>
<p>- if the PUCCH transmission uses a resource that includes PUCCH
format 0, the HARQ-ACK information bits of priority 1 and priority 0 are
set as the first and second bits in Table 9.2.3-4, respectively, to
derive the <span class="math inline">\(m_{CS}\)</span> of the PUCCH
transmission</p>
<p>- if the PUCCH transmission uses a resource that includes PUCCH
format 1, the HARQ-ACK information bits of priority 1 and priority 0 are
the first and second bits, respectively, of the QPSK modulated symbol
for the PUCCH transmission</p>
<p>If a UE transmits a PUCCH that includes HARQ-ACK information bits of
priority 0 and 1 using PUCCH format 1, the UE determines a power for the
PUCCH transmission as described in clause 7.2.1 assuming that all
HARQ-ACK information bits have priority 1.</p>
<p>If a UE is provided a first interlace of <span
class="math inline">\(M_{\text{Interlace,0}}^{\text{PUCCH}}\)</span>
PRBs by <em>interlace0</em> in <em>InterlaceAllocation</em></p>
<p>- if the UE is provided a second interlace of <span
class="math inline">\(M_{\text{Interlace,1}}^{\text{PUCCH}}\)</span>
PRBs by <em>interlace1</em> in <em>InterlaceAllocation</em></p>
<p>- if <span class="math inline">\(\left( O_{\text{ACK,0}} +
O_{\text{CRC,0}} \right) \cdot r_{\text{1}} + \left( O_{\text{ACK,1}} +
O_{\text{CRC,1}} \right) \cdot r_{\text{0}} \leq
M_{Interlace,0}^{\text{PUCCH}} \cdot N_{\text{sc,ctrl}}^{\text{RB}}
\cdot N_{\text{symb-UCI}}^{\text{PUCCH}} \cdot Q_{m} \cdot r_{\text{0}}
\cdot r_{\text{1}}\)</span>, the UE transmits the PUCCH over the first
interlace</p>
<p>- else, the UE transmits the PUCCH over both the first and second
interlaces</p>
<p>- else the UE transmits the PUCCH over the first interlace</p>
<p>If the UE transmits a PUCCH that includes HARQ-ACK information bits
of priority 0 and 1 over interlaces, the UE determines a power for the
PUCCH transmission as described in clause 7.2.1 assuming that the PUCCH
includes only UCI bits of priority 1.</p>
<h4 id="ue-procedure-for-deferring-harq-ack-for-sps-pdsch">9.2.5.4 UE
procedure for deferring HARQ-ACK for SPS PDSCH </h4>
<p>If a UE is provided <em>sps-HARQ-Deferral</em> and, after performing
the procedures in clauses 9 and 9.2.5 to resolve overlapping among
PUCCHs and PUSCHs in a first slot, if any, the UE determines a PUCCH
resource for a PUCCH transmission with first HARQ-ACK information bits
for SPS PDSCH receptions that the UE would report for a first time, and
the PUCCH resource</p>
<p>- is provided by <em>SPS-PUCCH-AN-List</em> as described in clause
9.2.1, or by <em>n1PUCCH-AN</em> if <em>SPS-PUCCH-AN-List</em> is not
provided</p>
<p>- is not cancelled by an overlapping PUCCH or PUSCH transmission of
larger priority index</p>
<p>- overlaps with a symbol indicated as downlink by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigDedicated</em>, or indicated for a SS/PBCH block by
<em>ssb-PositionsInBurst</em>, or belonging to a CORESET associated with
a Type0-PDCCH CSS set</p>
<p>the UE</p>
<p>- determines an earliest second slot and, after performing the
procedures in clauses 9.2.1 and 9.2.3 to determine a PUCCH with third
HARQ-ACK information bits including second HARQ-ACK information bits and
then performing the procedures in clauses 9 and 9.2.5 to resolve
overlapping among PUCCHs and PUSCHs, if any, a PUSCH or a PUCCH in the
earliest second slot to multiplex the third HARQ-ACK information bits
that include second HARQ-ACK information bits from the first HARQ-ACK
information bits , where the second HARQ-ACK information bits correspond
to SPS PDSCH configurations with <em>sps-HARQ-Deferral</em> values that
are larger than or equal to a time difference, with reference to slots
for PUCCH transmissions on the primary cell, between the second slot and
the slot of the SPS PDSCH reception, if any</p>
<p>- if the UE detects a DCI format in a PDCCH reception that triggers a
PUCCH transmission with a Type-3 HARQ-ACK codebook in a slot as
described in clause 9.1.4, the UE stops the procedure to determine the
earliest second slot in the slot</p>
<p>- if the UE is provided a periodic cell switching pattern for PUCCH
transmissions by <em>pucch-sSCellPattern</em>, the UE determines the
earliest second slot and a corresponding cell based on the periodic cell
switching pattern as described in clause 9.A</p>
<p>- if the UE multiplexes the second HARQ-ACK information in a PUSCH,
or in a PUCCH using a resource that is not from
<em>SPS-PUCCH-AN-List</em>, or from <em>n1PUCCH-AN</em> if
<em>SPS-PUCCH-AN-List</em> is not provided, the UE stops the procedure
to determine the earliest second slot in the slot</p>
<p>- if the UE multiplexes the second HARQ-ACK information in a first
PUCCH using a resource provided by <em>SPS-PUCCH-AN-List</em>, or by
<em>n1PUCCH-AN</em> if <em>SPS-PUCCH-AN-List</em> is not provided, of
smaller priority index and the UE drops the first PUCCH transmission due
to an overlapping with a second PUSCH or PUCCH transmission of larger
priority index, the UE stops the procedure to determine the earliest
second slot in the slot</p>
<p>- if the UE multiplexes the second HARQ-ACK information in a first
PUCCH using a resource provided by <em>SPS-PUCCH-AN-List</em>, or by
<em>n1PUCCH-AN</em> if <em>SPS-PUCCH-AN-List</em> is not provided, and
the PUCCH transmission is not dropped due to an overlapping with a PUSCH
or PUCCH transmission of larger priority and does not have any symbol
that overlaps with a symbol indicated as downlink by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigDedicated</em>, or indicated for a SS/PBCH block by
<em>ssb-PositionsInBurst</em>, or belonging to a CORESET associated with
a Type0-PDCCH CSS set, the UE stops the procedure to determine the
earliest second slot in the slot</p>
<p>- the second HARQ-ACK information bits, generated as described in
clause 9.1.2, are appended to fourth HARQ-ACK information bits the UE
generates as described in clauses 9.1.2, 9.1.2.1, 9.1.3.1, or 9.1.5</p>
<p>- if the UE would receive a PDSCH providing a TB for a same HARQ
process as a HARQ-ACK information bit from the second HARQ-ACK
information bits prior to transmitting the PUCCH or the PUSCH, the UE
does not include the HARQ-ACK information bit in the second HARQ-ACK
information bits.</p>
<p>The UE does not expect to be provided both <em>sps-HARQ-Deferral</em>
and <em>nrofSlots</em> or <em>pucch-RepetitionNrofSlots</em> for any
PUCCH resource of same priority.</p>
<p><span class="math inline">\(O_{ACK}\)</span> is the number of the
third HARQ-ACK information bits.</p>
<p>If <span class="math inline">\(O_{ACK} + O_{SR} + O_{CSI} \leq
11\)</span>, the UE determines a number of HARQ-ACK information bits for
obtaining a transmission power for a PUCCH transmission in the second
slot, as described in clause 7.2.1, as <span
class="math inline">\(n_{HARQ - ACK} = \ n_{HARQ - ACK,0} + n_{HARQ -
ACK,1}\)</span> where</p>
<p>- <span class="math inline">\(n_{HARQ - ACK,0}\)</span> is the number
of HARQ-ACK information bits, if any, that the UE determines as
described in clause 9.1.2.1, 9.1.3.1 or 9.1.5 for the fourth HARQ-ACK
information bits</p>
<p>- <span class="math inline">\(n_{HARQ - ACK,1}\)</span> is determined
as described in clause 9.1.2.1 or 9.1.3.1 for the second HARQ-ACK
information bits.</p>
<h3 id="pucch-repetition-procedure">9.2.6 PUCCH repetition
procedure</h3>
<p>A UE can be indicated to transmit a PUCCH over <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> slots
using a PUCCH resource, where</p>
<p>- if the PUCCH resource is indicated by a DCI format and includes
<em>pucch-RepetitionNrofSlots</em>, <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> is
provided by <em>pucch-RepetitionNrofSlots</em></p>
<p>- otherwise, <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> is
provided by <em>nrofSlots</em></p>
<p>If the UE is provided <em>subslotLengthForPUCCH</em>, a slot for a
PUCCH transmission with repetitions over <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}} &gt; 1\)</span>
slots includes a number of symbols indicated by
<em>subslotLengthForPUCCH</em>.</p>
<p>For <span class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}} &gt;
1\)</span>,</p>
<p>- the UE repeats the PUCCH transmission with the UCI over <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span>
slots</p>
<p>- a repetition of the PUCCH transmission in each of the <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> slots
has a same number of consecutive symbols, as provided by
<em>nrofSymbols</em></p>
<p>- a repetition of the PUCCH transmission in each of the <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> slots
has a same first symbol, as provided by <em>startingSymbolIndex</em> if
<em>subslotLengthForPUCCH</em> is not provided; otherwise
mod(<em>startingSymbolIndex</em>, <em>subslotLengthForPUCCH</em>)</p>
<p>- the UE is configured by <em>interslotFrequencyHopping</em> whether
or not to perform frequency hopping for repetitions of the PUCCH
transmission in different slots</p>
<p>- if the UE is configured to perform frequency hopping for
repetitions of a PUCCH transmission across slots and the UE is not
provided <em>pucch-DMRS-Bundling</em> = 'enabled'</p>
<p>- the UE performs frequency hopping per slot</p>
<p>- the UE transmits the PUCCH starting from a first PRB, provided by
<em>startingPRB</em>, in slots with even number and starting from a
second PRB, provided by <em>secondHopPRB</em>, in slots with odd number.
The slot indicated to the UE for the first repetition of the PUCCH
transmission has number 0 and each subsequent slot until the UE
transmits the PUCCH in <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> slots is
counted regardless of whether or not the UE transmits the PUCCH in the
slot</p>
<p>- the UE does not expect to be configured to perform frequency
hopping for a repetition of the PUCCH transmission within a slot</p>
<p>- if the UE is configured to perform frequency hopping for
repetitions of a PUCCH transmission across slots and the UE is provided
<em>pucch-DMRS-Bundling</em> = 'enabled'</p>
<p>- the UE performs frequency hopping per interval of <span
class="math inline">\(N_{\text{PUCCH}}^{\text{interval}}\)</span>
consecutive slots, that start from a slot indicated to the UE and where
the UE would transmit a first repetition of the PUCCH, where <span
class="math inline">\(N_{\text{PUCCH}}^{\text{interval}}\)</span> is the
value of <em>pucch-FrequencyHoppingInterval</em>, if provided;
otherwise, <span
class="math inline">\(N_{\text{PUCCH}}^{\text{interval}}\)</span> is the
value of <em>pucch-TimeDomainWindowLength</em></p>
<p>- the UE transmits the PUCCH over intervals until the UE transmits
the PUCCH in <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> slots,
where the first interval has number 0 and each subsequent interval is
counted regardless of whether or not the UE transmits the PUCCH in a
slot</p>
<p>- the UE transmits the PUCCH starting from a first PRB, provided by
<em>startingPRB</em>, in intervals with even number and starting from a
second PRB, provided by <em>secondHopPRB</em>, in intervals of frequency
hopping intervals with odd number</p>
<p>- the UE does not expect to be configured to perform frequency
hopping for a repetition of the PUCCH transmission within a slot</p>
<p>- if the UE is not configured to perform frequency hopping for
repetitions of a PUCCH transmission across slots and the UE is
configured to perform frequency hopping for a repetition of the PUCCH
transmission within a slot, the frequency hopping pattern between the
first PRB and the second PRB is same within each slot</p>
<p>If the UE determines that, for a repetition of a PUCCH transmission
in a slot, the number of symbols available for the PUCCH transmission is
smaller than the value provided by <em>nrofSymbols</em> for the
corresponding PUCCH format, the UE does not transmit the PUCCH
repetition in the slot.</p>
<p>A SS/PBCH block symbol is a symbol of an SS/PBCH block with candidate
SS/PBCH block index corresponding to the SS/PBCH block index indicated
to a UE by <em>ssb-PositionsInBurst</em> in <em>SIB1</em> or
<em>ssb-PositionsInBurst</em> in <em>ServingCellConfigCommon</em> or, if
the UE is not provided <em>dl-OrJointTCI-StateList</em>, by
<em>ssb-PositionsInBurst</em> in <em>SSB-MTCAdditionalPCI</em>
associated to physical cell ID with active TCI states for PDCCH or
PDSCH, or for a set of symbols of a slot corresponding to SS/PBCH blocks
configured for L1 beam measurement/reporting.</p>
<p>For unpaired spectrum, the UE determines the <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> slots
for a PUCCH transmission starting from a slot indicated to the UE as
described in clause 9.2.3 for HARQ-ACK reporting, or a slot determined
as described in clause 9.2.4 for SR reporting or in clause 5.2.1.4 of
[6, TS 38.214] for CSI reporting and having</p>
<p>- an UL symbol, as described in clause 11.1, or flexible symbol that
is not SS/PBCH block symbol provided by <em>startingSymbolIndex</em> as
a first symbol, and</p>
<p>- consecutive UL symbols, as described in clause 11.1, or flexible
symbols that are not SS/PBCH block symbols, starting from the first
symbol, equal to or larger than a number of symbols provided by
<em>nrofsymbols</em></p>
<p>For paired spectrum or supplementary uplink band, the UE determines
the <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> slots
for a PUCCH transmission as the <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span>
consecutive slots starting from a slot indicated to the UE as described
in clause 9.2.3 for HARQ-ACK reporting, or a slot determined as
described in clause 9.2.4 for SR reporting or in clause 5.2.1.4 of [6,
TS 38.214] for CSI reporting.</p>
<p>If a UE would transmit a PUCCH over a first number <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}} &gt; 1\)</span>
of slots and the UE would transmit a PUSCH with repetition Type A or
with TB processing over multiple slots over a second number of slots,
and the PUCCH transmission would overlap with the PUSCH transmission in
one or more slots, and the conditions in clause 9.2.5 for multiplexing
the UCI in the PUSCH are satisfied in the overlapping slots, the UE
transmits the PUCCH and does not transmit the PUSCH in the overlapping
slots.</p>
<p>If a UE would transmit a PUCCH over a first number <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}} &gt; 1\)</span>
of slots and the UE would transmit a PUSCH with repetition Type B over a
second number of slots, and the PUCCH transmission would overlap with
actual PUSCH repetitions in one or more slots, and the conditions in
clause 9.2.5 for multiplexing the UCI in the PUSCH are satisfied for the
overlapping actual PUSCH repetitions, the UE transmits the PUCCH and
does not transmit the overlapping actual PUSCH repetitions.</p>
<p>A UE does not multiplex different UCI types in a PUCCH transmission
with repetitions over <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}} &gt; 1\)</span>
slots. If a UE would transmit a first PUCCH over more than one slot and
at least a second PUCCH over one or more slots, and the transmissions of
the first PUCCH and the second PUCCH would overlap in a number of slots
then, for each slot of the number of slots and with UCI type priority of
HARQ-ACK &gt; SR &gt; CSI with higher priority &gt; CSI with lower
priority, the UE determines an earliest first PUCCH in a slot with the
order of earliest starting symbol followed by longest duration and the
second PUCCHs overlapping with the earliest first PUCCH, and then
performs the following</p>
<p>- the UE does not expect more than one PUCCH from the first PUCCH and
the second PUCCHs to start at a same slot and include a UCI type with
same priority</p>
<p>- if more than one PUCCH from the first PUCCH and the second PUCCHs
include a UCI type with the same highest priority, the UE transmits the
PUCCH with the highest priority starting at an earliest slot and does
not transmit the other PUCCHs, otherwise,</p>
<p>- the UE transmits the PUCCH that includes the UCI type with the
highest priority and does not transmit the PUCCHs that include the UCI
type with lower priority</p>
<p>The UE repeats the above procedure until there is no PUCCH
overlapping with any PUCCH with repetitions in the slot.</p>
<p>When a PUCCH resource used for repetitions of a PUCCH transmission by
a UE includes first and second spatial settings, or first and second
sets of power control parameters, as described in [11, TS 38.321] and in
clause 7.2.1, the UE</p>
<p>- uses the first and second spatial settings, or the first and second
sets of power control parameters, for first and second repetitions of
the PUCCH transmission, respectively, when <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}} = 2\)</span>,</p>
<p>- alternates between the first and second spatial settings, or
between the first and second sets of power control parameters,
respectively, per <span
class="math inline">\(N_{\text{PUCCH}}^{\text{switch}}\)</span>
repetitions of the PUCCH transmission, where <span
class="math inline">\(N_{\text{PUCCH}}^{\text{switch}} = 1\)</span> if
<em>mappingPattern</em> = 'cyclicMapping'; else, <span
class="math inline">\(N_{\text{PUCCH}}^{\text{switch}} = 2\)</span>.</p>
<p>A UE does not expect a PUCCH that is in response to a DCI format
detection to overlap with any other PUCCH that does not satisfy the
corresponding timing conditions in clause 9.2.5.</p>
<p>If a UE would transmit a PUCCH over <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> slots
and the UE does not transmit the PUCCH in a slot from the <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> slots
due to overlapping with another PUCCH transmission in the slot, the UE
counts the slot in the number of <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span>
slots.</p>
<p>For DAPS operation, if a UE would transmit a PUCCH over <span
class="math inline">\(N_{\text{PUCCH}}^{\text{repeat}}\)</span> slots on
the source MCG and the UE does not transmit the PUCCH in a slot from the
<span class="math inline">\(N_{PUCCH}^{repeat}\)</span> slots due to
overlapping in time with UE transmission on the target MCG in the slot,
the UE counts the slot in the number of <span
class="math inline">\(N_{PUCCH}^{repeat}\)</span> slots.</p>
<h2 id="uci-reporting-in-physical-uplink-shared-channel">9.3 UCI
reporting in physical uplink shared channel</h2>
<p>Offset values are defined for a UE to determine a number of resources
for multiplexing HARQ-ACK information and for multiplexing CSI reports
in a PUSCH. Offset values are also defined for multiplexing CG-UCI [5,
TS 38.212] in a CG-PUSCH. The offset values are signalled to a UE either
by a DCI format scheduling the PUSCH transmission or by higher
layers.</p>
<p>If a DCI format that does not include a beta_offset indicator field
schedules the PUSCH transmission from the UE and the UE is provided
<em>betaOffsets = 'semiStatic'</em> or <em>betaOffsetsDCI-0-2 =
'semiStaticDCI-0-2'</em>, the UE applies the <span
class="math inline">\(\beta_{offset}^{HARQ - ACK}\)</span>, <span
class="math inline">\(\beta_{offset}^{CSI - 1}\)</span>, and <span
class="math inline">\(\beta_{offset}^{CSI - 2}\)</span> values that are
provided by <em>betaOffsets = 'semiStatic'</em> for DCI formats 0_0/0_1
or by <em>betaOffsetsDCI-0-2 = 'semiStaticDCI-0-2'</em> for DCI format
0_2 for the corresponding HARQ-ACK information, Part 1 CSI reports and
Part 2 CSI reports. If the PUSCH transmission has priority 0 or priority
1 and the UE is configured by <em>uci-MuxWithDiffPrio</em> to multiplex
HARQ-ACK information of priority 1 or priority 0, respectively, and if
the UE multiplexes HARQ-ACK information of priority 1 or priority 0, the
UE applies corresponding <span
class="math inline">\(\beta_{offset}^{HARQ - ACK,1}\)</span> or <span
class="math inline">\(\beta_{offset}^{HARQ - ACK,0}\)</span> provided by
<em>betaOffsetsCrossPri1</em> <em>= 'semiStatic'</em> for DCI formats
0_0/0_1 and by <em>betaOffsetsCrossPri1DCI-0-2= 'semiStatic'</em> for
DCI format 0_2, or by <em>betaOffsetsCrossPri0 = 'semiStatic'</em> for
DCI format 0_1 and by <em>betaOffsetsCrossPri0DCI-0-2= 'semiStatic'</em>
for DCI format 0_2, respectively.</p>
<p>If the PUSCH transmission is with a configured grant and the UE is
provided <em>CG-UCI-OnPUSCH= 'semiStatic'</em>, the UE applies the <span
class="math inline">\(\beta_{offset}^{HARQ - ACK}\)</span>, <span
class="math inline">\(\beta_{offset}^{CSI - 1}\)</span>, and <span
class="math inline">\(\beta_{offset}^{CSI - 2}\)</span> values that are
provided by <em>CG-UCI-OnPUSCH = 'semiStatic'</em> for the corresponding
HARQ-ACK information, Part 1 CSI reports and Part 2 CSI reports. If the
PUSCH transmission has priority 0 or priority 1 and the UE is configured
by <em>uci-MuxWithDiffPrio</em> to multiplex HARQ-ACK information of
priority 1 or priority 0, respectively, and if the UE multiplexes
HARQ-ACK information of priority 1 or priority 0, the UE applies
corresponding <span class="math inline">\(\beta_{offset}^{HARQ -
ACK,1}\)</span> or <span class="math inline">\(\beta_{offset}^{HARQ -
ACK,0}\)</span> provided by <em>cg-betaOffsetsCrossPri1</em> <em>=
'semiStatic'</em> or <em>cg-betaOffsetsCrossPri0 = 'semiStatic'</em>,
respectively.</p>
<p>If the PUSCH transmission is scheduled by DCI format 0_0 and the UE
is provided <em>betaOffsets = 'dynamic'</em>, the UE applies the <span
class="math inline">\(\beta_{offset}^{HARQ - ACK}\)</span>, <span
class="math inline">\(\beta_{offset}^{CSI - 1}\)</span>, and <span
class="math inline">\(\beta_{offset}^{CSI - 2}\)</span> values that are
determined from the first value of <em>betaOffsets = 'dynamic'</em>. If
the UE is configured by <em>uci-MuxWithDiffPrio</em> to multiplex
HARQ-ACK information of priority 1, the UE applies corresponding <span
class="math inline">\(\beta_{offset}^{HARQ - ACK,1}\)</span> provided by
the first value of <em>betaOffsetsCrossPri1</em> <em>=
'dynamic'</em>.</p>
<p>If the PUSCH transmission is a configured grant Type 2 PUSCH and the
UE is provided <em>CG-UCI-OnPUSCH</em> =<em>'dynamic'</em>, the UE
applies the <span class="math inline">\(\beta_{offset}^{HARQ -
ACK}\)</span>, <span class="math inline">\(\beta_{offset}^{CSI -
1}\)</span>, and <span class="math inline">\(\beta_{offset}^{CSI -
2}\)</span> values that are determined from the first value of
<em>CG-UCI-OnPUSCH = 'dynamic'</em>. If the PUSCH transmission has
priority 0 or priority 1 and the UE is configured by
<em>uci-MuxWithDiffPrio</em> to multiplex HARQ-ACK information of
priority 1 or priority 0, respectively, and if the UE multiplexes
HARQ-ACK information of priority 1 or priority 0, the UE applies
corresponding <span class="math inline">\(\beta_{offset}^{HARQ -
ACK,1}\)</span> or <span class="math inline">\(\beta_{offset}^{HARQ -
ACK,0}\)</span> provided by the first value of
<em>cg-betaOffsetsCrossPri1</em> <em>= 'dynamic'</em> or
<em>cg-betaOffsetsCrossPri0</em> <em>= 'dynamic'</em>, respectively.</p>
<p>HARQ-ACK information offsets <span
class="math inline">\(\beta_{offset}^{HARQ - ACK}\)</span> are
configured to values according to Table 9.3-1. The
<em>betaOffsetACK-Index1</em>, <em>betaOffsetACK-Index2</em>, and
<em>betaOffsetACK-Index3</em> respectively provide indexes <span
class="math inline">\(I_{offset,0}^{HARQ - ACK}\)</span>, <span
class="math inline">\(I_{offset,1}^{HARQ - ACK}\)</span>, and <span
class="math inline">\(I_{offset,2}^{HARQ - ACK}\)</span> for the UE to
use if the UE multiplexes up to 2 HARQ-ACK information bits, more than 2
and up to 11 HARQ-ACK information bits, and more than 11 bits in the
PUSCH, respectively.</p>
<p>Offsets <span class="math inline">\(\beta_{offset}^{HARQ -
ACK,0}\)</span> for multiplexing HARQ-ACK information with priority 0 in
a PUSCH transmission with priority 1 are configured to values according
to Table 9.3-1. The first, second and third values provided by any of
<em>betaOffsetsCrossPri0, betaOffsetsCrossPri0DCI-0-2, or</em>
<em>cg-betaOffsetsCrossPri0</em> respectively provide indexes <span
class="math inline">\(I_{offset,0}^{HARQ - ACK,0}\)</span>, <span
class="math inline">\(I_{offset,1}^{HARQ - ACK,0}\)</span>, and <span
class="math inline">\(I_{offset,2}^{HARQ - ACK,0}\)</span> for the UE to
use if the UE multiplexes up to 2 bits, more than 2 and up to 11 bits,
and more than 11 bits of HARQ-ACK information with priority 0 in the
PUSCH transmission with priority 1, respectively.</p>
<p>Offsets <span class="math inline">\(\beta_{offset}^{HARQ -
ACK,1}\)</span> for multiplexing HARQ-ACK information with priority 1 in
a PUSCH transmission with priority 0 are configured to values according
to Table 9.3-1. The first, second and third values provided by any of
<em>betaOffsetsCrossPri1, betaOffsetsCrossPri1DCI-0-2, or</em>
<em>cg-betaOffsetsCrossPri1</em> respectively provide indexes <span
class="math inline">\(I_{offset,0}^{HARQ - ACK,1}\)</span>, <span
class="math inline">\(I_{offset,1}^{HARQ - ACK,1}\)</span>, and <span
class="math inline">\(I_{offset,2}^{HARQ - ACK,1}\)</span> for the UE to
use if the UE multiplexes up to 2 bits, more than 2 and up to 11 bits,
and more than 11 bits of HARQ-ACK information with priority 1 in the
PUSCH transmission with priority 0, respectively.</p>
<p>Part 1 CSI report and Part 2 CSI report offsets <span
class="math inline">\(\beta_{offset}^{CSI - 1}\)</span> and <span
class="math inline">\(\beta_{offset}^{CSI - 2}\)</span>, respectively,
are configured to values according to Table 9.3-2. The
<em>betaOffsetCSI-Part1-Index1</em> and
<em>betaOffsetCSI-Part2-Index1</em> respectively provide indexes <span
class="math inline">\(I_{offset,0}^{CSI - 1}\)</span> and <span
class="math inline">\(I_{offset,0}^{CSI - 2}\)</span> for the UE to use
if the UE multiplexes up to 11 bits for Part 1 CSI reports or Part 2 CSI
reports in the PUSCH. The <em>betaOffsetCSI-Part1-Index2</em> and
<em>betaOffsetCSI-Part2-Index2</em> respectively provide indexes <span
class="math inline">\(I_{offset,1}^{CSI - 1}\)</span> or <span
class="math inline">\(I_{offset,1}^{CSI - 2}\)</span> for the UE to use
if the UE multiplexes more than 11 bits for Part 1 CSI reports or Part 2
CSI reports in the PUSCH.</p>
<p>If a DCI format that includes a beta_offset indicator field with one
bit or two bits, as configured by <em>UCI-OnPUSCH</em> for DCI format
0_1 or by <em>UCI-OnPUSCH-DCI-0-2</em> for DCI format 0_2, schedules the
PUSCH transmission from the UE, the UE is provided by each of
{<em>betaOffsetACK-Index1</em>, <em>betaOffsetACK-Index2</em>,
<em>betaOffsetACK-Index3</em>}, the {first, second, third} values
provided by <em>betaOffsetsCrossPri0, or
betaOffsetsCrossPri0DCI-0-2,</em> and the {first, second, third} values
provided by <em>betaOffsetsCrossPri1, or</em>
<em>betaOffsetsCrossPri1DCI-0-2</em> a set of two or four <span
class="math inline">\(I_{offset}^{HARQ - ACK},\ I_{offset}^{HARQ -
ACK,0},\ and\ I_{offset}^{HARQ - ACK,1}\ \)</span> indexes from Table
9.3-1 for multiplexing HARQ-ACK information in the PUSCH transmission
and by each of {<em>betaOffsetCSI-Part1-Index1</em>,
<em>betaOffsetCSI-Part1-Index2</em>} a set of two or four <span
class="math inline">\(I_{offset}^{CSI - 1}\)</span> indexes, and by each
of {<em>betaOffsetCSI-Part2-Index1</em>,
<em>betaOffsetCSI-Part2-Index2</em>} a set of two or four <span
class="math inline">\(I_{offset}^{CSI - 2}\)</span> indexes from Table
9.3-2, respectively, for multiplexing Part 1 CSI reports and Part 2 CSI
reports, respectively, in the PUSCH transmission. The beta_offset
indicator field indicates a <span class="math inline">\(I_{offset}^{HARQ
- ACK}\)</span> value and/or a <span
class="math inline">\(I_{offset}^{HARQ - ACK,0}\)</span> value, and/or a
<span class="math inline">\(I_{offset}^{HARQ - ACK,1}\)</span> value, a
<span class="math inline">\(I_{offset}^{CSI - 1}\)</span> value and a
<span class="math inline">\(I_{offset}^{CSI - 2}\)</span> value from the
respective sets of values, with the mapping defined in Table 9.3-3 and
in Table 9.3-3A. If the PUSCH transmission has priority 0 or priority 1,
and the UE is provided <em>uci-MuxWithDiffPrio</em>, and the UE
multiplexes HARQ-ACK information of priority 1 or priority 0 in the
PUSCH, the UE applies the {first, second, third} values provided by
<em>betaOffsetsCrossPri1</em> <em>= 'dynamic'</em> for DCI format 0_1,
<em>betaOffsetsCrossPri1DCI-0-2= 'dynamic'</em> for DCI format 0_2, or
applies the {first, second, third} values provided by
<em>betaOffsetsCrossPri0 = 'dynamic'</em> for DCI format 0_1,
<em>betaOffsetsCrossPri0DCI-0-2= 'dynamic'</em> for DCI format 0_2.</p>
<p>For a PUSCH transmission that is configured by a
<em>ConfiguredGrantConfig</em> and includes CG-UCI, the UE multiplexes
CG-UCI in the PUSCH transmission using a <span
class="math inline">\(I_{\text{offset}}^{\text{CG-UCI}}\)</span> value
provided by <em>betaOffsetCG-UCI</em> with the mapping defined in Table
9.3-1. The CG-UCI has same priority value as the PUSCH. If the UE is
provided <em>cg-UCI-Multiplexing</em> and multiplexes HARQ-ACK
information of same priority value as the CG-UCI in the PUSCH
transmission, as described in clauses 9 and 9.2.5, the UE jointly
encodes the HARQ-ACK information and the CG-UCI [5, TS 38.212] and
determines a number of resources for multiplexing the combined
information in a PUSCH using <span
class="math inline">\(\beta_{offset}^{HARQ - ACK}\)</span> which
provides indexes <span class="math inline">\(I_{offset,1}^{HARQ -
ACK}\)</span> and <span class="math inline">\(I_{offset,2}^{HARQ -
ACK}\)</span> for the UE to use if the UE multiplexes up to 11, and more
than 11 combined information bits, respectively.</p>
<p>Table 9.3-1: Mapping of beta_offset values for HARQ-ACK information
and/or for CG-UCI and the index signalled by higher layers</p>
<table>
<colgroup>
<col style="width: 57%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr>
<th><p><span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{HARQ-ACK}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{HARQ-ACK}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,2}}^{\text{HARQ-ACK}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset}}^{\text{CG-UCI}}\)</span></p>
<p>or <span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{HARQ-ACK,0}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{HARQ-ACK,0}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,2}}^{\text{HARQ-ACK,0}}\)</span></p>
<p>or <span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{HARQ-ACK,1}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{HARQ-ACK,1}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,2}}^{\text{HARQ-ACK,1}}\)</span></p></th>
<th><p><span
class="math inline">\(\mathbf{\beta}_{\mathbf{offset}}^{\mathbf{HARQ -
ACK}}\)</span> or <span
class="math inline">\(\mathbf{\beta}_{\mathbf{offset}}^{\mathbf{CG -
UCI}}\)</span></p>
<p>or <span
class="math inline">\(\mathbf{\beta}_{\mathbf{offset}}^{\mathbf{HARQ -
ACK,0}}\)</span> or <span
class="math inline">\(\mathbf{\beta}_{\mathbf{offset}}^{\mathbf{HARQ -
ACK,1}}\)</span></p></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1.000</td>
</tr>
<tr>
<td>1</td>
<td>2.000</td>
</tr>
<tr>
<td>2</td>
<td>2.500</td>
</tr>
<tr>
<td>3</td>
<td>3.125</td>
</tr>
<tr>
<td>4</td>
<td>4.000</td>
</tr>
<tr>
<td>5</td>
<td>5.000</td>
</tr>
<tr>
<td>6</td>
<td>6.250</td>
</tr>
<tr>
<td>7</td>
<td>8.000</td>
</tr>
<tr>
<td>8</td>
<td>10.000</td>
</tr>
<tr>
<td>9</td>
<td>12.625</td>
</tr>
<tr>
<td>10</td>
<td>15.875</td>
</tr>
<tr>
<td>11</td>
<td>20.000</td>
</tr>
<tr>
<td>12</td>
<td>31.000</td>
</tr>
<tr>
<td>13</td>
<td>50.000</td>
</tr>
<tr>
<td>14</td>
<td>80.000</td>
</tr>
<tr>
<td>15</td>
<td>126.000</td>
</tr>
<tr>
<td>16</td>
<td>0.6</td>
</tr>
<tr>
<td>17</td>
<td>0.4</td>
</tr>
<tr>
<td>18</td>
<td>0.2</td>
</tr>
<tr>
<td>19</td>
<td>0.1</td>
</tr>
<tr>
<td>20</td>
<td>0.05</td>
</tr>
<tr>
<td>21</td>
<td>Reserved</td>
</tr>
<tr>
<td>22</td>
<td>Reserved</td>
</tr>
<tr>
<td>23</td>
<td>Reserved</td>
</tr>
<tr>
<td>24</td>
<td>Reserved</td>
</tr>
<tr>
<td>25</td>
<td>Reserved</td>
</tr>
<tr>
<td>26</td>
<td>Reserved</td>
</tr>
<tr>
<td>27</td>
<td>Reserved</td>
</tr>
<tr>
<td>28</td>
<td>Reserved</td>
</tr>
<tr>
<td>29</td>
<td>Reserved</td>
</tr>
<tr>
<td>30</td>
<td>Reserved</td>
</tr>
<tr>
<td>31</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<p>Table 9.3-2: Mapping of beta_offset values for CSI and the index
signalled by higher layers</p>
<table>
<colgroup>
<col style="width: 59%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr>
<th><p><span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{CSI-1}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{CSI-1}}\)</span></p>
<p><span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{CSI-2}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{CSI-2}}\)</span></p></th>
<th><p><span
class="math display">\[\mathbf{\beta}_{\mathbf{offset}}^{\mathbf{CSI -
1}}\]</span></p>
<p><span
class="math display">\[\mathbf{\beta}_{\mathbf{offset}}^{\mathbf{CSI -
2}}\]</span></p></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1.125</td>
</tr>
<tr>
<td>1</td>
<td>1.250</td>
</tr>
<tr>
<td>2</td>
<td>1.375</td>
</tr>
<tr>
<td>3</td>
<td>1.625</td>
</tr>
<tr>
<td>4</td>
<td>1.750</td>
</tr>
<tr>
<td>5</td>
<td>2.000</td>
</tr>
<tr>
<td>6</td>
<td>2.250</td>
</tr>
<tr>
<td>7</td>
<td>2.500</td>
</tr>
<tr>
<td>8</td>
<td>2.875</td>
</tr>
<tr>
<td>9</td>
<td>3.125</td>
</tr>
<tr>
<td>10</td>
<td>3.500</td>
</tr>
<tr>
<td>11</td>
<td>4.000</td>
</tr>
<tr>
<td>12</td>
<td>5.000</td>
</tr>
<tr>
<td>13</td>
<td>6.250</td>
</tr>
<tr>
<td>14</td>
<td>8.000</td>
</tr>
<tr>
<td>15</td>
<td>10.000</td>
</tr>
<tr>
<td>16</td>
<td>12.625</td>
</tr>
<tr>
<td>17</td>
<td>15.875</td>
</tr>
<tr>
<td>18</td>
<td>20.000</td>
</tr>
<tr>
<td>19</td>
<td>Reserved</td>
</tr>
<tr>
<td>20</td>
<td>Reserved</td>
</tr>
<tr>
<td>21</td>
<td>Reserved</td>
</tr>
<tr>
<td>22</td>
<td>Reserved</td>
</tr>
<tr>
<td>23</td>
<td>Reserved</td>
</tr>
<tr>
<td>24</td>
<td>Reserved</td>
</tr>
<tr>
<td>25</td>
<td>Reserved</td>
</tr>
<tr>
<td>26</td>
<td>Reserved</td>
</tr>
<tr>
<td>27</td>
<td>Reserved</td>
</tr>
<tr>
<td>28</td>
<td>Reserved</td>
</tr>
<tr>
<td>29</td>
<td>Reserved</td>
</tr>
<tr>
<td>30</td>
<td>Reserved</td>
</tr>
<tr>
<td>31</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<p>Table 9.3-3: Mapping of four beta_offset indicator values to offset
indexes</p>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 79%" />
</colgroup>
<tbody>
<tr>
<td>beta_offset indicator</td>
<td><p>(<span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{HARQ-ACK}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{HARQ-ACK}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,2}}^{\text{HARQ-ACK}}\)</span>),</p>
<p>(<span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{HARQ-ACK,0}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{HARQ-ACK,0}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,2}}^{\text{HARQ-ACK,0}}\)</span>),</p>
<p>(<span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{HARQ-ACK,1}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{HARQ-ACK,1}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,2}}^{\text{HARQ-ACK,1}}\)</span>),</p>
<p>(<span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{CSI-1}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{CSI-2}}\)</span>),
(<span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{CSI-1}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{CSI-2}}\)</span>)</p></td>
</tr>
<tr>
<td>'00'</td>
<td style="text-align: center;">1<sup>st</sup> offset index provided by
higher layers</td>
</tr>
<tr>
<td>'01'</td>
<td style="text-align: center;">2<sup>nd</sup> offset index provided by
higher layers</td>
</tr>
<tr>
<td>'10'</td>
<td style="text-align: center;">3<sup>rd</sup> offset index provided by
higher layers</td>
</tr>
<tr>
<td>'11'</td>
<td style="text-align: center;">4<sup>th</sup> offset index provided by
higher layers</td>
</tr>
</tbody>
</table>
<p>Table 9.3-3A: Mapping of two beta_offset indicator values to offset
indexes</p>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 79%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: center;"><strong>beta_offset
indicator</strong></td>
<td style="text-align: center;"><p><strong>(</strong><span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{HARQ-ACK}}\)</span>
<strong>or</strong> <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{HARQ-ACK}}\)</span>
<strong>or</strong> <span
class="math inline">\(\mathbf{I}_{\text{offset,2}}^{\text{HARQ-ACK}}\)</span><strong>),</strong></p>
<p>(<span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{HARQ-ACK,0}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{HARQ-ACK,0}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,2}}^{\text{HARQ-ACK,0}}\)</span>),</p>
<p>(<span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{HARQ-ACK,1}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{HARQ-ACK,1}}\)</span>
or <span
class="math inline">\(\mathbf{I}_{\text{offset,2}}^{\text{HARQ-ACK,1}}\)</span>),</p>
<p><strong>(</strong><span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{CSI-1}}\)</span>
<strong>or</strong> <span
class="math inline">\(\mathbf{I}_{\text{offset,0}}^{\text{CSI-2}}\)</span><strong>),
(</strong><span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{CSI-1}}\)</span>
<strong>or</strong> <span
class="math inline">\(\mathbf{I}_{\text{offset,1}}^{\text{CSI-2}}\)</span><strong>)</strong></p></td>
</tr>
<tr>
<td style="text-align: center;">'0'</td>
<td style="text-align: center;">1<sup>st</sup> offset index provided by
higher layers</td>
</tr>
<tr>
<td style="text-align: center;">'1'</td>
<td style="text-align: center;">2<sup>nd</sup> offset index provided by
higher layers</td>
</tr>
</tbody>
</table>
<h1 id="ue-procedure-for-receiving-control-information">10 UE procedure
for receiving control information</h1>
<p>If the UE is configured with a SCG, the UE shall apply the procedures
described in this clause for both MCG and SCG except for PDCCH
monitoring in Type0/0A/0B/2/2A -PDCCH CSS sets where the UE is not
required to apply the procedures in this clause for the SCG</p>
<p>- When the procedures are applied for MCG, the terms 'secondary
cell', 'secondary cells' , 'serving cell', 'serving cells' in this
clause refer to secondary cell, secondary cells, serving cell, serving
cells belonging to the MCG respectively.</p>
<p>- When the procedures are applied for SCG, the terms 'secondary
cell', 'secondary cells', 'serving cell', 'serving cells' in this clause
refer to secondary cell, secondary cells (not including PSCell), serving
cell, serving cells belonging to the SCG respectively. The term 'primary
cell' in this clause refers to the PSCell of the SCG.</p>
<p>A UE monitors a set of PDCCH candidates in one or more CORESETs on
the active DL BWP on each activated serving cell configured with PDCCH
monitoring according to corresponding search space sets where monitoring
implies receiving each PDCCH candidate and decoding according to the
monitored DCI formats.</p>
<p>In the remaining of this clause, when a PDCCH reception by a UE
includes two PDCCH candidates from corresponding search space sets, as
described in clause 10.1</p>
<p>- a PDCCH monitoring occasion is the union of the PDCCH monitoring
occasions for the two PDCCH candidates</p>
<p>- the start of the PDCCH reception is the start of the earlier PDCCH
candidate</p>
<p>- the end of the PDCCH reception is the end of the PDCCH candidate
that ends later</p>
<p>The PDCCH reception includes the two PDCCH candidates also when the
UE is not required to monitor one of the two PDCCH candidates as
described in clauses 10 (except clause 10.4), 11.1, 11.1.1 and 17.2.</p>
<p>If a UE is provided <em>monitoringCapabilityConfig</em> for a serving
cell, the UE obtains an indication to monitor PDCCH on the active DL BWP
of the serving cell for a maximum number of PDCCH candidates and
non-overlapping CCEs</p>
<p>- per slot, as in Tables 10.1-2 and 10.1-3, if
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>,
or</p>
<p>- per span, as in Tables 10.1-2A and 10.1-3A, if
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>,
or</p>
<p>- per group of <span class="math inline">\(X_{s}\)</span> slots
according to combination <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span>, as in Tables 10.1-2B and 10.1-3B, if
<em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em></p>
<p>The remaining of this clause, including clause 10.1, considers that a
UE is provided <em>monitoringCapabilityConfig</em> for a serving cell.
If the UE is not provided <em>monitoringCapabilityConfig</em> for the
serving cell, corresponding statements that the UE is provided
<em>monitoringCapabilityConfig</em> for the serving cell are substituted
as follows</p>
<p>- for SCS configuration <span class="math inline">\(\mu \in \left\{
0,\ 1,\ 2,\ 3 \right\}\)</span>, the UE monitors PDCCH on the active DL
BWP of the serving cell for maximum numbers of PDCCH candidates and
non-overlapping CCEs per slot as in Tables 10.1-2 and 10.1-3.</p>
<p>- for SCS configuration <span class="math inline">\(\mu \in \left\{
5,\ 6 \right\}\)</span>, the UE monitors PDCCH on the active DL BWP of
the serving cell for maximum numbers of PDCCH candidates and
non-overlapping CCEs per group of <span
class="math inline">\(X_{s}\)</span> slots according to combination
<span class="math inline">\(\left( X_{s},Y_{s} \right) = (4,\
1)\)</span> for <span class="math inline">\(\mu = 5\)</span> and <span
class="math inline">\(\left( X_{s},Y_{s} \right) = (8,\ 1)\)</span> for
<span class="math inline">\(\mu = 6\)</span> as in Tables 10.1-2B and
10.1-3B.</p>
<p>The UE does not expect to monitor PDCCH with SCS configuration <span
class="math inline">\(\mu = 6\)</span> before the UE is provided
dedicated higher layer parameters.</p>
<p>A UE can indicate a capability to monitor PDCCH according to one or
more of the combinations <span class="math inline">\((X,Y)\)</span> =
(2, 2), (4, 3), and (7, 3) per SCS configuration of <span
class="math inline">\(\mu = 0\)</span> and <span
class="math inline">\(\mu = 1\)</span>. A span is a number of
consecutive symbols in a slot where the UE is configured to monitor
PDCCH. Each PDCCH monitoring occasion is within one span. If a UE
monitors PDCCH on a cell according to combination <span
class="math inline">\((X,Y)\)</span>, the UE supports PDCCH monitoring
occasions in any symbol of a slot with minimum time separation of <span
class="math inline">\(X\)</span> symbols between the first symbol of two
consecutive spans, including across slots. A span starts at a first
symbol where a PDCCH monitoring occasion starts and ends at a last
symbol where a PDCCH monitoring occasion ends, where the number of
symbols of the span is up to <span class="math inline">\(Y\)</span>.</p>
<p>If a UE indicates a capability to monitor PDCCH according to multiple
<span class="math inline">\((X,Y)\)</span> combinations and a
configuration of search space sets to the UE for PDCCH monitoring on a
cell results to a separation of every two consecutive PDCCH monitoring
spans that is equal to or larger than the value of <span
class="math inline">\(X\)</span> for more than one of the multiple
combinations <span class="math inline">\((X,Y)\)</span>, the UE monitors
PDCCH on the cell according to the combination <span
class="math inline">\((X,Y)\)</span>, from the more than one
combinations <span class="math inline">\((X,Y)\)</span>, that is
associated with the largest maximum number of <span
class="math inline">\(M_{PDCCH}^{max,(X,Y),\mu}\)</span> and <span
class="math inline">\(C_{PDCCH}^{max,(X,Y),\mu}\)</span> defined in
Table 10.1-2A and Table 10.1-3A. The UE expects to monitor PDCCH
according to the same combination <span
class="math inline">\((X,Y)\)</span> in every slot on the active DL BWP
of a cell.</p>
<p>For SCS configuration <span class="math inline">\(\mu = 5\)</span> or
<span class="math inline">\(\mu = 6\)</span>, a UE can indicate a
capability to monitor PDCCH according to one or more combinations <span
class="math inline">\(\left( X_{s},Y_{s} \right)\)</span>, where <span
class="math inline">\(X_{s}\)</span> and <span
class="math inline">\(Y_{s}\)</span> are numbers of consecutive slots.
Groups of <span class="math inline">\(X_{s}\)</span> slots are
consecutive and non-overlapping and the <span
class="math inline">\(Y_{s}\)</span> slots are within the <span
class="math inline">\(X_{s}\)</span> slots. The first group of <span
class="math inline">\(X_{s}\)</span> slots starts from the beginning of
a subframe. The start of two consecutive groups of <span
class="math inline">\(Y_{s}\)</span> slots is separated by <span
class="math inline">\(X_{s}\)</span> slots.</p>
<p>If a UE monitors PDCCH on a cell according to combination <span
class="math inline">\(\left( X_{s},Y_{s} \right)\)</span>, the UE can
monitor PDCCH for Type1-PDCCH CSS set provided by dedicated higher layer
signalling, Type3-PDCCH CSS sets, and USS sets in any slot of the <span
class="math inline">\(Y_{s}\)</span> slots, and the UE can monitor PDCCH
for Type0/0A/2-PDCCH CSS set and Type1-PDCCH CSS set provided in
<em>SIB1</em> in any slot of the <span
class="math inline">\(X_{s}\)</span> slots. The UE determines the number
of monitored PDCCH candidates and the number of non-overlapped CCEs for
combination <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span> based on all search space sets within the <span
class="math inline">\(X_{s}\)</span> slots, as applicable according to
the search space set configurations, and maximum corresponding values
are provided in Table 10.1-2B and Table 10.1-3B, respectively.</p>
<p>For <span class="math inline">\(\mu = 6\)</span>, if the UE indicates
a capability to monitor PDCCH according to multiple combinations <span
class="math inline">\(\left( X_{s},Y_{s} \right)\)</span> and a
configuration of search space sets to the UE for PDCCH monitoring on a
serving cell results to a separation of every two consecutive groups of
<span class="math inline">\(Y_{s}\)</span> slots that is not smaller
than <span class="math inline">\(X_{s}\)</span> for more than one
combinations <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span>, of the multiple combinations <span
class="math inline">\(\left( X_{s},Y_{s} \right)\)</span>, the UE
monitors PDCCH on the cell according to the combination <span
class="math inline">\(\left( X_{s},Y_{s} \right)\)</span>, from the more
than one combinations <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span>, that is associated with the largest maximum number of
<span class="math inline">\(M_{PDCCH}^{max,X_{s},\mu}\)</span> and <span
class="math inline">\(C_{PDCCH}^{max,X_{s},\mu}\)</span> defined in
Table 10.1-2B and Table 10.1-3B.</p>
<p>A UE capability for PDCCH monitoring per slot, or per group of <span
class="math inline">\(X_{s}\)</span> slots according to combination
<span class="math inline">\(\left( X_{s},Y_{s} \right)\)</span>, or per
span on an active DL BWP of a serving cell is defined by a maximum
number of PDCCH candidates and non-overlapped CCEs the UE can monitor
per slot, or per group of <span class="math inline">\(X_{s}\)</span>
slots according to combination <span class="math inline">\(\left(
X_{s},Y_{s} \right)\)</span>, or per span, respectively, on the active
DL BWP of the serving cell.</p>
<p>For monitoring of a PDCCH candidate by a UE, if the UE</p>
<p>- has received <em>ssb-PositionsInBurst</em> in <em>SIB1</em> and has
not received <em>ssb-PositionsInBurst</em> in
<em>ServingCellConfigCommon</em> for a serving cell, and</p>
<p>- does not monitor PDCCH candidates in a Type0-PDCCH CSS set, and</p>
<p>- at least one RE for a PDCCH candidate overlaps with at least one RE
of a candidate SS/PBCH block corresponding to a SS/PBCH block index
provided by <em>ssb-PositionsInBurst</em> in <em>SIB1</em>,</p>
<p>the UE is not required to monitor the PDCCH candidate.</p>
<p>For monitoring of a PDCCH candidate by a UE, if the UE</p>
<p>- has received <em>ssb-PositionsInBurst</em> in
<em>ServingCellConfigCommon</em> for a serving cell, and</p>
<p>- does not monitor PDCCH candidates in a Type0-PDCCH CSS set, and</p>
<p>- at least one RE for a PDCCH candidate overlaps with at least one RE
of a candidate SS/PBCH block corresponding to a SS/PBCH block index
provided by <em>ssb-PositionsInBurst</em> in
<em>ServingCellConfigCommon</em>,</p>
<p>the UE is not required to monitor the PDCCH candidate.</p>
<p>For monitoring of a PDCCH candidate by a UE, if the UE</p>
<p>- has received <em>ssb-PositionsInBurst</em> in
<em>SSB-MTCAdditionalPCI</em> for a serving cell, and</p>
<p>- at least one RE for a PDCCH candidate overlaps with at least one RE
of a candidate SS/PBCH block corresponding to a SS/PBCH block index
provided by <em>ssb-PositionsInBurst</em> in
<em>SSB-MTCAdditionalPCI</em> with same physical cell identity as the
one associated with a RS having same quasi-collocation properties as a
CORESET for the PDCCH candidate,</p>
<p>the UE is not required to monitor the PDCCH candidate.</p>
<p>A UE is not required to monitor PDCCH candidates for a
Type0/0A/0B/1/1A /2/2A -PDCCH CSS set when the active TCI state for a
corresponding CORESET is not associated with <em>physCellId</em> in
<em>ServingCellConfigCommon</em>.</p>
<p>If a UE monitors the PDCCH candidate for a Type0-PDCCH CSS set on the
serving cell according to the procedure described in clause 13, the UE
may assume that no SS/PBCH block is transmitted in REs used for
monitoring the PDCCH candidate on the serving cell.</p>
<p>If at least one RE of a PDCCH candidate for a UE on the serving cell
overlaps with at least one RE of <em>lte-CRS-ToMatchAround</em>, or of
<em>LTE-CRS-PatternList</em>, the UE is not required to monitor the
PDCCH candidate.</p>
<p>If a UE is provided <em>availableRB-SetsPerCell,</em> the UE is not
required to monitor PDCCH candidates that overlap with any RB from RB
sets that are indicated as unavailable for receptions by an available RB
set indicator field in DCI format 2_0 as described in clause 11.1.1. If
the UE does not obtain the available RB set indicator for a symbol, the
UE monitors PDCCH candidates on all RB sets in the symbol.</p>
<p>If a UE can support</p>
<p>- a first set of <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL}}\)</span> serving
cells where the UE is either not provided <em>coresetPoolIndex</em> or
is provided <em>coresetPoolIndex</em> with a single value for all
CORESETs on all DL BWPs of each scheduling cell from the first set of
serving cells, and</p>
<p>- a second set of <span
class="math inline">\(N_{\text{cells,1}}^{\text{DL}}\)</span> serving
cells where the UE is not provided <em>coresetPoolIndex</em> or is
provided <em>coresetPoolIndex</em> with a value 0 for a first CORESET,
and with a value 1 for a second CORESET on any DL BWP of each scheduling
cell from the second set of serving cells</p>
<p>the UE determines, for the purpose of reporting
<em>pdcch-BlindDetectionCA</em>, <em>pdcch-BlindDetectionCA1</em>, and
<em>pdcch-BlindDetectionCA3</em>, a number of serving cells as <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL}} + R \cdot
N_{\text{cells,1}}^{\text{DL}}\)</span> where <span
class="math inline">\(R\)</span> is a value reported by the UE.</p>
<p>If a UE indicates in <em>UE-NR-Capability</em> a carrier aggregation
capability larger than 4 serving cells and the UE is not provided
<em>monitoringCapabilityConfig</em> for any downlink cell or if the UE
is provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> for all downlink cells where the UE
monitors PDCCH, the UE includes in <em>UE-NR-Capability</em> an
indication for a maximum number of PDCCH candidates and for a maximum
number of non-overlapped CCEs the UE can monitor per slot when the UE is
configured for carrier aggregation operation over more than 4 cells.
When a UE is not configured for NR-DC operation, the UE determines a
capability to monitor a maximum number of PDCCH candidates and a maximum
number of non-overlapped CCEs per slot that corresponds to <span
class="math inline">\(N_{\text{cells}}^{\text{cap}}\)</span> downlink
cells, where</p>
<p>- <span class="math inline">\(N_{\text{cells}}^{\text{cap}}\)</span>
is <span class="math inline">\(N_{\text{cells,0}}^{\text{DL}} + R \cdot
N_{\text{cells,1}}^{\text{DL}}\)</span> if the UE does not provide
<em>pdcch-BlindDetectionCA</em> where <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL}} +
N_{\text{cells,1}}^{\text{DL}}\)</span> is the number of configured
downlink serving cells</p>
<p>- otherwise, <span
class="math inline">\(N_{\text{cells}}^{\text{cap}}\)</span> is the
value of <em>pdcch-BlindDetectionCA</em></p>
<p>When a UE is configured for NR-DC operation, the UE determines a
capability to monitor a maximum number of PDCCH candidates and a maximum
number of non-overlapped CCEs per slot that corresponds to <span
class="math inline">\(N_{\text{cells}}^{\text{cap}} =
N_{\text{cells}}^{\text{MCG}}\)</span> downlink cells for the MCG where
<span class="math inline">\(N_{\text{cells}}^{\text{MCG}}\)</span> is
provided by <em>pdcch-BlindDetection</em> for the MCG and determines a
capability to monitor a maximum number of PDCCH candidates and a maximum
number of non-overlapped CCEs per slot that corresponds to <span
class="math inline">\(N_{\text{cells}}^{\text{cap}} =
N_{\text{cells}}^{\text{SCG}}\)</span> downlink cells for the SCG where
<span class="math inline">\(N_{\text{cells}}^{\text{SCG}}\)</span> is
provided by <em>pdcch-BlindDetection</em> for the SCG. When the UE is
configured for carrier aggregation operation over more than 4 cells, or
for a cell group when the UE is configured for NR-DC operation, the UE
does not expect to monitor per slot a number of PDCCH candidates or a
number of non-overlapped CCEs that is larger than the maximum number as
derived from the corresponding value of <span
class="math inline">\(N_{\text{cells}}^{\text{cap}}\)</span>.</p>
<p>When a UE is configured for NR-DC operation with a total of <span
class="math inline">\(N_{NR - DC}^{DL,cells}\)</span> downlink cells on
both the MCG and the SCG, the UE expects to be provided
<em>pdcch-BlindDetection</em> for the MCG and
<em>pdcch-BlindDetection</em> for the SCG with values that satisfy</p>
<p>- <em>pdcch-BlindDetection</em> for the MCG +
<em>pdcch-BlindDetection</em> for the SCG &lt;=
<em>pdcch-BlindDetectionCA</em>, if the UE reports
<em>pdcch-BlindDetectionCA</em>, or</p>
<p>- <em>pdcch-BlindDetection</em> for the MCG +
<em>pdcch-BlindDetection</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC}^{DL,cells}\)</span>, if the UE does
not report <em>pdcch-BlindDetectionCA</em>.</p>
<p>For NR-DC operation, the UE may indicate, through
<em>pdcch-BlindDetectionMCG-UE</em> and
<em>pdcch-BlindDetectionSCG-UE</em>, respective maximum values for
<em>pdcch-BlindDetection</em> for the MCG and
<em>pdcch-BlindDetection</em> for the SCG.</p>
<p>If the UE reports <em>pdcch-BlindDetectionCA</em>,</p>
<p>- the value range of <em>pdcch-BlindDetectionMCG-UE</em> or of
<em>pdcch-BlindDetectionSCG-UE</em> is [1, …,
<em>pdcch-BlindDetectionCA</em>-1], and</p>
<p>- <em>pdcch-BlindDetectionMCG-UE</em> +
<em>pdcch-BlindDetectionSCG-UE</em> &gt;=
<em>pdcch-BlindDetectionCA</em>.</p>
<p>Otherwise, if <span class="math inline">\(N_{NR -
DC,max}^{DL,cells}\)</span> is a maximum total number of downlink cells
that the UE can be configured on both the MCG and the SCG for NR-DC as
indicated in <em>UE-NR-Capability</em>,</p>
<p>- the value range of <em>pdcch-BlindDetectionMCG-UE</em> or of
<em>pdcch-BlindDetectionSCG-UE</em> is [1, 2, 3], and</p>
<p>- <em>pdcch-BlindDetectionMCG-UE</em> +
<em>pdcch-BlindDetectionSCG-UE</em> &gt;= <span
class="math inline">\(N_{NR - DC,max}^{DL,cells}\)</span>.</p>
<p>If a UE indicates in <em>UE-NR-Capability</em> a carrier aggregation
capability larger than two downlink cells, the UE includes in
<em>UE-NR-Capability</em> an indication for a maximum number of PDCCH
candidates and a maximum number of non-overlapped CCEs that the UE can
monitor per span when the UE is configured for carrier aggregation
operation over more than two downlink cells with
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>.
When a UE is not configured for NR-DC operation and the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
for all downlink cells where the UE monitors PDCCH, the UE determines a
capability to monitor a maximum number of PDCCH candidates and a maximum
number of non-overlapped CCEs per span that corresponds to <span
class="math inline">\(N_{cells}^{cap - r16}\)</span> downlink cells,
where</p>
<p>- <span class="math inline">\(N_{cells}^{cap - r16}\)</span> is the
number of configured downlink cells if the UE does not provide
<em>pdcch-MonitoringCA</em></p>
<p>- otherwise, <span class="math inline">\(N_{cells}^{cap -
r16}\)</span> is the value of <em>pdcch-MonitoringCA</em></p>
<p>When a UE is configured for NR-DC operation and the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
for all downlink cells where the UE monitors PDCCH, the UE determines a
capability to monitor a maximum number of PDCCH candidates and a maximum
number of non-overlapped CCEs per span that corresponds to</p>
<p>- <span class="math inline">\(N_{cells}^{cap - r16} = \ N_{cells,\
r16}^{MCG}\)</span> downlink cells for the MCG where <span
class="math inline">\(N_{cells,\ r16}^{MCG}\)</span> is provided by
<em>pdcch-BlindDetection2</em> for the MCG, and</p>
<p>- <span class="math inline">\(N_{cells}^{cap - r16} = \ N_{cells,\
r16}^{SCG}\)</span> downlink cells for the SCG where <span
class="math inline">\(N_{cells,\ r16}^{SCG}\)</span> is provided by
<em>pdcch-BlindDetection2</em> for the SCG</p>
<p>When the UE is configured for carrier aggregation operation over more
than 2 cells, or for a cell group when the UE is configured for NR-DC
operation, the UE does not expect to monitor per span a number of PDCCH
candidates or a number of non-overlapped CCEs that is larger than the
maximum number as derived from the corresponding value of <span
class="math inline">\(N_{cells}^{cap - r16}\)</span>.</p>
<p>When a UE is configured for NR-DC operation with a total of <span
class="math inline">\(N_{NR - DC}^{DL,cells}\)</span> downlink cells on
both the MCG and the SCG and the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
for all downlink cells where the UE monitors PDCCH, the UE expects to be
provided <em>pdcch-BlindDetection2</em> for the MCG and
<em>pdcch-BlindDetection2</em> for the SCG with values that satisfy</p>
<p>- <em>pdcch-BlindDetection2</em> for the MCG +
<em>pdcch-BlindDetection2</em> for the SCG &lt;=
<em>pdcch-MonitoringCA</em>, if the UE reports
<em>pdcch-MonitoringCA</em>, or</p>
<p>- <em>pdcch-BlindDetection2</em> for the MCG +
<em>pdcch-BlindDetection2</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC}^{DL,cells}\)</span>, if the UE does
not report <em>pdcch-MonitoringCA</em></p>
<p>When a UE is configured for NR-DC operation and the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
for all downlink cells where the UE monitors PDCCH, the UE may indicate,
through <em>pdcch-BlindDetectionMCG-UE-r16</em> and
<em>pdcch-BlindDetectionSCG-UE-r16</em>, respective maximum values for
<em>pdcch-BlindDetection</em> for the MCG and
<em>pdcch-BlindDetection</em> for the SCG.</p>
<p>If the UE reports <em>pdcch-MonitoringCA</em>,</p>
<p>- the value range of <em>pdcch-BlindDetectionMCG-UE-r16</em> or of
<em>pdcch-BlindDetectionSCG-UE-r16</em> is [1, …,
<em>pdcch-MonitoringCA</em>-1], and</p>
<p>- <em>pdcch-BlindDetectionMCG-UE-r16</em> +
<em>pdcch-BlindDetectionSCG-UE-r16</em> &gt;=
<em>pdcch-MonitoringCA.</em></p>
<p>Otherwise, if <span class="math inline">\(N_{NR - DC,\ \ max,\
r16}^{DL,cells}\)</span> is a maximum total number of downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> and the UE is configured on both the
MCG and the SCG for NR-DC as indicated in <em>UE-NR-Capability</em></p>
<p>- the value of <em>pdcch-BlindDetectionMCG-UE-r16</em> or of
<em>pdcch-BlindDetectionSCG-UE-r16</em> is 1,</p>
<p>- <em>pdcch-BlindDetectionMCG-UE-r16</em> +
<em>pdcch-BlindDetectionSCG-UE-r16</em> &gt;= <span
class="math inline">\(N_{NR - DC,\ \ max,\ r16}^{DL,cells}\)</span>.</p>
<p>If a UE indicates in <em>UE-NR-Capability</em> a carrier aggregation
capability larger than four downlink cells, the UE includes in
<em>UE-NR-Capability</em> an indication for a maximum number of PDCCH
candidates and a maximum number of non-overlapped CCEs that the UE can
monitor per group of <span class="math inline">\(X_{s}\)</span> slots
when the UE is configured for carrier aggregation operation over more
than four downlink cells for which the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>.
When a UE is not configured for NR-DC operation for all downlink cells
where the UE monitors PDCCH, the UE determines a capability to monitor a
maximum number of PDCCH candidates and a maximum number of
non-overlapped CCEs per group of <span
class="math inline">\(X_{s}\)</span> slots that corresponds to <span
class="math inline">\(N_{cells}^{cap - r17}\)</span> downlink cells,
where</p>
<p>- <span class="math inline">\(N_{cells}^{cap - r17}\)</span> is <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL}} + R \cdot
N_{\text{cells,1}}^{\text{DL}}\)</span>if the UE does not provide
<em>pdcch-MonitoringCA-r17</em> where <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL}} +
N_{\text{cells,1}}^{\text{DL}}\)</span> is the number of configured
downlink serving cells</p>
<p>- otherwise, <span class="math inline">\(N_{cells}^{cap -
r17}\)</span> is the value of <em>pdcch-MonitoringCA-r17</em></p>
<p>When the UE is configured for carrier aggregation operation over more
than 4 cells, the UE does not expect to monitor per group of <span
class="math inline">\(X_{s}\)</span> slots a number of PDCCH candidates
or a number of non-overlapped CCEs that is larger than the maximum
number as derived from the corresponding value of <span
class="math inline">\(N_{cells}^{cap - r17}\)</span>.</p>
<p>When a UE is configured for NR-DC operation and the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for all downlink cells where the UE monitors PDCCH, the UE determines a
capability to monitor a maximum number of PDCCH candidates and a maximum
number of non-overlapped CCEs per group of <span
class="math inline">\(X_{s}\)</span> slots that corresponds to</p>
<p>- <span class="math inline">\(N_{cells}^{cap - r17} = \ N_{cells,\
r17}^{MCG}\)</span> downlink cells for the MCG where <span
class="math inline">\(N_{cells,\ r17}^{MCG}\)</span> is provided by
<em>pdcch-BlindDetection4</em> for the MCG, and</p>
<p>- <span class="math inline">\(N_{cells}^{cap - r17} = \ N_{cells,\
r17}^{SCG}\)</span> downlink cells for the SCG where <span
class="math inline">\(N_{cells,\ r17}^{SCG}\)</span> is provided by
<em>pdcch-BlindDetection4</em> for the SCG</p>
<p>When a UE is configured for NR-DC operation with a total of <span
class="math inline">\(N_{NR - DC}^{DL,cells}\)</span> downlink cells on
both the MCG and the SCG and the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for all downlink cells where the UE monitors PDCCH, the UE expects to be
provided <em>pdcch-BlindDetection4</em> for the MCG and
<em>pdcch-BlindDetection4</em> for the SCG with values that satisfy</p>
<p>- <em>pdcch-BlindDetection4</em> for the MCG +
<em>pdcch-BlindDetection4</em> for the SCG &lt;=
<em>pdcch-MonitoringCA-r17</em>, if the UE reports
<em>pdcch-MonitoringCA-r17</em>, or</p>
<p>- <em>pdcch-BlindDetection4</em> for the MCG +
<em>pdcch-BlindDetection4</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC}^{DL,cells}\)</span>, if the UE does
not report <em>pdcch-MonitoringCA-r17</em></p>
<p>When a UE is configured for NR-DC operation and the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for all downlink cells where the UE monitors PDCCH, the UE may indicate,
through <em>pdcch-BlindDetectionMCG-UE-r17</em> and
<em>pdcch-BlindDetectionSCG-UE-r17</em>, respective maximum values for
<em>pdcch-BlindDetection4</em> for the MCG and
<em>pdcch-BlindDetection4</em> for the SCG.</p>
<p>If the UE reports <em>pdcch-MonitoringCA-r17</em>,</p>
<p>- the value range of <em>pdcch-BlindDetectionMCG-UE-r17</em> or of
<em>pdcch-BlindDetectionSCG-UE-r17</em> is [1, …,
<em>pdcch-MonitoringCA-r17</em>-1], and</p>
<p>- <em>pdcch-BlindDetectionMCG-UE-r17</em> +
<em>pdcch-BlindDetectionSCG-UE-r17</em> &gt;=
<em>pdcch-MonitoringCA-r17.</em></p>
<p>Otherwise, if <span class="math inline">\(N_{NR - DC,\ \ max,\
r17}^{DL,cells}\)</span> is a maximum total number of downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> and the UE is configured on both the
MCG and the SCG for NR-DC as indicated in <em>UE-NR-Capability</em></p>
<p>- the value range of <em>pdcch-BlindDetectionMCG-UE-r17</em> or of
<em>pdcch-BlindDetectionSCG-UE-r17</em> is [1, 2, 3], and</p>
<p>- <em>pdcch-BlindDetectionMCG-UE-r17</em> +
<em>pdcch-BlindDetectionSCG-UE-r17</em> &gt;= <span
class="math inline">\(N_{NR - DC,\ \ max,\ r17}^{DL,cells}\)</span>.</p>
<p>If a UE indicates in <em>UE-NR-Capability</em> a carrier aggregation
capability larger than one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
or larger than one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>,
the UE includes in <em>UE-NR-Capability</em> an indication for a maximum
number of PDCCH candidates and a maximum number of non-overlapped CCEs
the UE can monitor for downlink cells with
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
or for downlink cells with <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> when the UE is configured for carrier
aggregation operation over more than two downlink cells with at least
one downlink cell with <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and at least one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>.
When a UE is not configured for NR-DC operation, the UE determines a
capability to monitor a maximum number of PDCCH candidates and a maximum
number of non-overlapped CCEs per slot or per span that corresponds to
<span class="math inline">\(N_{cells,r15}^{cap - r16}\)</span> downlink
cells or to <span class="math inline">\(N_{cells,r16}^{cap -
r16}\)</span> downlink cells, respectively, where</p>
<p>- <span class="math inline">\(N_{cells,r15}^{cap - r16}\)</span> is
the number of configured downlink cells if the UE does not provide
<em>pdcch-BlindDetectionCA1</em></p>
<p>- otherwise,</p>
<p>- if the UE reports only one combination of
(<em>pdcch-BlindDetectionCA1</em>, <em>pdcch-BlindDetectionCA2</em>),
<span class="math inline">\(N_{cells,r15}^{cap - r16}\)</span> is the
value of <em>pdcch-BlindDetectionCA1</em></p>
<p>- else, <span class="math inline">\(N_{cells,r15}^{cap -
r16}\)</span> is the value of <em>pdcch-BlindDetectionCA1</em> from a
combination of (<em>pdcch-BlindDetectionCA1,
pdcch-BlindDetectionCA2</em>) that is provided by
<em>pdcch-BlindDetectionCA-CombIndicator</em></p>
<p>and</p>
<p>- <span class="math inline">\(N_{cells,r16}^{cap - r16}\)</span> is
the number of configured downlink cells if the UE does not provide
<em>pdcch-BlindDetectionCA2</em></p>
<p>- otherwise,</p>
<p>- if the UE reports only one combination of
(<em>pdcch-BlindDetectionCA1, pdcch-BlindDetectionCA2</em>), <span
class="math inline">\(N_{cells,r16}^{cap - r16}\)</span> is the value of
<em>pdcch-BlindDetectionCA2</em></p>
<p>- else, <span class="math inline">\(N_{cells,r16}^{cap -
r16}\)</span> is the value of <em>pdcch-BlindDetectionCA2</em> from a
combination of (<em>pdcch-BlindDetectionCA1,
pdcch-BlindDetectionCA2</em>) that is provided by
<em>pdcch-BlindDetectionCA-CombIndicator</em></p>
<p>If a UE indicates in <em>UE-NR-Capability</em> a carrier aggregation
capability larger than one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
or larger than one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>,
the UE includes in <em>UE-NR-Capability</em> an indication for a maximum
number of PDCCH candidates and a maximum number of non-overlapped CCEs
the UE can monitor for downlink cells with
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
or for downlink cells with <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> when the UE is configured for carrier
aggregation operation over more than two downlink cells with at least
one downlink cell with <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and at least one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>.
When a UE is not configured for NR-DC operation, the UE determines a
capability to monitor a maximum number of PDCCH candidates and a maximum
number of non-overlapped CCEs per slot or per group of <span
class="math inline">\(X_{s}\)</span> slots that corresponds to <span
class="math inline">\(N_{cells,r15/r17}^{cap - r17}\)</span> downlink
cells or to <span class="math inline">\(N_{cells,r17/r15}^{cap -
r17}\)</span> downlink cells, respectively, where</p>
<p>- <span class="math inline">\(N_{cells,r15/r17}^{cap - r17}\)</span>
is <span class="math inline">\(N_{\text{cells,0}}^{\text{DL}} + R \cdot
N_{\text{cells,1}}^{\text{DL}}\)</span> if the UE does not provide
<em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList1</em>, where <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL}} +
N_{\text{cells,1}}^{\text{DL}}\)</span> is the number of configured
downlink serving cells</p>
<p>- otherwise,</p>
<p>- if the UE reports only one combination of
(<em>pdcch-BlindDetectionCA1</em>, <em>pdcch-BlindDetectionCA2</em>) in
<em>pdcch-BlindDetectionMixedList1</em>, <span
class="math inline">\(N_{cells,r15/r17}^{cap - r17}\)</span> is the
value of <em>pdcch-BlindDetectionCA1</em></p>
<p>- else, <span class="math inline">\(N_{cells,r15/r17}^{cap -
r17}\)</span> is the value of <em>pdcch-BlindDetectionCA1</em> from a
combination of (<em>pdcch-BlindDetectionCA1,
pdcch-BlindDetectionCA3</em>) that is provided by
<em>pdcch-BlindDetectionCA-CombIndicator-r17</em></p>
<p>and</p>
<p>- <span class="math inline">\(N_{cells,r17/r15}^{cap - r17}\)</span>
is <span class="math inline">\(N_{\text{cells,0}}^{\text{DL}} + R \cdot
N_{\text{cells,1}}^{\text{DL}}\)</span> if the UE does not provide
<em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList1</em>, where <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL}} +
N_{\text{cells,1}}^{\text{DL}}\)</span> is the number of configured
downlink serving cells</p>
<p>- otherwise,</p>
<p>- if the UE reports only one combination of
(<em>pdcch-BlindDetectionCA1, pdcch-BlindDetectionCA2</em>) in
<em>pdcch-BlindDetectionMixedList1</em>, <span
class="math inline">\(N_{cells,r17/r15}^{cap - r17}\)</span> is the
value of <em>pdcch-BlindDetectionCA2</em></p>
<p>- else, <span class="math inline">\(N_{cells,r17/r15}^{cap -
r17}\)</span> is the value of <em>pdcch-BlindDetectionCA3</em> from a
combination of (<em>pdcch-BlindDetectionCA1,
pdcch-BlindDetectionCA3</em>) that is provided by
<em>pdcch-BlindDetectionCA-CombIndicator-r17</em></p>
<p>If a UE indicates in <em>UE-NR-Capability</em> a carrier aggregation
capability larger than one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
or larger than one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>,
the UE includes in <em>UE-NR-Capability</em> an indication for a maximum
number of PDCCH candidates and a maximum number of non-overlapped CCEs
the UE can monitor for downlink cells with
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
or for downlink cells with <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> when the UE is configured for carrier
aggregation operation over more than two downlink cells with at least
one downlink cell with <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> and with at least one downlink cell
with <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em>. When a UE is not configured for NR-DC
operation, the UE determines a capability to monitor a maximum number of
PDCCH candidates and a maximum number of non-overlapped CCEs per span or
per group of <span class="math inline">\(X_{s}\)</span> slots that
corresponds to <span class="math inline">\(N_{cells,r16/r17}^{cap -
r17}\)</span> downlink cells or to <span
class="math inline">\(N_{cells,r17/r16}^{cap - r17}\)</span> downlink
cells, respectively, where</p>
<p>- <span class="math inline">\(N_{cells,r16/r17}^{cap - r17}\)</span>
is the number of configured downlink cells if the UE does not provide
<em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList2</em></p>
<p>- otherwise,</p>
<p>- if the UE reports only one combination of
(<em>pdcch-BlindDetectionCA1</em>, <em>pdcch-BlindDetectionCA2</em>) in
<em>pdcch-BlindDetectionMixedList2</em>, <span
class="math inline">\(N_{cells,r16/r17}^{cap - r17}\)</span> is the
value of <em>pdcch-BlindDetectionCA1</em></p>
<p>- else, <span class="math inline">\(N_{cells,r16/r17}^{cap -
r17}\)</span> is the value of <em>pdcch-BlindDetectionCA2</em> from a
combination of (<em>pdcch-BlindDetectionCA2,
pdcch-BlindDetectionCA3</em>) that is provided by
<em>pdcch-BlindDetectionCA-CombIndicator-r17</em></p>
<p>and</p>
<p>- <span class="math inline">\(N_{cells,r17/r16}^{cap - r17}\)</span>
is the number of configured downlink cells if the UE does not provide
<em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList2</em></p>
<p>- otherwise,</p>
<p>- if the UE reports only one combination of
(<em>pdcch-BlindDetectionCA1, pdcch-BlindDetectionCA2</em>) in
<em>pdcch-BlindDetectionMixedList2</em>, <span
class="math inline">\(N_{cells,r17/r16}^{cap - r17}\)</span> is the
value of <em>pdcch-BlindDetectionCA2</em></p>
<p>- else, <span class="math inline">\(N_{cells,r17/r16}^{cap -
r17}\)</span> is the value of <em>pdcch-BlindDetectionCA3</em> from a
combination of (<em>pdcch-BlindDetectionCA2,
pdcch-BlindDetectionCA3</em>) that is provided by
<em>pdcch-BlindDetectionCA-CombIndicator-r17</em></p>
<p>If a UE indicates in <em>UE-NR-Capability</em> a carrier aggregation
capability larger than one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>,
or larger than one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>,
or larger than one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>,
the UE includes in <em>UE-NR-Capability</em> an indication for a maximum
number of PDCCH candidates and a maximum number of non-overlapped CCEs
the UE can monitor for downlink cells with
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>,
or for downlink cells with <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em>, or for downlink cells with
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
when the UE is configured for carrier aggregation operation over more
than three downlink cells with at least one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>,
at least one downlink cell with <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> and at least one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>.
When a UE is not configured for NR-DC operation, the UE determines a
capability to monitor a maximum number of PDCCH candidates and a maximum
number of non-overlapped CCEs per slot or per span or per group of <span
class="math inline">\(X_{s}\)</span> slots that corresponds to <span
class="math inline">\(N_{cells,r15/\{ r16,r17\}}^{cap - r17}\)</span>
downlink cells or to <span class="math inline">\(N_{cells,r16/\{
r15,r17\}}^{cap - r17}\)</span> downlink cells or to <span
class="math inline">\(N_{cells,r17/\{ r15,r16\}}^{cap - r17}\)</span>
downlink cells, respectively, where</p>
<p>- <span class="math inline">\(N_{cells,r15/\{ r16,r17\}}^{cap -
r17}\)</span> is the number of configured downlink cells if the UE does
not provide <em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList3</em></p>
<p>- otherwise,</p>
<p>- if the UE reports only one combination of
(<em>pdcch-BlindDetectionCA1</em>, <em>pdcch-BlindDetectionCA2</em>,
<em>pdcch-BlindDetectionCA3</em>) in
<em>pdcch-BlindDetectionMixedList3</em>, <span
class="math inline">\(N_{cells,r15/\{ r16,r17\}}^{cap - r17}\)</span> is
the value of <em>pdcch-BlindDetectionCA1</em></p>
<p>- else, <span class="math inline">\(N_{cells,r15/\{ r16,r17\}}^{cap -
r17}\)</span> is the value of <em>pdcch-BlindDetectionCA1</em> from a
combination of (<em>pdcch-BlindDetectionCA1</em>,
<em>pdcch-BlindDetectionCA2, pdcch-BlindDetectionCA3</em>) that is
provided by <em>pdcch-BlindDetectionCA-CombIndicator-r17</em></p>
<p>- <span class="math inline">\(N_{cells,r16/\{ r15,r17\}}^{cap -
r17}\)</span> is the number of configured downlink cells if the UE does
not provide <em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList3</em></p>
<p>- otherwise,</p>
<p>- if the UE reports only one combination of
(<em>pdcch-BlindDetectionCA1</em>, <em>pdcch-BlindDetectionCA2</em>,
<em>pdcch-BlindDetectionCA3</em>) in
<em>pdcch-BlindDetectionMixedList3</em>, <span
class="math inline">\(N_{cells,r16/\{ r15,r17\}}^{cap - r17}\)</span> is
the value of <em>pdcch-BlindDetectionCA2</em></p>
<p>- else, <span class="math inline">\(N_{cells,r16/\{ r15,r17\}}^{cap -
r17}\)</span> is the value of <em>pdcch-BlindDetectionCA2</em> from a
combination of (<em>pdcch-BlindDetectionCA1</em>,
<em>pdcch-BlindDetectionCA2, pdcch-BlindDetectionCA3</em>) that is
provided by <em>pdcch-BlindDetectionCA-CombIndicator-r17</em></p>
<p>and</p>
<p>- <span class="math inline">\(N_{cells,r17/\{ r15,r16\}}^{cap -
r17}\)</span> is the number of configured downlink cells if the UE does
not provide <em>pdcch-BlindDetectionCA3</em> in
<em>pdcch-BlindDetectionMixedList3</em></p>
<p>- otherwise,</p>
<p>- if the UE reports only one combination of
(<em>pdcch-BlindDetectionCA1</em>, <em>pdcch-BlindDetectionCA2,
pdcch-BlindDetectionCA3</em>) in
<em>pdcch-BlindDetectionMixedList3</em>, <span
class="math inline">\(N_{cells,r17/\{ r15,r16\}}^{cap - r17}\)</span> is
the value of <em>pdcch-BlindDetectionCA3</em></p>
<p>- else, <span class="math inline">\(N_{cells,r17/\{ r15,r16\}}^{cap -
r17}\)</span> is the value of <em>pdcch-BlindDetectionCA3</em> from a
combination of (<em>pdcch-BlindDetectionCA1</em>,
<em>pdcch-BlindDetectionCA2, pdcch-BlindDetectionCA3</em>) that is
provided by <em>pdcch-BlindDetectionCA-CombIndicator-r17</em></p>
<p>When a UE is configured for NR-DC operation and is provided
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
for at least one downlink cell and <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> for at least one downlink cell where
the UE monitors PDCCH, the UE determines a capability to monitor a
maximum number of PDCCH candidates and a maximum number of
non-overlapped CCEs that corresponds to</p>
<p>- <span class="math inline">\(N_{cells,r15}^{cap - r16} = \
N_{cells,\ r15}^{MCG}\)</span> downlink cells for the MCG where <span
class="math inline">\(N_{cells,\ r15}^{MCG}\)</span> is provided by
<em>pdcch-BlindDetection3</em> for the MCG,</p>
<p>- <span class="math inline">\(N_{cells,r15}^{cap - r16} = \
N_{cells,\ r15}^{SCG}\)</span> downlink cells for the SCG where <span
class="math inline">\(N_{cells,\ r15}^{SCG}\)</span> is provided by
<em>pdcch-BlindDetection3</em> for the SCG, and</p>
<p>- <span class="math inline">\(N_{cells,r16}^{cap - r16} = \
N_{cells,\ r16}^{MCG}\)</span> downlink cells for the MCG where <span
class="math inline">\(N_{cells,\ r16}^{MCG}\)</span> is provided by
<em>pdcch-BlindDetection2</em> for the MCG,</p>
<p>- <span class="math inline">\(N_{cells,r16}^{cap - r16} = \
N_{cells,\ r16}^{SCG}\)</span> downlink cells for the SCG where <span
class="math inline">\(N_{cells,\ r16}^{SCG}\)</span> is provided by
<em>pdcch-BlindDetection2</em> for the SCG</p>
<p>When a UE is configured for carrier aggregation operation over more
than two downlink cells with at least one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>,
at least one downlink cell with <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em>, and no downlink cell has SCS
configuration <span class="math inline">\(\mu \in \left\{ 5,\ 6
\right\}\)</span>, or for a cell group when the UE is configured for
NR-DC operation, the UE does not expect to</p>
<p>- monitor per slot a number of PDCCH candidates or a number of
non-overlapped CCEs that is larger than the maximum number as derived
from the corresponding value of <span
class="math inline">\(N_{cells,r15}^{cap - r16}\)</span>, and</p>
<p>- monitor per span a number of PDCCH candidates or a number of
non-overlapped CCEs that is larger than the maximum number as derived
from the corresponding value of <span
class="math inline">\(N_{cells,r16}^{cap - r16}\)</span></p>
<p>When the UE is configured for carrier aggregation operation over more
than two downlink cells with at least one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>,
at least one downlink cell with <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em>, and no downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>,
the UE does not expect to</p>
<p>- monitor per slot a number of PDCCH candidates or a number of
non-overlapped CCEs that is larger than the maximum number as derived
from the corresponding value of <span
class="math inline">\(N_{cells,r15/r17}^{cap - r17}\)</span>, and</p>
<p>- monitor per group of <span class="math inline">\(X_{s}\)</span>
slots a number of PDCCH candidates or a number of non-overlapped CCEs
that is larger than the maximum number as derived from the corresponding
value of <span class="math inline">\(N_{cells,r17/r15}^{cap -
r17}\)</span></p>
<p>When the UE is configured for carrier aggregation operation over more
than two downlink cells with at least one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>,
at least one downlink cell with <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em>, and no downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>,
the UE does not expect to</p>
<p>- monitor per span a number of PDCCH candidates or a number of
non-overlapped CCEs that is larger than the maximum number as derived
from the corresponding value of <span
class="math inline">\(N_{cells,r16/r17}^{cap - r17}\)</span>, and</p>
<p>- monitor per group of <span class="math inline">\(X_{s}\)</span>
slots a number of PDCCH candidates or a number of non-overlapped CCEs
that is larger than the maximum number as derived from the corresponding
value of <span class="math inline">\(N_{cells,r17/r16}^{cap -
r17}\)</span></p>
<p>When the UE is configured for carrier aggregation operation over more
than three downlink cells with at least one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>,
at least one downlink cell with <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em>, and at least one downlink cell with
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>,
the UE does not expect to</p>
<p>- monitor per slot a number of PDCCH candidates or a number of
non-overlapped CCEs that is larger than the maximum number as derived
from the corresponding value of <span
class="math inline">\(N_{cells,r15/\{ r16,r17\}}^{cap - r17}\)</span>,
and</p>
<p>- monitor per span a number of PDCCH candidates or a number of
non-overlapped CCEs that is larger than the maximum number as derived
from the corresponding value of <span
class="math inline">\(N_{cells,r16/\{ r15,r17\}}^{cap - r17}\)</span>,
and</p>
<p>- monitor per group of <span class="math inline">\(X_{s}\)</span>
slots a number of PDCCH candidates or a number of non-overlapped CCEs
that is larger than the maximum number as derived from the corresponding
value of <span class="math inline">\(N_{cells,r17/\{ r15,r16\}}^{cap -
r17}\)</span></p>
<p>When a UE is configured for NR-DC operation with a total of <span
class="math inline">\(N_{NR - DC}^{DL,cells}\)</span> downlink cells on
both the MCG and the SCG and the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
for<em> </em><span class="math inline">\(N_{NR -
DC,r15}^{DL,cells}\)</span> downlink cells and
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
for <span class="math inline">\(N_{NR - DC,r16}^{DL,cells}\)</span>
downlink cells where the UE monitors PDCCH, the UE expects to be
provided <em>pdcch-BlindDetection3</em> and
<em>pdcch-BlindDetection2</em> for the MCG, and
<em>pdcch-BlindDetection3</em> and <em>pdcch-BlindDetection2</em> for
the SCG with values that satisfy</p>
<p>- <em>pdcch-BlindDetection3</em> for the MCG +
<em>pdcch-BlindDetection3</em> for the SCG &lt;=
<em>pdcch-BlindDetectionCA1</em>, if the UE reports
<em>pdcch-BlindDetectionCA1</em>, or</p>
<p>- <em>pdcch-BlindDetection3</em> for the MCG +
<em>pdcch-BlindDetection3</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC,r15}^{DL,cells}\)</span>, if the UE
does not report <em>pdcch-BlindDetectionCA1</em></p>
<p>and</p>
<p>- <em>pdcch-BlindDetection2</em> for the MCG +
<em>pdcch-BlindDetection2</em> for the SCG &lt;=
<em>pdcch-BlindDetectionCA2</em>, if the UE reports
<em>pdcch-BlindDetectionCA2</em>, or</p>
<p>- <em>pdcch-BlindDetection2</em> for the MCG +
<em>pdcch-BlindDetection2</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC,r16}^{DL,cells}\)</span>, if the UE
does not report <em>pdcch-BlindDetectionCA2</em></p>
<p>When a UE is configured for NR-DC operation and is provided
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
for at least one downlink cell and <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> for at least one downlink cell where
the UE monitors PDCCH, the UE may indicate, through
<em>pdcch-BlindDetectionMCG-UE1</em> and
<em>pdcch-BlindDetectionSCG-UE1</em>, respective maximum values for
<em>pdcch-BlindDetection3</em> for the MCG and
<em>pdcch-BlindDetection3</em> for the SCG, and through
<em>pdcch-BlindDetectionMCG-UE2</em> and
<em>pdcch-BlindDetectionSCG-UE2</em> respective maximum values for
<em>pdcch-BlindDetection2</em> for the MCG and
<em>pdcch-BlindDetection2</em> for the SCG.</p>
<p>If the UE reports <em>pdcch-BlindDetectionCA1</em>,</p>
<p>- the value range of <em>pdcch-BlindDetectionMCG-UE1</em> or of
<em>pdcch-BlindDetectionSCG-UE1</em> is [0, 1, …,
<em>pdcch-BlindDetectionCA1</em>], and</p>
<p>- <em>pdcch-BlindDetectionMCG-UE1</em> +
<em>pdcch-BlindDetectionSCG-UE1</em> &gt;=
<em>pdcch-BlindDetectionCA1</em>.</p>
<p>Otherwise, if <span class="math inline">\(N_{NR - DC,\ \ max,\
r15}^{DL,cells}\)</span> is a maximum total number of downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and the UE is configured on both the
MCG and the SCG for NR-DC as indicated in <em>UE-NR-Capability</em></p>
<p>- the value range of <em>pdcch-BlindDetectionMCG-UE1</em> or of
<em>pdcch-BlindDetectionSCG-UE1</em> is [0, 1, 2],</p>
<p>- <em>pdcch-BlindDetectionMCG-UE1</em> +
<em>pdcch-BlindDetectionSCG-UE1</em> &gt;= <span
class="math inline">\(N_{NR - DC,\ \ max,\ r15}^{DL,cells}\)</span>.</p>
<p>If the UE reports <em>pdcch-BlindDetectionCA2</em></p>
<p>- the value range of <em>pdcch-BlindDetectionMCG-UE2</em> or of
<em>pdcch-BlindDetectionSCG-UE2</em> is [0, 1, …,
<em>pdcch-BlindDetectionCA2</em>], and</p>
<p>- <em>pdcch-BlindDetectionMCG-UE2</em> +
<em>pdcch-BlindDetectionSCG-UE2</em> &gt;=
<em>pdcch-BlindDetectionCA2.</em></p>
<p>Otherwise, if <span class="math inline">\(N_{NR - DC,\ \ max,\
r16}^{DL,cells}\)</span> is a maximum total number of downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> and the UE is configured on both the
MCG and the SCG for NR-DC as indicated in <em>UE-NR-Capability</em></p>
<p>- the value range of <em>pdcch-BlindDetectionMCG-UE2</em> or of
<em>pdcch-BlindDetectionSCG-UE2</em> is [0, 1],</p>
<p>- <em>pdcch-BlindDetectionMCG-UE2</em> +
<em>pdcch-BlindDetectionSCG-UE2</em> &gt;= <span
class="math inline">\(N_{NR - DC,\ \ max,\ r16}^{DL,cells}\)</span>.</p>
<p>When a UE is configured for NR-DC operation with a total of <span
class="math inline">\(N_{NR - DC}^{DL,cells}\)</span> downlink cells on
both the MCG and the SCG and the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
for<em> </em><span class="math inline">\(N_{NR -
DC,r15}^{DL,cells}\)</span> downlink cells and
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for <span class="math inline">\(N_{NR - DC,r17}^{DL,cells}\)</span>
downlink cells where the UE monitors PDCCH, the UE expects to be
provided <em>pdcch-BlindDetection3</em> and
<em>pdcch-BlindDetection4</em> for the MCG, and
<em>pdcch-BlindDetection3</em> and <em>pdcch-BlindDetection4</em> for
the SCG with values that satisfy</p>
<p>- <em>pdcch-BlindDetection3</em> for the MCG +
<em>pdcch-BlindDetection3</em> for the SCG &lt;=
<em>pdcch-BlindDetectionCA1</em>, if the UE reports
<em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList1</em>, or</p>
<p>- <em>pdcch-BlindDetection3</em> for the MCG +
<em>pdcch-BlindDetection3</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC,r15}^{DL,cells}\)</span>, if the UE
does not report <em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList1</em></p>
<p>and</p>
<p>- <em>pdcch-BlindDetection4</em> for the MCG +
<em>pdcch-BlindDetection4</em> for the SCG &lt;=
<em>pdcch-BlindDetectionCA2</em>, if the UE reports
<em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList1</em>, or</p>
<p>- <em>pdcch-BlindDetection4</em> for the MCG +
<em>pdcch-BlindDetection4</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC,r17}^{DL,cells}\)</span>, if the UE
does not report <em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList1</em></p>
<p>When a UE is configured for NR-DC operation and is provided
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
for at least one downlink cell and <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> for at least one downlink cell where
the UE monitors PDCCH, the UE may indicate, through
<em>pdcch-BlindDetectionCG-UE1</em> in
<em>pdcch-BlindDetectionMCG-UE-Mixed</em> and
<em>pdcch-BlindDetectionCG-UE1</em> in
<em>pdcch-BlindDetectionSCG-UE-Mixed</em>, respective maximum values for
<em>pdcch-BlindDetection3</em> for the MCG and
<em>pdcch-BlindDetection3</em> for the SCG, and through
<em>pdcch-BlindDetectionCG-UE2</em> in
<em>pdcch-BlindDetectionMCG-UE-Mixed</em> and
<em>pdcch-BlindDetectionCG-UE2</em> in
<em>pdcch-BlindDetectionSCG-UE-Mixed</em>, respective maximum values for
<em>pdcch-BlindDetection4</em> for the MCG and
<em>pdcch-BlindDetection4</em> for the SCG.</p>
<p>If the UE reports <em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList1</em>,</p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE1</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE1</em> for the SCG is [0, 1, …,
<em>pdcch-BlindDetectionCA1</em>], and</p>
<p>- <em>pdcch-BlindDetectionCG-UE1</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE1</em> for the SCG &gt;=
<em>pdcch-BlindDetectionCA1</em>.</p>
<p>Otherwise, if <span class="math inline">\(N_{NR - DC,\ \ max,\
r15}^{DL,cells}\)</span> is a maximum total number of downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and the UE is configured on both the
MCG and the SCG for NR-DC as indicated in <em>UE-NR-Capability</em></p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE1</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE1</em> for the SCG is [0, 1, 2],</p>
<p>- <em>pdcch-BlindDetectionCG-UE1</em> for the MCG +
<em>pdcch-BlindDetectionSCG-UE1</em> for the SCG &gt;= <span
class="math inline">\(N_{NR - DC,\ \ max,\ r15}^{DL,cells}\)</span>.</p>
<p>If the UE reports <em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList1</em></p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE2</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE2</em> for the SCG is [0, 1, …,
<em>pdcch-BlindDetectionCA3</em>], and</p>
<p>- <em>pdcch-BlindDetectionCG-UE2</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE2</em> for the SCG &gt;=
<em>pdcch-BlindDetectionCA2.</em></p>
<p>Otherwise, if <span class="math inline">\(N_{NR - DC,\ \ max,\
r17}^{DL,cells}\)</span> is a maximum total number of downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> and the UE is configured on both the
MCG and the SCG for NR-DC as indicated in <em>UE-NR-Capability</em></p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE2</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE2</em> for the SCG is [0, 1, 2],</p>
<p>- <em>pdcch-BlindDetectionCG-UE2</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE2</em> for the SCG &gt;= <span
class="math inline">\(N_{NR - DC,\ \ max,\ r17}^{DL,cells}\)</span>.</p>
<p>When a UE is configured for NR-DC operation with a total of <span
class="math inline">\(N_{NR - DC}^{DL,cells}\)</span> downlink cells on
both the MCG and the SCG and the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
for<em> </em><span class="math inline">\(N_{NR -
DC,r16}^{DL,cells}\)</span> downlink cells and
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for <span class="math inline">\(N_{NR - DC,r17}^{DL,cells}\)</span>
downlink cells where the UE monitors PDCCH, the UE expects to be
provided <em>pdcch-BlindDetection2</em> and
<em>pdcch-BlindDetection4</em> for the MCG, and
<em>pdcch-BlindDetection2</em> and <em>pdcch-BlindDetection4</em> for
the SCG with values that satisfy</p>
<p>- <em>pdcch-BlindDetection2</em> for the MCG +
<em>pdcch-BlindDetection2</em> for the SCG &lt;=
<em>pdcch-BlindDetectionCA1</em>, if the UE reports
<em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList2</em>, or</p>
<p>- <em>pdcch-BlindDetection2</em> for the MCG +
<em>pdcch-BlindDetection2</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC,r16}^{DL,cells}\)</span>, if the UE
does not report <em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList2</em></p>
<p>and</p>
<p>- <em>pdcch-BlindDetection4</em> for the MCG +
<em>pdcch-BlindDetection4</em> for the SCG &lt;=
<em>pdcch-BlindDetectionCA2</em>, if the UE reports
<em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList2</em>, or</p>
<p>- <em>pdcch-BlindDetection4</em> for the MCG +
<em>pdcch-BlindDetection4</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC,r17}^{DL,cells}\)</span>, if the UE
does not report <em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList2</em></p>
<p>When a UE is configured for NR-DC operation and is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
for at least one downlink cell and <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> for at least one downlink cell where
the UE monitors PDCCH, the UE may indicate, through
<em>pdcch-BlindDetectionCG-UE1</em> in
<em>pdcch-BlindDetectionMCG-UE-Mixed</em> and
<em>pdcch-BlindDetectionCG-UE1</em> in
<em>pdcch-BlindDetectionSCG-UE-Mixed</em>, respective maximum values for
<em>pdcch-BlindDetection2</em> for the MCG and
<em>pdcch-BlindDetection2</em> for the SCG, and through
<em>pdcch-BlindDetectionCG-UE2</em> in
<em>pdcch-BlindDetectionMCG-UE-Mixed</em> and
<em>pdcch-BlindDetectionCG-UE2</em> in
<em>pdcch-BlindDetectionSCG-UE-Mixed</em>, respective maximum values for
<em>pdcch-BlindDetection4</em> for the MCG and
<em>pdcch-BlindDetection4</em> for the SCG.</p>
<p>If the UE reports <em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList2</em>,</p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE1</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE1</em> for the SCG is [0, 1, …,
<em>pdcch-BlindDetectionCA1</em>], and</p>
<p>- <em>pdcch-BlindDetectionCG-UE1</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE1</em> for the SCG &gt;=
<em>pdcch-BlindDetectionCA1</em>.</p>
<p>Otherwise, if <span class="math inline">\(N_{NR - DC,\ \ max,\
r16}^{DL,cells}\)</span> is a maximum total number of downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> and the UE is configured on both the
MCG and the SCG for NR-DC as indicated in <em>UE-NR-Capability</em></p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE1</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE1</em> for the SCG is [0, 1],</p>
<p>- <em>pdcch-BlindDetectionCG-UE1</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE1</em> for the SCG &gt;= <span
class="math inline">\(N_{NR - DC,\ \ max,\ r16}^{DL,cells}\)</span>.</p>
<p>If the UE reports <em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList2</em></p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE2</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE2</em> for the SCG is [0, 1, …,
<em>pdcch-BlindDetectionCA2</em>], and</p>
<p>- <em>pdcch-BlindDetectionCG-UE2</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE2</em> for the SCG &gt;=
<em>pdcch-BlindDetectionCA2.</em></p>
<p>Otherwise, if <span class="math inline">\(N_{NR - DC,\ \ max,\
r17}^{DL,cells}\)</span> is a maximum total number of downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> and the UE is configured on both the
MCG and the SCG for NR-DC as indicated in <em>UE-NR-Capability</em></p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE2</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE2</em> for the SCG is [0, 1, 2],</p>
<p>- <em>pdcch-BlindDetectionCG-UE2</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE2</em> for the SCG &gt;= <span
class="math inline">\(N_{NR - DC,\ \ max,\ r17}^{DL,cells}\)</span>.</p>
<p>When a UE is configured for NR-DC operation with a total of <span
class="math inline">\(N_{NR - DC}^{DL,cells}\)</span> downlink cells on
both the MCG and the SCG and the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
for<em> </em><span class="math inline">\(N_{NR -
DC,r15}^{DL,cells}\)</span> downlink cells,
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
for<em> </em><span class="math inline">\(N_{NR -
DC,r16}^{DL,cells}\)</span> downlink cells, and
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for <span class="math inline">\(N_{NR - DC,r17}^{DL,cells}\)</span>
downlink cells where the UE monitors PDCCH, the UE expects to be
provided <em>pdcch-BlindDetection3</em>, <em>pdcch-BlindDetection2</em>,
and <em>pdcch-BlindDetection4</em> for the MCG, and
<em>pdcch-BlindDetection3</em>, <em>pdcch-BlindDetection2</em>, and
<em>pdcch-BlindDetection4</em> for the SCG with values that satisfy</p>
<p>- <em>pdcch-BlindDetection3</em> for the MCG +
<em>pdcch-BlindDetection3</em> for the SCG &lt;=
<em>pdcch-BlindDetectionCA1</em>, if the UE reports
<em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList3</em>, or</p>
<p>- <em>pdcch-BlindDetection3</em> for the MCG +
<em>pdcch-BlindDetection3</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC,r15}^{DL,cells}\)</span>, if the UE
does not report <em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList3</em></p>
<p>and</p>
<p>- <em>pdcch-BlindDetection2</em> for the MCG +
<em>pdcch-BlindDetection2</em> for the SCG &lt;=
<em>pdcch-BlindDetectionCA2</em>, if the UE reports
<em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList3</em>, or</p>
<p>- <em>pdcch-BlindDetection2</em> for the MCG +
<em>pdcch-BlindDetection2</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC,r16}^{DL,cells}\)</span>, if the UE
does not report <em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList3</em></p>
<p>and</p>
<p>- <em>pdcch-BlindDetection4</em> for the MCG +
<em>pdcch-BlindDetection4</em> for the SCG &lt;=
<em>pdcch-BlindDetectionCA3</em>, if the UE reports
<em>pdcch-BlindDetectionCA3</em> in
<em>pdcch-BlindDetectionMixedList3</em>, or</p>
<p>- <em>pdcch-BlindDetection4</em> for the MCG +
<em>pdcch-BlindDetection4</em> for the SCG &lt;= <span
class="math inline">\(N_{NR - DC,r17}^{DL,cells}\)</span>, if the UE
does not report <em>pdcch-BlindDetectionCA3</em> in
<em>pdcch-BlindDetectionMixedList3</em></p>
<p>When a UE is configured for NR-DC operation and is provided
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
for at least one downlink cell, <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> for at least one downlink cell, and
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for at least one downlink cell where the UE monitors PDCCH, the UE may
indicate, through <em>pdcch-BlindDetectionCG-UE1</em> in
<em>pdcch-BlindDetectionMCG-UE-Mixed1</em> and
<em>pdcch-BlindDetectionCG-UE1</em> in
<em>pdcch-BlindDetectionSCG-UE-Mixed1</em> respective maximum values for
<em>pdcch-BlindDetection3</em> for the MCG and
<em>pdcch-BlindDetection3</em> for the SCG, through
<em>pdcch-BlindDetectionCG-UE2</em> in
<em>pdcch-BlindDetectionMCG-UE-Mixed1</em> and
<em>pdcch-BlindDetectionCG-UE2</em> in
<em>pdcch-BlindDetectionSCG-UE-Mixed1</em> respective maximum values for
<em>pdcch-BlindDetection2</em> for the MCG and
<em>pdcch-BlindDetection2</em> for the SCG, and through
<em>pdcch-BlindDetectionCG-UE3</em> in
<em>pdcch-BlindDetectionMCG-UE-Mixed1</em> and
<em>pdcch-BlindDetectionCG-UE3</em> in
<em>pdcch-BlindDetectionSCG-UE-Mixed1</em> respective maximum values for
<em>pdcch-BlindDetection4</em> for the MCG and
<em>pdcch-BlindDetection4</em> for the SCG.</p>
<p>If the UE reports <em>pdcch-BlindDetectionCA1</em> in
<em>pdcch-BlindDetectionMixedList3</em>,</p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE1</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE1</em> for the SCG is [0, 1, …,
<em>pdcch-BlindDetectionCA1</em>], and</p>
<p>- <em>pdcch-BlindDetectionCG-UE1</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE1</em> for the SCG &gt;=
<em>pdcch-BlindDetectionCA1</em>.</p>
<p>Otherwise, if <span class="math inline">\(N_{NR - DC,\ \ max,\
r15}^{DL,cells}\)</span> is a maximum total number of downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and the UE is configured on both the
MCG and the SCG for NR-DC as indicated in <em>UE-NR-Capability</em></p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE1</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE1</em> for the SCG is [0, 1, 2],</p>
<p>- <em>pdcch-BlindDetectionCG-UE1</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE1</em> for the SCG &gt;= <span
class="math inline">\(N_{NR - DC,\ \ max,\ r15}^{DL,cells}\)</span>.</p>
<p>If the UE reports <em>pdcch-BlindDetectionCA2</em> in
<em>pdcch-BlindDetectionMixedList3</em>,</p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE2</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE2</em> for the SCG is [0, 1, …,
<em>pdcch-BlindDetectionCA2</em>], and</p>
<p>- <em>pdcch-BlindDetectionCG-UE2</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE2</em> for the SCG &gt;=
<em>pdcch-BlindDetectionCA2</em>.</p>
<p>Otherwise, if <span class="math inline">\(N_{NR - DC,\ \ max,\
r16}^{DL,cells}\)</span> is a maximum total number of downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> and the UE is configured on both the
MCG and the SCG for NR-DC as indicated in <em>UE-NR-Capability</em></p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE2</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE2</em> for the SCG is [0, 1],</p>
<p>- <em>pdcch-BlindDetectionCG-UE2</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE2</em> for the SCG &gt;= <span
class="math inline">\(N_{NR - DC,\ \ max,\ r16}^{DL,cells}\)</span>.</p>
<p>If the UE reports <em>pdcch-BlindDetectionCA3</em> in
<em>pdcch-BlindDetectionMixedList3</em></p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE3</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE3</em> for the SCG is [0, 1, …,
<em>pdcch-BlindDetectionCA3</em>], and</p>
<p>- <em>pdcch-BlindDetectionCG-UE3</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE3</em> for the SCG &gt;=
<em>pdcch-BlindDetectionCA3.</em></p>
<p>Otherwise, if <span class="math inline">\(N_{NR - DC,\ \ max,\
r17}^{DL,cells}\)</span> is a maximum total number of downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> and the UE is configured on both the
MCG and the SCG for NR-DC as indicated in <em>UE-NR-Capability</em></p>
<p>- the value range of <em>pdcch-BlindDetectionCG-UE3</em> for the MCG
or of <em>pdcch-BlindDetectionCG-UE3</em> for the SCG is [0, 1, 2],</p>
<p>- <em>pdcch-BlindDetectionCG-UE3</em> for the MCG +
<em>pdcch-BlindDetectionCG-UE3</em> for the SCG &gt;= <span
class="math inline">\(N_{NR - DC,\ \ max,\ r17}^{DL,cells}\)</span>.</p>
<h2
id="ue-procedure-for-determining-physical-downlink-control-channel-assignment">10.1
UE procedure for determining physical downlink control channel
assignment </h2>
<p>A set of PDCCH candidates for a UE to monitor is defined in terms of
PDCCH search space sets. A search space set can be a CSS set or a USS
set. A UE monitors PDCCH candidates in one or more of the following
search spaces sets</p>
<p>- a Type0-PDCCH CSS set on the primary cell of the MCG configured
by</p>
<p>- <em>pdcch-ConfigSIB1</em> in MIB or by <em>searchSpaceSIB1</em> in
<em>PDCCH-ConfigCommon</em> or by <em>searchSpaceZero</em> in
<em>PDCCH-ConfigCommon</em> for a DCI format 1_0 with CRC scrambled by a
SI-RNTI, or</p>
<p>- <em>searchSpaceZero</em> by providing <em>searchSpaceID</em>=0 for
<em>searchSpaceMCCH</em> or <em>searchSpaceMTCH</em> for a DCI format
4_0 with CRC scrambled by a MCCH-RNTI or a G-RNTI for broadcast</p>
<p>- a Type0A-PDCCH CSS set configured by
<em>searchSpaceOtherSystemInformation</em> in
<em>PDCCH-ConfigCommon</em> for a DCI format 1_0 with CRC scrambled by a
SI-RNTI on the primary cell of the MCG</p>
<p>- a Type0B-PDCCH CSS set configured by <em>searchSpaceMCCH</em> and
<em>searchSpaceMTCH</em> for a DCI format 4_0 with CRC scrambled by a
MCCH-RNTI or a G-RNTI for broadcast, on the primary cell of the MCG</p>
<p>- a Type1-PDCCH CSS set configured by <em>ra-SearchSpace</em> in
<em>PDCCH-ConfigCommon</em> for a DCI format with CRC scrambled by a
RA-RNTI, a MsgB-RNTI, or a TC-RNTI on the primary cell</p>
<p>- a Type1A-PDCCH CSS set configured by <em>sdt-SearchSpace</em> in
<em>PDCCH-ConfigCommon</em> for a DCI format with CRC scrambled by a
C-RNTI or a CS-RNTI on the primary cell as described in clause 19.1</p>
<p>- a Type2-PDCCH CSS set configured by <em>pagingSearchSpace</em> in
<em>PDCCH-ConfigCommon</em> for a DCI format 1_0 with CRC scrambled by a
P-RNTI on the primary cell of the MCG</p>
<p>- a Type2A-PDCCH CSS set configured by <em>pei-SearchSpace</em> in
<em>pei-ConfigBWP</em> for a DCI format 2_7 with CRC scrambled by a
PEI-RNTI on the primary cell of the MCG</p>
<p>- a Type3-PDCCH CSS set configured by</p>
<p>- <em>SearchSpace</em> in <em>PDCCH-Config</em> with
<em>searchSpaceType</em> = <em>common</em> for DCI formats with CRC
scrambled by INT-RNTI, SFI-RNTI, TPC-PUSCH-RNTI, TPC-PUCCH-RNTI,
TPC-SRS-RNTI, or CI-RNTI and, only for the primary cell, C-RNTI,
MCS-C-RNTI, CS-RNTI(s), or PS-RNTI, or</p>
<p>- <em>SearchSpace</em> in <em>pdcch-ConfigMulticast</em> for DCI
formats with CRC scrambled by G-RNTI, or G-CS-RNTI, or</p>
<p>- <em>searchSpaceMCCH</em> and <em>searchSpaceMTCH</em> on a
secondary cell for a DCI format 4_0 with CRC scrambled by a MCCH-RNTI or
a G-RNTI for broadcast, and</p>
<p>- a USS set configured by</p>
<p>- <em>SearchSpace</em> in <em>PDCCH-Config</em> with
<em>searchSpaceType</em> = <em>ue-Specific</em> for DCI formats with CRC
scrambled by C-RNTI, MCS-C-RNTI, SP-CSI-RNTI, CS-RNTI(s), SL-RNTI,
SL-CS-RNTI, or SL Semi-Persistent Scheduling V-RNTI</p>
<p>In the following, DCI formats with CRC scrambled by C-RNTI or CS-RNTI
or MCS-C-RNTI are also referred to as unicast DCI formats, DCI formats
with CRC scrambled by G-RNTI for multicast or G-CS-RNTI are also
referred to as multicast DCI formats, and DCI formats with CRC scrambled
by MCCH-RNTI or G-RNTI for broadcast scheduling PDSCH receptions are
also referred to as broadcast DCI formats.</p>
<p>For a DL BWP, if a UE is not provided <em>searchSpaceSIB1</em> for
Type0-PDCCH CSS set by <em>PDCCH-ConfigCommon</em>, the UE does not
monitor PDCCH candidates for a Type0-PDCCH CSS set on the DL BWP. The
Type0-PDCCH CSS set is defined by the CCE aggregation levels and the
number of PDCCH candidates per CCE aggregation level given in Table
10.1-1.</p>
<p>If the active DL BWP and the initial DL BWP for a UE have same SCS
and same CP length and the active DL BWP includes all RBs of the CORESET
with index 0, or the active DL BWP is the initial DL BWP, or the active
DL BWP includes all RBs of an MBS frequency resource provided by
<em>cfr-ConfigMCCH-MTCH</em> as described in clause 18, the CORESET
configured for Type0-PDCCH CSS set has CORESET index 0 and the
Type0-PDCCH CSS set has search space set index 0.</p>
<p>If the active DL BWP and an MBS frequency resource provided by
<em>cfr-ConfigMCCH-MTCH</em> or determined by CORESET with index 0 when
<em>cfr-ConfigMCCH-MTCH</em> is not provided for a UE have same SCS and
same CP length and the active DL BWP includes all RBs of the MBS
frequency resource, and if the UE is provided <em>searchSpaceMCCH</em>
or <em>searchSpaceMTCH</em> for Type0B-PDCCH CSS set on the primary cell
or for Type3-PDCCH CSS set on a secondary cell, the UE monitors PDCCH
for detection of broadcast DCI formats, as described in clause 18, on
the active DL BWP.</p>
<p>For a DL BWP, if a UE is not provided
<em>searchSpaceOtherSystemInformation</em> for Type0A-PDCCH CSS set, the
UE does not monitor PDCCH for Type0A-PDCCH CSS set on the DL BWP. The
CCE aggregation levels and the number of PDCCH candidates per CCE
aggregation level for Type0A-PDCCH CSS set are given in Table
10.1-1.</p>
<p>For a DL BWP, if a UE is not provided <em>ra-SearchSpace</em> for
Type1-PDCCH CSS set, the UE does not monitor PDCCH for Type1-PDCCH CSS
set on the DL BWP. If the UE has not been provided a Type3-PDCCH CSS
set, or a Type1A-PDCCH CSS set, or a USS set and the UE has received a
C-RNTI and has been provided a Type1-PDCCH CSS set, the UE monitors
PDCCH candidates for DCI format 0_0 and DCI format 1_0 with CRC
scrambled by the C-RNTI in the Type1-PDCCH CSS set.</p>
<p>If a UE is not provided <em>pagingSearchSpace</em> for Type2-PDCCH
CSS set, the UE does not monitor PDCCH for Type2-PDCCH CSS set on the DL
BWP. The CCE aggregation levels and the number of PDCCH candidates per
CCE aggregation level for Type2-PDCCH CSS set are given in Table
10.1-1.</p>
<p>If a UE is not provided <em>pei-SearchSpace</em> for Type2A-PDCCH CSS
set, the UE does not monitor PDCCH for Type2A-PDCCH CSS set on the DL
BWP. The CCE aggregation levels and the maximum number of PDCCH
candidates per CCE aggregation level for Type2A-PDCCH CSS set are given
in Table 10.1-1. If the UE is provided <em>pei-SearchSpace</em> with
zero value for the Type2A-PDCCH CSS set index, and for the SS/PBCH block
and CORESET multiplexing patterns 2 and 3, the UE determines PDCCH
monitoring occasions as described in clause 13 and the CCE aggregation
levels and the number of PDCCH candidates per CCE aggregation level for
Type2A-PDCCH CSS set are given in Table 10.1-1.</p>
<p>If a UE is provided a zero value for <em>searchSpaceID</em> in
<em>PDCCH-ConfigCommon</em> for a Type0/0A/1A/2-PDCCH CSS set, the UE
determines monitoring occasions for PDCCH candidates of the
Type0/0A/1A/2-PDCCH CSS set as described in clause 13, and the UE is
provided a C-RNTI, the UE monitors PDCCH candidates only at monitoring
occasions associated with a SS/PBCH block, where the SS/PBCH block is
determined by the most recent of</p>
<p>- a MAC CE activation command indicating a TCI state of the active
BWP that includes a CORESET with index 0, as described in [6, TS
38.214], where the TCI-state includes a CSI-RS which is quasi-co-located
with the SS/PBCH block, or</p>
<p>- a random access procedure that is not initiated by a PDCCH order
that triggers a contention-free random access procedure, or</p>
<p>- configured-grant based PUSCH transmission in RRC_INACTIVE state as
described in clause 19.1.</p>
<p>If a UE monitors PDCCH candidates for DCI formats with CRC scrambled
by a C-RNTI and the UE is provided a non-zero value for
<em>searchSpaceID</em> in <em>PDCCH-ConfigCommon</em> for a
Type0/0A/1A/2-PDCCH CSS set, or monitors PDCCH candidates for DCI
formats with CRC scrambled by a MCCH-RNTI or a G-RNTI for broadcast and
the UE is provided a non-zero value for <em>searchSpaceMCCH</em> and
<em>searchSpaceMTCH</em> in <em>PDCCH-ConfigCommon</em> for a
Type0/0B-PDCCH CSS set, the UE determines monitoring occasions for PDCCH
candidates of the Type0A/1A/2-PDCCH CSS set, or of the Type0B-PDCCH set,
respectively, based on the search space set associated with the value of
<em>searchSpaceID</em>.</p>
<p>The UE may assume that the DM-RS antenna port associated with PDCCH
receptions in the CORESET configured by <em>pdcch-ConfigSIB1</em> in
<em>MIB</em>, the DM-RS antenna port associated with corresponding PDSCH
receptions, and the corresponding SS/PBCH block are quasi co-located
with respect to average gain, quasi co-location 'typeA' and 'typeD'
properties, when applicable [6, TS 38.214], if the UE is not provided a
TCI state indicating quasi co-location information of the DM-RS antenna
port for PDCCH reception in the CORESET. The value for the DM-RS
scrambling sequence initialization is the cell ID. For operation without
shared spectrum channel access in FR1 and FR2-1, a SCS is provided by
<em>subCarrierSpacingCommon</em> in <em>MIB</em>. For operation with
shared spectrum channel access in FR1 and for operation in FR2-2, a SCS
is same as the SCS of a corresponding SS/PBCH block.</p>
<p>For single cell operation or for operation with carrier aggregation
in a same frequency band, a UE does not expect to monitor a PDCCH in a
Type0/0A/0B/2/3-PDCCH CSS set or in a USS set if a DM-RS for monitoring
a PDCCH in a Type1-PDCCH CSS set is not configured with same
<em>qcl-Type</em> set to 'typeD' properties [6, TS 38.214] with a DM-RS
for monitoring the PDCCH in the Type0/0A/0B/2/3-PDCCH CSS set or in the
USS set, and if the PDCCH or an associated PDSCH overlaps in at least
one symbol with a PDCCH the UE monitors in a Type1-PDCCH CSS set or with
an associated PDSCH.</p>
<p>If a UE is provided</p>
<p>- one or more search space sets by corresponding one or more of
<em>searchSpaceZero, searchSpaceSIB1</em>,
<em>searchSpaceOtherSystemInformation</em>, <em>pagingSearchSpace</em>,
<em>ra-SearchSpace</em>, and</p>
<p>- a C-RNTI, an MCS-C-RNTI, or a CS-RNTI</p>
<p>the UE monitors PDCCH candidates for DCI format 0_0 and DCI format
1_0 with CRC scrambled by the C-RNTI, the MCS-C-RNTI, or the CS-RNTI in
the one or more search space sets in a slot where the UE monitors PDCCH
candidates for at least a DCI format 0_0 or a DCI format 1_0 with CRC
scrambled by SI-RNTI, RA-RNTI, MsgB-RNTI, or P-RNTI.</p>
<p>If a UE is provided</p>
<p>- one or more search space sets by corresponding one or more of
<em>searchSpaceZero, searchSpaceSIB1</em>,
<em>searchSpaceOtherSystemInformation</em>, <em>pagingSearchSpace</em>,
<em>pei-SearchSpace, ra-SearchSpace</em>, or a CSS set by
<em>PDCCH-Config</em>, and</p>
<p>- a SI-RNTI, a P-RNTI, a PEI-RNTI, a RA-RNTI, a MsgB-RNTI, a
SFI-RNTI, an INT-RNTI, a TPC-PUSCH-RNTI, a TPC-PUCCH-RNTI, or a
TPC-SRS-RNTI</p>
<p>then, for a RNTI from any of these RNTIs, the UE does not expect to
process information from more than one DCI format with CRC scrambled
with the RNTI per slot.</p>
<p>Table 10.1-1: CCE aggregation levels and maximum number of PDCCH
candidates per CCE aggregation level for CSS sets configured by
<em>searchSpaceSIB1</em></p>
<table>
<colgroup>
<col style="width: 49%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td>CCE Aggregation Level</td>
<td>Number of Candidates</td>
</tr>
<tr>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>8</td>
<td>2</td>
</tr>
<tr>
<td>16</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>For each DL BWP configured to a UE in a serving cell, the UE can be
provided by higher layer signalling with</p>
<p>- <span class="math inline">\(P \leq 3\)</span> CORESETs if
<em>coresetPoolIndex</em> is not provided, or if a value of
<em>coresetPoolIndex</em> is same for all CORESETs if
<em>coresetPoolIndex</em> is provided</p>
<p>- <span class="math inline">\(P \leq 5\)</span> CORESETs if
<em>coresetPoolIndex</em> is not provided for a first CORESET, or is
provided and has a value 0 for a first CORESET, and is provided and has
a value 1 for a second CORESET</p>
<p>For each CORESET, the UE is provided the following by
<em>ControlResourceSet</em>:</p>
<p>- a CORESET index <span class="math inline">\(p\)</span>, by
<em>controlResourceSetId</em> or by <em>controlResourceSetId-v1610</em>,
where</p>
<p>- <span class="math inline">\(0 &lt; p &lt; 12\)</span> if
<em>coresetPoolIndex</em> is not provided, or if a value of
<em>coresetPoolIndex</em> is same for all CORESETs if
<em>coresetPoolIndex</em> is provided;</p>
<p>- <span class="math inline">\(0 &lt; p &lt; 16\)</span> if
<em>coresetPoolIndex</em> is not provided for a first CORESET, or is
provided and has a value 0 for a first CORESET, and is provided and has
a value 1 for a second CORESET;</p>
<p>- a DM-RS scrambling sequence initialization value by
<em>pdcch-DMRS-ScramblingID</em>;</p>
<p>- a precoder granularity for a number of REGs in the frequency domain
where the UE can assume use of a same DM-RS precoder by
<em>precoderGranularity</em>;</p>
<p>- a number of consecutive symbols provided by <em>duration</em>;</p>
<p>- a set of resource blocks provided by
<em>frequencyDomainResources</em>;</p>
<p>- CCE-to-REG mapping parameters provided by
<em>cce-REG-MappingType</em>;</p>
<p>- an antenna port quasi co-location, from a set of antenna port quasi
co-locations provided by <em>TCI-State</em>, indicating quasi
co-location information of the DM-RS antenna port for PDCCH
reception;</p>
<p>- an indication for a presence or absence of a transmission
configuration indication (TCI) field for a DCI format, other than DCI
format 1_0, that schedules PDSCH receptions or has associated HARQ-ACK
information without scheduling PDSCH and is provided by a PDCCH in
CORESET <span class="math inline">\(p\)</span>, by
<em>tci-PresentInDCI</em> or <em>tci-PresentDCI-1-2</em>.</p>
<p>When <em>precoderGranularity</em> = <em>allContiguousRBs</em>, a UE
does not expect</p>
<p>- to be configured a set of resource blocks of a CORESET that
includes more than four sub-sets of resource blocks that are not
contiguous in frequency</p>
<p>- any RE of a CORESET to overlap with any RE determined from
<em>lte-CRS-ToMatchAround</em>, or from <em>LTE-CRS-PatternList</em>, or
with any RE of a SS/PBCH block.</p>
<p>If a UE is provided two TCI states indicating quasi co-location
information of the DM-RS antenna port for PDCCH reception in a CORESET
associated with a Type3-PDCCH CSS set, the UE may assume the quasi
co-location information indicated in both of the two TCI states for the
PDCCH reception in the CORESET.</p>
<p>For each CORESET in a DL BWP of a serving cell, a respective
<em>frequencyDomainResources</em> provides a bitmap</p>
<p>- if a CORESET is not associated with any search space set configured
with <em>freqMonitorLocations</em>, the bits of the bitmap have a
one-to-one mapping with non-overlapping groups of 6 consecutive PRBs, in
ascending order of the PRB index in the DL BWP bandwidth of <span
class="math inline">\(N_{RB}^{BWP}\)</span> PRBs with starting common RB
position <span class="math inline">\(N_{BWP}^{start}\)</span>, where the
first common RB of the first group of 6 PRBs has common RB index <span
class="math inline">\(6 \cdot \left\lceil N_{BWP}^{start}/6
\right\rceil\)</span> if <em>rb-Offset</em> is not provided, or the
first common RB of the first group of 6 PRBs has common RB index <span
class="math inline">\(N_{BWP}^{start} + N_{RB}^{offset}\)</span> where
<span class="math inline">\(N_{RB}^{offset}\)</span> is provided by
<em>rb-Offset.</em></p>
<p>- if a CORESET is associated with at least one search space set
configured with <em>freqMonitorLocations</em>, the first <span
class="math inline">\(N_{RBG,set0}^{size}\)</span> bits of the bitmap
have a one-to-one mapping with non-overlapping groups of 6 consecutive
PRBs, in ascending order of the PRB index in each RB set <span
class="math inline">\(k\)</span> in the DL BWP bandwidth of <span
class="math inline">\(N_{RB}^{BWP}\)</span> PRBs with starting common RB
position <span class="math inline">\({RB}_{s0 + k,DL}^{start,\mu}\
\)</span> [6, TS 38.214], where the first common RB of the first group
of 6 PRBs has common RB index <span class="math inline">\({RB}_{s0 +
k,DL}^{start,\mu} + N_{RB}^{offset}\)</span> and <em>k</em> is indicated
by <em>freqMonitorLocations</em> if provided for a search space set;
otherwise, <span class="math inline">\(k = 0\)</span>. <span
class="math inline">\(N_{RBG,set0}^{size} = \left\lfloor
{(N}_{RB,set0}^{size} - N_{RB}^{offset})/6 \right\rfloor\)</span>, <span
class="math inline">\(N_{RB,set0}^{size}\)</span> is a number of
available PRBs in the RB set 0 for the DL BWP, and <span
class="math inline">\(N_{RB}^{offset}\)</span> is provided by
<em>rb-Offset</em> or <span class="math inline">\(N_{RB}^{offset} =
0\)</span> if <em>rb-Offset</em> is not provided. If a UE is provided RB
sets in the DL BWP, the UE expects that the RBs of the CORESET are
within the union of the PRBs in the RB sets of the DL BWP.</p>
<p>For each CORESET provided by <em>cfr-ConfigMCCH-MTCH</em> or
<em>cfr-ConfigMulticast</em> in a CFR of a serving cell, the quantities
<span class="math inline">\(N_{RB}^{BWP}\)</span> and <span
class="math inline">\(N_{BWP}^{start}\)</span> in this clause are
replaced by the size of CFR <span
class="math inline">\(N_{RB}^{CFR}\)</span> and starting common RB
position of CFR <span class="math inline">\(N_{CFR}^{start}\)</span>,
respectively.</p>
<p>For a CORESET other than a CORESET with index 0,</p>
<p>- if a UE has not been provided a configuration of TCI state(s) by
<em>tci-StatesPDCCH-ToAddList</em> and
<em>tci-StatesPDCCH-ToReleaseList</em> for the CORESET, or has been
provided initial configuration of more than one TCI states for the
CORESET by <em>tci-StatesPDCCH-ToAddList</em> and
<em>tci-StatesPDCCH-ToReleaseList</em> but has not received a MAC CE
activation command for one of the TCI states as described in [11, TS
38.321], the UE assumes that the DM-RS antenna port associated with
PDCCH receptions is quasi co-located with the SS/PBCH block the UE
identified during the initial access procedure, or for a most recent
configured grant PUSCH transmission as described in clause 19 for a same
HARQ process;</p>
<p>- if a UE has been provided a configuration of more than one TCI
states by <em>tci-StatesPDCCH-ToAddList</em> and
<em>tci-StatesPDCCH-ToReleaseList</em> for the CORESET as part of
Reconfiguration with sync procedure as described in [12, TS 38.331] but
has not received a MAC CE activation command for one of the TCI states
as described in [11, TS 38.321], the UE assumes that the DM-RS antenna
port associated with PDCCH receptions is quasi co-located with the
SS/PBCH block or the CSI-RS resource the UE identified during the random
access procedure initiated by the Reconfiguration with sync procedure as
described in [12, TS 38.331].</p>
<p>For a CORESET with index 0,</p>
<p>- if the UE is provided <em>TCI-State</em> and if
<em>followUnifiedTCI-State</em> = '<em>enabled</em>' for the CORESET,
the UE assumes that a DM-RS antenna port for PDCCH receptions in the
CORESET and a DM-RS antenna port for PDSCH receptions scheduled by DCI
formats provided by PDCCH receptions in the CORESET are quasi co-located
with the reference signals provided by the indicated <em>TCI-State</em>
[6, TS 38.214]</p>
<p>- else, the UE assumes that a DM-RS antenna port for PDCCH receptions
in the CORESET is quasi co-located with</p>
<p>- the one or more DL RS configured by a TCI state, where the TCI
state is indicated by a MAC CE activation command for the CORESET, if
any, or</p>
<p>- a SS/PBCH block the UE identified during a most recent random
access procedure not initiated by a PDCCH order that triggers a
contention-free random access procedure, if no MAC CE activation command
indicating a TCI state for the CORESET is received after the most recent
random access procedure, or a SS/PBCH block the UE identified during a
most recent configured grant PUSCH transmission as described in clause
19.</p>
<p>For a CORESET other than a CORESET with index 0, if a UE is provided
a single TCI state for a CORESET, or if the UE receives a MAC CE
activation command for one or two of the provided TCI states for a
CORESET, the UE assumes that the DM-RS antenna port associated with
PDCCH receptions in the CORESET is quasi co-located with the one or more
DL RS configured by the TCI states. For a CORESET with index 0, the UE
expects that a CSI-RS configured with <em>qcl-Type</em> set to 'typeD'
in a TCI state indicated by a MAC CE activation command for the CORESET
is provided by a SS/PBCH block</p>
<p>- if the UE receives a MAC CE activation command for one of the TCI
states, the UE applies the activation command in the first slot that is
after slot <span class="math inline">\(k + 3N_{slot}^{subframe,\mu} +
{2^{\mu} \bullet k}_{mac}\)</span> where <span
class="math inline">\(k\)</span> is the slot where the UE would transmit
a PUCCH with HARQ-ACK information for the PDSCH providing the activation
command, <span class="math inline">\(\mu\)</span> is the SCS
configuration for the PUCCH in the slot when the activation command is
applied, and <span class="math inline">\(k_{mac}\)</span> is a number of
slots for SCS configuration <span class="math inline">\(\mu = 0\)</span>
provided by <em>kmac</em> or <span class="math inline">\(k_{mac} =
0\)</span> if <em>kmac</em> is not provided.</p>
<p>If a UE is provided <em>TCI-State</em> in
<em>dl-OrJointTCI-StateList</em>, a DM-RS antenna port for PDCCH
receptions in a CORESET, other than a CORESET with index 0, associated
only with USS sets and/or Type3-PDCCH CSS sets, and a DM-RS antenna port
for PDSCH receptions scheduled by DCI formats provided by PDCCH
receptions in the CORESET are quasi co-located with reference signals
provided by the indicated <em>TCI-State</em> [6, TS 38.214].</p>
<p>If a UE is provided <em>followUnifiedTCI-State</em> for a CORESET,
other than a CORESET with index 0, associated at least with CSS sets
other than Type3-PDCCH CSS sets, and if <em>followUnifiedTCI-State</em>
is set as enabled, a DM-RS antenna port for PDCCH receptions in the
CORESET and a DM-RS antenna port for PDSCH receptions scheduled by DCI
formats provided by PDCCH receptions in the CORESET are quasi co-located
with reference signals provided by the indicated <em>TCI-State</em>.</p>
<p>If the UE is provided by <em>simultaneousTCI-UpdateList1</em> or
<em>simultaneousTCI-UpdateList2</em> up to two lists of cells for
simultaneous TCI state activation, the UE applies the antenna port quasi
co-location provided by one or two <em>TCI-State</em> each with same
activated <em>tci-StateID</em> value, to CORESETs with a same index in
all configured DL BWPs of all configured cells in a list determined from
a serving cell index, where one or two <em>tci-StateID</em>, the CORESET
index, and the serving cell index are provided by a MAC CE command.</p>
<p>For each DL BWP configured to a UE in a serving cell, the UE is
provided by higher layers with <span class="math inline">\(S \leq
10\)</span> search space sets where, for each search space set from the
<span class="math inline">\(S\)</span> search space sets, the UE is
provided the following by <em>SearchSpace</em>:</p>
<p>- a search space set index <span class="math inline">\(s\)</span>,
<span class="math inline">\(0 &lt; s &lt; 40\)</span> , by
<em>searchSpaceId</em></p>
<p>- an association between the search space set <span
class="math inline">\(\ s\)</span> and a CORESET <span
class="math inline">\(p\)</span> by <em>controlResourceSetId</em> or by
<em>controlResourceSetId-v1610</em></p>
<p>- a PDCCH monitoring periodicity of <span
class="math inline">\(k_{s}\)</span> slots and a PDCCH monitoring offset
of <span class="math inline">\(o_{s}\)</span> slots, by
<em>monitoringSlotPeriodicityAndOffset</em> or by
<em>monitoringSlotPeriodicityAndOffset-r17</em></p>
<p>- a PDCCH monitoring pattern within a slot, indicating first
symbol(s) of the CORESET for PDCCH monitoring within each slot where the
UE monitors PDCCH, by <em>monitoringSymbolsWithinSlot</em></p>
<p>- a duration of <span class="math inline">\(T_{s} &lt; k_{s}\)</span>
indicating a number of slots that the search space set <span
class="math inline">\(s\)</span> exists by <em>duration</em>, or a
number of slots in consecutive groups of slots where the search space
set <span class="math inline">\(s\)</span> can exist by
<em>duration-r17</em></p>
<p>- a bitmap, by <em>monitoringSlotsWithinSlotGroup</em>, that applies
per group of slots and provides a PDCCH monitoring pattern indicating
slots in a group of slots for PDCCH monitoring</p>
<p>- a size of the group of slots is same as a size of
<em>monitoringSlotsWithinSlotGroup</em></p>
<p>- for a Type1-PDCCH CSS set provided by <em>ra-SearchSpace</em> in
dedicated RRC signaling, or for a Type3-PDCCH CSS set, or for a USS set,
the PDCCH monitoring pattern indicates only consecutive slots in the
group of slots for PDCCH monitoring and, at least for one combination
<span class="math inline">\(\left( X_{s},Y_{s} \right)\)</span>
indicated by the UE as a capability, a number of the consecutive slots
is not larger than <span class="math inline">\(Y_{s}\)</span></p>
<p>- for a Type1-PDCCH CSS set provided by <em>ra-SearchSpace</em> in
<em>SIB1</em>, the PDCCH monitoring pattern indicates only up to 1 slot
in the group of slots for PDCCH monitoring</p>
<p>- for a Type0-PDCCH CSS set or for a Type0A-PDCCH CSS set, or for a
Type2-PDCCH CSS set, the PDCCH monitoring pattern indicates slots in the
group of slots for PDCCH monitoring, and the slots are not restricted to
be consecutive, and the number of those slots is not larger than the
size of <em>monitoringSlotsWithinSlotGroup</em></p>
<p>- a number of PDCCH candidates <span
class="math inline">\(M_{s}^{(L)}\)</span> per CCE aggregation level
<span class="math inline">\(L\)</span> by <em>aggregationLevel1</em>,
<em>aggregationLevel2</em>, <em>aggregationLevel4</em>,
<em>aggregationLevel8</em>, and <em>aggregationLevel16</em>, for CCE
aggregation level 1, CCE aggregation level 2, CCE aggregation level 4,
CCE aggregation level 8, and CCE aggregation level 16, respectively</p>
<p>- an indication that search space set <span
class="math inline">\(s\)</span> is either a CSS set or a USS set by
<em>searchSpaceType</em></p>
<p>- if search space set <span class="math inline">\(s\)</span> is a CSS
set</p>
<p>- an indication by <em>dci-Format0-0-AndFormat1-0</em> to monitor
PDCCH candidates for DCI format 0_0 and DCI format 1_0</p>
<p>- an indication by <em>dci-Format2-0</em> to monitor one or two PDCCH
candidates, or to monitor one PDCCH candidate per RB set if the UE is
provided <em>freqMonitorLocations</em> for the search space set, for DCI
format 2_0 and a corresponding CCE aggregation level</p>
<p>- an indication by <em>dci-Format2-1</em> to monitor PDCCH candidates
for DCI format 2_1</p>
<p>- an indication by <em>dci-Format2-2</em> to monitor PDCCH candidates
for DCI format 2_2</p>
<p>- an indication by <em>dci-Format2-3</em> to monitor PDCCH candidates
for DCI format 2_3</p>
<p>- an indication by <em>dci-Format2-4</em> to monitor PDCCH candidates
for DCI format 2_4</p>
<p>- an indication by <em>dci-Format2-6</em> to monitor PDCCH candidates
for DCI format 2_6</p>
<p>- an indication by <em>dci-Format4-0</em> to monitor PDCCH candidates
for DCI format 4_0</p>
<p>- an indication by <em>dci-Format4-1</em>, or <em>dci-Format4-2</em>,
or <em>dci-Format4-1-AndFormat4-2</em> to monitor PDCCH candidates for
DCI format 4_1, or DCI format 4_2, or for both DCI format 4_1 and DCI
format 4_2, respectively</p>
<p>- an indication by <em>searchSpaceLinkingId</em> that search space
set <span class="math inline">\(s\)</span> is linked to another search
space set for which is provided a same value for
<em>searchSpaceLinkingId</em></p>
<p>- if search space set <span class="math inline">\(s\)</span> is a USS
set, an indication by <em>dci-Formats</em> to monitor PDCCH candidates
either for DCI format 0_0 and DCI format 1_0, or for DCI format 0_1 and
DCI format 1_1, or an indication by <em>dci-FormatsExt</em> to monitor
PDCCH candidates for DCI format 0_2 and DCI format 1_2, or for DCI
format 0_1, DCI format 1_1, DCI format 0_2, and DCI format 1_2, or an
indication by <em>dci-FormatsSL</em> to monitor PDCCH candidates for DCI
format 0_0 and DCI format 1_0, or for DCI format 0_1 and DCI format 1_1,
or for DCI format 3_0, or for DCI format 3_1, or for DCI format 3_0 and
DCI format 3_1</p>
<p>- a bitmap by <em>freqMonitorLocations</em>, if provided, to indicate
an index of one or more RB sets for the search space set <span
class="math inline">\(s\)</span>, where the MSB <span
class="math inline">\(k\)</span> in the bitmap corresponds to RB set
<span class="math inline">\(k - 1\)</span> in the DL BWP. For RB set
<span class="math inline">\(k\)</span> indicated in the bitmap, the
first PRB of the frequency domain monitoring location confined within
the RB set is given by <span class="math inline">\({RB}_{s0 +
k,DL}^{start,\mu} + N_{RB}^{offset}\)</span>, where <span
class="math inline">\({RB}_{s0 + k,DL}^{start,\mu}\)</span> is the index
of first common RB of the RB set <span class="math inline">\(k\)</span>
[6, TS 38.214], and <span class="math inline">\(N_{RB}^{offset}\)</span>
is provided by <em>rb-Offset</em> or <span
class="math inline">\(N_{RB}^{offset} = 0\)</span> if <em>rb-Offset</em>
is not provided. For each RB set with a corresponding value of 1 in the
bitmap, the frequency domain resource allocation pattern for the
monitoring location is determined based on the first <span
class="math inline">\(N_{RBG,\ set\ 0}^{size}\)</span> bits in
<em>frequencyDomainResources</em> provided by the associated CORESET
configuration.</p>
<p>If the <em>monitoringSymbolsWithinSlot</em> indicates to a UE to
monitor PDCCH in a subset of up to three consecutive symbols that are
same in every slot where the UE monitors PDCCH for all search space
sets, the UE does not expect to be configured with a PDCCH SCS other
than 15 kHz if the subset includes at least one symbol after the third
symbol.</p>
<p>A UE does not expect to be provided a first symbol and a number of
consecutive symbols for a CORESET that results to a PDCCH candidate
mapping to symbols of different slots.</p>
<p>A UE does not expect any two PDCCH monitoring occasions on an active
DL BWP, for a same search space set or for different search space sets,
in a same CORESET to be separated by a non-zero number of symbols that
is smaller than the CORESET duration.</p>
<p>A UE determines a PDCCH monitoring occasion on an active DL BWP from
the PDCCH monitoring periodicity, the PDCCH monitoring offset, and the
PDCCH monitoring pattern within a slot. If
<em>monitoringSlotsWithinSlotGroup</em> is not provided, the UE
determines that PDCCH monitoring occasions exist in a slot with number
<span class="math inline">\(n_{s,f}^{\mu}\)</span> [4, TS 38.211] in a
frame with number <span class="math inline">\(n_{f}\)</span> if (<span
class="math inline">\(n_{f}\)</span> <span
class="math inline">\(N_{slot\ }^{frame,\ \mu}\)</span>+<span
class="math inline">\(\ n_{s,f\ }^{\mu}\)</span>-<span
class="math inline">\(\ o_{s}\)</span>)<span class="math inline">\(\
modk_{s} = 0\)</span><span class="math inline">\(\left(
n_{f}N_{slot}^{frame,\mu} + n_{s,f}^{\mu} - o_{p,s} \right)mod\ k_{p,s}
= 0\)</span>. The UE monitors PDCCH candidates for search space set
<span class="math inline">\(s\)</span> for <span
class="math inline">\(T_{s}\)</span> consecutive slots, starting from
slot <span class="math inline">\(n_{s,f}^{\mu}\)</span>, and does not
monitor PDCCH candidates for search space set <span
class="math inline">\(s\)</span> for the next <span
class="math inline">\(k_{s} - T_{s}\)</span> consecutive slots. If
<em>monitoringSlotsWithinSlotGroup</em> is provided, for search space
set <span class="math inline">\(s\)</span>, the UE determines that the
slot with number <span class="math inline">\(n_{s,f}^{\mu}\)</span> [4,
TS 38.211] in a frame with number <span
class="math inline">\(n_{f}\)</span> satisfying (<span
class="math inline">\(n_{f}\)</span> <span
class="math inline">\(N_{slot\ }^{frame,\ \mu}\)</span>+<span
class="math inline">\(\ n_{s,f\ }^{\mu}\)</span>-<span
class="math inline">\(\ o_{s}\)</span>)<span class="math inline">\(\
modk_{s} = 0\)</span> is the first slot in a first group of <span
class="math inline">\(L_{s}\)</span> slots and that PDCCH monitoring
occasions exist in <span class="math inline">\(T_{s}/L_{s}\)</span>
consecutive groups of slots starting from the first group, where <span
class="math inline">\(L_{s}\)</span> is the size of
<em>monitoringSlotsWithinSlotGroup</em>. The UE monitors PDCCH
candidates for search space set <span class="math inline">\(s\)</span>
within <span class="math inline">\(each\ of\ the\ T_{s}/L_{s}\ \)</span>
consecutive groups of slots according to
<em>monitoringSlotsWithinSlotGroup</em>, starting from slot <span
class="math inline">\(n_{s,f}^{\mu}\)</span>, and does not monitor PDCCH
candidates for search space set <span class="math inline">\(s\)</span>
for the next <span class="math inline">\(k_{s} - T_{s}\)</span>
consecutive slots.</p>
<p>A USS at CCE aggregation level <span class="math inline">\(L \in
\left\{ 1,\ 2,\ 4,\ 8,\ 16 \right\}\)</span> is defined by a set of
PDCCH candidates for CCE aggregation level <span
class="math inline">\(L\)</span>.</p>
<p>If a UE is configured with <em>CrossCarrierSchedulingConfig</em> for
a serving cell the carrier indicator field value corresponds to the
value indicated by <em>CrossCarrierSchedulingConfig.</em></p>
<p>For an active DL BWP of a serving cell on which a UE monitors PDCCH
candidates in a USS, if the UE is not configured with a carrier
indicator field, the UE monitors the PDCCH candidates without carrier
indicator field. For an active DL BWP of a serving cell on which a UE
monitors PDCCH candidates in a USS, if a UE is configured with a carrier
indicator field, the UE monitors the PDCCH candidates with carrier
indicator field.</p>
<p>A UE does not expect to monitor PDCCH candidates on an active DL BWP
of a secondary cell if the UE is configured to monitor PDCCH candidates
with carrier indicator field corresponding to that secondary cell in
another serving cell. For the active DL BWP of a serving cell on which
the UE monitors PDCCH candidates, the UE monitors PDCCH candidates at
least for the same serving cell.</p>
<p>For a search space set <span class="math inline">\(s\)</span>
associated with CORESET <span class="math inline">\(p\)</span>, the CCE
indexes for aggregation level <span class="math inline">\(L\)</span>
corresponding to PDCCH candidate <span
class="math inline">\(m_{{s,n}_{CI}}^{(L)}\ \)</span> of the search
space set in slot <span class="math inline">\(n_{s,f}^{\mu}\)</span> for
an active DL BWP of a serving cell corresponding to carrier indicator
field value <span class="math inline">\(n_{CI}\)</span> are given by</p>
<p><span class="math display">\[L \cdot \left\{ \left(
Y_{p,n_{s,f}^{\mu}} + \left\lfloor \frac{m_{{s,n}_{CI}}^{(L)} \cdot
N_{CCE,p}}{L \cdot M_{s,\max}^{(L)}} \right\rfloor + n_{CI}
\right)mod\left\lfloor \frac{N_{CCE,p}}{L} \right\rfloor \right\} +
i\]</span></p>
<p>where</p>
<p>for any CSS, <span class="math inline">\(Y_{p,n_{s,f}^{\mu}} =
0\)</span>;</p>
<p>for a USS, <span class="math inline">\(Y_{p,n_{s,f}^{\mu}} = \left(
{A_{p} \cdot Y}_{p,n_{s,f}^{\mu} - 1} \right)modD\)</span>, <span
class="math inline">\(Y_{p, - 1} = n_{RNTI} \neq 0\)</span>, <span
class="math inline">\(A_{p} = 39827\)</span> for <span
class="math inline">\(pmod3 = 0\)</span>, <span
class="math inline">\(A_{p} = 39829\)</span> for <span
class="math inline">\(pmod3 = 1\)</span>, <span
class="math inline">\(A_{p} = 39839\)</span> for <span
class="math inline">\(pmod3 = 2\)</span>, and <span
class="math inline">\(D = 65537\)</span>;</p>
<p><span class="math inline">\(i = 0,\cdots,L - 1\)</span>;</p>
<p><span class="math inline">\(N_{CCE,p}\)</span> is the number of CCEs,
numbered from 0 to <span class="math inline">\(N_{CCE,p} - 1\)</span>,
in CORESET <span class="math inline">\(p\)</span> and, if any, per RB
set;</p>
<p><span class="math inline">\(n_{CI}\)</span> is the carrier indicator
field value if the UE is configured with a carrier indicator field by
<em>CrossCarrierSchedulingConfig</em> for the serving cell on which
PDCCH is monitored, except for scheduling of the serving cell from the
same serving cell in which case <span class="math inline">\(n_{CI} =
0\)</span>; otherwise, including for any CSS, <span
class="math inline">\(n_{CI} = 0\)</span>;</p>
<p><span class="math inline">\(m_{{s,n}_{CI}}^{(L)} =
0,\cdots,M_{s,n_{CI}}^{(L)} - 1\)</span>, where <span
class="math inline">\(M_{s,n_{CI}}^{(L)}\)</span> is the number of PDCCH
candidates the UE is configured to monitor for aggregation level <span
class="math inline">\(L\)</span> of a search space set <span
class="math inline">\(s\)</span> for a serving cell corresponding to
<span class="math inline">\(n_{CI}\)</span>;</p>
<p>for any CSS, <span class="math inline">\(M_{s,\max}^{(L)} =
M_{s,0}^{(L)}\)</span>;</p>
<p>for a USS, <span class="math inline">\(M_{s,\max}^{(L)}\)</span> is
the maximum of <span class="math inline">\(M_{s,n_{CI}}^{(L)}\)</span>
over all configured <span class="math inline">\(n_{CI}\)</span> values
for a CCE aggregation level <span class="math inline">\(L\)</span> of
search space set <span class="math inline">\(s\)</span> ;</p>
<p>the RNTI value used for <span class="math inline">\(n_{RNTI}\)</span>
is the C-RNTI.</p>
<p>For search space sets <span class="math inline">\(s_{i}\)</span> and
<span class="math inline">\(s_{j}\)</span> that include
<em>searchSpaceLinkingId</em> with same value, a UE monitors, in
monitoring occasions with same index according to each of search space
sets <span class="math inline">\(s_{i}\)</span> and <span
class="math inline">\(s_{j}\)</span> in a slot, PDCCH candidates <span
class="math inline">\(m_{s_{i},n_{CI}}^{(L)}\)</span> and <span
class="math inline">\(m_{s_{j},n_{CI}}^{(L)}\)</span>, with <span
class="math inline">\(m_{s_{i},n_{CI}}^{(L)} =
m_{s_{j},n_{CI}}^{(L)}\)</span>, for detection of a DCI format with same
information. The UE expects <span class="math inline">\(k_{s_{i}} =
k_{s_{j}}\)</span>, <span class="math inline">\(o_{s_{i}} = o_{s_{j}},\
T_{s_{i}} = T_{s_{j}}\)</span>, <span
class="math inline">\(M_{s_{i}}^{(L)} = M_{s_{j}}^{(L)}\)</span>, and a
same number of non-overlapping PDCCH monitoring occasions per slot based
on corresponding <em>monitoringSymbolsWithinSlot</em>, for search space
sets <span class="math inline">\(s_{i}\)</span> and <span
class="math inline">\(s_{j}\)</span>. For CORESET <span
class="math inline">\(p_{i}\)</span> associated with the search space
set <span class="math inline">\(s_{i}\)</span> and for CORESET <span
class="math inline">\(p_{j}\)</span> associated with the search space
set <span class="math inline">\(s_{j}\)</span>, the UE is provided
<em>tci-PresentInDCI</em> or <em>tci-PresentDCI-1-</em>2 for either none
or both of CORESETs <span class="math inline">\(p_{i}\)</span> and <span
class="math inline">\(p_{j}\)</span>. For CORESET <span
class="math inline">\(p_{i}\)</span> associated with the search space
set <span class="math inline">\(s_{i}\)</span> and for CORESET <span
class="math inline">\(p_{j}\)</span> associated with the search space
set <span class="math inline">\(s_{j}\)</span>, the UE is either not
provided <em>coresetPoolIndex</em> value of 1 for any of the two
CORESETs, or is provided <em>coresetPoolIndex</em> value of 1 for both
CORESETs.</p>
<p>A UE can indicate by <em>numBD-twoPDCCH-r17</em> a capability for
counting PDCCH candidates <span
class="math inline">\(m_{s_{i},n_{CI}}^{(L)}\)</span> and <span
class="math inline">\(m_{s_{j},n_{CI}}^{(L)}\)</span> either as 2 PDCCH
candidates or as 3 PDCCH candidates.</p>
<p>For search space sets <span class="math inline">\(s_{i}\)</span> and
<span class="math inline">\(s_{j}\)</span> that include
<em>searchSpaceLinkingId</em> with same value, and for search space sets
<span class="math inline">\(s_{k}\)</span> and <span
class="math inline">\(s_{l}\)</span> that include
<em>searchSpaceLinkingId</em> with same value, a UE expects to
simultaneously monitor PDCCH candidates <span
class="math inline">\(m_{s_{i},n_{CI,1}}^{(8)} =
m_{s_{j},n_{CI,1}}^{(8)}\)</span>, and <span
class="math inline">\(m_{s_{k},n_{CI,2}}^{(16)}\)</span>= <span
class="math inline">\(m_{s_{l},n_{CI,2}}^{(16)}\)</span> only if a first
CCE of <span class="math inline">\(m_{s_{i},n_{CI,1}}^{(8)}\)</span> or
<span class="math inline">\(m_{s_{j},n_{CI,1}}^{(8)}\)</span> has
different index than a first CCE of <span
class="math inline">\(m_{s_{k},n_{CI,2}}^{(16)}\)</span> or <span
class="math inline">\(m_{s_{l},n_{CI,2}}^{(16)}\)</span> in a CORESET
configured with <em>cce-REG-MappingType</em> = '<em>nonInterleaved</em>'
and with duration of one symbol.</p>
<p>If a UE</p>
<p>- is provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> for a downlink cell,</p>
<p>- is provided, by <em>searchSpaceLinkingId</em> a same value for
search space sets <span class="math inline">\(s_{i}\)</span> and <span
class="math inline">\(s_{j}\)</span> on the downlink cell, and</p>
<p>- indicates <em>numBD-twoPDCCH-r17</em> with value of 3</p>
<p>the UE counts each PDCCH candidate for the one of the search space
sets <span class="math inline">\(s_{i}\)</span> and <span
class="math inline">\(s_{j}\)</span> that the UE monitors PDCCH in the
later span, as two PDCCH candidates. The UE does not expect a first
PDCCH candidate from search space set <span
class="math inline">\(s_{i}\)</span> or <span
class="math inline">\(s_{j}\)</span> and a second PDCCH candidate from a
search space set <span class="math inline">\(s_{k}\)</span> that does
not include <em>searchSpaceLinkingId</em> to use a same set of CCEs and
same scrambling in a same CORESET, and provide respective first and
second DCI formats with same size, in any span other than the first span
in a slot.</p>
<p>A UE does not expect to be provided <em>freqMonitorLocations</em> for
a search space set <span class="math inline">\(s\)</span> in a serving
cell if <em>intraCellGuardBandsDL-List</em> indicates that no intra-cell
guard-bands are configured for the serving cell.</p>
<p>A UE that</p>
<p>- is configured for operation with carrier aggregation, and</p>
<p>- indicates support of search space sharing through
<em>searchSpaceSharingCA-UL</em> or through
<em>searchSpaceSharingCA-DL</em>, and</p>
<p>- has a PDCCH candidate with CCE aggregation level <span
class="math inline">\(L\)</span> in CORESET <span
class="math inline">\(p\)</span> associated with search space set <span
class="math inline">\(s_{i}\)</span> of a scheduling cell for detection
of a first DCI format, other than DCI format 0_0 or DCI format 1_0,
having a first size and scheduling</p>
<p>- PUSCH transmission or configured grant Type 2 PUSCH release on
serving cell <span class="math inline">\(n_{CI,2}\)</span>, or</p>
<p>- PDSCH reception or having associated HARQ-ACK information without
scheduling PDSCH reception on serving cell <span
class="math inline">\(n_{CI,2}\)</span></p>
<p>can receive a corresponding PDCCH through a PDCCH candidate with CCE
aggregation level <span class="math inline">\(L\)</span> in CORESET
<span class="math inline">\(p\)</span> associated with search space set
<span class="math inline">\(s_{j}\)</span> of the scheduling cell for
detection of a second DCI format having a second size and associated
with scheduling on serving cell <span
class="math inline">\(n_{CI,1}\)</span> if the first size and the second
size are same and if neither of search space sets <span
class="math inline">\(s_{i}\)</span> and <span
class="math inline">\(s_{j}\)</span> includes
<em>searchSpaceLinkingId</em>.</p>
<p>A UE expects to monitor PDCCH candidates for up to 4 sizes of DCI
formats that include up to 3 sizes of DCI formats with CRC scrambled by
C-RNTI per serving cell. The UE counts a number of sizes for DCI formats
per serving cell based on a number of configured PDCCH candidates in
respective search space sets for the corresponding active DL BWP.</p>
<p>A UE does not expect to detect, in a same PDCCH monitoring occasion,
a DCI format with CRC scrambled by a SI-RNTI, RA-RNTI, MsgB-RNTI,
TC-RNTI, P-RNTI, C-RNTI, CS-RNTI, MCS-RNTI, MCCH-RNTI, G-RNTI, or
G-CS-RNTI and a DCI format with CRC scrambled by a SL-RNTI or a
SL-CS-RNTI for scheduling respective PDSCH reception and PSSCH
transmission on a same serving cell.</p>
<p>A PDCCH candidate with index <span
class="math inline">\(m_{{s_{j},n}_{CI}}^{(L)}\)</span> for a search
space set <span class="math inline">\(s_{j}\)</span> using a set of
<span class="math inline">\(L\)</span> CCEs in a CORESET <span
class="math inline">\(p\)</span> on the active DL BWP for serving cell
<span class="math inline">\(n_{CI}\)</span> is not counted for
monitoring if there is a PDCCH candidate with index <span
class="math inline">\(m_{{s_{i},n}_{CI}}^{(L)}\)</span> for a search
space set <span class="math inline">\(s_{i}{&lt; s}_{j}\)</span>, or if
there is a PDCCH candidate with index <span
class="math inline">\(n_{{s_{j},n}_{CI}}^{(L)}\)</span> and <span
class="math inline">\(n_{{s_{j},n}_{CI}}^{(L)} &lt;
m_{{s_{j},n}_{CI}}^{(L)}\)</span>, in the CORESET <span
class="math inline">\(p\)</span> on the active DL BWP for serving cell
<span class="math inline">\(n_{CI}\)</span> using a same set of <span
class="math inline">\(L\)</span> CCEs, the PDCCH candidates have
identical scrambling, and the corresponding DCI formats for the PDCCH
candidates have a same size; otherwise, the PDCCH candidate with index
<span class="math inline">\(m_{{s_{j},n}_{CI}}^{(L)}\)</span> is counted
for monitoring.</p>
<p>For search space sets <span class="math inline">\(s_{i}\)</span> and
<span class="math inline">\(s_{j}\)</span> that include
<em>searchSpaceLinkingId</em> with same value, and for search space set
<span class="math inline">\(s_{k}\)</span> that does not include
<em>searchSpaceLinkingId</em>, when a UE</p>
<p>- monitors PDCCH candidates <span
class="math inline">\(m_{s_{i},n_{CI,1}}^{(L)} =
m_{s_{j},n_{CI,1}}^{(L)}\)</span> for detection of a first DCI
format,</p>
<p>- monitors PDCCH candidate <span
class="math inline">\(m_{s_{k},n_{CI,2}}^{(L)}\)</span> for detection of
a second DCI format having a same size as the first DCI format,</p>
<p>- the PDCCH candidate <span
class="math inline">\(m_{s_{i},n_{CI,1}}^{(L)}\)</span>, or the PDCCH
candidate <span class="math inline">\(m_{s_{j},n_{CI,1}}^{(L)}\)</span>,
and the PDCCH candidate <span
class="math inline">\(m_{s_{k},n_{CI,2}}^{(L)}\)</span> have identical
scrambling and use a same set of CCEs over same symbols in a slot in a
CORESET <span class="math inline">\(p\)</span>,</p>
<p>the PDCCH candidate <span
class="math inline">\(m_{s_{k},n_{CI,2}}^{(L)}\)</span> is not counted
for monitoring and the UE assumes that a detected DCI format is the
first DCI format. A UE may monitor PDCCH candidate <span
class="math inline">\(m_{s_{k},n_{CI,2}}^{(L)}\)</span> depending on a
corresponding capability [18, TS 38.306].</p>
<p>For search space sets <span class="math inline">\(s_{i}\)</span> and
<span class="math inline">\(s_{j}\)</span> that include
<em>searchSpaceLinkingId</em> with same value, and for search space set
<span class="math inline">\(s_{k}\)</span> that does not include
<em>searchSpaceLinkingId</em>, when a UE</p>
<p>- monitors PDCCH candidates <span
class="math inline">\(m_{s_{i},n_{CI,1}}^{(8)} =\)</span> <span
class="math inline">\(m_{s_{j},n_{CI,1}}^{(8)}\)</span> for detection of
a first DCI format and monitors PDCCH candidate <span
class="math inline">\(m_{s_{k},n_{CI,2}}^{(16)}\)</span> for detection
of a second DCI format, or monitors PDCCH candidates <span
class="math inline">\(m_{s_{i},n_{CI,1}}^{(16)} =
m_{s_{j},n_{CI,1}}^{(16)}\)</span> for detection of the first DCI format
and monitors PDCCH candidate <span
class="math inline">\(m_{s_{k},n_{CI,2}}^{(8)}\)</span> for detection of
the second DCI format, and</p>
<p>- one of the PDCCH candidates <span
class="math inline">\(m_{s_{i},n_{CI,1}}^{(8)}\)</span> and <span
class="math inline">\(m_{s_{j},n_{CI,1}}^{(8)}\)</span>, and the PDCCH
candidate <span
class="math inline">\(m_{s_{k},n_{CI,2}}^{(16)}\)</span>, or one of the
PDCCH candidates <span
class="math inline">\(m_{s_{i},n_{CI,1}}^{(16)}\)</span> and <span
class="math inline">\(m_{s_{j},n_{CI,1}}^{(16)}\)</span>, and the PDCCH
candidate <span class="math inline">\(m_{s_{k},n_{CI,2}}^{(8)}\)</span>,
have a first CCE with same index and are simultaneously monitored in a
CORESET <span class="math inline">\(p\)</span> with
<em>cce-REG-MappingType</em> = '<em>nonInterleaved</em>' and duration of
one symbol,</p>
<p>the UE assumes that a detected DCI format is the first DCI
format.</p>
<p>For search space sets <span class="math inline">\(s_{i}\)</span> and
<span class="math inline">\(s_{j}\)</span>, that include
<em>searchSpaceLinkingId</em> with same value, and for search space sets
<span class="math inline">\(s_{k}\)</span> and <span
class="math inline">\(s_{l}\)</span> that include
<em>searchSpaceLinkingId</em> with same value, and for detection of DCI
formats with same size, a UE expects different CCEs or different
scrambling in a CORESET <span class="math inline">\(p\)</span> for any
of first PDCCH candidates <span
class="math inline">\(m_{s_{i},n_{CI,1}}^{(L)}\)</span> and <span
class="math inline">\(m_{s_{j},n_{CI,1}}^{(L)}\)</span>, with <span
class="math inline">\(m_{s_{i},n_{CI,1}}^{(L)} =
m_{s_{j},n_{CI,1}}^{(L)}\)</span>, and any of second PDCCH candidates
<span class="math inline">\(m_{s_{k},n_{CI,2}}^{(L)}\)</span> and <span
class="math inline">\(m_{s_{l},n_{CI,2}}^{(L)}\)</span>, with <span
class="math inline">\(m_{s_{k},n_{CI,2}}^{(L)} =
m_{s_{l},n_{CI,2}}^{(L)}\)</span> that the UE would simultaneously
monitor.</p>
<p>Table 10.1-2 provides the maximum number of monitored PDCCH
candidates, <span
class="math inline">\(M_{PDCCH}^{max,slot,\mu}\)</span>, per slot for a
UE in a DL BWP with SCS configuration <span
class="math inline">\(\mu\)</span> for operation with a single serving
cell.</p>
<p>Table 10.1-2: Maximum number <span
class="math inline">\(\mathbf{M}_{\mathbf{PDCCH}}^{\mathbf{max,slot,\mu}}\)</span>
of monitored PDCCH candidates per slot for a DL BWP with SCS
configuration <span class="math inline">\(\mathbf{\mu \in}\left\{
\mathbf{0,\ 1,2,3} \right\}\)</span> for a single serving cell</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 84%" />
</colgroup>
<tbody>
<tr>
<td><span class="math display">\[\mathbf{\mu}\]</span></td>
<td>Maximum number of monitored PDCCH candidates per slot and per
serving cell <span
class="math inline">\(\mathbf{M}_{\mathbf{PDCCH}}^{\mathbf{max,slot,\mu}}\)</span></td>
</tr>
<tr>
<td>0</td>
<td>44</td>
</tr>
<tr>
<td>1</td>
<td>36</td>
</tr>
<tr>
<td>2</td>
<td>22</td>
</tr>
<tr>
<td>3</td>
<td>20</td>
</tr>
</tbody>
</table>
<p>Table 10.1-2A provides the maximum number of monitored PDCCH
candidates, <span
class="math inline">\(M_{PDCCH}^{max,(X,Y),\mu}\)</span>, per span for a
UE in a DL BWP with SCS configuration <span
class="math inline">\(\mu\)</span> for operation with a single serving
cell.</p>
<p>Table 10.1-2A: Maximum number <span
class="math inline">\(\mathbf{M}_{\mathbf{PDCCH}}^{\mathbf{max,}\left(
\mathbf{X,Y} \right)\mathbf{,\mu}}\)</span> of monitored PDCCH
candidates in a span for combination <span
class="math inline">\(\mathbf{(X,Y)}\)</span> for a DL BWP with SCS
configuration <span class="math inline">\(\mathbf{\mu \in}\left\{
\mathbf{0,\ 1} \right\}\)</span> for a single serving cell</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 28%" />
<col style="width: 27%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td colspan="3">Maximum number <span
class="math inline">\(\mathbf{M}_{\mathbf{PDCCH}}^{\mathbf{max,}\left(
\mathbf{X,Y} \right)\mathbf{,\mu}}\)</span> of monitored PDCCH
candidates per span for combination <span class="math inline">\(\left(
\mathbf{X,Y} \right)\)</span> and per serving cell</td>
</tr>
<tr>
<td><span class="math display">\[\mathbf{\mu}\]</span></td>
<td>(2, 2)</td>
<td>(4, 3)</td>
<td>(7, 3)</td>
</tr>
<tr>
<td>0</td>
<td>14</td>
<td>28</td>
<td>44</td>
</tr>
<tr>
<td>1</td>
<td>12</td>
<td>24</td>
<td>36</td>
</tr>
</tbody>
</table>
<p>Table 10.1-2B provides the maximum number of monitored PDCCH
candidates, <span
class="math inline">\(M_{PDCCH}^{max,X_{s},\mu}\)</span>, per group of
<span class="math inline">\(X_{s}\)</span> slots for combination <span
class="math inline">\((X_{s},Y_{s})\)</span> for a UE in a DL BWP with
SCS configuration <span class="math inline">\(\mu\)</span> for operation
with a single serving cell.</p>
<p>Table 10.1-2B: Maximum number <span
class="math inline">\(\mathbf{M}_{\mathbf{PDCCH}}^{\mathbf{max,}\mathbf{X}_{\mathbf{s}}\mathbf{,\mu}}\)</span>
of monitored PDCCH candidates per group of <span
class="math inline">\(\mathbf{X}_{\mathbf{s}}\)</span> slots for
combination <span class="math inline">\(\left(
\mathbf{X}_{\mathbf{s}}\mathbf{,}\mathbf{Y}_{\mathbf{s}}
\right)\)</span> for a DL BWP with SCS configuration <span
class="math inline">\(\mathbf{\mu \in}\left\{ \mathbf{5,\ 6}
\right\}\)</span> for a single serving cell</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 21%" />
<col style="width: 22%" />
<col style="width: 21%" />
<col style="width: 21%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td colspan="4">Maximum number <span
class="math inline">\(\mathbf{M}_{\mathbf{PDCCH}}^{\mathbf{max,}\mathbf{X}_{\mathbf{s}}\mathbf{,\mu}}\)</span>
of monitored PDCCH candidates in a group of <span
class="math inline">\(\mathbf{X}_{\mathbf{s}}\)</span> slots per
combination <span class="math inline">\(\left(
\mathbf{X}_{\mathbf{s}}\mathbf{,}\mathbf{Y}_{\mathbf{s}}
\right)\)</span> and per serving cell</td>
</tr>
<tr>
<td><span class="math display">\[\mathbf{\mu}\]</span></td>
<td>(4, 1)</td>
<td>(4, 2)</td>
<td>(8, 1)</td>
<td>(8, 4)</td>
</tr>
<tr>
<td>5</td>
<td>20</td>
<td>20</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>6</td>
<td>10</td>
<td>10</td>
<td>20</td>
<td>20</td>
</tr>
</tbody>
</table>
<p>Table 10.1-3 provides the maximum number of non-overlapped CCEs,
<span class="math inline">\(C_{PDCCH}^{max,slot,\mu}\)</span>, for a DL
BWP with SCS configuration <span class="math inline">\(\mu\)</span> that
a UE is expected to monitor corresponding PDCCH candidates per slot for
operation with a single serving cell.</p>
<p>CCEs for PDCCH candidates are non-overlapped if they correspond
to</p>
<p>- different CORESET indexes, or</p>
<p>- different first symbols for the reception of the respective PDCCH
candidates.</p>
<p>Table 10.1-3: Maximum number <span
class="math inline">\(\mathbf{C}_{\mathbf{PDCCH}}^{\mathbf{max,slot,\mu}}\)</span>
of non-overlapped CCEs per slot for a DL BWP with SCS configuration
<span class="math inline">\(\mathbf{\mu \in}\left\{ \mathbf{0,\ 1,2,3}
\right\}\)</span> for a single serving cell</p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<tbody>
<tr>
<td><span class="math display">\[\mathbf{\mu}\]</span></td>
<td>Maximum number of non-overlapped CCEs per slot and per serving cell
<span
class="math inline">\(\mathbf{C}_{\mathbf{PDCCH}}^{\mathbf{max,slot,\mu}}\)</span></td>
</tr>
<tr>
<td>0</td>
<td>56</td>
</tr>
<tr>
<td>1</td>
<td>56</td>
</tr>
<tr>
<td>2</td>
<td>48</td>
</tr>
<tr>
<td>3</td>
<td>32</td>
</tr>
</tbody>
</table>
<p>Table 10.1-3A provides the maximum number of non-overlapped CCEs,
<span class="math inline">\(C_{PDCCH}^{max,(X,Y),\mu}\)</span>, for a DL
BWP with SCS configuration <span class="math inline">\(\mu\)</span> that
a UE is expected to monitor corresponding PDCCH candidates per span for
operation with a single serving cell.</p>
<p>Table 10.1-3A: Maximum number <span
class="math inline">\(\mathbf{C}_{\mathbf{PDCCH}}^{\mathbf{max,}\left(
\mathbf{X,Y} \right)\mathbf{,\mu}}\)</span> of non-overlapped CCEs in a
span for combination <span class="math inline">\(\left( \mathbf{X,Y}
\right)\)</span> for a DL BWP with SCS configuration <span
class="math inline">\(\mathbf{\mu \in}\left\{ \mathbf{0,\ 1}
\right\}\)</span> for a single serving cell</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 27%" />
<col style="width: 29%" />
<col style="width: 27%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td colspan="3">Maximum number <span
class="math inline">\(\mathbf{C}_{\mathbf{PDCCH}}^{\mathbf{max,}\left(
\mathbf{X,Y} \right)\mathbf{,\mu}}\)</span> of non-overlapped CCEs per
span for combination <span class="math inline">\(\left( \mathbf{X,Y}
\right)\)</span> and per serving cell</td>
</tr>
<tr>
<td><span class="math display">\[\mu\]</span></td>
<td>(2, 2)</td>
<td>(4, 3)</td>
<td>(7, 3)</td>
</tr>
<tr>
<td>0</td>
<td>18</td>
<td>36</td>
<td>56</td>
</tr>
<tr>
<td>1</td>
<td>18</td>
<td>36</td>
<td>56</td>
</tr>
</tbody>
</table>
<p>Table 10.1-3B provides the maximum number of non-overlapped CCEs,
<span class="math inline">\(C_{PDCCH}^{max,X_{s},\mu}\)</span>, for a DL
BWP with SCS configuration <span class="math inline">\(\mu\)</span> that
a UE is expected to monitor corresponding PDCCH candidates per group of
<span class="math inline">\(X_{s}\)</span> slots for combination <span
class="math inline">\(\left( X_{s},Y_{s} \right)\)</span> for operation
with a single serving cell.</p>
<p>Table 10.1-3B: Maximum number <span
class="math inline">\(\mathbf{C}_{\mathbf{PDCCH}}^{\mathbf{max,}\mathbf{X}_{\mathbf{s}}\mathbf{,\mu}}\)</span>
of non-overlapped CCEs in a group of <span
class="math inline">\(\mathbf{X}_{\mathbf{s}}\)</span> slots for any
combination <span class="math inline">\(\left(
\mathbf{X}_{\mathbf{s}}\mathbf{,}\mathbf{Y}_{\mathbf{s}}
\right)\)</span> for a DL BWP with SCS configuration <span
class="math inline">\(\mathbf{\mu \in}\left\{ \mathbf{5,\ 6}
\right\}\)</span> for a single serving cell</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 21%" />
<col style="width: 22%" />
<col style="width: 21%" />
<col style="width: 21%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td colspan="4">Maximum number of non-overlapped CCEs in a group of
<span class="math inline">\(\mathbf{X}_{\mathbf{s}}\)</span> slots per
combination <span class="math inline">\(\left(
\mathbf{X}_{\mathbf{s}}\mathbf{,}\mathbf{Y}_{\mathbf{s}}
\right)\)</span> and per serving cell <span
class="math inline">\(\mathbf{C}_{\mathbf{PDCCH}}^{\mathbf{max,}\mathbf{X}_{\mathbf{s}}\mathbf{,\mu}}\)</span></td>
</tr>
<tr>
<td><span class="math display">\[\mathbf{\mu}\]</span></td>
<td>(4, 1)</td>
<td>(4, 2)</td>
<td>(8, 1)</td>
<td>(8, 4)</td>
</tr>
<tr>
<td>5</td>
<td>32</td>
<td>32</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>6</td>
<td>16</td>
<td>16</td>
<td>32</td>
<td>32</td>
</tr>
</tbody>
</table>
<p>If a UE</p>
<p>- does not report <em>pdcch-BlindDetectionCA,
pdcch-BlindDetectionCA1</em>, <em>pdcch-BlindDetectionCA2</em>, or
<em>pdcch-BlindDetectionCA3</em>, or is not provided <em>BDFactorR</em>,
<span class="math inline">\(\gamma = R\)</span></p>
<p>- reports <em>pdcch-BlindDetectionCA</em>,
<em>pdcch-BlindDetectionCA1</em>, <em>pdcch-BlindDetectionCA2</em>, or
<em>pdcch-BlindDetectionCA3</em>, the UE can be indicated by
<em>BDFactorR</em> either <span class="math inline">\(\gamma =
1\)</span> or <span class="math inline">\(\gamma = R\)</span></p>
<p>If a UE is configured with <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL,}\mu} +
N_{\text{cells,1}}^{\text{DL,}\mu}\)</span> downlink cells for which the
UE is not provided <em>monitoringCapabilityConfig,</em> or is provided
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
and is not provided <em>CORESETPoolIndex</em>, with associated PDCCH
candidates monitored in the active DL BWPs of the scheduling cells using
SCS configuration <span class="math inline">\(\mu\)</span> where <span
class="math inline">\(\sum_{\mu = 0}^{3}\left(
N_{\text{cells,0}}^{\text{DL,}\mu} + \gamma \bullet
N_{\text{cells,1}}^{\text{DL,}\mu} \right) \leq
N_{\text{cells}}^{\text{cap}}\)</span>, the UE is not required to
monitor, on the active DL BWPs of the scheduling cells,</p>
<p>- more than <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,slot,}\mu} =
M_{\text{PDCCH}}^{\text{max,slot,}\mu}\)</span> PDCCH candidates or more
than <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,slot,}\mu} =
C_{\text{PDCCH}}^{\text{max,slot,}\mu}\)</span> non-overlapped CCEs per
slot for each scheduled cell when the scheduling cell is from the <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL,}\mu}\)</span>
downlink cells, or</p>
<p>- more than <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,slot,}\mu} = \gamma
\bullet M_{\text{PDCCH}}^{\text{max,slot,}\mu}\)</span> PDCCH candidates
or more than <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,slot,}\mu} = \gamma
\bullet C_{\text{PDCCH}}^{\text{max,slot,}\mu}\)</span> non-overlapped
CCEs per slot for each scheduled cell when the scheduling cell is from
the <span
class="math inline">\(N_{\text{cells,1}}^{\text{DL,}\mu}\)</span>
downlink cells</p>
<p>- more than <span
class="math inline">\(M_{\text{PDCCH}}^{\text{max,slot,}\mu}\)</span>
PDCCH candidates or more than <span
class="math inline">\(C_{\text{PDCCH}}^{\text{max,slot,}\mu}\)</span>
non-overlapped CCEs per slot for CORESETs with same
<em>coresetPoolIndex</em> value for each scheduled cell when the
scheduling cell is from the <span
class="math inline">\(N_{\text{cells,1}}^{\text{DL,}\mu}\)</span>
downlink cells</p>
<p><span class="math inline">\(N_{\text{cells}}^{\text{cap}}\)</span> is
replaced by <span
class="math inline">\(N_{\text{cells,r15}}^{\text{cap-r16}}\)</span>, if
a UE is configured with downlink cells for which the UE is provided both
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
and <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em>. <span
class="math inline">\(N_{\text{cells}}^{\text{cap}}\)</span> is replaced
by <span class="math inline">\(N_{\text{cells,
r15/r17}}^{\text{cap-r17}}\)</span>, if a UE is configured with downlink
cells for which the UE is provided both
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
and <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability.</em><span class="math inline">\(\
N_{\text{cells}}^{\text{cap}}\)</span> is replaced by <span
class="math inline">\(N_{\text{cells, r15/ \{r16, r17\}
}}^{\text{cap-r17}}\)</span>, if a UE is configured with downlink cells
for which the UE is provided both <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and <em>monitoringCapabilityConfig</em>
= <em>r16monitoringcapability</em> and
<em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em>.</p>
<p>If a UE</p>
<p>- is configured with <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL,}\mu} +
N_{\text{cells,1}}^{\text{DL,}\mu}\)</span> downlink cells for which the
UE is not provided <em>monitoringCapabilityConfig,</em> or is provided
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
and is not provided <em>coresetPoolIndex</em>,</p>
<p>- with associated PDCCH candidates monitored in the active DL BWPs of
the scheduling cell(s) using SCS configuration <span
class="math inline">\(\mu\)</span>, where <span
class="math inline">\(\sum_{\mu = 0}^{3}\left(
N_{\text{cells,0}}^{\text{DL,}\mu} + \gamma \bullet
N_{\text{cells,1}}^{\text{DL,}\mu} \right) &gt;
N_{\text{cells}}^{\text{cap}}\)</span>, and</p>
<p>- a DL BWP of an activated cell is the active DL BWP of the activated
cell, and a DL BWP of a deactivated cell is the DL BWP with index
provided by <em>firstActiveDownlinkBWP-Id</em> for the deactivated
cell,</p>
<p>the UE is not required to monitor more than <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,slot,}\mu} =
\left\lfloor N_{\text{cells}}^{\text{cap}} \cdot
M_{\text{PDCCH}}^{\text{max,slot,}\mu} \cdot \frac{\left(
N_{\text{cells,0}}^{\text{DL,}\mu} + \gamma \bullet
N_{\text{cells,1}}^{\text{DL,}\mu} \right)}{\sum_{j = 0}^{3}\left(
N_{\text{cells,0}}^{\text{DL,}j} + \gamma \bullet
N_{\text{cells,1}}^{\text{DL,}j} \right)} \right\rfloor\)</span> PDCCH
candidates or more than <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,slot,}\mu} =
\left\lfloor N_{\text{cells}}^{\text{cap}} \cdot
C_{\text{PDCCH}}^{\text{max,slot,}\mu} \cdot \frac{\left(
N_{\text{cells,0}}^{\text{DL,}\mu} + \gamma \bullet
N_{\text{cells,1}}^{\text{DL,}\mu} \right)}{\sum_{j = 0}^{3}\left(
N_{\text{cells,0}}^{\text{DL,}j} + \gamma \bullet
N_{\text{cells,1}}^{\text{DL,}j} \right)} \right\rfloor\)</span>
non-overlapped CCEs per slot on the active DL BWP(s) of scheduling
cell(s) from the <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL,}\mu} +
N_{\text{cells,1}}^{\text{DL,}\mu}\)</span> downlink cells. <span
class="math inline">\(N_{\text{cells}}^{\text{cap}}\)</span> is replaced
by <span class="math inline">\(N_{\text{cells,r15}}^{\text{cap-r16}}\
\)</span>if a UE is configured with downlink cells for which the UE is
provided both <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and <em>monitoringCapabilityConfig</em>
= <em>r16monitoringcapability</em>. <span
class="math inline">\(N_{\text{cells}}^{\text{cap}}\)</span> is replaced
by <span class="math inline">\(N_{\text{cells,
r15/r17}}^{\text{cap-r17}}\)</span>, if a UE is configured with downlink
cells for which the UE is provided both
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
and <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability.</em><span class="math inline">\(\
N_{\text{cells}}^{\text{cap}}\)</span> is replaced by <span
class="math inline">\(N_{\text{cells, r15/ \{r16, r17\}
}}^{\text{cap-r17}}\)</span>.If a UE is configured with downlink cells
for which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and <em>monitoringCapabilityConfig</em>
= <em>r16monitoringcapability</em> and
<em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em>.</p>
<p>For each scheduled cell from the <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL,}\mu}\)</span>
downlink cells, the UE is not required to monitor on the active DL BWP
with SCS configuration <span class="math inline">\(\mu\)</span> of the
scheduling cell more than <span class="math inline">\(\min\left(
M_{\text{PDCCH}}^{\text{max,slot,}\mu},M_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right)\)</span> PDCCH candidates or more than <span
class="math inline">\(\min\left(
C_{\text{PDCCH}}^{\text{max,slot,}\mu},C_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right)\)</span> non-overlapped CCEs per slot.</p>
<p>For each scheduled cell from the <span
class="math inline">\(N_{\text{cells,1}}^{\text{DL,}\mu}\)</span>
downlink cells, the UE is not required to monitor on the active DL BWP
with SCS configuration <span class="math inline">\(\mu\)</span> of the
scheduling cell</p>
<p>- more than <span class="math inline">\(\min\left( {\gamma \bullet
M}_{\text{PDCCH}}^{\text{max,slot,}\mu},M_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right)\)</span> PDCCH candidates or more than <span
class="math inline">\(\min\left( {\gamma \bullet
C}_{\text{PDCCH}}^{\text{max,slot,}\mu},C_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right)\)</span> non-overlapped CCEs per slot</p>
<p>- more than <span class="math inline">\(\min\left(
M_{\text{PDCCH}}^{\text{max,slot,}\mu},M_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right)\)</span> PDCCH candidates or more than <span
class="math inline">\(\min\left(
C_{\text{PDCCH}}^{\text{max,slot,}\mu},C_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right)\)</span> non-overlapped CCEs per slot for CORESETs with same
<em>coresetPoolIndex</em> value</p>
<p>If a UE is configured with <span
class="math inline">\(N_{cells,r16}^{DL,\mu}\)</span> downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> and with associated PDCCH candidates
monitored in the active DL BWPs of the scheduling cells using SCS
configuration <span class="math inline">\(\mu\)</span>, and with <span
class="math inline">\(N_{cells,r16}^{DL,(X,Y),\mu}\)</span> of the <span
class="math inline">\(N_{cells,r16}^{DL,\mu}\)</span> downlink cells
using combination <span class="math inline">\((X,Y)\)</span> for PDCCH
monitoring, where <span class="math inline">\(\sum_{\mu =
0}^{1}N_{cells,r16}^{DL,\mu} \leq
N_{\text{cells}}^{\text{cap-r16}}\)</span>, the UE is not required to
monitor, on the active DL BWP of the scheduling cell, more than <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,(X,Y),}\mu} =
M_{\text{PDCCH}}^{\text{max,(X,Y),}\mu}\)</span> PDCCH candidates or
more than <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,(X,Y),}\mu} =
C_{\text{PDCCH}}^{\text{max,(X,Y),}\mu}\)</span> non-overlapped CCEs per
span for each scheduled cell when the scheduling cell is from the <span
class="math inline">\(N_{cells,r16}^{DL,(X,Y),\mu}\)</span> downlink
cells. If a UE is configured with downlink cells for which the UE is
provided both <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and <em>monitoringCapabilityConfig</em>
= <em>r16monitoringcapability</em>, <span
class="math inline">\(N_{\text{cells}}^{\text{cap-r16}}\)</span> is
replaced by <span
class="math inline">\(N_{\text{cells,r16}}^{\text{cap-r16}}\)</span>. If
a UE is configured with downlink cells for which the UE is provided both
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
and <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability,</em> <span class="math inline">\(\
N_{\text{cells}}^{\text{cap}}\)</span> is replaced by <span
class="math inline">\(N_{\text{cells,
r16/r17}}^{\text{cap-r17}}\)</span><em>.</em><span
class="math inline">\(\ \)</span>If a UE is configured with downlink
cells for which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and <em>monitoringCapabilityConfig</em>
= <em>r16monitoringcapability</em> and
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability,</em>
<span class="math inline">\(\ N_{\text{cells}}^{\text{cap}}\)</span> is
replaced by <span class="math inline">\(N_{\text{cells, r16/ \{r15,
r17\} }}^{\text{cap-r17}}\)</span><em>.</em></p>
<p>If a UE is configured only with <span
class="math inline">\(N_{cells,r16}^{DL,\mu}\)</span> downlink cells for
which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> and with associated PDCCH candidates
monitored in the active DL BWPs of the scheduling cells using SCS
configuration <span class="math inline">\(\mu\)</span>, and with <span
class="math inline">\(N_{cells,r16}^{DL,(X,Y),\mu}\)</span> of the <span
class="math inline">\(N_{cells,r16}^{DL,\mu}\)</span> downlink cells
using combination <span class="math inline">\((X,Y)\)</span> for PDCCH
monitoring, where <span class="math inline">\(\sum_{\mu =
0}^{1}N_{cells,r16}^{DL,\mu} &gt;
N_{\text{cells}}^{\text{cap-r16}}\)</span>, a DL BWP of an activated
cell is the active DL BWP of the activated cell, and a DL BWP of a
deactivated cell is the DL BWP with index provided by
<em>firstActiveDownlinkBWP-Id</em> for the deactivated cell, the UE is
not required to monitor more than <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,(X,Y),}\mu} =
\left\lfloor N_{\text{cells}}^{\text{cap-r16}} \cdot
M_{\text{PDCCH}}^{\text{max,(X,Y),}\mu} \cdot
\frac{N_{cells,r16}^{DL,(X,Y),\mu}}{\sum_{j =
0}^{1}N_{cells,r16}^{DL,j}} \right\rfloor\)</span> PDCCH candidates or
more than <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,(X,Y),}\mu} =
\left\lfloor N_{\text{cells}}^{\text{cap-r16}} \cdot
C_{\text{PDCCH}}^{\text{max,(X,Y),}\mu} \cdot
\frac{N_{cells,r16}^{DL,(X,Y),\mu}}{\sum_{j =
0}^{1}N_{cells,r16}^{DL,j}} \right\rfloor\)</span> non-overlapped
CCEs</p>
<p>- per set of spans on the active DL BWP(s) of all scheduling cell(s)
from the <span
class="math inline">\(N_{cells,r16}^{DL,(X,Y),\mu}\)</span> downlink
cells within every <span class="math inline">\(X\)</span> symbols, if
the union of PDCCH monitoring occasions on all scheduling cells from the
<span class="math inline">\(N_{cells,r16}^{DL,(X,Y),\mu}\)</span>
downlink cells results to PDCCH monitoring according to the combination
<span class="math inline">\((X,Y)\)</span> and any pair of spans in the
set is within <span class="math inline">\(Y\)</span> symbols, where
first <span class="math inline">\(X\)</span> symbols start at a first
symbol with a PDCCH monitoring occasion and next <span
class="math inline">\(X\)</span> symbols start at a first symbol with a
PDCCH monitoring occasion that is not included in the first <span
class="math inline">\(X\)</span> symbols</p>
<p>- per set of spans across the active DL BWP(s) of all scheduling
cells from the <span
class="math inline">\(N_{cells,r16}^{DL,(X,Y),\mu}\)</span> downlink
cells, with at most one span per scheduling cell for each set of spans,
otherwise</p>
<p>where <span class="math inline">\(N_{cells,r16}^{DL,j}\)</span> is a
number of configured cells with associated PDCCH candidates monitored in
the active DL BWPs of the scheduling cells using SCS configuration <span
class="math inline">\(j\)</span>. If a UE is configured with downlink
cells for which the UE is provided both
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
and <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em>, <span
class="math inline">\(N_{\text{cells}}^{\text{cap-r16}}\)</span> is
replaced by <span
class="math inline">\(N_{\text{cells,r16}}^{\text{cap-r16}}\)</span>. If
a UE is configured with downlink cells for which the UE is provided both
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
and <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability,</em> <span class="math inline">\(\
N_{\text{cells}}^{\text{cap}}\)</span> is replaced by <span
class="math inline">\(N_{\text{cells,
r16/r17}}^{\text{cap-r17}}\)</span><em>.</em><span
class="math inline">\(\ \)</span>If a UE is configured with downlink
cells for which the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and <em>monitoringCapabilityConfig</em>
= <em>r16monitoringcapability</em> and
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability,</em>
<span class="math inline">\(\ N_{\text{cells}}^{\text{cap}}\)</span> is
replaced by <span class="math inline">\(N_{\text{cells, r16/ \{r15,
r17\} }}^{\text{cap-r17}}\)</span><em>.</em></p>
<p>For each scheduled cell from the <span
class="math inline">\(N_{cells,r16}^{DL,(X,Y),\mu}\)</span> downlink
cells using combination <span class="math inline">\((X,Y)\)</span>, the
UE is not required to monitor on the active DL BWP with SCS
configuration <span class="math inline">\(\mu\)</span> of the scheduling
cell, more than <span class="math inline">\(\min\left(
M_{PDCCH}^{max,(X,Y),\mu},M_{PDCCH}^{total,(X,Y),\mu} \right)\)</span>
PDCCH candidates or more than <span class="math inline">\(\min\left(
C_{PDCCH}^{max,(X,Y),\mu},C_{PDCCH}^{total,(X,Y),\mu} \right)\)</span>
non-overlapped CCEs per span.</p>
<p>A UE does not expect to be configured CSS sets, except for CSS sets
provided by <em>searchSpaceMCCH</em>, <em>searchSpaceMTCH</em> or by
<em>SearchSpace</em> in <em>pdcch-ConfigMulticast</em> for DCI formats
with CRC scrambled by G-RNTI or G-CS-RNTI, that result to corresponding
total, or per scheduled cell, numbers of monitored PDCCH candidates and
non-overlapped CCEs per slot, per group of <span
class="math inline">\(X_{s}\)</span> slots for a corresponding
combination <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span>, or per span that exceed the corresponding maximum
numbers per slot, or per group of <span
class="math inline">\(X_{s}\)</span> slots for a corresponding
combination <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span>, or per span, respectively.</p>
<p>For same cell scheduling or for cross-carrier scheduling, a UE does
not expect a number of PDCCH candidates, and a number of corresponding
non-overlapped CCEs per slot, or per group of <span
class="math inline">\(X_{s}\)</span> slots for a corresponding
combination <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span>, or per span, on a secondary cell to be larger than the
corresponding numbers that the UE is capable of monitoring on the
secondary cell per slot, or per group of <span
class="math inline">\(X_{s}\)</span> slots for a corresponding
combination <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span>, or per span, respectively. If a UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
for the primary cell, except the first span of each slot, the UE does
not expect a number of PDCCH candidates and a number of corresponding
non-overlapped CCEs per span on the primary cell to be larger than the
corresponding numbers that the UE is capable of monitoring on the
primary cell per span.</p>
<p>If a UE is configured with <span
class="math inline">\(N_{\text{cells,r17,0}}^{\text{DL,}\mu} +
N_{\text{cells,r17,1}}^{\text{DL,}\mu}\)</span> downlink cells for which
the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> and with associated PDCCH candidates
monitored in the active DL BWPs of the scheduling cells using SCS
configuration <span class="math inline">\(\mu\)</span>, and with <span
class="math inline">\(N_{\text{cells,r17,0}}^{\text{DL,}X_{s},\mu} +
N_{\text{cells,r17,1}}^{\text{DL,}X_{s},\mu}\)</span> of the <span
class="math inline">\(N_{\text{cells,r17,0}}^{\text{DL,}\mu} +
N_{\text{cells,r17,1}}^{\text{DL,}\mu}\)</span> downlink cells using any
combination <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span> for a group of <span
class="math inline">\(X_{s}\)</span> slots for PDCCH monitoring, where
<span class="math inline">\(\sum_{\mu = 5}^{6}\left(
N_{\text{cells,r17,0}}^{\text{DL},\mu} + {\gamma \bullet
N}_{\text{cells,r17,1}}^{\text{DL},\mu} \right) \leq
N_{\text{cells}}^{\text{cap-r17}}\)</span>, the UE is not required to
monitor, on the active DL BWP of the scheduling cell,</p>
<p>- more than <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,}X_{s}\text{,}\mu} =
M_{\text{PDCCH}}^{\text{max,}X_{s}\text{,}\mu}\)</span> PDCCH candidates
or more than <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,}X_{s}\text{,}\mu} =
C_{\text{PDCCH}}^{\text{max,}X_{s}\text{,}\mu}\)</span> non-overlapped
CCEs per group of <span class="math inline">\(X_{s}\)</span> slots for
each scheduled cell when the scheduling cell is from the <span
class="math inline">\(N_{cells,r17,0}^{DL,X_{s},\mu}\)</span> downlink
cells, or</p>
<p>- more than <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,}X_{s}\text{,}\mu} =
{\gamma \bullet M}_{\text{PDCCH}}^{\text{max,}X_{s}\text{,}\mu}\)</span>
PDCCH candidates or more than <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,}X_{s}\text{,}\mu} =
{\gamma \bullet C}_{\text{PDCCH}}^{\text{max,}X_{s}\text{,}\mu}\)</span>
non-overlapped CCEs per group of <span
class="math inline">\(X_{s}\)</span> slots for each scheduled cell when
the scheduling cell is from the <span
class="math inline">\(N_{cells,r17,1}^{DL,X_{s},\mu}\)</span> downlink
cells, or</p>
<p>- more than <span
class="math inline">\(M_{\text{PDCCH}}^{\text{max,}X_{s}\text{,}\mu}\)</span>
PDCCH candidates or more than <span
class="math inline">\(C_{\text{PDCCH}}^{\text{max,}X_{s}\text{,}\mu}\)</span>
non-overlapped CCEs per group of <span
class="math inline">\(X_{s}\)</span> slots for CORESETs with same
<em>coresetPoolIndex</em> for each scheduled cell when the scheduling
cell is from the <span
class="math inline">\(N_{cells,r17,1}^{DL,X_{s},\mu}\)</span> downlink
cells</p>
<p>If the UE is configured with downlink cells for which the UE is
provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and downlink cells for which the UE is
provided <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> for the active DL BWPs, <span
class="math inline">\(N_{\text{cells}}^{\text{cap-r17}}\)</span> is
replaced by <span
class="math inline">\(N_{\text{cells,r17/r15}}^{\text{cap-r17}}\)</span>.
If the UE is configured with downlink cells for which the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
and downlink cells for which the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for the active DL BWPs, <span
class="math inline">\(N_{\text{cells}}^{\text{cap-r17}}\)</span> is
replaced by <span
class="math inline">\(N_{\text{cells,r17/r16}}^{\text{cap-r17}}\)</span>.
If the UE is configured with downlink cells for which the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
and downlink cells for which the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
and downlink cells for which the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for the active DL BWPs, <span
class="math inline">\(N_{\text{cells}}^{\text{cap-r17}}\)</span> is
replaced by <span
class="math inline">\(N_{\text{cells,r17/\{r15,r16\}}}^{\text{cap-r17}}\)</span>.
If, for one or more of the cells, the UE is provided with
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>,
<span class="math inline">\(\gamma = 1\)</span>.</p>
<p>If a UE is configured <span
class="math inline">\(N_{\text{cells,r17,0}}^{\text{DL,}\mu} +
N_{\text{cells,r17,1}}^{\text{DL,}\mu}\)</span> downlink cells for which
the UE is provided <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> and with associated PDCCH candidates
monitored in the active DL BWPs of the scheduling cells using SCS
configuration <span class="math inline">\(\mu\)</span>, and with <span
class="math inline">\(N_{\text{cells,r17,0}}^{\text{DL,}X_{s},\mu} +
N_{\text{cells,r17,1}}^{\text{DL,}X_{s},\mu}\)</span> of the <span
class="math inline">\(N_{\text{cells,r17,0}}^{\text{DL,}\mu} +
N_{\text{cells,r17,1}}^{\text{DL,}\mu}\)</span> downlink cells using any
combination <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span> for a group of <span
class="math inline">\(X_{s}\)</span> slots for PDCCH monitoring, where
<span class="math inline">\(\sum_{\mu = 5}^{6}\left(
N_{\text{cells,r17,0}}^{\text{DL},\mu} + {\gamma \bullet
N}_{\text{cells,r17,1}}^{\text{DL},\mu} \right) &gt;
N_{\text{cells}}^{\text{cap-r17}}\)</span>, a DL BWP of an activated
cell is the active DL BWP of the activated cell, and a DL BWP of a
deactivated cell is the DL BWP with index provided by
<em>firstActiveDownlinkBWP-Id</em> for the deactivated cell, the UE is
not required to monitor more than <span
class="math inline">\(M_{PDCCH}^{total,X_{s},\mu} = \left\lfloor
N_{\text{cells}}^{\text{cap-r17}} \cdot M_{PDCCH}^{max,X_{s},\mu} \cdot
\frac{\left( N_{\text{cells,r17,0}}^{\text{DL,}X_{s},\mu} + {\gamma
\bullet N}_{\text{cells,r17,1}}^{\text{DL,}X_{s},\mu} \right)}{\sum_{j =
5}^{6}\left( N_{\text{cells,r17,0}}^{\text{DL},j} + {\gamma \bullet
N}_{\text{cells,r17,1}}^{\text{DL},j} \right)} \right\rfloor\)</span>
PDCCH candidates, or more than <span
class="math inline">\(C_{PDCCH}^{total,X_{s},\mu} = \left\lfloor
N_{\text{cells}}^{\text{cap-r17}} \cdot C_{PDCCH}^{max,X_{s},\mu} \cdot
\frac{\left( N_{\text{cells,r17,0}}^{\text{DL,}X_{s},\mu} + {\gamma
\bullet N}_{\text{cells,r17,1}}^{\text{DL,}X_{s},\mu} \right)}{\sum_{j =
5}^{6}\left( N_{\text{cells,r17,0}}^{\text{DL},j} + {\gamma \bullet
N}_{\text{cells,r17,1}}^{\text{DL},j} \right)} \right\rfloor\)</span>
non-overlapped CCEs, per group of <span
class="math inline">\(X_{s}\)</span> slots on the active DL BWP(s) of
scheduling cell(s) from the <span
class="math inline">\(N_{\text{cells,r17,0}}^{\text{DL,}X_{s},\mu} +
N_{\text{cells,r17,1}}^{\text{DL,}X_{s},\mu}\)</span> downlink cells
where <span class="math inline">\(N_{\text{cells,r17,0}}^{\text{DL},j} +
N_{\text{cells,r17,1}}^{\text{DL},j}\)</span> is a number of configured
cells with associated PDCCH candidates monitored in the active DL BWPs
of the scheduling cells using SCS configuration <span
class="math inline">\(j\)</span>.</p>
<p>If the UE is configured with downlink cells for which the UE is
provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> and downlink cells for which the UE is
provided <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> for the active DL BWPs, <span
class="math inline">\(N_{\text{cells}}^{\text{cap-r17}}\)</span> is
replaced by <span
class="math inline">\(N_{\text{cells,r17/r15}}^{\text{cap-r17}}\)</span>.
If the UE is configured with downlink cells for which the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
and downlink cells for which the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for the active DL BWPs, <span
class="math inline">\(N_{\text{cells}}^{\text{cap-r17}}\)</span> is
replaced by <span
class="math inline">\(N_{\text{cells,r17/r16}}^{\text{cap-r17}}\)</span>.
If the UE is configured with downlink cells for which the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
and downlink cells for which the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
and downlink cells for which the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for the active DL BWPs, <span
class="math inline">\(N_{\text{cells}}^{\text{cap-r17}}\)</span> is
replaced by <span
class="math inline">\(N_{\text{cells,r17/\{r15,r16\}}}^{\text{cap-r17}}\)</span>.
If, for one or more of the cells, the UE is provided with
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>,
<span class="math inline">\(\gamma = 1\)</span>.</p>
<p>For each scheduled cell from the <span
class="math inline">\(N_{cells,r17,0}^{DL,X_{s},\mu}\)</span> downlink
cells using any combination <span class="math inline">\(\left(
X_{s},Y_{s} \right)\)</span> for a group of <span
class="math inline">\(X_{s}\)</span> slots, the UE is not required to
monitor on the active DL BWP with SCS configuration <span
class="math inline">\(\mu\)</span> of the scheduling cell, more than
<span class="math inline">\(\min\left(
M_{PDCCH}^{max,X_{s},\mu},M_{PDCCH}^{total,X_{s},\mu} \right)\)</span>
PDCCH candidates or more than <span class="math inline">\(\min\left(
C_{PDCCH}^{max,X_{s},\mu},C_{PDCCH}^{total,X_{s},\mu} \right)\)</span>
non-overlapped CCEs per group of <span
class="math inline">\(X_{s}\)</span> slots.</p>
<p>For each scheduled cell from the <span
class="math inline">\(N_{cells,r17,1}^{DL,X_{s},\mu}\)</span> downlink
cells using any combination <span class="math inline">\(\left(
X_{s},Y_{s} \right)\)</span> for a group of <span
class="math inline">\(X_{s}\)</span> slots, the UE is not required to
monitor on the active DL BWP with SCS configuration <span
class="math inline">\(\mu\)</span> of the scheduling cell,</p>
<p>- more than <span class="math inline">\(\min\left( {\gamma \bullet
M}_{PDCCH}^{max,X_{s},\mu},M_{PDCCH}^{total,X_{s},\mu} \right)\)</span>
PDCCH candidates or more than <span class="math inline">\(\min\left(
{\gamma \bullet C}_{PDCCH}^{max,X_{s},\mu},C_{PDCCH}^{total,X_{s},\mu}
\right)\)</span> non-overlapped CCEs per group of <span
class="math inline">\(X_{s}\)</span> slots</p>
<p>- more than <span class="math inline">\(\min\left(
M_{PDCCH}^{max,X_{s},\mu},M_{PDCCH}^{total,X_{s},\mu} \right)\)</span>
PDCCH candidates or more than <span class="math inline">\(\min\left(
C_{PDCCH}^{max,X_{s},\mu},C_{PDCCH}^{total,X_{s},\mu} \right)\)</span>
non-overlapped CCEs per group of <span
class="math inline">\(X_{s}\)</span> slots for CORESETs with the same
<em>coresetPoolIndex</em> value.</p>
<p>For cross-carrier scheduling, the number of PDCCH candidates for
monitoring and the number of non-overlapped CCEs per span or per slot or
per group of <span class="math inline">\(X_{s}\)</span> slots are
separately counted for each scheduled cell.</p>
<p>The UE allocates PDCCH candidates for monitoring to USS sets for the
primary cell having an active DL BWP with SCS configuration <span
class="math inline">\(\mu\)</span> in a slot if the UE is not provided
<em>monitoringCapabilityConfig</em> for the primary cell or if the UE is
provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> for the primary cell, or in the first
span of each slot if the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
for the primary cell, or in a group of <span
class="math inline">\(X_{s}\)</span> slots for a corresponding
combination <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span> if the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for the primary cell, according to the following pseudocode.</p>
<p>If for the USS sets for scheduling on the primary cell the UE is not
provided <em>coresetPoolIndex</em> for first CORESETs, or is provided
<em>coresetPoolIndex</em> with value 0 for first CORESETs, and is
provided <em>coresetPoolIndex</em> with value 1 for second CORESETs, and
if <span class="math inline">\(\min\left( {\gamma \bullet
M}_{\text{PDCCH}}^{\text{max,slot,}\mu},M_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right) &gt; \min\left(
M_{\text{PDCCH}}^{\text{max,slot,}\mu},M_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right)\)</span> or <span class="math inline">\(\min\left( {\gamma
\bullet
C}_{\text{PDCCH}}^{\text{max,slot,}\mu},C_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right) &gt; \min\left(
C_{\text{PDCCH}}^{\text{max,slot,}\mu},C_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right)\)</span>, the following pseudocode applies only to USS sets
associated with the first CORESETs. A UE does not expect to monitor
PDCCH in a USS set without allocated PDCCH candidates for
monitoring.</p>
<p>In the following pseudocode, if the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r16monitoringcapability</em>
for the primary cell,<span class="math inline">\(\
M_{\text{PDCCH}}^{\text{max,slot,}\mu}\ \)</span>and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{max,slot,}\mu}\
\)</span>are replaced by <span
class="math inline">\(M_{\text{PDCCH}}^{\text{max,(X,Y),}\mu}\
\)</span>and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{max,(X,Y),}\mu}\)</span>
respectively, and <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,slot,}\mu}\
\)</span>and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,slot,}\mu}\
\)</span>are replaced by <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,(X,Y),}\mu}\
\)</span>and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,(X,Y),}\mu}\)</span>
respectively.</p>
<p>In the following pseudocode, if the UE is provided
<em>monitoringCapabilityConfig</em> = <em>r17monitoringcapability</em>
for the primary cell,<span class="math inline">\(\
M_{\text{PDCCH}}^{\text{max,slot,}\mu}\ \)</span>and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{max,slot,}\mu}\
\)</span>are replaced by <span
class="math inline">\(M_{\text{PDCCH}}^{\text{max,}X_{s}\text{,}\mu}\
\)</span>and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{max,}X_{s}\text{,}\mu}\)</span>
respectively, and <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,slot,}\mu}\
\)</span>and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,slot,}\mu}\
\)</span>are replaced by <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,}X_{s}\text{,}\mu}\
\)</span>and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,}X_{s}\text{,}\mu}\)</span>
respectively.</p>
<p>For all search space sets that a UE monitors PDCCH on the primary
cell within a slot <span class="math inline">\(n\)</span>, or within a
group of <span class="math inline">\(X_{s}\)</span> slots for a
corresponding combination <span class="math inline">\(\left( X_{s},Y_{s}
\right)\)</span>, or within a span in slot <span
class="math inline">\(n\)</span>, denote by <span
class="math inline">\(S_{css}\)</span> a set of CSS sets, except for CSS
sets provided by <em>searchSpaceMCCH</em>, <em>searchSpaceMTCH</em> or
by <em>SearchSpace</em> in <em>pdcch-ConfigMulticast</em> for DCI
formats with CRC scrambled by G-RNTI or G-CS-RNTI, with cardinality of
<span class="math inline">\(I_{css}\)</span> and by <span
class="math inline">\(S_{uss}\)</span> a set of USS sets and CSS sets
provided by <em>searchSpaceMCCH</em>, <em>searchSpaceMTCH</em> or by
<em>SearchSpace</em> in <em>pdcch-ConfigMulticast</em> for DCI formats
with CRC scrambled by G-RNTI or G-CS-RNTI with cardinality of <span
class="math inline">\(J_{uss}\)</span> for scheduling on the primary
cell. The location of search space sets <span
class="math inline">\(s_{j}\)</span>, <span class="math inline">\(0 \leq
j &lt; J_{uss}\)</span>, in <span class="math inline">\(S_{uss}\)</span>
is according to an ascending order of the search space set index.</p>
<p>Denote by <span class="math inline">\(M_{S_{css}(i)}^{(L)}\)</span>,
<span class="math inline">\(0 \leq i &lt; I_{css}\)</span>, the number
of counted PDCCH candidates for monitoring for CSS set <span
class="math inline">\(S_{css}(i)\)</span> and by <span
class="math inline">\(M_{S_{uss}(j)}^{(L)}\)</span>, <span
class="math inline">\(0 \leq j &lt; J_{uss}\)</span>, the number of
counted PDCCH candidates for monitoring for search space set <span
class="math inline">\(S_{uss}(j)\)</span>. If a UE indicates
<em>numBD-twoPDCCH-r17</em> with value of 3 and is provided
<em>searchSpaceLinkingId</em> with same value for search space sets
<span class="math inline">\(s_{j}\)</span> and <span
class="math inline">\(s_{i}\)</span>, with <span
class="math inline">\(s_{i} &lt; s_{j}\)</span>, set <span
class="math inline">\(M_{S_{css}(j)}^{(L)} = 2{\bullet
M}_{S_{css}(j)}^{(L)}\)</span> if <span
class="math inline">\(s_{i}\)</span> and <span
class="math inline">\(s_{j}\)</span> are CSS sets or set <span
class="math inline">\(M_{S_{uss}(j)}^{(L)} = 2 \bullet
M_{S_{uss}(j)}^{(L)}\)</span> if <span
class="math inline">\(s_{i}\)</span> and <span
class="math inline">\(s_{j}\)</span> are USS sets.</p>
<p>For the CSS sets in <span class="math inline">\(S_{css}\)</span>, a
UE monitors <span class="math inline">\(M_{PDCCH}^{css} = \sum_{i =
0}^{I_{css} - 1}{\sum_{L}^{}M_{S_{css}(i)}^{(L)}}\)</span> PDCCH
candidates requiring a total of <span
class="math inline">\(C_{PDCCH}^{css}\)</span> non-overlapping CCEs in a
slot, of in group of <span class="math inline">\(X_{s}\)</span> slots
for a corresponding combination <span class="math inline">\(\left(
X_{s},Y_{s} \right)\)</span>, or in a span.</p>
<p>Denote by <span class="math inline">\(V_{CCE}\left( S_{uss}(j)
\right)\)</span> the set of non-overlapping CCEs for search space set
<span class="math inline">\(S_{uss}(j)\)</span> and by <span
class="math inline">\(\text{C}\left( V_{CCE}\left( S_{uss}(j) \right)
\right)\)</span>; the cardinality of <span
class="math inline">\(V_{CCE}\left( S_{uss}(j) \right)\)</span> where a
UE determines the non-overlapping CCEs for search space set <span
class="math inline">\(S_{uss}(j)\)</span> considering the allocated
PDCCH candidates for monitoring for the CSS sets in <span
class="math inline">\(S_{css}\)</span> and the allocated PDCCH
candidates for monitoring for all search space sets <span
class="math inline">\(S_{uss}(k)\)</span>, <span class="math inline">\(0
\leq k \leq j\)</span>.</p>
<p>Set <span class="math inline">\(M_{PDCCH}^{uss} = \min\left(
M_{\text{PDCCH}}^{\text{max,slot,}\mu},M_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right) - M_{PDCCH}^{css}\)</span></p>
<p>Set <span class="math inline">\(C_{PDCCH}^{uss} = \min\left(
C_{\text{PDCCH}}^{\text{max,slot,}\mu},C_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right) - C_{PDCCH}^{css}\)</span></p>
<p>Set <span class="math inline">\(j = 0\)</span></p>
<p>while <span class="math inline">\(\sum_{L}^{}M_{S_{uss}(j)}^{(L)}
\leq M_{PDCCH}^{uss}\)</span> AND <span
class="math inline">\(\text{C}\left( V_{CCE}\left( S_{uss}(j) \right)
\right) \leq C_{PDCCH}^{uss}\)</span></p>
<p>allocate <span
class="math inline">\(\sum_{L}^{}M_{S_{uss}(j)}^{(L)}\)</span> PDCCH
candidates for monitoring to search space set <span
class="math inline">\(S_{uss}(j)\)</span></p>
<p><span class="math inline">\(M_{PDCCH}^{uss} = M_{PDCCH}^{uss} -
\sum_{L}^{}M_{S_{uss}(j)}^{(L)}\)</span>;</p>
<p><span class="math inline">\(C_{PDCCH}^{uss} = C_{PDCCH}^{uss} -
\text{C}\left( V_{CCE}\left( S_{uss}(j) \right) \right)\)</span>;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p>end while</p>
<p>If a UE</p>
<p>- is configured for single cell operation or for operation with
carrier aggregation in a same frequency band, and</p>
<p>- monitors PDCCH candidates in overlapping PDCCH monitoring occasions
in multiple CORESETs that have been configured with same or different
<em>qcl-Type</em> set to 'typeD' properties on active DL BWP(s) of one
or more cells</p>
<p>the UE monitors PDCCHs only in a CORESET, and in any other CORESET
from the multiple CORESETs that have been configured with
<em>qcl-Type</em> set to same 'typeD' properties as the CORESET, on the
active DL BWP of a cell from the one or more cells</p>
<p>- the CORESET corresponds to the CSS set with the lowest index in the
cell with the lowest index containing CSS, if any; otherwise, to the USS
set with the lowest index in the cell with lowest index</p>
<p>- the lowest USS set index is determined over all USS sets with at
least one PDCCH candidate in overlapping PDCCH monitoring occasions</p>
<p>If a UE</p>
<p>- is configured for single cell operation or for operation with
carrier aggregation in a same frequency band,</p>
<p>- monitors PDCCH candidates in overlapping PDCCH monitoring occasions
in multiple CORESETs that have been configured with same or different
<em>qcl-Type</em> set to 'typeD' properties on active DL BWP(s) of one
or more cells, and</p>
<p>- is provided <em>twoQCLTypeDforPDCCHRepetition</em></p>
<p>the UE monitors PDCCHs only in a first CORESET with <em>qcl-Type</em>
set to first 'typeD' properties and, if any, in a second CORESET with
<em>qcl-Type</em> set to second 'typeD' properties that are different
than the first 'typeD' properties, and in any other CORESET from the
multiple CORESETs with corresponding <em>qcl-Type</em> set to either the
first 'typeD' properties or to the second 'typeD' properties</p>
<p>- the first CORESET corresponds to the CSS set with the lowest index
in the cell with the lowest index containing CSS sets, if any;
otherwise, to the USS set with the lowest index in the cell with lowest
index</p>
<p>- excluding CSS sets and USS sets associated with CORESETs with
<em>qcl-Type</em> set to first 'typeD' properties, the second CORESET
corresponds to the CSS set with the lowest index in the cell with the
lowest index containing CSS sets, if any; otherwise, to the USS set with
the lowest index in the cell with lowest index, where the CSS set or the
USS set includes <em>searchSpaceLinkingId</em> with same value as any
CSS set or any USS set associated with CORESETs with <em>qcl-Type</em>
set to first 'typeD' properties</p>
<p>- the lowest USS set index is determined over all USS sets with at
least one PDCCH candidate in overlapping PDCCH monitoring occasions</p>
<p>If a UE</p>
<p>- is configured for single cell operation or for operation with
carrier aggregation in a same frequency band,</p>
<p>- monitors PDCCH candidates in overlapping PDCCH monitoring occasions
in multiple CORESETs that have been configured with same or different
<em>qcl-Type</em> set to 'typeD' properties on active DL BWP(s) of one
or more cells,</p>
<p>- one or more CORESETs have two activated TCI states, and</p>
<p>- reports <em>sfn-QCL-TypeD-Collision-twoTCI</em></p>
<p>the UE monitors PDCCHs only in a CORESET with a first
<em>qcl-Type</em> set to first 'typeD' properties and, if any, a second
<em>qcl-Type</em> set to second 'typeD' properties that are different
than the first 'typeD' properties, and in any other CORESET from the
multiple CORESETs with corresponding <em>qcl-Type</em> set to the first
'typeD' properties and/or to the second 'typeD' properties</p>
<p>- the CORESET corresponds to the CSS set with the lowest index in the
cell with the lowest index containing CSS, if any; otherwise, to the USS
set with the lowest index in the cell with lowest index</p>
<p>- the lowest USS set index is determined over all USS sets with at
least one PDCCH candidate in overlapping PDCCH monitoring occasions</p>
<p>For the purpose of determining the CORESET, a SS/PBCH block is
considered to have different QCL 'typeD' properties than a CSI-RS.</p>
<p>For the purpose of determining the CORESET, a first CSI-RS associated
with a SS/PBCH block in a first cell and a second CSI-RS in a second
cell that is also associated with the SS/PBCH block are assumed to have
same QCL 'typeD' properties.</p>
<p>The allocation of non-overlapping CCEs and of PDCCH candidates for
PDCCH monitoring is according to all search space sets associated with
the multiple CORESETs on the active DL BWP(s) of the one or more
cells.</p>
<p>The number of active TCI states is determined from the multiple
CORESETs.</p>
<p>If a UE</p>
<p>- is configured for single cell operation or for operation with
carrier aggregation in a same frequency band, and</p>
<p>- monitors PDCCH candidates in overlapping PDCCH monitoring occasions
in multiple CORESETs where none of the CORESETs has TCI-states
configured with <em>qcl-Type</em> set to 'typeD',</p>
<p>the UE is required to monitor PDCCH candidates in overlapping PDCCH
monitoring occasions for search space sets associated with different
CORESETs.</p>
<p>For a scheduled cell and at any time, if a UE is provided a C-RNTI,
the UE expects to have received at most 16 PDCCHs for DCI formats with
CRC scrambled by C-RNTI, CS-RNTI, MCS-C-RNTI, G-RNTI for multicast, or
G-CS-RNTI scheduling 16 PDSCH receptions for which the UE has not
received any corresponding PDSCH symbol and at most 16 PDCCHs for DCI
formats with CRC scrambled by C-RNTI, CS-RNTI, or MCS-C-RNTI scheduling
16 PUSCH transmissions for which the UE has not transmitted any
corresponding PUSCH symbol.</p>
<p>If a UE is not provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> for any serving cell, and</p>
<p>- is not configured for NR-DC operation and indicates through
<em>pdcch-BlindDetectionCA</em> a capability to monitor PDCCH candidates
for <span class="math inline">\(N_{cells}^{cap} \geq 4\)</span> downlink
cells and the UE is configured with <span
class="math inline">\(N_{cells}^{DL} &gt; 4\)</span> downlink cells or
<span class="math inline">\(N_{cells}^{UL} &gt; 4\)</span> uplink cells,
or</p>
<p>- is configured with NR-DC operation and for a cell group with <span
class="math inline">\(N_{cells}^{DL}\)</span> downlink cells or <span
class="math inline">\(N_{cells}^{UL}\)</span> uplink cells</p>
<p>the UE expects to have respectively received at most <span
class="math inline">\({16 \bullet N}_{cells}^{cap}\)</span> PDCCHs
for</p>
<p>- DCI formats with CRC scrambled by a C-RNTI, or a CS-RNTI, or a
MCS-C-RNTI, or a G-RNTI for multicast, or a G-CS-RNTI scheduling <span
class="math inline">\({16 \bullet N}_{cells}^{cap}\)</span> PDSCH
receptions for which the UE has not received any corresponding PDSCH
symbol over all <span class="math inline">\(N_{cells}^{DL}\)</span>
downlink cells</p>
<p>- DCI formats with CRC scrambled by a C-RNTI, or a CS-RNTI, or a
MCS-C-RNTI scheduling <span class="math inline">\({16 \bullet
N}_{cells}^{cap}\)</span> PUSCH transmissions for which the UE has not
transmitted any corresponding PUSCH symbol over all <span
class="math inline">\(N_{cells}^{UL}\)</span> uplink cells</p>
<p>If a UE is provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> for all serving cells<em>,</em> and</p>
<p>- is not configured for NR-DC operation and indicates through
<em>pdcch-MonitoringCA</em> a capability to monitor PDCCH candidates for
<span class="math inline">\(N_{cells}^{cap - r16} \geq 2\)</span>
downlink cells and the UE is configured with <span
class="math inline">\(N_{cells}^{DL} &gt; 2\)</span> downlink cells or
<span class="math inline">\(N_{cells}^{UL} &gt; 2\)</span> uplink cells,
or</p>
<p>- is configured with NR-DC operation and for a cell group with <span
class="math inline">\(N_{cells}^{DL}\)</span> downlink cells or <span
class="math inline">\(N_{cells}^{UL}\)</span> uplink cells</p>
<p>the UE expects to have respectively received at most <span
class="math inline">\({16 \bullet N}_{cells}^{cap - r16}\)</span> PDCCHs
for</p>
<p>- DCI formats with CRC scrambled by a C-RNTI, or a CS-RNTI, or a
MCS-C-RNTI, or a G-RNTI for multicast, or a G-CS-RNTI scheduling <span
class="math inline">\({16 \bullet N}_{cells}^{cap - r16}\)</span> PDSCH
receptions for which the UE has not received any corresponding PDSCH
symbol over all <span class="math inline">\(N_{cells}^{DL}\)</span>
downlink cells</p>
<p>- DCI formats with CRC scrambled by a C-RNTI, or a CS-RNTI, or a
MCS-C-RNTI scheduling <span class="math inline">\({16 \bullet
N}_{cells}^{cap - r16}\)</span> PUSCH transmissions for which the UE has
not transmitted any corresponding PUSCH symbol over all <span
class="math inline">\(N_{cells}^{UL}\)</span> uplink cells.</p>
<p>If a UE is provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> for at least one serving cell and is
not provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> for at least one serving cell, and</p>
<p>- is not configured for NR-DC operation, and indicates a capability
to monitor PDCCH candidates for <span
class="math inline">\(N_{cells,r15}^{cap - r16} \geq 1\)</span> downlink
cells and <span class="math inline">\(N_{cells,r16}^{cap - r16} \geq
1\)</span> downlink cells, and the UE is configured with <span
class="math inline">\(N_{cells}^{DL} &gt; 1\)</span> downlink cells or
<span class="math inline">\(N_{cells}^{UL} &gt; 1\)</span> uplink cells,
or</p>
<p>- is configured with NR-DC operation and for a cell group with <span
class="math inline">\(N_{cells}^{DL}\)</span> downlink cells or <span
class="math inline">\(N_{cells}^{UL}\)</span> uplink cells</p>
<p>the UE expects to have respectively received</p>
<p>- at most <span class="math inline">\({16 \bullet N}_{cells,r15}^{cap
- r16}\)</span> PDCCHs for DCI formats with CRC scrambled by a C-RNTI,
or a CS-RNTI, or a MCS-C-RNTI, or a G-RNTI for multicast, or a G-CS-RNTI
scheduling <span class="math inline">\({16 \bullet N}_{cells,r15}^{cap -
r16}\)</span> PDSCH receptions for which the UE has not received any
corresponding PDSCH symbol over all serving cells that are not provided
<em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet N}_{cells,r15}^{cap
- r16}\)</span> PDCCHs for DCI formats with CRC scrambled by a C-RNTI,
or a CS-RNTI, or a MCS-C-RNTI scheduling <span class="math inline">\({16
\bullet N}_{cells,r15}^{cap - r16}\)</span> PUSCH transmissions for
which the UE has not transmitted any corresponding PUSCH symbol over all
serving cells that are not provided <em>monitoringCapabilityConfig</em>
= <em>r16monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet N}_{cells,r16}^{cap
- r16}\)</span> PDCCHs for DCI formats with CRC scrambled by a C-RNTI,
or a CS-RNTI, or a MCS-C-RNTI, or a G-RNTI for multicast, or a G-CS-RNTI
scheduling <span class="math inline">\({16 \bullet N}_{cells,r16}^{cap -
r16}\)</span> PDSCH receptions for which the UE has not received any
corresponding PDSCH symbol over all serving cells that are provided
<em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet N}_{cells,r16}^{cap
- r16}\)</span> PDCCHs for DCI formats with CRC scrambled by a C-RNTI,
or a CS-RNTI, or a MCS-C-RNTI scheduling <span class="math inline">\({16
\bullet N}_{cells,r16}^{cap - r16}\)</span> PUSCH transmissions for
which the UE has not transmitted any corresponding PUSCH symbol over all
serving cells that are provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em></p>
<p>If a UE is provided serving cells with SCS configuration <span
class="math inline">\(\mu \in \left\{ 5,\ 6 \right\}\)</span> for the
active DL BWP, is not configured for NR-DC operation and indicates
through <em>pdcch-MonitoringCA</em> a capability to monitor PDCCH
candidates for <span class="math inline">\(N_{cells}^{cap - r17} \geq
4\)</span> downlink cells and the UE is configured with <span
class="math inline">\(N_{cells}^{DL} &gt; 4\)</span> downlink cells or
<span class="math inline">\(N_{cells}^{UL} &gt; 4\)</span> uplink cells,
the UE expects to have respectively received at most <span
class="math inline">\({16 \bullet N}_{cells}^{cap - r17}\)</span> PDCCHs
for</p>
<p>- DCI formats with CRC scrambled by a C-RNTI, or a CS-RNTI, or a
MCS-C-RNTI, or a G-RNTI for multicast, or a G-CS-RNTI scheduling <span
class="math inline">\({16 \bullet N}_{cells}^{cap - r17}\)</span> PDSCH
receptions for which the UE has not received any corresponding PDSCH
symbol over all <span class="math inline">\(N_{cells}^{DL}\)</span>
downlink cells</p>
<p>- DCI formats with CRC scrambled by a C-RNTI, or a CS-RNTI, or a
MCS-C-RNTI scheduling <span class="math inline">\({16 \bullet
N}_{cells}^{cap - r17}\)</span> PUSCH transmissions for which the UE has
not transmitted any corresponding PUSCH symbol over all <span
class="math inline">\(N_{cells}^{UL}\)</span> uplink cells.</p>
<p>If a UE is provided <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> for at least one serving cell, is
provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> for at least one serving cell, is not
provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> for any serving cell, is not configured
for NR-DC operation, indicates a capability to monitor PDCCH candidates
for <span class="math inline">\(N_{cells,r15/r17}^{cap - r17} \geq
1\)</span> downlink cells and <span
class="math inline">\(N_{cells,r17/r15}^{cap - r17} \geq 1\)</span>
downlink cells, and UE is configured with <span
class="math inline">\(N_{cells}^{DL} &gt; 1\)</span> downlink cell or
<span class="math inline">\(N_{cells}^{UL} &gt; 1\)</span> uplink cells,
the UE expects to have respectively received</p>
<p>- at most <span class="math inline">\({16 \bullet
N}_{cells,r15/r17}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI, or a G-RNTI for
multicast, or a G-CS-RNTI scheduling <span class="math inline">\({16
\bullet N}_{cells,r15/r17}^{cap - r17}\)</span> PDSCH receptions for
which the UE has not received any corresponding PDSCH symbol over all
serving cells that are provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet
N}_{cells,r15/r17}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI scheduling <span
class="math inline">\({16 \bullet N}_{cells,r15/r17}^{cap -
r17}\)</span> PUSCH transmissions for which the UE has not transmitted
any corresponding PUSCH symbol over all serving cells that are provided
<em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet
N}_{cells,r17/r15}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI, or a G-RNTI for
multicast, or a G-CS-RNTI scheduling <span class="math inline">\({16
\bullet N}_{cells,r17/r15}^{cap - r17}\)</span> PDSCH receptions for
which the UE has not received any corresponding PDSCH symbol over all
serving cells with <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet
N}_{cells,r17/r15}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI scheduling <span
class="math inline">\({16 \bullet N}_{cells,r17/r15}^{cap -
r17}\)</span> PUSCH transmissions for which the UE has not transmitted
any corresponding PUSCH symbol over all serving cells with
<em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em></p>
<p>If a UE is provided <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> for at least one serving cell, is
provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> for at least one serving cell, is not
provided <em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em> for any serving cell, is not configured
for NR-DC operation, indicates a capability to monitor PDCCH candidates
for <span class="math inline">\(N_{cells,r16/r17}^{cap - r17} \geq
1\)</span> downlink cells and <span
class="math inline">\(N_{cells,r17/r16}^{cap - r17} \geq 1\)</span>
downlink cells, and the UE is configured with <span
class="math inline">\(N_{cells}^{DL} &gt; 1\)</span> downlink cells or
<span class="math inline">\(N_{cells}^{UL} &gt; 1\)</span> uplink
cells</p>
<p>the UE expects to have respectively received</p>
<p>- at most <span class="math inline">\({16 \bullet
N}_{cells,r16/r17}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI, or a G-RNTI for
multicast, or a G-CS-RNTI scheduling <span class="math inline">\({16
\bullet N}_{cells,r16/r17}^{cap - r17}\)</span> PDSCH receptions for
which the UE has not received any corresponding PDSCH symbol over all
serving cells that are provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet
N}_{cells,r16/r17}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI scheduling <span
class="math inline">\({16 \bullet N}_{cells,r16/r17}^{cap -
r17}\)</span> PUSCH transmissions for which the UE has not transmitted
any corresponding PUSCH symbol over all serving cells that are provided
<em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet
N}_{cells,r17/r16}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI, or a G-RNTI for
multicast, or a G-CS-RNTI scheduling <span class="math inline">\({16
\bullet N}_{cells,r17/r16}^{cap - r17}\)</span> PDSCH receptions for
which the UE has not received any corresponding PDSCH symbol over all
serving cells with <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet
N}_{cells,r17/r16}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI scheduling <span
class="math inline">\({16 \bullet N}_{cells,r17/r16}^{cap -
r17}\)</span> PUSCH transmissions for which the UE has not transmitted
any corresponding PUSCH symbol over all serving cells with
<em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em></p>
<p>If a UE is provided <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em> for at least one serving cell, is
provided <em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em> for at least one serving cell, and
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
for at least one serving cell, is not configured for NR-DC operation,
indicates a capability to monitor PDCCH candidates for <span
class="math inline">\(N_{cells,r15/\{ r16,r17\}}^{cap - r17} \geq
1\)</span> downlink cells, <span class="math inline">\(N_{cells,r16/\{
r15,r17\}}^{cap - r17} \geq 1\)</span>, and <span
class="math inline">\(N_{cells,r17/\{ r15,r16\}}^{cap - r17} \geq
1\)</span> downlink cells, and is configured with <span
class="math inline">\(N_{cells}^{DL} &gt; 1\)</span> downlink cells or
<span class="math inline">\(N_{cells}^{UL} &gt; 1\)</span> uplink
cells</p>
<p>the UE expects to have respectively received</p>
<p>- at most <span class="math inline">\({16 \bullet N}_{cells,r15/\{
r16,r17\}}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI, or a G-RNTI for
multicast, or a G-CS-RNTI scheduling <span class="math inline">\({16
\bullet N}_{cells,r15/\{ r16,r17\}}^{cap - r17}\)</span> PDSCH
receptions for which the UE has not received any corresponding PDSCH
symbol over all serving cells that are provided
<em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet N}_{cells,r15/\{
r16,r17\}}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI scheduling <span
class="math inline">\({16 \bullet N}_{cells,r15/\{ r16,r17\}}^{cap -
r17}\)</span> PUSCH transmissions for which the UE has not transmitted
any corresponding PUSCH symbol over all serving cells that are provided
<em>monitoringCapabilityConfig</em> =
<em>r15monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet N}_{cells,r16/\{
r15,r17\}}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI, or a G-RNTI for
multicast, or a G-CS-RNTI scheduling <span class="math inline">\({16
\bullet N}_{cells,r16/\{ r15,r17\}}^{cap - r17}\)</span> PDSCH
receptions for which the UE has not received any corresponding PDSCH
symbol over all serving cells that are provided
<em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet N}_{cells,r16/\{
r15,r17\}}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI scheduling <span
class="math inline">\({16 \bullet N}_{cells,r16/\{ r15,r17\}}^{cap -
r17}\)</span> PUSCH transmissions for which the UE has not transmitted
any corresponding PUSCH symbol over all serving cells that are provided
<em>monitoringCapabilityConfig</em> =
<em>r16monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet N}_{cells,r17/\{
r16,r17\}}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI, or a G-RNTI for
multicast, or a G-CS-RNTI scheduling <span class="math inline">\({16
\bullet N}_{cells,r17/\{ r16,r17\}}^{cap - r17}\)</span> PDSCH
receptions for which the UE has not received any corresponding PDSCH
symbol over all serving cells with <em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em></p>
<p>- at most <span class="math inline">\({16 \bullet N}_{cells,r17/\{
r16,r17\}}^{cap - r17}\)</span> PDCCHs for DCI formats with CRC
scrambled by a C-RNTI, or a CS-RNTI, or a MCS-C-RNTI scheduling <span
class="math inline">\({16 \bullet N}_{cells,r17/\{ r16,r17\}}^{cap -
r17}\)</span> PUSCH transmissions for which the UE has not transmitted
any corresponding PUSCH symbol over all serving cells with
<em>monitoringCapabilityConfig</em> =
<em>r17monitoringcapability</em></p>
<p>If a UE</p>
<p>- is configured to monitor a first PDCCH candidate for a DCI format
0_0 and a DCI format 1_0 from a CSS set and a second PDCCH candidate for
a DCI format 0_0 and a DCI format 1_0 from a USS set, where the CSS set
and the USS set do not include <em>searchSpaceLinkingId</em>, in a
CORESET with index zero on an active DL BWP, and</p>
<p>- the DCI formats 0_0/1_0 associated with the first PDCCH candidate
and the DCI formats 0_0/1_0 associated with the second PDCCH candidate
have same size, and</p>
<p>- the UE receives the first PDCCH candidate and the second PDCCH
candidate over a same set of CCEs, and</p>
<p>- the first PDCCH candidate and the second PDCCH candidate have
identical scrambling, and</p>
<p>- the DCI formats 0_0/1_0 for the first PDCCH candidate and the DCI
formats 0_0/1_0 for the second PDCCH candidate have CRC scrambled by
either C-RNTI, or MCS-C-RNTI, or CS-RNTI</p>
<p>the UE decodes only the DCI formats 0_0/1_0 associated with the first
PDCCH candidate.</p>
<p>If a UE detects a DCI format with inconsistent information, the UE
discards all the information in the DCI format.</p>
<p>A UE configured with a bandwidth part indicator in a DCI format
determines, in case of an active DL BWP or of an active UL BWP change,
that the information in the DCI format is applicable to the new active
DL BWP or UL BWP, respectively, as described in clause 12.</p>
<p>For unpaired spectrum operation, if a UE is not configured for
PUSCH/PUCCH transmission on serving cell <span
class="math inline">\(c_{2}\)</span>, the UE does not expect to monitor
PDCCH on serving cell <span class="math inline">\(c_{1}\)</span> if the
PDCCH overlaps in time with SRS transmission (including any interruption
due to uplink or downlink RF retuning time [10, TS 38.133]) on serving
cell <span class="math inline">\(c_{2}\)</span> and if the UE is not
capable of simultaneous reception and transmission on serving cell <span
class="math inline">\(c_{1}\)</span>and serving cell <span
class="math inline">\(c_{2}\)</span>.</p>
<p>If a UE is provided <em>resourceBlocks</em> and
s<em>ymbolsInResourceBlock</em> in <em>RateMatchPattern</em>, or if the
UE is additionally provided <em>periodicityAndPattern</em> in
<em>RateMatchPattern</em>, the UE can determine a set of RBs in symbols
of a slot that are not available for PDSCH reception scheduled by a DCI
format as described in [6, TS 38.214]. If a PDCCH candidate that
provides a DCI format is mapped to one or more REs that overlap with REs
of any RB in the set of RBs in symbols of the slot, the UE does not
expect to monitor the PDCCH candidate.</p>
<p>A UE does not expect to be configured with <em>dci-FormatsSL</em> and
<em>dci-FormatsExt</em> in a same USS.</p>
<h3
id="self-carrier-and-cross-carrier-scheduling-on-the-primary-cell">10.1.1
Self-carrier and cross-carrier scheduling on the primary cell</h3>
<p>A UE can be configured for scheduling on the primary cell from the
primary cell and from a secondary cell [12, TS 38.331]. The UE is either
not provided <em>monitoringCapabilityConfig</em> for the primary cell or
for the secondary cell, or the UE is provided only
<em>monitoringCapabilityConfig</em> = <em>r15monitoringcapability</em>
for the primary cell and for the secondary cell. The UE is not provided
<em>coresetPoolIndex</em> on the primary cell or on the secondary
cell.</p>
<p>The SCS configuration <span class="math inline">\(\mu_{P}\)</span>
for the active DL BWP on the primary cell is smaller than or equal to
the SCS configuration <span class="math inline">\(\mu_{S}\)</span> for
the active DL BWP on the secondary cell.</p>
<p>If a UE indicates capability
<em>disablingScalingFactorDeactSCell</em> [18, TS 38.306] and the
secondary cell is deactivated, or if the UE indicates capability
<em>disablingScalingFactorDormantSCell</em> [18, TS 38.306] and the
active DL BWP of the secondary cell is a dormant DL BWP for the UE,
<span class="math inline">\(\alpha = 1\)</span> applies for the
procedures described in the remaining of this clause. If <span
class="math inline">\(\mu_{P} &lt; \mu_{S}\)</span>, the UE determines
<span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,slot,}\mu_{P}}\)</span>
and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,slot,}\mu_{P}}\)</span>,
and determines <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,slot,}\mu_{S}}\)</span>
and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,slot,}\mu_{S}}\)</span>,
by including the primary cell only in the <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL,}\mu_{P}}\)</span>
downlink cells in <span class="math inline">\(\sum_{j = 0}^{3}\left(
N_{\text{cells,0}}^{\text{DL,}j} + \gamma \bullet
N_{\text{cells,1}}^{\text{DL,}j} \right)\)</span>, as described in
clause 10.1. If <span class="math inline">\(\mu_{P} = \mu_{S} =
\mu\)</span>, the UE determines <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,slot,}\mu}\)</span>
and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,slot,}\mu}\)</span>
by including the primary cell once in the <span
class="math inline">\(N_{\text{cells,0}}^{\text{DL,}\mu}\)</span>
downlink cells in <span class="math inline">\(\sum_{j = 0}^{3}\left(
N_{\text{cells,0}}^{\text{DL,}j} + \gamma \bullet
N_{\text{cells,1}}^{\text{DL,}j} \right)\)</span>, as described in
clause 10.1.</p>
<p>For scheduling on the primary cell from the primary cell, the UE is
not required to monitor more than <span
class="math inline">\(\left\lfloor \alpha \bullet \min\left(
M_{\text{PDCCH}}^{\text{max,slot,}\mu_{P}},M_{\text{PDCCH}}^{\text{total,slot,}\mu_{P}}
\right) \right\rfloor\ \)</span> PDCCH candidates per slot or more than
<span class="math inline">\(\left\lfloor \alpha \bullet \min\left(
C_{\text{PDCCH}}^{\text{max,slot,}\mu_{P}},C_{\text{PDCCH}}^{\text{total,slot,}\mu_{P}}
\right) \right\rfloor\)</span> non-overlapping CCEs per slot on the
active DL BWP of the primary cell, where <span
class="math inline">\(\alpha\)</span> is provided by
<em>ccs-BlindDetectionSplit</em>.</p>
<p>For scheduling on the primary cell from the secondary cell, the UE is
not required to monitor on the active DL BWP of the secondary cell more
than</p>
<p>- <span
class="math inline">\(M_{\text{PDCCH}}^{\text{max,slot,}\mu_{S}}\)</span>
PDCCH candidates per slot or more than <span
class="math inline">\(C_{\text{PDCCH}}^{\text{max,slot,}\mu_{S}}\)</span>
non-overlapping CCEs per slot of the active DL BWP of the secondary
cell</p>
<p>- <span class="math inline">\(\min\left(
M_{\text{PDCCH}}^{\text{max,slot,}\mu_{P}},M_{\text{PDCCH}}^{\text{total,slot,}\mu_{P}}
\right) - \left\lfloor {\alpha \bullet \min}\left(
M_{\text{PDCCH}}^{\text{max,slot,}\mu_{P}},M_{\text{PDCCH}}^{\text{total,slot,}\mu_{P}}
\right) \right\rfloor\)</span> PDCCH candidates per slot or more than
<span class="math inline">\(\min{\left(
C_{\text{PDCCH}}^{\text{max,slot,}\mu_{P}},C_{\text{PDCCH}}^{\text{total,slot,}\mu_{P}}
\right) -}\left\lfloor {\alpha \bullet \min}\left(
C_{\text{PDCCH}}^{\text{max,slot,}\mu_{P}},C_{\text{PDCCH}}^{\text{total,slot,}\mu_{P}}
\right) \right\rfloor\)</span> non-overlapping CCEs per slot of the
active DL BWP of the primary cell</p>
<p>If <span class="math inline">\(\mu_{P} &lt; \mu_{S}\)</span>, the UE
does not count PDCCH candidates and non-overlapping CCEs that the UE
monitors for scheduling on the primary cell from the secondary cell
towards <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,slot,}\mu_{S}}\)</span>
and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,slot,}\mu_{S}}\)</span>,
respectively.</p>
<p>If <span class="math inline">\(\mu_{P} &lt; \mu_{S}\)</span>, the UE
counts PDCCH candidates and non-overlapping CCEs that the UE monitors
for scheduling on the primary cell from the secondary cell towards <span
class="math inline">\(M_{\text{PDCCH}}^{\text{total,slot,}\mu_{P}}\)</span>
and <span
class="math inline">\(C_{\text{PDCCH}}^{\text{total,slot,}\mu_{P}}\)</span>,
respectively.</p>
<p>For allocation of PDCCH candidates and non-overlapping CCEs to search
space sets for scheduling on the primary cell from the primary cell, the
UE applies the procedure in clause 10.1 using <span
class="math inline">\(\left\lfloor \alpha \bullet \min\left(
M_{\text{PDCCH}}^{\text{max,slot,}\mu},M_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right) \right\rfloor\)</span> instead of <span
class="math inline">\(\min\left(
M_{\text{PDCCH}}^{\text{max,slot,}\mu},M_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right)\)</span>, and using <span class="math inline">\(\left\lfloor
\alpha \bullet \min\left(
C_{\text{PDCCH}}^{\text{max,slot,}\mu},C_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right) \right\rfloor\)</span> instead of <span
class="math inline">\(\min\left(
C_{\text{PDCCH}}^{\text{max,slot,}\mu},C_{\text{PDCCH}}^{\text{total,slot,}\mu}
\right)\)</span> for the primary cell.</p>
<h2 id="pdcch-validation-for-dl-sps-and-ul-grant-type-2">10.2 PDCCH
validation for DL SPS and UL grant Type 2</h2>
<p>A UE validates, for scheduling activation or scheduling release, a DL
SPS assignment PDCCH or a configured UL grant Type 2 PDCCH if</p>
<p>- the CRC of a corresponding DCI format is scrambled with a CS-RNTI
provided by <em>cs-RNTI</em> or a G-CS-RNTI provided by g-cs-RNTI,
and</p>
<p>- the new data indicator field in the DCI format for the enabled
transport block is set to '0', and</p>
<p>- the DFI flag field, if present, in the DCI format is set to '0',
and</p>
<p>- the time domain resource assignment field in the DCI format
indicates a row with single SLIV, and</p>
<p>- if validation is for scheduling activation and if the
PDSCH-to-HARQ_feedback timing indicator field in the DCI format is
present, the PDSCH-to-HARQ_feedback timing indicator field does not
provide an inapplicable value from <em>dl-DataToUL-ACK-r16</em> or
<em>dl-DataToUL-ACK-r17</em>.</p>
<p>If a UE is provided a single configuration for UL grant Type 2 PUSCH
or for SPS PDSCH, validation of the DCI format is achieved if all fields
for the DCI format are set according to Table 10.2-1 or Table
10.2-2.</p>
<p>If a UE is provided more than one configuration for UL grant Type 2
PUSCH or for SPS PDSCH, a value of the HARQ process number field in a
DCI format indicates an activation for a corresponding UL grant Type 2
PUSCH or for a SPS PDSCH configuration with a same value as provided by
<em>ConfiguredGrantConfigIndex</em> or by <em>sps-ConfigIndex</em>,
respectively. Validation of the DCI format is achieved if the RV field
for the DCI format is set as in Table 10.2-3.</p>
<p>If a UE is provided more than one configuration for UL grant Type 2
PUSCH or for SPS PDSCH</p>
<p>- if the UE is provided
<em>ConfiguredGrantConfigType2DeactivationStateList</em> or
<em>sps-ConfigDeactivationStateList</em>, a value of the HARQ process
number field in a DCI format indicates a corresponding entry for
scheduling release of one or more UL grant Type 2 PUSCH or SPS PDSCH
configurations</p>
<p>- if the UE is not provided
<em>ConfiguredGrantConfigType2DeactivationStateList</em> or
<em>sps-ConfigDeactivationStateList</em>, a value of the HARQ process
number field in a DCI format indicates a release for a corresponding UL
grant Type 2 PUSCH or for a SPS PDSCH configuration with a same value as
provided by <em>ConfiguredGrantConfigIndex</em> or by
<em>sps-ConfigIndex</em>, respectively</p>
<p>The UE does not expect to receive a multicast DCI format that
releases either a unicast SPS PDSCH configuration or more than one SPS
PDSCH configurations.</p>
<p>Validation of the DCI format is achieved if all fields for the DCI
format are set according to Table 10.2-4.</p>
<p>If validation is achieved, the UE considers the information in the
DCI format as a valid activation or valid release of DL SPS or
configured UL grant Type 2. If validation is not achieved, the UE
discards all the information in the DCI format.</p>
<p>Table 10.2-1: Special fields for single DL SPS or single UL grant
Type 2 scheduling activation PDCCH validation when a UE is provided a
single SPS PDSCH or UL grant Type 2 configuration in the active DL/UL
BWP of the scheduled cell</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 23%" />
<col style="width: 24%" />
<col style="width: 28%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td>DCI format 0_0/0_1/0_2</td>
<td>DCI format 1_0/1_2/4_1</td>
<td>DCI format 1_1/4_2</td>
</tr>
<tr>
<td style="text-align: center;"><p>HARQ process number</p>
<p>(if present)</p></td>
<td>set to all '0's</td>
<td>set to all '0's</td>
<td>set to all '0's</td>
</tr>
<tr>
<td style="text-align: center;"><p>Redundancy version</p>
<p>(if present)</p></td>
<td>set to all '0's</td>
<td>set to all '0's</td>
<td>For the enabled transport block: set to all '0's</td>
</tr>
</tbody>
</table>
<p>Table 10.2-2: Special fields for single DL SPS or single UL grant
Type 2 scheduling release PDCCH validation when a UE is provided a
single SPS PDSCH or UL grant Type 2 configuration in the active DL/UL
BWP of the scheduled cell</p>
<table>
<colgroup>
<col style="width: 38%" />
<col style="width: 31%" />
<col style="width: 30%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td>DCI format 0_0/0_1/0_2</td>
<td>DCI format 1_0/1_1/1_2/4_1/4_2</td>
</tr>
<tr>
<td style="text-align: center;"><p>HARQ process number</p>
<p>(if present)</p></td>
<td>set to all '0's</td>
<td>set to all '0's</td>
</tr>
<tr>
<td style="text-align: center;"><p>Redundancy version</p>
<p>(if present)</p></td>
<td>set to all '0's</td>
<td>set to all '0's</td>
</tr>
<tr>
<td>Modulation and coding scheme</td>
<td>set to all '1's</td>
<td>set to all '1's</td>
</tr>
<tr>
<td>Frequency domain resource assignment</td>
<td style="text-align: center;"><p>set to all '0's for FDRA Type 2 with
<span class="math inline">\(\mu = 1\)</span></p>
<p>set to all '1's, otherwise</p></td>
<td><p>set to all '0's for FDRA Type 0 or for <em>dynamicSwitch</em></p>
<p>set to all '1's for FDRA Type 1</p></td>
</tr>
</tbody>
</table>
<p>Table 10.2-3: Special fields for a single DL SPS or single UL grant
Type 2 scheduling activation PDCCH validation when a UE is provided
multiple DL SPS or UL grant Type 2 configurations in the active DL/UL
BWP of the scheduled cell</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 23%" />
<col style="width: 24%" />
<col style="width: 28%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td>DCI format 0_0/0_1/0_2</td>
<td>DCI format 1_0/1_2/4_1</td>
<td>DCI format 1_1/4_2</td>
</tr>
<tr>
<td style="text-align: center;"><p>Redundancy version</p>
<p>(if present)</p></td>
<td>set to all '0's</td>
<td>set to all '0's</td>
<td>For the enabled transport block: set to all '0's</td>
</tr>
</tbody>
</table>
<p>Table 10.2-4: Special fields for a single or multiple DL SPS and UL
grant Type 2 scheduling release PDCCH validation when a UE is provided
multiple DL SPS or UL grant Type 2 configurations in the active DL/UL
BWP of the scheduled cell</p>
<table>
<colgroup>
<col style="width: 41%" />
<col style="width: 26%" />
<col style="width: 32%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td>DCI format 0_0/0_1/0_2</td>
<td>DCI format 1_0/1_1/1_2/4_1/4_2</td>
</tr>
<tr>
<td style="text-align: center;"><p>Redundancy version</p>
<p>(if present)</p></td>
<td>set to all '0's</td>
<td>set to all '0's</td>
</tr>
<tr>
<td>Modulation and coding scheme</td>
<td>set to all '1's</td>
<td>set to all '1's</td>
</tr>
<tr>
<td>Frequency domain resource assignment</td>
<td style="text-align: center;"><p>set to all '0's for FDRA Type 2 with
<span class="math inline">\(\mu = 1\)</span></p>
<p>set to all '1's, otherwise</p></td>
<td><p>set to all '0's for FDRA Type 0 or for <em>dynamicSwitch</em></p>
<p>set to all '1's for FDRA Type 1</p></td>
</tr>
</tbody>
</table>
<p>A UE is expected to provide HARQ-ACK information in response to a SPS
PDSCH release after <span class="math inline">\(N\)</span> symbols from
the last symbol of a PDCCH providing the SPS PDSCH release. If
<em>processingType2Enabled</em> of <em>PDSCH-ServingCellConfig</em> is
set to <em>enable</em> for the serving cell with the PDCCH providing the
SPS PDSCH release, <span class="math inline">\(N = 5\)</span> for <span
class="math inline">\(\mu = 0\)</span>, <span class="math inline">\(N =
5.5\)</span> for <span class="math inline">\(\mu = 1\)</span>, and <span
class="math inline">\(N = 11\)</span> for <span
class="math inline">\(\mu = 2\)</span>, otherwise, <span
class="math inline">\(N = 10\)</span> for <span
class="math inline">\(\mu = 0\)</span>, <span class="math inline">\(N =
12\)</span> for <span class="math inline">\(\mu = 1\)</span>, <span
class="math inline">\(N = 22\)</span> for <span
class="math inline">\(\mu = 2\)</span>, <span class="math inline">\(N =
25\)</span> for <span class="math inline">\(\mu = 3\)</span>, <span
class="math inline">\(N = 100\)</span> for <span
class="math inline">\(\mu = 5\)</span>, and <span
class="math inline">\(N = 200\)</span> for <span
class="math inline">\(\mu = 6\)</span>, wherein <span
class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration between the SCS configuration of the PDCCH providing the
SPS PDSCH release and the SCS configuration of a PUCCH carrying the
HARQ-ACK information in response to a SPS PDSCH release.</p>
<h2 id="a-pdcch-validation-for-sl-configured-grant-type-2">10.2A PDCCH
validation for SL configured grant Type 2</h2>
<p>A UE validates, for scheduling activation or scheduling release, a SL
configured grant Type 2 PDCCH if</p>
<p>- the CRC of a corresponding DCI format 3_0 is scrambled with a
SL-CS-RNTI provided by <em>sl-CS-RNTI</em>, and</p>
<p>- the new data indicator field in the DCI format 3_0 for the enabled
transport block is set to '0'</p>
<p>Validation of the DCI format 3_0 is achieved if all fields for the
DCI format 3_0 are set according to Table 10.2A-1 or Table 10.2A-2.</p>
<p>If validation is achieved, the UE considers the information in the
DCI format 3_0 as a valid activation or valid release of SL configured
grant Type 2. If validation is not achieved, the UE discards all the
information in the DCI format 3_0.</p>
<p>Table 10.2A-1: Special fields for SL configured grant Type 2
scheduling activation PDCCH validation</p>
<table>
<colgroup>
<col style="width: 51%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td>DCI format 3_0</td>
</tr>
<tr>
<td>HARQ process number</td>
<td>set to all '0's</td>
</tr>
</tbody>
</table>
<p>Table 10.2A-2: Special fields for SL configured grant Type 2
scheduling release PDCCH validation</p>
<table>
<colgroup>
<col style="width: 54%" />
<col style="width: 45%" />
</colgroup>
<tbody>
<tr>
<td></td>
<td>DCI format 3_0</td>
</tr>
<tr>
<td>HARQ process number</td>
<td>set to all '1's</td>
</tr>
<tr>
<td>Frequency resource assignment (if present)</td>
<td>set to all '1's</td>
</tr>
</tbody>
</table>
<h2
id="pdcch-monitoring-indication-and-dormancynon-dormancy-behaviour-for-scells">10.3
PDCCH monitoring indication and dormancy/non-dormancy behaviour for
SCells</h2>
<p>A UE configured with DRX mode operation [11, TS 38.321] can be
provided the following for detection of a DCI format 2_6 in a PDCCH
reception on the PCell or on the SpCell [12, TS 38.331]</p>
<p>- a PS-RNTI for DCI format 2_6 by <em>ps-RNTI</em></p>
<p>- a number of search space sets, by <em>dci-Format2-6</em>, to
monitor PDCCH for detection of DCI format 2_6 on the active DL BWP of
the PCell or of the SpCell according to a common search space as
described in clause 10.1</p>
<p>- a payload size for DCI format 2_6 by <em>sizeDCI-2-6</em></p>
<p>- a location in DCI format 2_6 of a Wake-up indication bit by
<em>ps-PositionDCI-2-6</em></p>
<p>- a '0' value for the Wake-up indication bit, when reported to higher
layers, indicates to not start the <em>drx-onDurationTimer</em> for the
next long DRX cycle [11, TS 38.321]</p>
<p>- a '1' value for the Wake-up indication bit, when reported to higher
layers, indicates to start the <em>drx-onDurationTimer</em> for the next
long DRX cycle [11, TS 38.321]</p>
<p>- a bitmap, when the UE is provided a number of groups of configured
SCells by <em>dormancyGroupOutsideActiveTime</em>, where</p>
<p>- the bitmap location is immediately after the Wake-up indication bit
location</p>
<p>- the bitmap size is equal to the number of groups of configured
SCells where each bit of the bitmap corresponds to a group of configured
SCells from the number of groups of configured SCells</p>
<p>- a '0' value for a bit of the bitmap indicates an active DL BWP,
provided by <em>dormantBWP-Id</em>, for the UE [11, TS 38.321] for each
activated SCell in the corresponding group of configured SCells</p>
<p>- a '1' value for a bit of the bitmap indicates</p>
<p>- an active DL BWP, provided by
<em>firstOutsideActiveTimeBWP-Id</em>, for the UE for each activated
SCell in the corresponding group of configured SCells, if a current
active DL BWP is the dormant DL BWP</p>
<p>- a current active DL BWP, for the UE for each activated SCell in the
corresponding group of configured SCells, if the current active DL BWP
is not the dormant DL BWP</p>
<p>- the UE sets the active DL BWP to the indicated active DL BWP</p>
<p>- an offset by <em>ps-Offset</em> indicating a time, where the UE
starts monitoring PDCCH for detection of DCI format 2_6 according to the
number of search space sets, prior to a slot where the
<em>drx-onDurationTimer</em> would start on the PCell or on the SpCell
[11, TS 38.321]</p>
<p>- for each search space set, the PDCCH monitoring occasions are the
ones in the first <span class="math inline">\(T_{\text{s}}\)</span>
slots indicated by <em>duration</em>, or <span
class="math inline">\(T_{\text{s}} = 1\)</span> slot if
<em>duration</em> is not provided, starting from the first slot of the
first <span class="math inline">\(T_{\text{s}}\)</span> slots and ending
prior to the start of <em>drx-onDurationTimer</em>.</p>
<p>On PDCCH monitoring occasions associated with a same long DRX Cycle,
a UE does not expect to detect more than one DCI format 2_6 with
different values of the Wake-up indication bit for the UE or with
different values of the bitmap for the UE.</p>
<p>The UE does not monitor PDCCH for detecting DCI format 2_6 during
Active Time [11, TS 38.321].</p>
<p>If a UE reports for an active DL BWP a <em>MinTimeGap</em> or
<em>MinTimeGapFR2-2</em> value that is X slots prior to the beginning of
a slot where the UE would start the <em>drx-onDurationTimer</em>, the UE
is not required to monitor PDCCH for detection of DCI format 2_6 during
the X slots, where X corresponds to the <em>MinTimeGap</em> or
<em>MinTimeGapFR2-2</em> value of the SCS of the active DL BWP in Table
10.3-1.</p>
<p>Table 10.3-1 Minimum time gap value X</p>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 35%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr>
<th rowspan="2">SCS (kHz)</th>
<th colspan="2">Minimum Time Gap X (slots)</th>
</tr>
<tr>
<th>Value 1</th>
<th>Value 2</th>
</tr>
</thead>
<tbody>
<tr>
<td>15</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>30</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>60</td>
<td>1</td>
<td>12</td>
</tr>
<tr>
<td>120</td>
<td>2</td>
<td>24</td>
</tr>
<tr>
<td>480</td>
<td>8</td>
<td>96</td>
</tr>
<tr>
<td>960</td>
<td>16</td>
<td>192</td>
</tr>
</tbody>
</table>
<p>If a UE is provided search space sets to monitor PDCCH for detection
of DCI format 2_6 in the active DL BWP of the PCell or of the SpCell and
the UE detects DCI format 2_6, the physical layer of a UE reports the
value of the Wake-up indication bit for the UE to higher layers [11, TS
38.321] for the next long DRX cycle.</p>
<p>If a UE is provided search space sets to monitor PDCCH for detection
of DCI format 2_6 in the active DL BWP of the PCell or of the SpCell and
the UE does not detect DCI format 2_6, the physical layer of the UE does
not report a value of the Wake-up indication bit to higher layers for
the next long DRX cycle.</p>
<p>If a UE is provided search space sets to monitor PDCCH for detection
of DCI format 2_6 in the active DL BWP of the PCell or of the SpCell and
the UE</p>
<p>- is not required to monitor PDCCH for detection of DCI format 2_6,
as described in clauses 10, 11.1, 12, and in clause 5.7 of [11, TS
38.321] for all corresponding PDCCH monitoring occasions outside Active
Time prior to a next long DRX cycle, or</p>
<p>- does not have any PDCCH monitoring occasions for detection of DCI
format 2_6 outside Active Time of a next long DRX cycle</p>
<p>the physical layer of the UE reports a value of 1 for the Wake-up
indication bit to higher layers for the next long DRX cycle.</p>
<p>If a UE is provided search space sets to monitor PDCCH for detection
of DCI format 0_1 and DCI format 1_1 and if one or both of DCI format
0_1 and DCI format 1_1 include a SCell dormancy indication field,</p>
<p>- the SCell dormancy indication field is a bitmap with size equal to
a number of groups of configured SCells, provided by
<em>dormancyGroupWithinActiveTime</em>,</p>
<p>- each bit of the bitmap corresponds to a group of configured SCells
from the number of groups of configured Scells</p>
<p>- if the UE detects a DCI format 0_1 or a DCI format 1_1 that does
not include a carrier indicator field, or detects a DCI format 0_1 or
DCI format 1_1 that includes a carrier indicator field with value equal
to 0, and if the DCI format 0_1 does not indicate UL grant Type 2
release nor deactivate semi-persistent CSI report(s) on PUSCH, or if the
DCI format 1_1 does not indicate SPS PDSCH release, or if the DCI format
1_1 does not indicate a TCI state update without scheduling PDSCH
reception</p>
<p>- a '0' value for a bit of the bitmap indicates an active DL BWP,
provided by <em>dormantBWP-Id</em>, for the UE for each activated SCell
in the corresponding group of configured SCells</p>
<p>- a '1' value for a bit of the bitmap indicates</p>
<p>- an active DL BWP, provided by <em>firstWithinActiveTimeBWP-Id</em>,
for the UE for each activated SCell in the corresponding group of
configured SCells, if a current active DL BWP is the dormant DL BWP</p>
<p>- a current active DL BWP, for the UE for each activated SCell in the
corresponding group of configured SCells, if the current active DL BWP
is not the dormant DL BWP</p>
<p>- the UE sets the active DL BWP to the indicated active DL BWP</p>
<p>If a UE is provided search space sets to monitor PDCCH for detection
of DCI format 1_1, and if</p>
<p>- the CRC of DCI format 1_1 is scrambled by a C-RNTI or a MCS-C-RNTI,
and if</p>
<p>- a one-shot HARQ-ACK request field is not present or has a '0'
value, and if</p>
<p>- the UE detects a DCI format 1_1 on the primary cell that does not
include a carrier indicator field, or detects a DCI format 1_1 on the
primary cell that includes a carrier indicator field with value equal to
0, and if</p>
<p>- <em>resourceAllocation</em> = <em>resourceAllocationType0</em> and
all bits of the frequency domain resource assignment field in DCI format
1_1 are equal to 0, or</p>
<p>- <em>resourceAllocation</em> = <em>resourceAllocationType1</em> and
all bits of the frequency domain resource assignment field in DCI format
1_1 are equal to 1, or</p>
<p>- <em>resourceAllocation = dynamicSwitch</em> and all bits of the
frequency domain resource assignment field in DCI format 1_1 are equal
to 0 or 1</p>
<p>the UE considers the DCI format 1_1 as indicating SCell dormancy, not
scheduling a PDSCH reception, and for transport block 1 interprets the
sequence of fields of</p>
<p>- modulation and coding scheme</p>
<p>- new data indicator</p>
<p>- redundancy version</p>
<p>and of</p>
<p>- HARQ process number</p>
<p>- antenna port(s)</p>
<p>- DMRS sequence initialization</p>
<p>as providing a bitmap to each configured SCell, in an ascending order
of the SCell index, where</p>
<p>- a '0' value for a bit of the bitmap indicates an active DL BWP,
provided by <em>dormantBWP-Id</em>, for the UE for a corresponding
activated SCell</p>
<p>- a '1' value for a bit of the bitmap indicates</p>
<p>- an active DL BWP, provided by <em>firstWithinActiveTimeBWP-Id</em>,
for the UE for a corresponding activated SCell, if a current active DL
BWP is the dormant DL BWP</p>
<p>- a current active DL BWP, for the UE for a corresponding activated
SCell, if the current active DL BWP is not the dormant DL BWP</p>
<p>- the UE sets the active DL BWP to the indicated active DL BWP</p>
<p>If an active DL BWP provided by <em>dormantBWP-Id</em> for a UE on an
activated SCell is not a default DL BWP for the UE on the activated
SCell, as described in clause 12, the BWP inactivity timer is not used
for transitioning from the active DL BWP provided by
<em>dormantBWP-Id</em> to the default DL BWP on the activated SCell.</p>
<p>A UE is expected to provide HARQ-ACK information in response to a
detection of a DCI format 1_1 indicating SCell dormancy after <span
class="math inline">\(N\)</span> symbols from the last symbol of a PDCCH
providing the DCI format 1_1. If <em>processingType2Enabled</em> of
<em>PDSCH-ServingCellConfig</em> is set to <em>enable</em> for the
serving cell with the PDCCH providing the DCI format 1_1, <span
class="math inline">\(N = 7\)</span> for <span class="math inline">\(\mu
= 0\)</span>, <span class="math inline">\(N = 7.5\)</span> for <span
class="math inline">\(\mu = 1\)</span>, and <span
class="math inline">\(N = 15\)</span> for <span
class="math inline">\(\mu = 2\)</span>; otherwise, <span
class="math inline">\(N = 14\)</span> for <span
class="math inline">\(\mu = 0\)</span>, <span class="math inline">\(N =
16\)</span> for <span class="math inline">\(\mu = 1\)</span>, <span
class="math inline">\(N = 27\)</span> for <span
class="math inline">\(\mu = 2\)</span>, <span class="math inline">\(N =
31\)</span> for <span class="math inline">\(\mu = 3\)</span>, <span
class="math inline">\(N = 124\)</span> for <span
class="math inline">\(\mu = 5\)</span>, and <span
class="math inline">\(= 248\)</span> for <span class="math inline">\(\mu
= 6\)</span>, where <span class="math inline">\(\mu\)</span> is the
smallest SCS configuration between the SCS configuration of the PDCCH
providing the DCI format 1_1 and the SCS configuration of a PUCCH with
the HARQ-ACK information in response to the detection of the DCI format
1_1.</p>
<h2
id="search-space-set-group-switching-and-skipping-of-pdcch-monitoring">10.4
Search space set group switching and skipping of PDCCH monitoring</h2>
<p>A UE can be provided</p>
<p>- a group index for a respective Type3-PDCCH CSS set or USS set by
<em>searchSpaceGroupIdList</em> for PDCCH monitoring on a serving
cell,</p>
<p>- a group index for a respective Type3-PDCCH CSS set or USS set by
<em>searchSpaceGroupIdList-r17</em> for PDCCH monitoring on an active DL
BWP of a serving cell.</p>
<p>If the UE is not provided <em>searchSpaceGroupIdList</em> or
<em>searchSpaceGroupIdList-r17</em> for a search space set, the
following procedures that are based on search space set group switching
are not applicable for PDCCH monitoring according to the search space
set.</p>
<p>A UE can be provided a set of durations by
<em>pdcch-SkippingDurationList</em> for Type3-PDCCH CSS set or USS set
for PDCCH monitoring on an active DL BWP of a serving cell. If the UE is
not provided <em>pdcch-SkippingDurationList</em>, the following
procedures related to skipping of PDCCH monitoring are not
applicable.</p>
<p>If a UE is provided <em>cellGroupsForSwitchList</em>, indicating one
or more groups of serving cells, the following procedures apply to all
serving cells within each group; otherwise, the following procedures
apply only to a serving cell for which the UE is provided
<em>searchSpaceGroupIdList</em>.</p>
<p>When a UE is provided <em>searchSpaceGroupIdList</em> or
<em>searchSpaceGroupIdList-r17</em>, the UE resets PDCCH monitoring
according to search space sets with group index 0, if provided by
<em>searchSpaceGroupIdList</em> or
<em>searchSpaceGroupIdList-r17</em>.</p>
<p>A UE can be provided by <em>searchSpaceSwitchDelay</em> or
<em>searchSpaceSwitchDelay-r17</em> a number of symbols <span
class="math inline">\(P_{switch}\)</span> where a minimum value of <span
class="math inline">\(P_{switch}\)</span> is provided in Table 10.4-1
for UE processing capability 1 and UE processing capability 2 and SCS
configuration <span class="math inline">\(\mu\)</span>. UE processing
capability 1 for SCS configuration <span
class="math inline">\(\mu\)</span> applies unless the UE indicates
support for UE processing capability 2.</p>
<p>Table 10.4-1: Minimum value of <span
class="math inline">\(\mathbf{P}_{\mathbf{switch}}\)</span>
[symbols]</p>
<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 47%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr>
<td><span class="math display">\[\mathbf{\mu}\]</span></td>
<td><p>Minimum <span
class="math inline">\(\mathbf{P}_{\mathbf{switch}}\)</span> value
for</p>
<p>UE processing capability 1 [symbols]</p></td>
<td><p>Minimum <span
class="math inline">\(\mathbf{P}_{\mathbf{switch}}\)</span> value
for</p>
<p>UE processing capability 2 [symbols]</p></td>
</tr>
<tr>
<td>0</td>
<td>25</td>
<td>10</td>
</tr>
<tr>
<td>1</td>
<td>25</td>
<td>12</td>
</tr>
<tr>
<td>2</td>
<td>25</td>
<td>22</td>
</tr>
<tr>
<td>3</td>
<td>40</td>
<td>-</td>
</tr>
<tr>
<td>5</td>
<td>160</td>
<td>-</td>
</tr>
<tr>
<td>6</td>
<td>320</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>A UE can be provided, by <em>searchSpaceSwitchTimer</em>, a timer
value for a serving cell that the UE is provided
<em>searchSpaceGroupIdList</em> or, if provided, for a set of serving
cells provided by <em>cellGroupsForSwitchList</em>. The UE decrements
the timer value by one after each slot based on a reference SCS
configuration that is the smallest SCS configuration <span
class="math inline">\(\mu\)</span> among all configured DL BWPs in the
serving cell, or in the set of serving cells. The UE maintains the
reference SCS configuration during the timer decrement procedure.</p>
<p>If a UE is provided by <em>SearchSpaceSwitchTrigger</em> a location
of a search space set group switching flag field in a DCI format 2_0, as
described in clause 11.1.1, for a serving cell where the UE has active
DL BWP with SCS configuration <span
class="math inline">\(\mu\)</span></p>
<p>- if the UE detects a DCI format 2_0 and a value of the search space
set group switching flag field in the DCI format 2_0 is 0, the UE starts
monitoring PDCCH according to search space sets with group index 0, and
stops monitoring PDCCH according to search space sets with group index
1, for the serving cell</p>
<p>- at the beginning of the first slot that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after the last symbol
of the PDCCH with the DCI format 2_0 when <span
class="math inline">\(\mu \in \left\{ 0,\ 1,\ 2,\ 3
\right\}\)</span></p>
<p>- at the beginning of the first slot, of a group of <span
class="math inline">\(X_{s}\)</span> slots, that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after the last symbol
of the PDCCH with the DCI format 2_0 when <span
class="math inline">\(\mu \in \left\{ 5,\ 6 \right\}\)</span></p>
<p>- if the UE detects a DCI format 2_0 and a value of the search space
set group switching flag field in the DCI format 2_0 is 1, the UE starts
monitoring PDCCH according to search space sets with group index 1, and
stops monitoring PDCCH according to search space sets with group index
0, for the serving cell</p>
<p>- at the beginning of the first slot that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after the last symbol
of the PDCCH with the DCI format 2_0, when <span
class="math inline">\(\mu \in \left\{ 0,\ 1,\ 2,\ 3
\right\}\)</span></p>
<p>- at the beginning of the first slot, of a group of <span
class="math inline">\(X_{s}\)</span> slots, that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after the last symbol
of the PDCCH with the DCI format 2_0 when <span
class="math inline">\(\mu \in \left\{ 5,\ 6 \right\}\)</span></p>
<p>and the UE sets the timer value to the value provided by
<em>searchSpaceSwitchTimer</em></p>
<p>- if the UE monitors PDCCH for a serving cell according to search
space sets with group index 1, the UE starts monitoring PDCCH for the
serving cell according to search space sets with group index 0, and
stops monitoring PDCCH according to search space sets with group index
1, for the serving cell</p>
<p>- at the beginning of the first slot that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after a slot where the
timer expires or after a last symbol of a remaining channel occupancy
duration for the serving cell if indicated by DCI format 2_0 when <span
class="math inline">\(\mu \in \left\{ 0,\ 1,\ 2,\ 3
\right\}\)</span></p>
<p>- at the beginning of the first slot, of a group of <span
class="math inline">\(X_{s}\)</span> slots, that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after a slot where the
timer expires or after a last symbol of a remaining channel occupancy
duration for the serving cell if indicated by DCI format 2_0 when <span
class="math inline">\(\mu \in \left\{ 5,\ 6 \right\}\)</span></p>
<p>If a UE is provided <em>searchSpaceGroupIdList</em> and is not
provided <em>SearchSpaceSwitchTrigger</em> for a serving cell,</p>
<p>- if the UE detects a DCI format by monitoring PDCCH according to a
search space set with group index 0, the UE starts monitoring PDCCH
according to search space sets with group index 1, and stops monitoring
PDCCH according to search space sets with group index 0, for the serving
cell</p>
<p>- at the beginning of the first slot that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after the last symbol
of the PDCCH with the DCI format when <span class="math inline">\(\mu
\in \left\{ 0,\ 1,\ 2,\ 3 \right\}\)</span>,</p>
<p>- at the beginning of the first slot, of a group of <span
class="math inline">\(X_{s}\)</span> slots, that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after the last symbol
of the PDCCH with the DCI format when <span class="math inline">\(\mu
\in \left\{ 5,\ 6 \right\}\)</span></p>
<p>the UE sets the timer value to the value provided by
<em>searchSpaceSwitchTimer</em> if the UE detects a DCI format by
monitoring PDCCH in any search space set</p>
<p>- if the UE monitors PDCCH for a serving cell according to search
space sets with group index 1, the UE starts monitoring PDCCH for the
serving cell according to search space sets with group index 0, and
stops monitoring PDCCH according to search space sets with group index
1, for the serving cell</p>
<p>- at the beginning of the first slot that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after a slot where the
timer expires or, if the UE is provided a search space set to monitor
PDCCH for detecting a DCI format 2_0, after a last symbol of a remaining
channel occupancy duration for the serving cell if indicated by DCI
format 2_0 when <span class="math inline">\(\mu \in \left\{ 0,\ 1,\ 2,\
3 \right\}\)</span></p>
<p>- at the beginning of the first slot, of a group of <span
class="math inline">\(X_{s}\)</span> slots, that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after a slot where the
timer expires or, if the UE is provided a search space set to monitor
PDCCH for detecting a DCI format 2_0, after a last symbol of a remaining
channel occupancy duration for the serving cell if indicated by DCI
format 2_0 when <span class="math inline">\(\mu \in \left\{ 5,\ 6
\right\}\)</span></p>
<p>A UE determines a slot and a symbol in the slot to start or stop
PDCCH monitoring according to search space sets for a serving cell that
the UE is provided <em>searchSpaceGroupIdList</em> or, if
<em>cellGroupsForSwitchList</em> is provided, for a set of serving
cells, based on the largest <span class="math inline">\(X_{s}\)</span>
if the SCS configuration <span class="math inline">\(\mu\)</span> among
all configured DL BWPs in the set of serving cells equals to 6,
otherwise, based on the smallest SCS configuration <span
class="math inline">\(\mu\)</span> among all configured DL BWPs in the
serving cell or in the set of serving cells and, if any, in the serving
cell where the UE receives a PDCCH and detects a corresponding DCI
format 2_0 triggering the start or stop of PDCCH monitoring according to
search space sets.</p>
<p>A UE can be provided a set of durations by
<em>pdcch-SkippingDurationList</em> for PDCCH monitoring on an active DL
BWP of a serving cell and, if the UE is not provided
<em>searchSpaceGroupIdList-r17</em> on the active DL BWP of the serving
cell, a DCI format 0_1 and a DCI format 0_2 that schedule PUSCH
transmission, and a DCI format 1_1 and a DCI format 1_2 that schedule
PDSCH receptions can include a PDCCH monitoring adaptation field of 1
bit or of 2 bits.</p>
<p>If the field has 1 bit and for PDCCH monitoring by the UE according
to Type3-PDCCH CSS sets or USS sets on the active DL BWP of the serving
cell</p>
<p>- a '0' value for the bit indicates no skipping in PDCCH
monitoring</p>
<p>- a '1' value for the bit indicates skipping PDCCH monitoring for a
duration provided by the first value in the set of durations</p>
<p>If the field has 2 bits and for PDCCH monitoring by the UE according
to Type3-PDCCH CSS sets or USS sets on the active DL BWP of the serving
cell</p>
<p>- a '00' value for the bits indicates no skipping in PDCCH
monitoring</p>
<p>- a '01' value for the bits indicates skipping PDCCH monitoring for a
duration provided by the first value in the set of durations</p>
<p>- a '10' value for the bits indicates skipping PDCCH monitoring for a
duration provided by the second value in the set of durations</p>
<p>- a '11' value for the bits indicates skipping PDCCH monitoring for a
duration provided by the third value in the set of durations, if any;
otherwise, if the set of durations includes two values, a use of the
'11' value is reserved</p>
<p>A UE can be provided group indexes for a Type3-PDCCH CSS set or USS
set by <em>searchSpaceGroupIdList-r17</em> for PDCCH monitoring on an
active DL BWP of a serving cell and, if the UE is not provided
<em>pdcch-SkippingDurationList</em> for the active DL BWP of the serving
cell, a DCI format 0_1 and a DCI format 0_2 that schedule PUSCH
transmissions and a DCI format 1_1 and a DCI format 1_2 that schedule
PDSCH receptions can include a PDCCH monitoring adaptation field of 1
bit or of 2 bits for the serving cell.</p>
<p>If the field has 1 bit and for PDCCH monitoring by the UE according
to Type3-PDCCH CSS sets or USS sets on the active DL BWP of the serving
cell</p>
<p>- a '0' value for the bit indicates start of PDCCH monitoring
according to search space sets with group index 0 and stop of PDCCH
monitoring according to search space sets with other group indexes, if
any</p>
<p>- a '1' value for the bit indicates start of PDCCH monitoring
according to search space sets with group index 1 and stop of PDCCH
monitoring according to search space sets with other group indexes, if
any, and the UE sets the timer value to the one provided by
<em>searchSpaceSwitchTimer-r17</em>, if provided</p>
<p>If the field has 2 bits and for PDCCH monitoring by the UE according
to Type3-PDCCH CSS sets or USS sets on the active DL BWP of the serving
cell</p>
<p>- a '00' value for the bit indicates start of PDCCH monitoring
according to search space sets with group index 0 and stop of PDCCH
monitoring according to search space sets with other group indexes, if
any</p>
<p>- a '01' value for the bit indicates start of PDCCH monitoring
according to search space sets with group index 1 and stop of PDCCH
monitoring according to search space sets with other group indexes, if
any, and the UE sets the timer value to the one provided by
<em>searchSpaceSwitchTimer-r17</em>, if provided</p>
<p>- a '10' value for the bit indicates start of PDCCH monitoring
according to search space sets with group index 2 and stop of PDCCH
monitoring according to search space sets with other group indexes, if
any, and the UE sets the timer value to the one provided by
<em>searchSpaceSwitchTimer-r17</em>, if provided</p>
<p>- a '11' value is reserved</p>
<p>A UE can be provided a set of durations by
<em>pdcch-SkippingDurationList</em> and group indexes for a Type3-PDCCH
CSS set or USS set by <em>searchSpaceGroupIdList-r17</em> for PDCCH
monitoring on an active DL BWP of a serving cell and, a DCI format 0_1
and a DCI format 0_2 that schedule PUSCH transmissions, and a DCI format
1_1 and a DCI format 1_2 that schedule PDSCH receptions can include a
PDCCH monitoring adaptation field of 2 bits.</p>
<p>If the set of durations includes one value and for PDCCH monitoring
by the UE according to Type3-PDCCH CSS sets or USS sets on the active DL
BWP of the serving cell</p>
<p>- a '00' value for the bits indicates start of PDCCH monitoring
according to search space sets with group index 0 and stop of PDCCH
monitoring according to search space sets with group index 1, if any</p>
<p>- a '01' value for the bits indicates start of PDCCH monitoring
according to search space sets with group index 1 and stop of PDCCH
monitoring according to search space sets with group index 0, if any,
and the UE sets the timer value to the one provided by
<em>searchSpaceSwitchTimer-r17</em>, if provided</p>
<p>- a '10' value for the bits indicates skipping PDCCH monitoring for a
duration provided by the value in the set of durations</p>
<p>- a '11' value is reserved</p>
<p>If the set of durations includes two values and for PDCCH monitoring
by the UE according to Type3-PDCCH CSS sets or USS sets on active DL BWP
of the serving cell</p>
<p>- a '00' value for the bits indicates start of PDCCH monitoring
according to search space sets with group index 0 and stop of PDCCH
monitoring according to search space sets with group index 1, if any</p>
<p>- a '01' value for the bits indicates start of PDCCH monitoring
according to search space sets with group index 1 and stop of PDCCH
monitoring according to search space sets with group index 0, if any,
and the UE sets the timer value to the one provided by
<em>searchSpaceSwitchTimer-r17</em>, if provided</p>
<p>- a '10' value for the bits indicates skipping PDCCH monitoring for a
duration provided by the first value in the set of durations</p>
<p>- a '11' value for the bits indicates skipping PDCCH monitoring for a
duration provided by the second value in the set of durations</p>
<p>When the PDCCH monitoring adaptation field indicates to a UE to start
PDCCH monitoring according to search space sets with a first group index
and stop PDCCH monitoring according to search space sets with a second
group index, the UE applies the indication</p>
<p>- at the beginning of a first slot that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after the last symbol
of the PDCCH reception providing the DCI format with the PDCCH
monitoring adaptation field when <span class="math inline">\(\mu \in
\left\{ 0,\ 1,\ 2,\ 3 \right\}\)</span>,</p>
<p>- at the beginning of a first slot, of a slot group of <span
class="math inline">\(X_{s}\)</span> slots, that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after the last symbol
of the PDCCH reception providing the DCI format with the PDCCH
monitoring adaptation field when <span class="math inline">\(\mu \in
\left\{ 5,\ 6 \right\}\)</span></p>
<p>When the PDCCH monitoring adaptation field indicates to a UE to skip
PDCCH monitoring for a duration on the active DL BWP of a serving cell,
the UE starts skipping of PDCCH monitoring at the beginning of a first
slot that is after the last symbol of the PDCCH reception providing the
DCI format with the PDCCH monitoring adaptation field. If the UE
transmits a PUCCH providing a positive SR before the UE detects a DCI
format providing the PDCCH monitoring adaptation field indicating to the
UE to skip PDCCH monitoring for the duration on the active DL BWP of the
serving cell, the UE shall monitor PDCCH regardless of PDCCH skipping
indication on all serving cells of the corresponding Cell Group when the
SR is pending [11, TS 38.321]. If the UE transmits a PUCCH providing a
positive SR after the UE detects a DCI format providing the PDCCH
monitoring adaptation field indicating to the UE to skip PDCCH
monitoring for the duration on the active DL BWP of the serving cell,
the UE resumes PDCCH monitoring starting at the beginning of a first
slot that is after a last symbol of the PUCCH transmission in all
serving cells of the corresponding Cell Group. During the time of
<em>ra-ResponseWindow</em> or <em>msgB-ResponseWindow</em> or the
duration where <em>ra-ContentionResolutionTimer</em> is running, the UE
shall not skip PDCCH monitoring on SpCell. After the UE detects a DCI
format providing the PDCCH monitoring adaptation field indicating to the
UE to skip PDCCH monitoring for the duration on the active DL BWP of a
SpCell, when contention resolution is successful [11, TS 38.321], the UE
resumes PDCCH monitoring on the SpCell. After the UE detects a DCI
format providing the PDCCH monitoring adaptation field indicating to the
UE to skip PDCCH monitoring for the duration on the active DL BWP of a
serving cell, when a pending SR is cancelled [11, TS 38.321], the UE
resumes PDCCH monitoring in all serving cells of the corresponding Cell
Group. If UE transmits a RACH due to positive SR, the UE shall not skip
PDCCH monitoring on any serving cell of the corresponding Cell Group
during the time of <em>ra-ResponseWindow</em> or
<em>msgB-ResponseWindow</em> or the duration where
<em>ra-ContentionResolutionTimer</em> is running. If DRX is configured
and the DRX group of the serving cell enters outside Active Time, the UE
terminates PDCCH skipping for the serving cell.</p>
<p>If the UE changes to a new active DL BWP of the serving cell by the
expiration of <em>bwp-InactivityTimer</em> or by RRC configuration, the
UE</p>
<p>- resumes PDCCH monitoring according to the search space sets on the
new active BWP of the serving cell when UE is in a PDCCH skipping
duration, if the UE is not provided <em>searchSpaceGroupIdList-r17</em>
on the new active DL BWP</p>
<p>- monitors PDCCH according to search space sets with group index 0 on
the new active BWP of the serving cell, if the UE is provided
<em>searchSpaceGroupIdList-r17</em>.</p>
<p>If a UE is provided group indexes for a Type3-PDCCH CSS set or a USS
set by <em>searchSpaceGroupIdList-r17</em> and a timer value by
<em>searchSpaceSwitchTimer-r17</em> for PDCCH monitoring an active DL
BWP of on a serving cell and the timer is running, the UE</p>
<p>- resets the timer after a slot of the active DL BWP of the serving
cell if the UE detects a DCI format in a PDCCH reception in the slot for
with CRC scrambled by C-RNTI/CS-RNTI/MCS-C-RNTI/G-RNTI for
multicast/G-CS-RNTI</p>
<p>- otherwise, decrements the timer value by one after a slot of the
active DL BWP of the serving cell</p>
<p>When the timer expires in a first slot, the UE monitors PDCCH on the
serving cell according to search space sets with group index 0 starting
in a second slot that</p>
<p>- is not earlier than <span class="math inline">\(P_{switch}\)</span>
symbols after the first slot when <span class="math inline">\(\mu \in
\left\{ 0,\ 1,\ 2,\ 3 \right\}\)</span>,</p>
<p>- is a first slot in a slot group of <span
class="math inline">\(X_{s}\)</span> slots that is not earlier than
<span class="math inline">\(P_{switch}\)</span> symbols after the first
slot when <span class="math inline">\(\mu \in \left\{ 5,\ 6
\right\}\)</span>,</p>
<p>- is not earlier than a slot where a PDCCH skipping duration expires,
if applicable</p>
<p>When a UE receives</p>
<p>- a first PDCCH in a first slot that provides a DCI format with a
PDCCH monitoring adaptation field having a first value indicating
skipping PDCCH monitoring, or indicating start of PDCCH monitoring
according to a search space sets with a first group index and stop of
PDCCH monitoring according to search space sets with a second group
index, for an active DL BWP and</p>
<p>- a second PDCCH that provides a DCI format with a PDCCH monitoring
adaptation field having a second value indicating skipping PDCCH
monitoring, or indicating start of PDCCH monitoring according to search
space sets with a first group index and stop of PDCCH monitoring
according to search space sets with a second group index different than
the first group index, for the active DL BWP where the second PDCCH is
received</p>
<p>- in the first slot if the first value indicates skipping PDCCH
monitoring</p>
<p>- before a slot that is at least <span
class="math inline">\(P_{switch}\)</span> symbols after the first slot
if the first value indicates start of PDCCH monitoring according to
search space sets with a first group index</p>
<p>the UE does not expect the second value to be different than the
first value.</p>
<p>A UE does not expect to receive in a second slot a PDCCH on an active
DL BWP that provides a DCI format indicating skipping PDCCH monitoring,
or start of PDCCH monitoring according to search space sets with group
index 1 or 2 for the active DL BWP, if the second slot is not at least
<span class="math inline">\(P_{switch}\)</span> symbols after a first
slot where the timer expires.</p>
<h2 id="a-pdcch-monitoring-for-early-indication-of-paging">10.4A PDCCH
monitoring for early indication of paging</h2>
<p>A UE can be provided the following for detection of a DCI format 2_7
in RRC_IDLE state or in RRC_INACTIVE state [12, TS 38.331]</p>
<p>- a search space set, by <em>pei-SearchSpace</em>, to monitor PDCCH
for detection of DCI format 2_7 according to a Type2A-PDCCH CSS set as
described in clause 10.1</p>
<p>- a number of frames, by <em>pei-FrameOffset</em>, from the start of
a frame to the start of a first paging frame of paging frames associated
with a number of PDCCH monitoring occasions for DCI format 2_7 [17, TS
38.304]</p>
<p>- a number of symbols, by
<em>firstPDCCH-MonitoringOccasionOfPEI-O</em>, from the start of the
frame to the start of the first PDCCH monitoring occasion for DCI format
2_7</p>
<p>- a size, by <em>payloadSizeDCI-2-7</em></p>
<p>- a number of subgroups per paging occasion, <span
class="math inline">\(N_{SG}^{PO}\)</span>, by
<em>subgroupsNumPerPO</em></p>
<p>- a number of paging occasions associated with the number of PDCCH
monitoring occasions for DCI format 2_7, <span
class="math inline">\(N_{PO}^{PEI}\)</span>, by
<em>po-NumPerPEI</em></p>
<p>A paging indication field of DCI format 2_7 includes <span
class="math inline">\(N_{PO}^{PEI}\)</span> segments of <span
class="math inline">\(K\)</span> bits, where <span
class="math inline">\({K = N}_{SG}^{PO}\)</span>. For a subgroup index
<span class="math inline">\(i_{SG}\)</span>, <span
class="math inline">\(0 \leq i_{SG} &lt; K\)</span>, a UE determines a
value for the <span class="math inline">\(\left( i_{PO} \cdot K + i_{SG}
\right)\)</span> bit in the paging indication field, where <span
class="math inline">\(i_{PO} = \left( (UE\_ IDmodN) \cdot N_{S} + i\_ s
\right)modN_{PO}^{PEI}\)</span> is a paging occasion index, and <span
class="math inline">\(UE\_ ID\)</span>, <span
class="math inline">\(N\)</span>, <span
class="math inline">\(N_{S}\)</span>, <span
class="math inline">\(i_{SG}\)</span>, and <span
class="math inline">\(i\_ s\)</span> are defined in [17, TS 38.304].
When the value is '1', the UE monitors a paging occasion determined
according to [17, TS 38.304]; otherwise, the UE is not required to
monitor the paging occasion.</p>
<p>If <span class="math inline">\(N_{PO}^{PEI} &lt; N_{S}\)</span>, the
number of symbols from the start of the frame to the start of the first
PDCCH monitoring occasion for DCI format 2_7 that is associated with
paging occasion index <span class="math inline">\(i_{PO}\)</span> is the
<span class="math inline">\(\left( \left\lfloor \frac{i\_
s}{N_{PO}^{PEI}} \right\rfloor_{} + 1 \right)\)</span>-th value from the
<span class="math inline">\(\frac{N_{S}}{N_{PO}^{PEI}}\)</span> values
provided by <em>firstPDCCH-MonitoringOccasionOfPEI-O</em>.</p>
<h2 id="b-indication-of-trs-resources">10.4B Indication of TRS
resources</h2>
<p>A UE in RRC_IDLE state or RRC_INACTIVE state can be provided by
<em>trs-ResourceSetConfig</em> a set of TRS occasions [6, TS 38.214]. If
<em>trs-ResourceSetConfig</em> is provided, a DCI format 2_7, if
<em>pei-SearchSpace</em> is provided, and a DCI format 1_0 with CRC
scrambled by P-RNTI includes a TRS availability indication field [4, TS
38.212] that provides a bitmap to groups of TRS resource sets where the
configuration of each TRS resource set includes an association to a bit
of the bitmap. The UE can be additionally provided a multiple, by
<em>validityDuration</em>, for a number of frames provided by
<em>defaultPagingCycle</em> for TRS resource sets with indicated
presence; if <em>validityDuration</em> is not provided, the multiple is
equal to 2.</p>
<p>A value of '1' for a bit of the bitmap indicates presence of
associated TRS resource sets for the multiple of the number of frames,
starting from a SFN determined from <span class="math inline">\((SFN +
PF\_ offset)modT = 0\)</span> [17, TS 38.304] that corresponds to the
frame within the DRX cycle that includes the PDCCH providing the DCI
format 2_7, or the DCI format 1_0 with CRC scrambled by P-RNTI, with the
TRS availability indication field indicating the TRS resource sets,
where <span class="math inline">\(T\)</span> is provided by
<em>defaultPagingCycle</em>. A value of '0' for a bit of the bitmap
indicates no change to a current assumption for the availability or
unavailability of associated TRS resource sets.</p>
<p>A UE can receive first and second PDCCHs that provide DCI format 2_7
or DCI format 1_0 with CRC scrambled by P-RNTI that indicate presence of
TRS resource sets for the multiple of the number of frames, where the
second PDCCH reception after the first PDCCH reception by a time that is
smaller than the multiple of the number of frames.</p>
<h2 id="harq-ack-information-for-pusch-transmissions">10.5 HARQ-ACK
information for PUSCH transmissions</h2>
<p>A UE can be configured a number of search space sets to monitor PDCCH
for detecting a DCI format 0_1 with a DFI flag field and CRC scrambled
with a CS-RNTI provided by <em>cs-RNTI</em>. The UE determines that the
DCI format provides HARQ-ACK information for PUSCH transmissions based
on when a DFI flag field value is set to '1', if a PUSCH transmission is
configured by <em>ConfiguredGrantConfig</em>.</p>
<p>The HARQ-ACK information corresponds to transport blocks in PUSCH
transmissions for all HARQ processes for a serving cell of a PDCCH
reception that provides DCI format 0_1 or, if DCI format 0_1 includes a
carrier indicator field, for a serving cell indicated by a value of the
carrier indicator field.</p>
<p>For a PUSCH transmission configured by
<em>ConfiguredGrantConfig</em>, HARQ-ACK information for a transport
block of a corresponding HARQ process number is valid if a first symbol
of the PDCCH reception is after a last symbol of the PUSCH transmission,
or of any repetition of the PUSCH transmission, by a number of symbols
provided by <em>cg-minDFI-Delay</em>.</p>
<p>For an initial transmission by a UE of a transport block in a PUSCH
configured by <em>ConfiguredGrantConfig</em>, if the UE receives a
CG-DFI that provides HARQ-ACK information for the transport block, the
UE assumes that the transport block was correctly decoded if the
HARQ-ACK information value is ACK; otherwise, the UE assumes that the
transport block was not correctly decoded.</p>
<p>For a PUSCH transmission scheduled by a DCI format, if the UE
receives a CG-DFI that provides HARQ-ACK information for the transport
block, the UE assumes that the transport block was correctly decoded if
the HARQ-ACK information value is ACK; otherwise, the UE assumes that
the transport block was not correctly decoded.</p>
<p>For a PUSCH transmission scheduled by a DCI format, HARQ-ACK
information for a transport block of a corresponding HARQ process number
is valid if a first symbol of the PDCCH reception is after a last symbol
of the PUSCH transmission by a number of symbols provided by
<em>cg-minDFI-Delay</em> or, if the PUSCH transmission is over multiple
slots,</p>
<p>- after a last symbol of the PUSCH transmission in a first slot from
the multiple slots by a number of symbols provided by
<em>cg-minDFI-Delay</em>, if a value of the HARQ-ACK information is
ACK.</p>
<p>- after a last symbol of the PUSCH transmission in a last slot from
the multiple slots by a number of symbols provided by
<em>cg-minDFI-Delay</em>, if a value of the HARQ-ACK information is
NACK.</p>
<p>UE does not expect to be configured with different
<em>cg-minDFI-Delay</em> among multiple <em>ConfiguredGrantConfig</em>
in one BWP.</p>
<h1 id="ue-group-common-signalling">11 UE-group common signalling </h1>
<p>If the UE is configured with a SCG, the UE shall apply the procedures
described in this clause for both MCG and SCG</p>
<p>- When the procedures are applied for MCG, the terms 'secondary
cell', 'secondary cells' , 'serving cell', 'serving cells' in this
clause refer to secondary cell, secondary cells, serving cell, serving
cells belonging to the MCG respectively.</p>
<p>- When the procedures are applied for SCG, the terms 'secondary
cell', 'secondary cells', 'serving cell', 'serving cells' in this clause
refer to secondary cell, secondary cells (not including PSCell), serving
cell, serving cells belonging to the SCG respectively. The term 'primary
cell' in this clause refers to the PSCell of the SCG.</p>
<p>In the remaining of this clause, unless stated otherwise, when a
PDCCH reception by a UE includes two PDCCH candidates from corresponding
search space sets, as described in clause 10.1</p>
<p>- a PDCCH monitoring occasion is the union of the PDCCH monitoring
occasions for the two PDCCH candidates</p>
<p>- the start of the PDCCH reception is the start of the earlier PDCCH
candidate</p>
<p>- the end of the PDCCH reception in the end of the PDCCH candidate
that ends later</p>
<p>The PDCCH reception includes the two PDCCH candidates also when the
UE is not required to monitor one of the two PDCCH candidates as
described in clauses 10 (except clause 10.4), 11.1, 11.1.1 and 17.2.</p>
<h2 id="slot-configuration">11.1 Slot configuration</h2>
<p>A slot format includes downlink symbols, uplink symbols, and flexible
symbols.</p>
<p>The following are applicable for each serving cell.</p>
<p>If a UE is provided <em>tdd-UL-DL-ConfigurationCommon</em>, the UE
sets the slot format per slot over a number of slots as indicated by
<em>tdd-UL-DL-ConfigurationCommon</em>.</p>
<p>The <em>tdd-UL-DL-ConfigurationCommon</em> provides</p>
<p>- a reference SCS configuration <img src="media/image166.svg"
style="width:0.30208in;height:0.22917in" /> by
<em>referenceSubcarrierSpacing</em></p>
<p>- a <em>pattern1</em>.</p>
<p>The <em>pattern1</em> provides</p>
<p>- a slot configuration period of <img src="media/image167.svg"
style="width:0.19792in;height:0.15625in" /> msec by
<em>dl-UL-TransmissionPeriodicity</em></p>
<p>- a number of slots <img src="media/image168.svg"
style="width:0.30208in;height:0.21875in" /> with only downlink symbols
by <em>nrofDownlinkSlots</em></p>
<p>- a number of downlink symbols <img src="media/image169.svg"
style="width:0.30208in;height:0.22917in" /> by
<em>nrofDownlinkSymbols</em></p>
<p>- a number of slots <img src="media/image170.svg"
style="width:0.30208in;height:0.22917in" /> with only uplink symbols by
<em>nrofUplinkSlots</em></p>
<p>- a number of uplink symbols <img src="media/image171.svg"
style="width:0.26042in;height:0.26042in" /> by
<em>nrofUplinkSymbols</em></p>
<p>A value <em>P</em> =0.625 msec is valid only for <span
class="math inline">\({\ \mu}_{ref} = 3\)</span>, <span
class="math inline">\({\ \mu}_{ref} = 5\ {or\ \mu}_{ref} = 6\)</span>. A
value <em>P</em> =1.25 msec is valid only for <span
class="math inline">\({\ \mu}_{ref} = 2,\ {\ \mu}_{ref} = 3\)</span>,
<span class="math inline">\({\ \mu}_{ref} = 5\ {or\ \mu}_{ref} =
6\)</span>. A value <em>P</em> =2.5 msec is valid only for<span
class="math inline">\({\ \mu}_{ref} = 1,\ {\ \mu}_{ref} = 2,\ {\
\mu}_{ref} = 3\)</span>,<span class="math inline">\({\ \mu}_{ref} = 5\
{or\ \mu}_{ref} = 6\)</span>. A value <em>P</em> =10 msec is valid only
for <span class="math inline">\({\ \mu}_{ref} = 0\)</span>, <span
class="math inline">\({\ \mu}_{ref} = 1,\ {\ \mu}_{ref} = 2,\ {\
\mu}_{ref} = 3\)</span> or <span class="math inline">\({\ \mu}_{ref} =
5\ \)</span>.</p>
<p>A slot configuration period of <img src="media/image167.svg"
style="width:0.19792in;height:0.17708in" /> msec includes <img
src="media/image172.svg" style="width:0.61458in;height:0.20833in" />
slots with SCS configuration <img src="media/image173.svg"
style="width:0.30208in;height:0.26042in" />. From the <img
src="media/image174.svg" style="width:0.19792in;height:0.17708in" />
slots, a first <img src="media/image175.svg"
style="width:0.30208in;height:0.26042in" /> slots include only downlink
symbols and a last <img src="media/image170.svg"
style="width:0.30208in;height:0.26042in" /> slots include only uplink
symbols. The <img src="media/image176.svg"
style="width:0.30208in;height:0.26042in" /> symbols after the first <img
src="media/image175.svg" style="width:0.30208in;height:0.26042in" />
slots are downlink symbols. The <img src="media/image171.svg"
style="width:0.26042in;height:0.26042in" /> symbols before the last <img
src="media/image170.svg" style="width:0.30208in;height:0.26042in" />
slots are uplink symbols. The remaining <img src="media/image177.svg"
style="width:1.80208in;height:0.26042in" /> are flexible symbols.</p>
<p>The first symbol every <img src="media/image178.svg"
style="width:0.30208in;height:0.19792in" /> periods is a first symbol in
an even frame.</p>
<p>If <em>tdd-UL-DL-ConfigurationCommon</em> provides both
<em>pattern1</em> and <em>pattern2</em>, the UE sets the slot format per
slot over a first number of slots as indicated by <em>pattern1</em> and
the UE sets the slot format per slot over a second number of slots as
indicated by <em>pattern2</em>.</p>
<p>The <em>pattern2</em> provides</p>
<p>- a slot configuration period of <img src="media/image179.svg"
style="width:0.17708in;height:0.19792in" /> msec by
<em>dl-UL-TransmissionPeriodicity</em></p>
<p>- a number of slots <img src="media/image180.svg"
style="width:0.36458in;height:0.26042in" /> with only downlink symbols
by <em>nrofDownlinkSlots</em></p>
<p>- a number of downlink symbols <img src="media/image181.svg"
style="width:0.36458in;height:0.26042in" /> by
<em>nrofDownlinkSymbols</em></p>
<p>- a number of slots <img src="media/image182.svg"
style="width:0.38542in;height:0.26042in" /> with only uplink symbols by
<em>nrofUplinkSlots</em></p>
<p>- a number of uplink symbols <img src="media/image183.svg"
style="width:0.30208in;height:0.26042in" /> by
<em>nrofUplinkSymbols</em></p>
<p>The applicable values of <img src="media/image184.svg"
style="width:0.17708in;height:0.19792in" /> are same as the applicable
values for <img src="media/image167.svg"
style="width:0.19792in;height:0.17708in" />.</p>
<p>A slot configuration period of <img src="media/image185.svg"
style="width:0.38542in;height:0.19792in" /> msec includes first <img
src="media/image186.svg" style="width:0.61458in;height:0.19792in" />
slots and second <img src="media/image187.svg"
style="width:0.69792in;height:0.21875in" /> slots.</p>
<p>From the <img src="media/image188.svg"
style="width:0.125in;height:0.19792in" /> slots, a first <img
src="media/image189.svg" style="width:0.36458in;height:0.26042in" />
slots include only downlink symbols and a last <img
src="media/image182.svg" style="width:0.38542in;height:0.26042in" />
include only uplink symbols. The <img src="media/image190.svg"
style="width:0.32292in;height:0.26042in" /> symbols after the first <img
src="media/image189.svg" style="width:0.36458in;height:0.26042in" />
slots are downlink symbols. The <img src="media/image191.svg"
style="width:0.30208in;height:0.26042in" /> symbols before the last <img
src="media/image182.svg" style="width:0.38542in;height:0.26042in" />
slots are uplink symbols. The remaining <img src="media/image192.svg"
style="width:1.97917in;height:0.26042in" /> are flexible symbols.</p>
<p>A UE expects that <img src="media/image185.svg"
style="width:0.38542in;height:0.20833in" /> divides 20 msec.</p>
<p>The first symbol every <img src="media/image193.svg"
style="width:0.69792in;height:0.19792in" /> periods is a first symbol in
an even frame.</p>
<p>A UE expects that the reference SCS configuration <img
src="media/image194.svg" style="width:0.30208in;height:0.21875in" /> is
smaller than or equal to a SCS configuration <img
src="media/image195.svg" style="width:0.19792in;height:0.17708in" /> for
any configured DL BWP or UL BWP. Each slot provided by <em>pattern1</em>
or <em>pattern2</em> is applicable to <img src="media/image196.svg"
style="width:0.38542in;height:0.19792in" /> consecutive slots in the
active DL BWP or the active UL BWP where the first slot starts at a same
time as a first slot for the reference SCS configuration <img
src="media/image194.svg" style="width:0.30208in;height:0.21875in" /> and
each downlink or flexible or uplink symbol for the reference SCS
configuration <img src="media/image194.svg"
style="width:0.30208in;height:0.21875in" /> corresponds to <img
src="media/image197.svg" style="width:0.38542in;height:0.19792in" />
consecutive downlink or flexible or uplink symbols for the SCS
configuration <img src="media/image195.svg"
style="width:0.19792in;height:0.17708in" />.</p>
<p>If the UE is additionally provided
<em>tdd-UL-DL-ConfigurationDedicated</em>, the parameter
<em>tdd-UL-DL-ConfigurationDedicated</em> overrides only flexible
symbols per slot over the number of slots as provided by
<em>tdd-UL-DL-ConfigurationCommon</em>.</p>
<p>The <em>tdd-UL-DL-ConfigurationDedicated</em> provides</p>
<p>- a set of slot configurations by
<em>slotSpecificConfigurationsToAddModList</em></p>
<p>- for each slot configuration from the set of slot configurations</p>
<p>- a slot index for a slot provided by <em>slotIndex</em></p>
<p>- a set of symbols for a slot by <em>symbols</em> where</p>
<p>- if <em>symbols</em> = <em>allDownlink</em>, all symbols in the slot
are downlink</p>
<p>- if <em>symbols</em> = <em>allUplink</em>, all symbols in the slot
are uplink</p>
<p>- if <em>symbols</em> = <em>explicit</em>,
<em>nrofDownlinkSymbols</em> provides a number of downlink first symbols
in the slot and <em>nrofUplinkSymbols</em> provides a number of uplink
last symbols in the slot. If <em>nrofDownlinkSymbols</em> is not
provided, there are no downlink first symbols in the slot and if
<em>nrofUplinkSymbols</em> is not provided, there are no uplink last
symbols in the slot. The remaining symbols in the slot are flexible</p>
<p>For each slot having a corresponding index provided by
<em>slotIndex</em>, the UE applies a format provided by a corresponding
<em>symbols</em>. The UE does not expect
<em>tdd-UL-DL-ConfigurationDedicated</em> to indicate as uplink or as
downlink a symbol that <em>tdd-UL-DL-ConfigurationCommon</em> indicates
as a downlink or as an uplink symbol, respectively.</p>
<p>For each slot configuration provided by
<em>tdd-UL-DL-ConfigurationDedicated</em>, a reference SCS configuration
is the reference SCS configuration <img src="media/image198.svg"
style="width:0.25278in;height:0.21944in" /> provided by
<em>tdd-UL-DL-ConfigurationCommon</em>.</p>
<p>A slot configuration period and a number of downlink symbols, uplink
symbols, and flexible symbols in each slot of the slot configuration
period are determined from <em>tdd-UL-DL-ConfigurationCommon</em> and
<em>tdd-UL-DL-ConfigurationDedicated</em> and are common to each
configured BWP.</p>
<p>A UE considers symbols in a slot indicated as downlink by
<em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em> to be available for receptions
and considers symbols in a slot indicated as uplink by
<em>tdd-UL-DL-ConfigurationCommon</em>, or by
<em>tdd</em>-<em>UL-DL-ConfigurationDedicated</em> to be available for
transmissions.</p>
<p>If a UE is not configured to monitor PDCCH for DCI format 2_0, for a
set of symbols of a slot that are indicated as flexible by
<em>tdd-UL-DL-ConfigurationCommon</em> and
<em>tdd</em>-<em>UL-DL-ConfigurationDedicated</em> if provided, or when
<em>tdd-UL-DL-ConfigurationCommon</em> and
<em>tdd</em>-<em>UL-DL-ConfigurationDedicated</em> are not provided to
the UE</p>
<p>- the UE receives PDSCH or CSI-RS in the set of symbols of the slot
if the UE receives a corresponding indication by a DCI format</p>
<p>- the UE transmits PUSCH, PUCCH, PRACH, or SRS in the set of symbols
of the slot if the UE receives a corresponding indication by a DCI
format, a RAR UL grant, fallbackRAR UL grant, or successRAR</p>
<p>For operation on a single carrier in unpaired spectrum, if a UE is
configured by higher layers to receive a PDCCH, or a PDSCH, or a CSI-RS,
or a DL PRS in a set of symbols of a slot, the UE receives the PDCCH,
the PDSCH, the CSI-RS, or the DL PRS if the UE does not detect a DCI
format that indicates to the UE to transmit a PUSCH, a PUCCH, a PRACH,
or a SRS in at least one symbol of the set of symbols of the slot;
otherwise, the UE does not receive the PDCCH, or the PDSCH, or the
CSI-RS, or the DL PRS in the set of symbols of the slot.</p>
<p>For a UE operation with shared spectrum channel access in FR1, or in
FR2-2 when the UE is provided <em>ChannelAccessMode2</em> =
'<em>enabled</em>', if the UE is provided
<em>csi-RS-ValidationWithDCI</em>, is not provided
<em>CO-DurationsPerCell</em>, and is not provided
<em>SlotFormatCombinationsPerCell</em>, and if the UE is configured by
higher layers to receive a CSI-RS in a set of symbols of a slot, the UE
cancels the CSI-RS reception in the set of symbols of the slot if the UE
does not detect a DCI format indicating an aperiodic CSI-RS reception or
scheduling a PDSCH reception in the set of symbols of the slot.</p>
<p>If a UE is provided <em>channelAccessMode ='dynamic'</em> and is
provided <em>availableRB-SetsToAddModList</em> and
<em>availableRB-SetsToReleaseList</em>, the UE expects to be provided
<em>co-DurationsPerCellToAddModList</em> and
<em>co-DurationsPerCellToReleaseList</em> and/or
<em>slotFormatCombToAddModList</em> and
<em>slotFormatCombToReleaseList</em>.</p>
<p>For operation on a single carrier in unpaired spectrum, if a UE is
configured by higher layers to transmit SRS, or PUCCH, or PUSCH, or
PRACH in a set of symbols of a slot and the UE detects a DCI format
indicating to the UE to receive CSI-RS or PDSCH in a subset of symbols
from the set of symbols, then</p>
<p>- If the UE does not indicate the capability of
[partialCancellation], the UE does not expect to cancel the transmission
of the PUCCH or PUSCH or PRACH in the set of symbols if the first symbol
in the set occurs within <span class="math inline">\(T_{proc,2\
}\)</span> relative to a last symbol of a PDCCH reception where the UE
detects the DCI format; otherwise, the UE cancels the PUCCH, or the
PUSCH, or an actual repetition of the PUSCH [6, TS 38.214], determined
from clauses 9, 9.2.5 and 9.2.6 or clause 6.1 of [6, TS 38.214], or the
PRACH transmission in the set of symbols.</p>
<p>- If the UE indicates the capability of [partialCancellation], the UE
does not expect to cancel the transmission of the PUCCH or PUSCH or
PRACH in symbols from the set of symbols that occur within <span
class="math inline">\(T_{proc,2}\)</span> relative to a last symbol of a
PDCCH reception where the UE detects the DCI format. The UE cancels the
PUCCH, or the PUSCH, or an actual repetition of the PUSCH [6, TS
38.214], determined from clauses 9, 9.2.5 and 9.2.6 or clause 6.1 of [6,
TS 38.214], or the PRACH transmission in remaining symbols from the set
of symbols.</p>
<p>- The UE does not expect to cancel the transmission of SRS in symbols
from the subset of symbols that occur within <span
class="math inline">\(T_{proc,2}\)</span> relative to a last symbol of a
PDCCH reception where the UE detects the DCI format. The UE cancels the
SRS transmission in remaining symbols from the subset of symbols.</p>
<p><span class="math inline">\(T_{proc,2}\)</span> is the PUSCH
preparation time for the corresponding UE processing capability [6, TS
38.214] assuming <span class="math inline">\(d_{2,1} = 1\)</span> and
<span class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration between the SCS configuration of the PDCCH carrying the
DCI format and the SCS configuration of the SRS, PUCCH, PUSCH or <span
class="math inline">\(\mu_{r}\)</span>, where <span
class="math inline">\(\mu_{r}\)</span> corresponds to the SCS
configuration of the PRACH if it is 15kHz or higher; otherwise <span
class="math inline">\(\mu_{r} = 0\)</span>.</p>
<p>For a set of symbols of a slot that are indicated to a UE as uplink
by <em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em>, the UE does not receive
PDCCH, PDSCH, or CSI-RS when the PDCCH, PDSCH, or CSI-RS overlaps, even
partially, with the set of symbols of the slot.</p>
<p>For a set of symbols of a slot that are indicated to a UE as uplink
by <em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em>, the UE does not receive DL
PRS in the set of symbols of the slot, if the UE is not provided with a
measurement gap.</p>
<p>For a set of symbols of a slot that are indicated to a UE as downlink
by <em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em>, the UE does not transmit
PUSCH, PUCCH, PRACH, or SRS when the PUSCH, PUCCH, PRACH, or SRS
overlaps, even partially, with the set of symbols of the slot.</p>
<p>For a set of symbols of a slot that are indicated to a UE as flexible
by <em>tdd-UL-DL-ConfigurationCommon</em>, and
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, the UE does not
expect to receive both dedicated higher layer parameters configuring
transmission from the UE in the set of symbols of the slot and dedicated
higher layer parameters configuring reception by the UE in the set of
symbols of the slot.</p>
<p>For operation on a single carrier in unpaired spectrum, for a set of
symbols of a slot indicated to a UE for reception of SS/PBCH blocks by
<em>ssb-PositionsInBurst</em> in <em>SIB1</em> or by
<em>ssb-PositionsInBurst</em> in <em>ServingCellConfigCommon</em> or, if
the UE is not provided <em>dl-OrJointTCI-StateList</em>, by
<em>ssb-PositionsInBurst</em> in <em>SSB-MTCAdditionalPCI</em>
associated to physical cell ID with active TCI states for PDCCH or
PDSCH, or for a set of symbols of a slot corresponding to SS/PBCH blocks
configured for L1 beam measurement/reporting, the UE does not transmit
PUSCH, PUCCH, PRACH in the slot if a transmission would overlap with any
symbol from the set of symbols and the UE does not transmit SRS in the
set of symbols of the slot. The UE does not expect the set of symbols of
the slot to be indicated as uplink by
<em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em>, when provided to the UE.</p>
<p>If a UE</p>
<p>- is configured with multiple serving cells and is provided with
<em>directionalCollisionHandling-r16</em> = 'enabled' for a set of
serving cell(s) among the multiple serving cells, and</p>
<p>- indicates support of <em>half-DuplexTDD-CA-SameSCS-r16</em>
capability, and</p>
<p>- is not configured to monitor PDCCH for detection of DCI format 2_0
on any of the multiple serving cells,</p>
<p>for a set of symbols of a slot that are indicated to the UE for
reception of SS/PBCH blocks in a first cell of the multiple serving
cells by <em>ssb-PositionsInBurst</em> in
<em>SystemInformationBlockType1</em> or by <em>ssb-PositionsInBurst</em>
in <em>ServingCellConfigCommon</em> or, if the UE is not provided
<em>dl-OrJointTCI-StateList</em>, by <em>ssb-PositionsInBurst</em> in
<em>SSB-MTCAdditionalPCI</em> associated to physical cell ID with active
TCI states for PDCCH or PDSCH, or for a set of symbols of a slot
corresponding to SS/PBCH blocks configured for L1 beam
measurement/reporting, the UE does not transmit PUSCH, PUCCH, or PRACH
in the slot if a transmission would overlap with any symbol from the set
of symbols, and the UE does not transmit SRS in the set of symbols of
the slot in</p>
<p>- any of the multiple serving cells if the UE is not capable of
simultaneous transmission and reception as indicated by
<em>simultaneousRxTxInterBandCA</em> among the multiple serving cells,
and</p>
<p>- any one of the cells corresponding to the same band as the first
cell, irrespective of any capability indicated by
<em>simultaneousRxTxInterBandCA</em>.</p>
<p>For a set of symbols of a slot corresponding to a valid PRACH
occasion and <img src="media/image199.svg"
style="width:0.28125in;height:0.22917in" /> symbols before the valid
PRACH occasion, as described in clause 8.1, the UE does not receive
PDCCH, PDSCH, or CSI-RS in the slot if a reception would overlap with
any symbol from the set of symbols. The UE does not expect the set of
symbols of the slot to be indicated as downlink by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em>.</p>
<p>For a set of symbols of a slot indicated to a UE by
<em>pdcch-ConfigSIB1</em> in <em>MIB</em> for a CORESET for Type0-PDCCH
CSS set, the UE does not expect the set of symbols to be indicated as
uplink by <em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em>.</p>
<p>If a UE is scheduled by a DCI format to receive PDSCH over multiple
slots, and if <em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em>, indicate that, for a slot
from the multiple slots, at least one symbol from a set of symbols where
the UE is scheduled PDSCH reception in the slot is an uplink symbol, the
UE does not receive the PDSCH in the slot.</p>
<p>If a UE is scheduled by a DCI format to transmit PUSCH over multiple
slots, and if <em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em>, indicates that, for a slot
from the multiple slots, at least one symbol from a set of symbols where
the UE is scheduled PUSCH transmission in the slot is a downlink symbol,
the UE does not transmit the PUSCH in the slot.</p>
<p>If a UE</p>
<p>- is configured with multiple serving cells and is provided with
<em>directionalCollisionHandling-r16</em> = 'enabled' for a set of
serving cell(s) among the configured multiple serving cells, and</p>
<p>- indicates support of <em>half-DuplexTDD-CA-SameSCS-r16</em>
capability, and</p>
<p>- is not configured to monitor PDCCH for detection of DCI format 2_0
on any of the multiple serving cells,</p>
<p>the UE determines a reference cell for a symbol as an active cell
with the smallest cell index among</p>
<p>- the configured multiple serving cells if the UE is not capable of
simultaneous transmission and reception as indicated by
<em>simultaneousRxTxInterBandCA</em> among the multiple serving cells,
and</p>
<p>- the cells of each band respectively if the UE is capable of
simultaneous transmission and reception by
<em>simultaneousRxTxInterBandCA</em> for the configured multiple serving
cells,</p>
<p>where the symbol is configured as</p>
<p>- downlink, or uplink, as indicated by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em></p>
<p>- uplink, if the symbol is flexible and the UE is configured to
transmit SRS, PUCCH, PUSCH, or PRACH on the symbol</p>
<p>- downlink, if the symbol is flexible and the UE is configured to
receive PDCCH, PDSCH or CSI-RS on the symbol.</p>
<p>And if another cell among the cells configured with
<em>directionalCollisionHandling-r16</em> operates in the same frequency
band as the reference cell, the UE does not expect</p>
<p>- a symbol to be indicated as downlink or uplink on the reference
cell and as uplink or downlink on another cell, respectively, by
<em>tdd-UL-DL-ConfigurationCommon</em> or by
<em>tdd-UL-DL-ConfigurationDedicated</em>,</p>
<p>- <em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> to indicate a symbol as
downlink on the reference cell and to detect a DCI format scheduling a
transmission on the symbol on another cell, and</p>
<p>- to be configured by higher layers to receive PDCCH, PDSCH, or
CSI-RS on a flexible symbol on the reference cell and to detect a DCI
format scheduling a transmission on the symbol on another cell,</p>
<p>if the reference cell and another cell among the cells configured
with <em>directionalCollisionHandling-r16</em> operate in different
frequency bands,</p>
<p>the UE</p>
<p>- assumes symbol as flexible, is not required to receive higher layer
configured PDCCH, PDSCH, or CSI-RS and not expected to transmit higher
layer configured SRS, PUCCH, PUSCH, or PRACH, when
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> indicates symbol as downlink
or uplink on another cell and as uplink or downlink for the reference
cell, respectively,</p>
<p>- transmits a signal/channel scheduled by a DCI format on a symbol of
another cell when the symbol is indicated as downlink by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> for the reference cell,</p>
<p>- is not required to receive a higher layer configured PDCCH, PDSCH,
or CSI-RS on flexible symbols on the reference cell in a set of symbols,
if the UE detects a DCI format scheduling a transmission on one or more
symbols in the set of symbols on another cell,</p>
<p>and regardless of whether the reference cell and another cell operate
in same or different frequency bands,</p>
<p>the UE</p>
<p>- does not expect <em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> for the reference cell to
indicate a symbol as uplink and to detect a DCI format scheduling a
reception on the symbol on another cell</p>
<p>- does not expect to be configured by higher layers to transmit SRS,
PUCCH, PUSCH, or PRACH on a flexible symbol on the reference cell and to
detect a DCI format scheduling a reception on the symbol on another
cell</p>
<p>- does not transmit a PUCCH, PUSCH or PRACH that is configured by
higher layers on a set of symbols on another cell if at least one symbol
from the set of symbols is indicated as downlink by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> or is a symbol corresponding
to a PDCCH, PDSCH, or CSI-RS reception that is configured by higher
layers on the reference cell</p>
<p>- does not transmit a SRS that is configured by higher layers on a
set of symbols on another cell if the set of symbols is indicated as
downlink by <em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> or corresponds to a PDCCH,
PDSCH or CSI-RS reception that is configured by higher layers on the
reference cell</p>
<p>- does not receive a PDCCH, PDSCH or CSI-RS that is configured by
higher layers on a set of symbols on another cell if at least one symbol
from the set of symbols is indicated as uplink by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> or is a symbol corresponding
to a SRS, PUCCH, PUSCH, or PRACH transmission that is configured by
higher layers on the reference cell</p>
<p>- assumes a symbol indicated as downlink or uplink by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd-UL-DL-ConfigurationDedicated</em> on another cell to be
flexible, if the UE is respectively configured by higher layers to
transmit SRS, PUCCH, PUSCH, or PRACH or to receive PDCCH, PDSCH, or
CSI-RS on the reference cell</p>
<p>- does not expect to detect a first DCI format scheduling a
transmission or reception on a symbol on a first cell and a second DCI
format scheduling a reception or transmission on the symbol on a second
cell, respectively.</p>
<p>After the UE applies the procedures described above for directional
collision handling within the set of cells that have been configured
with <em>directionalCollisionHandling-r16</em>, the UE does not expect
any directional collision among the serving cells that the UE is not
capable of simultaneous transmission and reception.</p>
<h3 id="ue-procedure-for-determining-slot-format">11.1.1 UE procedure
for determining slot format</h3>
<p>This clause applies for a serving cell that is included in a set of
serving cells configured to a UE by <em>slotFormatCombToAddModList</em>
and <em>slotFormatCombToReleaseList</em>,
<em>availableRB-SetsToAddModList</em> and
<em>availableRB-SetsToReleaseList</em>,
<em>switchTriggerToAddModList</em> and
<em>switchTriggerToReleaseList</em>, or
<em>co-DurationsPerCellToAddModList</em> and
<em>co-DurationsPerCellToReleaseList</em>.</p>
<p>If a UE is configured by higher layers with parameter
<em>SlotFormatIndicator</em>, the UE is provided an SFI-RNTI by
<em>sfi-RNTI</em> and with a payload size of DCI format 2_0 by
<em>dci-PayloadSize</em>.</p>
<p>The UE is also provided in one or more serving cells with a
configuration for a search space set <img src="media/image200.svg"
style="width:0.13542in;height:0.13542in" /> and a corresponding CORESET
<span class="math inline">\(p\)</span> for monitoring <span
class="math inline">\(M_{p,s}^{\left( L_{SFI} \right)}\)</span> PDCCH
candidates for DCI format 2_0 with a CCE aggregation level of <span
class="math inline">\(L_{SFI}\)</span> CCEs as described in clause 10.1.
The <span class="math inline">\(M_{p,s}^{\left( L_{SFI}
\right)}\)</span> PDCCH candidates are the first <span
class="math inline">\(M_{p,s}^{\left( L_{SFI} \right)}\)</span> PDCCH
candidates for CCE aggregation level <span
class="math inline">\(L_{SFI}\)</span> for search space set <span
class="math inline">\(s\)</span> in CORESET <span
class="math inline">\(p\)</span>.</p>
<p>For each serving cell in the set of serving cells, the UE can be
provided:</p>
<p>- an identity of the serving cell by <em>servingCellId</em></p>
<p>- a location of a SFI-index field in DCI format 2_0 by
<em>positionInDCI</em></p>
<p>- a set of slot format combinations by
<em>slotFormatCombinations</em>, where each slot format combination in
the set of slot format combinations includes</p>
<p>- one or more slot formats indicated by a respective
<em>slotFormats</em> for the slot format combination, and</p>
<p>- a mapping for the slot format combination provided by
<em>slotFormats</em> to a corresponding SFI-index field value in DCI
format 2_0 provided by <em>slotFormatCombinationId</em></p>
<p>- for unpaired spectrum operation, a reference SCS configuration
<span class="math inline">\(\mu_{SFI}\)</span> by
<em>subcarrierSpacing</em> and, when a supplementary UL carrier is
configured for the serving cell, a reference SCS configuration <span
class="math inline">\(\mu_{SFI,SUL}\)</span> by
<em>subcarrierSpacing2</em> for the supplementary UL carrier</p>
<p>- for paired spectrum operation, a reference SCS configuration <span
class="math inline">\(\mu_{SFI,DL}\)</span> for a DL BWP by
<em>subcarrierSpacing</em> and a reference SCS configuration <span
class="math inline">\(\mu_{SFI,UL}\)</span> for an UL BWP by
<em>subcarrierSpacing2</em></p>
<p>- a location of an available RB set indicator field in DCI format
2_0, by <em>availableRB-SetsPerCell</em>, where the field is</p>
<p>- one bit, if <em>intraCellGuardBandsDL-List</em> for the serving
cell indicates no intra-cell guard-bands are configured, where a value
of '1' indicates that the serving cell is available for receptions, a
value of '0' indicates that the serving cell is not available for
receptions, and the serving cell remains available or unavailable for
reception until the end of the remaining channel occupancy duration;
or,</p>
<p>- a bitmap having a one-to-one mapping with the RB sets [6, TS
38.214] of the serving cell, if <em>intraCellGuardBandsDL-List</em> for
the serving cell indicates intra-cell guard-bands are configured or if
<em>intraCellGuardBandsDL-List</em> is not provided for the serving
cell, where the bitmap includes <span
class="math inline">\(N_{RB,set,DL}\)</span> bits and <span
class="math inline">\(N_{RB,set,DL}\)</span> is the number of RB sets in
the serving cell, a value of '1' indicates that an RB set is available
for receptions, a value of '0' indicates that an RB set is not available
for receptions, and a RB set remains available or unavailable for
receptions until the end of the remaining channel occupancy duration</p>
<p>- a location of a channel occupancy duration field in DCI format 2_0,
by <em>CO-DurationsPerCell</em>, where the field indicates a remaining
channel occupancy duration for the serving cell starting from a first
symbol of a slot where the UE detects the DCI format 2_0 by providing a
value from <em>co-DurationList</em>. The channel occupancy duration
field includes <span class="math inline">\(\max\left\{ \left\lceil
\log_{2}(COdurationListSize) \right\rceil,1 \right\}\)</span> bits,
where <span class="math inline">\(COdurationListSize\)</span> is the
number of values provided by <em>co-DurationList</em>. If
<em>CO-DurationsPerCell</em> is not provided, the remaining channel
occupancy duration for the serving cell is a number of slots, starting
from the slot where the UE detects the DCI format 2_0, that the
SFI-index field value provides corresponding slot formats</p>
<p>- a reference SCS configuration for <em>co-DurationList</em>, by
<em>subcarrierSpacing</em></p>
<p>- a location of a search space set group switching flag field in DCI
format 2_0, by <em>SearchSpaceSwitchTrigger</em>, where the field
indicates a group from two groups of search space sets for PDCCH
monitoring for scheduling for the serving cell or the set of serving
cells, provided by <em>CellGroupsForSwitching</em>, as described in
clause 10.4.</p>
<p>If neither <em>CO-DurationsPerCell</em> nor
<em>SlotFormatCombinationsPerCell</em> are provided and if
<em>channelAccessMode</em> = "<em>semiStatic</em>" is provided, the
procedures in this clause apply with assuming a channel occupancy time
defined in clause 4.3 of [15, TS 37.213] is the remaining channel
occupancy duration if a DL transmission burst(s) is detected within the
channel occupancy time.</p>
<p>A SFI-index field value in a DCI format 2_0 indicates to a UE a slot
format for each slot in a number of slots for each DL BWP or each UL BWP
starting from a slot where the UE detects the DCI format 2_0. The number
of slots is equal to or larger than a PDCCH monitoring periodicity for
DCI format 2_0. The SFI-index field includes <img
src="media/image201.svg" style="width:1.875in;height:0.22917in" /> bits
where maxSFIindex is the maximum value of the values provided by
corresponding <em>slotFormatCombinationId</em>. A slot format is
identified by a corresponding format index as provided in Table 11.1.1-1
where 'D' denotes a downlink symbol, 'U' denotes an uplink symbol, and
'F' denotes a flexible symbol.</p>
<p>If a PDCCH monitoring periodicity for DCI format 2_0, provided to a
UE for the search space set <img src="media/image200.svg"
style="width:0.10417in;height:0.19792in" /> by
<em>monitoringSlotPeriodicityAndOffset</em>, is smaller than a duration
of a slot format combination the UE obtains at a PDCCH monitoring
occasion for DCI format 2_0 by a corresponding SFI-index field value,
and the UE detects more than one DCI formats 2_0 indicating a slot
format for a slot, the UE expects each of the more than one DCI formats
2_0 to indicate a same format for the slot.</p>
<p>A UE does not expect to be configured to monitor PDCCH for DCI format
2_0 on a second serving cell that uses larger SCS than the serving
cell.</p>
<p>Table 11.1.1-1: Slot formats for normal cyclic prefix</p>
<table style="width:100%;">
<colgroup>
<col style="width: 11%" />
<col style="width: 7%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
</colgroup>
<thead>
<tr>
<th rowspan="2" style="text-align: center;"><strong>Format</strong></th>
<th colspan="14" style="text-align: center;"><strong>Symbol number in a
slot</strong></th>
</tr>
<tr>
<th style="text-align: center;"><strong>0</strong></th>
<th style="text-align: center;"><strong>1</strong></th>
<th style="text-align: center;"><strong>2</strong></th>
<th style="text-align: center;"><strong>3</strong></th>
<th style="text-align: center;"><strong>4</strong></th>
<th style="text-align: center;"><strong>5</strong></th>
<th style="text-align: center;"><strong>6</strong></th>
<th style="text-align: center;"><strong>7</strong></th>
<th style="text-align: center;"><strong>8</strong></th>
<th style="text-align: center;"><strong>9</strong></th>
<th style="text-align: center;"><strong>10</strong></th>
<th style="text-align: center;"><strong>11</strong></th>
<th style="text-align: center;"><strong>12</strong></th>
<th style="text-align: center;"><strong>13</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">6</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">7</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">8</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">9</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">10</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">11</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">12</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">13</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">14</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">15</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">16</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">17</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">18</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">19</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">20</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">21</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">22</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">23</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">24</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">25</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">26</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">27</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">28</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">29</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">30</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">31</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">32</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">33</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">34</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">35</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">36</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">37</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">38</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">39</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">40</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">41</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">42</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">43</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">44</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">45</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">46</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">47</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">48</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">49</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">50</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">51</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">52</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">53</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
</tr>
<tr>
<td style="text-align: center;">54</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">55</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">56 – 254</td>
<td colspan="14" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td style="text-align: center;">255</td>
<td colspan="14" style="text-align: center;">UE determines the slot
format for the slot based on <em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em> and, if any, on detected DCI
formats</td>
</tr>
</tbody>
</table>
<p>For unpaired spectrum operation for a UE on a serving cell, the UE is
provided by <em>subcarrierSpacing</em> a reference SCS configuration
<span class="math inline">\(\mu_{SFI}\)</span> for each slot format in a
combination of slot formats indicated by an SFI-index field value in DCI
format 2_0. The UE expects that for a reference SCS configuration <span
class="math inline">\(\mu_{SFI}\)</span> and for an active DL BWP or an
active UL BWP with SCS configuration <span
class="math inline">\(\mu\)</span>, it is <span
class="math inline">\(\mu \geq \mu_{SFI}\)</span>. Each slot format in
the combination of slot formats indicated by the SFI-index field value
in DCI format 2_0 is applicable to <span class="math inline">\(2^{\left(
\mu - \mu_{SFI} \right)}\)</span> consecutive slots in the active DL BWP
or the active UL BWP where the first slot starts at a same time as a
first slot for the reference SCS configuration <span
class="math inline">\(\mu_{SFI}\)</span> and each downlink or flexible
or uplink symbol for the reference SCS configuration <span
class="math inline">\(\mu_{SFI}\)</span> corresponds to <img
src="media/image202.svg"
style="width:0.5in;height:0.19792in" /> consecutive downlink or flexible
or uplink symbols for the SCS configuration <span
class="math inline">\(\mu\)</span>.</p>
<p>For paired spectrum operation for a UE on a serving cell, the
SFI-index field in DCI format 2_0 indicates a combination of slot
formats that includes a combination of slot formats for a reference DL
BWP and a combination of slot formats for a reference UL BWP of the
serving cell. The UE is provided by <em>subcarrierSpacing</em> a
reference SCS configuration <span
class="math inline">\(\mu_{SFI,DL}\)</span> for the combination of slot
formats indicated by the SFI-index field value in DCI format 2_0 for the
reference DL BWP of the serving cell. The UE is provided by
<em>subcarrierSpacing2</em> a reference SCS configuration <span
class="math inline">\(\mu_{SFI,UL}\)</span> for the combination of slot
formats indicated by the SFI-index field value in DCI format 2_0 for the
reference UL BWP of the serving cell. If <span
class="math inline">\(\mu_{SFI,DL} \geq \mu_{SFI,UL}\)</span> and for
each <span class="math inline">\(2^{\left( \mu_{SFI,DL} - \mu_{SFI,UL}
\right)} + 1\)</span> values provided by a value of
<em>slotFormats</em>, where the value of <em>slotFormats</em> is
determined by a value of <em>slotFormatCombinationId</em> in
<em>slotFormatCombination</em> and the value of
<em>slotFormatCombinationId</em> is set by the value of the SFI-index
field value in DCI format 2_0, the first <span
class="math inline">\(2^{\left( \mu_{SFI,DL} - \mu_{SFI,UL}
\right)}\)</span> values for the combination of slot formats are
applicable to the reference DL BWP and the next value is applicable to
the reference UL BWP. If <span class="math inline">\(\mu_{SFI,DL} &lt;
\mu_{SFI,UL}\)</span> and for each <span class="math inline">\(2^{\left(
\mu_{SFI,UL} - \mu_{SFI,DL} \right)} + 1\)</span> values provided by
<em>slotFormats</em>, the first value for the combination of slot
formats is applicable to the reference DL BWP and the next <span
class="math inline">\(2^{\left( \mu_{SFI,UL} - \mu_{SFI,DL}
\right)}\)</span> values are applicable to the reference UL BWP.</p>
<p>The UE is provided a reference SCS configuration <span
class="math inline">\(\mu_{SFI,DL}\)</span> so that for an active DL BWP
with SCS configuration <span class="math inline">\(\mu_{DL}\)</span>, it
is <span class="math inline">\(\mu_{DL} \geq \mu_{SFI,DL}\)</span>. The
UE is provided a reference SCS configuration <span
class="math inline">\(\mu_{SFI,UL}\)</span> so that for an active UL BWP
with SCS configuration <span class="math inline">\(\mu_{UL}\)</span>, it
is <span class="math inline">\(\mu_{UL} \geq \mu_{SFI,UL}\)</span>. Each
slot format for a combination of slot formats indicated by the SFI-index
field value in DCI format 2_0 for the reference DL BWP, by indicating a
value for <em>slotFormatCombinationId</em> that is mapped to a value of
<em>slotFormats</em> in <em>slotFormatCombination</em>, is applicable to
<span class="math inline">\(2^{\left( \mu_{DL} - \mu_{SFI,DL}
\right)}\)</span> consecutive slots for the active DL BWP where the
first slot starts at a same time as a first slot in the reference DL BWP
and each downlink or flexible symbol for the reference SCS configuration
<span class="math inline">\(\mu_{SFI,DL}\)</span> corresponds to <span
class="math inline">\(2^{\left( \mu_{DL} - \mu_{SFI,DL}
\right)}\)</span> consecutive downlink or flexible symbols for the SCS
configuration <span class="math inline">\(\mu_{DL}\)</span>. Each slot
format for the combination of slot formats for the reference UL BWP is
applicable to <span class="math inline">\(2^{\left( \mu_{UL} -
\mu_{SFI,UL} \right)}\)</span> consecutive slots for the active UL BWP
where the first slot starts at a same time as a first slot in the
reference UL BWP and each uplink or flexible symbol for the reference
SCS configuration <span class="math inline">\(\mu_{SFI,UL}\)</span>
corresponds to <span class="math inline">\(2^{\left( \mu_{UL} -
\mu_{SFI,UL} \right)}\)</span> consecutive uplink or flexible symbols
for the SCS configuration <span
class="math inline">\(\mu_{UL}\)</span>.</p>
<p>For unpaired spectrum operation with a second UL carrier for a UE on
a serving cell, the SFI-index field value in DCI format 2_0 indicates a
combination of slot formats that includes a combination of slot formats
for a reference first UL carrier of the serving cell and a combination
of slot formats for a reference second UL carrier of the serving cell.
The UE is provided by <em>subcarrierSpacing</em> a reference SCS
configuration <span class="math inline">\(\mu_{SFI}\)</span> for the
combination of slot formats indicated by the SFI-index field in DCI
format 2_0 for the reference first UL carrier of the serving cell. The
UE is provided by <em>subcarrierSpacing2</em> a reference SCS
configuration <span class="math inline">\(\mu_{SFI,SUL}\)</span> for the
combination of slot formats indicated by the SFI-index field value in
DCI format 2_0 for the reference second UL carrier of the serving cell.
For each <span class="math inline">\(2^{\left( \mu_{SFI} - \mu_{SFI,SUL}
\right)} + 1\)</span> values of <em>slotFormats</em>, the first <span
class="math inline">\(2^{\left( \mu_{SFI} - \mu_{SFI,SUL}
\right)}\)</span> values for the combination of slot formats are
applicable to the reference first UL carrier and the next value is
applicable to the reference second UL carrier.</p>
<p>The UE expects to be provided a reference SCS configuration <span
class="math inline">\(\mu_{SFI,SUL}\)</span> so that for an active UL
BWP in the second UL carrier with SCS configuration <span
class="math inline">\(\mu_{SUL}\)</span>, it is <span
class="math inline">\(\mu_{SUL} \geq \mu_{SFI,SUL}\)</span>. Each slot
format for a combination of slot formats indicated by the SFI-index
field in DCI format 2_0 for the reference first UL carrier is applicable
to <span class="math inline">\(2^{\left( \mu - \mu_{SFI}
\right)}\)</span> consecutive slots for the active DL BWP and the active
UL BWP in the first UL carrier where the first slot starts at a same
time as a first slot in the reference first UL carrier. Each slot format
for the combination of slot formats for the reference second UL carrier
is applicable to <span class="math inline">\(2^{\left( \mu_{SUL} -
\mu_{SFI,SUL} \right)}\)</span> consecutive slots for the active UL BWP
in the second UL carrier where the first slot starts at a same time as a
first slot in the reference second UL carrier.</p>
<p>If a BWP in the serving cell is configured with <span
class="math inline">\(\mu = 2\)</span> and with extended CP, the UE
expects <span class="math inline">\(\mu_{SFI} = 0\)</span>, <span
class="math inline">\(\mu_{SFI} = 1\)</span>, or <span
class="math inline">\(\mu_{SFI} = 2\)</span>. A format for a slot with
extended CP is determined from a format for a slot with normal CP. A UE
determines an extended CP symbol to be a downlink/uplink/flexible symbol
if the overlapping normal CP symbols that are downlink/uplink/flexible
symbols, respectively. A UE determines an extended CP symbol to be a
flexible symbol if one of the overlapping normal CP symbols is flexible.
A UE determines an extended CP symbol to be a flexible symbol if the
pair of the overlapping normal CP symbols includes a downlink and an
uplink symbol.</p>
<p>A reference SCS configuration <span
class="math inline">\(\mu_{SFI}\)</span>, or <span
class="math inline">\(\mu_{SFI,DL}\)</span>, or <span
class="math inline">\(\mu_{SFI,UL}\)</span>, or <span
class="math inline">\(\mu_{SFI,SUL}\)</span> is either 0, or 1, or 2 for
FR1 and is either 2 or 3 for FR2.</p>
<p>For a set of symbols of a slot, a UE does not expect to detect a DCI
format 2_0 with an SFI-index field value indicating the set of symbols
of the slot as uplink and to detect a DCI format indicating to the UE to
receive PDSCH or CSI-RS in the set of symbols of the slot.</p>
<p>For a set of symbols of a slot, a UE does not expect to detect a DCI
format 2_0 with an SFI-index field value indicating the set of symbols
in the slot as downlink and to detect a DCI format, a RAR UL grant,
fallbackRAR UL grant, or successRAR indicating to the UE to transmit
PUSCH, PUCCH, PRACH, or SRS in the set of symbols of the slot.</p>
<p>For a set of symbols of a slot that are indicated by a DCI format 2_0
as being within a remaining channel occupancy duration either by a
channel occupancy duration field or by an SFI-index field, a UE does not
expect to detect at a later time a DCI format 2_0 indicating, either by
a channel occupancy duration field or by an SFI-index field, that any
symbol from the set of symbols is not within a remaining channel
occupancy duration.</p>
<p>For a set of symbols of a slot that are indicated as downlink/uplink
by <em>tdd-UL-DL-ConfigurationCommon</em>, or
<em>tdd-UL-DL-ConfigurationDedicated</em>, the UE does not expect to
detect a DCI format 2_0 with an SFI-index field value indicating the set
of symbols of the slot as uplink/downlink, respectively, or as
flexible.</p>
<p>For a set of symbols of a slot corresponding to SS/PBCH blocks with
candidate SS/PBCH block indices corresponding to the SS/PBCH block
indexes indicated to a UE by <em>ssb-PositionsInBurst</em> in
<em>SIB1,</em> or by <em>ssb-PositionsInBurst</em> in
<em>ServingCellConfigCommon</em>, as described in clause 4.1 or, if the
UE is not provided <em>dl-OrJointTCI-StateList</em>, by
<em>ssb-PositionsInBurst</em> in <em>SSB-MTCAdditionalPCI</em>
associated to physical cell ID with active TCI states for PDCCH or
PDSCH, or for a set of symbols of a slot corresponding to SS/PBCH blocks
configured for L1 beam measurement/reporting, the UE does not expect to
detect a DCI format 2_0 with an SFI-index field value indicating the set
of symbols of the slot as uplink.</p>
<p>For a set of symbols of a slot corresponding to a valid PRACH
occasion and <span class="math inline">\(N_{gap}\)</span> symbols before
the valid PRACH occasion, as described in clause 8.1, the UE does not
expect to detect a DCI format 2_0 with an SFI-index field value
indicating the set of symbols of the slot as downlink.</p>
<p>For a set of symbols of a slot indicated to a UE by
<em>pdcch-ConfigSIB1</em> in <em>MIB</em> for a CORESET for Type0-PDCCH
CSS set, the UE does not expect to detect a DCI format 2_0 with an
SFI-index field value indicating the set of symbols of the slot as
uplink.</p>
<p>For a set of symbols of a slot indicated to a UE as flexible by
<em>tdd-UL-DL-ConfigurationCommon</em> and
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, or when
<em>tdd-UL-DL-ConfigurationCommon</em> and
<em>tdd-UL-DL-ConfigurationDedicated</em> are not provided to the UE,
and if the UE detects a DCI format 2_0 providing a format for the slot
using a slot format value other than 255</p>
<p>- if one or more symbols from the set of symbols are symbols in a
CORESET configured to the UE for PDCCH monitoring, the UE receives PDCCH
in the CORESET only if an SFI-index field value in DCI format 2_0
indicates that the one or more symbols are downlink symbols</p>
<p>- if an SFI-index field value in DCI format 2_0 indicates the set of
symbols of the slot as flexible and the UE detects a DCI format
indicating to the UE to receive PDSCH or CSI-RS in the set of symbols of
the slot, the UE receives PDSCH or CSI-RS in the set of symbols of the
slot</p>
<p>- if an SFI-index field value in DCI format 2_0 indicates the set of
symbols of the slot as flexible and the UE detects a DCI format, a RAR
UL grant, fallbackRAR UL grant, or successRAR indicating to the UE to
transmit PUSCH, PUCCH, PRACH, or SRS in the set of symbols of the slot
the UE transmits the PUSCH, PUCCH, PRACH, or SRS in the set of symbols
of the slot</p>
<p>- if an SFI-index field value in DCI format 2_0 indicates the set of
symbols of the slot as flexible, and the UE does not detect a DCI format
indicating to the UE to receive PDSCH or CSI-RS, or the UE does not
detect a DCI format, a RAR UL grant, fallbackRAR UL grant, or successRAR
indicating to the UE to transmit PUSCH, PUCCH, PRACH, or SRS in the set
of symbols of the slot, the UE does not transmit or receive in the set
of symbols of the slot</p>
<p>- if the UE is configured by higher layers to receive PDSCH or CSI-RS
in the set of symbols of the slot, the UE receives the PDSCH or the
CSI-RS in the set of symbols of the slot only if an SFI-index field
value in DCI format 2_0 indicates the set of symbols of the slot as
downlink and, if applicable, the set of symbols is within remaining
channel occupancy duration</p>
<p>- if the UE is configured by higher layers to receive DL PRS in the
set of symbols of the slot, the UE receives the DL PRS in the set of
symbols of the slot only if an SFI-index field value in DCI format 2_0
indicates the set of symbols of the slot as downlink or flexible.</p>
<p>- if the UE is configured by higher layers to transmit PUCCH, or
PUSCH, or PRACH in the set of symbols of the slot, the UE transmits the
PUCCH, or the PUSCH, or the PRACH in the slot only if an SFI-index field
value in DCI format 2_0 indicates the set of symbols of the slot as
uplink</p>
<p>- if the UE is configured by higher layers to transmit SRS in the set
of symbols of the slot, the UE transmits the SRS only in a subset of
symbols from the set of symbols of the slot indicated as uplink symbols
by an SFI-index field value in DCI format 2_0</p>
<p>- a UE does not expect to detect an SFI-index field value in DCI
format 2_0 indicating the set of symbols of the slot as downlink and
also detect a DCI format, a RAR UL grant, fallbackRAR UL grant, or
successRAR indicating to the UE to transmit SRS, PUSCH, PUCCH, or PRACH,
in one or more symbols from the set of symbols of the slot</p>
<p>- a UE does not expect to detect an SFI-index field value in DCI
format 2_0 indicating the set of symbols of the slot as downlink or
flexible if the set of symbols of the slot includes symbols
corresponding to any repetition of a PUSCH transmission activated by an
UL Type 2 grant PDCCH as described in clause 10.2</p>
<p>- a UE does not expect to detect an SFI-index field value in DCI
format 2_0 indicating the set of symbols of the slot as uplink and also
detect a DCI format indicating to the UE to receive PDSCH or CSI-RS in
one or more symbols from the set of symbols of the slot</p>
<p>If a UE is configured by higher layers to receive a CSI-RS or a PDSCH
in a set of symbols of a slot and the UE detects a DCI format 2_0 with a
slot format value other than 255 that indicates a slot format with a
subset of symbols from the set of symbols as uplink or flexible, or the
UE detects a DCI format indicating to the UE to transmit PUSCH, PUCCH,
SRS, or PRACH in at least one symbol in the set of the symbols, the UE
cancels the CSI-RS reception in the set of symbols of the slot or
cancels the PDSCH reception in the slot.</p>
<p>For a UE operation with shared spectrum channel access in FR1, or in
FR2-2 when the UE is provided <em>ChannelAccessMode2</em> =
'<em>enabled</em>', if a UE is configured by higher layers to receive a
CSI-RS and the UE is provided <em>CO-DurationsPerCell</em>, for a set of
symbols of a slot that are indicated as downlink or flexible by
<em>tdd-UL-DL-ConfigurationCommon</em> or
<em>tdd</em>-<em>UL-DL-ConfigurationDedicated</em>, or when
<em>tdd-UL-DL-ConfigurationCommon</em> and
<em>tdd</em>-<em>UL-DL-ConfigurationDedicated</em> are not provided, the
UE cancels the CSI-RS reception in the set of symbols of the slot that
are not within the remaining channel occupancy duration.</p>
<p>If a UE is configured by higher layers to receive a DL PRS in a set
of symbols of a slot and the UE detects a DCI format 2_0 with a slot
format value other than 255 that indicates a slot format with a subset
of symbols from the set of symbols as uplink, or the UE detects a DCI
format indicating to the UE to transmit PUSCH, PUCCH, SRS, or PRACH in
at least one symbol in the set of the symbols, the UE cancels the DL PRS
reception in the set of symbols of the slot.</p>
<p>If a UE is configured by higher layers to transmit SRS, or PUCCH, or
PUSCH, or PRACH in a set of symbols of a slot and the UE detects a DCI
format 2_0 with a slot format value other than 255 that indicates a slot
format with a subset of symbols from the set of symbols as downlink or
flexible, or the UE detects a DCI format indicating to the UE to receive
CSI-RS or PDSCH in a subset of symbols from the set of symbols, then</p>
<blockquote>
<p>- If the UE does not indicate the capability of
[partialCancellation], the UE does not expect to cancel the transmission
of the PUCCH or PUSCH or PRACH in the set of symbols if the first symbol
in the set occurs within <span class="math inline">\(T_{proc,2}\)</span>
relative to a last symbol of a PDCCH reception where the UE detects the
DCI format; otherwise, the UE cancels the PUCCH, or the PUSCH, or an
actual repetition of the PUSCH [6, TS 38.214], determined from clauses
9, 9.2.5 and 9.2.6 or clause 6.1 of [6, TS 38.214], or the PRACH
transmission in the set of symbols.</p>
</blockquote>
<p>- If the UE indicates the capability of [partialCancellation], the UE
does not expect to cancel the transmission of the PUCCH or PUSCH or
PRACH in symbols from the set of symbols that occur within <span
class="math inline">\(T_{proc,2}\)</span> relative to a last symbol of a
PDCCH reception where the UE detects the DCI format. The UE cancels the
PUCCH, or the PUSCH, or an actual repetition of the PUSCH [6, TS
38.214], determined from clauses 9, 9.2.5 and 9.2.6 or clause 6.1 of [6,
TS 38.214], or the PRACH transmission in remaining symbols from the set
of symbols.</p>
<p>- The UE does not expect to cancel the transmission of SRS in symbols
from the subset of symbols that occur within <span
class="math inline">\(T_{proc,2}\)</span> relative to a last symbol of a
PDCCH reception where the UE detects the DCI format. The UE cancels the
SRS transmission in remaining symbols from the subset of symbols.</p>
<p><span class="math inline">\(T_{proc,2}\)</span> is the PUSCH
preparation time for the corresponding UE processing capability [6, TS
38.214] assuming <span class="math inline">\(d_{2,1} = 1\)</span> and
<span class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration between the SCS configuration of the PDCCH carrying the
DCI format and the SCS configuration of the SRS, PUCCH, PUSCH or <span
class="math inline">\(\mu_{r}\)</span>, where <span
class="math inline">\(\mu_{r}\)</span> corresponds to the SCS
configuration of the PRACH if it is 15kHz or higher; otherwise <span
class="math inline">\(\mu_{r} = 0\)</span>.</p>
<p>If a UE is configured by higher layers to receive a CSI-RS or detects
a DCI format 0_1 indicating to the UE to receive a CSI-RS in one or more
RB sets and a set of symbols of a slot, and the UE detects a DCI format
2_0 with bitmap indicating that any RB set from the one or more RB sets
is not available for reception, the UE cancels the CSI-RS reception in
the set of symbols of the slot.</p>
<p>A UE assumes that flexible symbols in a CORESET configured to the UE
for PDCCH monitoring are downlink symbols if the UE does not detect an
SFI-index field value in DCI format 2_0 indicating the set of symbols of
the slot as flexible or uplink and the UE does not detect a DCI format
indicating to the UE to transmit SRS, PUSCH, PUCCH, or PRACH in the set
of symbols.</p>
<p>For a set of symbols of a slot that are indicated as flexible by
<em>tdd-UL-DL-ConfigurationCommon</em>, and
<em>tdd-UL-DL-ConfigurationDedicated</em> if provided, or when
<em>tdd-UL-DL-ConfigurationCommon</em>, and
<em>tdd-UL-DL-ConfigurationDedicated</em> are not provided to the UE,
and if the UE does not detect a DCI format 2_0 providing a slot format
for the slot</p>
<p>- the UE receives PDSCH or CSI-RS in the set of symbols of the slot
if the UE receives a corresponding indication by a DCI format</p>
<p>- the UE transmits PUSCH, PUCCH, PRACH, or SRS in the set of symbols
of the slot if the UE receives a corresponding indication by a DCI
format, a RAR UL grant, fallbackRAR UL grant, or successRAR</p>
<p>- the UE receives PDCCH as described in clause 10.1</p>
<p>- if the UE is configured by higher layers to receive PDSCH in the
set of symbols of the slot, the UE does not receive the PDSCH in the set
of symbols of the slot</p>
<p>- if the UE is configured by higher layers to receive CSI-RS in the
set of symbols of the slot, the UE does not receive the CSI-RS in the
set of symbols of the slot, except when UE is provided
<em>CO-DurationsPerCell</em> and the set of symbols of the slot are
within the remaining channel occupancy duration.</p>
<p>- if the UE is configured by higher layers to receive DL PRS in the
set of symbols of the slot, the UE receives the DL PRS</p>
<p>- if the UE is configured by higher layers to transmit SRS, or PUCCH,
or PUSCH, or PRACH in the set of symbols of the slot and the UE is not
provided <em>enableConfiguredUL</em>, then</p>
<p>- if the UE does not indicate the capability of
[partialCancellation], the UE does not expect to cancel the transmission
of the PUCCH, or the PUSCH, or an actual repetition of the PUSCH [6, TS
38.214], as determined in clauses 9, 9.2.5 and 9.2.6 or in clause 6.1 of
[6. TS 38.214], or the PRACH in the slot if the first symbol of the
PUCCH or the PUSCH or actual repetition of the PUSCH or the PRACH in the
slot occurs within <span class="math inline">\(T_{proc,2}\)</span>
relative to a last symbol of a PDCCH reception where the UE is
configured to monitor PDCCH for DCI format 2_0; otherwise, the UE
cancels the PUCCH, or the PUSCH, or an actual repetition of the PUSCH
[6, TS 38.214], as determined in clauses 9, 9.2.5 and 9.2.6 or in clause
6.1 of [6. TS 38.214], or the PRACH in the slot;</p>
<p>- if the UE indicates the capability of [partialCancellation], the UE
does not expect to cancel the transmission of the PUCCH, or the PUSCH,
or an actual repetition of the PUSCH [6, TS 38.214], as determined in
clauses 9, 9.2.5 and 9.2.6 or in clause 6.1 of [6. TS 38.214], or the
PRACH in symbols from the set of symbols that occur within <span
class="math inline">\(T_{proc,2}\)</span> relative to a last symbol of a
PDCCH reception where the UE is configured to monitor PDCCH for DCI
format 2_0. The UE cancels the PUCCH, or the PUSCH, or an actual
repetition of the PUSCH [6, TS 38.214], as determined in clauses 9,
9.2.5 and 9.2.6 or in clause 6.1 of [6. TS 38.214], or the PRACH
transmission in remaining symbols from the set of symbols;</p>
<p>- the UE does not expect to cancel the transmission of SRS in symbols
from the set of symbols that occur within <span
class="math inline">\(T_{proc,2}\ \)</span>relative to a last symbol of
a PDCCH reception where the UE is configured to monitor PDCCH for DCI
format 2_0. The UE cancels the SRS transmission in remaining
symbols from the set of symbols;</p>
<p>- <span class="math inline">\(T_{proc,2}\)</span> is the PUSCH
preparation time for the corresponding UE processing capability [6, TS
38.214] assuming <span class="math inline">\(d_{2,1} = 1\)</span> and
<span class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration between the SCS configuration of the PDCCH carrying the
DCI format 2_0 and the SCS configuration of the SRS, PUCCH, PUSCH or
<span class="math inline">\(\mu_{r}\)</span>, where <span
class="math inline">\(\mu_{r}\)</span> corresponds to the SCS
configuration of the PRACH if it is 15kHz or higher; otherwise <span
class="math inline">\(\mu_{r} = 0\)</span>;</p>
<p>- if the UE is configured by higher layers to transmit SRS, or PUCCH,
or PUSCH, or PRACH in the set of symbols of the slot and the UE is
provided <em>enableConfiguredUL</em>, the UE can transmit the SRS, or
PUCCH, or PUSCH, or PRACH, respectively.</p>
<p>For unpaired spectrum operation for a UE on a cell in a frequency
band of FR1, and when the scheduling restrictions due to RRM
measurements [10, TS 38.133] are not applicable, if the UE detects a DCI
format indicating to the UE to transmit in a set of symbols, the UE is
not required to perform RRM measurements [10, TS 38.133] based on a
SS/PBCH block or CSI-RS reception on a different cell in the frequency
band if the SS/PBCH block or CSI-RS reception includes at least one
symbol from the set of symbols.</p>
<h2 id="interrupted-transmission-indication">11.2 Interrupted
transmission indication </h2>
<p>If a UE is provided <em>DownlinkPreemption</em>, the UE is configured
with an INT-RNTI provided by <em>int-RNTI</em> for monitoring PDCCH
conveying DCI format 2_1 [5, TS 38.212]. The UE is additionally
configured with</p>
<p>- a set of serving cells by <em>int-ConfigurationPerServingCell</em>
that includes a set of serving cell indexes provided by corresponding
<em>servingCellId</em> and a corresponding set of locations for fields
in DCI format 2_1 by <em>positionInDCI</em></p>
<p>- an information payload size for DCI format 2_1 by
<em>dci-PayloadSize</em></p>
<p>- an indication granularity for time-frequency resources by
<em>timeFrequencySet</em></p>
<p>If a UE detects a DCI format 2_1 for a serving cell from the
configured set of serving cells, the UE may assume that no transmission
to the UE is present in PRBs and in symbols that are indicated by the
DCI format 2_1, from a set of PRBs and a set of symbols of the last
monitoring period. The indication by the DCI format 2_1 is not
applicable to receptions of SS/PBCH blocks.</p>
<p>The set of PRBs is equal to the active DL BWP as defined in clause 12
and includes <img src="media/image203.svg"
style="width:0.30208in;height:0.19792in" /> PRBs.</p>
<p>If a UE detects a DCI format 2_1 in a PDCCH reception in a slot, the
set of symbols is the last <img src="media/image204.svg"
style="width:1.10417in;height:0.26042in" /> symbols prior to the first
symbol of the PDCCH reception in the slot where <img
src="media/image205.svg" style="width:0.30208in;height:0.19792in" /> is
the PDCCH monitoring periodicity provided by the value of
<em>monitoringSlotPeriodicityAndOffset,</em> as described in clause
10.1, <img src="media/image206.svg"
style="width:0.38542in;height:0.26042in" /> is the number of symbols per
slot, <img src="media/image207.svg"
style="width:0.125in;height:0.17708in" /> is the SCS configuration for a
serving cell with mapping to a respective field in the DCI format 2_1,
<img src="media/image208.svg"
style="width:0.26042in;height:0.19792in" /> is the SCS configuration of
the DL BWP where the UE receives the PDCCH with the DCI format 2_1. If
the UE is provided <em>tdd-UL-DL-ConfigurationCommon</em>, symbols
indicated as uplink by <em>tdd-UL-DL-ConfigurationCommon</em> are
excluded from the last <img src="media/image209.svg"
style="width:1.10417in;height:0.26042in" /> symbols prior to the first
symbol of the PDCCH reception in the slot. The resulting set of symbols
includes a number of symbols that is denoted as <img
src="media/image210.svg"
style="width:0.30208in;height:0.19792in" />.</p>
<p>The UE does not expect to be provided values of <img
src="media/image207.svg" style="width:0.125in;height:0.17708in" />, <img
src="media/image211.svg" style="width:0.28125in;height:0.19792in" />,
and <img src="media/image205.svg"
style="width:0.30208in;height:0.19792in" /> resulting to a value of <img
src="media/image212.svg" style="width:1.10417in;height:0.26042in" />
that is not an integer. The UE does not expect to be configured by
<em>monitoringSymbolsWithinSlot</em> with more than one PDCCH monitoring
occasion for DCI format 2_1 in a slot.</p>
<p>A UE is provided the indication granularity for the set of PRBs and
for the set of symbols by <em>timeFrequencySet</em>.</p>
<p>If the value of <em>timeFrequencySet</em> is 'set0', 14 bits from MSB
of a field in DCI format 2_1 have a one-to-one mapping with 14 groups of
consecutive symbols from the set of symbols where each of the first <img
src="media/image213.svg" style="width:1.19792in;height:0.19792in" />
symbol groups includes <img src="media/image214.svg"
style="width:0.61458in;height:0.20833in" /> symbols, each of the last
<img src="media/image215.svg"
style="width:1.51042in;height:0.19792in" /> symbol groups includes <img
src="media/image216.svg" style="width:0.61458in;height:0.19792in" />
symbols, a bit value of 0 indicates transmission to the UE in the
corresponding symbol group and a bit value of 1 indicates no
transmission to the UE in the corresponding symbol group.</p>
<p>If the value of <em>timeFrequencySet</em> is 'set1', 7 pairs of bits
from MSB of a field in the DCI format 2_1 have a one-to-one mapping with
7 groups of consecutive symbols where each of the first <img
src="media/image217.svg" style="width:1.10417in;height:0.19792in" />
symbol groups includes <img src="media/image218.svg"
style="width:0.61458in;height:0.19792in" /> symbols, each of the last
<img src="media/image219.svg"
style="width:1.30208in;height:0.19792in" /> symbol groups includes <img
src="media/image220.svg" style="width:0.61458in;height:0.19792in" />
symbols, a first bit in a pair of bits for a symbol group is applicable
to the subset of first <img src="media/image221.svg"
style="width:0.61458in;height:0.19792in" /> PRBs from the set of <img
src="media/image203.svg" style="width:0.30208in;height:0.19792in" />
PRBs, a second bit in the pair of bits for the symbol group is
applicable to the subset of last <img src="media/image222.svg"
style="width:0.51042in;height:0.19792in" /> PRBs from the set of <img
src="media/image203.svg" style="width:0.30208in;height:0.19792in" />
PRBs, a bit value of 0 indicates transmission to the UE in the
corresponding symbol group and subset of PRBs, and a bit value of 1
indicates no transmission to the UE in the corresponding symbol group
and subset of PRBs.</p>
<h2 id="a-cancellation-indication">11.2A Cancellation indication</h2>
<p>If a UE is provided <em>UplinkCancellation</em>, the UE is provided,
in one or more serving cells, search space sets for monitoring the first
PDCCH candidate with a CCE aggregation level of <span
class="math inline">\(L_{CI}\)</span> CCEs of each search space set for
detection of a DCI format 2_4 [5, TS 38.212] with a CI-RNTI provided by
<em>ci-RNTI</em> as described in clause 10.1.
<em>UplinkCancellation</em> additionally provides to the UE</p>
<p>- a set of serving cells, by <em>ci-ConfigurationPerServingCell</em>,
that includes a set of serving cell indexes and a corresponding set of
locations for fields in DCI format 2_4 by <em>positionInDCI</em></p>
<p>- a number of fields in DCI format 2_4, by
<em>positionInDCI-forSUL</em>, for each serving cell for a SUL carrier,
if the serving cell is configured with a SUL carrier</p>
<p>- an information payload size for DCI format 2_4 by
<em>dci-PayloadSize-ForCI</em></p>
<p>- an indication for time-frequency resources by
<em>timeFrequencyRegion</em></p>
<p>For a serving cell having an associated field in a DCI format 2_4,
for the field denote by</p>
<p>- <span class="math inline">\(N_{\text{CI}}\)</span> a number of bits
provided by <em>ci-PayloadSize</em></p>
<p>- <span class="math inline">\(B_{\text{CI}}\)</span> a number of PRBs
provided by <em>frequencyRegionforCI</em> in
<em>timeFrequencyRegion</em></p>
<p>- <span class="math inline">\(T_{\text{CI}}\)</span> a number of
symbols, excluding symbols for reception of SS/PBCH blocks and DL
symbols indicated by <em>tdd-UL-DL-ConfigurationCommon</em>, from a
number of symbols that</p>
<p>- is provided by <em>timeDurationforCI</em> in
<em>timeFrequencyRegion</em>, if the PDCCH monitoring periodicity for
the search space set with the DCI format 2_4 is one slot and there are
more than one PDCCH monitoring occasions in a slot, or</p>
<p>- is equal to the PDCCH monitoring periodicity, otherwise.</p>
<p>- <span class="math inline">\(G_{\text{CI}}\)</span> a number of
partitions for the <span class="math inline">\(T_{\text{CI}}\)</span>
symbols provided by <em>timeGranularityforCI</em> in
<em>timeFrequencyRegion</em></p>
<p><span class="math inline">\(G_{\text{CI}}\)</span> sets of bits from
the MSB of the <span class="math inline">\(N_{\text{CI}}\)</span> bits
have a one-to-one mapping with <span
class="math inline">\(G_{\text{CI}}\)</span> groups of symbols where
each of the first <span class="math inline">\(G_{\text{CI}} -
T_{\text{CI}} + \left\lfloor \frac{T_{\text{CI}}}{G_{\text{CI}}}
\right\rfloor \cdot G_{\text{CI}}\)</span> groups includes <span
class="math inline">\(\left\lfloor \frac{T_{CI}}{G_{\text{CI}}}
\right\rfloor\)</span> symbols and each of the remaining <span
class="math inline">\(T_{\text{CI}} - \left\lfloor
\frac{T_{\text{CI}}}{G_{\text{CI}}} \right\rfloor \cdot
G_{\text{CI}}\)</span> groups includes <span
class="math inline">\(\left\lceil \frac{T_{\text{CI}}}{G_{\text{CI}}}
\right\rceil\)</span> symbols. A UE determines a symbol duration with
respect to a SCS configuration of an active DL BWP where the UE monitors
PDCCH for DCI format 2_4 detection.</p>
<p>For a group of symbols, <span class="math inline">\(N_{BI} =
\frac{N_{CI}}{G_{CI}}\)</span> bits from MSB of each set of bits have a
one-to-one mapping with <span
class="math inline">\(N_{\text{BI}}\)</span> groups of PRBs where each
of the first <span class="math inline">\(N_{\text{BI}} - B_{\text{CI}} +
\left\lfloor \frac{B_{\text{CI}}}{N_{\text{BI}}} \right\rfloor \cdot
N_{\text{BI}}\)</span> groups includes <span
class="math inline">\(\left\lfloor \frac{B_{\text{CI}}}{N_{\text{BI}}}
\right\rfloor\)</span> PRBs and each of the remaining <span
class="math inline">\(B_{\text{CI}} - \left\lfloor
\frac{B_{\text{CI}}}{N_{\text{BI}}} \right\rfloor \cdot
N_{\text{BI}}\)</span> groups includes <span
class="math inline">\(\left\lceil \frac{B_{\text{CI}}}{N_{\text{BI}}}
\right\rceil\)</span> PRBs. A UE determines a first PRB index as <span
class="math inline">\({N_{RFR}^{start} = O}_{\text{carrier}} +
{RB}_{start}\)</span> and a number of contiguous RBs as <span
class="math inline">\({B_{CI} = L}_{RB}\ \)</span> from
<em>frequencyRegionforCI</em> that indicates an offset <span
class="math inline">\({RB}_{start}\)</span> and a length <span
class="math inline">\(L_{\text{RB}}\)</span> as RIV according to [6, TS
38.214], and from <em>offsetToCarrier</em> in
<em>FrequencyInfoUL-SIB</em> or <em>FrequencyInfoUL</em> that indicates
<span class="math inline">\(O_{\text{carrier}}\)</span> for a SCS
configuration of an active DL BWP where the UE monitors PDCCH for DCI
format 2_4 detection.</p>
<p>An indication by a DCI format 2_4 for a serving cell is applicable to
a PUSCH transmission or an SRS transmission on the serving cell. If the
PUSCH transmission or the SRS transmission is scheduled by a DCI format,
the indication by the DCI format 2_4 is applicable to the PUSCH
transmission or SRS transmission only if the last symbol of the PDCCH
reception providing the DCI format is earlier than the first symbol of
the PDCCH reception providing the DCI format 2_4.</p>
<p>For the serving cell, the UE determines the first symbol of the <span
class="math inline">\(T_{CI}\)</span> symbols to be the first symbol
that is after <span class="math inline">\({T&#39;}_{proc,2}\)</span>
from the end of a PDCCH reception where the UE detects the DCI format
2_4, where <span class="math inline">\({T&#39;}_{proc,2}\)</span> is
obtained from <span class="math inline">\(T_{proc,2}\)</span> for PUSCH
processing capability 2 [6, TS 38.214] assuming <span
class="math inline">\(d_{2,1} = d_{offset} \cdot \frac{2^{-
\mu_{UL}}}{2^{- \mu}}\)</span> where <span
class="math inline">\(d_{offset}\)</span> is provided by
<em>delta_Offset</em>, <span class="math inline">\(\mu\)</span> being
the smallest SCS configuration between the SCS configuration of the
PDCCH and the smallest SCS configuration <span
class="math inline">\(\mu_{UL}\)</span> provided in
<em>scs-SpecificCarrierList</em> of <em>FrequencyInfoUL</em> or
<em>FrequencyInfoUL-SIB</em>. The UE does not expect to cancel the PUSCH
transmission or the SRS transmission before a corresponding symbol that
is <span class="math inline">\(T_{proc,2}\)</span> assuming that <span
class="math inline">\(d_{2,1} = 0\)</span> after a last symbol of the
PDCCH reception where the UE detects the DCI format 2_4.</p>
<p>A UE that detects a DCI format 2_4 for a serving cell cancels a PUSCH
transmission or an actual repetition of a PUSCH transmission [6, TS
38.214] if the PUSCH transmission is with repetition Type B, as
determined in clauses 9 and 9.2.5 or in clause 6.1 of [6, TS 38.214], or
an SRS transmission on the serving cell if, respectively,</p>
<p>- the transmission is PUSCH with priority 0, if the UE is provided
<em>uplinkCancellationPriority</em>,</p>
<p>- a group of symbols, from the <span
class="math inline">\(T_{\text{CI}}\)</span> symbols, has at least one
bit value of '1' in the corresponding set of <span
class="math inline">\(N_{BI}\)</span> bits in the DCI format 2_4 and
includes a symbol of the (repetition of the) PUSCH transmission or of
the SRS transmission, and</p>
<p>- a group of PRBs, from the <span
class="math inline">\(B_{\text{CI}}\)</span> PRBs, has a corresponding
bit value of '1' in the set of bits corresponding to the group of
symbols in the DCI format 2_4 and includes a PRB of the (repetition of
the) PUSCH transmission or of the SRS transmission,</p>
<p>where</p>
<p>- the cancellation of the (repetition of the) PUSCH transmission
includes all symbols from the earliest symbol of the (repetition of the)
PUSCH transmission that is in a group of symbols having corresponding
bit values of '1' in the DCI format 2_4;</p>
<p>- the cancellation of the SRS transmission includes only symbols that
are in one or more groups of symbols having corresponding bit values of
'1' in the DCI format 2_4.</p>
<p>If, based on an indication by a DCI format 2_4, a UE cancels a PUSCH
transmission or an SRS transmission, the UE does not expect to be
scheduled by a second DCI format to transmit a PUSCH or an SRS over
symbols that include symbols of the cancelled PUSCH transmission or SRS
transmission, where the last symbol of the PDCCH reception providing the
second DCI format is no earlier than the first symbol of the PDCCH
reception providing the DCI format 2_4.</p>
<h2 id="group-tpc-commands-for-pucchpusch">11.3 Group TPC commands for
PUCCH/PUSCH</h2>
<p>For PUCCH transmission on a serving cell, a UE can be provided</p>
<p>- a TPC-PUCCH-RNTI for a DCI format 2_2 by
<em>tpc-PUCCH-RNTI</em></p>
<p>- a field in DCI format 2_2 is a TPC command of 2 bits mapping to
<span class="math inline">\(\delta_{PUCCH,b,f,c}\)</span> values as
described in clause 7.2.1</p>
<p>- an index for a location in DCI format 2_2 of a first bit for a TPC
command field for the PCell, or for a carrier of the PCell by
<em>tpc-IndexPCell</em></p>
<p>- an index for a location in DCI format 2_2 of a first bit for a TPC
command field for a PUCCH-sSCell in the primary PUCCH cell group, by
<em>tpc-IndexPUCCH-sScell</em></p>
<p>- an index for a location in DCI format 2_2 of a first bit for a TPC
command field for the PUCCH-SCell or for a carrier for the PUCCH-SCell
by <em>tpc-IndexPUCCH-Scell</em></p>
<p>- an index for a location in DCI format 2_2 of a first bit for a TPC
command field for a PUCCH-sSCell in the secondary PUCCH cell group, by
<em>tpc-IndexPUCCH-sScellSecondaryPUCCHgroup</em></p>
<p>- a mapping for the PUCCH power control adjustment state <span
class="math inline">\(l \in \left\{ 0,1 \right\}\)</span>, by a
corresponding {0, 1} value of a closed loop index field that is appended
to the TPC command field in DCI format 2_2 if the UE indicates a
capability to support two PUCCH power control adjustment states by
<em>twoDifferentTPC-Loop-PUCCH</em>, and if the UE is configured for two
PUCCH power control adjustment states by
<em>twoPUCCH-PC-AdjustmentStates</em></p>
<p>The UE is also provided on a serving cell with a configuration for a
search space set <span class="math inline">\(s\)</span> and a
corresponding CORESET <span class="math inline">\(p\)</span> for
monitoring PDCCH candidates for DCI format 2_2 with CRC scrambled by a
TPC-PUCCH-RNTI as described in clause 10.1.</p>
<p>For PUSCH transmission on a serving cell, a UE can be provided</p>
<p>- a TPC-PUSCH-RNTI for a DCI format 2_2 by
<em>tpc-PUSCH-RNTI</em></p>
<p>- a field in DCI format 2_2 is a TPC command of 2 bits mapping to
<span class="math inline">\(\delta_{PUSCH,b,f,c}\)</span> values as
described in clause 7.1.1</p>
<p>- an index for a location in DCI format 2_2 of a first bit for a TPC
command field for an uplink carrier of the serving cell by
<em>tpc-Index</em></p>
<p>- an index for a location in DCI format 2_2 of a first bit for a TPC
command field for a supplementary uplink carrier of the serving cell by
<em>tpc-IndexSUL</em></p>
<p>- an index of the serving cell by <em>targetCell</em>. If
<em>targetCell</em> is not provided, the serving cell is the cell of the
PDCCH reception for DCI format 2_2</p>
<p>- a mapping for the PUSCH power control adjustment state <span
class="math inline">\(l \in \left\{ 0,1 \right\}\)</span>, by a
corresponding {0, 1} value of a closed loop index field that is appended
to the TPC command field for the uplink carrier or for the supplementary
uplink carrier of the serving cell in DCI format 2_2 if the UE indicates
a capability to support two PUSCH power control adjustment states, by
<em>twoDifferentTPC-Loop-PUSCH</em>, and if the UE is configured for two
PUSCH power control adjustment states by
<em>twoPUSCH-PC-AdjustmentStates</em></p>
<p>The UE is also provided for the serving cell of the PDCCH reception
for DCI format 2_2 with a configuration for a search space set <span
class="math inline">\(s\)</span> and a corresponding CORESET <span
class="math inline">\(p\)</span> for monitoring PDCCH candidates for DCI
format 2_2 with CRC scrambled by a TPC-PUSCH-RNTI as described in clause
10.1.</p>
<h2 id="srs-switching">11.4 SRS switching</h2>
<p>DCI format 2_3 is applicable for uplink carrier(s) of serving cells
where a UE is not configured for PUSCH/PUCCH transmission or for uplink
carrier(s) of a serving cell where
<em>srs-PowerControlAdjustmentStates</em> indicates a separate power
control adjustment state between SRS transmissions and PUSCH
transmissions.</p>
<p>A UE configured by higher layers with parameter
<em>carrierSwitching</em> can be provided</p>
<p>- a TPC-SRS-RNTI for a DCI format 2_3 by <em>tpc-SRS-RNTI</em></p>
<p>- an index of a serving cell where the UE interrupts transmission in
order to transmit SRS on one or more other serving cells by
<em>srs-SwitchFromServCellIndex</em></p>
<p>- an indication of an uplink carrier where the UE interrupts
transmission in order to transmit SRS on one or more other serving cells
by <em>srs-SwitchFromCarrier</em></p>
<p>- a DCI format 2_3 field configuration type by <em>typeA</em> or
<em>typeB</em></p>
<p>- for <em>typeA</em>, an index for a set of serving cells is provided
by <em>cc-SetIndex</em>, indexes of serving cells in the set of serving
cells are provided by <em>cc-IndexInOneCC-Set</em>, and a DCI format 2_3
field includes a TPC command for each serving cell from the set of
serving cells and can also include a SRS request for SRS transmission on
the set of serving cells</p>
<p>- for <em>typeB</em>, DCI format 2_3 field includes a TPC command for
a serving cell index and can also include a SRS request for SRS
transmission on the serving cell</p>
<p>- an indication for a serving cell for whether or not a field in DCI
format 2_3 includes a SRS request by <em>fieldTypeFormat2-3</em> where a
value of 0/1 indicates absence/presence of the SRS request – a mapping
for a 2 bit SRS request to SRS resource sets is as provided in [6, TS
38.214]</p>
<p>- an index for a location in DCI format 2_3 of a first bit for a
field for a non-supplementary uplink carrier of the serving cell by
<em>startingBitOfFormat2-3</em></p>
<p>- an index for a location in DCI format 2_3 of a first bit for a
field for a supplementary uplink carrier of the serving cell by
<em>startingBitOfFormat2-3SUL-v1530</em></p>
<h1 id="bandwidth-part-operation">12 Bandwidth part operation </h1>
<p>If the UE is configured with a SCG, the UE shall apply the procedures
described in this clause for both MCG and SCG</p>
<p>- When the procedures are applied for MCG, the terms 'secondary
cell', 'secondary cells' , 'serving cell', 'serving cells' in this
clause refer to secondary cell, secondary cells, serving cell, serving
cells belonging to the MCG respectively.</p>
<p>- When the procedures are applied for SCG, the terms 'secondary
cell', 'secondary cells', 'serving cell', 'serving cells' in this clause
refer to secondary cell, secondary cells (not including PSCell), serving
cell, serving cells belonging to the SCG respectively. The term 'primary
cell' in this clause refers to the PSCell of the SCG.</p>
<p>A UE configured for operation in bandwidth parts (BWPs) of a serving
cell, is configured by higher layers for the serving cell a set of at
most four bandwidth parts (BWPs) for receptions by the UE (DL BWP set)
in a DL bandwidth by parameter <em>BWP-Downlink</em> or by parameter
<em>initialDownlinkBWP</em> with a set of parameters configured by
<em>BWP-DownlinkCommon</em> and <em>BWP-DownlinkDedicated</em>, and a
set of at most four BWPs for transmissions by the UE (UL BWP set) in an
UL bandwidth by parameter <em>BWP-Uplink</em> or by parameter
<em>initialUplinkBWP</em> with a set of parameters configured by
<em>BWP-UplinkCommon</em> and <em>BWP-UplinkDedicated</em>.</p>
<p>For operation with shared spectrum channel access, a UE expects that
the BWP configured by the parameter <em>initialUplinkBWP</em> provided
in <em>UplinkConfigCommonSIB</em> is mapped to only a single RB set.</p>
<p>If a UE is not provided <em>initialDownlinkBWP</em>, an initial DL
BWP is defined by a location and number of contiguous PRBs, starting
from a PRB with the lowest index and ending at a PRB with the highest
index among PRBs of a CORESET for Type0-PDCCH CSS set, and a SCS and a
cyclic prefix for PDCCH reception in the CORESET for Type0-PDCCH CSS
set; otherwise, the initial DL BWP is provided by
<em>initialDownlinkBWP</em>. For operation on the primary cell or on a
secondary cell, a UE is provided an initial UL BWP by
<em>initialUplinkBWP</em>. If the UE is configured with a supplementary
UL carrier, the UE can be provided an initial UL BWP on the
supplementary UL carrier by <em>initialUplinkBWP</em>.</p>
<p>If a UE has dedicated BWP configuration, the UE can be provided by
<em>firstActiveDownlinkBWP-Id</em> a first active DL BWP for receptions
and by <em>firstActiveUplinkBWP-Id</em> a first active UL BWP for
transmissions on a carrier of the primary cell.</p>
<p>For each DL BWP or UL BWP in a set of DL BWPs or UL BWPs,
respectively, the UE is provided the following parameters for the
serving cell as defined in [4, TS 38.211] or [6, TS 38.214]:</p>
<p>- a SCS by <em>subcarrierSpacing</em></p>
<p>- a cyclic prefix by <em>cyclicPrefix</em></p>
<p>- a common RB <span class="math inline">\(N_{BWP}^{start} =
O_{carrier} + {RB}_{start}\)</span> and a number of contiguous RBs <span
class="math inline">\(N_{BWP}^{size} = L_{RB}\)</span> provided by
<em>locationAndBandwidth</em> that indicates an offset <span
class="math inline">\({RB}_{start}\)</span> and a length <span
class="math inline">\(L_{RB}\)</span> as RIV according to [6, TS
38.214], setting <span class="math inline">\(N_{BWP}^{size} =
275\)</span>, and a value <span
class="math inline">\(O_{carrier}\)</span> provided by
<em>offsetToCarrier</em> for the <em>subcarrierSpacing</em></p>
<p>- an index in the set of DL BWPs or UL BWPs by respective
<em>BWP-Id</em></p>
<p>- a set of BWP-common and a set of BWP-dedicated parameters by
<em>BWP-DownlinkCommon</em> and <em>BWP-DownlinkDedicated</em> for the
DL BWP, or <em>BWP-UplinkCommon</em> and <em>BWP-UplinkDedicated</em>
for the UL BWP [12, TS 38.331]</p>
<p>For unpaired spectrum operation, a DL BWP from the set of configured
DL BWPs with index provided by <em>BWP-Id</em> is linked with an UL BWP
from the set of configured UL BWPs with index provided by
<em>BWP-Id</em> when the DL BWP index and the UL BWP index are same. For
unpaired spectrum operation, a UE does not expect to receive a
configuration where the center frequency for a DL BWP is different than
the center frequency for an UL BWP when the <em>BWP-Id</em> of the DL
BWP is same as the <em>BWP-Id</em> of the UL BWP.</p>
<p>For each DL BWP in a set of DL BWPs of the PCell, a UE can be
configured CORESETs for every type of CSS sets and for USS as described
in clause 10.1. The UE does not expect to be configured without a CSS
set on the PCell in the active DL BWP.</p>
<p>If a UE is provided <em>controlResourceSetZero</em> and
<em>searchSpaceZero</em> in <em>PDCCH-ConfigSIB1</em> or
<em>PDCCH-ConfigCommon</em>, the UE determines a CORESET for a search
space set from <em>controlResourcesetZero</em> as described in clause 13
and for Tables 13-1 through 13-10, and determines corresponding PDCCH
monitoring occasions as described in clause 13 and for Tables 13-11
through 13-15. If the active DL BWP is not the initial DL BWP, the UE
determines PDCCH monitoring occasions for the search space set only if
the CORESET bandwidth is within the active DL BWP and the active DL BWP
has same SCS configuration and same cyclic prefix as the initial DL
BWP.</p>
<p>For each UL BWP in a set of UL BWPs of the PCell, or of the
PUCCH-SCell, or of the PUCCH-sSCell the UE is configured resource sets
for PUCCH transmissions as described in clause 9.2.1.</p>
<p>A UE receives PDCCH and PDSCH in a DL BWP according to a configured
SCS and CP length for the DL BWP. A UE transmits PUCCH and PUSCH in an
UL BWP according to a configured SCS and CP length for the UL BWP.</p>
<p>If a bandwidth part indicator field is configured in a DCI format,
the bandwidth part indicator field value indicates the active DL BWP,
from the configured DL BWP set, for DL receptions as described in [5, TS
38.212]. If a bandwidth part indicator field is configured in a DCI
format, the bandwidth part indicator field value indicates the active UL
BWP, from the configured UL BWP set, for UL transmissions as described
in [5, TS 38.212]. If a bandwidth part indicator field is configured in
a DCI format and indicates an UL BWP or a DL BWP different from the
active UL BWP or DL BWP, respectively, the UE shall</p>
<p>- for each information field in the DCI format</p>
<p>- if the size of the information field is smaller than the one
required for the DCI format interpretation for the UL BWP or DL BWP that
is indicated by the bandwidth part indicator, the UE prepends zeros to
the information field until its size is the one required for the
interpretation of the information field for the UL BWP or DL BWP prior
to interpreting the DCI format information fields, respectively</p>
<p>- if the size of the information field is larger than the one
required for the DCI format interpretation for the UL BWP or DL BWP that
is indicated by the bandwidth part indicator, the UE uses a number of
least significant bits of the DCI format equal to the one required for
the UL BWP or DL BWP indicated by bandwidth part indicator prior to
interpreting the DCI format information fields, respectively</p>
<p>- set the active UL BWP or DL BWP to the UL BWP or DL BWP indicated
by the bandwidth part indicator in the DCI format</p>
<p>If a bandwidth part indicator field is configured in a DCI format 0_1
and indicates an active UL BWP with different SCS configuration <span
class="math inline">\(\mu\)</span>, or with different number <span
class="math inline">\(N_{RB - set,UL}^{BWP}\)</span> of RB sets, than a
current active UL BWP, the UE determines an uplink frequency domain
resource allocation Type 2 based on <span
class="math inline">\(X&#39;\)</span> bits and <span
class="math inline">\(Y&#39;\)</span> bits that are generated by
independently truncating or padding the <span
class="math inline">\(X\)</span> MSBs and the <span
class="math inline">\(Y\)</span> LSBs [6, TS 38.214] of the frequency
domain resource assignment field of DCI format 0_1, where truncation
starts from the MSBs of the X bits or the Y bits, zero-padding prepends
zeros to the X bits or the Y bits, and</p>
<p>- if the indicated active UL BWP has SCS configuration <span
class="math inline">\(\mu = 1\)</span> and the current active BWP has
SCS configuration <span class="math inline">\(\mu = 0\)</span>, the
<span class="math inline">\(X\)</span> MSBs are truncated to <span
class="math inline">\(X&#39; = X - 1\)</span> bits, or</p>
<p>- if the indicated active UL BWP has SCS configuration <span
class="math inline">\(\mu = 0\)</span> and the current active BWP has
SCS configuration <span class="math inline">\(\mu = 1\)</span>, the
<span class="math inline">\(X\)</span> MSBs are zero-padded to <span
class="math inline">\(X&#39; = X + 1\)</span> bits</p>
<p>- otherwise, the <span class="math inline">\(X\)</span> MSBs are
unchanged</p>
<p>and</p>
<p>- the <span class="math inline">\(Y\)</span> LSBs are truncated or
zero-padded to <span class="math inline">\(Y&#39; = \left\lceil
\text{log}_{2}\left( \frac{N_{RB - set,UL}^{BWP}\left( N_{RB -
set,UL}^{BWP} + 1 \right)}{2} \right) \right\rceil\)</span> bits where
<span class="math inline">\(N_{RB - set,UL}^{BWP}\)</span> is a number
of RB sets configured for the indicated active UL BWP</p>
<p>A UE does not expect to detect a DCI format with a BWP indicator
field that indicates an active DL BWP or an active UL BWP change with
the corresponding time domain resource assignment field providing a slot
offset value for a PDSCH reception or PUSCH transmission that is smaller
than a delay required by the UE for an active DL BWP change or UL BWP
change, respectively [10, TS 38.133].</p>
<p>If a UE detects a DCI format with a BWP indicator field that
indicates an active DL BWP change for a cell, the UE is not required to
receive or transmit in the cell during a time duration from the end of
the third symbol of a slot where the UE receives the PDCCH that includes
the DCI format in a scheduling cell until the beginning of a slot
indicated by the slot offset value of the time domain resource
assignment field in the DCI format.</p>
<p>If a UE detects a DCI format with SCell dormancy indication that
indicates an active DL BWP change for an Scell in slot <em>n</em> of
primary cell, the UE is not required to receive or transmit in the SCell
during a time duration specified in [10, TS 38.133].</p>
<p>If a UE detects a DCI format indicating an active UL BWP change for a
cell, the UE is not required to receive or transmit in the cell during a
time duration from the end of the third symbol of a slot where the UE
receives the PDCCH that includes the DCI format in the scheduling cell
until the beginning of a slot indicated by the slot offset value of the
time domain resource assignment field in the DCI format.</p>
<p>A UE does not expect to detect a DCI format indicating an active DL
BWP change or an active UL BWP change for a scheduled cell within FR1
(or FR2) in a slot other than the first slot of a set of slots for the
DL SCS of the scheduling cell that overlaps with a time duration where
the UE is not required to receive or transmit, respectively, for an
active BWP change in a different cell from the scheduled cell within FR1
(or FR2).</p>
<p>A UE expects to detect a DCI format with a BWP indicator field that
indicates an active UL BWP change or an active DL BWP change only if a
corresponding PDCCH is received within the first 3 symbols of a slot. If
the UE detects the DCI format from two PDCCH receptions in search space
sets <span class="math inline">\(s_{i}\)</span> and <span
class="math inline">\(s_{j}\)</span> that include
<em>searchSpaceLinkingId</em> with same value, as described in clause
10.1, the UE considers the PDCCH reception where the UE detects the DCI
format to be the one from the two PDCCH receptions that ends later.</p>
<p>For a serving cell, a UE can be provided by
<em>defaultDownlinkBWP-Id</em> a default DL BWP among the configured DL
BWPs. If a UE is not provided a default DL BWP by
<em>defaultDownlinkBWP-Id</em>, the default DL BWP is the initial DL
BWP.</p>
<p>If a UE is provided by <em>bwp-InactivityTimer</em> a timer value for
the serving cell [11, TS 38.321] and the timer is running, the UE
decrements the timer at the end of a subframe for FR1 or at the end of a
half subframe for FR2 if the restarting conditions in [11, TS 38.321]
are not met during the interval of the subframe for FR1 or of the half
subframe for FR2.</p>
<p>For a cell where a UE changes an active DL BWP due to a BWP
inactivity timer expiration and for accommodating a delay in the active
DL BWP change or the active UL BWP change required by the UE [10, TS
38.133], the UE is not required to receive or transmit in the cell
during a time duration from the beginning of a subframe for FR1, or of
half of a subframe for FR2, that is immediately after the BWP inactivity
timer expires until the beginning of a slot where the UE can receive or
transmit.</p>
<p>When a UE's BWP inactivity timer for a cell within FR1 (or FR2)
expires within a time duration where the UE is not required to receive
or transmit for an active UL/DL BWP change in the cell or in a different
cell within FR1 (or FR2), the UE delays the active UL/DL BWP change
triggered by the BWP inactivity timer expiration until a subframe for
FR1 or half a subframe for FR2 that is immediately after the UE
completes the active UL/DL BWP change in the cell or in the different
cell within FR1 (or FR2).</p>
<p>If a UE is provided by <em>firstActiveDownlinkBWP-Id</em> a first
active DL BWP and by <em>firstActiveUplinkBWP-Id</em> a first active UL
BWP on a carrier of a secondary cell, the UE uses the indicated DL BWP
and the indicated UL BWP as the respective first active DL BWP on the
secondary cell and first active UL BWP on the carrier of the secondary
cell.</p>
<p>A UE does not expect to monitor PDCCH when the UE performs RRM
measurements [10, TS 38.133] over a bandwidth that is not within the
active DL BWP for the UE.</p>
<h1 id="ue-procedure-for-monitoring-type0-pdcch-css-sets">13 UE
procedure for monitoring Type0-PDCCH CSS sets</h1>
<p>If during cell search a UE determines from <em>MIB</em> that a
CORESET for Type0-PDCCH CSS set is present, as described in clause 4.1,
the UE determines a number of consecutive resource blocks and a number
of consecutive symbols for the CORESET of the Type0-PDCCH CSS set from
<em>controlResourceSetZero</em> in <em>pdcch-ConfigSIB1</em>, as
described in Tables 13-1 through 13-10, for operation without shared
spectrum channel access in FR1 and FR2-1, or as described in Tables
13-1A and 13-4A for operation with shared spectrum channel access in
FR1, or as described in Table 13-10A for FR2-2, and determines PDCCH
monitoring occasions from <em>searchSpaceZero</em> in
<em>pdcch-ConfigSIB1</em>, included in <em>MIB</em>, as described in
Tables 13-11 through 13-15A. <span
class="math inline">\({SFN}_{c}\)</span> and <span
class="math inline">\(n_{c}\)</span> are the SFN and slot index within a
frame of the CORESET based on SCS of the CORESET and <span
class="math inline">\({SFN}_{SSB,i}\)</span> and <span
class="math inline">\(n_{SSB,i}\)</span> are the SFN and slot index
based on SCS of the CORESET, respectively, where the SS/PBCH block with
index <span class="math inline">\(i\)</span> overlaps in time with
system frame <span class="math inline">\({SFN}_{SSB,i}\)</span> and slot
<span class="math inline">\(n_{SSB,i}\)</span>. The symbols of the
CORESET associated with <em>pdcch-ConfigSIB1</em> in <em>MIB</em> or
with <em>searchSpaceSIB1</em> in <em>PDCCH-ConfigCommon</em> have normal
cyclic prefix.</p>
<p>For operation with shared spectrum channel access in FR2-2 and for
operation without shared spectrum channel access, a UE assumes that the
offset in Tables 13-1 through 13-10A is defined with respect to the SCS
of the CORESET for Type0-PDCCH CSS set from the smallest RB index of the
CORESET for Type0-PDCCH CSS set to the smallest RB index of the common
RB overlapping with the first RB of the corresponding SS/PBCH block. The
SCS of the CORESET for Type0-PDCCH CSS set is provided by
<em>subCarrierSpacingCommon</em> for FR1 and FR2-1 and same as the SCS
of the corresponding SS/PBCH block for FR2-2. In Tables 13-7, 13-8, and
13-10, <span class="math inline">\(k_{SSB}\)</span> is defined in [4, TS
38.211].</p>
<p>For operation with shared spectrum channel access in FR1, a UE
determines an offset from a smallest RB index of the CORESET for
Type0-PDCCH CSS set to a smallest RB index of the common RB overlapping
with a first RB of the corresponding SS/PBCH block</p>
<p>- according to the offset in Table 13-1A or Table 13-4A, if the
frequency position of the SS/PBCH block corresponds to the GSCN of a
synchronization raster entry as defined in [8-1, TS 38.101-1], and</p>
<p>- according to a sum of a first offset and a second offset if the
frequency position of the SS/PBCH block is provided by
<em>ssbFrequency</em> in a measurement configuration associated with a
reporting configuration providing <em>reportCGI</em> and does not
correspond to the GSCN of a synchronization raster entry as defined in
[8-1, TS 38.101-1], where</p>
<p>- the first offset is provided in Table 13-1A or Table 13-4A, and</p>
<p>- the second offset is determined as the offset from a smallest RB
index of the common RB overlapping with the first RB of the SS/PBCH
block indicated in the measurement configuration to a smallest RB index
of the common RB overlapping with the first RB of a SS/PBCH block
hypothetically located at the GSCN of a synchronization raster entry,
where the single synchronization raster entry is located in the same
channel as the SS/PBCH block used for the shared spectrum channel access
procedure, as described in [15, TS 37.213]</p>
<p>where the offsets are defined with respect to the SCS of the CORESET
for Type0-PDCCH CSS set that is same as the SCS of the corresponding
SS/PBCH block.</p>
<p>For operation without shared spectrum channel access and for the
SS/PBCH block and CORESET multiplexing pattern 1, a UE monitors PDCCH in
the Type0-PDCCH CSS set over two slots. For SS/PBCH block with index
<span class="math inline">\(i\)</span>, the UE determines an index of
slot <span class="math inline">\(n_{0}\)</span> as <span
class="math inline">\(n_{0} = \left( O \bullet 2^{\mu} + \left\lfloor i
\bullet M \right\rfloor \right)modN_{slot}^{frame,\mu}\ \)</span> that
is in a frame with system frame number (SFN) <span
class="math inline">\({SFN}_{C}\)</span> satisfying <span
class="math inline">\({SFN}_{c}mod2 = 0\)</span> if <span
class="math inline">\(\left\lfloor \frac{\left( O \bullet 2^{\mu} +
\left\lfloor i \bullet M \right\rfloor \right)}{N_{slot}^{frame,\mu}}
\right\rfloor mod2 = 0\)</span>, or in a frame with SFN satisfying <span
class="math inline">\({SFN}_{c}mod2 = 1\)</span> if <span
class="math inline">\(\left\lfloor \frac{\left( O \bullet 2^{\mu} +
\left\lfloor i \bullet M \right\rfloor \right)}{N_{slot}^{frame,\mu}}
\right\rfloor mod2 = 1\)</span> where <span class="math inline">\(\mu
\in \left\{ 0,1,2,3,5,6 \right\}\)</span> based on the SCS for PDCCH
receptions in the CORESET [4, TS 38.211].</p>
<p>- For <span class="math inline">\(\mu \in \{ 0,\ 1,\ 2,\ 3\}\)</span>
and for a SS/PBCH block index <span class="math inline">\(i\)</span>,
the two slots including the associated Type0-PDCCH monitoring occasions
are slots <span class="math inline">\(n_{0}\)</span> and <span
class="math inline">\(n_{0} + 1\)</span>. <span
class="math inline">\(M\)</span>, <span
class="math inline">\(O\)</span>, and the index of the first symbol of
the CORESET in slots <span class="math inline">\(n_{0}\)</span> and
<span class="math inline">\(n_{0} + 1\)</span> are provided by Table
13-11 and Table 13-12.</p>
<p>- For <span class="math inline">\(\mu = 5\)</span> and for a SS/PBCH
block index <span class="math inline">\(i\)</span>, the two slots
including the associated Type0-PDCCH monitoring occasions are slots
<span class="math inline">\(n_{0}\)</span> and <span
class="math inline">\(n_{0} + 4\)</span>. <span
class="math inline">\(M\)</span>, <span
class="math inline">\(O\)</span>, and the index of the first symbol of
the CORESET in slots <span class="math inline">\(n_{0}\)</span> and
<span class="math inline">\(n_{0} + 4\)</span> are provided by Table
13-12A, where <span class="math inline">\(X = 1.25\)</span>.</p>
<p>- For <span class="math inline">\(\mu = 6\)</span> and for a SS/PBCH
block index <span class="math inline">\(i\)</span>, the two slots
including the associated Type0-PDCCH monitoring occasions are slots
<span class="math inline">\(n_{0}\)</span> and <span
class="math inline">\(n_{0} + 8\)</span>. <span
class="math inline">\(M\)</span>, <span
class="math inline">\(O\)</span>, and the index of the first symbol of
the CORESET in slots <span class="math inline">\(n_{0}\)</span> and
<span class="math inline">\(n_{0} + 8\)</span> are provided by Table
13-12A, where <span class="math inline">\(X = 0.625\)</span>.</p>
<p>For operation with shared spectrum channel access and for the SS/PBCH
block and CORESET multiplexing pattern 1, a UE monitors PDCCH in the
Type0-PDCCH CSS set over slots that include Type0-PDCCH monitoring
occasions associated with SS/PBCH blocks that are quasi co-located with
the SS/PBCH block that provides a CORESET for Type0-PDCCH CSS set with
respect to average gain, quasi co-location 'typeA' and 'typeD'
properties, when applicable [6, TS 38.214]. For a candidate SS/PBCH
block index <span class="math inline">\(\overline{i}\)</span>, where
<span class="math inline">\(0 \leq \overline{i} \leq
{\overline{L}}_{\max} - 1\)</span>, two slots include the associated
Type0-PDCCH monitoring occasions. The UE determines an index of slot
<span class="math inline">\(n_{0}\)</span> as <span
class="math inline">\(n_{0} = \left( O \cdot 2^{\mu} + \left\lfloor
\overline{i} \cdot M \right\rfloor \right)\ mod\ N_{slot}^{frame,\
\mu}\)</span> that is in a frame with system frame number (SFN) <span
class="math inline">\({SFN}_{C}\)</span> satisfying <span
class="math inline">\({SFN}_{C}\ mod\ 2 = 0\)</span> if <span
class="math inline">\(\left\lfloor \left( O \cdot 2^{\mu} + \left\lfloor
\overline{i} \cdot M \right\rfloor \right)/N_{slot}^{frame,\ \mu}
\right\rfloor\ mod\ 2 = 0\)</span>, or in a frame with SFN satisfying
<span class="math inline">\({SFN}_{C}\ mod\ 2 = 1\)</span> if <span
class="math inline">\(\left\lfloor \left( O \cdot 2^{\mu} + \left\lfloor
\overline{i} \cdot M \right\rfloor \right)/N_{slot}^{frame,\ \mu}
\right\rfloor\ mod\ 2 = 1\)</span> where <span class="math inline">\(\mu
\in \{ 0,\ 1,3,5,6\}\)</span> based on the SCS for PDCCH receptions in
the CORESET [4, TS 38.211].</p>
<p>- For <span class="math inline">\(\mu \in \{ 0,\ 1\}\)</span> and for
a candidate SS/PBCH block index <span
class="math inline">\(\overline{i}\)</span>, the two slots including the
associated Type0-PDCCH monitoring occasions are slots <span
class="math inline">\(n_{0}\)</span> and <span
class="math inline">\(n_{0} + 1\)</span>. <span
class="math inline">\(M\)</span>, <span
class="math inline">\(O\)</span>, and the index of the first symbol of
the CORESET in slots <span class="math inline">\(n_{0}\)</span> and
<span class="math inline">\(n_{0} + 1\)</span> are provided by Table
13-11. The UE does not expect to be configured with <span
class="math inline">\(M = 1/2\)</span>, or with <span
class="math inline">\(M = 2\)</span>, when <span
class="math inline">\(N_{SSB}^{QCL} = 1\)</span>.</p>
<p>- For <span class="math inline">\(\mu = 3\)</span> and for a
candidate SS/PBCH block index <span
class="math inline">\(\overline{i}\)</span>, the two slots including the
associated Type0-PDCCH monitoring occasions are slots <span
class="math inline">\(n_{0}\)</span> and <span
class="math inline">\(n_{0} + 1\)</span>. <span
class="math inline">\(M\)</span>, <span
class="math inline">\(O\)</span>, and the index of the first symbol of
the CORESET in slots <span class="math inline">\(n_{0}\)</span> and
<span class="math inline">\(n_{0} + 1\)</span> are provided by Table
13-12.</p>
<p>- For <span class="math inline">\(\mu = 5\)</span> and for a
candidate SS/PBCH block index <span
class="math inline">\(\overline{i}\)</span>, the two slots including the
associated Type0-PDCCH monitoring occasions are slots <span
class="math inline">\(n_{0}\)</span> and <span
class="math inline">\(n_{0} + 4\)</span>. <span
class="math inline">\(M\)</span>, <span
class="math inline">\(O\)</span>, and the index of the first symbol of
the CORESET in slots <span class="math inline">\(n_{0}\)</span> and
<span class="math inline">\(n_{0} + 4\)</span> are provided by Table
13-12A, where <span class="math inline">\(X = 1.25\)</span>.</p>
<p>- For <span class="math inline">\(\mu = 6\)</span> and for a
candidate SS/PBCH block index <span
class="math inline">\(\overline{i}\)</span>, the two slots including the
associated Type0-PDCCH monitoring occasions are slots <span
class="math inline">\(n_{0}\)</span> and <span
class="math inline">\(n_{0} + 8\)</span>. <span
class="math inline">\(M\)</span>, <span
class="math inline">\(O\)</span>, and the index of the first symbol of
the CORESET in slots <span class="math inline">\(n_{0}\)</span> and
<span class="math inline">\(n_{0} + 8\)</span> are provided by Table
13-12A, where <span class="math inline">\(X = 0.625\)</span>.</p>
<p>For operation without shared spectrum channel access and for the
SS/PBCH block and CORESET multiplexing patterns 2 and 3, a UE monitors
PDCCH in the Type0-PDCCH CSS set over one slot with Type0-PDCCH CSS set
periodicity equal to the periodicity of SS/PBCH block. For a SS/PBCH
block with index <span class="math inline">\(i\)</span>, the UE
determines the slot index <span class="math inline">\(n_{c}\)</span> and
<span class="math inline">\({SFN}_{c}\)</span> based on parameters
provided by Tables 13-13 through 13-15A.</p>
<p>For operation with shared spectrum channel access and for SS/PBCH
block and CORESET multiplexing pattern 3, a UE monitors PDCCH in the
Type0-PDCCH CSS set over slots that include Type0-PDCCH monitoring
occasions associated with SS/PBCH blocks that are quasi co-located with
the SS/PBCH block that provides a CORESET for Type0-PDCCH CSS set with
respect to average gain, quasi co-location 'typeA' and 'typeD'
properties, when applicable. For a candidate SS/PBCH block index <span
class="math inline">\(\overline{i}\)</span>, where <span
class="math inline">\(0 \leq \overline{i} \leq {\overline{L}}_{\max} -
1\)</span>, the periodicity of the slot including the associated
Type0-PDCCH monitoring occasion is same as the periodicity of the
candidate SS/PBCH block, and the UE determines the slot index <span
class="math inline">\(n_{c}\)</span> and <span
class="math inline">\({SFN}_{c}\)</span> based on parameters provided by
Tables 13-15 and 13-15A, where <span class="math inline">\(i\)</span> is
replaced by <span class="math inline">\(\overline{i}\)</span> for
operation with shared spectrum channel access in FR2-2.</p>
<p>For the SS/PBCH block and CORESET multiplexing patterns 2 and 3, if
the active DL BWP is the initial DL BWP, the UE is expected to be able
to perform radio link monitoring, as described in clause 5, and
measurements for radio resource management [10, TS 38.133] using a
SS/PBCH block that provides a CORESET for Type0-PDCCH CSS set.</p>
<p>Table 13-1: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {15, 15}
kHz for frequency bands with minimum channel bandwidth 5 MHz or 10
MHz</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 38%" />
<col style="width: 16%" />
<col style="width: 20%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\mathbf{RB}}^{\mathbf{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\mathbf{symb}}^{\mathbf{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>12</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>16</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>12</td>
</tr>
<tr>
<td>9</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>16</td>
</tr>
<tr>
<td>10</td>
<td>1</td>
<td>48</td>
<td>3</td>
<td>12</td>
</tr>
<tr>
<td>11</td>
<td>1</td>
<td>48</td>
<td>3</td>
<td>16</td>
</tr>
<tr>
<td>12</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>38</td>
</tr>
<tr>
<td>13</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>38</td>
</tr>
<tr>
<td>14</td>
<td>1</td>
<td>96</td>
<td>3</td>
<td>38</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-1A: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {15, 15}
kHz for frequency bands operated with shared spectrum channel access</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 37%" />
<col style="width: 17%" />
<col style="width: 20%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>10</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>12</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>14</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>16</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>10</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>12</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>14</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>16</td>
</tr>
<tr>
<td>8</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>9</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>10</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-2: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {15, 30}
kHz for frequency bands with minimum channel bandwidth 5 MHz or 10
MHz</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 37%" />
<col style="width: 17%" />
<col style="width: 20%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>7</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>8</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>7</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>8</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>18</td>
</tr>
<tr>
<td>9</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>20</td>
</tr>
<tr>
<td>10</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>18</td>
</tr>
<tr>
<td>11</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>20</td>
</tr>
<tr>
<td>12</td>
<td>1</td>
<td>48</td>
<td>3</td>
<td>18</td>
</tr>
<tr>
<td>13</td>
<td>1</td>
<td>48</td>
<td>3</td>
<td>20</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-3: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {30, 15}
kHz for frequency bands with minimum channel bandwidth 5 MHz or 10 MHz
except for the frequency bands defined by note 17 of Table 5.2-1 in
[8-1, TS 38.101-1]</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 38%" />
<col style="width: 16%" />
<col style="width: 20%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>48</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>48</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>28</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>28</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>96</td>
<td>3</td>
<td>28</td>
</tr>
<tr>
<td>9</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>10</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-4: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {30, 30}
kHz for frequency bands with minimum channel bandwidth 5 MHz or 10 MHz
except for the frequency bands defined by note 17 of Table 5.2-1 in
[8-1, TS 38.101-1]</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 38%" />
<col style="width: 16%" />
<col style="width: 20%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>9</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>10</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>12</td>
</tr>
<tr>
<td>11</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>14</td>
</tr>
<tr>
<td>12</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>16</td>
</tr>
<tr>
<td>13</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>12</td>
</tr>
<tr>
<td>14</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>14</td>
</tr>
<tr>
<td>15</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>16</td>
</tr>
</tbody>
</table>
<p>Table 13-4A: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {30, 30}
kHz for frequency bands operated with shared spectrum channel access</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 37%" />
<col style="width: 17%" />
<col style="width: 20%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>8</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>9</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>10</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-5: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {30, 15}
kHz for frequency bands with minimum channel bandwidth 40MHz or for the
frequency bands defined by note 17 of Table 5.2-1 in [8-1, TS
38.101-1]</p>
<table style="width:100%;">
<colgroup>
<col style="width: 8%" />
<col style="width: 33%" />
<col style="width: 17%" />
<col style="width: 21%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>48</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>56</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>56</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>96</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>96</td>
<td>3</td>
<td>56</td>
</tr>
<tr>
<td>9</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>10</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-6: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {30, 30}
kHz for frequency bands with minimum channel bandwidth 40MHz or for the
frequency bands defined by note 17 of Table 5.2-1 in [8-1, TS
38.101-1]</p>
<table style="width:100%;">
<colgroup>
<col style="width: 8%" />
<col style="width: 33%" />
<col style="width: 17%" />
<col style="width: 21%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>24</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>28</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>28</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>48</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>9</td>
<td>1</td>
<td>48</td>
<td>3</td>
<td>28</td>
</tr>
<tr>
<td>10</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-7: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {120,
60} kHz</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 37%" />
<col style="width: 17%" />
<col style="width: 20%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>8</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>48</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>48</td>
<td>3</td>
<td>8</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>28</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>28</td>
</tr>
<tr>
<td>8</td>
<td>2</td>
<td>48</td>
<td>1</td>
<td><p>-41 if <span class="math inline">\(k_{SSB} = 0\)</span></p>
<p>-42 if <span class="math inline">\(k_{SSB} &gt; 0\)</span></p></td>
</tr>
<tr>
<td>9</td>
<td>2</td>
<td>48</td>
<td>1</td>
<td>49</td>
</tr>
<tr>
<td>10</td>
<td>2</td>
<td>96</td>
<td>1</td>
<td><p>-41 if <span class="math inline">\(k_{SSB} = 0\)</span></p>
<p>-42 if <span class="math inline">\(k_{SSB} &gt; 0\)</span></p></td>
</tr>
<tr>
<td>11</td>
<td>2</td>
<td>96</td>
<td>1</td>
<td>97</td>
</tr>
<tr>
<td>12</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-8: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {120,
120} kHz for FR2-1</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 37%" />
<col style="width: 17%" />
<col style="width: 20%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>14</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>14</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>24</td>
<td>2</td>
<td><p>-20 if <span class="math inline">\(k_{SSB} = 0\)</span></p>
<p>-21 if <span class="math inline">\(k_{SSB} &gt; 0\)</span></p></td>
</tr>
<tr>
<td>5</td>
<td>3</td>
<td>24</td>
<td>2</td>
<td>24</td>
</tr>
<tr>
<td>6</td>
<td>3</td>
<td>48</td>
<td>2</td>
<td><p>-20 if <span class="math inline">\(k_{SSB} = 0\)</span></p>
<p>-21 if <span class="math inline">\(k_{SSB} &gt; 0\)</span></p></td>
</tr>
<tr>
<td>7</td>
<td>3</td>
<td>48</td>
<td>2</td>
<td>48</td>
</tr>
<tr>
<td>8</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>9</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>10</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-9: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {240,
60} kHz</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 38%" />
<col style="width: 16%" />
<col style="width: 20%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>16</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>16</td>
</tr>
<tr>
<td>4</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>5</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>6</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>7</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>8</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>9</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>10</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-10: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {240,
120} kHz</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 36%" />
<col style="width: 18%" />
<col style="width: 20%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>8</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>24</td>
<td>1</td>
<td><p>-41 if <span class="math inline">\(k_{SSB} = 0\)</span></p>
<p>-42 if <span class="math inline">\(k_{SSB} &gt; 0\)</span></p></td>
</tr>
<tr>
<td>5</td>
<td>2</td>
<td>24</td>
<td>1</td>
<td>25</td>
</tr>
<tr>
<td>6</td>
<td>2</td>
<td>48</td>
<td>1</td>
<td><p>-41 if <span class="math inline">\(k_{SSB} = 0\)</span></p>
<p>-42 if <span class="math inline">\(k_{SSB} &gt; 0\)</span></p></td>
</tr>
<tr>
<td>7</td>
<td>2</td>
<td>48</td>
<td>1</td>
<td>49</td>
</tr>
<tr>
<td>8</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>9</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>10</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-10A: Set of resource blocks and slot symbols of CORESET for
Type0-PDCCH search space set when {SS/PBCH block, PDCCH} SCS is {120,
120} kHz, {480, 480} kHz, or {960, 960} kHz for FR2-2</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 37%" />
<col style="width: 17%" />
<col style="width: 20%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th>SS/PBCH block and CORESET multiplexing pattern</th>
<th>Number of RBs <span
class="math inline">\(\mathbf{N}_{\text{RB}}^{\text{CORESET}}\)</span></th>
<th>Number of Symbols <span
class="math inline">\(\mathbf{N}_{\text{symb}}^{\text{CORESET}}\)</span></th>
<th>Offset (RBs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>24</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>14</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>48</td>
<td>1</td>
<td>28</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>14</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>48</td>
<td>2</td>
<td>28</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>9</td>
<td>1</td>
<td>96</td>
<td>1</td>
<td>76</td>
</tr>
<tr>
<td>10</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>11</td>
<td>1</td>
<td>96</td>
<td>2</td>
<td>76</td>
</tr>
<tr>
<td>12</td>
<td>3</td>
<td>24</td>
<td>2</td>
<td><p>-20 if <span class="math inline">\(k_{SSB} = 0\)</span></p>
<p>-21 if <span class="math inline">\(k_{SSB} &gt; 0\)</span></p></td>
</tr>
<tr>
<td>13</td>
<td>3</td>
<td>24</td>
<td>2</td>
<td>24</td>
</tr>
<tr>
<td>14</td>
<td>3</td>
<td>48</td>
<td>2</td>
<td><p>-20 if <span class="math inline">\(k_{SSB} = 0\)</span></p>
<p>-21 if <span class="math inline">\(k_{SSB} &gt; 0\)</span></p></td>
</tr>
<tr>
<td>15</td>
<td>3</td>
<td>48</td>
<td>2</td>
<td>48</td>
</tr>
</tbody>
</table>
<p>Table 13-11: Parameters for PDCCH monitoring occasions for
Type0-PDCCH CSS set - SS/PBCH block and CORESET multiplexing pattern 1
and FR1</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 9%" />
<col style="width: 35%" />
<col style="width: 10%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th><span class="math display">\[\mathbf{O}\]</span></th>
<th>Number of search space sets per slot</th>
<th><span class="math display">\[\mathbf{M}\]</span></th>
<th style="text-align: center;"><strong>First symbol index</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>4</td>
<td>5</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>5</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>6</td>
<td>7</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>7</td>
<td>7</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>8</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>9</td>
<td>5</td>
<td>1</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>10</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>11</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>12</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>13</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>14</td>
<td>5</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>15</td>
<td>5</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Table 13-12: Parameters for PDCCH monitoring occasions for
Type0-PDCCH CSS set - SS/PBCH block and CORESET multiplexing pattern 1
and FR2-1, or SS/PBCH block and CORESET multiplexing pattern 1 and
{SS/PBCH block, PDCCH} SCS {120, 120} kHz in FR2-2</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 10%" />
<col style="width: 35%" />
<col style="width: 9%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th><span class="math display">\[\mathbf{O}\]</span></th>
<th>Number of search space sets per slot</th>
<th><span class="math display">\[\mathbf{M}\]</span></th>
<th style="text-align: center;"><strong>First symbol index</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {7, if <span
class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>2</td>
<td>2.5</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>2.5</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {7, if <span
class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>4</td>
<td>5</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>5</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {7, if <span
class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>7</td>
<td>2.5</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>8</td>
<td>5</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>9</td>
<td>7.5</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>10</td>
<td>7.5</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {7, if <span
class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>11</td>
<td>7.5</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>12</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>13</td>
<td>5</td>
<td>1</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-12A: Parameters for PDCCH monitoring occasions for
Type0-PDCCH CSS set - SS/PBCH block and CORESET multiplexing pattern 1
and {SS/PBCH block, PDCCH} SCS {480, 480} kHz or {960, 960} kHz in
FR2-2</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 7%" />
<col style="width: 38%" />
<col style="width: 9%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th><span class="math display">\[\mathbf{O}\]</span></th>
<th>Number of search space sets per slot</th>
<th><span class="math display">\[\mathbf{M}\]</span></th>
<th style="text-align: center;"><strong>First symbol index</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {7, if <span
class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>2</td>
<td>X</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>X</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {7, if <span
class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>4</td>
<td>5</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>5</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {7, if <span
class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>7</td>
<td>X</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>8</td>
<td>5</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>9</td>
<td>5+X</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>10</td>
<td>5+X</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {7, if <span
class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>11</td>
<td>5+X</td>
<td>2</td>
<td>1/2</td>
<td>{0, if <span class="math inline">\(i\)</span> is even}, {<span
class="math inline">\(N_{\text{symb}}^{\text{CORESET}}\)</span>, if
<span class="math inline">\(i\)</span> is odd}</td>
</tr>
<tr>
<td>12</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>13</td>
<td>5</td>
<td>1</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>14</td>
<td colspan="4">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="4">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-13: PDCCH monitoring occasions for Type0-PDCCH CSS set -
SS/PBCH block and CORESET multiplexing pattern 2 and {SS/PBCH block,
PDCCH} SCS {120, 60} kHz</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 52%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th style="text-align: center;">PDCCH monitoring occasions (SFN and slot
number)</th>
<th style="text-align: center;"><p><strong>First symbol
index</strong></p>
<p><strong>(<em>k</em> = 0, 1, … 15)</strong></p></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td style="text-align: center;"><p><span
class="math display">\[{SFN}_{c} = {SFN}_{SSB,i}\]</span></p>
<p><span class="math inline">\(n_{c} = n_{SSB,i}\)</span></p></td>
<td style="text-align: center;"><p>0, 1, 6, 7 for</p>
<p><span class="math inline">\(i = 4k\)</span>, <span
class="math inline">\(i = 4k + 1\)</span>, <span class="math inline">\(i
= 4k + 2\)</span>, <span class="math inline">\(i = 4k +
3\)</span></p></td>
</tr>
<tr>
<td>1</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>2</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>3</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>4</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>5</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>6</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>7</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>8</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>9</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>10</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-14: PDCCH monitoring occasions for Type0-PDCCH CSS set -
SS/PBCH block and CORESET multiplexing pattern 2 and {SS/PBCH block,
PDCCH} SCS {240, 120} kHz</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 31%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th style="text-align: center;">PDCCH monitoring occasions (SFN and slot
number)</th>
<th style="text-align: center;"><p><strong>First symbol
index</strong></p>
<p><strong>(<em>k</em> = 0, 1, …, 7)</strong></p></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td style="text-align: center;"><p><span
class="math display">\[{SFN}_{c} = {SFN}_{SSB,i}\]</span></p>
<p><span class="math inline">\(n_{c} = n_{SSB,i}\)</span> or <span
class="math inline">\(n_{c} = n_{SSB,i} - 1\)</span></p></td>
<td style="text-align: center;"><p>0, 1, 2, 3, 0, 1 in <span
class="math inline">\(i = 8k\)</span>, <span class="math inline">\(i =
8k + 1\)</span>, <span class="math inline">\(i = 8k + 2\)</span>, <span
class="math inline">\(i = 8k + 3\)</span>, <span class="math inline">\(i
= 8k + 6\)</span>, <span class="math inline">\(i = 8k + 7\)</span>
(<span class="math inline">\(n_{c} = n_{SSB,i}\)</span>)</p>
<p>12, 13 in <span class="math inline">\(i = 8k + 4\)</span>, <span
class="math inline">\(i = 8k + 5\)</span> (<span
class="math inline">\(n_{c} = n_{SSB,i} - 1\)</span>)</p></td>
</tr>
<tr>
<td>1</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>2</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>3</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>4</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>5</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>6</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>7</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>8</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>9</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>10</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-15: PDCCH monitoring occasions for Type0-PDCCH CSS set -
SS/PBCH block and CORESET multiplexing pattern 3 and {SS/PBCH block,
PDCCH} SCS {120, 120} kHz</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 52%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th style="text-align: center;">PDCCH monitoring occasions (SFN and slot
number)</th>
<th style="text-align: center;"><p><strong>First symbol
index</strong></p>
<p><strong>(<em>k</em> = 0, 1, … 15)</strong></p></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td style="text-align: center;"><p><span
class="math display">\[{SFN}_{c} = {SFN}_{SSB,i}\]</span></p>
<p><span class="math inline">\(n_{c} = n_{SSB,i}\)</span></p></td>
<td style="text-align: center;"><p>4, 8, 2, 6 in</p>
<p><span class="math inline">\(i = 4k\)</span>, <span
class="math inline">\(i = 4k + 1\)</span>, <span class="math inline">\(i
= 4k + 2\)</span>, <span class="math inline">\(i = 4k +
3\)</span></p></td>
</tr>
<tr>
<td>1</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>2</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>3</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>4</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>5</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>6</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>7</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>8</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>9</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>10</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-15A: PDCCH monitoring occasions for Type0-PDCCH CSS set -
SS/PBCH block and CORESET multiplexing pattern 3 and {SS/PBCH block,
PDCCH} SCS {480, 480} kHz or {960, 960} kHz</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 52%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr>
<th>Index</th>
<th style="text-align: center;">PDCCH monitoring occasions (SFN and slot
number)</th>
<th style="text-align: center;"><p><strong>First symbol
index</strong></p>
<p><strong>(<em>k</em> = 0, 1, … 31)</strong></p></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td style="text-align: center;"><p><span
class="math display">\[{SFN}_{c} = {SFN}_{SSB,i}\]</span></p>
<p><span class="math display">\[n_{c} = n_{SSB,i}\]</span></p></td>
<td style="text-align: center;"><p>2, 9 in</p>
<p><span class="math inline">\(i = 2k\)</span>, <span
class="math inline">\(i = 2k + 1\)</span></p></td>
</tr>
<tr>
<td>1</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>2</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>3</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>4</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>5</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>6</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>7</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>8</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>9</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>10</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>11</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>12</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>13</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>14</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
<tr>
<td>15</td>
<td colspan="2" style="text-align: center;">Reserved</td>
</tr>
</tbody>
</table>
<p>If a UE detects a first SS/PBCH block and determines that a CORESET
for Type0-PDCCH CSS set is not present, and for <span
class="math inline">\(24 \leq k_{SSB} \leq 29\)</span> for FR1 or for
<span class="math inline">\(12 \leq k_{SSB} \leq 13\)</span> for FR2,
the UE may determine the nearest (in the corresponding frequency
direction) global synchronization channel number (GSCN) of a second
SS/PBCH block having a CORESET for an associated Type0-PDCCH CSS set as
<span class="math inline">\(N_{GSCN}^{Reference} + N_{GSCN}^{Size} \cdot
N_{GSCN}^{Offset}\)</span>. <span
class="math inline">\(N_{GSCN}^{Reference}\)</span> is the GSCN of the
first SS/PBCH block, <span class="math inline">\(N_{GSCN}^{Size} =
1\)</span> in FR1 and FR2-1, <span class="math inline">\(N_{GSCN}^{Size}
=\)</span> 3 in FR2-2, and <span
class="math inline">\(N_{GSCN}^{Offset}\)</span> is a GSCN offset
provided by Table 13-16 for FR1 and Table 13-17 for FR2. If the UE
detects the second SS/PBCH block and the second SS/PBCH block does not
provide a CORESET for Type0-PDCCH CSS set, as described in clause 4.1,
the UE may ignore the information related to GSCN of SS/PBCH block
locations for performing cell search.</p>
<p>If a UE detects a SS/PBCH block and determines that a CORESET for
Type0-PDCCH CSS set is not present, and for <span
class="math inline">\(k_{SSB} = 31\)</span> for FR1 or for <span
class="math inline">\(k_{SSB} = 15\)</span> for FR2, the UE determines
that there is no SS/PBCH block having an associated Type0-PDCCH CSS set
within a GSCN range <span class="math inline">\(\left\lbrack
{N_{GSCN}^{Reference} - N_{GSCN}^{Start},\ N}_{GSCN}^{Reference} +
N_{GSCN}^{End} \right\rbrack\)</span>. <span
class="math inline">\(N_{GSCN}^{Start}\)</span>and <span
class="math inline">\(N_{GSCN}^{End}\)</span> are respectively
determined by <em>controlResourceSetZero</em> and
<em>searchSpaceZero</em> in <em>pdcch-ConfigSIB1</em>. If the GSCN range
is <span class="math inline">\(\left\lbrack {N_{GSCN}^{Reference},\
N}_{GSCN}^{Reference} \right\rbrack\)</span>, the UE determines that
there is no information for a second SS/PBCH block with a CORESET for an
associated Type0-PDCCH CSS set on the detected SS/PBCH block.</p>
<p>If a UE does not detect any SS/PBCH block providing a CORESET for
Type0-PDCCH CSS set, as described in clause 4.1, within a time period
determined by the UE, the UE may ignore the information related to GSCN
of SS/PBCH locations in performing cell search.</p>
<p>Table 13-16: Mapping between the combination of <span
class="math inline">\(\mathbf{k}_{\mathbf{SSB}}\)</span> and
<em>controlResourceSetZero</em> and <em>searchSpaceZero</em> in
<em>pdcch-ConfigSIB1</em> to <span
class="math inline">\(\mathbf{N}_{\mathbf{GSCN}}^{\mathbf{Offset}}\)</span>
for FR1</p>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 34%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><span
class="math display">\[k_{SSB}\]</span></th>
<th style="text-align: center;"><em>16×controlResourceSetZero
+searchSpaceZero</em></th>
<th style="text-align: center;"><span
class="math display">\[N_{GSCN}^{Offset}\]</span></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">24</td>
<td style="text-align: center;">0, 1, …, 255</td>
<td style="text-align: center;">1, 2, …, 256</td>
</tr>
<tr>
<td style="text-align: center;">25</td>
<td style="text-align: center;">0, 1, …, 255</td>
<td style="text-align: center;">257, 258, …, 512</td>
</tr>
<tr>
<td style="text-align: center;">26</td>
<td style="text-align: center;">0, 1, …, 255</td>
<td style="text-align: center;">513, 514, …., 768</td>
</tr>
<tr>
<td style="text-align: center;">27</td>
<td style="text-align: center;">0, 1, …, 255</td>
<td style="text-align: center;">-1, -2, …, -256</td>
</tr>
<tr>
<td style="text-align: center;">28</td>
<td style="text-align: center;">0, 1, …, 255</td>
<td style="text-align: center;">-257, -258, …, -512</td>
</tr>
<tr>
<td style="text-align: center;">29</td>
<td style="text-align: center;">0, 1, …, 255</td>
<td style="text-align: center;">-513, -514, …., -768</td>
</tr>
<tr>
<td style="text-align: center;">30</td>
<td style="text-align: center;">0, 1, …, 255</td>
<td style="text-align: center;">Reserved, Reserved, …, Reserved</td>
</tr>
</tbody>
</table>
<p>Table 13-17: Mapping between the combination of <span
class="math inline">\(\mathbf{k}_{\mathbf{SSB}}\)</span> and
<em>controlResourceSetZero</em> and <em>searchSpaceZero</em> in
<em>pdcch-ConfigSIB1</em> to <span
class="math inline">\(\mathbf{N}_{\mathbf{GSCN}}^{\mathbf{Offset}}\)</span>
for FR2</p>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 34%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><span
class="math display">\[k_{SSB}\]</span></th>
<th style="text-align: center;"><em>16×controlResourceSetZero
+searchSpaceZero</em></th>
<th style="text-align: center;"><span
class="math display">\[N_{GSCN}^{Offset}\]</span></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">12</td>
<td style="text-align: center;">0, 1, …, 255</td>
<td style="text-align: center;">1, 2, …, 256</td>
</tr>
<tr>
<td style="text-align: center;">13</td>
<td style="text-align: center;">0, 1, …, 255</td>
<td style="text-align: center;">-1, -2, …, -256</td>
</tr>
<tr>
<td style="text-align: center;">14</td>
<td style="text-align: center;">0, 1, …, 255</td>
<td style="text-align: center;">Reserved, Reserved, …, Reserved</td>
</tr>
</tbody>
</table>
<h1 id="integrated-access-backhaul-operation">14 Integrated
access-backhaul operation </h1>
<p>Throughout this specification, unless otherwise noted, statements
using the term "UE" in clauses 4 through 13 are equally applicable to
the IAB-MT of an IAB node.</p>
<p>A procedure for an IAB-MT to perform cell search, system information
acquisition, or random access procedure is same as a corresponding one
for a UE except for the following.</p>
<p>For initial cell selection, an IAB-MT may assume that half frames
with SS/PBCH blocks occur with a periodicity of 16 frames.</p>
<p>For PRACH transmission, an IAB-MT determines frames and
subframes/slots within the frames containing PRACH occasions as
described in [4, TS 38.211].</p>
<p>The IAB-MT determines an association period for mapping SS/PBCH
blocks to PRACH occasions based on a PRACH configuration period as
described in clause 8.1 and according to Table 14-1 instead of Table
8.1-1. An association pattern period includes one or more association
periods and is determined so that a pattern between PRACH occasions and
SS/PBCH blocks repeats at most every 640 msec. A PRACH occasion in a
PRACH slot is valid according to the conditions in clause 8.1.</p>
<p>Table 14-1: Mapping between PRACH configuration period and SS/PBCH
block to PRACH occasion association period for an IAB-MT</p>
<table>
<colgroup>
<col style="width: 46%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr>
<th>PRACH configuration period (msec)</th>
<th>Association period (number of PRACH configuration periods)</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>{1, 2, 4, 8, 16, 32, 64}</td>
</tr>
<tr>
<td>20</td>
<td>{1, 2, 4, 8, 16, 32}</td>
</tr>
<tr>
<td>40</td>
<td>{1, 2, 4, 8, 16}</td>
</tr>
<tr>
<td>80</td>
<td>{1, 2, 4, 8}</td>
</tr>
<tr>
<td>160</td>
<td>{1, 2, 4}</td>
</tr>
<tr>
<td>320</td>
<td>{1, 2}</td>
</tr>
<tr>
<td>640</td>
<td>{1}</td>
</tr>
</tbody>
</table>
<p>If an IAB-node is provided an index <span
class="math inline">\(T_{\text{delta}}\)</span> in a Timing Delta MAC CE
[11, TS 38.321] from a serving cell, the IAB-node may assume that <span
class="math inline">\(T_{\text{TA}}/2 + \left( N_{\text{delta}} +
T_{\text{delta}} \cdot G_{\text{step}}{- N}_{\text{TA,Offset}}/2 \right)
\cdot T_{\text{c}}\)</span> is a time difference between a DU
transmission of a signal from the serving cell and a reception of the
signal by the IAB-MT when <span class="math inline">\(T_{\text{TA}}/2 +
\left( N_{\text{delta}} + T_{\text{delta}} \cdot G_{\text{step}}{-
N}_{\text{TA,Offset}}/2 \right) \cdot T_{\text{c}} &gt; 0\)</span>,
where</p>
<p>- <span class="math inline">\(T_{\text{TA}}\)</span> is the
difference between the IAB-MT reception time and the IAB-MT transmission
time for IAB-MT transmission timing mode 'Case-6', and is defined in
clause 4.3.1 of [4, TS 38.211] for IAB-MT transmission timing mode
'Case-1' and parent node reception mode 'Case-7'</p>
<p>- <span class="math inline">\(N_{\text{delta}}\)</span> and <span
class="math inline">\(G_{\text{step}}\)</span> are determined as</p>
<p>- <span class="math inline">\(N_{\text{delta}} = - 70528\)</span> and
<span class="math inline">\(G_{step} = 64\)</span>, if the serving cell
providing the Timing Delta MAC CE operates in FR1</p>
<p>- <span class="math inline">\(N_{\text{delta}} = - 17664\)</span> and
<span class="math inline">\(G_{step} = 32\)</span>, if the serving cell
providing the Timing Delta MAC CE operates in FR2</p>
<p>The IAB node may assume that a same value of index <span
class="math inline">\(T_{\text{delta}}\)</span> is provided from a
serving cell for the IAB-MT transmission timing modes 'Case-7' and
'Case-1'</p>
<p>The IAB-node may use the time difference to determine a DU
transmission time.</p>
<p>For a serving cell of an IAB-MT, the IAB-MT can be provided by Timing
Case Indication MAC CE [11, TS 38.321] an indication of the IAB-MT
transmission timing mode in a slot. Upon reception of the Timing Case
Indication for a serving cell in a TAG, the IAB-MT applies a same IAB-MT
transmission timing mode in a slot on all serving cells in the TAG.</p>
<p>If the indicated IAB-MT transmission timing mode in a slot is set to
'Case-1' or the IAB-MT transmission timing mode indication in a slot is
not provided, the IAB-MT transmission time is determined as for a "UE"
in clause 4.2.</p>
<p>If the indicated IAB-MT transmission timing mode in a slot is set to
'Case-6', the IAB-node sets the IAB-MT transmission time to the
transmission time of the IAB-DU.</p>
<p>If the indicated IAB-MT transmission timing mode in a slot is set to
'Case-7', the IAB-MT is provided a timing advance offset value <span
class="math inline">\(N_{TA,offset,2}\)</span> for a serving cell by
Case-7 Timing advance offset MAC CE [11, TS 38.321]. The IAB-MT
determines its uplink transmission timing as T<sub>TA</sub> +
N<sub>TA,offset,2</sub> ·T<sub>c</sub> where <span
class="math inline">\(T_{\text{TA}}\)</span> is defined in clause 4.3.1
of [4, TS 38.211] and <span class="math inline">\(N_{TA,offset,2} =
T_{offset,2} \cdot 16 \cdot \frac{64}{2^{\mu}}\)</span> where <span
class="math inline">\(T_{offset,2}\)</span> is provided by the Case-7
Timing advance offset MAC CE [11, TS 38.321].</p>
<p>A slot format for an IAB-DU or an IAB-MT includes downlink symbols,
uplink symbols, and flexible symbols.</p>
<p>For each cell of an IAB-DU, the IAB-DU can be provided an indication
for a slot format over a number of slots by <em>gNB-DU Cell Resource
Configuration</em> [16, TS 38.473].</p>
<p>For each serving cell, an IAB-MT can be provided an indication for a
slot format over a number of slots by
<em>tdd-UL-DL-ConfigurationDedicated-IAB-MT</em>. If the IAB-MT is
provided <em>tdd-UL-DL-ConfigurationDedicated-IAB-MT</em>, the
statements in clause 11.1 that include
"<em>tdd-UL-DL-ConfigurationDedicated</em>" apply to the IAB-MT of an
IAB node by replacing "<em>tdd-UL-DL-ConfigurationDedicated</em>" with
"<em>tdd-UL-DL-ConfigurationDedicated-IAB-MT</em>" for the IAB-MT,
except that the <em>tdd-UL-DL-ConfigurationDedicated-IAB-MT</em>
provides</p>
<p>- a set of slot configurations by
<em>slotSpecificConfigurationsToAddModList-IAB-MT</em></p>
<p>- for each slot configuration from the set of slot configurations</p>
<p>- a slot index for a slot provided by <em>slotIndex</em></p>
<p>- a set of symbols for a slot by <em>symbols-IAB-MT</em> where</p>
<p>- if <em>symbols-IAB-MT</em> = <em>allDownlink</em>, all symbols in
the slot are downlink</p>
<p>- if <em>symbols-IAB-MT</em> = <em>allUplink</em>, all symbols in the
slot are uplink</p>
<p>- if <em>symbols-IAB-MT</em> = <em>explicit</em>,
<em>nrofDownlinkSymbols</em> provides a number of downlink first symbols
in the slot and <em>nrofUplinkSymbols</em> provides a number of uplink
last symbols in the slot. If <em>nrofDownlinkSymbols</em> is not
provided, there are no downlink first symbols in the slot and if
<em>nrofUplinkSymbols</em> is not provided, there are no uplink last
symbols in the slot. The remaining symbols in the slot are flexible.</p>
<p>- if <em>symbols-IAB-MT</em> = <em>explicit-IAB-MT</em>,
<em>nrofUplinkSymbols</em> provides a number of uplink first symbols in
the slot and <em>nrofDownlinkSymbols</em> provides a number of downlink
last symbols in the slot. If <em>nrofUplinkSymbols</em> is not provided,
there are no uplink first symbols in the slot and if
<em>nrofDownlinkSymbols</em> is not provided, there are no downlink last
symbols in the slot. The remaining symbols in the slot are flexible.</p>
<p>If an IAB-MT is configured with an MCG and an SCG, is not capable of
simultaneous transmission and reception, and would simultaneously
transmit and receive on the MCG and the SCG,</p>
<p>- if flexible symbols are configured by both parent nodes for
operation with inter-donor NR-DC, the IAB-MT operates according to the
scheduling from the MCG</p>
<p>- otherwise, if the IAB-MT is configured with multiple serving cells,
is provided <em>directionalCollisionHandling-</em>r17 = 'enabled' for a
set of serving cell(s) from the multiple serving cells, and indicates
<em>half-DuplexTDD-CA-SameSCS</em> capability across MCG and SCG for
NR-DC operation, the IAB-MT applies the procedures for resolving
directional collisions as described in clause 11.1 for resolving
directional collisions across serving cells.</p>
<p>An IAB-MT can be provided, by <em>SlotFormatCombinationsPerCell</em>,
a list of slot format combinations applicable for one serving cell and,
by <em>SlotFormatIndicator</em>, a configuration for monitor a DCI
format 2_0 indicating a slot format combination, from the list of slot
format combinations, over a number of slots as described in clause
11.1.1. In addition to the slot formats in Table 11.1.1-1, an SFI field
for an IAB-MT in DCI format 2_0 can indicate to the IAB-MT a slot format
from the slot formats in Table 14-2.</p>
<p>Table 14-2: Slot formats for normal cyclic prefix</p>
<table style="width:100%;">
<colgroup>
<col style="width: 11%" />
<col style="width: 7%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 6%" />
</colgroup>
<thead>
<tr>
<th rowspan="2" style="text-align: center;"><p><strong>Slot</strong></p>
<p><strong>Format</strong></p></th>
<th colspan="14" style="text-align: center;"><strong>Symbol number in a
slot</strong></th>
</tr>
<tr>
<th style="text-align: center;"><strong>0</strong></th>
<th style="text-align: center;"><strong>1</strong></th>
<th style="text-align: center;"><strong>2</strong></th>
<th style="text-align: center;"><strong>3</strong></th>
<th style="text-align: center;"><strong>4</strong></th>
<th style="text-align: center;"><strong>5</strong></th>
<th style="text-align: center;"><strong>6</strong></th>
<th style="text-align: center;"><strong>7</strong></th>
<th style="text-align: center;"><strong>8</strong></th>
<th style="text-align: center;"><strong>9</strong></th>
<th style="text-align: center;"><strong>10</strong></th>
<th style="text-align: center;"><strong>11</strong></th>
<th style="text-align: center;"><strong>12</strong></th>
<th style="text-align: center;"><strong>13</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">56</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">57</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">58</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">59</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">60</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">61</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">62</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">63</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">64</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">65</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">66</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">67</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">68</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
</tr>
<tr>
<td style="text-align: center;">69</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">70</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">71</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">72</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">73</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">74</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">75</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">76</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">77</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">78</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">79</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">80</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">81</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">82</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">83</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">84</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">85</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">86</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">87</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">88</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">89</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">90</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">91</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">92</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">93</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">94</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">95</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
<tr>
<td style="text-align: center;">96</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">U</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
</tbody>
</table>
<p>For a serving cell of an IAB-MT, the IAB-MT can be provided by
Provided Guard Symbols MAC CE, for Case-1, Case-6 and Case-7 timing
modes, respectively, a number of symbols that will not be used for the
IAB-MT in slots where the IAB-node transitions between IAB-MT and
IAB-node DU and a SCS configuration for the number of symbols [11, TS
38.321].</p>
<p>With reference to slots of an IAB-DU cell, a symbol in a slot of an
IAB-DU cell can be configured to be of hard, soft, or unavailable type
by <em>HSNA Slot Configuration List</em> in <em>gNB-DU Cell Resource
Configuration</em> [16, TS 38.473].</p>
<p>When a downlink, uplink, or flexible symbol is configured as hard,
the IAB-DU cell can respectively transmit, receive, or either transmit
or receive in the symbol. A symbol of a slot is equivalent to being
configured as hard if an IAB-DU would transmit a SS/PBCH block, PDCCH
for Type0-PDCCH CSS sets configured by <em>pdcchConfigSIB1</em>, or a
periodic CSI-RS in the symbol of the slot, or would receive a PRACH or a
SR in the symbol of the slot.</p>
<p>When a downlink, uplink, or flexible symbol is configured as soft,
the IAB-DU cell can respectively transmit, receive or either transmit or
receive in the symbol only if</p>
<p>- the IAB-MT does not transmit or receive during the symbol of the
IAB-DU cell, or</p>
<p>- with respect to all serving cells, the IAB-MT would transmit or
receive during the symbol of the IAB-DU cell, and the transmission or
reception during the symbol of the IAB-DU cell is not changed due to a
use of the symbol by the IAB-DU, or</p>
<p>- the IAB-MT detects a DCI format 2_5 with an AI index field value
indicating the soft symbol as available if the IAB-MT is not configured
with an SCG, or</p>
<p>- the IAB-MT detects two DCI formats 2_5 with an AI index field
indicating the soft symbol as available from the MCG and SCG,
respectively, or</p>
<p>- the IAB-MT detects a DCI format 2_5 with an AI index field value
indicating the soft symbol as available from one cell group and with
respect to all serving cells of the other cell group</p>
<p>- the IAB-MT does not transmit or receive during the symbol of the
IAB-DU cell, or</p>
<p>- the IAB-MT would transmit or receive during the symbol of the
IAB-DU cell, and the transmission or reception during the symbol of the
IAB-DU cell does not change due to a use of the symbol by the
IAB-DU.</p>
<p>When the IAB-MT receives a DCI format 2_5 from a serving cell in a
cell group, the IAB-MT applies the information of the DCI format 2_5 to
all serving cells of the cell group.</p>
<p>When a symbol is configured as unavailable, the IAB-DU neither
transmits nor receives in the symbol.</p>
<p>With reference to slots of an IAB-DU cell, the IAB-DU can be provided
an indication of hard, soft or unavailable type per RB set for symbols
configured as downlink, uplink or flexible in a slot by
<em>Frequency-Domain HSNA Configuration List</em> [16, TS 38.473]. The
RB set size and the number of RB sets are configured by <em>RB Set
Configuration</em> [16, TS 38.473]. The IAB-node can assume the RB set
size for the IAB-DU cell is larger than or equal to the IAB-MT’s
smallest RBG size of the configured BWPs of the FDM required IAB-MT’s
serving cell(s) as indicated in Multiplexing Info [16, TS 38.473] of the
DU cell. If an indication of hard, soft or unavailable type is not
provided for an RB set of a symbol in a slot, the IAB-DU applies the
configuration of hard, soft or unavailable type provided by <em>HSNA
Slot Configuration List</em> in <em>gNB-DU Cell Resource
Configuration</em> [16, TS 38.473] for the RB set of the symbol in the
slot. If an indication of hard, soft, or unavailable type is provided
for an RB set in a symbol of a slot, the IAB-DU applies the
configuration of hard, soft, or unavailable type provided by
<em>Frequency-Domain HSNA Configuration List</em> [16, TS 38.473] unless
the symbol is configured as soft type in <em>HSNA Slot Configuration
List</em> in <em>gNB-DU Cell Resource Configuration</em> [16, TS 38.473]
and the IAB-DU cell can transmit or receive in the symbol.</p>
<p>When an RB set of a downlink, uplink, or flexible symbol is
configured as hard, the IAB-DU cell can respectively transmit, receive,
or either transmit or receive on the RB set in the symbol. An RB set of
a symbol is equivalent to being configured as hard if an IAB-DU would
transmit a SS/PBCH block, PDCCH for Type0-PDCCH CSS sets configured by
<em>pdcchConfigSIB1</em>, or a periodic CSI-RS in the RB set of the
symbol, or would receive a PRACH or a SR in the RB set of the
symbol.</p>
<p>When an RB set of a downlink, uplink, or flexible symbol is
configured as soft, the IAB-DU cell can respectively transmit, receive
or either transmit or receive on the RB set in the symbol only if</p>
<p>- the IAB-MT does not transmit or receive on the RB set during the
symbol of the IAB-DU cell, or</p>
<blockquote>
<p>- with respect to all serving cells, the IAB-MT would transmit or
receive on the RB set during the symbol of the IAB-DU cell, and the
transmission or reception on the RB set or any RB set that is configured
as unavailable or configured as soft and not indicated as available
during the symbol of the IAB-DU cell is not changed due to a use of the
RB set in the symbol by the IAB-DU, or</p>
<p>- the IAB-MT detects a DCI format 2_5 with an AI index field value
indicating the soft RB set as available if the IAB-MT is not configured
with an SCG, or</p>
<p>- the IAB-MT detects two DCI formats 2_5 with an AI index field value
indicating the soft RB set as available from the MCG and SCG,
respectively, or</p>
<p>- the IAB-MT detects a DCI format 2_5 with an AI index field value
indicating the soft RB set as available from one cell group and with
respect to all serving cells of the other cell group, the IAB-MT would
transmit or receive on the RB set during the symbol of the IAB-DU cell,
and the transmission or reception on the RB set during the symbol of the
IAB-DU cell does not change due to a use of the RB set in the symbol by
the IAB-DU.</p>
</blockquote>
<p>When an RB set of a downlink, uplink, or flexible symbol is
configured as unavailable, the IAB-DU neither transmits nor receives in
the RB set in the symbol.</p>
<p>If an IAB-node is provided an <em>AvailabilityIndicator</em>, the
IAB-node is provided an AI-RNTI by <em>ai-RNTI</em> and a payload size
of a DCI format 2_5 by <em>dci-PayloadSizeAI</em>. The IAB-node is also
provided a search space set configuration, by <em>SearchSpace</em>, for
monitoring PDCCH.</p>
<p>For each cell of an IAB-DU in a set of cells of the IAB-DU, the
IAB-DU can be provided:</p>
<p>- an identity of the IAB-DU cell by <em>iab-DU-CellIdentity</em></p>
<p>- a location of an availability indicator (AI) index field in DCI
format 2_5 by <em>positionInDCI-AI-r16</em> and/or by
<em>positionInDCI-AI-RBGroups-v1720</em></p>
<p>- a set of availability combinations by
<em>availabilityCombinations-r16</em> or by
<em>availabilityCombinationsRB-Groups-r17</em>, where each availability
combination in the set of availability combinations includes</p>
<p>- <em>resourceAvailability-r16</em> indicating availability of soft
symbols in one or more slots for the IAB-DU cell, or one
<em>resourceAvailability-r17</em> indicating availability of soft
resources in all RB sets in one or more slots for the IAB-DU cell, or
one or multiple RB set groups by <em>rb-SetGroups-r17</em> with each RB
set groups by <em>RB-SetGroup-r17</em> indicating
<em>resourceAvailability-r17</em> for soft resources in one or more
slots for the associated <em>rb-Sets-r17</em>, and</p>
<p>- a mapping for the soft symbol, and/or for soft resources,
availability combinations provided by <em>resourceAvailability-r16 or
resourceAvailability-r17</em> to a corresponding AI index field value in
DCI format 2_5 provided by <em>availabilityCombinationId-r16 or
availabilityCombinationId-r17, respectively</em></p>
<p>With reference to a slot of an IAB-DU cell, if the IAB-DU is not
provided an indication of hard, soft or unavailable type per RB set by
<em>Frequency-Domain HSNA Configuration List</em> [16, TS 38.473], the
indication of availability for the slot is based solely on
<em>availabilityCombinations-r16</em>.</p>
<p>The IAB-DU can assume a same SCS configuration for
<em>availabilityCombinations-r16</em> or
<em>availabilityCombinationsRB-Groups-r17</em> for slots of a cell as an
SCS configuration provided by <em>gNB-DU Cell Resource
Configuration</em> for the cell.</p>
<p>The IAB-DU can assume a same SCS configuration for
<em>availabilityCombinationsRB-Groups-r17</em> for RB sets of a cell as
a SCS configuration provided by <em>RB Set Configuration</em> for the
cell.</p>
<p>An AI index field value in a DCI format 2_5 indicates to an IAB-DU a
soft symbol and/or a soft RB set in an RB set group availability in each
slot for a number of slots starting from the earliest slot of the IAB-DU
which overlaps in time with the slot of the IAB-MT where the IAB-MT
detects the DCI format 2_5. The number of slots is equal to or larger
than a PDCCH monitoring periodicity for DCI format 2_5 as provided by
<em>SearchSpace</em>. The AI index field includes <span
class="math inline">\(\max\left\{ \left\lceil \log_{2}(maxAIindex + 1)
\right\rceil,1 \right\}\)</span> bits where maxAIindex is the maximum of
the values provided by corresponding <em>availabilityCombinationId</em>.
An availability for a soft symbol or a soft RB set in an RB set group in
a slot is identified by a corresponding value
<em>resourceAvailability</em> as provided in Table 14-3.</p>
<p>Table 14-3: Mapping between values of <em>resourceAvailability</em>
elements and types of soft symbol or soft RB set availability in a
slot</p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr>
<th>Value</th>
<th>Indication</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No indication of availability for soft symbols or soft RB sets in an
RB set group</td>
</tr>
<tr>
<td>1</td>
<td><p>DL soft symbols or soft RB sets in an RB set group are indicated
available</p>
<p>No indication of availability for UL and Flexible soft symbols or
soft RB sets in an RB set group</p></td>
</tr>
<tr>
<td>2</td>
<td><p>UL soft symbols or soft RB sets in an RB set group are indicated
available</p>
<p>No indication of availability for DL and Flexible soft symbols or
soft RB sets in an RB set group</p></td>
</tr>
<tr>
<td>3</td>
<td><p>DL and UL soft symbols or soft RB sets in an RB set group are
indicated available</p>
<p>No indication of availability for Flexible soft symbols or soft RB
sets in an RB set group</p></td>
</tr>
<tr>
<td>4</td>
<td><p>Flexible soft symbols or soft RB sets in an RB set group are
indicated available</p>
<p>No indication of availability for DL and UL soft symbols or soft RB
sets in an RB set group</p></td>
</tr>
<tr>
<td>5</td>
<td><p>DL and Flexible soft symbols or soft RB sets in an RB set group
are indicated available</p>
<p>No indication of availability for UL soft symbols or soft RB sets in
an RB set group</p></td>
</tr>
<tr>
<td>6</td>
<td><p>UL and Flexible soft symbols or soft RB sets in an RB set group
are indicated available</p>
<p>No indication of availability for DL soft symbols or soft RB sets in
an RB set group</p></td>
</tr>
<tr>
<td>7</td>
<td>DL, UL, and Flexible soft symbols or soft RB sets in an RB set group
are indicated available</td>
</tr>
</tbody>
</table>
<p>If a PDCCH monitoring periodicity for DCI format 2_5 is smaller than
a duration of an availability combination of soft symbols over a number
of slots that the IAB-MT obtains at a PDCCH monitoring occasion for DCI
format 2_5 by a corresponding AI index field value, and the IAB-MT
detects more than one DCI formats 2_5 indicating an availability
combination of soft symbols or of soft RB sets in RB set groups in a
slot, the IAB-MT expects that each of the more than one DCI formats 2_5
indicates a same value for the availability combination of the soft
symbols or of soft RB sets in an RB set group in the slot. An IAB-MT
monitors PDCCH candidates for a DCI format 2_5 with CRC scrambled by
AI-RNTI in one or both of the following search space sets:</p>
<p>- a Type3-PDCCH CSS set configured by <em>SearchSpace</em> in
<em>PDCCH-Config</em> with <em>searchSpaceType</em> =
<em>common</em>;</p>
<p>- a USS set configured by SearchSpace in PDCCH-Config with
searchSpaceType = ue-Specific.</p>
<p>The IAB-node can be provided by the parent node a set of RS resource
indexes that indicate quasi co-location properties of an IAB-DU cell
where simultaneous transmission/reception from the IAB-MT and
transmission from the IAB-DU cells is restricted by Child IAB-DU
Restricted Beam Indication MAC CE as described in [11, TS 38.321]. The
IAB-DU does not transmit on a cell if the IAB node is operating in a
non-TDM multiplexing mode using an indicated RS resource index on a
symbol or RB set configured as soft in an IAB-DU cell</p>
<p>- when it is not indicated as available by
<em>resourceAvailability</em></p>
<p>- when the IAB-MT is operating on an associated carrier, if that
indication is provided</p>
<p>- when the current IAB-DU transmission mode corresponds to an
associated multiplexing mode, if that indication is provided</p>
<p>- when one of the associated TCI states, RS resource indexes, or SRI
of the IAB-MT, if provided, is simultaneously used for reception or
transmission of the IAB-MT</p>
<p>- when simultaneous transmission/reception by the IAB-MT and
transmission from the IAB-DU cell occur in non-overlapping frequency
resources, if such indication is provided, or when simultaneous
transmission/reception by the IAB-MT and transmission from the IAB-DU
cell occur in overlapping frequency resources</p>
<p>- in a given slot, if that indication is provided</p>
<p>For a serving cell of an IAB-MT, the IAB-MT can be provided a set of
TCI states or a set of RS resource indexes corresponding to a SS/PBCH
block or to a CSI-RS resource index for a slot where a PDSCH EPRE
adjustment is indicated by DL Tx Power Adjustment MAC CE as described in
[11, TS 38.321]. The PDSCH EPRE can be derived from a downlink CSI-RS
EPRE as described in [6, TS 38.214] and a power offset provided by the
<em>DL Tx Power adjustment</em> field in <em>DL TX Power Adjustment</em>
MAC CE as described in [11, TS 38.321]. The downlink CSI-RS EPRE refers
to the CSI-RS indicated by Reference CSI-RS ID in <em>DL Tx Power
Adjustment</em> MAC CE as described in [11, TS 38.321]. The <em>DL TX
Power Adjustment</em> provides the offset between PDSCH EPRE and CSI-RS
EPRE. For a downlink DM-RS and/or PT-RS associated with a PDSCH, the
IAB-MT may assume that the ratio of PDSCH EPRE to DM-RS EPRE, and/or
PT-RS EPRE to PDSCH EPRE, is obtained as for a "UE" in [6, TS 38.214].
If no TCI state or RS resource index is provided to the IAB-MT, the
IAB-MT may assume that a same PDSCH EPRE adjustment applies to all TCI
states or RS resource indexes configured for the IAB-MT. A PDSCH EPRE
adjustment provided by DL Tx Power Adjustment MAC CE may be associated
with</p>
<p>- multiplexing mode of the IAB-node, if provided, and/or</p>
<p>- when simultaneous reception by the IAB-MT and
transmission/reception by an IAB-DU cell occur in non-overlapping
frequency resources, if provided, or when simultaneous reception by the
IAB-MT and transmission/reception by an IAB-DU cell occur in overlapping
frequency resources, if provided, and/or</p>
<p>- slots indicated by slot indexes, if provided.</p>
<h1 id="dual-active-protocol-stack-based-handover">15 Dual active
protocol stack based handover</h1>
<p>If a UE indicates a capability for dual active protocol stack based
handover (DAPS HO), the UE can be provided with a source MCG and a
target MCG.</p>
<p>If a UE is configured with a target MCG using NR radio access in FR1
or in FR2 and with a source MCG using NR radio access in FR2 or in FR1,
respectively, the UE performs transmission power control independently
per cell group as described in clauses 7.1 through 7.5.</p>
<p>When a PDCCH reception by a UE includes two PDCCH candidates from
corresponding search space sets, as described in clause 10.1, the end of
the PDCCH reception is the end of the PDCCH candidate that ends
later.</p>
<p>If a UE is configured with a target MCG using NR radio access in FR1
and a source MCG using NR radio access in FR1, the UE is configured a
maximum power <span class="math inline">\(P_{MCG}\)</span> for
transmissions on the target MCG by <em>p-DAPS-Target</em> and a maximum
power <span class="math inline">\(P_{SCG}\)</span> for transmissions on
the source MCG by <em>p-DAPS-Source</em> and with an inter-CG power
sharing mode by <em>uplinkPowerSharingDAPS-Mode</em>. The UE determines
a transmission power on the target MCG and a transmission power on the
source MCG per frequency range.</p>
<p>If the UE indicates support for semi-static power sharing mode1 and
is provided <em>uplinkPowerSharingDAPS-Mode</em> =
<em>Semi-static-mode1</em>, the UE determines a transmission power for
the target MCG or for the source MCG as described in clause 7.6.2 for
<em>nrdc-PCmode-FR1</em> = <em>Semi-static-mode1</em> by considering the
target MCG as the MCG and the source MCG as the SCG.</p>
<p>If the UE indicates support for semi-static power sharing mode2 and
is provided <em>uplinkPowerSharingDAPS-Mode</em> =
<em>Semi-static-mode2</em>, the UE determines a transmission power for
the target MCG or for the source SCG as described in clause 7.6.2 for
<em>nrdc-PCmode-FR1</em> = <em>Semi-static-mode2</em> by considering the
target MCG as the MCG and the source MCG as the SCG. The UE expects to
be provided <em>uplinkPowerSharingDAPS-Mode</em> =
<em>Semi-static-mode2</em> only for synchronous DAPS HO operation [10,
TS 38.133].</p>
<p>If the UE indicates support for dynamic power sharing and is provided
<em>uplinkPowerSharingDAPS-Mode</em> = <em>Dynamic</em>, the UE
determines a transmission power for the target MCG or for the source MCG
as described in clause 7.6.2 for <em>nrdc-PCmode-FR1</em> =
<em>Dynamic</em> by considering the target MCG as the MCG and the source
MCG as the SCG.</p>
<p>Intra-frequency DAPS handover is described in clause 6.1.3.2 of [10,
TS 38.133].</p>
<p>For DAPS handover that is not intra-frequency, if</p>
<p>- the UE does not indicate support of
<em>interFreqUL-TransCancellationDAPS-r16</em>, and</p>
<p>- UE does not indicate a capability for power sharing between source
and target MCG in DAPS handover or the UE is not provided with
<em>uplinkPowerSharingDAPS-Mode</em>,</p>
<p>the UE does not expect transmissions on the target and source cell in
overlapping time resources.</p>
<p>For DAPS handover that is not intra-frequency, if</p>
<p>- the UE indicates support of
<em>interFreqUL-TransCancellationDAPS-r16</em>, and</p>
<p>- UE does not indicate a capability for power sharing between source
and target MCG in DAPS handover or the UE is not provided with
<em>uplinkPowerSharingDAPS-Mode</em>, and</p>
<p>- UE transmissions on the target cell and the source cell are in
overlapping time resources,</p>
<p>the UE transmits only on the target cell, and cancels the
transmission to source cell.</p>
<p>For intra-frequency DAPS handover, if</p>
<p>- UE transmissions on the target cell and the source cell are in
overlapping time resources,</p>
<p>the UE transmits only on the target cell and cancels the transmission
on the source cell.</p>
<p>The UE does not expect to cancel a transmission on the source cell if
a first symbol of the transmission on the source cell is less than <span
class="math inline">\(T_{\text{proc,2}} + d\)</span> after a last symbol
of a PDCCH reception where the UE receives a PDCCH providing a DCI
format scheduling a transmission on the target cell. <span
class="math inline">\(T_{\text{proc,2}}\)</span> is the PUSCH
preparation time for the corresponding PUSCH processing capability [6,
TS 38.214] assuming <span class="math inline">\(d_{\text{2,1}} =
1\)</span>, <span class="math inline">\(d\)</span> is a time duration
corresponding to 2 symbols for SCS configuration <span
class="math inline">\(\mu\)</span>, and <span
class="math inline">\(\mu\)</span> is the smallest SCS configuration
between the SCS configuration of the PDCCH providing the DCI format and
the SCS configuration for the transmission on the source cell. If the UE
transmits PRACH using 1.25 kHz or 5 kHz SCS on the source cell, the UE
determines <span class="math inline">\(T_{\text{proc,2}}\)</span>
assuming SCS configuration <span class="math inline">\(\mu =
0\)</span>.</p>
<p>A UE does not expect to cancel a transmission on the source cell if
the first symbol of the source cell transmission occurs, relative to a
last symbol of a PDSCH reception conveying a RAR message with a RAR UL
grant on the target cell, after a number of symbols that is smaller than
<span class="math inline">\(N_{\text{T,1}} + N_{\text{T,2}} +
0.5\)</span> msec, where <span
class="math inline">\(N_{\text{T,1}}\)</span> is a time duration of
<span class="math inline">\(N_{\text{1}}\)</span> symbols corresponding
to a PDSCH processing time for UE processing capability 1 when
additional PDSCH DM-RS is configured, <span
class="math inline">\(N_{\text{T,2}}\)</span> is a time duration of
<span class="math inline">\(N_{\text{2}}\)</span> symbols corresponding
to a PUSCH preparation time for UE processing capability 1 [6, TS
38.214] and the UE considers that <span
class="math inline">\(N_{\text{1}}\)</span> and <span
class="math inline">\(N_{2}\)</span> correspond to the smaller of the
SCS configurations for the PDSCH on the target cell and the transmission
on the source cell. For <span class="math inline">\(\mu = 0\)</span>,
the UE assumes <span class="math inline">\(N_{\text{1,0}} = 14\)</span>
[6, TS 38.214].</p>
<p>For intra-frequency DAPS handover operation, the UE expects that an
active DL BWP and an active UL BWP on the target cell are within an
active DL BWP and an active UL BWP on the source cell, respectively.</p>
<p>If a UE is provided search space sets on both the target MCG and the
source MCG, in any slot the UE does not expect to have USS sets on both
the target MCG and the source MCG that result in the number of monitored
PDCCH candidates and the total number of non-overlapped CCEs in both
cells that each exceed the corresponding maximum numbers per slot
defined in Table 10.1-2 and Table 10.1-3.</p>
<p>For DAPS operation in a same frequency band, a UE does not transmit
PUSCH/PUCCH/SRS to the source MCG in a slot overlapping in time with a
PRACH transmission to the target MCG or when a gap between a first or
last symbol of a PRACH transmission to the target MCG in a first slot
would be separated by less than <span class="math inline">\(N\)</span>
symbols from a last or first symbol, respectively, of the
PUSCH/PUCCH/SRS transmission to the source MCG in a second slot. For
DAPS operation in a same frequency band, a UE does not transmit PRACH on
the source MCG in a slot overlapping in time with a PUSCH/PUCCH/SRS
transmission on the target MCG or when a gap between the first or last
symbol of a PUSCH/PUCCH/SRS transmission on the target MCG is separated
by less than <span class="math inline">\(N\)</span> symbols from a last
or a first symbol, respectively, of a PRACH transmission on the source
MCG. <span class="math inline">\(N = 2\)</span> for <span
class="math inline">\(\mu = 0\)</span> or <span
class="math inline">\(\mu = 1\)</span>, <span class="math inline">\(N =
4\)</span> for <span class="math inline">\(\mu = 2\)</span> or <span
class="math inline">\(\mu = 3\)</span>, and <span
class="math inline">\(\mu\)</span> is the SCS configuration of the
active UL BWP for the PUSCH/PUCCH/SRS transmission. The PUSCH processing
capability is the processing capability of source cell.</p>
<h1 id="ue-procedures-for-sidelink">16 UE procedures for sidelink</h1>
<p>A UE is provided by <em>SL-BWP-Config</em> or
<em>SL-BWP-ConfigCommon</em> a BWP for SL transmissions (SL BWP) with
numerology and resource grid determined as described in [4, TS 38.211].
For a resource pool within the SL BWP, the UE is provided by
<em>sl-NumSubchannel</em> a number of sub-channels where each
sub-channel includes a number of contiguous RBs provided by
<em>sl-SubchannelSize</em>. The first RB of the first sub-channel in the
SL BWP is indicated by <em>sl-StartRB-Subchannel</em>. Available slots
for a resource pool are provided by <em>sl-TimeResource</em> and occur
with a periodicity of 10240 ms. For an available slot without S-SS/PSBCH
blocks, SL transmissions can start from a first symbol indicated by
<em>sl-StartSymbol</em> and be within a number of consecutive symbols
indicated by <em>sl-LengthSymbols</em>. For an available slot with
S-SS/PSBCH blocks, the first symbol and the number of consecutive
symbols is predetermined.</p>
<p>The UE expects to use a same numerology in the SL BWP and in an
active UL BWP in a same carrier of a same cell. If the active UL BWP
numerology is different than the SL BWP numerology, the SL BWP is
deactivated.</p>
<p>A priority of a PSSCH according to NR radio access or according to
E-UTRA radio access is indicated by a priority field in a respective
scheduling SCI format. A priority of a PSSS/SSSS/PSBCH according to
E-UTRA radio access is provided by <em>sl-SSB-PriorityEUTRA</em> [13, TS
36.213]. A priority of an S-SS/PSBCH block is provided by
<em>sl-SSB-PriorityNR</em>. A priority of a PSFCH is determined as
described in clause 16.2.4.2.</p>
<p>A UE does not expect to be provided search space sets associated with
CORESETs on more than one cell to monitor PDCCH for detection of DCI
format 3_0 or DCI format 3_1.</p>
<h2 id="synchronization-procedures-1">16.1 Synchronization
procedures</h2>
<p>A UE receives the following SL synchronization signals in order to
perform synchronization procedures based on S-SS/PSBCH blocks: SL
primary synchronization signals (S-PSS) and SL secondary synchronization
signals (S-SSS) [4, TS 38.211].</p>
<p>A UE assumes that reception occasions of a physical sidelink
broadcast channel (PSBCH), S-PSS, and S-SSS are in consecutive symbols
[4, TS 38.211] and form a S-SS/PSBCH block.</p>
<p>For reception of a S-SS/PSBCH block, a UE assumes a frequency
location corresponding to the subcarrier with index 66 in the S-SS/PSBCH
block [4, TS 38.211], is provided by <em>sl-AbsoluteFrequencySSB</em>.
The UE assumes that a S-PSS symbol, a S-SSS symbol, and a PSBCH symbol
have a same transmission power. The UE assumes a same numerology of the
S-SS/PSBCH as for a SL BWP of the S-SS/PSBCH block reception, and that a
bandwidth of the S-SS/PSBCH is within a bandwidth of the SL BWP. The UE
assumes the subcarrier with index 0 in the S-SS/PSBCH block is aligned
with a subcarrier with index 0 in an RB of the SL BWP.</p>
<p>A UE is provided, by <em>sl-NumSSB-WithinPeriod</em>, a number <span
class="math inline">\(N_{period}^{S - SSB}\)</span> of S-SS/PSBCH blocks
in a period of 16 frames. The UE assumes that a transmission of the
S-SS/PSBCH blocks in the period is with a periodicity of 16 frames. The
UE determines indexes of slots that include S-SS/PSBCH block as <span
class="math inline">\(N_{offset}^{S - SSB}\)</span>+<span
class="math inline">\(\left( N_{interval}^{S - SSB} + 1 \right) \cdot
i_{S - SSB}\)</span>, where</p>
<p>- index 0 corresponds to a first slot in a frame with SFN of the
serving cell satisfying <span class="math inline">\((SFN\ mod\ 16) =
0\)</span> or DFN satisfying (DFN mod 16) = 0</p>
<p>- <span class="math inline">\(i_{S - SSB}\)</span> is a S-SS/PSBCH
block index within the number of S-SS/PSBCH blocks in the period, with
<span class="math inline">\(0 \leq i_{S - SSB} \leq N_{period}^{S - SSB}
- 1\)</span></p>
<p>- <span class="math inline">\(N_{offset}^{S - SSB}\)</span> is a slot
offset from a start of the period to the first slot including S-SS/PSBCH
block, provided by <em>sl-TimeOffsetSSB</em></p>
<p>- <span class="math inline">\(N_{interval}^{S - SSB}\)</span> is a
slot interval between S-SS/PSBCH blocks, provided by
<em>sl-TimeInterval</em></p>
<p>For paired spectrum, an S-SS/PSBCH block can be transmitted/received
only in a slot of an UL carrier. For unpaired spectrum, an S-SS/PSBCH
block can be transmitted/received only in a slot of which all OFDM
symbols are configured as UL by <em>tdd-UL-DL-ConfigurationCommon</em>
of the serving cell if provided or <em>sl-TDD-Configuration</em> if
provided or <em>sl-TDD-Config</em> of the received PSBCH if provided. Or
if <em>tdd-UL-DL-ConfigurationCommon</em> and
<em>sl-TDD-Configuration</em> are not provided for a spectrum indicated
with only PC5 interface in Table 5.2E.1-1 in [TS 38.101-1], an
S-SS/PSBCH block can be transmitted/received in any slot of the
spectrum.</p>
<p>For transmission of an S-SS/PSBCH block, a UE includes a bit sequence
<span class="math inline">\(a_{0},\ a_{1},\ a_{2},\ a_{3},\ \ldots,\
a_{11}\)</span> in the PSBCH payload to indicate <em>sl-TDD-Config</em>
and provide a slot format over a number of slots.</p>
<p>For paired spectrum, or if <em>tdd-UL-DL-ConfigurationCommon</em> and
<em>sl-TDD-Configuration</em> are not provided for a spectrum indicated
with only PC5 interface in Table 5.2E.1-1 in [TS 38.101-1],</p>
<p>- <span class="math inline">\(a_{0},\ a_{1},\ a_{2},\ a_{3},a_{4}{,\
a}_{5},\ a_{6},\ a_{7},a_{8},\ a_{9},\ a_{10},\ a_{11}\)</span> are set
to '1';</p>
<p>else</p>
<p>- <span class="math inline">\(a_{0} = 0\)</span> if <em>pattern1</em>
is provided by <em>sl-TDD-Configuration</em> or
<em>tdd-UL-DL-ConfigurationCommon</em>; <span
class="math inline">\(a_{0} = 1\)</span> if both <em>pattern1</em> and
<em>pattern2</em> are provided by <em>sl-TDD-Configuration</em> or
<em>tdd-UL-DL-ConfigurationCommon</em> as described in clause 11.1</p>
<p>- <span class="math inline">\(a_{1},\ a_{2},\ a_{3},a_{4}\)</span>
are determined based on</p>
<p>- <span class="math inline">\(P\)</span> in <em>pattern1</em> as
described in Table 16.1-1 for <span class="math inline">\(a_{0} =
0\)</span></p>
<p>- <span class="math inline">\(P\)</span> in <em>pattern1</em> and
<span class="math inline">\(P_{2}\)</span> <em>in pattern2</em> as
described in Table 16.1-2 for <span class="math inline">\(a_{0} =
1\)</span></p>
<p>where <span class="math inline">\(P\)</span> and <span
class="math inline">\(P_{2}\)</span> are as described in clause 11.1</p>
<p>- <span class="math inline">\(a_{5},\ a_{6},\ a_{7},a_{8},\ a_{9},\
a_{10},\ a_{11}\)</span> are the 7th to 1st LSBs of <span
class="math inline">\(u_{slots}^{SL}\)</span>, respectively</p>
<p>- for <span class="math inline">\(a_{0} = 0\)</span>, <span
class="math inline">\(u_{slots}^{SL} = u_{slots}*2^{\mu - \mu_{ref}} +
\left\lfloor \frac{u_{sym}*2^{\mu - \mu_{ref}}}{L} \right\rfloor +
I_{1}\)</span></p>
<p>- for <span class="math inline">\(a_{0} = 1\)</span>, <span
class="math inline">\(u_{slots}^{SL} = \left\lfloor
\frac{u_{slots,2}*2^{\mu - \mu_{ref}} + \left\lfloor
\frac{u_{sym,2}*2^{\mu - \mu_{ref}}}{L} \right\rfloor + I_{2}}{w}
\right\rfloor*\left\lceil \frac{{P*2}^{\mu} + 1}{w} \right\rceil +
\left\lfloor \frac{u_{slots}*2^{\mu - \mu_{ref}} + \left\lfloor
\frac{u_{sym}*2^{\mu - \mu_{ref}}}{L} \right\rfloor + I_{1}}{w}
\right\rfloor\)</span></p>
<blockquote>
<p>where</p>
</blockquote>
<p>- <span class="math inline">\(L\)</span> is the number of symbols in
a slot: <span class="math inline">\(L = 12\)</span> if
<em>cyclicPrefix</em> = "ECP"; else, <span class="math inline">\(L =
14\)</span></p>
<p>- <span class="math inline">\(I_{1}\)</span> is 1 if <span
class="math inline">\(u_{sym}*2^{\mu - \mu_{ref}}\ mod\ L \geq \ L -
Y\)</span>, else <span class="math inline">\(I_{1}\)</span> is 0</p>
<p>- <span class="math inline">\(I_{2}\)</span> is 1 if <span
class="math inline">\(u_{sym,2}*2^{\mu - \mu_{ref}}\ mod\ L \geq L -
Y\)</span>, else <span class="math inline">\(I_{2}\)</span> is 0</p>
<p>- <span class="math inline">\(Y\)</span> is the sidelink starting
symbol index provided by <em>sl-StartSymbol</em></p>
<p>- <span class="math inline">\(w\)</span> is the granularity of slots
indication as described in Table 16.1-2</p>
<p>- <span class="math inline">\(\mu_{ref}\)</span>, <span
class="math inline">\(u_{slots}\)</span>, <span
class="math inline">\(u_{sym}\)</span>, <span
class="math inline">\(u_{slots,2}\)</span>, <span
class="math inline">\(u_{sym,2}\)</span> are the parameters of
<em>tdd-UL-DL-ConfigurationCommon</em> as described in clause 11.1, or
the parameters of <em>sl-TDD-Configuration</em> as defined in [12, TS
38.331]</p>
<p>- <span class="math inline">\(\mu = 0,\ 1,\ 2,\ 3\)</span>
corresponds to SL SCS as defined in [4, TS 38.211]</p>
<p>Table 16.1-1: Slot configuration period when one pattern is
indicated</p>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr>
<th><span class="math display">\[\mathbf{a}_{\mathbf{1}}\mathbf{,\
}\mathbf{a}_{\mathbf{2}}\mathbf{,\
}\mathbf{a}_{\mathbf{3}}\mathbf{,}\mathbf{a}_{\mathbf{4}}\]</span></th>
<th><p>Slot configuration period of <em>pattern1</em></p>
<p><span class="math inline">\(\mathbf{P}\)</span> (msec)</p></th>
</tr>
</thead>
<tbody>
<tr>
<td>0, 0, 0, 0</td>
<td>0.5</td>
</tr>
<tr>
<td>0, 0, 0, 1</td>
<td>0.625</td>
</tr>
<tr>
<td>0, 0, 1, 0</td>
<td>1</td>
</tr>
<tr>
<td>0, 0, 1, 1</td>
<td>1.25</td>
</tr>
<tr>
<td>0, 1, 0, 0</td>
<td>2</td>
</tr>
<tr>
<td>0, 1, 0, 1</td>
<td>2.5</td>
</tr>
<tr>
<td>0, 1, 1, 0</td>
<td>4</td>
</tr>
<tr>
<td>0, 1, 1, 1</td>
<td>5</td>
</tr>
<tr>
<td>1, 0, 0, 0</td>
<td>10</td>
</tr>
<tr>
<td>Reserved</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<p>Table 16.1-2: Slot configuration period and granularity when two
patterns are indicated</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 21%" />
<col style="width: 22%" />
<col style="width: 11%" />
<col style="width: 9%" />
<col style="width: 11%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr>
<th rowspan="2"><span
class="math display">\[\mathbf{a}_{\mathbf{1}}\mathbf{,\
}\mathbf{a}_{\mathbf{2}}\mathbf{,\
}\mathbf{a}_{\mathbf{3}}\mathbf{,}\mathbf{a}_{\mathbf{4}}\]</span></th>
<th rowspan="2"><p>Slot configuration period of <em>pattern1</em></p>
<p><span class="math inline">\(\mathbf{P}\)</span> (msec)</p></th>
<th rowspan="2"><p>Slot configuration period of <em>pattern2</em></p>
<p><span class="math inline">\(\mathbf{P}_{\mathbf{2}}\)</span>
(msec)</p></th>
<th colspan="4">Granularity <span
class="math inline">\(\mathbf{w}\)</span> in slots with different
SCS</th>
</tr>
<tr>
<th>15kHz</th>
<th>30 kHz</th>
<th>60 kHz</th>
<th>120 kHz</th>
</tr>
</thead>
<tbody>
<tr>
<td>0, 0, 0, 0</td>
<td>0.5</td>
<td>0.5</td>
<td colspan="4" rowspan="6">1</td>
</tr>
<tr>
<td>0, 0, 0, 1</td>
<td>0.625</td>
<td>0.625</td>
</tr>
<tr>
<td>0, 0, 1, 0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>0, 0, 1, 1</td>
<td>0.5</td>
<td>2</td>
</tr>
<tr>
<td>0, 1, 0, 0</td>
<td>1.25</td>
<td>1.25</td>
</tr>
<tr>
<td>0, 1, 0, 1</td>
<td>2</td>
<td>0.5</td>
</tr>
<tr>
<td>0, 1, 1, 0</td>
<td>1</td>
<td>3</td>
<td colspan="3" rowspan="8">1</td>
<td rowspan="8">2</td>
</tr>
<tr>
<td>0, 1, 1, 1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>1, 0, 0, 0</td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>1, 0, 0, 1</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>1, 0, 1, 0</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>1, 0, 1, 1</td>
<td>2.5</td>
<td>2.5</td>
</tr>
<tr>
<td>1, 1, 0, 0</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>1, 1, 0, 1</td>
<td>4</td>
<td>1</td>
</tr>
<tr>
<td>1, 1, 1, 0</td>
<td>5</td>
<td>5</td>
<td colspan="2">1</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>1, 1, 1, 1</td>
<td>10</td>
<td>10</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>If a UE would transmit or receive an S-SS/PSBCH block, and the
transmission or reception would overlap in time with transmissions or
receptions on the sidelink using E-UTRA radio access, the UE transmits
or receives the signal/channel with the higher priority.</p>
<p>If a UE would transmit or receive sidelink synchronization signals
for E-UTRA radio access, and the transmission or reception would overlap
in time with sidelink transmissions or receptions using NR radio access,
the UE transmits or receives the signal/channel with the higher
priority.</p>
<h2 id="power-control">16.2 Power control</h2>
<h3 id="s-sspsbch-blocks">16.2.0 S-SS/PSBCH blocks</h3>
<p>A UE determines a power <span
class="math inline">\(P_{\text{S-SSB}}(i)\)</span> for an S-SS/PSBCH
block transmission occasion in slot <span
class="math inline">\(i\)</span> on active SL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> as</p>
<p><span class="math inline">\(P_{\text{S-SSB}}(i) = \min\left(
P_{\text{CMAX}},P_{\text{O},S - SSB} + 10\log_{10}\left( 2^{\mu} \bullet
M_{RB}^{S - SSB} \right) + \alpha_{S - SSB} \cdot PL \right)\)</span>
[dBm]</p>
<p>where</p>
<p>- <span class="math inline">\(P_{\text{CMAX}}\)</span> is defined in
[8-1, TS 38.101-1]</p>
<p>- <span class="math inline">\(P_{\text{O},S - SSB}\)</span> is a
value of <em>dl-P0-PSBCH-r17</em> if using the parameter is supported by
the UE and the parameter is provided; else <em>dl-P0-PSBCH-r16</em> if
provided; otherwise, <span class="math inline">\(P_{\text{S-SSB}}(i) =
P_{\text{CMAX}}\)</span></p>
<p>- <span class="math inline">\(\alpha_{S - SSB}\)</span> is a value of
<em>dl-Alpha-PSBCH</em>, if provided; else, <span
class="math inline">\(\alpha_{S - SSB} = 1\)</span></p>
<p>- <span class="math inline">\(PL = PL_{b,f,c}(q_{d})\)</span> when
the active SL BWP is on a serving cell <span
class="math inline">\(c\)</span>, as described in clause 7.1.1 except
that</p>
<p>- the RS resource is the one the UE uses for determining a power of a
PUSCH transmission scheduled by a DCI format 0_0 in serving cell <span
class="math inline">\(c\)</span> when the UE is configured to monitor
PDCCH for detection of DCI format 0_0 in serving cell <span
class="math inline">\(c\)</span></p>
<p>- the RS resource is the one corresponding to the SS/PBCH block the
UE uses to obtain MIB when the UE is not configured to monitor PDCCH for
detection of DCI format 0_0 in serving cell <span
class="math inline">\(c\)</span></p>
<p>- <span class="math inline">\(M_{RB}^{S - SSB} = 11\)</span> is a
number of resource blocks for a S-SS/PSBCH block transmission with SCS
configuration <span class="math inline">\(\mu\)</span></p>
<h3 id="pssch">16.2.1 PSSCH</h3>
<p>A UE determines a power <span
class="math inline">\(P_{\text{PSSCH}}(i)\)</span> for a PSSCH
transmission on a resource pool in symbols where a corresponding PSCCH
is not transmitted in PSCCH-PSSCH transmission occasion <span
class="math inline">\(i\)</span> on active SL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> as:</p>
<p><span class="math inline">\(P_{\text{PSSCH}}(i) = \min\left(
P_{\text{CMAX}},P_{\text{MAX},CBR},\min\left(
P_{\text{PSSCH},D}(i),P_{\text{PSSCH},SL}(i) \right) \right)\)</span>
[dBm]</p>
<p>where</p>
<p>- <span class="math inline">\(P_{\text{CMAX}}\)</span> is defined in
[8-1, TS 38.101-1]</p>
<p>- <span class="math inline">\(P_{\text{MAX},CBR}\)</span> is
determined by a value of <em>sl-MaxTxPower</em> based on a priority
level of the PSSCH transmission and a CBR range that includes a CBR
measured in slot <span class="math inline">\(i - N\)</span> [6, TS
38.214]; if <em>sl-MaxTxPower</em> is not provided, then <span
class="math inline">\(P_{\text{MAX},CBR} = P_{\text{CMAX}}\)</span>;</p>
<p>- if <em>dl-P0-PSSCH-PSCCH</em> is provided</p>
<p>- <span class="math inline">\(P_{\text{PSSCH},D}(i) = P_{\text{O},D}
+ 10\log_{10}\left( 2^{\mu} \cdot M_{\text{RB}}^{\text{PSSCH}}(i)
\right) + \alpha_{D} \cdot PL_{D}\)</span> [dBm]</p>
<p>- else</p>
<p>- <span class="math inline">\(P_{\text{PSSCH},D}(i) = \min\left(
P_{\text{CMAX}},P_{\text{MAX},CBR} \right)\)</span> [dBm]</p>
<p>where</p>
<p>- <span class="math inline">\(P_{\text{O},D}\)</span> is a value of
<em>dl-P0-PSSCH-PSCCH-r17</em> if using the parameter is supported by
the UE and the parameter is provided; else
<em>dl-P0-PSSCH-PSCCH-r16</em> if provided</p>
<p>- <span class="math inline">\(\alpha_{D}\)</span> is a value of
<em>dl-Alpha-PSSCH-PSCCH</em>, if provided; else, <span
class="math inline">\(\alpha_{D} = 1\)</span></p>
<p>- <span class="math inline">\(PL_{D} = PL_{b,f,c}(q_{d})\)</span>
when the active SL BWP is on a serving cell <span
class="math inline">\(c\)</span>, as described in clause 7.1.1 except
that</p>
<p>- the RS resource is the one the UE uses for determining a power of a
PUSCH transmission scheduled by a DCI format 0_0 in serving cell <span
class="math inline">\(c\)</span> when the UE is configured to monitor
PDCCH for detection of DCI format 0_0 in serving cell <span
class="math inline">\(c\)</span></p>
<p>- the RS resource is the one corresponding to the SS/PBCH block the
UE uses to obtain MIB when the UE is not configured to monitor PDCCH for
detection of DCI format 0_0 in serving cell <span
class="math inline">\(c\)</span></p>
<p>- <span
class="math inline">\(M_{\text{RB}}^{\text{PSSCH}}(i)\)</span> is a
number of resource blocks for the PSSCH transmission occasion <span
class="math inline">\(i\)</span> and <span
class="math inline">\(\mu\)</span> is a SCS configuration</p>
<p>- if <em>sl-P0-PSSCH-PSCCH</em> is provided, if a SCI format
scheduling the PSSCH transmission includes a cast type indicator field
indicating unicast or is SCI format 2-C, and if a <span
class="math inline">\(higher\ layer\ filtered\ RSRP\)</span> is reported
to the UE transmitting the PSSCH from the UE intended to receive the
PSCCH-PSSCH transmission</p>
<p>- <span class="math inline">\(P_{\text{PSSCH},SL}(i) =
P_{\text{O},SL} + 10\log_{10}\left( 2^{\mu} \cdot
M_{\text{RB}}^{\text{PSSCH}}(i) \right) + \alpha_{SL} \cdot
PL_{SL}\)</span> [dBm]</p>
<p>- else</p>
<p>- <span class="math inline">\(P_{\text{PSSCH,SL}}(i) = \min\left(
P_{\text{CMAX}},P_{\text{PSSCH},D}(i) \right)\)</span> [dBm]</p>
<p>where</p>
<p>- <span class="math inline">\(P_{\text{O},SL}\)</span> is a value of
<em>sl-P0-PSSCH-PSCCH-r17</em>, if using the parameter is supported by
the UE and the parameter is provided; else
<em>sl-P0-PSSCH-PSCCH-r16</em> if provided</p>
<p>- <span class="math inline">\(\alpha_{SL}\)</span> is a value of
<em>sl-Alpha-PSSCH-PSCCH</em>, if provided; else, <span
class="math inline">\(\alpha_{SL} = 1\)</span></p>
<p>- <span class="math inline">\(PL_{SL} = \ referenceSignalPower\ –\
higher\ layer\ filtered\ RSRP\)</span>, where</p>
<p>- <span class="math inline">\(referenceSignalPower\)</span> is
obtained from a PSSCH transmit power per RE summed over the antenna
ports of the UE, higher layer filtered across PSSCH transmission
occasions using a filter configuration provided by
<em>sl-FilterCoefficient</em>, and</p>
<p>- <span class="math inline">\(higher\ layer\ filtered\ RSRP\)</span>
is a RSRP, as defined in [7, TS 38.215], that is reported to the UE from
a UE receiving the PSCCH-PSSCH transmission and is obtained from a PSSCH
DM-RS using a filter configuration provided by
<em>sl-FilterCoefficient</em></p>
<p>- <span
class="math inline">\(M_{\text{RB}}^{\text{PSSCH}}(i)\)</span> is a
number of resource blocks for PSCCH-PSSCH transmission occasion <span
class="math inline">\(i\)</span> and <span
class="math inline">\(\mu\)</span> is a SCS configuration</p>
<p>The UE splits the power <span
class="math inline">\(P_{\text{PSSCH}}(i)\)</span> equally across the
antenna ports on which the UE transmits the PSSCH with non-zero
power.</p>
<p>A UE determines a power <span
class="math inline">\(P_{\text{PSSCH2}}(i)\)</span> for a PSSCH
transmission on a resource pool in the symbols where a corresponding
PSCCH is transmitted in PSCCH-PSSCH transmission occasion <span
class="math inline">\(i\)</span> on active SL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> as</p>
<p><span class="math inline">\(P_{PSSCH2}(i) = 10\log_{10}\left(
\frac{M_{RB}^{PSSCH}(i) - M_{RB}^{PSCCH}(i)}{M_{RB}^{PSSCH}(i)} \right)
+ P_{PSSCH}(i)\)</span> [dBm]</p>
<p>where <span
class="math inline">\(M_{\text{RB}}^{\text{PSCCH}}(i)\)</span> is a
number of resource blocks for the corresponding PSCCH transmission in
PSCCH-PSSCH transmission occasion <span
class="math inline">\(i\)</span>.</p>
<p>The UE splits the power <span
class="math inline">\(P_{PSSCH2}(i)\)</span> equally across the antenna
ports on which the UE transmits the PSSCH with non-zero power.</p>
<h3 id="pscch">16.2.2 PSCCH</h3>
<p>A UE determines a power <span
class="math inline">\(P_{PSCCH}(i)\)</span> for a PSCCH transmission on
a resource pool in PSCCH-PSSCH transmission occasion <span
class="math inline">\(i\)</span> as</p>
<p><span class="math inline">\(P_{PSCCH}(i) = 10\log_{10}\left(
\frac{M_{RB}^{PSCCH}(i)}{M_{RB}^{PSSCH}(i)} \right) +
P_{PSSCH}(i)\)</span> [dBm]</p>
<p>where</p>
<p>- <span class="math inline">\(P_{PSSCH}(i)\)</span> is specified in
clause 16.2.1</p>
<p>- <span
class="math inline">\(M_{\text{RB}}^{\text{PSCCH}}(i)\)</span> is a
number of resource blocks for the PSCCH transmission in PSCCH-PSSCH
transmission occasion <span class="math inline">\(i\)</span></p>
<p>- <span class="math inline">\(M_{RB}^{PSSCH}(i)\)</span> is a number
of resource blocks for PSCCH-PSSCH transmission occasion <em>i</em></p>
<h3 id="psfch">16.2.3 PSFCH</h3>
<p>A UE with <span class="math inline">\(N_{sch,Tx,PSFCH}\)</span>
scheduled PSFCH transmissions for HARQ-ACK information and conflict
information, and capable of transmitting a maximum of <span
class="math inline">\(N_{max,PSFCH}\)</span> PSFCHs, determines a number
<span class="math inline">\(N_{Tx,PSFCH}\)</span> of simultaneous PSFCH
transmissions and a power <span
class="math inline">\(P_{\text{PSFCH,k}}(i)\)</span> for a PSFCH
transmission <span class="math inline">\(k\)</span>, <span
class="math inline">\(1 \leq k \leq N_{Tx,PSFCH}\)</span>, on all the
resource pools in PSFCH transmission occasion <span
class="math inline">\(i\)</span> on active SL BWP <span
class="math inline">\(b\)</span> of carrier <span
class="math inline">\(f\)</span> as</p>
<p>- if <em>dl-P0-PSFCH</em> is provided,</p>
<p><span class="math inline">\(P_{\text{PSFCH,one}} = P_{\text{O},PSFCH}
+ 10\log_{10}\left( 2^{\mu} \right) + \alpha_{PSFCH} \cdot PL\)</span>
[dBm]</p>
<p>where</p>
<p>- <span class="math inline">\(P_{\text{O},PSFCH}\)</span> is a value
of <em>dl-P0-PSFCH-r17,</em> if using the parameter is supported by the
UE and the parameter is provided;else <em>dl-P0-PSFCH-r16</em> if
provided</p>
<p>- <span class="math inline">\(\alpha_{PSFCH}\)</span> is a value of
<em>dl-Alpha-PSFCH</em>, if provided; else, <span
class="math inline">\(\alpha_{PFSCH} = 1\)</span></p>
<p>- <span class="math inline">\(PL = PL_{b,f,c}(q_{d})\)</span> when
the active SL BWP is on a serving cell <span
class="math inline">\(c\)</span>, as described in clause 7.1.1 except
that</p>
<p>- the RS resource is the one the UE uses for determining a power of a
PUSCH transmission scheduled by a DCI format 0_0 in serving cell <span
class="math inline">\(c\)</span> when the UE is configured to monitor
PDCCH for detection of DCI format 0_0 in serving cell <span
class="math inline">\(c\)</span></p>
<p>- the RS resource is the one corresponding to the SS/PBCH block the
UE uses to obtain MIB when the UE is not configured to monitor PDCCH for
detection of DCI format 0_0 in serving cell <span
class="math inline">\(c\)</span></p>
<p>- if <span class="math inline">\(N_{sch,Tx,PSFCH} \leq
N_{max,PSFCH}\)</span></p>
<p>- if <span class="math inline">\(P_{\text{PSFCH,one}} +
10log_{10}\left( N_{sch,Tx,PSFCH} \right) \leq P_{\text{CMAX}}\)</span>,
where <span class="math inline">\(P_{\text{CMAX}}\)</span> is determined
for <span class="math inline">\(N_{sch,Tx,PSFCH}\)</span> PSFCH
transmissions according to [8-1, TS 38.101-1]</p>
<p>- <span class="math inline">\(N_{Tx,PSFCH} =
N_{sch,Tx,PSFCH}\)</span> and <span
class="math inline">\(P_{\text{PSFCH,k}}(i) =
P_{\text{PSFCH,one}}\)</span> [dBm]</p>
<p>- else</p>
<p>- UE autonomously determines <span
class="math inline">\(N_{Tx,PSFCH}\)</span> PSFCH transmissions first
with ascending order of corresponding priority field values as described
in clause 16.2.4.2 over the PSFCH transmissions with HARQ-ACK
information, if any, and then with ascending order of priority value
over the PSFCH transmissions with conflict information, if any, such
that <span class="math inline">\(N_{Tx,PSFCH} \geq \max\left( 1,\sum_{i
= 1}^{K}M_{i} \right)\)</span> where <span
class="math inline">\(M_{i}\)</span>, for <span class="math inline">\(1
\leq i \leq \ 8\)</span>, is a number of PSFCHs with priority value
<span class="math inline">\(i\)</span> for PSFCH with HARQ-ACK
information and <span class="math inline">\(M_{i}\)</span>, for <span
class="math inline">\(i &gt; 8\)</span>, is a number of PSFCHs with
priority value <span class="math inline">\(i - 8\)</span> for PSFCH with
conflict information and <span class="math inline">\(K\)</span> is
defined as</p>
<p>- the largest value satisfying <span
class="math inline">\(P_{\text{PSFCH,one}} + 10log_{10}\left( \max\left(
1,\sum_{i = 1}^{K}M_{i} \right) \right) \leq P_{\text{CMAX}}\)</span>
where <span class="math inline">\(P_{\text{CMAX}}\)</span> is determined
according to [8-1, TS 38.101-1] for transmission of all PSFCHs in <span
class="math inline">\(\sum_{i = 1}^{K}M_{i}\)</span>, if any</p>
<p>- zero, otherwise</p>
<p>and</p>
<p><span class="math inline">\(P_{\text{PSFCH,k}}(i) = \min\left(
P_{\text{CMAX}} - 10log_{10}(N_{Tx,PSFCH}),P_{\text{PSFCH,one}}
\right)\)</span> [dBm]</p>
<p>where <span class="math inline">\(P_{\text{CMAX}}\)</span> is defined
in [8-1, TS 38.101-1] and is determined for the <span
class="math inline">\(N_{Tx,PSFCH}\)</span> PSFCH transmissions</p>
<p>- else</p>
<p>- the UE autonomously selects <span
class="math inline">\(N_{max,PSFCH}\)</span> PSFCH transmissions with
ascending order of corresponding priority field values as described in
clause 16.2.4.2</p>
<p>- if <span class="math inline">\(P_{\text{PSFCH,one}} +
10log_{10}\left( N_{max,PSFCH} \right) \leq P_{\text{CMAX}}\)</span>,
where <span class="math inline">\(P_{\text{CMAX}}\)</span> is determined
for the <span class="math inline">\(N_{max,PSFCH}\)</span> PSFCH
transmissions according to [8-1, TS 38.101-1]</p>
<p>- <span class="math inline">\(N_{Tx,PSFCH} = N_{max,PSFCH}\)</span>
and <span class="math inline">\(P_{\text{PSFCH,k}}(i) =
P_{\text{PSFCH,one}}\)</span> [dBm]</p>
<p>- else</p>
<p>- the UE autonomously selects <span
class="math inline">\(N_{Tx,PSFCH}\)</span> PSFCH transmissions in
ascending order of corresponding priority field values as described in
clause 16.2.4.2 over the PSFCH transmissions with HARQ-ACK information,
if any, and then with ascending order of priority value over the PSFCH
transmissions with conflict information, if any, such that <span
class="math inline">\(N_{Tx,PSFCH} \geq \max\left( 1,\sum_{i =
1}^{K}M_{i} \right)\)</span> where <span
class="math inline">\(M_{i}\)</span>, <span class="math inline">\(1 \leq
i \leq 8\)</span>, is a number of PSFCHs with priority value <span
class="math inline">\(i\)</span> for PSFCH with HARQ-ACK information and
<span class="math inline">\(M_{i}\)</span>, <span
class="math inline">\(i &gt; 8,\)</span> is a number of PSFCHs with
priority value <span class="math inline">\(i - 8\)</span> for PSFCH with
conflict information and <span class="math inline">\(K\)</span> is
defined as</p>
<blockquote>
<p>- the largest value satisfying <span
class="math inline">\(P_{\text{PSFCH,one}} + 10log_{10}\left( \max\left(
1,\sum_{i = 1}^{K}M_{i} \right) \right) \leq P_{\text{CMAX}}\)</span>
where <span class="math inline">\(P_{\text{CMAX}}\)</span> is determined
according to [8-1, TS 38.101-1] for transmission of all PSFCHs in <span
class="math inline">\(\sum_{i = 1}^{K}M_{i}\)</span>, if any</p>
<p>- zero, otherwise</p>
</blockquote>
<p>and</p>
<p><span class="math inline">\(P_{\text{PSFCH,k}}(i) = \min\left(
P_{\text{CMAX}} - 10log_{10}(N_{Tx,PSFCH}),P_{\text{PSFCH,one}}
\right)\)</span> [dBm]</p>
<p>where <span class="math inline">\(P_{\text{CMAX}}\)</span> is
determined for the <span class="math inline">\(\ N_{Tx,PSFCH}\)</span>
simultaneous PSFCH transmissions according to [8-1, TS 38.101-1]</p>
<p>- else</p>
<p><span class="math inline">\(P_{\text{PSFCH,k}}(i) = P_{\text{CMAX}} -
10log_{10}(N_{Tx,PSFCH})\)</span> [dBm]</p>
<p>where the UE autonomously determines <span
class="math inline">\(N_{Tx,PSFCH}\)</span> PSFCH transmissions with
ascending order of corresponding priority field values as described in
clause 16.2.4.2 over the PSFCH transmissions with HARQ-ACK information,
if any, and then with ascending order of priority value over the PSFCH
transmissions with conflict information, if any, such that <span
class="math inline">\(N_{Tx,PSFCH} \geq 1\)</span> and where <span
class="math inline">\(P_{\text{CMAX}}\)</span> is determined for the
<span class="math inline">\(N_{Tx,PSFCH}\)</span> PSFCH transmissions
according to [8-1, TS 38.101-1].</p>
<p>For resource pools configured with PSFCH resources overlapping in
time, the UE either expects not to be provided with <em>dl-P0-PSFCH</em>
or <em>dl-Alpha-PSFCH</em> in any of the resource pools, or expects to
be provided with the same values of <em>dl-P0-PSFCH</em> and the same
values of <em>dl-Alpha-PSFCH</em> for all the resource pools.</p>
<h3 id="prioritization-of-transmissionsreceptions">16.2.4 Prioritization
of transmissions/receptions</h3>
<h4 id="simultaneous-nr-and-e-utra-transmissionreception">16.2.4.1
Simultaneous NR and E-UTRA transmission/reception</h4>
<p>If a UE</p>
<p>- would transmit a first channel/signal using E-UTRA radio access and
second channels/signals using NR radio access, and</p>
<p>- a transmission of the first channel/signal would overlap in time
with a transmission of the second channels/signals, and</p>
<p>- the priorities of the channels/signals are known to both E-UTRA
radio access and NR radio access at the UE <span
class="math inline">\(T\)</span> msec prior to the start of the earliest
of the two transmissions, where <span class="math inline">\(T \leq
4\)</span> and is based on UE implementation,</p>
<p>the UE transmits only the channels/signals of the radio access
technology with the highest priority</p>
<p>- as determined by the SCI formats scheduling the transmissions,
or</p>
<p>- as indicated by higher layers in case of a S-SS/PSBCH block or a
sidelink synchronization signal using E-UTRA radio access, or</p>
<p>- as determined in clause 16.2.4.2 in case of PSFCH
transmissions.</p>
<p>If a UE</p>
<p>- would respectively transmit or receive a first channel/signal using
E-UTRA radio access and receive a second channel/signal or transmit
second channels/signals using NR radio access, and</p>
<p>- a transmission or reception of the first channel/signal would
respectively overlap in time with a reception of the second
channel/signal or transmission of the second channels/signals, and</p>
<p>- the priorities of the channels/signals are known to both E-UTRA
radio access and NR radio access at the UE <span
class="math inline">\(T\)</span> msec prior to the start of the earliest
transmission or reception, where <span class="math inline">\(T \leq
4\)</span> and is based on UE implementation,</p>
<p>the UE transmits or receives the channels/signals of the radio access
technology with the highest priority</p>
<p>- as determined by the SCI formats scheduling the transmissions,
or</p>
<p>- as indicated by higher layers in case of a S-SS/PSBCH block or a
sidelink synchronization signal using E-UTRA radio access, or</p>
<p>- as determined in clause 16.2.4.2 among PSFCH
transmissions/receptions.</p>
<h4 id="simultaneous-psfch-transmissionreception">16.2.4.2 Simultaneous
PSFCH transmission/reception</h4>
<p>For a PSFCH transmission or reception with HARQ-ACK information, a
priority value for the PSFCH is equal to the priority value indicated by
an SCI format 1-A associated with the PSFCH.</p>
<p>For PSFCH transmission with conflict information, a priority value
for the PSFCH is equal to the smallest priority value determined by the
corresponding SCI format(s) 1-A for the conflicting resource(s).</p>
<p>For PSFCH reception with conflict information, a priority value for
the PSFCH is equal to the priority value determined by the corresponding
SCI format 1-A for the conflicting resource.</p>
<p>If a UE</p>
<p>- would transmit <span
class="math inline">\(N_{sch,Tx,PSFCH}\)</span> PSFCHs and receive <span
class="math inline">\(N_{sch,Rx,PSFCH}\)</span> PSFCHs, and</p>
<p>- transmissions of the <span
class="math inline">\(N_{sch,Tx,PSFCH}\)</span> PSFCHs would overlap in
time with receptions of the <span
class="math inline">\(N_{sch,Rx,PSFCH}\)</span> PSFCHs</p>
<p>the UE transmits or receives only a set of PSFCHs corresponding to
the smallest priority field value, as determined by a first set of SCI
format 1-A and/or a second set of SCI format 1-A [5, TS 38.212] that are
respectively associated with PSFCHs with HARQ-ACK information from the
<span class="math inline">\(N_{sch,Tx,PSFCH}\)</span> PSFCHs and PSFCHs
with HARQ-ACK information from the <span
class="math inline">\(N_{sch,Rx,PSFCH}\)</span> PSFCHs when one or more
of the PSFCHs provide HARQ-ACK information. If none of the <span
class="math inline">\(N_{sch,Tx,PSFCH}\)</span> PSFCHs and none of the
<span class="math inline">\(N_{sch,Rx,PSFCH}\)</span> PSFCHs provide
HARQ-ACK information, the UE transmits or receives only a set of PSFCHs
corresponding to the smallest priority value of the first set of PSFCHs
and the second set of PSFCHs that are respectively associated with the
<span class="math inline">\(N_{sch,Tx,PSFCH}\)</span> PSFCHs and the
<span class="math inline">\(N_{sch,Rx,PSFCH}\)</span> PSFCHs when the
PSFCHs provide conflict information.</p>
<p>If a UE would transmit <span
class="math inline">\(N_{sch,Tx,PSFCH}\)</span> PSFCHs in a PSFCH
transmission occasion, the UE first transmits PSFCHs with HARQ-ACK
information from <span class="math inline">\(N_{Tx,PSFCH}\)</span>
PSFCHs corresponding to the smallest priority field values from the
<span class="math inline">\(N_{Tx,PSFCH}\)</span> priority field values,
if any. Subsequently, the UE transmits remaining PSFCHs with conflict
information corresponding to the smallest remaining priority field
values from the <span class="math inline">\(N_{Tx,PSFCH}\)</span>
priority field values, if any.</p>
<p>If a UE indicates a capability to receive <span
class="math inline">\(N_{Rx,PSFCH}\)</span> PSFCHs in a PSFCH reception
occasion [18, TS 38.306], the UE first receives PSFCHs with HARQ-ACK
information, if any, and subsequently receives PSFCHs with conflict
information, if any.</p>
<h4 id="simultaneous-sl-and-ul-transmissionsreceptions">16.2.4.3
Simultaneous SL and UL transmissions/receptions</h4>
<p>If a UE</p>
<p>- would simultaneously transmit on the UL and on the SL in a carrier
or in two respective carriers, and</p>
<p>- the UE is not capable of simultaneous transmissions on the UL and
on the SL in the carrier or in the two respective carriers</p>
<p>the UE transmits only on the link, UL or SL, with the higher
priority.</p>
<p>If a UE</p>
<p>- would simultaneously transmit on the UL and receive on the SL in a
carrier, or</p>
<p>- would simultaneously transmit on the UL and receive on the SL in
two respective carriers and the UE is not capable of simultaneous
transmission on the UL and reception on the SL in the two respective
carriers</p>
<p>the UE transmits on UL or receives on SL, with the higher
priority.</p>
<p>If a UE</p>
<p>- is capable of simultaneous transmissions on the UL and on the SL in
two respective carriers,</p>
<p>- would transmit on the UL and on the SL in the two respective
carriers,</p>
<p>- the transmission on the UL would overlap with the transmission on
the SL over a time period, and</p>
<p>- the total UE transmission power over the time period would exceed
<span class="math inline">\(P_{\text{CMAX}}\)</span></p>
<p>the UE</p>
<p>- reduces the power for the UL transmission prior to the start of the
UL transmission, if the SL transmission has higher priority than the UL
transmission as determined in clause 16.2.4.3.1, so that the total UE
transmission power would not exceed <span
class="math inline">\(P_{\text{CMAX}}\)</span></p>
<p>- reduces the power for the SL transmission prior to the start of the
SL transmission, if the UL transmission has higher priority than the SL
transmission as determined in clause 16.2.4.3.1, so that the total UE
transmission power would not exceed <span
class="math inline">\(P_{\text{CMAX}}\)</span></p>
<h5
id="prioritizations-for-sidelink-and-uplink-transmissionsreceptions">16.2.4.3.1
Prioritizations for sidelink and uplink transmissions/receptions </h5>
<p>A UE performs prioritization between SL transmissions/receptions and
UL transmissions after performing the procedures described in clause 9,
clause 9.2.5, and clause 9.2.6, and in clause 6.1 of [6, TS 38.214].</p>
<p>PSFCH transmissions in a slot, as determined in clause 16.2.4.2, have
a same priority value as the smallest priority value among PSSCH
receptions with corresponding HARQ-ACK information provided by the PSFCH
transmissions in the slot, if any, and among PSFCH transmissions with
conflict information in the slot, if any, where each priority value is
equal to the smallest priority value determined by corresponding SCI
formats 1-A as described in clause 16.3.</p>
<p>PSFCH receptions in a slot, as determined in clause 16.2.4.2, have a
same priority value as the smallest priority value among PSSCH
transmissions with corresponding HARQ-ACK information provided by the
PSFCH receptions in the slot, if any, and among PSFCH receptions with
conflict information in the slot, if any, where each priority value is
equal to the priority value determined by corresponding SCI format 1-A
as described in clause 16.3.</p>
<p>A priority of S-SS/PSBCH block transmission or reception is provided
by <em>sl-SSB-PriorityNR.</em></p>
<p>For prioritization between SL transmission or PSFCH/S-SS/PSBCH block
reception and UL transmission other than a PRACH, or a PUSCH scheduled
by an UL grant in a RAR and its retransmission, or a PUSCH corresponding
to Type-2 random access procedure and its retransmission, or a PUCCH
with sidelink HARQ-ACK information report</p>
<p>- if the UL transmission is for a PUSCH or for a PUCCH with priority
index 1,</p>
<p>- if <em>sl-PriorityThreshold-UL-URLLC</em> is provided</p>
<p>- the SL transmission or reception has higher priority than the UL
transmission if the priority value of the SL transmission or reception
is smaller than <em>sl-PriorityThreshold-UL-URLLC</em>; otherwise, the
UL transmission has higher priority than the SL transmission or
reception</p>
<p>- else</p>
<p>- the UL transmission has higher priority than the SL transmission or
reception</p>
<p>- else</p>
<p>- the SL transmission or reception has higher priority than the UL
transmission if the priority value of the SL transmission(s) or
reception is smaller than <em>sl-PriorityThreshold</em>; otherwise, the
UL transmission has higher priority than the SL transmission or
reception</p>
<p>A PRACH transmission, or a PUSCH scheduled by an UL grant in a RAR
and its retransmission, or a PUSCH for Type-2 random access procedure
and its retransmission, or a PUCCH with HARQ-ACK information in response
to successRAR, or a PUCCH indicated by a DCI format 1_0 with CRC
scrambled by a corresponding TC-RNTI has higher priority than a SL
transmission or reception.</p>
<p>A PUCCH transmission with a sidelink HARQ-ACK information report has
higher priority than a SL transmission if a priority value of the PUCCH
is smaller than a priority value of the SL transmission. The priority
value of the PUCCH transmission is as described in clause 16.5. If the
priority value of the PUCCH transmission is larger than the priority
value of the SL transmission, the SL transmission has higher
priority.</p>
<p>A PUCCH transmission with a sidelink HARQ-ACK information report has
higher priority than a PSFCH/S-SS/PSBCH block reception if a priority
value of the PUCCH is smaller than a priority value of the SL reception.
If the priority value of the PUCCH transmission is larger than the
priority value of the PSFCH/S-SS/PSBCH block reception, the SL reception
has higher priority.</p>
<p>When one or more SL transmissions from a UE overlap in time with
multiple non-overlapping UL transmissions from the UE, the UE performs
the SL transmissions if at least one SL transmission is prioritized over
all UL transmissions subject to the UE processing timeline with respect
to the first SL transmission and the first UL transmission.</p>
<p>When one or more UL transmissions from a UE overlap in time with
multiple non-overlapping SL transmissions, the UE performs the UL
transmissions if at least one UL transmission is prioritized over all SL
transmissions subject to the UE processing timeline with respect to the
first SL transmission and the first UL transmission.</p>
<p>When one SL transmission overlaps in time with one or more
overlapping UL transmissions, the UE performs the SL transmission if the
SL transmission is prioritized over all UL transmissions subject to both
the UE multiplexing and processing timelines with respect to the first
SL transmission and the first UL transmission, where the UE processing
timeline with respect to the first SL transmission and the first UL
transmission is same as when one or more SL transmissions overlap in
time with multiple non-overlapping UL transmissions.</p>
<p>When one SL transmission overlaps in time with one or more
overlapping UL transmissions, the UE performs the UL transmission if at
least one UL transmission is prioritized over the SL transmission
subject to both the UE multiplexing and processing timelines with
respect to the first SL transmission and the first UL transmission,
where the UE processing timeline with respect to the first SL
transmission and the first UL transmission is same as when one or more
SL transmissions overlap in time with multiple non-overlapping UL
transmissions.</p>
<h2
id="ue-procedure-for-reporting-and-obtaining-control-information-in-psfch">16.3
UE procedure for reporting and obtaining control information in PSFCH
</h2>
<p>Control information provided by a PSFCH transmission includes
HARQ-ACK information or conflict information.</p>
<h3
id="ue-procedure-for-transmitting-psfch-with-control-information">16.3.0
UE procedure for transmitting PSFCH with control information</h3>
<p>A UE can be indicated by an SCI format scheduling a PSSCH reception
to transmit a PSFCH with HARQ-ACK information in response to the PSSCH
reception. The UE provides HARQ-ACK information that includes ACK or
NACK, or only NACK.</p>
<p>A UE can be provided, by <em>sl-PSFCH-Period</em>, a number of slots
in a resource pool for a period of PSFCH transmission occasion
resources. If the number is zero, PSFCH transmissions from the UE in the
resource pool are disabled.</p>
<p>A UE can be enabled, by <em>sl-InterUE-CoordinationScheme2</em>, to
transmit a PSFCH with conflict information in a resource pool. The UE
can determine, based on an indication by a SCI format 1-A, a set of
resources that includes one or more slots and resource blocks that are
reserved for PSSCH transmission. If the UE determines a conflict for a
reserved resource for PSSCH transmission, the UE provides conflict
information in a PSFCH.</p>
<p>A UE expects that a slot <span
class="math inline">\({t&#39;}_{k}^{SL}\)</span> <span
class="math inline">\((0 \leq k &lt; {T&#39;}_{\max}\)</span>) has a
PSFCH transmission occasion resource if <span class="math inline">\(k\
mod\ N_{\text{PSSCH}}^{\text{PSFCH}} = 0\)</span>, where <span
class="math inline">\({t&#39;}_{k}^{SL}\)</span> is defined in [6, TS
38.214], and <span class="math inline">\({T&#39;}_{\max}\)</span> is a
number of slots that belong to the resource pool within 10240 msec
according to [6, TS 38.214], and <span
class="math inline">\(N_{\text{PSSCH}}^{\text{PSFCH}}\)</span> is
provided by <em>sl-PSFCH-Period</em>.</p>
<p>A UE may be indicated by higher layers to not transmit a PSFCH that
includes HARQ-ACK information in response to a PSSCH reception [11, TS
38.321].</p>
<p>If a UE receives a PSSCH in a resource pool and the HARQ feedback
enabled/disabled indicator field in an associated SCI format 2-A/2-B/2-C
has value 1 [5, TS 38.212], the UE provides the HARQ-ACK information in
a PSFCH transmission in the resource pool. The UE transmits the PSFCH in
a first slot that includes PSFCH resources and is at least a number of
slots, provided by <em>sl-MinTimeGapPSFCH</em>, of the resource pool
after a last slot of the PSSCH reception.</p>
<p>A UE is provided by <em>sl-PSFCH-RB-Set</em> a set of <span
class="math inline">\(M_{\text{PRB, }set}^{\text{PSFCH}}\)</span> PRBs
in a resource pool for PSFCH transmission with HARQ-ACK information in a
PRB of the resource pool. A UE can be provided by
<em>sl-RB-SetPSFCH</em> a set of <span
class="math inline">\(M_{\text{PRB, }set}^{\text{PSFCH}}\)</span> PRBs
in a resource pool for PSFCH transmission with conflict information in a
PRB of the resource pool. A UE expects that different PRBs are
(pre)configured for conflict information and HARQ-ACK information. For a
number of <span class="math inline">\(N_{\text{subch}}\)</span>
sub-channels for the resource pool, provided by
<em>sl-NumSubchannel</em>, and a number of PSSCH slots associated with a
PSFCH slot that is less than or equal to <span
class="math inline">\(N_{\text{PSSCH}}^{\text{PSFCH}}\)</span>, the UE
allocates the <span class="math inline">\(\left\lbrack \left( i + j
\cdot N_{\text{PSSCH}}^{\text{PSFCH}} \right) \cdot M_{\text{subch,
}slot}^{\text{PSFCH}},\ \left( i + 1 + j \cdot
N_{\text{PSSCH}}^{\text{PSFCH}} \right) \cdot M_{\text{subch,
}slot}^{\text{PSFCH}} - 1 \right\rbrack\)</span> PRBs from the <span
class="math inline">\(M_{\text{PRB, }set}^{\text{PSFCH}}\)</span> PRBs
to slot <span class="math inline">\(i\)</span> among the PSSCH slots
associated with the PSFCH slot and sub-channel <span
class="math inline">\(j\)</span>, where <span
class="math inline">\(M_{\text{subch, }slot}^{\text{PSFCH}} =
\frac{M_{\text{PRB, }set}^{\text{PSFCH}}}{\left( N_{\text{subch}} \cdot
N_{\text{PSSCH}}^{\text{PSFCH}} \right)}\)</span>, <span
class="math inline">\(0 \leq i &lt;
N_{\text{PSSCH}}^{\text{PSFCH}}\)</span>, <span class="math inline">\(0
\leq j &lt; N_{\text{subch}}\)</span>, and the allocation starts in an
ascending order of <span class="math inline">\(i\)</span> and continues
in an ascending order of <span class="math inline">\(j\)</span>. The UE
expects that <span class="math inline">\(M_{\text{PRB,
}set}^{\text{PSFCH}}\)</span> is a multiple of <span
class="math inline">\(N_{\text{subch}} \bullet
N_{\text{PSSCH}}^{\text{PSFCH}}\)</span><em>.</em></p>
<p>The second OFDM symbol <span class="math inline">\(l&#39;\)</span> of
PSFCH transmission in a slot is defined as <span
class="math inline">\(l&#39; = slStartSymbol + slLengthSymbols -
2\)</span>.</p>
<p>A UE determines a number of PSFCH resources available for
multiplexing HARQ-ACK or conflict information in a PSFCH transmission as
<span class="math inline">\(R_{\text{PRB, }CS}^{\text{PSFCH}} =
{N_{\text{type }}^{\text{PSFCH}} \cdot M}_{\text{subch,
}slot}^{\text{PSFCH}} \cdot N_{\text{CS}}^{\text{PSFCH}}\)</span> where
<span class="math inline">\(N_{\text{CS}}^{\text{PSFCH}}\)</span> is a
number of cyclic shift pairs for the resource pool provided by
<em>sl-NumMuxCS-Pair</em> and, based on an indication by
<em>sl-PSFCH-CandidateResourceType</em>,</p>
<p>- if <em>sl-PSFCH-CandidateResourceType</em> is configured as
<em>startSubCH</em>, <span class="math inline">\(N_{\text{type
}}^{\text{PSFCH}} = 1\)</span> and the <span
class="math inline">\(M_{\text{subch, }slot}^{\text{PSFCH}}\)</span>
PRBs are associated with the starting sub-channel of the corresponding
PSSCH</p>
<p>- if <em>sl-PSFCH-CandidateResourceType</em> is configured as
<em>allocSubCH</em>, <span class="math inline">\(N_{\text{type
}}^{\text{PSFCH}} = N_{\text{subch }}^{\text{PSSCH}}\)</span> and the
<span class="math inline">\({N_{\text{subch }}^{\text{PSSCH}} \cdot
M}_{\text{subch, }slot}^{\text{PSFCH}}\)</span> PRBs are associated with
the <span class="math inline">\(N_{\text{subch
}}^{\text{PSSCH}}\)</span> sub-channels of the corresponding PSSCH</p>
<p>- for conflict information, the corresponding PSSCH is determined
based on <em>sl-PSFCH-Occasion</em></p>
<p>The PSFCH resources are first indexed according to an ascending order
of the PRB index, from the <span class="math inline">\({N_{\text{type
}}^{\text{PSFCH}} \cdot M}_{\text{subch, }slot}^{\text{PSFCH}}\)</span>
PRBs, and then according to an ascending order of the cyclic shift pair
index from the <span
class="math inline">\(N_{\text{CS}}^{\text{PSFCH}}\)</span> cyclic shift
pairs.</p>
<p>A UE determines an index of a PSFCH resource for a PSFCH transmission
with HARQ-ACK information in response to a PSSCH reception or with
conflict information corresponding to a reserved resource as <span
class="math inline">\(\left( P_{\text{ID}} + M_{ID}
\right)modR_{\text{PRB, }CS}^{\text{PSFCH}}\)</span> where <span
class="math inline">\(P_{\text{ID}}\)</span> is a physical layer source
ID provided by SCI format 2-A/2-B/2-C [5, TS 38.212] scheduling the
PSSCH reception, or by SCI format 2-A/2-B/2-C with corresponding SCI
format 1-A reserving the resource from another UE to be provided with
the conflict information. For HARQ-ACK information, <span
class="math inline">\(M_{\text{ID}}\)</span> is the identity of the UE
receiving the PSSCH as indicated by higher layers if the UE detects a
SCI format 2-A with Cast type indicator field value of "01"; otherwise,
<span class="math inline">\(M_{\text{ID}}\)</span> is zero. For conflict
information, <span class="math inline">\(M_{\text{ID}}\)</span> is
zero.</p>
<p>For a PSFCH transmission with HARQ-ACK information or conflict
information, a UE determines a <span
class="math inline">\(m_{\text{0}}\)</span> value, for computing a value
of cyclic shift <span class="math inline">\(\alpha\)</span> [4, TS
38.211], from a cyclic shift pair index corresponding to a PSFCH
resource index and from <span
class="math inline">\(N_{\text{CS}}^{\text{PSFCH}}\)</span> using Table
16.3-1.</p>
<p>Table 16.3-1: Set of cyclic shift pairs</p>
<table style="width:100%;">
<colgroup>
<col style="width: 11%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr>
<th rowspan="2" style="text-align: center;"><span
class="math display">\[\mathbf{N}_{\text{CS}}^{\text{PSFCH}}\]</span></th>
<th colspan="6" style="text-align: center;"><span
class="math display">\[\mathbf{m}_{\text{0}}\]</span></th>
</tr>
<tr>
<th style="text-align: center;"><strong>Cyclic Shift Pair Index
0</strong></th>
<th style="text-align: center;"><strong>Cyclic Shift Pair Index
1</strong></th>
<th style="text-align: center;"><strong>Cyclic Shift Pair Index
2</strong></th>
<th style="text-align: center;"><strong>Cyclic Shift Pair Index
3</strong></th>
<th style="text-align: center;"><strong>Cyclic Shift Pair Index
4</strong></th>
<th style="text-align: center;"><strong>Cyclic Shift Pair Index
5</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">6</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">5</td>
</tr>
</tbody>
</table>
<p>For a PSFCH transmission with HARQ-ACK information, a UE determines a
<span class="math inline">\(m_{\text{cs}}\)</span> value, for computing
a value of cyclic shift <span class="math inline">\(\alpha\)</span> [4,
TS 38.211], as in Table 16.3-2 if the UE detects a SCI format 2-A with
Cast type indicator field value of "01" or "10" or a SCI format 2-C, or
as in Table 16.3-3 if the UE detects a SCI format 2-B or a SCI format
2-A with Cast type indicator field value of "11". For a PSFCH
transmission with conflict information, a UE determines a <span
class="math inline">\(m_{\text{cs}}\)</span> value for computing a value
of cyclic shift <span class="math inline">\(\alpha\)</span> [4, TS
38.211] as in Table 16.3-4. The UE applies one cyclic shift from a
cyclic shift pair to a sequence used for the PSFCH transmission [4, TS
38.211].</p>
<p>Table 16.3-2: Mapping of HARQ-ACK information bit values to a cyclic
shift, from a cyclic shift pair, of a sequence for a PSFCH transmission
when HARQ-ACK information includes ACK or NACK</p>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 27%" />
<col style="width: 32%" />
</colgroup>
<tbody>
<tr>
<td>HARQ-ACK Value</td>
<td>0 (NACK)</td>
<td>1 (ACK)</td>
</tr>
<tr>
<td><strong>Sequence cyclic shift</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">6</td>
</tr>
</tbody>
</table>
<p>Table 16.3-3: Mapping of HARQ-ACK information bit values to a cyclic
shift, from a cyclic shift pair, of a sequence for a PSFCH transmission
when HARQ-ACK information includes only NACK</p>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 27%" />
<col style="width: 32%" />
</colgroup>
<tbody>
<tr>
<td>HARQ-ACK Value</td>
<td>0 (NACK)</td>
<td>1 (ACK)</td>
</tr>
<tr>
<td><strong>Sequence cyclic shift</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">N/A</td>
</tr>
</tbody>
</table>
<p>Table 16.3-4: Mapping of conflict information bit values to a cyclic
shift, from a cyclic shift pair, of a sequence for a PSFCH
transmission</p>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 69%" />
</colgroup>
<tbody>
<tr>
<td>Conflict information</td>
<td>Conflict information for a next in time reserved resource indicated
in SCI</td>
</tr>
<tr>
<td><strong>Sequence cyclic shift</strong></td>
<td style="text-align: center;">0</td>
</tr>
</tbody>
</table>
<p>A first UE determines a second UE for providing the conflict
information to in a PSFCH as follows</p>
<p>- if the first UE is an intended receiver of the second UE for a
reserved resource of a PSSCH transmission in a slot,</p>
<p>- does not expect to perform reception on the sidelink due to
half-duplex operation in the slot,</p>
<p>- the PSFCH occasion for resource conflict information of the second
UE is not passed,</p>
<p>- the conflict information receiver flag in SCI format 1-A from the
second UE is set to 1, if <em>sl-IndicationUE-B</em> = 'enabled',
and</p>
<p>- determines to transmit to the second UE the PSFCH with the conflict
information.</p>
<p>A first UE determines a UE for providing the conflict information to
in a PSFCH as follows</p>
<p>- if, for a resource pool, <em>sl-TypeUE-A</em> is not provided, the
first UE has been indicated a first reserved resource and a second
reserved resource as resources for PSSCH reception or, if for a resource
pool <em>sl-TypeUE-A</em> is provided, has been indicated at least the
first reserved resource or the second reserved resource for PSSCH
reception,</p>
<p>- detects a first SCI format 1-A that includes a first priority
value, <span class="math inline">\(p_{1}\)</span>, and the first
reserved resource for PSSCH transmission from a second UE,</p>
<p>- detects a second SCI format 1-A that includes a second priority
value, <span class="math inline">\(p_{2} &lt; p_{1}\)</span>, and the
second reserved resource for PSSCH transmission from a third UE, and</p>
<p>- determines that the first and second resources overlap in time and
frequency</p>
<p>- the PSFCH occasions for resource conflict information of the second
UE and the third UE are not passed</p>
<p>- the conflict information receiver flag in SCI Format 1-A from the
second UE and the third UE is set to 1, if <em>sl-IndicationUE-B</em> =
'enabled'</p>
<p>- determines the first SCI format 1-A and the second SCI format 1-A
are not received later than <em>sl-MinTimeGapPSFCH</em> before the PSFCH
occasion for conflict information</p>
<p>- determines to transmit to the second UE the PSFCH with the conflict
information</p>
<p>- determines to transmit to either the second UE or the third UE the
PSFCH with the conflict information, if <span
class="math inline">\(p_{2} = p_{1}\)</span></p>
<p>The first UE can be provided conditions by
<em>sl-OptionForCondition2-A-1</em> to determine conflict of reserved
resources in a resource pool</p>
<p>- if <em>sl-OptionForCondition2-A-1</em> = '0', the first UE can be
provided by, <em>sl-Thres-RSRP-List</em> <span
class="math inline">\(Th\left( p_{i},p_{j} \right)\)</span>, a list of
RSRP thresholds for each priority combination <span
class="math inline">\(\left( p_{i},p_{j} \right)\)</span> [6, TS
38.214]</p>
<p>- if the first UE is an intended receiver for PSSCH in a reserved
resource of the second UE, the first UE determines a resource conflict
if the RSRP [6, TS 38.214] of the third UE is above a threshold<span
class="math inline">\(\ Th\left( p_{2},p_{1} \right)\)</span></p>
<p>- if the first UE is an intended receiver for PSSCH in a reserved
resource of the third UE, the first UE determines a resource conflict if
the RSRP of the second UE is above a threshold<span
class="math inline">\(\ Th\left( p_{1},p_{2} \right)\)</span></p>
<p>- if <em>sl-OptionForCondition2-A-1</em> = '1', the first UE can be
provided a value <span class="math inline">\(deltaRSRPThresh\)</span> by
<em>sl-DeltaRSRP-Thresh</em></p>
<p>- if the first UE is an intended receiver for PSSCH in a reserved
resource of the second UE, the first UE determines a resource conflict
if <span class="math inline">\(RSRP_{2} &gt; RSRP_{1} +
deltaRSRPThresh\)</span>, where <span
class="math inline">\(RSRP_{1}\)</span> and <span
class="math inline">\(RSRP_{2}\)</span> are the RSRP measurements from
the first UE for the second UE and the third UE, respectively</p>
<p>- if the first UE is an intended receiver for PSSCH in a reserved
resource of the third UE, the first UE determines a resource conflict if
<span class="math inline">\(RSRP_{1} &gt; RSRP_{2} +
deltaRSRPThresh\)</span></p>
<p>If a UE transmits a PSFCH with conflict information corresponding to
a reserved resource indicated in an SCI format 1-A, the UE transmits the
PSFCH in the resource pool in a slot determined based on
<em>sl-PSFCH-Occasion</em></p>
<p>- If <em>sl-PSFCH-Occasion</em> = '0', the UE transmits the PSFCH in
a first slot that includes PSFCH resources and is at least a number of
slots, provided by <em>sl-MinTimeGapPSFCH</em>, of the resource pool
after a slot of a PSCCH reception that provides the SCI format 1-A. The
PSFCH resource is in a slot that is at least <span
class="math inline">\(T_{3}\)</span> slots [6, TS 38.214] before the
resource associated with the conflict information; otherwise, the UE
does not transmit the PSFCH with conflict information.</p>
<p>- If <em>sl-PSFCH-Occasion</em> = '1', the UE transmits the PSFCH in
a latest slot that includes PSFCH resources and is at least <span
class="math inline">\(T_{3}\)</span> slots of the resource pool before a
slot of the resource associated with conflict information. The PSFCH
resource is in a slot that is at least <em>sl-MinTimeGapPSFCH</em> slots
after a slot of a PSCCH reception that provides the SCI format 1-A;
otherwise, the UE does not transmit the PSFCH with conflict
information.</p>
<h3
id="ue-procedure-for-receiving-psfch-with-control-information">16.3.1 UE
procedure for receiving PSFCH with control information </h3>
<p>A UE that transmitted a PSSCH scheduled by a SCI format 2-A/2-B/2-C
that indicates HARQ feedback enabled, attempts to receive associated
PSFCHs with HARQ-ACK information according to PSFCH resources determined
as described in clause 16.3.0. The UE determines an ACK or a NACK value
for HARQ-ACK information provided in each PSFCH resource as described in
[8-4, TS 38.101-4]. The UE does not determine both an ACK value and a
NACK value at a same time for a PSFCH resource.</p>
<p>For each PSFCH reception occasion, from a number of PSFCH reception
occasions, the UE generates HARQ-ACK information to report to higher
layers. For generating the HARQ-ACK information, the UE can be indicated
by a SCI format to perform one of the following</p>
<p>- if the UE receives a PSFCH associated with a SCI format 2-A with
Cast type indicator field value of "10" or a SCI format 2-C</p>
<p>- report to higher layers HARQ-ACK information with same value as a
value of HARQ-ACK information that the UE determines from the PSFCH
reception</p>
<p>- if the UE receives a PSFCH associated with a SCI format 2-A with
Cast type indicator field value of "01"</p>
<p>- report an ACK value to higher layers if the UE determines an ACK
value from at least one PSFCH reception occasion from the number of
PSFCH reception occasions in PSFCH resources corresponding to every
identity <span class="math inline">\(M_{\text{ID}}\)</span> of UEs that
the UE expects to receive corresponding PSSCHs as described in clause
16.3; otherwise, report a NACK value to higher layers</p>
<p>- if the PSFCH reception occasion is associated with a SCI format 2-B
or a SCI format 2-A with Cast type indicator field value of "11"</p>
<p>- report to higher layers an ACK value if the UE determines absence
of PSFCH reception for the PSFCH reception occasion; otherwise, report a
NACK value to higher layers</p>
<p>A UE that transmitted SCI format 1-A, indicating one or more reserved
resources in a resource pool enabled by
<em>sl-InterUE-CoordinationScheme2</em>, attempts to receive associated
PSFCH with conflict information in the resource pool with PSFCH
resources that the UE determines as described in clause 16.3.0. If the
UE determines presence of a resource conflict based on conflict
information in a PSFCH reception, the UE reports the resource conflict
to higher layers</p>
<p>- if <em>sl-SlotLevelResourceExclusion</em> is not provided, the UE
reports resources overlapping with a next in time reserved resource
indicated by the SCI format 1-A</p>
<p>- if <em>sl-SlotLevelResourceExclusion</em> is provided, the UE
reports resources in a slot of a next in time reserved resource
indicated by the SCI format 1-A</p>
<p>If a UE receives a PSFCH with conflict information corresponding to a
reserved resource indicated in an SCI format 1-A, the UE receives the
PSFCH in the resource pool in a slot determined based on
<em>sl-PSFCH-Occasion</em></p>
<p>- If <em>sl-PSFCH-Occasion</em> = '0', the UE receives the PSFCH in a
first slot that includes PSFCH resources and is at least a number of
slots, provided by <em>sl-MinTimeGapPSFCH</em>, of the resource pool
after a slot of a PSCCH transmission that provides the SCI format 1-A.
The PSFCH resource is in a slot that is at least <span
class="math inline">\(T_{3}\)</span> slots [6, TS 38.214] before the
resource associated with the conflict information; otherwise, the UE
does not receive the PSFCH with conflict information</p>
<p>- If <em>sl-PSFCH-Occasion</em> = '1', the UE receives the PSFCH in a
latest slot that includes PSFCH resources and is at least <span
class="math inline">\(T_{3}\)</span> slots of the resource pool before a
slot of the resource associated with conflict information. The PSFCH
resource is in a slot that is at least <em>sl-MinTimeGapPSFCH</em> slots
after a slot of a PSCCH transmission that provides the SCI format 1-A;
otherwise, the UE does not receive the PSFCH with conflict
information</p>
<h2 id="ue-procedure-for-transmitting-pscch">16.4 UE procedure for
transmitting PSCCH </h2>
<p>A UE can be provided a number of symbols in a resource pool, by
<em>sl-TimeResourcePSCCH</em>, starting from a second symbol that is
available for SL transmissions in a slot, and a number of PRBs in the
resource pool, by <em>sl-FreqResourcePSCCH</em>, starting from the
lowest PRB of the lowest sub-channel of the associated PSSCH, for a
PSCCH transmission with a SCI format 1-A.</p>
<p>A UE that transmits a PSCCH with SCI format 1-A using sidelink
resource allocation mode 2 [6, TS 38.214] sets</p>
<p>- "Resource reservation period" as an index in
<em>sl-ResourceReservePeriodList</em> corresponding to a reservation
period provided by higher layers [11, TS 38.321], if the UE is provided
<em>sl-MultiReserveResource</em></p>
<p>- the values of the frequency resource assignment field and the time
resource assignment field as described in [6, TS 38.214] to indicate
<span class="math inline">\(N\)</span> resources from a set <span
class="math inline">\(\left\{ R_{\text{y}} \right\}\)</span> of
resources selected by higher layers as described in [11, TS 38.321] with
<span class="math inline">\(N\)</span> smallest slot indices <span
class="math inline">\(y_{i}\)</span> for <span class="math inline">\(0
\leq i \leq N - 1\)</span> such that <span class="math inline">\(y_{0}
&lt; y_{1} &lt; \ldots &lt; y_{N - 1} \leq y_{0} + 31\)</span>,
where:</p>
<p>- <span class="math inline">\(N = \min\left( N_{selected},\ N_{max\_
reserve} \right)\)</span>, where <span
class="math inline">\(N_{selected}\)</span> is a number of resources in
the set <span class="math inline">\(\left\{ R_{\text{y}}
\right\}\)</span> with slot indices <span
class="math inline">\(y_{j}\)</span>, <span class="math inline">\(0 \leq
j \leq N_{selected} - 1\)</span>, such that <span
class="math inline">\(y_{0} &lt; y_{1} &lt; \ldots &lt; y_{N_{selected}
- 1} \leq y_{0} + 31\)</span>, and <span class="math inline">\(N_{max\_
reserve}\)</span> is provided by <em>sl-MaxNumPerReserve</em></p>
<p>- each resource, from the set of <span class="math inline">\(\left\{
R_{\text{y}} \right\}\)</span> resources, corresponds to <span
class="math inline">\(L_{\text{subCH}}\)</span> contiguous sub-channels
and a slot in a set of slots <span
class="math inline">\(\{{t&#39;}_{y}^{SL}\}\)</span>, where <span
class="math inline">\(L_{\text{subCH}}\)</span> is the number of
sub-channels available for PSSCH/PSCCH transmission in a slot</p>
<p>- <span class="math inline">\(\left(
{t&#39;}_{0}^{SL},{t&#39;}_{1}^{SL},{t&#39;}_{2}^{SL},...
\right)\)</span> is a set of slots in a sidelink resource pool [6, TS
38.214]</p>
<p>- <span class="math inline">\(y_{0}\)</span> is an index of a slot
where the PSCCH with SCI format 1-A is transmitted.</p>
<p>A UE that transmits a PSCCH with SCI format 1-A using sidelink
resource allocation mode 1 [6, TS 38.214] sets</p>
<p>- the values of the frequency resource assignment field and the time
resource assignment field for the SCI format 1-A transmitted in the
<span class="math inline">\(m\)</span>-th resource for PSCCH/PSSCH
transmission provided by a dynamic grant or by a SL configured grant,
where <span class="math inline">\(m = \ \left\{ 1,\ldots,M
\right\}\)</span> and M is the total number of resources for PSCCH/PSSCH
transmission provided by a dynamic grant or the number of resources for
PSCCH/PSSCH transmission in a period provided by a SL configured grant
type 1 or SL configured grant type 2, as follows:</p>
<p>- the frequency resource assignment field and time resource
assignment field indicate the <span class="math inline">\(m\)</span>-th
to <span class="math inline">\(M\)</span>-th resources as described in
[6, TS 38.214].</p>
<p>For decoding of a SCI format 1-A, a UE may assume that a number of
bits provided by <em>sl</em>-<em>NumReservedBits</em> can have any value
as described in [4, TS 38.212].</p>
<h2 id="ue-procedure-for-reporting-harq-ack-on-uplink">16.5 UE procedure
for reporting HARQ-ACK on uplink</h2>
<p>A UE can be provided PUCCH resources or PUSCH resources [12, TS
38.331] to report HARQ-ACK information that the UE generates based on
HARQ-ACK information that the UE obtains from PSFCH receptions, or from
absence of PSFCH receptions. The UE reports HARQ-ACK information on the
primary cell of the PUCCH group, as described in clause 9, of the cell
where the UE monitors PDCCH for detection of DCI format 3_0.</p>
<p>For SL configured grant Type 1 or Type 2 PSSCH transmissions by a UE
within a time period provided by <em>sl-PeriodCG</em>, the UE generates
one HARQ-ACK information bit in response to the PSFCH receptions to
multiplex in a PUCCH transmission occasion that is after a last time
resource, in a set of time resources.</p>
<p>For PSSCH transmissions scheduled by a DCI format 3_0, a UE generates
HARQ-ACK information in response to PSFCH receptions to multiplex in a
PUCCH transmission occasion that is after a last time resource in a set
of time resources provided by the DCI format 3_0.</p>
<p>From a number of PSFCH reception occasions, the UE generates HARQ-ACK
information to report in a PUCCH or PUSCH transmission. The UE can be
indicated by a SCI format to perform one of the following and the UE
constructs a HARQ-ACK codeword with HARQ-ACK information, when
applicable</p>
<p>- for one or more PSFCH reception occasions associated with SCI
format 2-A with Cast type indicator field value of "10"</p>
<p>- generate HARQ-ACK information with same value as a value of
HARQ-ACK information the UE determines from the last PSFCH reception
from the number of PSFCH reception occasions corresponding to PSSCH
transmissions or, if the UE determines that a PSFCH is not received at
the last PSFCH reception occasion and ACK is not received in any of
previous PSFCH reception occasions, generate NACK</p>
<p>- for one or more PSFCH reception occasions associated with SCI
format 2-A with Cast type indicator field value of "01"</p>
<p>- generate ACK if the UE determines ACK from at least one PSFCH
reception occasion, from the number of PSFCH reception occasions
corresponding to PSSCH transmissions, in PSFCH resources corresponding
to every identity <span class="math inline">\(M_{\text{ID}}\)</span> of
the UEs that the UE expects to receive the PSSCH, as described in clause
16.3; otherwise, generate NACK</p>
<p>- for one or more PSFCH reception occasions associated with SCI
format 2-B or SCI format 2-A with Cast type indicator field value of
"11"</p>
<p>- generate ACK when the UE determines absence of PSFCH reception for
the last PSFCH reception occasion from the number of PSFCH reception
occasions corresponding to PSSCH transmissions; otherwise, generate
NACK</p>
<p>After a UE transmits PSSCHs and receives PSFCHs in corresponding
PSFCH resource occasions, the priority value of HARQ-ACK information is
same as the priority value of the PSSCH transmissions that is associated
with the PSFCH reception occasions providing the HARQ-ACK
information.</p>
<p>The UE generates a NACK when, due to prioritization, as described in
clause 16.2.4, the UE does not receive PSFCH in any PSFCH reception
occasion associated with a PSSCH transmission in a resource provided by
a DCI format 3_0 and the UE transmitted PSSCH in the resource or, for a
configured grant, in a resource provided in a single period and for
which the UE is provided a PUCCH resource to report HARQ-ACK information
and the UE transmitted PSSCH in the resource. The priority value of the
NACK is same as the priority value of the PSSCH transmission.</p>
<p>The UE generates a NACK when, due to prioritization as described in
clause 16.2.4, the UE does not transmit a PSSCH in any of the resources
provided by a DCI format 3_0 or, for a configured grant, in any of the
resources provided in a single period and for which the UE is provided a
PUCCH resource to report HARQ-ACK information. The priority value of the
NACK is same as the priority value of the PSSCH that was not transmitted
due to prioritization.</p>
<p>The UE generates an ACK if the UE does not transmit a PSCCH with a
SCI format 1-A scheduling a PSSCH in any of the resources provided by a
configured grant in a single period and for which the UE is provided a
PUCCH resource to report HARQ-ACK information. The priority value of the
ACK is same as the largest priority value among the possible priority
values for the configured grant.</p>
<p>The UE generates an ACK if the UE does not transmit a PSCCH with a
SCI format 1-A scheduling a PSSCH in any of the resources provided by a
DCI format 3_0 and for which the UE is provided a PUCCH resource to
report HARQ-ACK information. The priority value of the ACK is same as
the largest priority value among the possible priority values for the
dynamic grant.</p>
<p>For reporting HARQ-ACK information on uplink corresponding to one or
multiple PSSCH transmissions with a corresponding SCI format with the
field 'HARQ feedback enabled/disabled indicator' set to disabled, the UE
generates HARQ-ACK information with the contents instructed by higher
layer. The priority value of the HARQ-ACK information is same as the
priority value of the PSSCH transmission.</p>
<p>A UE does not expect to be provided PUCCH resources or PUSCH
resources to report HARQ-ACK information that start earlier than <span
class="math inline">\(T_{prep} =\)</span> <span class="math inline">\((N
+ 1) \bullet (2048 + 144) \bullet \kappa \bullet 2^{- \mu} \bullet
T_{c}\)</span> after the end of a last symbol of a last PSFCH reception
occasion, from a number of PSFCH reception occasions that the UE
generates HARQ-ACK information to report in a PUCCH or PUSCH
transmission, where</p>
<p>- <span class="math inline">\(\kappa\)</span> and <span
class="math inline">\(T_{c}\)</span> are defined in [4, TS 38.211]</p>
<p>- <span class="math inline">\(\mu = min(\mu_{SL},\mu_{UL})\)</span>,
where <span class="math inline">\(\mu_{SL}\)</span> is the SCS
configuration of the SL BWP and <span
class="math inline">\(\mu_{UL}\)</span> is the SCS configuration of the
active UL BWP on the primary cell</p>
<p>- <span class="math inline">\(N\)</span> is determined from <span
class="math inline">\(\mu\)</span> according to Table 16.5-1</p>
<p>Table 16.5-1: Values of <span
class="math inline">\(\mathbf{N}\)</span></p>
<table>
<colgroup>
<col style="width: 49%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr>
<th><span class="math display">\[\mathbf{\mu}\]</span></th>
<th><span class="math display">\[\mathbf{N}\]</span></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>14</td>
</tr>
<tr>
<td>1</td>
<td>18</td>
</tr>
<tr>
<td>2</td>
<td>28</td>
</tr>
<tr>
<td>3</td>
<td>32</td>
</tr>
</tbody>
</table>
<p>For DCI format 3_0, if present, the PSFCH-to-HARQ feedback timing
indicator field values map to values for a set of number of slots
provided by <em>sl-PSFCH-ToPUCCH</em> as defined in Table 16.5-2.</p>
<p>Table 16.5-2: Mapping of PSFCH-to-HARQ feedback timing indicator
field values to numbers of slots</p>
<table style="width:100%;">
<colgroup>
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 15%" />
<col style="width: 54%" />
</colgroup>
<tbody>
<tr>
<td colspan="3">PSFCH-to-HARQ feedback timing indicator</td>
<td>Number of slots <img src="media/image223.svg"
style="width:0.10417in;height:0.19792in" /></td>
</tr>
<tr>
<td>1 bit</td>
<td>2 bits</td>
<td>3 bits</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>'0'</td>
<td>'00'</td>
<td>'000'</td>
<td style="text-align: center;">1<sup>st</sup> value provided by
<em>sl-PSFCH-ToPUCCH</em></td>
</tr>
<tr>
<td>'1'</td>
<td>'01'</td>
<td>'001'</td>
<td style="text-align: center;">2<sup>nd</sup> value provided by
<em>sl-PSFCH-ToPUCCH</em></td>
</tr>
<tr>
<td></td>
<td>'10'</td>
<td>'010'</td>
<td style="text-align: center;">3<sup>rd</sup> value provided by
<em>sl-PSFCH-ToPUCCH</em></td>
</tr>
<tr>
<td></td>
<td>'11'</td>
<td>'011'</td>
<td style="text-align: center;">4<sup>th</sup> value provided by
<em>sl-PSFCH-ToPUCCH</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'100'</td>
<td style="text-align: center;">5<sup>th</sup> value provided by
<em>sl-PSFCH-ToPUCCH</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'101'</td>
<td style="text-align: center;">6<sup>th</sup> value provided by
<em>sl-PSFCH-ToPUCCH</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'110'</td>
<td style="text-align: center;">7<sup>th</sup> value provided by
<em>sl-PSFCH-ToPUCCH</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>'111'</td>
<td style="text-align: center;">8<sup>th</sup> value provided by
<em>sl-PSFCH-ToPUCCH</em></td>
</tr>
</tbody>
</table>
<p>With reference to slots for PUCCH transmissions and for a number of
PSFCH reception occasions ending in slot <span
class="math inline">\(n\)</span>, the UE provides the generated HARQ-ACK
information in a PUCCH transmission within slot <span
class="math inline">\(n + k\)</span>, subject to the overlapping
conditions in clause 9.2.5, where <span class="math inline">\(k\)</span>
is a number of slots indicated by a PSFCH-to-HARQ feedback timing
indicator field, if present, in a DCI format indicating a slot for PUCCH
transmission to report the HARQ-ACK information, or <span
class="math inline">\(k\)</span> is provided by
<em>sl-PSFCH-ToPUCCH</em> for a transmission scheduled by a DCI format
or for a SL configured grant type 2, or by
<em>sl-PSFCH-ToPUCCH-CG-Type1</em> for a SL configured grant type 1.
<span class="math inline">\(k = 0\)</span> corresponds to a last slot
for a PUCCH transmission that would overlap with the last PSFCH
reception occasion assuming that the start of the sidelink frame is same
as the start of the downlink frame [4, TS 38.211].</p>
<p>For a PSSCH transmission by a UE that is scheduled by a DCI format,
or for a SL configured grant Type 2 PSSCH transmission activated by a
DCI format, the DCI format indicates to the UE that a PUCCH resource is
not provided when a value of the PUCCH resource indicator field is zero
and a value of PSFCH-to-HARQ feedback timing indicator field, if
present, is zero. For a SL configured grant Type 2 PSSCH transmission
without a corresponding PDCCH, the DCI format activating the SL
configured grant Type 2 indicates to the UE that a PUCCH resource is not
provided when a value of the PUCCH resource indicator field is zero and
a value of PSFCH-to-HARQ feedback timing indicator field, if present, is
zero. For a SL configured grant Type 1 PSSCH transmission, a PUCCH
resource can be provided by <em>sl-N1PUCCH-AN</em> and
<em>sl-PSFCH-ToPUCCH-CG-Type1</em>. For transmission of HARQ-ACK
information corresponding only to a SL configured grant Type 2 PSSCH
transmission, including the PSSCH transmission(s) associated with the
corresponding activation DCI format 3<u>_</u>0, a UE can be provided a
PUCCH resource by <em>sl-N1PUCCH-AN-Type2</em>. If a PUCCH resource is
not provided, the UE does not transmit a PUCCH with generated HARQ-ACK
information from PSFCH reception occasions.</p>
<p>For a PUCCH transmission with HARQ-ACK information, a UE determines a
PUCCH resource after determining a set of PUCCH resources from up to
four PUCCH resource sets provided by <em>sl-PUCCH-Config</em>, for <span
class="math inline">\(O_{UCI}\)</span> HARQ-ACK information bits, as
described in clause 9.2.1. The PUCCH resource determination is based on
a PUCCH resource indicator field [5, TS 38.212] in a last DCI format
3_0, excluding DCI format 3_0 for the SL configured grant Type 2
activation, among the DCI formats 3_0 that have a value of a
PSFCH-to-HARQ feedback timing indicator field indicating a same slot for
the PUCCH transmission, that the UE detects and for which the UE
transmits corresponding HARQ-ACK information in the PUCCH where, for
PUCCH resource determination, detected DCI formats are indexed in an
ascending order across PDCCH monitoring occasion indexes.</p>
<p>The PUCCH resource indicator field values map to values of a set of
PUCCH resource indexes, as described in clause 9.2.3.</p>
<p>A UE transmits a PUCCH with HARQ-ACK information using PUCCH format 0
or PUCCH format 1 or PUCCH format 2 or PUCCH format 3 or PUCCH format 4
as described in clause 9.2.3.</p>
<p>A UE does not expect to multiplex HARQ-ACK information for more than
one SL configured grants in a same PUCCH.</p>
<p>A priority value of a PUCCH transmission with one or more sidelink
HARQ-ACK information bits is the smallest priority value for the one or
more HARQ-ACK information bits.</p>
<p>In the following, the CRC for DCI format 3_0 is scrambled with a
SL-RNTI or a SL-CS-RNTI.</p>
<h3 id="type-1-harq-ack-codebook-determination-1">16.5.1 Type-1 HARQ-ACK
codebook determination </h3>
<p>This clause applies if the UE is configured with
<em>pdsch-HARQ-ACK-Codebook = semi-static</em>.</p>
<p>If a UE is configured a SL configured grant Type 1, and the UE is
configured a SL configured grant Type 2 or to monitor PDCCH for
detection of DCI format 3_0 with CRC scrambled by SL-RNTI or SL-CS-RNTI,
and the UE is provided a set of slot timing values <span
class="math inline">\(K_{1}\)</span> associated with a SL BWP by
<em>sl-PSFCH-ToPUCCH</em> and <em>sl-PSFCH-ToPUCCH-CG-Type1</em>, the
<em>sl-PSFCH-ToPUCCH-CG-Type1</em> is one of
<em>sl-PSFCH-ToPUCCH</em>.</p>
<p>A UE reports HARQ-ACK information for PSSCH transmissions with
corresponding PSFCH reception occasions in slot <span
class="math inline">\(n\)</span> only in a HARQ-ACK codebook that the UE
includes in a PUCCH or PUSCH transmission in slot <span
class="math inline">\(n + k\)</span>, where <span
class="math inline">\(k\)</span> is a number of slots indicated by the
PSFCH-to-HARQ feedback timing indicator field in a DCI format 3_0
scheduling the PSSCH transmissions, or by a value of PSFCH-to-HARQ
feedback timing indicator field in a DCI format 3_0 activating a SL
configured grant Type-2 transmission, or by a value of
<em>sl-PSFCH-ToPUCCH-CG-Type1</em> for a SL configured grant Type-1. If
the UE reports HARQ-ACK information for the PSSCH transmissions with
corresponding PSFCH reception occasions in a slot other than slot <span
class="math inline">\(n + k\)</span>, the UE sets a value for each
corresponding HARQ-ACK information bit to NACK.</p>
<p>If a UE reports HARQ-ACK information in a PUCCH only for</p>
<p>- PSFCH reception occasions associated with PSSCH transmissions
scheduled by a DCI format 3_0 with counter SAI field value of 1, or</p>
<p>- PSFCH reception occasions associated with PSSCH transmissions
corresponding to a SL configured grant</p>
<p>within a set <span class="math inline">\(M_{A}\)</span> of occasions
for candidate PSSCH transmissions with corresponding PSFCH reception
occasions as determined in clause 16.5.1.1, the UE determines a HARQ-ACK
codebook only for the PSFCH reception occasion associated with PSSCH
transmissions scheduled by DCI format 3_0 or only for the PSFCH
reception occasion associated with PSSCH transmissions corresponding to
a SL configured grant according to corresponding set <span
class="math inline">\(M_{A}\)</span> of occasions, where a value of a
counter SAI in DCI format 3_0 is according to Table 16.5.2.1-1.
Otherwise, the procedures in clause 16.5.1.1 and in clause 16.5.1.2 for
a HARQ-ACK codebook determination apply.</p>
<h4
id="type-1-harq-ack-codebook-in-physical-uplink-control-channel-1">16.5.1.1
Type-1 HARQ-ACK codebook in physical uplink control channel</h4>
<p>For a SL BWP on a carrier, and an active UL BWP on the primary cell,
as described in clause 12, a UE determines a set <span
class="math inline">\(M_{A}\)</span> of occasions for candidate PSSCH
transmissions with corresponding PSFCH reception occasions for which the
UE can multiplex corresponding HARQ-ACK information in a PUCCH
transmission in slot <span class="math inline">\(n_{U}\)</span>. The
determination is based on:</p>
<p>a) a set of slot timing values <span
class="math inline">\(K_{1}\)</span> associated with the SL BWP where
<span class="math inline">\(K_{1}\)</span> is provided by
<em>sl-PSFCH-ToPUCCH</em> for DCI format 3_0 or by
<em>sl-PSFCH-ToPUCCH-CG-Type1</em></p>
<p>b) the ratio <span class="math inline">\(2^{\mu_{\text{SL}} -
\mu_{\text{UL}}}\)</span> between the sidelink SCS configuration <span
class="math inline">\(\mu_{\text{SL}}\)</span> and the uplink SCS
configuration <span class="math inline">\(\mu_{UL}\)</span> provided by
<em>subcarrierSpacing</em> in <em>SL-BWP-Config</em> or
<em>SL-BWP-ConfigCommon</em> and <em>BWP-Uplink</em> for the SL BWP and
the active UL BWP, respectively</p>
<p>c) a configured sidelink resource pool bitmap</p>
<p>d) a value of a period of PSFCH transmission occasion resources for a
sidelink resource pool provided by a respective
<em>sl-PSFCH-Period</em></p>
<p>For the set of slot timing values <span
class="math inline">\(K_{1}\)</span>, the UE determines a set <span
class="math inline">\(M_{A}\)</span> of occasions for candidate PSSCH
transmissions with corresponding PSFCH reception occasions according to
the following pseudo-code.</p>
<p>Set <span class="math inline">\(j = 0\)</span> - index of occasion
for candidate PSSCH transmissions with corresponding PSFCH reception
occasions</p>
<p>Set <span class="math inline">\(M_{A} = \varnothing\)</span></p>
<p>Set C<span class="math inline">\(\left( K_{1} \right)\)</span> to the
cardinality of set <span class="math inline">\(K_{1}\)</span></p>
<p>Set <span class="math inline">\(k = 0\)</span> – index of slot timing
values <span class="math inline">\(K_{1,k}\)</span>, in descending order
of the slot timing values, in set <span
class="math inline">\(K_{1}\)</span></p>
<p>Set <span class="math inline">\(N_{PSFCH}\)</span> to the value of
the period of PSFCH transmission occasion resources for the sidelink
resource pool</p>
<p>while <span class="math inline">\(k &lt;\)</span> C<span
class="math inline">\(\left( K_{1} \right)\)</span></p>
<p>if <span class="math inline">\({mod}\mspace{6mu}\left( n_{U} -
K_{1,k} + 1,\max\left( 2^{\mu_{\text{UL}} - \mu_{\text{SL}}},1 \right)
\right) = 0\)</span></p>
<p>Set <span class="math inline">\(n_{S} = 0\)</span> – index of a SL
slot within an UL slot</p>
<p>while <span class="math inline">\(n_{S} &lt; \max\left(
2^{\mu_{\text{SL}} - \mu_{\text{UL}}},1 \right)\)</span></p>
<p>if slot <span class="math inline">\(n_{U}\)</span> starts at a same
time as or after a slot for an active UL BWP change on the serving cell
of PUCCH transmission and slot <span class="math inline">\(\left\lfloor
\left( n_{U} - K_{1,k} \right) \cdot 2^{\mu_{\text{SL}} -
\mu_{\text{UL}}} \right\rfloor + n_{S}\)</span> is before the slot for
the active UL BWP change on the serving cell of PUCCH transmission</p>
<p><span class="math inline">\(n_{S} = n_{S} + 1\)</span>;</p>
<p>else</p>
<blockquote>
<p>if slot <span class="math inline">\(\left\lfloor \left( n_{U} -
K_{1,k} \right) \cdot 2^{\mu_{\text{SL}} - \mu_{\text{UL}}}
\right\rfloor + n_{S}\)</span> belongs to the sidelink resource pool and
includes PSFCH resources as indicated by a sidelink resource pool bitmap
and <em>sl-PSFCH-Period</em>, where <span
class="math inline">\(K_{1,k}\)</span> is the <em>k</em>-th slot timing
value in set <span class="math inline">\(K_{1}\)</span></p>
</blockquote>
<p>Set <span class="math inline">\(n_{F} = 0\)</span> – index of a SL
slot within an PSFCH period</p>
<p>while <span class="math inline">\(n_{F} &lt; N_{PSFCH}\)</span></p>
<blockquote>
<p><span class="math inline">\(M_{A} = M_{A} \cup j\)</span>;</p>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
<p><span class="math inline">\(n_{F} = n_{F} + 1\)</span>;</p>
</blockquote>
<p>end while</p>
<p>end if</p>
<p><span class="math inline">\(n_{S} = n_{S} + 1\)</span>;</p>
<p>end if</p>
<p>end while</p>
<p>end if</p>
<p><span class="math inline">\(k = k + 1\)</span>;</p>
<p>end while</p>
<p>The cardinality of the set <span class="math inline">\(M_{A}\)</span>
defines a total number <span class="math inline">\(M\)</span> of
occasions for candidate PSSCH transmissions with corresponding PSFCH
reception occasions corresponding to the HARQ-ACK information bits. A UE
determines <span
class="math inline">\({\widetilde{o}}_{0}^{ACK},{\widetilde{o}}_{1}^{ACK},\ldots,{\widetilde{o}}_{O_{ACK}
- 1}^{ACK}\)</span> HARQ-ACK information bits, for a total number of
<span class="math inline">\(O_{\text{ACK}}\)</span> HARQ-ACK information
bits as <span class="math inline">\({\widetilde{o}}_{j}^{ACK}\)</span> =
HARQ-ACK information bit for candidate PSSCH transmission with index
<span class="math inline">\(j\)</span> with corresponding PSFCH
reception, for <span class="math inline">\(0\  \leq j &lt; M\)</span>,
as described in clause 16.5. If the UE does not transmit a PSSCH in an
occasion for candidate PSSCH transmission with corresponding PSFCH
reception occasion, due to the UE not detecting a corresponding DCI
format 3_0, the UE generates a NACK value for the occasion for candidate
PSSCH transmission with corresponding PSFCH reception occasion.</p>
<p>If <span class="math inline">\(O_{\text{ACK}} \leq 11\)</span>, the
UE determines a number of HARQ-ACK information bits <span
class="math inline">\(n_{HARQ - ACK}\)</span> for obtaining a
transmission power for a PUCCH, as described in clause 7.2.1, as <span
class="math inline">\(n_{\text{HARQ-ACK}} = \sum_{m = 0}^{M -
1}N_{m}^{received}\)</span> where <span
class="math inline">\(N_{m}^{\text{received}}\)</span> is a number of
HARQ-ACK information bits determined for corresponding PSSCH
transmissions with corresponding PSFCH reception occasions in PSFCH
reception occasion <span class="math inline">\(m\)</span>.</p>
<h4
id="type-1-harq-ack-codebook-in-physical-uplink-shared-channel-1">16.5.1.2
Type-1 HARQ-ACK codebook in physical uplink shared channel</h4>
<p>If a UE would multiplex HARQ-ACK information in a PUSCH transmission
that is not scheduled by a DCI format or is scheduled by a DCI format
without an SAI field, then</p>
<p>- if the UE</p>
<p>- has not received any PDCCH with a DCI format 3_0 scheduling PSSCH
transmissions with corresponding PSFCH reception occasions that the UE
transmits corresponding HARQ-ACK information in the PUSCH, based on a
value of a respective PSFCH-to-HARQ feedback timing indicator field in a
DCI format scheduling the PSSCH transmissions or on the value of
PSFCH-to-HARQ feedback timing indicator field in a DCI format 3_0
activating a SL configured grant Type 2 transmission, or</p>
<p>- has not been provided PSSCH resources with corresponding PSFCH
reception occasions that the UE transmits corresponding HARQ-ACK
information based on the value of <em>sl-PSFCH-ToPUCCH-CG-Type1</em> for
a SL configured grant Type 1,</p>
<p>then in any of the set <span class="math inline">\(M_{A}\)</span> of
occasions for candidate PSSCH transmissions with corresponding PSFCH
reception occasions, as described in clause 16.5.1.1, the UE does not
multiplex HARQ-ACK information in the PUSCH transmission;</p>
<p>- else the UE generates the HARQ-ACK codebook as described in clause
16.5.1.1, unless the UE generates HARQ-ACK information only for</p>
<p>- PSFCH reception occasions associated with PSSCH transmissions
corresponding to a SL configured grant, or</p>
<p>- PSFCH reception occasions associated with PSSCH transmissions that
are scheduled by DCI format 3_0 with a counter SAI field value of 1</p>
<p>in the set <span class="math inline">\(M_{A}\)</span> of occasions
for candidate PSSCH transmissions with corresponding PSFCH reception
occasions, in which case the UE generates HARQ-ACK information only for
the PSFCH reception occasions as described in clause 16.5.1.</p>
<p>A UE sets to NACK value in the HARQ-ACK codebook any HARQ-ACK
information corresponding to PSFCH reception occasions associated with
PSSCH transmissions scheduled by a DCI format 3_0 that the UE detects in
a PDCCH monitoring occasion that starts after a PDCCH monitoring
occasion where the UE detects a DCI format scheduling the PUSCH
transmission.</p>
<p>If a UE multiplexes HARQ-ACK information in a PUSCH transmission that
is scheduled by a DCI format that includes a SAI field, the UE generates
the HARQ-ACK codebook as described in clause 16.5.1.1 when a value of
the SAI field in the DCI format is <span class="math inline">\(V_{T -
\text{SAI}}^{\text{UL}} = 1\)</span>. The UE does not generate a
HARQ-ACK codebook for multiplexing in the PUSCH transmission when <span
class="math inline">\(V_{T - \text{SAI}}^{\text{UL}} = 0\)</span> unless
the UE generates HARQ-ACK information only for</p>
<p>- PSFCH reception occasions associated with PSSCH transmissions
corresponding to a SL configured grant, or</p>
<p>- PSFCH reception occasions associated with PSSCH transmissions that
are scheduled by a DCI format 3_0 with a counter SAI field value of
1,</p>
<p>in the set <span class="math inline">\(M_{A}\)</span> of occasions
for candidate PSSCH transmissions with corresponding PSFCH reception
occasions as described in clause 16.5.1.</p>
<p><span class="math inline">\(V_{T - \text{SAI}}^{\text{UL}} =
0\)</span> if the SAI field in the DCI format is set to '0'; otherwise,
<span class="math inline">\(V_{T - \text{SAI}}^{\text{UL}} =
1\)</span>.</p>
<h3 id="type-2-harq-ack-codebook-determination-1">16.5.2 Type-2 HARQ-ACK
codebook determination </h3>
<p>This clause applies if the UE is configured with
<em>pdsch-HARQ-ACK-Codebook = dynamic</em>.</p>
<h4
id="type-2-harq-ack-codebook-in-physical-uplink-control-channel-1">16.5.2.1
Type-2 HARQ-ACK codebook in physical uplink control channel</h4>
<p>A UE determines monitoring occasions for PDCCH with DCI format 3_0
for scheduling PSSCH transmissions with associated PSFCH reception
occasions on an active DL BWP of a serving cell <span
class="math inline">\(c\)</span>, as described in clause 10.1, and for
which the UE transmits HARQ-ACK information in a same PUCCH in slot
<span class="math inline">\(n\)</span> based on</p>
<p>- PSFCH-to-HARQ feedback timing indicator field values, or a value
provided by <em>sl-PSFCH-ToPUCCH-CG-Type1</em>, for PUCCH transmission
with HARQ-ACK information in slot <span class="math inline">\(n\)</span>
in response to PSFCH receptions;</p>
<p>- time gap field in DCI format 3_0 for scheduling PSSCH transmissions
with associated PSFCH receptions;</p>
<p>- time resource assignment in DCI format 3_0 for scheduling PSSCH
transmissions with associated PSFCH receptions;</p>
<p>- a configured sidelink resource pool bitmap;</p>
<p>- a value of a period of PSFCH resources provided in
<em>sl-PSFCH-Period</em>;</p>
<p>- a value of a minimum time gap provided in
<em>sl-MinTimeGapPSFCH</em>.</p>
<p>The set of PDCCH monitoring occasions for DCI format 3_0 for
scheduling PSSCH transmissions with associated PSFCH reception occasions
is defined as the PDCCH monitoring occasions in the active DL BWP of the
configured serving cell, indexed in ascending order of start time of the
associated search space sets. The cardinality of the set of PDCCH
monitoring occasions defines a total number <span
class="math inline">\(M\)</span> of PDCCH monitoring occasions. A UE is
not expected to receive a DCI format 3_0 with CRC scrambled by SL-RNTI
and a DCI format 3_0 with CRC scrambled by SL-CS-RNTI for scheduling
retransmission corresponding to a SL configured grant Type 1 or a
sidelink configured grant Type 2 simultaneously in a same monitoring
occasion.</p>
<p>A value of a counter sidelink assignment indicator (SAI) field in DCI
format 3_0, excluding DCI format 3_0 for the SL configured grant Type 2
activation, denotes an accumulative number of PDCCH monitoring occasions
where PSSCH transmissions with associated PSFCH receptions are
scheduled, up to a current PDCCH monitoring occasion, in ascending order
of PDCCH monitoring occasion index <span
class="math inline">\(m\)</span>, where <span class="math inline">\(0
\leq m &lt; M\)</span>.</p>
<p>Denote by <span class="math inline">\(V_{C -
\text{SAI},m}^{\text{SL}}\)</span> the value of the counter SAI in DCI
format 3_0 in PDCCH monitoring occasion <span
class="math inline">\(m\)</span> according to Table 16.5.2.1-1.</p>
<p>If the UE transmits HARQ-ACK information in a PUCCH in slot <span
class="math inline">\(n\)</span>, the UE determines the <span
class="math inline">\({\widetilde{o}}_{0}^{ACK},{\widetilde{o}}_{1}^{ACK},\ldots,{\widetilde{o}}_{O_{ACK}
- 1}^{ACK}\)</span>, for a total number of <span
class="math inline">\(O_{ACK}\)</span> HARQ-ACK information bits,
according to the following pseudo-code:</p>
<p>Set <span class="math inline">\(m = 0\)</span> – PDCCH with DCI
format 3_0 monitoring occasion index: lower index corresponds to earlier
PDCCH with DCI format 3_0 monitoring occasion</p>
<p>Set <span class="math inline">\(j = 0\)</span></p>
<p>Set <span class="math inline">\(V_{temp} = 0\)</span></p>
<p>Set <span class="math inline">\(V_{s} = \varnothing\)</span></p>
<p>Set <span class="math inline">\(M\)</span> to the number of PDCCH
monitoring occasions</p>
<p>while <span class="math inline">\(m &lt; M\)</span></p>
<p>if PDCCH monitoring occasion <span class="math inline">\(m\)</span>
is before an active UL BWP change on the serving cell of PUCCH
transmission</p>
<p><span class="math inline">\(m = M\)</span>;</p>
<p>else</p>
<p>if there is a PSFCH reception occasion associated with a PSSCH
transmission scheduled by a DCI format in PDCCH monitoring occasion
<span class="math inline">\(m\)</span></p>
<p>if <span class="math inline">\(V_{C - \text{SAI},m}^{\text{SL}} \leq
V_{temp}\)</span></p>
<blockquote>
<p><span class="math inline">\(j = j + 1\)</span>;</p>
</blockquote>
<p>end if</p>
<p><span class="math inline">\(V_{temp} = V_{C -
\text{SAI},m}^{\text{SL}}\)</span></p>
<p><span class="math inline">\({\widetilde{o}}_{4j + V_{C - SAI,m}^{SL}
- 1}^{ACK}\)</span> = HARQ-ACK information bit</p>
<p><span class="math inline">\(V_{s} = V_{s} \cup \left\{ 4j + V_{C -
\text{SAI},m}^{\text{SL}} - 1 \right\}\)</span></p>
<p>end if</p>
<p>end if</p>
<p><span class="math inline">\(m = m + 1\)</span>;</p>
<p>end while</p>
<p><span class="math inline">\(O_{ACK} = 4 \cdot j +
V_{temp}\)</span></p>
<p><span class="math inline">\({\widetilde{o}}_{i}^{ACK} = NACK\)</span>
for any <span class="math inline">\(i\  \in \left\{ 0,1,\ldots,O_{ACK} -
1 \right\}\backslash V_{s}\ \)</span></p>
<p>if a SL configured grant Type 1 is configured for a UE, or a SL
configured grant Type 2 is configured and activated for a UE, and the SL
configured grant provides a grant for PSSCH transmissions, including the
PSSCH transmission(s) associated with the corresponding activation DCI
format 3_0, with PSFCH reception occasions in a slot <span
class="math inline">\(n - K_{1}\)</span>, where <span
class="math inline">\(K_{1}\)</span> is the <span
class="math inline">\(k\)</span> value for the SL configured grant as
described in clause 16.5</p>
<p><span class="math inline">\(O_{ACK} = O_{ACK} + 1\)</span>;</p>
<p><span class="math inline">\({\widetilde{o}}_{O_{ACK} -
1}^{ACK}\)</span>= HARQ-ACK information bit associated with the PSFCH
reception occasions associated with the PSSCH transmissions scheduled by
the SL configured grant</p>
<p>end if</p>
<p>If <span class="math inline">\(O_{\text{ACK}} \leq 11\)</span>, the
UE determines a number of HARQ-ACK information bits <span
class="math inline">\(n_{HARQ - ACK}\)</span> for obtaining a
transmission power for a PUCCH, as described in clause 7.2.1, as</p>
<p><span class="math display">\[n_{\text{HARQ-ACK}} = \left(
V_{\text{SAI},m_{\text{last}}}^{\text{SL}} - U_{\text{SAI}}
\right){mod}4 + \sum_{m = 0}^{M - 1}N_{m}^{received} +
N_{CG}\]</span></p>
<p>where</p>
<p>- <span
class="math inline">\(V_{\text{SAI},m_{\text{last}}}^{\text{SL}}\)</span>
is a value of a counter SAI field in a last DCI format 3_0, excluding
the DCI format 3_0 activating a SL configured grant, scheduling PSSCH
transmissions associated with PSFCH reception occasions that the UE
detects within the <span class="math inline">\(M\)</span> PDCCH
monitoring occasions</p>
<p>- <span
class="math inline">\(V_{\text{SAI},m_{\text{last}}}^{\text{SL}} =
0\)</span> if the UE does not detect any DCI format 3_0, excluding the
DCI format 3_0 activating a SL configured grant, scheduling PSSCH
transmissions associated with PSFCH reception occasions in any of the
<span class="math inline">\(M\)</span> PDCCH monitoring occasions</p>
<p>- <span class="math inline">\(U_{\text{SAI}}\)</span> is a total
number of DCI format 3_0, excluding the DCI format 3_0 activating a SL
configured grant, scheduling PSSCH transmissions associated with PSFCH
reception occasions, that the UE detects within the <span
class="math inline">\(M\)</span> PDCCH monitoring occasions. <span
class="math inline">\(U_{\text{SAI}} = 0\)</span> if the UE does not
detect any DCI format 3_0, excluding the DCI format 3_0 activating a SL
configured grant, scheduling PSSCH transmissions with associated PSFCH
reception occasions in any of the <span class="math inline">\(M\)</span>
PDCCH monitoring occasions</p>
<p>- <span class="math inline">\(N_{m}^{\text{received}}\)</span> is a
number of DCI format 3_0, excluding the DCI format 3_0 activating a SL
configured grant, scheduling PSSCH transmissions with associated PSFCH
reception occasions that the UE detects in PDCCH monitoring occasion
<span class="math inline">\(m\)</span></p>
<p>- <span class="math inline">\(N_{\text{CG}}\)</span> is a number of
SL configured grants for which the UE transmits corresponding HARQ-ACK
information in a same PUCCH as for HARQ-ACK information corresponding to
PSFCH reception occasions associated with PSSCH transmissions scheduled
by a dynamic grant within the <span class="math inline">\(M\)</span>
PDCCH monitoring occasions</p>
<p>Table 16.5.2.1-1: Value of counter SAI in DCI format 3_0</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 19%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr>
<th>SAI<br />
MSB, LSB</th>
<th><span class="math inline">\(\mathbf{V}_{\mathbf{C -
S}\text{AI}}^{\text{SL}}\)</span></th>
<th>Number of PDCCH monitoring occasions in which DCI format 3_0
scheduling PSSCH transmissions with corresponding PSFCH reception
occasions is present, denoted as <span
class="math inline">\(\mathbf{Y}\)</span> and <span
class="math inline">\(\mathbf{Y \geq 1}\)</span></th>
</tr>
</thead>
<tbody>
<tr>
<td>0,0</td>
<td>1</td>
<td><span class="math display">\[(Y - 1)mod4 + 1 = 1\]</span></td>
</tr>
<tr>
<td>0,1</td>
<td>2</td>
<td><span class="math display">\[(Y - 1)mod4 + 1 = 2\]</span></td>
</tr>
<tr>
<td>1,0</td>
<td>3</td>
<td><span class="math display">\[(Y - 1)mod4 + 1 = 3\]</span></td>
</tr>
<tr>
<td>1,1</td>
<td>4</td>
<td><span class="math display">\[(Y - 1)mod4 + 1 = 4\]</span></td>
</tr>
</tbody>
</table>
<h4
id="type-2-harq-ack-codebook-in-physical-uplink-shared-channel-1">16.5.2.2
Type-2 HARQ-ACK codebook in physical uplink shared channel</h4>
<p>If a UE would multiplex HARQ-ACK information in a PUSCH transmission
that is not scheduled by a DCI format or is scheduled by a DCI format
without an SAI field, then</p>
<p>- if the UE</p>
<p>- has not received any PDCCH within the monitoring occasions for DCI
format 3_0 for scheduling PSSCH with corresponding PSFCH reception
occasions on any serving cell, and</p>
<p>- does not have HARQ-ACK information in response to a PSSCH
transmission with corresponding PSFCH reception occasions associated
with a SL configured grant to multiplex in the PUSCH, as described in
clause 16.5.2.1,</p>
<blockquote>
<p>the UE does not multiplex HARQ-ACK information in the PUSCH
transmission;</p>
</blockquote>
<p>- else, the UE generates and multiplexes in the PUSCH transmission
the HARQ-ACK codebook as described in clause 16.5.2.1.</p>
<p>If a UE multiplexes HARQ-ACK information in a PUSCH transmission that
is scheduled by a DCI format that includes a SAI field, the UE generates
the HARQ-ACK codebook as described in clause 16.5.2.1, with the
following modifications:</p>
<p>- For the pseudo-code for the HARQ-ACK codebook generation in clause
16.5.2.1, after the completion of the <span
class="math inline">\(m\)</span> loop, the UE sets <span
class="math inline">\(V_{temp} = V_{\text{T-SAI}}^{\text{UL}}\)</span>
where <span class="math inline">\(V_{\text{T-SAI}}^{\text{UL}}\)</span>
is the value of the SAI field in the DCI format according to Table
16.5.2.2-1.</p>
<p>If a UE</p>
<p>- is scheduled for a PUSCH transmission by a DCI format that includes
a SAI field with value <span
class="math inline">\(V_{\text{T-SAI}}^{\text{UL}} = 4\)</span>, and</p>
<p>- has not received any PDCCH within the monitoring occasions for
PDCCH with DCI format 3_0 for scheduling PSSCH with corresponding PSFCH
reception occasions on a serving cell, and</p>
<p>- does not have HARQ-ACK information in response to PSFCH reception
occasions associated with a SL configured grant to multiplex in the
PUSCH, as described in clause 16.5.2.1,</p>
<p>the UE does not multiplex HARQ-ACK information in the PUSCH
transmission.</p>
<p>Table 16.5.2.2-1: Value of SAI</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 19%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr>
<th>SAI<br />
MSB, LSB</th>
<th><span
class="math inline">\(\mathbf{V}_{\text{T-SAI}}^{\text{UL}}\)</span></th>
<th>Number of PDCCH monitoring occasions in which DCI format 3_0
scheduling PSSCH transmissions with corresponding PSFCH reception
occasions is present, denoted as <span
class="math inline">\(\mathbf{X}\)</span> and <span
class="math inline">\(\mathbf{X \geq 1}\)</span></th>
</tr>
</thead>
<tbody>
<tr>
<td>0,0</td>
<td>1</td>
<td><span class="math display">\[(X - 1)mod4 + 1 = 1\]</span></td>
</tr>
<tr>
<td>0,1</td>
<td>2</td>
<td><span class="math display">\[(X - 1)mod4 + 1 = 2\]</span></td>
</tr>
<tr>
<td>1,0</td>
<td>3</td>
<td><span class="math display">\[(X - 1)mod4 + 1 = 3\]</span></td>
</tr>
<tr>
<td>1,1</td>
<td>4</td>
<td><span class="math display">\[(X - 1)mod4 + 1 = 4\]</span></td>
</tr>
</tbody>
</table>
<h2 id="ue-procedure-for-lte-sidelink-transmission">16.6 UE procedure
for LTE sidelink transmission</h2>
<p>If the UE detects a DCI format 3_1 with CRC scrambled by SL
Semi-Persistent Scheduling V-RNTI in slot <span
class="math inline">\(n\)</span>, the DCI format 3_1 activates or
releases an LTE sidelink SPS configuration that is indicated by a SL SPS
configuration index field [5, TS 38.212]. If the DCI format 3_1
activates an SL SPS configuration, the UE procedure for transmitting a
PSCCH and a PSSCH is as described in [13, TS 36.213] except that a
transmission starts no earlier than <span class="math inline">\(T_{DCI}
- \frac{N_{TA}}{2} \times T_{C} \times 10^{3} + X + (4 + m)\)</span> ms,
where <span class="math inline">\(T_{DCI}\)</span> is a start time of
slot <span class="math inline">\(n\)</span>, <span
class="math inline">\(N_{TA}\)</span> and <span
class="math inline">\(T_{C}\)</span> are defined in [4, TS 38.211],
<span class="math inline">\(X\)</span> is a value indicated by a Timing
offset field in DCI format 3_1, and <span
class="math inline">\(m\)</span> is a value indicated by SL index field
in DCI format 3_1 if the SL index field is present; otherwise, <span
class="math inline">\(m = 0\)</span>.</p>
<h2 id="operation-for-in-device-coexistence">16.7 Operation for
in-device coexistence</h2>
<p>If a UE would transmit or receive a first channel/signal using E-UTRA
radio access and a second channel/signal using NR radio access, when</p>
<p>- the first channel/signal and the second channel/signal are
time-division multiplexed, and</p>
<p>- the UE knows the frame indexes of the first channel/signal and the
frame indexes of the second channel/signal,</p>
<p>the UE transmits or receives each channel/signal so that the subframe
boundary of the second channel/signal is aligned with the subframe
boundary of the first channel/signal where the subframe boundary
alignment is achieved by UE implementation means.</p>
<h1 id="ue-with-reduced-capabilities">17 UE with reduced
capabilities</h1>
<p>A UE with reduced capabilities (RedCap UE) supports all Layer-1 UE
features that are mandatory without capability signalling, unless stated
otherwise.</p>
<h2 id="redcap-ue-procedures">17.1 RedCap UE procedures</h2>
<p>Procedures for a RedCap UE are same as described for a UE in all
other clauses of this document unless stated otherwise. In this clause,
the term 'UE' refers to a RedCap UE.</p>
<p>A UE expects the initial DL BWP and the active DL BWP after the UE
(re)establishes dedicated RRC connection to be smaller than or equal to
the maximum DL bandwidth that the UE supports. A UE can be provided a DL
BWP by <em>initialDownlinkBWP-RedCap</em> in
<em>DownlinkConfigCommonSIB</em>, and an UL BWP by
<em>initialUplinkBWP-RedCap</em> in <em>UplinkConfigCommonSIB</em>. If
<em>initialUplinkBWP</em> in <em>UplinkConfigCommonSIB</em> indicates an
UL BWP that is larger than a maximum UL BWP that a UE supports, the UE
expects to be provided an UL BWP by <em>initialUplinkBWP-RedCap</em> in
<em>UplinkConfigCommonSIB</em> that is smaller than or equal to the
maximum UL bandwidth that the UE supports.</p>
<p>For unpaired spectrum operation, a RedCap UE does not expect to
receive a configuration where the center frequency for an initial DL BWP
in which the UE is configured to monitor Type1-PDCCH CSS set, or a CSS
set provided by <em>sdt-SearchSpace</em> for random-access based PUSCH
transmission as described in clause 19.2, is different than the center
frequency for an initial UL BWP in which the RedCap UE may transmit
Msg1/Msg3 or MsgA.</p>
<p>A UE can be provided by <em>BWP-DownlinkDedicated</em> a DL BWP,
other than the initial DL BWP. A UE can be provided by
<em>BWP-UplinkDedicated</em> an UL BWP, other than the initial UL BWP,
that is smaller than or equal to the maximum UL bandwidth that the UE
supports.</p>
<p>If a UE is provided an UL BWP by <em>initialUplinkBWP-RedCap</em> in
<em>UplinkConfigCommonSIB</em> and is provided
<em>rach-ConfigCommon</em> or <em>msgA-ConfigCommon</em> in
<em>BWP-UplinkCommon</em> for the UL BWP, the UE uses corresponding
parameters to perform the procedures in clauses 8.1, 8.1A, and 8.3;
otherwise, the UE uses corresponding parameters from
<em>rach-ConfigCommon</em> or <em>msgA-ConfigCommon</em> in
<em>BWP-UplinkCommon</em> for the UL BWP provided by
<em>initialUplinkBWP</em>.</p>
<p>If a UE is provided <em>initialUplinkBWP-RedCap</em> in
<em>UplinkConfigCommonSIB</em> and does not have dedicated PUCCH
resource configuration, the UE transmits PUCCH with HARQ-ACK information
as described in clause 9.2.1 using a PUCCH resource set provided by
<em>pucch-ResourceCommonRedCap</em>, except that frequency hopping for
the PUCCH transmission is disabled if <em>intra-SlotFH</em> is present
in <em>PUCCH-ConfigCommon</em>. If frequency hopping of the PUCCH
transmission is disabled then, for the PUCCH transmission, the UE
determines the initial cyclic shift index in the set of initial cyclic
shift indexes as <span
class="math inline">\(r_{\text{PUCCH}}\text{mod}N_{CS}\)</span> and
determines the PRB index as</p>
<p>- <span class="math inline">\({RB}_{\text{BWP}}^{\text{offset}} +
{RB}_{\text{BWP}}^{\text{offset-add}} + \left\lfloor
\frac{r_{\text{PUCCH}}}{N_{CS}} \right\rfloor\)</span>, if
<em>intra-SlotFH</em> = '<em>fromLowerEdge</em>'</p>
<p>- <span class="math inline">\({N_{\text{BWP}}^{\text{size}} -
RB}_{\text{BWP}}^{\text{offset}} - {RB}_{\text{BWP}}^{\text{offset-add}}
- 1 - \left\lfloor \frac{r_{\text{PUCCH}}}{N_{CS}}
\right\rfloor\)</span>, otherwise</p>
<p>where <span
class="math inline">\({RB}_{\text{BWP}}^{\text{offset-add}}\)</span> is
provided by <em>additionalPRBOffset</em>, if provided; otherwise, <span
class="math inline">\({RB}_{\text{BWP}}^{\text{offset-add}} =
0.\)</span></p>
<p>If a UE is not provided <em>initialUplinkBWP-RedCap</em> in
<em>UplinkConfigCommonSIB</em> and does not have dedicated PUCCH
resource configuration, the UE transmits PUCCH with HARQ-ACK information
as described in clause 9.2.1 using a PUCCH resource set provided by
<em>pucch-ResourceCommonRedCap</em> if
<em>pucch-ResourceCommonRedCap</em> is present or by
<em>pucch-ResourceCommon</em> if <em>pucch-ResourceCommonRedCap</em> is
absent. For an initial DL BWP provided by
<em>initialDownlinkBWP-RedCap</em> in <em>DownlinkConfigCommonSIB</em>,
if a UE in RRC_IDLE state or in RRC_INACTIVE state monitors PDCCH
according to Type1-PDCCH CSS set and does not monitor PDCCH according to
Type2-PDCCH CSS set, the UE does not expect the initial DL BWP to
include SS/PBCH blocks and the CORESET with index 0.</p>
<p>For an active DL BWP not provided by <em>BWP-DownlinkDedicated</em>,
if a UE does not indicate a capability to operate in the active DL BWP
without receiving an SS/PBCH block, the UE in RRC_CONNECTED state
assumes that the active DL BWP includes the SS/PBCH blocks that the UE
used to obtain SIB1 and, for SS/PBCH block and CORESET multiplexing
pattern 1, the CORESET with index 0.</p>
<p>For an active DL BWP provided by <em>BWP-DownlinkDedicated</em>,
unless a UE indicates a capability to operate in the active DL BWP
without receiving an SS/PBCH block, the UE in RRC_CONNECTED state
assumes that the active DL BWP includes the SS/PBCH blocks that the UE
used to obtain SIB1 or the SS/PBCH blocks provided by
<em>NonCellDefiningSSB</em>. If the active DL BWP includes the SS/PBCH
blocks that the UE used to obtain SIB1, for SS/PBCH block and CORESET
multiplexing pattern 1, the UE expects the active DL BWP to include the
CORESET with index 0.</p>
<p>For a RedCap UE indicating a capability to use an initial DL BWP that
includes the SS/PBCH blocks provided by <em>NonCellDefiningSSB</em> for
PUSCH transmission in RRC_INACTIVE state, if the UE is provided
<em>NonCellDefiningSSB</em> in <em>ncd-SSB-RedCapInitialBWP-SDT</em>,
then during procedure of PUSCH transmission in RRC_INACTIVE state (as
described in clause 19) the UE uses the SS/PBCH blocks provided by
<em>NonCellDefiningSSB</em> for the purposes for which the UE would
otherwise have used the SS/PBCH blocks that the UE used to obtain
SIB1.</p>
<p>If the active DL BWP provided by <em>BWP-DownlinkDedicated</em>, or
the initial DL BWP during procedure of PUSCH transmission in
RRC_INACTIVE state (as described in clause 19), includes the SS/PBCH
blocks provided by <em>NonCellDefiningSSB</em>, these SS/PBCH blocks and
the SS/PBCH blocks that the UE used to obtain SIB1 have the same QCL
properties, if they have the same index<em>.</em></p>
<p>For a RedCap UE indicated presence of SS/PBCH blocks within an active
DL BWP by <em>NonCellDefiningSSB</em>, collision handling between
downlink receptions or uplink transmissions and the SS/PBCH blocks are
same as described for a UE indicated presence of SS/PBCH blocks by
<em>ssb-PositionsInBurst</em> in <em>SIB1</em> or in
<em>ServingCellConfigCommon</em> described in all other clauses, unless
otherwise stated.</p>
<p>For monitoring of a PDCCH candidate by a UE configured with
<em>NonCellDefiningSSB</em>, if the UE</p>
<p>- does not monitor PDCCH candidates in a Type0-PDCCH CSS set, and</p>
<p>- at least one RE for a PDCCH candidate overlaps with at least one RE
of a candidate SS/PBCH block corresponding to a SS/PBCH block index
provided by <em>NonCellDefiningSSB</em>,</p>
<p>the UE is not required to monitor the PDCCH candidate.</p>
<p>The SS/PBCH blocks in clause 8.1 for determining valid PRACH
occasions in unpaired spectrum correspond to the SS/PBCH blocks that the
UE used to obtain SIB1.</p>
<p>The SS/PBCH blocks in clause 8.1A for determining valid PUSCH
occasions in unpaired spectrum correspond to the SS/PBCH blocks that the
UE used to obtain SIB1.</p>
<p>The SS/PBCH blocks in clause 6.1.2.1 in [6, TS 38.214] and clause 8.3
for determining the <span
class="math inline">\(N_{\text{PUSCH}}^{\text{repeat}}\)</span> slots
for a PUSCH transmission in unpaired spectrum correspond to the SS/PBCH
blocks that the UE used to obtain SIB1.</p>
<p>The SS/PBCH blocks in clause 19.1 for determining valid PUSCH
occasions in unpaired spectrum correspond to the SS/PBCH blocks that the
UE used to obtain SIB1.</p>
<h2 id="half-duplex-ue-in-paired-spectrum">17.2 Half-Duplex UE in paired
spectrum</h2>
<p>A half-duplex UE (HD-UE) in paired spectrum is not capable of
simultaneous transmissions and receptions on a serving cell with paired
spectrum. This clause is applicable for communication of a HD-UE on a
serving cell with paired spectrum. Procedures for a HD-UE are same as
described for a UE in all other clauses of this document unless stated
otherwise.</p>
<p>A HD-UE does not expect to detect a DCI format scheduling a reception
in a set of symbols and detect a DCI format scheduling a transmission in
any symbol from the set of symbols.</p>
<p>When a PDCCH reception by a UE includes two PDCCH candidates from
corresponding search space sets, as described in clause 10.1, the end of
the PDCCH reception is the end of the PDCCH candidate that ends
later.</p>
<p>If a HD-UE is configured by higher layers to receive a PDCCH, or
PDSCH, or CSI-RS, or DL PRS in a set of symbols, the HD-UE receives the
PDCCH, or PDSCH, or CSI-RS, or DL PRS if the HD-UE does not detect a DCI
format that indicates to the HD-UE to transmit a PUSCH, or PUCCH, or
PRACH, or SRS in at least one symbol of the set of symbols; otherwise,
the HD-UE does not receive the PDCCH, or PDSCH, or CSI-RS, or DL PRS in
the set of symbols.</p>
<p>If a HD-UE is configured by higher layers to transmit SRS, or PUCCH,
or PUSCH in a set of symbols and the UE detects a DCI format indicating
to the HD-UE to receive CSI-RS or PDSCH in a subset of symbols from the
set of symbols, then</p>
<p>- the HD-UE does not expect to cancel the transmission of the PUCCH
or PUSCH in the set of symbols if the first symbol in the set occurs
within <span class="math inline">\(T_{proc,2\ }\)</span> relative to a
last symbol of a PDCCH reception where the HD-UE detects the DCI format;
otherwise, the HD-UE cancels the PUCCH, or the PUSCH, or an actual
repetition of the PUSCH [6, TS 38.214], determined from clauses 9 and
9.2.5 or clause 6.1 of [6, TS 38.214].</p>
<p>- the HD-UE does not expect to cancel the transmission of SRS in
symbols from the subset of symbols that occur within <span
class="math inline">\(T_{proc,2}\)</span> relative to a last symbol of a
PDCCH reception where the HD-UE detects the DCI format. The HD-UE
cancels the SRS transmission in remaining symbols from the subset of
symbols.</p>
<p><span class="math inline">\(T_{proc,2}\)</span> is the PUSCH
preparation time for UE processing capability 1 [6, TS 38.214] assuming
<span class="math inline">\(d_{2,1} = 1\)</span> and <span
class="math inline">\(\mu\)</span> corresponds to the smallest SCS
configuration between the SCS configuration of the PDCCH carrying the
DCI format and the SCS configuration of the SRS, PUCCH, PUSCH.</p>
<p>A HD-UE does not expect to receive both dedicated higher layer
parameters configuring transmission in a set of symbols and dedicated
higher layer parameters configuring reception in the set of symbols. A
HD-UE does not expect to receive both a Type-0/0A/0B/1/2-PDCCH CSS set
configuration for PDCCH reception in a set of symbols and dedicated
higher layer parameters configuring transmission in the set of symbols,
except a Type-2-PDCCH CSS set configuration for PDCCH reception in a set
of symbols and dedicated higher layer parameters configuring
configured-grant based PUSCH transmission as described in clause 19.1 in
the set of symbols for which case the UE follows the procedure as in
clause 5.1B.2.6 in [10, TS 38.133]. The UE expects to be configured with
a Type-2-PDCCH CSS set configuration for PDCCH reception such that there
is at least one paging occasion that does not overlap with
configured-grant based PUSCH transmission as described in clause 19.1
per SI modification period.</p>
<p>If a HD-UE would transmit a PUSCH, or PUCCH, or SRS based on a
configuration by higher layers and the HD-UE is indicated presence of
SS/PBCH blocks within the active DL BWP by <em>ssb-PositionsInBurst</em>
in <em>SIB1</em> or in <em>ServingCellConfigCommon</em> or by
<em>NonCellDefiningSSB</em>, the HD-UE does not transmit</p>
<p>- PUSCH or PUCCH if a last symbol of the PUSCH or PUCCH transmission
would not be at least <span class="math inline">\(N_{\text{Tx-Rx}} \cdot
T_{\text{c}}\)</span> [4, TS 38.211] prior to a first symbol of the next
earliest SS/PBCH block</p>
<p>- PUSCH or PUCCH if a first symbol of the PUSCH or PUCCH transmission
would not be at least <span class="math inline">\(N_{\text{Rx-Tx}} \cdot
T_{\text{c}}\)</span> [4, TS 38.211] after a last symbol of the previous
latest SS/PBCH block</p>
<p>- SRS in symbols that would not be at least <span
class="math inline">\(N_{\text{Tx-Rx}} \cdot T_{\text{c}}\)</span> prior
to a first symbol of the next earliest SS/PBCH block</p>
<p>- SRS in symbols that would not be at least <span
class="math inline">\(N_{\text{Rx-Tx}} \cdot T_{\text{c}}\)</span> after
a last symbol of the previous latest SS/PBCH block</p>
<p>If a HD-UE would transmit a PRACH based on a detected DCI format, or
PUSCH, or PUCCH, or SRS and the HD-UE is indicated presence of SS/PBCH
blocks within the active DL BWP by <em>ssb-PositionsInBurst</em> in
<em>SIB1</em> or in <em>ServingCellConfigCommon</em> or by
<em>NonCellDefiningSSB</em> in a set of symbols, the HD-UE does not
transmit PUSCH or PUCCH or PRACH if a transmission would overlap with
any symbol from the set of symbols and the HD-UE does not transmit SRS
in the set of symbols.</p>
<p>If a HD-UE would transmit a PRACH or MsgA PUSCH triggered by higher
layers in a set of symbols and would receive a PDCCH, or a PDSCH, or a
CSI-RS, or a DL PRS, or is indicated presence of SS/PBCH blocks within
the active DL BWP by <em>ssb-PositionsInBurst</em> in <em>SIB1</em> or
in <em>ServingCellConfigCommon</em> or by <em>NonCellDefiningSSB</em> in
symbols that include any symbol from the set of symbols, the HD-UE can
select based on its implementation whether to either transmit the PRACH
or the MsgA PUSCH or receive the PDSCH, or the CSI-RS, or the PL RS, or
the PDCCH, or the SS/PBCH blocks.</p>
<p>If a HD-UE would receive a PDCCH, or a PDSCH, or a CSI-RS, or a DL
PRS based on a configuration by higher layers or is indicated presence
of SS/PBCH blocks within the active DL BWP by
<em>ssb-PositionsInBurst</em> in <em>SIB1</em> or in
<em>ServingCellConfigCommon</em> or by <em>NonCellDefiningSSB</em> in a
set of symbols, and the HD-UE would transmit PRACH or MsgA PUSCH
triggered by higher layers starting or ending at a symbol that is
earlier or later than <span class="math inline">\(N_{\text{Rx-Tx}} \cdot
T_{\text{c}}\)</span> or <span class="math inline">\(N_{\text{Tx-Rx}}
\cdot T_{\text{c}}\)</span>, respectively, from the last or first symbol
in the set of symbols, the HD-UE can select based on its implementation
whether to either transmit the PRACH or the MsgA PUSCH or receive the
PDSCH, or the CSI-RS, or the DL PRS, or the PDCCH, or the SS/PBCH
blocks.</p>
<h1 id="multicast-broadcast-services">18 Multicast Broadcast
Services</h1>
<p>This clause is applicable only for PDCCH receptions, PDSCH
receptions, and PUCCH transmissions for MBS on a serving cell. DCI
formats with CRC scrambled by G-RNTI for multicast or G-CS-RNTI
scheduling PDSCH receptions are referred to as multicast DCI formats and
the PDSCH receptions are referred to as multicast PDSCH receptions. DCI
formats with CRC scrambled by MCCH-RNTI or G-RNTI for broadcast
scheduling PDSCH receptions are referred to as broadcast DCI formats and
the PDSCH receptions are referred to as broadcast PDSCH receptions.
HARQ-ACK information associated with multicast DCI formats or multicast
PDSCH receptions is referred to as multicast HARQ-ACK information.</p>
<p>A UE can be provided one or more G-RNTIs for multicast per serving
cell for scrambling the CRC of multicast DCI formats for scheduling
PDSCH receptions. The UE can be provided one or more G-CS-RNTI per
serving cell for scrambling the CRC of multicast DCI formats providing
activation/release/scheduling retransmission for SPS PDSCH
receptions.</p>
<p>A UE can be configured by <em>cfr-ConfigMCCH-MTCH</em> an MBS
frequency resource for PDCCH and PDSCH receptions providing MCCH and
broadcast MTCH [12, TS 38.331]; otherwise, the MBS frequency resource is
same as for the CORESET with index 0 that is associated with the
Type0-PDCCH CSS set for PDCCH and PDSCH receptions providing MCCH and
broadcast MTCH. The SCS and CP of MBS frequency resource for broadcast
are same as the initial DL BWP. A UE monitors PDCCH for scheduling PDSCH
receptions for MCCH or broadcast MTCH as described in clause 10.1.</p>
<p>In clauses referring to a higher layer parameter value provided by
<em>PDCCH-ConfigCommon</em> or
<em>PDSCH-ConfigMCCH</em>/<em>PDSCH-ConfigMTCH</em>, when applicable a
corresponding higher layer parameter value for MCCH/broadcast MTCH PDCCH
receptions or PDSCH receptions, respectively, is provided as described
in [12, TS 38.331].</p>
<p>A UE can be configured, per DL BWP by <em>cfr-ConfigMulticast</em>,
an MBS frequency resource within the DL BWP for PDCCH and PDSCH
receptions [4, TS 38.211]. If <em>cfr-ConfigMulticast</em> does not
include <em>locationAndBandwidthMulticast</em>, the MBS frequency
resource is the DL BWP. The SCS and CP of MBS frequency resource
provided by <em>CFR-ConfigMulticast</em> are same as the associated DL
BWP. In clauses referring to a higher layer parameter value provided by
<em>PDCCH-Config</em> or <em>PDSCH-Config</em> or <em>SPS-Config</em>
for a DL BWP, when applicable a corresponding higher layer parameter
value for multicast PDCCH, PDSCH, or SPS PDSCH receptions is provided as
described in [12, TS 38.331].</p>
<p>In clauses referring to a higher layer parameter value provided by a
first or second <em>PUCCH-Config</em>, when applicable a corresponding
higher layer parameter value for PUCCH transmissions associated with
multicast PDCCH or PDSCH receptions is provided as described in [12, TS
38.331]. In clauses referring to a higher layer parameter value provided
by <em>n1-PUCCH-AN</em> or <em>SPS-PUCCH-AN-List</em>, when applicable a
corresponding higher layer parameter value for PUCCH transmissions
associated with multicast SPS PDSCH receptions is provided as described
in [12, TS 38.331]. In clauses referring to a higher layer parameter
value provided by <em>pdsch-HARQ-ACK-Codebook</em> or
<em>pdsch-HARQ-ACK-CodebookList</em>, when applicable a corresponding
higher layer parameter value for HARQ-ACK codebooks associated with
multicast HARQ-ACK information is provided as described in [12, TS
38.331].</p>
<p>A UE monitors PDCCH for scheduling PDSCH receptions or for
activation/release of SPS PDSCH receptions for a corresponding SPS PDSCH
configuration as described in clause 10.1.</p>
<p>A UE can be configured by <em>harq-FeedbackOptionMulticast,</em> for
a G-RNTI for multicast or for a G-CS-RNTI, to provide HARQ-ACK
information for a transport block reception associated with the G-RNTI
for multicast or with the G-CS-RNTI, according to the first HARQ-ACK
reporting mode if <em>harq-FeedbackOptionMulticast</em> is set to
'<em>ack-nack</em>' or according to the second HARQ-ACK reporting mode
if <em>harq-FeedbackOptionMulticast</em> is set to '<em>nack-only</em>
'. The UE determines a priority for a PUCCH transmission with multicast
HARQ-ACK information according to any HARQ-ACK reporting mode as
described in clause 9 for a PUCCH transmission with unicast HARQ-ACK
information.</p>
<p>For the first HARQ-ACK reporting mode, the UE generates HARQ-ACK
information with ACK value when a UE correctly decodes a transport
block; otherwise, the UE generates HARQ-ACK information with NACK value,
as described in clauses 9 and 9.1 through 9.3. The UE determines a PUCCH
or a PUSCH to provide the HARQ-ACK information as described in clause
9.2.</p>
<p>For the second HARQ-ACK reporting mode, the UE does not transmit a
PUCCH that would include only HARQ-ACK information with ACK values. The
second HARQ-ACK reporting mode is not applicable for the first SPS PDSCH
reception after activation of SPS PDSCH receptions for a SPS
configuration.</p>
<p>For the second HARQ-ACK reporting mode, when a number of HARQ-ACK
information bits is one, a UE transmits a PUCCH only when the HARQ-ACK
information bit has NACK value. The UE determines a PUCCH to provide the
HARQ-ACK information as described in clause 9.2.1 or 9.2.3 when UE is
not provided <em>moreThanOneNackOnlyMode</em>, or as the first PUCCH in
Table 18-1 when UE is provided <em>moreThanOneNackOnlyMode.</em> For a
PUCCH resource associated with PUCCH format 0, the UE transmits the
PUCCH as described in [4, TS 38.211] by obtaining <span
class="math inline">\(m_{0}\)</span> as described for HARQ-ACK
information in clause 9.2.3 and by setting <span
class="math inline">\(m_{cs} = 0\)</span>. For a PUCCH resource
associated with PUCCH format 1, the UE transmits the PUCCH as described
in [4, TS 38.211] by setting <span class="math inline">\(b(0) =
0\)</span>.</p>
<p>A UE that is indicated '<em>nack-only</em>' by
<em>harq-FeedbackOptionMulticast</em>, and for the case when the UE
reports more than one HARQ-ACK information bits, the UE can be indicated
to provide the HARQ-ACK information bits in a PUCCH either according to
the first HARQ-ACK reporting mode when the UE is not provided
<em>moreThanOneNackOnlyMode</em> or, for only one G-RNTI or only one
G-CS-RNTI, according to the second HARQ-ACK reporting mode by selecting
a PUCCH resource from a set of PUCCH resources for the PUCCH
transmission based on the values of the HARQ-ACK information bits as
described in Table 18-1 when the UE is provided
<em>moreThanOneNackOnlyMode</em>. The UE generates HARQ-ACK information
bits for the second HARQ-ACK reporting mode according to a Type-2
HARQ-ACK codebook as described in clause 9.1.3.1. For a PUCCH resource
associated with PUCCH format 0, the UE transmits the PUCCH as described
in [4, TS 38.211] by obtaining <span
class="math inline">\(m_{0}\)</span> as described for HARQ-ACK
information in clause 9.2.3 and by setting <span
class="math inline">\(m_{cs} = 0\)</span>. For a PUCCH resource
associated with PUCCH format 1, the UE transmits the PUCCH as described
in [4, TS 38.211] by setting <span class="math inline">\(b(0) =
0\)</span>.</p>
<p>For a UE that is indicated the second HARQ-ACK reporting mode, the UE
does not expect to be provided <em>pdsch-HARQ-ACK-Codebook =
semi-static</em> for multicast HARQ-ACK information.</p>
<p>For a UE that is indicated the second HARQ-ACK reporting mode and
<em>moreThanOneNackOnlyMode</em>, all PUCCH resources associated with
the second HARQ-ACK reporting mode have same starting symbol and same
number of symbols and, when PUCCH resources in Table 18-1 are located in
more than one PRBs, the more than one PRBs are adjacent and are
associated with a same MPR value [8-1, TS 38.101-1].</p>
<p>Table 18-1: Mapping of values of HARQ-ACK information bits to PUCCH
resources for the second HARQ-ACK reporting mode</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr>
<td colspan="4">Value of HARQ-ACK information bits</td>
<td>PUCCH resource</td>
</tr>
<tr>
<td>{0}</td>
<td>{0,0}</td>
<td>{0,0,0}</td>
<td style="text-align: center;">{0,0,0,0}</td>
<td style="text-align: center;">1<sup>st</sup> PUCCH resource from
<em>resourceList/n1PUCCH-AN/sps-PUCCH-AN-ListMulticast</em></td>
</tr>
<tr>
<td></td>
<td>{1,0}</td>
<td>{1,0,0}</td>
<td style="text-align: center;">{1,0,0,0}</td>
<td style="text-align: center;">2<sup>nd</sup> PUCCH resource from
<em>resourceList/sps-PUCCH-AN-ListMulticast</em></td>
</tr>
<tr>
<td></td>
<td>{0,1}</td>
<td>{0,1,0}</td>
<td style="text-align: center;">{0,1,0,0}</td>
<td style="text-align: center;">3<sup>rd</sup> PUCCH resource from
<em>resourceList/sps-PUCCH-AN-ListMulticast</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>{1,1,0}</td>
<td style="text-align: center;">{1,1,0,0}</td>
<td style="text-align: center;">4<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>{0,0,1}</td>
<td style="text-align: center;">{0,0,1,0}</td>
<td style="text-align: center;">5<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>{1,0,1}</td>
<td style="text-align: center;">{1,0,1,0}</td>
<td style="text-align: center;">6<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td>{0,1,1}</td>
<td style="text-align: center;">{0,1,1,0}</td>
<td style="text-align: center;">7<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td style="text-align: center;">{1,1,1,0}</td>
<td style="text-align: center;">8<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td style="text-align: center;">{0,0,0,1}</td>
<td style="text-align: center;">9<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td style="text-align: center;">{1,0,0,1}</td>
<td style="text-align: center;">10<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td style="text-align: center;">{0,1,0,1}</td>
<td style="text-align: center;">11<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td style="text-align: center;">{1,1,0,1}</td>
<td style="text-align: center;">12<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td style="text-align: center;">{0,0,1,1}</td>
<td style="text-align: center;">13<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td style="text-align: center;">{1,0,1,1}</td>
<td style="text-align: center;">14<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td style="text-align: center;">{0,1,1,1}</td>
<td style="text-align: center;">15<sup>th</sup> PUCCH resource from
<em>resourceList</em></td>
</tr>
</tbody>
</table>
<p>If a UE is provided <em>pucch-ConfigurationListMulticast1</em> or
<em>pucch-ConfigurationListMulticast2</em> for PUCCH transmissions with
a priority value, the UE transmits a PUCCH with the priority value
according to <em>pucch-ConfigurationListMulticast1</em> or
<em>pucch-ConfigurationListMulticast2</em> for each G-RNTI for multicast
or G-CS-RNTI that the UE provides associated HARQ-ACK information
according to the first HARQ-ACK reporting mode or the second HARQ-ACK
reporting mode, respectively. For HARQ-ACK information associated only
with the second HARQ-ACK reporting mode and for more than one HARQ-ACK
information bit, when the UE is not provided
<em>moreThanOneNackOnlyMode</em> and the UE provides the HARQ-ACK
information according to the first HARQ-ACK reporting mode, the UE
determines a PUCCH resource from
<em>pucch-ConfigMulticast1/pucch-ConfigurationListMulticast1</em>, if
provided; otherwise, the UE determines a PUCCH resource from
<em>pucch-Config/pucch-ConfigurationList</em> as described in clause
9.2.3.</p>
<p>A PDSCH reception providing an initial transmission of a transport
block is scheduled only by a multicast DCI format. For the first
HARQ-ACK reporting mode, a PDSCH reception providing a retransmission of
the transport block can be scheduled either by a multicast DCI format
using a same G-RNTI for multicast as the G-RNTI for multicast of the
initial transmission of the transport block, or by a unicast DCI format
using a C-RNTI [6, TS 38.214].</p>
<p>An activation for SPS PDSCH receptions using a G-CS-RNTI for a
corresponding SPS PDSCH configuration is provided only by a multicast
DCI format as described in clause 10.2 by replacing CS-RNTI with the
G-CS-RNTI. A release for SPS PDSCH receptions using a G-CS-RNTI for a
corresponding SPS PDSCH configuration is provided by a multicast DCI
format as described in clause 10.2 by replacing CS-RNTI with the
G-CS-RNTI, or by a DCI format with CRC scrambled by CS-RNTI. For the
first HARQ-ACK reporting mode and for a transport block that a UE
received in a SPS PDSCH, a PDSCH reception providing a retransmission of
the transport block can be scheduled either by a unicast DCI format
using a CS-RNTI or by a multicast DCI format using a same G-CS-RNTI as
the G-CS-RNTI of the initial transmission of the transport block [6, TS
38.214].</p>
<p>For a DCI format indicating SPS PDSCH release, the UE provides the
associated HARQ-ACK information as described in clause 9.1.</p>
<p>A UE can be configured per G-RNTI for multicast or per G-CS-RNTI, by
<em>harq-FeedbackEnablerMulticast</em> with value set to 'enabled', to
provide HARQ-ACK information for PDSCH receptions. When the UE is not
provided <em>harq-FeedbackEnablerMulticast</em> for a G-RNTI for
multicast or G-CS-RNTI and <em>pdsch-HARQ-ACK-Codebook = dynamic</em>
for multicast HARQ-ACK information, the UE does not provide HARQ-ACK
information for respective PDSCH receptions. If a UE is provided
<em>harq-FeedbackEnablerMulticast</em> with value set to 'dci-enabler'
for a G-RNTI for multicast or a G-CS-RNTI, the UE provides HARQ-ACK
information for PDSCH receptions scheduled by multicast DCI format 4_1
associated with the G-RNTI or the G-CS-RNTI, and determines whether or
not to provide the HARQ-ACK information for PDSCH receptions scheduled
or activated by multicast DCI format 4_2 based on an indication by the
multicast DCI format 4_2 associated with the G-RNTI for multicast or the
G-CS-RNTI [4, TS 38.212]. If a UE is provided
<em>pdsch-HARQ-ACK-Codebook = semi-static</em> for multicast HARQ-ACK
information, the UE does not expect to be provided
<em>harq-FeedbackEnablerMulticast</em> with value set to 'dci-enabler'
for a G-RNTI for multicast or a G-CS-RNTI.</p>
<p>If a UE would multiplex second multicast HARQ-ACK information
according to the second HARQ-ACK reporting mode with first multicast
HARQ-ACK information according to the first HARQ-ACK reporting mode, or
unicast HARQ-ACK information, or CSI reports in a first PUCCH or in a
PUSCH, as described in clauses 9 and 9.2.5, the UE provides the second
HARQ-ACK information according to the first HARQ-ACK reporting mode. If
the UE would multiplex the second multicast HARQ-ACK information, for
resolving an overlapping among a second PUCCH with the second HARQ-ACK
information and other PUCCHs or PUSCHs prior to multiplexing the second
HARQ-ACK information in a PUCCH or PUSCH, the UE considers that the UE
would transmit the second PUCCH when all values of the HARQ-ACK
information are 'ACK'. If the UE would multiplex the second multicast
HARQ-ACK information, for resolving an overlapping among a second PUCCH
with the second HARQ-ACK information and other PUCCHs or PUSCHs prior to
multiplexing the second HARQ-ACK information in a PUCCH or PUSCH when
the UE is provided <em>moreThanOneNackOnlyMode</em>, the UE considers
that the UE would transmit the second PUCCH using any PUCCH resource
from the PUCCH resources associated with the second HARQ-ACK reporting
mode when all values of the the second HARQ-ACK information are
'ACK'.</p>
<p>If a UE would only transmit a first PUCCH with only positive SR and a
second PUCCH with HARQ-ACK information according to the second HARQ-ACK
reporting mode, where the first and second PUCCHs would overlap in time
in a slot and have same priority index, it is up to UE implementation
for the UE to transmit either the first PUCCH or the second PUCCH.</p>
<p>If a UE is provided multiple G-RNTIs for multicast or G-CS-RNTIs, a
configuration for a HARQ-ACK codebook type applies to all G-RNTIs for
multicast or G-CS-RNTIs.</p>
<p>If a UE is provided <em>pdsch-HARQ-ACK-Codebook = semi-static</em>
for multicast HARQ-ACK information, the UE generates a Type-1 HARQ-ACK
codebook as described in clauses 9.1.2, 9.1.2.1, and 9.1.2.2.</p>
<p>If a UE is provided <em>pdsch-HARQ-ACK-Codebook = dynamic</em> for
multicast HARQ-ACK information, the UE generates a Type-2 HARQ-ACK
codebook as described in clauses 9.1.3.1 and 9.1.3.2.</p>
<p>If a UE would report unicast HARQ-ACK information and multicast
HARQ-ACK information with same priority index in a slot, the UE
multiplexes the unicast HARQ-ACK information and the multicast HARQ-ACK
information following the procedures in this clause and in clauses
9.1.2, 9.1.3, and 9.1.4.</p>
<p>If, for unicast and multicast HARQ-ACK information of same priority
value, a UE</p>
<p>- is provided</p>
<p>- either <em>pdsch-HARQ-ACK-Codebook</em> = <em>dynamic</em> or
<em>pdsch-HARQ-ACK-Codebook-r16</em> for unicast HARQ-ACK information
and <em>pdsch-HARQ-ACK-Codebook</em> = <em>semi-static</em> for
multicast HARQ-ACK information,</p>
<p>- or <em>pdsch-HARQ-ACK-Codebook</em> = <em>semi-static</em> or
<em>pdsch-HARQ-ACK-Codebook-r16</em> for unicast HARQ-ACK information
and <em>pdsch-HARQ-ACK-Codebook</em> = <em>dynamic</em> for multicast
HARQ-ACK information, and</p>
<p>- would multiplex the unicast and multicast HARQ-ACK information in a
same PUCCH or PUSCH</p>
<p>the UE</p>
<p>- appends the HARQ-ACK codebooks for the multicast HARQ-ACK
information to the HARQ-ACK codebooks for the unicast HARQ-ACK
information</p>
<p>- if <span class="math inline">\(O_{ACK} + O_{SR} + O_{CSI} \leq
11\)</span>, the UE determines <span class="math inline">\(n_{HARQ -
ACK}\)</span> for obtaining a power of a PUCCH transmission with the
HARQ-ACK information, as described in clause 7.2.1, as a sum of the
<span class="math inline">\(n_{HARQ - ACK}\)</span> value from clause
9.1.3.1 or clause 9.1.3.3 and the <span class="math inline">\(n_{HARQ -
ACK}\)</span> value from clause 9.1.2.1 or as a sum of the <span
class="math inline">\(n_{HARQ - ACK}\)</span> value from clause 9.1.2.1
or clause 9.1.3.3 and the <span class="math inline">\(n_{HARQ -
ACK}\)</span> value from clause 9.1.3.1.</p>
<p>A UE determines a PUCCH resource for a PUCCH transmission with
HARQ-ACK information as described in clauses 9.2 and 9.2.1 through
9.2.5.</p>
<p>If a UE multiplexes in a PUCCH HARQ-ACK information of same priority
associated with unicast DCI formats and with multicast DCI formats in a
same PUCCH, the last DCI format that the UE uses to determine the PUCCH
resource from <em>pucch-Config/pucch-ConfigurationList</em>, as
described in clause 9.2.3, is a last unicast DCI format.</p>
<p>If the UE multiplexes in a PUCCH only multicast HARQ-ACK information
of same priority that is according to both the first and second HARQ-ACK
reporting modes, the last DCI format that the UE uses to determine the
PUCCH resource from
<em>pucch-ConfigMulticast1/pucch-ConfigurationListMulticast1</em>, if
provided; otherwise, from <em>pucch-Config/pucch-ConfigurationList</em>,
as described in clause 9.2.3, is a last DCI format associated with
multicast HARQ-ACK information that is according to the first HARQ-ACK
reporting mode.</p>
<p>If a UE multiplexes in a PUCCH only first HARQ-ACK information
associated with multicast SPS PDSCH receptions and second HARQ-ACK
information associated with multicast DCI formats and having same
priority value as the first HARQ-ACK information, and both the first and
second HARQ-ACK information are according to the first HARQ-ACK
reporting mode, the UE determines the PUCCH resource based on the last
multicast DCI format from
<em>pucch-ConfigMulticast1/pucch-ConfigurationListMulticast1,</em> if
provided; otherwise, from <em>pucch-Config/pucch-ConfigurationList</em>,
as described in clause 9.2.3.</p>
<p>If a UE multiplexes in a PUCCH only first HARQ-ACK information
associated with multicast SPS PDSCH receptions and second HARQ-ACK
information associated with multicast DCI formats and having same
priority value as the first HARQ-ACK information, and the first and
second HARQ-ACK information are indicated by
<em>harq-FeedbackOptionMulticast</em> different HARQ-ACK reporting
modes, the UE determines the PUCCH resource based on:</p>
<p><em>- sps-PUCCH-AN-ListMulticast</em>, or <em>sps-PUCCH-AN-List</em>
if <em>sps-PUCCH-AN-ListMulticast</em> is not provided, if the first
HARQ-ACK information is according to the first HARQ-ACK reporting mode
or</p>
<p>- the last multicast DCI format, as described in clause 9.2.3, if the
second HARQ-ACK information is according to the first HARQ-ACK reporting
mode.</p>
<p>If a UE multiplexes in a PUCCH first HARQ-ACK information associated
with unicast SPS PDSCH receptions and second HARQ-ACK information
associated with multicast DCI formats and having same priority value as
the first HARQ-ACK information in a same PUCCH, the UE determines the
PUCCH resource from</p>
<p>- if provided, <em>SPS-PUCCH-AN-List</em> for unicast SPS PDSCH
receptions as described in clause 9.2.1;</p>
<p>- else, if provided, <em>PUCCH-Config/PUCCH-ConfigurationList</em>
for multicast PDSCH receptions;</p>
<p>- else, <em>PUCCH-Config/PUCCH-ConfigurationList</em> for unicast
PDSCH receptions.</p>
<p>If a UE multiplexes in a PUCCH first HARQ-ACK information associated
with unicast SPS PDSCH receptions and second HARQ-ACK information
associated with multicast SPS PDSCH receptions and having same priority
value as the first HARQ-ACK information in a same PUCCH, the UE
determines the PUCCH resource from <em>SPS-PUCCH-AN-List</em> for
unicast SPS PDSCH receptions as described in clause 9.2.1.</p>
<p>If a UE multiplexes in a PUCCH only HARQ-ACK information associated
with multicast SPS PDSCHs receptions of same priority that is according
to the first HARQ-ACK reporting mode and is not provided
<em>sps-PUCCH-AN-ListMulticast</em>, the UE determines the PUCCH
resource from the <em>sps-PUCCH-AN-List</em> provided for unicast SPS
PDSCH reception as described in clause 9.2.1<em>.</em></p>
<p>If a UE multiplexes in a PUCCH multicast HARQ-ACK information only
according to second HARQ-ACK reporting modes and CSI reports and, if
any, SR, the UE determines a PUCCH resource as described in clause
9.2.5.2 for multiplexing CSI reports with HARQ-ACK information that is
in response to PDSCH receptions without corresponding PDCCHs.</p>
<p>A UE is not required to multiplex in a PUCCH multicast HARQ-ACK
information of a priority and unicast UCI of the priority if the UE is
provided <em>subslotLengthForPUCCH</em> for PUCCH transmissions with
unicast UCI of the priority.</p>
<h1 id="pusch-transmission-in-rrc_inactive-state">19 PUSCH transmission
in RRC_INACTIVE state </h1>
<h2 id="configured-grant-based-pusch-transmission">19.1 Configured-grant
based PUSCH transmission</h2>
<p>A UE indicated to release a dedicated RRC connection can be provided
one or more configurations by respective one or more
<em>ConfiguredGrantConfig</em>, for configured grant Type 1 PUSCH
transmissions on the initial UL BWP [12, TS 38.331]. For the remaining
of this clause, PUSCH transmissions refer to configured grant Type-1
PUSCH transmissions for a configuration provided by
<em>ConfiguredGrantConfig</em>.</p>
<p>A UE can be provided by <em>sdt-SSB-Subset</em> a number of SS/PBCH
block indexes <span class="math inline">\(N_{PUSCH}^{SS/PBCH}\)</span>
to map to a number of valid PUSCH occasions for PUSCH transmissions over
an association period. If the UE is not provided
<em>sdt-SSB-Subset</em>, the UE determines <span
class="math inline">\(N_{PUSCH}^{SS/PBCH}\)</span> from the value of
<em>ssb-PositionsInBurst</em> in <em>SIB1</em>. A PUSCH occasion for a
PUSCH transmission is defined by a time resource and a frequency
resource and is associated with a DM-RS provided by
<em>cg-DMRS-Configuration</em> for the configuration of PUSCH
transmissions. A UE can be provided a number of repetitions for a PUSCH
transmission by <em>repK</em> or <em>numberOfRepetitions</em>. If the
number of repetitions is provided and larger than 1, all the PUSCH
occasions of the repetitions for the PUSCH transmission are mapped to
the same SS/PBCH block index(es). All the PUSCH occasions of the
repetitions are not valid if any PUSCH occasion of the repetitions is
not valid.</p>
<p>An association period, starting from frame with SFN 0, for mapping
<span class="math inline">\(N_{PUSCH}^{SS/PBCH}\)</span> SS/PBCH block
indexes, from the number of SS/PBCH block indexes, to valid PUSCH
occasions and associated DM-RS resources is the smallest value in the
set determined by the PUSCH configuration period provided by
<em>periodicity</em> in <em>ConfiguredGrantConfig</em> according to
Table 19.1-1 such that <span
class="math inline">\(N_{PUSCH}^{SS/PBCH}\)</span> SS/PBCH block indexes
are mapped at least once to valid PUSCH occasions and associated DM-RS
resources within the association period. A UE is provided a number of
SS/PBCH block indexes associated with a PUSCH occasion and a DM-RS
resource by <em>sdt-SSB-PerCG-PUSCH</em>. If after an integer number of
SS/PBCH block indexes to PUSCH occasions and associated DMRS resources
mapping cycles within the association period there is a set of PUSCH
occasions and associated DMRS resources that are not mapped to <span
class="math inline">\(N_{PUSCH}^{SS/PBCH}\)</span> SS/PBCH block
indexes, no SS/PBCH block indexes are mapped to the set of PUSCH
occasions and associated DMRS resources. An association pattern period
includes one or more association periods and is determined so that a
pattern between PUSCH occasions with associated DMRS resources and
SS/PBCH block indexes repeats at most every 640 msec. PUSCH occasions
and associated DMRS resources not associated with SS/PBCH block indexes
after an integer number of association periods, if any, are not used for
PUSCH transmissions.</p>
<p>Table 19.1-1: Mapping between PUSCH configuration period and SS/PBCH
block to configured PUSCH resource association period</p>
<table>
<colgroup>
<col style="width: 42%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr>
<th>PUSCH configuration period <span
class="math inline">\(\mathbf{T}_{\mathbf{cg}}\)</span> (msec)</th>
<th>Association period (number of PUSCH configuration periods)</th>
</tr>
</thead>
<tbody>
<tr>
<td>5</td>
<td>{1, 2, 4, 8,16, 32, 64, 128}</td>
</tr>
<tr>
<td>8</td>
<td>{1, 2, 4, 5, 8, 10, 16, 20, 40, 80}</td>
</tr>
<tr>
<td>10</td>
<td>{1, 2, 4, 8,16, 32, 64}</td>
</tr>
<tr>
<td>16</td>
<td>{1, 2, 4, 5, 8,10,20,40}</td>
</tr>
<tr>
<td>20</td>
<td>{1, 2, 4, 8,16, 32}</td>
</tr>
<tr>
<td>32</td>
<td>{1, 2, 4, 5, 10, 20}</td>
</tr>
<tr>
<td>40</td>
<td>{1, 2, 4, 8, 16}</td>
</tr>
<tr>
<td>64</td>
<td>{1, 2, 5, 10}</td>
</tr>
<tr>
<td>80</td>
<td>{1, 2, 4, 8}</td>
</tr>
<tr>
<td>128</td>
<td>{1, 5}</td>
</tr>
<tr>
<td>160</td>
<td>{1, 2, 4}</td>
</tr>
<tr>
<td>320</td>
<td>{1, 2}</td>
</tr>
<tr>
<td>640</td>
<td>{1}</td>
</tr>
</tbody>
</table>
<p><span class="math inline">\(N_{PUSCH}^{SS/PBCH}\)</span> SS/PBCH
block indexes are mapped to valid PUSCH occasions and associated DMRS
resources in the following order</p>
<blockquote>
<p>- first, in increasing order of DMRS resource indexes within a PUSCH
occasion, where a DMRS resource index <span
class="math inline">\(DMRS_{id}\)</span> is determined first in an
ascending order of a DMRS port index and second in an ascending order of
a DMRS sequence index [4, TS 38.211]</p>
<p>- second, in increasing order of PUSCH configuration period
indexes</p>
</blockquote>
<p>A PUSCH occasion is valid if it does not overlap with a valid PRACH
occasion as described in clause 8.1.</p>
<p>For unpaired spectrum and for SS/PBCH blocks with indexes provided by
<em>ssb-PositionsInBurst</em> in <em>SIB1</em></p>
<p>- if a UE is not provided <em>tdd-UL-DL-ConfigurationCommon</em>, a
PUSCH occasion is valid if the PUSCH occasion</p>
<p>- does not precede a SS/PBCH block in the PUSCH slot, and</p>
<p>- starts at least <span class="math inline">\(N_{\text{gap}}\)</span>
symbols after a last SS/PBCH block symbol, where <span
class="math inline">\(N_{\text{gap}}\)</span> is provided in Table
8.1-2</p>
<p>- if a UE is provided <em>tdd-UL-DL-ConfigurationCommon</em>, a PUSCH
occasion is valid if the PUSCH occasion</p>
<p>- is within UL symbols</p>
<p>- starts at least <span class="math inline">\(N_{\text{gap}}\)</span>
symbols after a last downlink symbol, and at least <span
class="math inline">\(N_{\text{gap}}\)</span> symbols after a last
SS/PBCH block symbol, where <span
class="math inline">\(N_{\text{gap}}\)</span> is provided in Table
8.1-2</p>
<p>A UE determines a power of a PUSCH transmission as described in
clause 7.1.1, where the UE obtains <span
class="math inline">\({PL}_{b,f,c}(q_{d})\)</span> using a RS resource
from an SS/PBCH block with index associated with the PUSCH
transmission.</p>
<p>A UE can be provided a USS set by <em>SearchSpace</em>, or a CSS set
by <em>sdt-SearchSpace</em>, to monitor PDCCH for detection of DCI
format 0_0 with CRC scrambled by C-RNTI or CS-RNTI for scheduling PUSCH
transmission or of DCI format 1_0 with CRC scrambled by C-RNTI for
scheduling PDSCH receptions [12, TS 38.331]. The UE may assume that the
DM-RS antenna port associated with the PDCCH receptions, the DM-RS
antenna port associated with the PDSCH receptions, and the SS/PBCH block
associated with the PUSCH transmission are quasi co-located with respect
to average gain and quasi co-location 'typeA' or 'typeD' properties. The
UE transmits a PUCCH with HARQ-ACK information associated with the PDSCH
receptions as described in clause 9.2.1 using a same spatial domain
transmission filter as for the last PUSCH transmission.</p>
<p>For initial transmission or autonomous retransmission of an initial
transport block provided for the PUSCH transmission as described in
clause 18.0 in [19, TS 38.300], the UE encodes the transport block using
redundancy version number 0 if the UE is not provided
<em>repK-RV</em>.</p>
<h2 id="random-access-based-pusch-transmission">19.2 Random-access based
PUSCH transmission</h2>
<p>A UE indicated to release a dedicated RRC connection can be provided
a configuration for a Type-1 and/or a Type-2 random access procedure on
the initial UL BWP [12, TS 38.331]. PRACH occasions can have either a
common configuration as, or a separate configuration from, PRACH
occasions for Type-1 or Type-2 random access procedure as described in
clause 8.1. The UE procedure is as described in clause 8, including
clauses 8.1 through 8.4. The UE transmits a PRACH preamble with a power
determined as described in clause 7.4.</p>
<p>For a common configuration of PRACH occasions and a Type-1 or a
Type-2 random access procedure, a UE can be provided a number of
contention based preambles per SS/PBCH block index per valid PRACH
occasion by <em>startPreambleForThisPartition</em> and
<em>numberOfPreamblesPerSSB-ForThisPartition</em> when
<em>smallData</em> is present in corresponding
<em>FeatureCombination</em>. A PRACH transmission can be on a subset of
PRACH occasions associated with a same SS/PBCH block index within an
SSB-RO mapping cycle as determined by a PRACH mask index provided by
<em>ssb-SharedRO-MaskIndex</em> according to [11, TS 38.321].</p>
<p>A UE can be provided by <em>sdt-SearchSpace</em> a CSS set to
monitor, after contention resolution as described in clause 8.4, PDCCH
for detection of a DCI format 0_0 or DCI format 1_0 with CRC scrambled
by C-RNTI for scheduling respective PUSCH transmissions or PDSCH
receptions; otherwise, if the UE is not provided
<em>sdt-SearchSpace</em>, the UE monitors PDCCH according to a
Type1-PDCCH CSS set as described in clause 10.1. The UE may assume that
the DM-RS antenna port associated with the PDCCH receptions, the DM-RS
antenna port associated with the PDSCH receptions, and the SS/PBCH block
associated with the PRACH transmission are quasi co-located with respect
to average gain and quasi co-location 'typeA' or 'typeD' properties.</p>
<p class="heading" id="annex-a-change-history"><br />
Annex A:<br />
Change history</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 48%" />
<col style="width: 7%" />
</colgroup>
<tbody>
<tr>
<td><strong>Date</strong></td>
<td><strong>TSG #</strong></td>
<td><strong>TSG Doc.</strong></td>
<td><strong>CR</strong></td>
<td style="text-align: center;"><strong>Rev</strong></td>
<td><strong>Cat</strong></td>
<td><strong>Subject/Comment</strong></td>
<td><strong>New version</strong></td>
</tr>
<tr>
<td style="text-align: center;">2017-04</td>
<td>RAN1#89</td>
<td>R1-1707925</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Draft skeleton</td>
<td>0.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-07</td>
<td>AH_NR2</td>
<td>R1-1712015</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Inclusion of agreements until RAN1-adhoc#2</td>
<td>0.0.1</td>
</tr>
<tr>
<td style="text-align: center;">2017-08</td>
<td>RAN1#90</td>
<td>R1-1714553</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Inclusion of agreements on CA and first revisions</td>
<td>0.0.2</td>
</tr>
<tr>
<td style="text-align: center;">2017-08</td>
<td>RAN1#90</td>
<td>R1-1714565</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Second revisions</td>
<td>0.0.3</td>
</tr>
<tr>
<td style="text-align: center;">2017-08</td>
<td>RAN1#90</td>
<td>R1-1714658</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Endorsed by RAN1#90</td>
<td>0.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-08</td>
<td>RAN1#90</td>
<td>R1-1715323</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Inclusion of agreements from RAN1#90</td>
<td>0.1.1</td>
</tr>
<tr>
<td style="text-align: center;">2017-08</td>
<td>RAN1#90</td>
<td>R1-1715330</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Updated editor's version</td>
<td>0.1.2</td>
</tr>
<tr>
<td style="text-align: center;">2017-09</td>
<td>RAN#77</td>
<td>RP-171995</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>For information to plenary</td>
<td>1.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-09</td>
<td>RAN1#90bis</td>
<td>R1-1716929</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Inclusion of agreements until RAN1-adhoc#3</td>
<td>1.0.1</td>
</tr>
<tr>
<td style="text-align: center;">2017-10</td>
<td>RAN1#90bis</td>
<td>R1-1719107</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Endorsed by RAN1#90bis</td>
<td>1.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-11</td>
<td>RAN1#90bis</td>
<td>R1-1719226</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Inclusion of agreements from RAN1#90bis</td>
<td>1.1.1</td>
</tr>
<tr>
<td style="text-align: center;">2017-11</td>
<td>RAN1#90bis</td>
<td>R1-1719243</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Updated editor's version</td>
<td>1.1.2</td>
</tr>
<tr>
<td style="text-align: center;">2017-11</td>
<td>RAN1#90bis</td>
<td>R1-1721050</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Endorsed by RAN1#90bis</td>
<td>1.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-12</td>
<td>RAN1#91</td>
<td>R1-1721343</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Inclusion of agreements from RAN1#91</td>
<td>1.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-12</td>
<td>RAN#78</td>
<td>RP-172703</td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Endorsed version for approval by plenary</td>
<td>2.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2017-12</td>
<td>RAN#78</td>
<td></td>
<td></td>
<td style="text-align: center;"></td>
<td></td>
<td>Approved by plenary – Rel-15 spec under change control</td>
<td>15.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-03</td>
<td>RAN#79</td>
<td>RP-180200</td>
<td>0001</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR capturing the NR ad-hoc 1801 and RAN1#92 meeting agreements</td>
<td>15.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-06</td>
<td>RAN#80</td>
<td>RP-181172</td>
<td>0002</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>CR to TS 38.213 capturing the RAN1#92bis and RAN1#93 meeting
agreements and aligning higher layer parameters with TS 38.331</td>
<td>15.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-09</td>
<td>RAN#81</td>
<td>RP-181789</td>
<td>0005</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 capturing the RAN1#94 meeting agreements</td>
<td>15.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-09</td>
<td>RAN#81</td>
<td>RP-182071</td>
<td>0006</td>
<td style="text-align: center;">-</td>
<td>C</td>
<td>Support maximum 8 SS/PBCH blocks for unpaired spectrum beyond
2.4GHz</td>
<td>15.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2018-12</td>
<td>RAN#82</td>
<td>RP-182523</td>
<td>0007</td>
<td style="text-align: center;">2</td>
<td>F</td>
<td>Combined CR of all essential corrections to 38.213 from RAN1#94bis
and RAN1#95.</td>
<td>15.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0009</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on search space sharing</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0010</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on timing adjustment indicator</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0011</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on SSB-RO association</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0012</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Removal of CSI request in RAR grant</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0014</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction to dynamic HARQ codebook in NR</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0015</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections to TS 38.213</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0016</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on simultaneous active BWP switching across carriers</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0017</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on using CORESET#0 in dedicated DL BWP</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0018</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>PDCCH monitoring for overlapped CORESETs</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0019</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction to last PUCCH resource set configuration</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0020</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on physical downlink control channel</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0021</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction to align RAN1 and RAN4 specifications for EN-DC power
control</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0022</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>(Late Drop) CR on PRACH Power Ramping Counter Suspension</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0023</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>QCL properties of Msg4 in CONNECTED Mode</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0024</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on latency after gNB response for recovery</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0025</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarifying DL reception and UL transmission related
restrictions</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0026</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on QCL assumption for receiving PDCCH for RAR</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0027</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on identifying transmission occasion after resetting a PC closed
loop</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0028</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on overlapping of CSI and PUSCH with slot aggregation</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0029</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PHR timing for configured grant</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0030</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on QCL assumption for a CORESET other than 0</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0031</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on DCI format 2_3 for SUL cell in TS 38.213</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0032</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction to support FR1 extension to 7.125 GHz</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0033</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on UE procedure for reporting multiple UCI types</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-03</td>
<td>RAN#83</td>
<td>RP-190449</td>
<td>0034</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction to transmission timing adjustments in TS 38.213</td>
<td>15.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0035</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on missing case for DCI format 1_1 with CS-RNTI</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0036</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>CR on the determination of the minimum number of PRBs for PUCCH
transmission</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0037</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PHR determination and transmission</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0038</td>
<td style="text-align: center;">4</td>
<td>F</td>
<td>Corrections to 38.213 including alignment of terminology across
specifications</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0039</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Correction on PUSCH power scaling</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0040</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PDCCH monitoring</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0041</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on CRC assumption for multi-CSI resource selection and
CSI report(s) selection</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0042</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification of reference to PDSCH processing capability 1 in TS
38.213</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0043</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on the timeline condition of multiplexing two HARQ-ACK
information in one slot</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0044</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on Type-1 HARQ-ACK codebook determination</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0045</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PHR in EN-DC</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0046</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 on deactivation timing for ScellDeactivationTimer</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0047</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on single transmission timing for synchronous intra-band
EN-DC</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0048</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PDCCH Monitoring for NR-DC</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-06</td>
<td>RAN#84</td>
<td>RP-191283</td>
<td>0049</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on Timing for MAC CE Applicability</td>
<td>15.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td>RAN#85</td>
<td>RP-191942</td>
<td>0051</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on RA procedure triggered by higher layers</td>
<td>15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td>RAN#85</td>
<td>RP-191942</td>
<td>0052</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>CR on UE procedure for reporting multiple UCI types</td>
<td>15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td>RAN#85</td>
<td>RP-191942</td>
<td>0053</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 fix to HARQ-ACK Type-1 codebook pseudo-code</td>
<td>15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td>RAN#85</td>
<td>RP-191942</td>
<td>0054</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 on clarification of the RNTI used for scrambling a
PUSCH transmission scheduled by RAR UL grant</td>
<td>15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td>RAN#85</td>
<td>RP-191942</td>
<td>0055</td>
<td style="text-align: center;">2</td>
<td>F</td>
<td>Corrections to 38.213 including alignment of terminology across
specifications in RAN1#98</td>
<td>15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td>RAN#85</td>
<td>RP-191942</td>
<td>0056</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on intra-band EN-DC with single TAG</td>
<td>15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td>RAN#85</td>
<td>RP-191942</td>
<td>0057</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PHR in EN-DC/NE-DC/NR-CA</td>
<td>15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td>RAN#85</td>
<td>RP-191942</td>
<td>0058</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on the time gap definition</td>
<td>15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td>RAN#85</td>
<td>RP-191942</td>
<td>0059</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on slot configuration</td>
<td>15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td>RAN#85</td>
<td>RP-191942</td>
<td>0060</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 on PUCCH configuration for NR-DC</td>
<td>15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-09</td>
<td>RAN#85</td>
<td>RP-191942</td>
<td>0061</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PUCCH power control</td>
<td>15.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-192626</td>
<td>0062</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>CR on beta_offset values for UCI reporting in PUSCH</td>
<td>15.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-192626</td>
<td>0063</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on RACH occasion</td>
<td>15.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-192626</td>
<td>0064</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on HARQ-ACK transmission with BWP change</td>
<td>15.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-192626</td>
<td>0065</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on slot configuration regarding PUSCH scheduled by RAR</td>
<td>15.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-192626</td>
<td>0066</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on power control for NE-DC</td>
<td>15.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-192626</td>
<td>0067</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on time gap definition for HARQ-ACK transmission</td>
<td>15.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-192626</td>
<td>0068</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on time gap definition for random access procedure</td>
<td>15.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-192626</td>
<td>0069</td>
<td style="text-align: center;">3</td>
<td>F</td>
<td>Corrections to 38.213 including alignment of terminology across
specifications in RAN1#98bis and RAN1#99</td>
<td>15.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193121</td>
<td>0070</td>
<td style="text-align: center;">1</td>
<td>B</td>
<td>Introduction of two-step RACH in NR</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193221</td>
<td>0071</td>
<td style="text-align: center;">2</td>
<td>B</td>
<td>Introduction of shared spectrum channel access</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193123</td>
<td>0072</td>
<td style="text-align: center;">1</td>
<td>B</td>
<td>Introduction of integrated access and backhaul in NR</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193222</td>
<td>0073</td>
<td style="text-align: center;">2</td>
<td>B</td>
<td>Introduction of Industrial IoT</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193125</td>
<td>0074</td>
<td style="text-align: center;">1</td>
<td>B</td>
<td>Introduction of Ultra Reliable Low Latency Communications
Enhancements</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193127</td>
<td>0075</td>
<td style="text-align: center;">1</td>
<td>B</td>
<td>Introduction of MIMO enhancements in NR</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193128</td>
<td>0076</td>
<td style="text-align: center;">1</td>
<td>B</td>
<td>Introduction of UE power savings</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193131</td>
<td>0077</td>
<td style="text-align: center;">1</td>
<td>B</td>
<td>Introduction of NR-DC in same Frequency Range and of Cross-carrier
Scheduling with Different Numerologies</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193132</td>
<td>0078</td>
<td style="text-align: center;">1</td>
<td>B</td>
<td>Introduction of multiple LTE CRS rate matching patterns</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193124</td>
<td>0079</td>
<td style="text-align: center;">1</td>
<td>B</td>
<td>Introduction of V2X in NR</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193129</td>
<td>0080</td>
<td style="text-align: center;">1</td>
<td>B</td>
<td>Introduction of positioning support in NR</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2019-12</td>
<td>RAN#86</td>
<td>RP-193223</td>
<td>0081</td>
<td style="text-align: center;">2</td>
<td>B</td>
<td>Introduction of mobility enhancements in NR</td>
<td>16.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200184</td>
<td>0085</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on two-step RACH</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200194</td>
<td>0086</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on NR-DC and on Cross-carrier Scheduling with Different
Numerologies</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200186</td>
<td>0087</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on integrated access and backhaul</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200189</td>
<td>0088</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on Industrial IoT</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200190</td>
<td>0089</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on MIMO enhancements</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200193</td>
<td>0090</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on Mobility Enhancements</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200185</td>
<td>0091</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on shared spectrum channel access</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200192</td>
<td>0092</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on Positioning</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200187</td>
<td>0093</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on Sidelink</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200191</td>
<td>0094</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on UE power savings</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200188</td>
<td>0095</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on Ultra Reliable Low Latency Communications
Enhancements</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200195</td>
<td>0097</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Introduction of half-duplex operation in CA with unpaired
spectrum</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-03</td>
<td>RAN#87-e</td>
<td>RP-200447</td>
<td>0098</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Corrections to 38.213 including alignment of terminology across
specifications in RAN1#100-e</td>
<td>16.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200683</td>
<td>0102</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on PDCCH Blind Detection for NR-DC</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200688</td>
<td>0103</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on integrated access and backhaul</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200690</td>
<td>0104</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on Ultra Reliable Low Latency Communications
Enhancements</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200693</td>
<td>0105</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on UE power savings</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200689</td>
<td>0106</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on Sidelink</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200694</td>
<td>0107</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on Positioning</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200687</td>
<td>0108</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on shared spectrum channel access</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200692</td>
<td>0109</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on MIMO enhancements</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200691</td>
<td>0110</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on Industrial IoT</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200696</td>
<td>0111</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on NR-DC and on Cross-carrier Scheduling with Different
Numerologies</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200686</td>
<td>0112</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on two-step RACH</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200697</td>
<td>0113</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on half-duplex operation in CA with unpaired
spectrum</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200705</td>
<td>0114</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of UL transmission switching</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-200695</td>
<td>0115</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on Mobility Enhancements</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-06</td>
<td>RAN#88-e</td>
<td>RP-201349</td>
<td>0117</td>
<td style="text-align: center;">1</td>
<td>A</td>
<td>Extending 8 SSB support to the newly introduced 30 kHz Case C SSB
pattern on band n40</td>
<td>16.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201803</td>
<td>0119</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on the definition for timeline condition</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201803</td>
<td>0120</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction for PUCCH repetition transmission</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201814</td>
<td>0121</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on determination of the number of RS for RLM</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201803</td>
<td>0123</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>CR on determining P0 for a PUSCH retransmission corresponding to a
RAR UL grant in TS 38.213</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201803</td>
<td>0125</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>PRACH power ramping suspension</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201806</td>
<td>0126</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarify starting slot within DCI 2_5 indication</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201804</td>
<td>0127</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on 2-step RACH for 38.213</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201813</td>
<td>0128</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on Power Control for NR-DC</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201810</td>
<td>0129</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Type-3 CSS monitoring with PS-RNTI on primary cell</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201812</td>
<td>0131</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on correction on uplink power sharing for DAPS HO</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201812</td>
<td>0132</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on correction on PDCCH monitoring for DAPS HO</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201813</td>
<td>0133</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 on RRC parameter alignment for SCell dormancy</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201813</td>
<td>0134</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 on BWP triggering via SCell dormancy indication</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201813</td>
<td>0135</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 on HARQ-ACK processing timeline for DCI format 1_1 with
Scell dormancy indication without scheduling PDSCH</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201807</td>
<td>0136</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on Sidelink</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201809</td>
<td>0137</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on MIMO enhancements</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201805</td>
<td>0138</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on shared spectrum channel access</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201808</td>
<td>0139</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on Ultra Reliable Low Latency Communications
Enhancements</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-202015</td>
<td>0141</td>
<td style="text-align: center;">1</td>
<td>A</td>
<td>Extending 8 SSB support to the TDD bands with newly introduced 30
kHz Case C SSB pattern</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-09</td>
<td>RAN#89-e</td>
<td>RP-201847</td>
<td>0142</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on supplementary uplink in Rel-16 TS 38.213</td>
<td>16.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202379</td>
<td>0144</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>CR on HARQ-ACK Determination for SPS Release</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202383</td>
<td>0145</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections related to sidelink physical layer procedures</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202382</td>
<td>0146</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarify DCI Format 2_5 search space sets</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202380</td>
<td>0147</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on 2-step RACH for 38.213</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202385</td>
<td>0148</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on UL power control</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202388</td>
<td>0149</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Correction on uplink transmission cancellation for DAPS
handover</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202388</td>
<td>0150</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Correction on PUSCH processing capability for DAPS handover</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202388</td>
<td>0151</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Correction on intra-frequency DAPS handover</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202383</td>
<td>0152</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on the use of TDRA and FDRA fields SCI for Mode 1</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202383</td>
<td>0153</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections for the prioritization between uplink transmission and
sidelink transmission/reception</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202383</td>
<td>0154</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections related to the sidelink slot index</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202383</td>
<td>0155</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on sidelink pathloss calculation for S-SSB power
control</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202383</td>
<td>0156</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Correction on sidelink TDD configuration for OoC UEs</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202379</td>
<td>0158</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on HARQ-ACK generation for DL transmission with single TB
when multi-TB is configured</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202381</td>
<td>0159</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Miscellaneous corrections on NR unlicensed configured grant</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202383</td>
<td>0160</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Introduction of the preparation time for SL retransmissions in Mode
1</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202395</td>
<td>0161</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on uplink Tx switching</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202381</td>
<td>0163</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of NRU HARQ procedure in the presence of SPS PDSCH</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202381</td>
<td>0165</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 on NR-U 2-step RACH PO configuration</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202389</td>
<td>0166</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>38.213 CR for NR-DC power control</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202389</td>
<td>0167</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>38.213 CR Correction on HARQ-ACK codebook for secondary PUCCH
group</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202384</td>
<td>0168</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on Type2 HARQ-ACK codebook construction</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202384</td>
<td>0169</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on UL grant Type 2 PUSCH release for search space
sharing</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202384</td>
<td>0170</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PDCCH monitoring on cell(s) configured with Rel-15
PDCCH monitoring capability</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202383</td>
<td>0171</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on periodicity of resource pool bitmap</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202383</td>
<td>0172</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PSFCH and PSCCH mapping</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202385</td>
<td>0173</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on CBRA based BFR</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202381</td>
<td>0174</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 to correct references to 38.212 for RACH procedure</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202381</td>
<td>0175</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on remaining channel occupancy assumption</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202398</td>
<td>0176</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Alignment CR for TS 38.213</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202389</td>
<td>0177</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections for SCell dormancy indication</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2020-12</td>
<td>RAN#90-e</td>
<td>RP-202384</td>
<td>0178</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on handling overlapping PUCCH/PUSCH transmissions with
repetitions and with different priorities</td>
<td>16.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210055</td>
<td>0180</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Type-1 HARQ-ACK for PDSCH repetition with different SCSs in DL and
UL</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210047</td>
<td>0182</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on the search space configuration of PUCCH-SCell</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210055</td>
<td>0183</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on UCI multiplexing with PUCCH overriding</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210048</td>
<td>0184</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on transmission timing adjustment procedure in 38.213</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210055</td>
<td>0186</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction for cancellation due to PDSCH/CSI-RS/SFI</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210049</td>
<td>0187</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of Type-3 HARQ-ACK codebook generation for a PDSCH with
one transport block for a configuration with a maximum number of two
TBs</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210049</td>
<td>0188</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of UE reception of DL control when a DCI indicates a
request for a Type-3 HARQ-ACK codebook report without scheduling
PDSCH</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210049</td>
<td>0189</td>
<td style="text-align: center;">-</td>
<td>D</td>
<td>Correction on PUCCH power control for enhanced Type-2 HARQ-ACK
codebook and for Type-3 HARQ-ACK codebook</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210052</td>
<td>0190</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on HARQ-ACK</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210049</td>
<td>0191</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on search space set group switching without channel
occupancy duration field</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210052</td>
<td>0192</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on Scell BFR in Rel-16</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210058</td>
<td>0193</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on uplink Tx switching</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210050</td>
<td>0194</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections related to prioritization between uplink and
sidelink</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210050</td>
<td>0195</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Determination of indexes for slots for S-SS/PSBCH block
transmission(s)</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210050</td>
<td>0196</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Restrictions of the slots for S-SSB transmission/reception</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210051</td>
<td>0197</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on Timing for secondary cell activation / deactivation with
sub-slot PUCCH</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210051</td>
<td>0198</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on number of PUCCHs with HARQ-ACK in a slot</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210050</td>
<td>0199</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Correction of SL HARQ-ACK information reporting to the gNB in Mode
1</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210049</td>
<td>0200</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on LBT Type and CP Extension Indication for Semi-Static
Channel Occupancy in RAR</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210054</td>
<td>0201</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 on PRACH handling for NR-DC power control</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210054</td>
<td>0202</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to 38.213 on HARQ-ACK priority determination for SCell dormancy
indication</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210055</td>
<td>0203</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>38.213 CR on DCI ordering in a search space set</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210051</td>
<td>0204</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on <em>dci-FormatsExt</em> in clause 10.1 in TS
38.213</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210051</td>
<td>0205</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Resolving collision with semi-static DL and SSB symbols</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210051</td>
<td>0206</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PUCCH resource determination in clause 9.2.1 in TS
38.213</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210059</td>
<td>0207</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Editorial corrections for 38.213</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-03</td>
<td>RAN#91-e</td>
<td>RP-210126</td>
<td>0208</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Resubmission of CR179r1 on Correction on supplementary uplink in
38.213</td>
<td>16.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211234</td>
<td>0209</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on multiplexing timeline definition for Type-3 HARQ-ACK
codebook</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211234</td>
<td>0210</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on Type-3 HARQ-ACK codebook size ambiguity</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211250</td>
<td>0211</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR to TS 38.213 on clarifying DAPS HO impact on PUCCH repetition
counting</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211235</td>
<td>0212</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections for the reference signal used for sidelink power
control</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211237</td>
<td>0214</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections for separate HARQ-ACK feedback of multi-TRP
transmission</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211240</td>
<td>0215</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on half-duplex operation in CA with unpaired
spectrum</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211239</td>
<td>0216</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on MR-DC Uplink Power Control in 38.213</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211234</td>
<td>0217</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on MsgA PUSCH validation for semistatic channel
access</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211238</td>
<td>0218</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on the number of pathloss estimates maintained by the UE for SRS
for positioning.</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211249</td>
<td>0219</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Conditions for IAB-DU soft resource availability</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211235</td>
<td>0220</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of search space configuration for DCI formats 3_0 and
3_1</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211234</td>
<td>0221</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on SR reporting due to consistent LBT failure
recovery</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211236</td>
<td>0222</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on Prioritization Timeline</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211236</td>
<td>0223</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on the configuration for one PUCCH-Config with
subslotLengthForPUCCH-r16</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211236</td>
<td>0224</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on not supporting Type 1 HARQ-ACK codebook for sub-slot HARQ-ACK
in R16</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211236</td>
<td>0225</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on Number of PUCCH resource sets per PUCCH-config</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211236</td>
<td>0226</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on UL cancellation due to dynamic SFI</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211233</td>
<td>0228</td>
<td style="text-align: center;">1</td>
<td>A</td>
<td>Rel-15 editorial corrections for TS 38.213 (mirrored to Rel-16)</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211243</td>
<td>0229</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Rel-16 editorial corrections for TS 38.213</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211236</td>
<td>0230</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on UE procedure for determining physical downlink control
channel assignment for Rel-16 PDCCH monitoring capability</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211235</td>
<td>0232</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections for the multiplexing SL HARQ-ACK information on a
PUSCH</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211237</td>
<td>0233</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on simultaneous multi-CC TCI indication for CORESET</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211234</td>
<td>0234</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on HARQ-ACK codebook RRC parameter</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211234</td>
<td>0235</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Initial UL BWP size restriction for NR-U</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211235</td>
<td>0236</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of SL HARQ-ACK reporting when SL feedback is not
used</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211235</td>
<td>0237</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of SL HARQ-ACK reporting on UL for SL CG type 2</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211240</td>
<td>0239</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on UL cancellation due to DCI format 2_0</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211240</td>
<td>0240</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on half-duplex operation in CA with unpaired
spectrum</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211236</td>
<td>0241</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Handling collision between PUCCH/PUSCH and semi-static DL symbols
and SSBs</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211236</td>
<td>0242</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on Type-1 HARQ-ACK codebook</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211252</td>
<td>0243</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on value of 1-bit counter DAI</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211236</td>
<td>0244</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on correction for sub-slot based PUCCH</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-06</td>
<td>RAN#92-e</td>
<td>RP-211236</td>
<td>0245</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on clarification for reference point of sub-slot based PUCCH
resource</td>
<td>16.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211842</td>
<td>0246</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification on SL power control and SL type-1 HARQ-ACK codebook in
out of coverage case</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211842</td>
<td>0247</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Parameter name correction for PSSCH power control</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211844</td>
<td>0248</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on number of received PDSCHs for multi-TRP transmission</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211842</td>
<td>0249</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on synchronization procedure for sidelink
transmission</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211846</td>
<td>0250</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Corrections on SCell dormancy indication</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211843</td>
<td>0251</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Correction on overlapping between SPS HARQ-ACK with HP and SP
HARQ-ACK with LP</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211842</td>
<td>0252</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on Simultaneous NR SL and LTE SL Operation</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211842</td>
<td>0253</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification on PUCCH Power control</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211843</td>
<td>0254</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on Sub-slot Based HARQ-ACK Feedback for MAC CE
Activation/deactivation</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211842</td>
<td>0255</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of SL HARQ-ACK reporting on UL for skipped DG</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211842</td>
<td>0256</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on HARQ reporting for multiple pools with PSFCH</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211843</td>
<td>0257</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR for SPS Release and SPS PDSCH Receptions with Slot
Aggregation</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211850</td>
<td>0258</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Editorial corrections for TS 38.213</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-09</td>
<td>RAN#93-e</td>
<td>RP-211843</td>
<td>0259</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on HARQ-ACK timing</td>
<td>16.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212962</td>
<td>0260</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on Case 1 dormancy operation with data scheduling</td>
<td>16.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212959</td>
<td>0261</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on SL HARQ-ACK feedback reporting to gNB</td>
<td>16.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212959</td>
<td>0262</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification on UCI and SL HARQ-ACK</td>
<td>16.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212959</td>
<td>0263</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on priority order in power control for PSFCH</td>
<td>16.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212960</td>
<td>0264</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification on intra-UE prioritization/multiplexing on semi-static
symbols</td>
<td>16.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212961</td>
<td>0265</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on frequency hopping for PUCCH</td>
<td>16.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212960</td>
<td>0266</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>PUCCH multiplexing with SPS HARQ-ACK or SR within a sub-slot</td>
<td>16.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212964</td>
<td>0267</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Editorial corrections for TS 38.213</td>
<td>16.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212973</td>
<td>0268</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of coverage enhancements in NR</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212980</td>
<td>0269</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of dynamic spectrum sharing enhancements in NR</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212977</td>
<td>0270</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of enhanced IAB in NR</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212967</td>
<td>0271</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction for extending NR operation to 71 GHz</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212968</td>
<td>0272</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of IIoT/URLLC enhancements in NR</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212979</td>
<td>0273</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of multicast-broadcast services in NR</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212969</td>
<td>0274</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of non-terrestrial network operation in NR</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212971</td>
<td>0275</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of UEs with reduced capabilities in NR</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212972</td>
<td>0276</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of UE power savings enhancements in NR</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212966</td>
<td>0277</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of further enhancements on MIMO for NR</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-213524</td>
<td>0278</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of small data transmission in RRC_INACTIVE state for
NR</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2021-12</td>
<td>RAN#94-e</td>
<td>RP-212978</td>
<td>0279</td>
<td style="text-align: center;">-</td>
<td>B</td>
<td>Introduction of sidelink enhancements in NR</td>
<td>17.0.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220245</td>
<td>0281</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>CR on UE procedure for receiving HARQ-ACK on sidelink</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220247</td>
<td>0283</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Corrections on HARQ-ACK timing parameters for Rel-17</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220272</td>
<td>0285</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>CR on properties of tdd-UL-DL-ConfigurationDedicated and
tdd-UL-DL-configurationDedicated-IAB-MT</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220246</td>
<td>0287</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Clarification of the SPS PDSCH activation and HARQ-ACK transmission
for the 1st SPS PDSCH</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220249</td>
<td>0289</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Rel-16 editorial corrections for TS 38.213 (mirrored to Rel-17)</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220257</td>
<td>0290</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on coverage enhancements in NR</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220251</td>
<td>0291</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on extending NR operation to 71 GHz</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220252</td>
<td>0292</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on IIoT/URLLC enhancements in NR</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220263</td>
<td>0293</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on the introduction of multicast-broadcast services in
NR</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220262</td>
<td>0294</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on sidelink enhancements in NR</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220256</td>
<td>0295</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on UE power savings enhancements in NR</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220261</td>
<td>0296</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on eIAB</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220250</td>
<td>0297</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on further enhancements on MIMO for NR</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220271</td>
<td>0298</td>
<td style="text-align: center;">-</td>
<td>C</td>
<td>Introduction of carrier BW smaller than 40 MHz for n79</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220264</td>
<td>0299</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on dynamic spectrum sharing enhancements in NR</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220253</td>
<td>0300</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on non-terrestrial network operation in NR</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220254</td>
<td>0301</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on positioning enhancements in NR</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220255</td>
<td>0302</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on the introduction of UEs with reduced capabilities in
NR</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-03</td>
<td>RAN#95-e</td>
<td>RP-220270</td>
<td>0303</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on small data transmission in RRC_INACTIVE state for
NR</td>
<td>17.1.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221619</td>
<td>0305</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on Rel-16 SRS power control with 2-step RACH</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221597</td>
<td>0307</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>CR on reporting sidelink HARQ-ACK on uplink for SL CG Type 2 PSSCH
transmission</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221598</td>
<td>0309</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on PDCCH reception with last symbol aligning with the
first symbol of UL CI for Rel-17</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221620</td>
<td>0312</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Timeline requirement for retransmitting MSG1/MSGA</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221597</td>
<td>0314</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on SL HARQ-ACK reporting</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221620</td>
<td>0317</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction for HARQ-ACK multiplexing on PUSCH in the absence of
PUCCH</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221599</td>
<td>0319</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Rel-16 editorial corrections for TS 38.213 (mirrored to Rel-17)</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221601</td>
<td>0320</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on extending NR operation to 71 GHz</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221602</td>
<td>0321</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on IIoT/URLLC enhancements in NR</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221612</td>
<td>0322</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on the introduction of multicast-broadcast services in
NR</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221611</td>
<td>0323</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on sidelink enhancements in NR</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221606</td>
<td>0324</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on UE power savings enhancements in NR</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221610</td>
<td>0325</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on eIAB</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221600</td>
<td>0326</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on further enhancements on MIMO for NR</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221613</td>
<td>0327</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on dynamic spectrum sharing enhancements in NR</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221603</td>
<td>0328</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on non-terrestrial network operation in NR</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221605</td>
<td>0329</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on the introduction of UEs with reduced capabilities in
NR</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221618</td>
<td>0330</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on small data transmission in RRC_INACTIVE state for
NR</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-06</td>
<td>RAN#96</td>
<td>RP-221614</td>
<td>0331</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on further Multi-RAT Dual-Connectivity enhancements</td>
<td>17.2.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222400</td>
<td>0332</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PDCCH repetition with SSSG switching</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222397</td>
<td>0334</td>
<td style="text-align: center;">1</td>
<td>A</td>
<td>Correction on DCI format 3_0 reception</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222401</td>
<td>0335</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on the value of slot configuration period in TS 38.213
for the features extending NR operation to 71 GHz</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222404</td>
<td>0336</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of BWP for SRS</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222401</td>
<td>0337</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on the tables for determining Type0 PDCCH monitoring
occasions</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222418</td>
<td>0338</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections of redundancy version for SDT</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222403</td>
<td>0339</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>CR on the clarification of PUCCH resource determination in
38.213</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222403</td>
<td>0340</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>CR on the description about HARQ-feedbackEnablingforSPSactive in
38.213</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222401</td>
<td>0342</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on multi-slot PDCCH monitoring in NR-DC and CA scenarios
with mixed capability types</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222400</td>
<td>0343</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>CR on inter-cell mTRP when SSBs of additional PCI overlap with
UL</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222400</td>
<td>0344</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on default PUSCH power control parameters for mTRP PUSCH</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222400</td>
<td>0345</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR for power control of mTRP PUSCH repetition</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222401</td>
<td>0346</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on PDCCH monitoring enhancement for 52-71GHz
spectrum</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222402</td>
<td>0347</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction for HARQ-ACK codebook generation for PUCCH cell switching
and UL BWP switching</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222401</td>
<td>0348</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on a reference SCS configuration for co-DurationList in
TS 38.213</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222401</td>
<td>0349</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on Type-2 HARQ CB generation when both of spatial
bundling and time bundling are configured</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222401</td>
<td>0350</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on Type-2 HARQ CB generation when time bundling is
configured but spatial bundling is not configured</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222421</td>
<td>0352</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>CR on Rel-16 Type-1 HARQ-ACK codebook in PUCCH for SCell
dormancy</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222400</td>
<td>0354</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of CSI assumptions over multiplexing NCJT CSI reports in
PUCCH</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222402</td>
<td>0355</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on HP DG PUSCH and LP CG PUSCH collision resolution</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222398</td>
<td>0357</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction for Intra-UE multiplexing/prioritization of the same
priority</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222418</td>
<td>0358</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections of random-access based small data transmission</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222401</td>
<td>0359</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on CD-SSB frequency indication using NCD-SSB in
TS38.213</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222405</td>
<td>0360</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections and clarifications of RedCap UE procedures</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222398</td>
<td>0362</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Corrections on presence of redundancy version field and HARQ process
number field of DCI formats 0_2/1_2 for validation of activation and
release DCI format</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222417</td>
<td>0364</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on PL RS determination for PUSCH scheduled by DCI format
0_0</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222406</td>
<td>0365</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on UE Power Saving Enhancements for NR in TS 38.213</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222412</td>
<td>0366</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on the introduction of multicast-broadcast services in
NR</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-09</td>
<td>RAN#97-e</td>
<td>RP-222422</td>
<td>0367</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Rel-17 editorial corrections for TS 38.213</td>
<td>17.3.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222849</td>
<td>0369</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on SL BWP in TS 38.213</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222853</td>
<td>0370</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR for ChannelAccess-CPext in RAR UL grant in FR2-2</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222853</td>
<td>0371</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on spatial domain filter for sensing for PUCCH transmission in
FR2-2</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222853</td>
<td>0372</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction for multi-slot PDCCH monitoring in FR2-2</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222853</td>
<td>0373</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction for BD/CCE budget of scheduling cell(s) in FR2-2</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222853</td>
<td>0374</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction for SSSG switching with multiple cells in FR2-2</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222855</td>
<td>0375</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on the Type-2 HARQ-ACK codebook</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222866</td>
<td>0376</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on deltapreamble of feature combination</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222871</td>
<td>0378</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on HARQ-ACK multiplexing on multi-PUSCHs without PUCCH
for Rel-16 NR-U</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222854</td>
<td>0379</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on enhanced Type 3 HARQ-ACK codebook and HARQ-ACK
re-transmission triggering</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222857</td>
<td>0380</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections and clarifications of RedCap UE procedures</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222854</td>
<td>0381</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on multiplexing for SPS HARQ-ACK</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222853</td>
<td>0382</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on BD/CCE decoding with release-specific number of
serving cell(s) for NR operation in FR2-2</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0383</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PDCCH monitoring when overlapping with the rate matching
pattern to TS 38.213</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222858</td>
<td>0384</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on UE power saving enhancements for NR in TS 38.213</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222854</td>
<td>0385</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on power control for PUCCH</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222870</td>
<td>0386</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on parallel transmission of PRACH and
SRS/PUCCH/PUSCH</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0387</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on multiplexing NACK-only mode1 with others</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0388</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on codebook type for NACK-only HARQ-ACK feedback</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0389</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on HARQ-ACK feedback for PDSCH scheduled by DCI format 4_1</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0390</td>
<td style="text-align: center;">2</td>
<td>F</td>
<td>CR on DAI counting for ‘dci-enabler’ in DCI indicating value 0</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222852</td>
<td>0391</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PHR with unified TCI in TS 38.213</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222862</td>
<td>0392</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on the formula of Case-7 UL Tx timing for eIAB in TS
38.213</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222862</td>
<td>0393</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on guard symbols MAC CEs</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222862</td>
<td>0394</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on timing case indication</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222862</td>
<td>0395</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on coexistence of Rel-17 and Rel-16 HSNA
configuration</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222870</td>
<td>0396</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on ra-SearchSpace for DCI format 0_0</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222850</td>
<td>0398</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on UL prioritization cases related to SP-CSI</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0399</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on SS0 availability for scheduling MBS to TS 38.213</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0400</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PUCCH resource determination of SPS multicast HARQ-ACK</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0401</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PUCCH resource determination for multiplexing dynamic
multicast HARQ-ACK and SPS unicast HARQ-ACK</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0402</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>CR on handling SR and NACK-only collision</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222863</td>
<td>0403</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on conditions for UE to be UE-B for Condition 2-A-2 of
Scheme 2</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222863</td>
<td>0404</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on the determination of the priority value of PSFCH
transmission with conflict information due to Condition 2-A-2 of Scheme
2</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222850</td>
<td>0406</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on overlapping PUCCHs with repetitions of a same
priority</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222854</td>
<td>0407</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on CSI on LP PUSCH with CG-UCI</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222854</td>
<td>0408</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of PUCCH repetition for semi-static PUCCH cell
switching</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0409</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on dci-enabler for Type1 HARQ-ACK CB for multicast</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222869</td>
<td>0411</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on SCS configuration for parallel transmission of PRACH
and SRS/PUCCH/PUSCH</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222868</td>
<td>0412</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Rel-17 editorial corrections for TS 38.213</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222852</td>
<td>0413</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PDCCH monitoring for inter-cell beam management</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222852</td>
<td>0414</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification on HARQ feedback for TCI state update indication</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0415</td>
<td style="text-align: center;">2</td>
<td>F</td>
<td>CR on interpretation of <em>moreThanOneNackOnlyMode</em></td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0416</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on NACK-only mode 2 multicast feedback</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0417</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on alignment of <em>moreThanOneNackOnlyMode</em></td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222854</td>
<td>0419</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on triggering of enhanced Type-3 codebook</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222854</td>
<td>0420</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PUCCH cell switching</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222854</td>
<td>0421</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on HARQ-ACK reporting on PUSCH for Rel-17 Intra-UE
multiplexing</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222869</td>
<td>0423</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Clarification on timelines for power control command</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222858</td>
<td>0424</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PDCCH monitoring adaptation and BWP switching</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222853</td>
<td>0425</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of number of configured DL-CCs for BD/CCE budget for
FR2-2</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222853</td>
<td>0426</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on per-slot group monitoring within a duration for
FR2-2</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222850</td>
<td>0428</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on UL prioritization cases related to SP-CSI in TS
38.213</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0429</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on broadcast search space monitoring occasion determination</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222862</td>
<td>0430</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on RB set size for Rel-17 IAB HSNA configuration</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222862</td>
<td>0431</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on DL TX power adjustment for Rel-17 IAB</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0432</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PUCCH resource determination of multicast HARQ-ACK</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0433</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on multiplexing HARQ-ACK for DG and SPS multicast and
unicast</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0434</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on HARQ-ACK codebook generation for RRC disabled HARQ-ACK
feedback</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222864</td>
<td>0435</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on NACK-only mode 2 multicast feedback</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222870</td>
<td>0436</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on SL open loop power control parameters</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2022-12</td>
<td>RAN#98-e</td>
<td>RP-222869</td>
<td>0438</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Rel-16 editorial corrections for TS 38.213 (mirrored to Rel-17)</td>
<td>17.4.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230447</td>
<td>0439</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on PDCCH Skipping</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230451</td>
<td>0440</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on HARQ-ACK timing for multicast</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230451</td>
<td>0441</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on multiplexing Type-2 HARQ-ACK codebook in a PUSCH</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230443</td>
<td>0442</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Miscellaneous corrections on Rel-17 URLLC / IIoT in 38.213</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230445</td>
<td>0444</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>CR on positioning SRS power control in 38.213</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230441</td>
<td>0445</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PHR for mTRP PUSCH repetitions</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230451</td>
<td>0446</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on broadcast PDCCH monitoring in active DL BWP</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230452</td>
<td>0447</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on repetition for CG-SDT</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230442</td>
<td>0448</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections to r17 PDCCH monitoring capability for CA and DC</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230450</td>
<td>0449</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification on the timeline of transmitting/receiving PSFCH with
control information</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230441</td>
<td>0450</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections for Beam Failure Recovery related to unified TCI state
framework</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230451</td>
<td>0452</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PUCCH resource for UE configured with NACK-only mode2 for
SPS</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230451</td>
<td>0453</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PUCCH resources for multiplexing multicast HARQ-ACK</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230446</td>
<td>0454</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on impact of HD-FDD operation for RedCap UE</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230449</td>
<td>0455</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on availability indication for eIAB</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230449</td>
<td>0456</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR editorial correction on RRC parameters</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230449</td>
<td>0457</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on the availability of a soft RB set in an RB set group
in TS38.213</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230444</td>
<td>0458</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on the Type-1 HARQ-ACK codebook</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230439</td>
<td>0460</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Corrections on PSFCH power determination in TS 38.213</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230440</td>
<td>0462</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Rel-16 editorial corrections for TS 38.213 (mirrored to Rel-17)</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-03</td>
<td>RAN#99</td>
<td>RP-230453</td>
<td>0463</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Rel-17 editorial corrections for TS 38.213</td>
<td>17.5.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231230</td>
<td>0466</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on the mapping of PDSCH-to-HARQ_feedback timing indicator
field values in Rel-17</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231220</td>
<td>0467</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on enhanced type-3 HARQ-ACK codebook</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231221</td>
<td>0468</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on Type-3 HARQ-ACK codebook</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231227</td>
<td>0470</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Clarification of HARQ-ACK transmission for the 1st SPS PDSCH</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231228</td>
<td>0472</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on impact of DAPS handover in Rel-17</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231225</td>
<td>0473</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on redundancy version for CG-SDT in TS 38.213</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231232</td>
<td>0474</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on Type1 HARQ-ACK CB issue with more than one PDSCH per slot</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231219</td>
<td>0475</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on value range mismatch of p0 for SRS in Rel-17 unified TCI
framework</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231222</td>
<td>0476</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on RRC parameters in eIAB</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231222</td>
<td>0477</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on reference SCS for availability indication in eIAB</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231224</td>
<td>0478</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on condition for not providing Type-1 CB</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231224</td>
<td>0479</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on Type-1 HARQ-ACK codebook for multicast</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231224</td>
<td>0480</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on HARQ-ACK for SPS release</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231224</td>
<td>0481</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on SPS release via multicast DCI</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231225</td>
<td>0482</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification of RA-SDT operation for RedCap UEs in TDD</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-06</td>
<td>RAN#100</td>
<td>RP-231226</td>
<td>0483</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Rel-17 editorial corrections for TS 38.213</td>
<td>17.6.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232448</td>
<td>0484</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on description of valid PSFCH occasion for scheme 2 in TS
38.213</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232447</td>
<td>0485</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Miscellaneous corrections on Rel-17 enhanced URLLC &amp; IIoT</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232446</td>
<td>0486</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on HARQ-ACK timing for FR2-2</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232457</td>
<td>0487</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Corrections on PDCCH Monitoring Adaptation</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232457</td>
<td>0488</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Alignment on SSSG Switching</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232455</td>
<td>0489</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction to CORESET0 selection for new BWs of bands n79 and
n104</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232449</td>
<td>0490</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on multiplexing NACK-only, CSI and SR in a PUCCH</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232453</td>
<td>0491</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on Type-2 HARQ-ACK codebook</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232451</td>
<td>0493</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction on DCI 2_0 fields for operation with shared spectrum
channel access</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232450</td>
<td>0495</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification of TDD UL validation and SDT operation for RedCap
UEs</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232449</td>
<td>0496</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on HARQ-ACK codebook for maxNrofCodeWords</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232449</td>
<td>0497</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on K1 timing for type 1 codebook</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232449</td>
<td>0498</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on HARQ-ACK codebook for multicast SPS</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232531</td>
<td>0499</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Rel-17 editorial corrections for TS 38.213</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-09</td>
<td>RAN#101</td>
<td>RP-232696</td>
<td>0512</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Correction to SCell PRACH power scaling for UL CA</td>
<td>17.7.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233698</td>
<td>0517</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on minimum time gap for DCI format 2_6</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233702</td>
<td>0519</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on Type1A search space for SDT</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233698</td>
<td>0521</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Correction on Type-2 HARQ-ACK codebook for multi-slot
scheduling</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233698</td>
<td>0523</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PUCCH power determination for Type-2 HARQ-ACK
codebook</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233701</td>
<td>0525</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on Type-2 HARQ-ACK codebook on PUSCH</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233701</td>
<td>0527</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PUCCH resources for multicast HARQ-ACK</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233723</td>
<td>0530</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>CR on SL NACK report to gNB in mode 1 (Rel-17)</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233727</td>
<td>0532</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on multiple DCIs per MO per CC for the Type-2 HARQ-ACK
codebook</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233727</td>
<td>0534</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Path Loss reference RS for SCell UL PC when PL RS is not
configured</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233727</td>
<td>0536</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification of HARQ-ACK for MsgB PDSCH</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233699</td>
<td>0538</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on PUCCH power control parameter determination</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233697</td>
<td>0540</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on HARQ feedback for TCI state update indication</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233734</td>
<td>0542</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on transmission timing adjustments for Rel-17 NR-NTN</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233698</td>
<td>0544</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on CSI related timeline for 480/960 kHz</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233730</td>
<td>0547</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>CR on default pathloss reference signal for SRS and PUCCH</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233704</td>
<td>0550</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of PDCCH monitoring adaptation behaviour for DRX
groups</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233701</td>
<td>0552</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on Type-1 HARQ-ACK codebook on PUSCH</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233701</td>
<td>0554</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on PDCCH monitoring in Type0B CSS for HD-FDD RedCap UEs</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233727</td>
<td>0556</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on Simultaneous PUCCH and PUSCH transmission with same priority
in UL CA</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233727</td>
<td>0558</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification on the first SPS PDSCH and Type2 CG PUSCH</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233701</td>
<td>0560</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>CR on HARQ-ACK for SPS PDSCH</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233736</td>
<td>0563</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction of monitoring of paging occasions for CG-SDT with HD-FDD
RedCap UEs</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233736</td>
<td>0565</td>
<td style="text-align: center;">1</td>
<td>F</td>
<td>Correction of PUCCH repetition for RedCap UE with NCD-SSB in
TDD</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2023-12</td>
<td>RAN#102</td>
<td>RP-233728</td>
<td>0570</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Rel-17 editorial corrections for TS 38.213</td>
<td>17.8.0</td>
</tr>
<tr>
<td style="text-align: center;">2024-03</td>
<td>RAN#103</td>
<td>RP-240541</td>
<td>0588</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on actual time domain window for DMRS bundling</td>
<td>17.9.0</td>
</tr>
<tr>
<td style="text-align: center;">2024-03</td>
<td>RAN#103</td>
<td>RP-240534</td>
<td>0590</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Correction on Case 1 dormancy operation with data scheduling</td>
<td>17.9.0</td>
</tr>
<tr>
<td style="text-align: center;">2024-03</td>
<td>RAN#103</td>
<td>RP-240532</td>
<td>0594</td>
<td style="text-align: center;">-</td>
<td>A</td>
<td>Correction to SL transmission power without an RSRP report</td>
<td>17.9.0</td>
</tr>
<tr>
<td style="text-align: center;">2024-03</td>
<td>RAN#103</td>
<td>RP-240534</td>
<td>0597</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Clarification on SCell Type 1 virtual PHR reporting in UL CA</td>
<td>17.9.0</td>
</tr>
<tr>
<td style="text-align: center;">2024-03</td>
<td>RAN#103</td>
<td>RP-240535</td>
<td>0602</td>
<td style="text-align: center;">-</td>
<td>F</td>
<td>Rel-17 editorial corrections for TS 38.213</td>
<td>17.9.0</td>
</tr>
</tbody>
</table>
</body>
</html>
